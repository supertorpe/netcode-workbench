System.register([],(function(t){"use strict";return{execute:function(){t("b",Ln);let e=t("j",{version:"4.13.0",date:"2021-11-24 11:58",ajaxAlwaysCallbacks:[],autopositionSpacing:4,closeOnEscape:void document.addEventListener("keydown",(t=>{"Escape"!==t.key&&"Escape"!==t.code&&"Esc"!==t.key||e.getPanels((t=>t.classList.contains("jsPanel"))).some((t=>!!t.options.closeOnEscape&&("function"==typeof t.options.closeOnEscape?t.options.closeOnEscape.call(t,t):(t.close(null,!0),!0))))}),!1),defaults:{boxShadow:3,container:"window",contentSize:{width:"400px",height:"200px"},dragit:{cursor:"move",handles:".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",opacity:.8,disableOnMaximized:!0},header:!0,headerTitle:"jsPanel",headerControls:{size:"md"},iconfont:void 0,maximizedMargin:0,minimizeTo:"default",paneltype:"standard",position:{my:"center",at:"center"},resizeit:{handles:"n, e, s, w, ne, se, sw, nw",minWidth:128,minHeight:38},theme:"default"},defaultAutocloseConfig:{time:"8s",progressbar:!0},defaultSnapConfig:{sensitivity:70,trigger:"panel",active:"both"},extensions:{},globalCallbacks:!1,icons:{close:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M13.7,11l6.1-6.1c0.4-0.4,0.4-0.9,0-1.3l-1.4-1.4c-0.4-0.4-0.9-0.4-1.3,0L11,8.3L4.9,2.3C4.6,1.9,4,1.9,3.7,2.3L2.3,3.7 C1.9,4,1.9,4.6,2.3,4.9L8.3,11l-6.1,6.1c-0.4,0.4-0.4,0.9,0,1.3l1.4,1.4c0.4,0.4,0.9,0.4,1.3,0l6.1-6.1l6.1,6.1 c0.4,0.4,0.9,0.4,1.3,0l1.4-1.4c0.4-0.4,0.4-0.9,0-1.3L13.7,11z"/></svg>',maximize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H3.7C2.8,2,2,2.9,2,3.9v14.1C2,19.1,2.8,20,3.7,20h14.6c0.9,0,1.7-0.9,1.7-1.9V3.9C20,2.9,19.2,2,18.3,2z M18.3,17.8 c0,0.1-0.1,0.2-0.2,0.2H3.9c-0.1,0-0.2-0.1-0.2-0.2V8.4h14.6V17.8z"/></svg>',normalize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H7.1C6.1,2,5.4,2.8,5.4,3.7v1.7H3.7C2.8,5.4,2,6.1,2,7.1v11.3C2,19.2,2.8,20,3.7,20h11.3c0.9,0,1.7-0.8,1.7-1.7v-1.7 h1.7c0.9,0,1.7-0.8,1.7-1.7V3.7C20,2.8,19.2,2,18.3,2z M14.9,18.3H3.7V11h11.3V18.3z M18.3,14.9h-1.7V7.1c0-0.9-0.8-1.7-1.7-1.7H7.1 V3.7h11.3V14.9z"/></svg>',minimize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.9,19.8H3.1c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h15.8c0.6,0,1.1,0.5,1.1,1.1S19.5,19.8,18.9,19.8z"/></svg>',smallify:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M2.1,15.2L2.9,16c0.2,0.2,0.5,0.2,0.7,0L11,8.7l7.4,7.3c0.2,0.2,0.5,0.2,0.7,0l0.8-0.8c0.2-0.2,0.2-0.5,0-0.7L11.3,6 c-0.2-0.2-0.5-0.2-0.7,0l-8.5,8.5C2,14.7,2,15,2.1,15.2z"/></svg>'},idCounter:0,isIE:navigator.appVersion.match(/Trident/),pointerdown:"onpointerdown"in window?["pointerdown"]:"ontouchend"in window?["touchstart","mousedown"]:["mousedown"],pointermove:"onpointermove"in window?["pointermove"]:"ontouchend"in window?["touchmove","mousemove"]:["mousemove"],pointerup:"onpointerup"in window?["pointerup"]:"ontouchend"in window?["touchend","mouseup"]:["mouseup"],polyfills:(Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==t)throw new TypeError("Cannot convert first argument to object");let e=Object(t);for(let n=1;n<arguments.length;n++){let t=arguments[n];if(null==t)continue;t=Object(t);let i=Object.keys(Object(t));for(let n=0,r=i.length;n<r;n++){let r=i[n],o=Object.getOwnPropertyDescriptor(t,r);void 0!==o&&o.enumerable&&(e[r]=t[r])}}return e}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(let n=0;n<this.length;n++)t.call(e,this[n],n,this)}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){t.append=t.append||function(){let t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){let n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))})),this.appendChild(e)}})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let e,n=(this.document||this.ownerDocument).querySelectorAll(t),i=this;do{for(e=n.length;--e>=0&&n.item(e)!==i;);}while(e<0&&(i=i.parentElement));return i}),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};let n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return e<this.length?e|=0:e=this.length,this.substr(e-t.length,t.length)===t}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},void(Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');let n=Object(this),i=n.length>>>0;if(0===i)return!1;let r=0|e,o=Math.max(r>=0?r:i-Math.abs(r),0);for(;o<i;){if((s=n[o])===(a=t)||"number"==typeof s&&"number"==typeof a&&isNaN(s)&&isNaN(a))return!0;o++}var s,a;return!1}}))),themes:["default","primary","secondary","info","success","warning","danger","light","dark"],ziBase:100,colorFilledLight:.81,colorFilledDark:.08,colorFilled:0,colorBrightnessThreshold:.55,colorNames:{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32",grey50:"fafafa",grey100:"f5f5f5",grey200:"eee",grey300:"e0e0e0",grey400:"bdbdbd",grey500:"9e9e9e",grey600:"757575",grey700:"616161",grey800:"424242",grey900:"212121",gray50:"fafafa",gray100:"f5f5f5",gray200:"eee",gray300:"e0e0e0",gray400:"bdbdbd",gray500:"9e9e9e",gray600:"757575",gray700:"616161",gray800:"424242",gray900:"212121",bluegrey50:"eceff1",bluegrey100:"CFD8DC",bluegrey200:"B0BEC5",bluegrey300:"90A4AE",bluegrey400:"78909C",bluegrey500:"607D8B",bluegrey600:"546E7A",bluegrey700:"455A64",bluegrey800:"37474F",bluegrey900:"263238",bluegray50:"eceff1",bluegray100:"CFD8DC",bluegray200:"B0BEC5",bluegray300:"90A4AE",bluegray400:"78909C",bluegray500:"607D8B",bluegray600:"546E7A",bluegray700:"455A64",bluegray800:"37474F",bluegray900:"263238",red50:"FFEBEE",red100:"FFCDD2",red200:"EF9A9A",red300:"E57373",red400:"EF5350",red500:"F44336",red600:"E53935",red700:"D32F2F",red800:"C62828",red900:"B71C1C",reda100:"FF8A80",reda200:"FF5252",reda400:"FF1744",reda700:"D50000",pink50:"FCE4EC",pink100:"F8BBD0",pink200:"F48FB1",pink300:"F06292",pink400:"EC407A",pink500:"E91E63",pink600:"D81B60",pink700:"C2185B",pink800:"AD1457",pink900:"880E4F",pinka100:"FF80AB",pinka200:"FF4081",pinka400:"F50057",pinka700:"C51162",purple50:"F3E5F5",purple100:"E1BEE7",purple200:"CE93D8",purple300:"BA68C8",purple400:"AB47BC",purple500:"9C27B0",purple600:"8E24AA",purple700:"7B1FA2",purple800:"6A1B9A",purple900:"4A148C",purplea100:"EA80FC",purplea200:"E040FB",purplea400:"D500F9",purplea700:"AA00FF",deeppurple50:"EDE7F6",deeppurple100:"D1C4E9",deeppurple200:"B39DDB",deeppurple300:"9575CD",deeppurple400:"7E57C2",deeppurple500:"673AB7",deeppurple600:"5E35B1",deeppurple700:"512DA8",deeppurple800:"4527A0",deeppurple900:"311B92",deeppurplea100:"B388FF",deeppurplea200:"7C4DFF",deeppurplea400:"651FFF",deeppurplea700:"6200EA",indigo50:"E8EAF6",indigo100:"C5CAE9",indigo200:"9FA8DA",indigo300:"7986CB",indigo400:"5C6BC0",indigo500:"3F51B5",indigo600:"3949AB",indigo700:"303F9F",indigo800:"283593",indigo900:"1A237E",indigoa100:"8C9EFF",indigoa200:"536DFE",indigoa400:"3D5AFE",indigoa700:"304FFE",blue50:"E3F2FD",blue100:"BBDEFB",blue200:"90CAF9",blue300:"64B5F6",blue400:"42A5F5",blue500:"2196F3",blue600:"1E88E5",blue700:"1976D2",blue800:"1565C0",blue900:"0D47A1",bluea100:"82B1FF",bluea200:"448AFF",bluea400:"2979FF",bluea700:"2962FF",lightblue50:"E1F5FE",lightblue100:"B3E5FC",lightblue200:"81D4FA",lightblue300:"4FC3F7",lightblue400:"29B6F6",lightblue500:"03A9F4",lightblue600:"039BE5",lightblue700:"0288D1",lightblue800:"0277BD",lightblue900:"01579B",lightbluea100:"80D8FF",lightbluea200:"40C4FF",lightbluea400:"00B0FF",lightbluea700:"0091EA",cyan50:"E0F7FA",cyan100:"B2EBF2",cyan200:"80DEEA",cyan300:"4DD0E1",cyan400:"26C6DA",cyan500:"00BCD4",cyan600:"00ACC1",cyan700:"0097A7",cyan800:"00838F",cyan900:"006064",cyana100:"84FFFF",cyana200:"18FFFF",cyana400:"00E5FF",cyana700:"00B8D4",teal50:"E0F2F1",teal100:"B2DFDB",teal200:"80CBC4",teal300:"4DB6AC",teal400:"26A69A",teal500:"009688",teal600:"00897B",teal700:"00796B",teal800:"00695C",teal900:"004D40",teala100:"A7FFEB",teala200:"64FFDA",teala400:"1DE9B6",teala700:"00BFA5",green50:"E8F5E9",green100:"C8E6C9",green200:"A5D6A7",green300:"81C784",green400:"66BB6A",green500:"4CAF50",green600:"43A047",green700:"388E3C",green800:"2E7D32",green900:"1B5E20",greena100:"B9F6CA",greena200:"69F0AE",greena400:"00E676",greena700:"00C853",lightgreen50:"F1F8E9",lightgreen100:"DCEDC8",lightgreen200:"C5E1A5",lightgreen300:"AED581",lightgreen400:"9CCC65",lightgreen500:"8BC34A",lightgreen600:"7CB342",lightgreen700:"689F38",lightgreen800:"558B2F",lightgreen900:"33691E",lightgreena100:"CCFF90",lightgreena200:"B2FF59",lightgreena400:"76FF03",lightgreena700:"64DD17",lime50:"F9FBE7",lime100:"F0F4C3",lime200:"E6EE9C",lime300:"DCE775",lime400:"D4E157",lime500:"CDDC39",lime600:"C0CA33",lime700:"AFB42B",lime800:"9E9D24",lime900:"827717",limea100:"F4FF81",limea200:"EEFF41",limea400:"C6FF00",limea700:"AEEA00",yellow50:"FFFDE7",yellow100:"FFF9C4",yellow200:"FFF59D",yellow300:"FFF176",yellow400:"FFEE58",yellow500:"FFEB3B",yellow600:"FDD835",yellow700:"FBC02D",yellow800:"F9A825",yellow900:"F57F17",yellowa100:"FFFF8D",yellowa200:"FFFF00",yellowa400:"FFEA00",yellowa700:"FFD600",amber50:"FFF8E1",amber100:"FFECB3",amber200:"FFE082",amber300:"FFD54F",amber400:"FFCA28",amber500:"FFC107",amber600:"FFB300",amber700:"FFA000",amber800:"FF8F00",amber900:"FF6F00",ambera100:"FFE57F",ambera200:"FFD740",ambera400:"FFC400",ambera700:"FFAB00",orange50:"FFF3E0",orange100:"FFE0B2",orange200:"FFCC80",orange300:"FFB74D",orange400:"FFA726",orange500:"FF9800",orange600:"FB8C00",orange700:"F57C00",orange800:"EF6C00",orange900:"E65100",orangea100:"FFD180",orangea200:"FFAB40",orangea400:"FF9100",orangea700:"FF6D00",deeporange50:"FBE9E7",deeporange100:"FFCCBC",deeporange200:"FFAB91",deeporange300:"FF8A65",deeporange400:"FF7043",deeporange500:"FF5722",deeporange600:"F4511E",deeporange700:"E64A19",deeporange800:"D84315",deeporange900:"BF360C",deeporangea100:"FF9E80",deeporangea200:"FF6E40",deeporangea400:"FF3D00",deeporangea700:"DD2C00",brown50:"EFEBE9",brown100:"D7CCC8",brown200:"BCAAA4",brown300:"A1887F",brown400:"8D6E63",brown500:"795548",brown600:"6D4C41",brown700:"5D4037",brown800:"4E342E",brown900:"3E2723"},errorReporting:1,modifier:!1,helper:(document.addEventListener("keydown",(t=>{e.modifier=t})),void document.addEventListener("keyup",(()=>{e.modifier=!1}))),usePointerEvents(t=!0){t?(this.pointerdown="onpointerdown"in window?["pointerdown"]:"ontouchend"in window?["touchstart","mousedown"]:["mousedown"],this.pointermove="onpointermove"in window?["pointermove"]:"ontouchend"in window?["touchmove","mousemove"]:["mousemove"],this.pointerup="onpointerup"in window?["pointerup"]:"ontouchend"in window?["touchend","mouseup"]:["mouseup"]):(this.pointerdown="ontouchend"in window?["touchstart","mousedown"]:["mousedown"],this.pointermove="ontouchend"in window?["touchmove","mousemove"]:["mousemove"],this.pointerup="ontouchend"in window?["touchend","mouseup"]:["mouseup"])},color(t){let e,n,i,r,o,s,a,l,c,u=t.toLowerCase(),h={};const m=/^rgba?\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3}),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,p=/^hsla?\(([0-9]{1,3}),([0-9]{1,3}%),([0-9]{1,3}%),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,d=this.colorNames;return d[u]&&(u=d[u]),null!==u.match(/^#?([0-9a-f]{3}|[0-9a-f]{6})$/gi)?((u=u.replace("#","")).length%2==1?(e=String(u.substr(0,1))+u.substr(0,1),n=String(u.substr(1,1))+u.substr(1,1),i=String(u.substr(2,1))+u.substr(2,1),h.rgb={r:parseInt(e,16),g:parseInt(n,16),b:parseInt(i,16)},h.hex=`#${e}${n}${i}`):(h.rgb={r:parseInt(u.substr(0,2),16),g:parseInt(u.substr(2,2),16),b:parseInt(u.substr(4,2),16)},h.hex=`#${u}`),c=this.rgbToHsl(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl=c,h.rgb.css=`rgb(${h.rgb.r},${h.rgb.g},${h.rgb.b})`):u.match(m)?(a=m.exec(u),h.rgb={css:u,r:a[1],g:a[2],b:a[3]},h.hex=this.rgbToHex(a[1],a[2],a[3]),c=this.rgbToHsl(a[1],a[2],a[3]),h.hsl=c):u.match(p)?(r=(a=p.exec(u))[1]/360,o=a[2].substr(0,a[2].length-1)/100,s=a[3].substr(0,a[3].length-1)/100,l=this.hslToRgb(r,o,s),h.rgb={css:`rgb(${l[0]},${l[1]},${l[2]})`,r:l[0],g:l[1],b:l[2]},h.hex=this.rgbToHex(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl={css:`hsl(${a[1]},${a[2]},${a[3]})`,h:a[1],s:a[2],l:a[3]}):(h.hex="#f5f5f5",h.rgb={css:"rgb(245,245,245)",r:245,g:245,b:245},h.hsl={css:"hsl(0,0%,96%)",h:0,s:"0%",l:"96%"}),h},calcColors(t){const e=this.colorBrightnessThreshold,n=this.color(t),i=this.lighten(t,this.colorFilledLight),r=this.darken(t,this.colorFilled),o=this.perceivedBrightness(t)<=e?"#ffffff":"#000000",s=this.perceivedBrightness(i)<=e?"#ffffff":"#000000",a=this.perceivedBrightness(r)<=e?"#ffffff":"#000000",l=this.lighten(t,this.colorFilledDark),c=this.perceivedBrightness(l)<=e?"#ffffff":"#000000";return[n.hsl.css,i,r,o,s,a,l,c]},darken(t,e){const n=this.color(t).hsl,i=parseFloat(n.l),r=Math.round(i-i*e)+"%";return`hsl(${n.h},${n.s},${r})`},lighten(t,e){const n=this.color(t).hsl,i=parseFloat(n.l),r=Math.round(i+(100-i)*e)+"%";return`hsl(${n.h},${n.s},${r})`},hslToRgb(t,e,n){let i,r,o;if(0===e)i=r=o=n;else{let s=(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=s(l,a,t+1/3),r=s(l,a,t),o=s(l,a,t-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*o)]},rgbToHsl(t,e,n){t/=255,e/=255,n/=255;let i,r,o=Math.max(t,e,n),s=Math.min(t,e,n),a=(o+s)/2;if(o===s)i=r=0;else{let l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{css:"hsl("+(i=Math.round(360*i))+","+(r=Math.round(100*r)+"%")+","+(a=Math.round(100*a)+"%")+")",h:i,s:r,l:a}},rgbToHex(t,e,n){let i=Number(t).toString(16),r=Number(e).toString(16),o=Number(n).toString(16);return 1===i.length&&(i=`0${i}`),1===r.length&&(r=`0${r}`),1===o.length&&(o=`0${o}`),`#${i}${r}${o}`},perceivedBrightness(t){const e=this.color(t).rgb;return e.r/255*.2126+e.g/255*.7152+e.b/255*.0722},pOposition(t){let e={},n=t.trim().split(/\s+/),i=n.filter((t=>t.match(/^(down|right|up|left)$/i)));i.length&&(e.autoposition=i[0],n.splice(n.indexOf(i[0]),1));let r=n.filter((t=>t.match(/^(left-|right-)(top|center|bottom)$|(^center-)(top|bottom)$|(^center$)/i)));r.length?(e.my=r[0],e.at=r[1]||r[0],n.splice(n.indexOf(r[0]),1),r[1]&&n.splice(n.indexOf(r[1]),1)):(e.my="center",e.at="center");let o=n.filter((t=>t.match(/^[+-]?\d*\.?\d+[a-z%]*$/i)));return o.length&&(e.offsetX=o[0].match(/^[+-]?\d*\.?\d+$/i)?`${o[0]}px`:o[0],o[1]?e.offsetY=o[1].match(/^[+-]?\d*\.?\d+$/i)?`${o[1]}px`:o[1]:e.offsetY=e.offsetX,n.splice(n.indexOf(o[0]),1),o[1]&&n.splice(n.indexOf(o[1]),1)),n.length&&(e.of=n.join(" ")),e},position(t,e){if(!e)return t.style.opacity=1,t;e="string"==typeof e?Object.assign({},this.defaults.position,this.pOposition(e)):Object.assign({},this.defaults.position,e),["my","at","of"].forEach((n=>{"function"==typeof e[n]&&(e[n]=e[n].call(t,t))})),"window"===t.options.container&&(t.style.position="fixed"),"string"==typeof t?t=document.querySelector(t):Object.getPrototypeOf(t).jquery&&(t=t[0]);const n="window"===t.options.container?"window":t.parentElement,i=t.getBoundingClientRect(),r=t.parentElement.getBoundingClientRect(),o="window"===n?{left:0,top:0,width:document.documentElement.clientWidth,height:window.innerHeight}:{width:r.width,height:r.height,left:r.left,top:r.top},s="window"===n?{x:1,y:1}:{x:o.width/n.offsetWidth,y:o.height/n.offsetHeight},a="window"===n?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:window.getComputedStyle(n);let l;o.width-=(parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth))*s.x,o.height-=(parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth))*s.y,l=e.of?"string"==typeof e.of?"window"===e.of?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:document.querySelector(e.of).getBoundingClientRect():Object.getPrototypeOf(e.of).jquery?e.of[0].getBoundingClientRect():e.of.getBoundingClientRect():o;let c=this.getScrollbarWidth(document.body),u=this.getScrollbarWidth(t.parentElement),h="0px";e.my.startsWith("left-")?e.at.startsWith("left-")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+"px":"0px":e.at.startsWith("center")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+l.width/2+"px":o.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+l.width+"px":o.width+"px"):e.my.startsWith("center")?e.at.startsWith("left-")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-i.width/2+"px":-i.width/2+"px":e.at.startsWith("center")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-(i.width-l.width)/2+"px":o.width/2-i.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+(l.width-i.width/2)+"px":o.width-i.width/2+"px"):e.my.startsWith("right-")&&(e.at.startsWith("left-")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-i.width+"px":-i.width+"px":e.at.startsWith("center")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-i.width+l.width/2+"px":o.width/2-i.width+"px":e.at.startsWith("right-")&&(h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+l.width-i.width+"px":o.width-i.width+"px","window"!==n&&(h=parseFloat(h)-u.y+"px")));let m="0px";e.my.endsWith("-top")?e.at.endsWith("-top")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)+"px":"0px":e.at.endsWith("center")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)+l.height/2+"px":o.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)+l.height+"px":o.height+"px"):e.my.endsWith("center")?e.at.endsWith("-top")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height/2+"px":-i.height/2+"px":e.at.endsWith("center")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height/2+l.height/2+"px":o.height/2-i.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height/2+l.height+"px":o.height-i.height/2+"px"):e.my.endsWith("-bottom")&&(e.at.endsWith("-top")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height+"px":-i.height+"px":e.at.endsWith("center")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height+l.height/2+"px":o.height/2-i.height+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height+l.height+"px":o.height-i.height+"px",m="window"!==n?parseFloat(m)-u.x+"px":parseFloat(m)-c.x+"px")),t.style.left=1===s.x?h:parseFloat(h)/s.x+"px",t.style.top=1===s.y?m:parseFloat(m)/s.y+"px";let p=getComputedStyle(t),d={left:p.left,top:p.top};return e.autoposition&&e.my===e.at&&["left-top","center-top","right-top","left-bottom","center-bottom","right-bottom"].indexOf(e.my)>=0&&(d=this.applyPositionAutopos(t,d,e)),(e.offsetX||e.offsetY)&&(d=this.applyPositionOffset(t,d,e)),(e.minLeft||e.minTop||e.maxLeft||e.maxTop)&&(d=this.applyPositionMinMax(t,d,e)),e.modify&&(d=this.applyPositionModify(t,d,e)),"number"==typeof t.options.opacity?t.style.opacity=t.options.opacity:t.style.opacity=1,t},applyPositionAutopos(t,n,i){const r=`${i.my}-${i.autoposition.toLowerCase()}`;t.classList.add(r);const o=Array.prototype.slice.call(document.querySelectorAll(`.${r}`)),s=o.indexOf(t);if(o.length>1){switch(i.autoposition){case"down":o.forEach(((t,i)=>{i>0&&i<=s&&(n.top=parseFloat(n.top)+o[--i].getBoundingClientRect().height+e.autopositionSpacing+"px")}));break;case"up":o.forEach(((t,i)=>{i>0&&i<=s&&(n.top=parseFloat(n.top)-o[--i].getBoundingClientRect().height-e.autopositionSpacing+"px")}));break;case"right":o.forEach(((t,i)=>{i>0&&i<=s&&(n.left=parseFloat(n.left)+o[--i].getBoundingClientRect().width+e.autopositionSpacing+"px")}));break;case"left":o.forEach(((t,i)=>{i>0&&i<=s&&(n.left=parseFloat(n.left)-o[--i].getBoundingClientRect().width-e.autopositionSpacing+"px")}))}t.style.left=n.left,t.style.top=n.top}return{left:n.left,top:n.top}},applyPositionOffset(t,e,n){["offsetX","offsetY"].forEach((t=>{n[t]?("function"==typeof n[t]&&(n[t]=n[t].call(e,e,n)),!1===isNaN(n[t])&&(n[t]=`${n[t]}px`)):n[t]="0px"})),t.style.left=`calc(${t.style.left} + ${n.offsetX})`,t.style.top=`calc(${t.style.top} + ${n.offsetY})`;const i=getComputedStyle(t);return{left:i.left,top:i.top}},applyPositionMinMax(t,e,n){if(["minLeft","minTop","maxLeft","maxTop"].forEach((t=>{n[t]&&("function"==typeof n[t]&&(n[t]=n[t].call(e,e,n)),(Number.isInteger(n[t])||n[t].match(/^\d+$/))&&(n[t]=`${n[t]}px`))})),n.minLeft){t.style.left=n.minLeft;let i=getComputedStyle(t).left;parseFloat(i)<parseFloat(e.left)?t.style.left=e.left:e.left=i}if(n.minTop){t.style.top=n.minTop;let i=getComputedStyle(t).top;parseFloat(i)<parseFloat(e.top)?t.style.top=e.top:e.top=i}if(n.maxLeft){t.style.left=n.maxLeft;let i=getComputedStyle(t).left;parseFloat(i)>parseFloat(e.left)?t.style.left=e.left:e.left=i}if(n.maxTop){t.style.top=n.maxTop;let i=getComputedStyle(t).top;parseFloat(i)>parseFloat(e.top)?t.style.top=e.top:e.top=i}const i=getComputedStyle(t);return{left:i.left,top:i.top}},applyPositionModify(t,e,n){if(n.modify&&"function"==typeof n.modify){const i=n.modify.call(e,e,n);t.style.left=Number.isInteger(i.left)||i.left.match(/^\d+$/)?`${i.left}px`:i.left,t.style.top=Number.isInteger(i.top)||i.top.match(/^\d+$/)?`${i.top}px`:i.top}const i=getComputedStyle(t);return{left:i.left,top:i.top}},autopositionRemaining(t){let e,n=t.options.container;["left-top-down","left-top-right","center-top-down","right-top-down","right-top-left","left-bottom-up","left-bottom-right","center-bottom-up","right-bottom-up","right-bottom-left"].forEach((n=>{t.classList.contains(n)&&(e=n)})),e&&("window"===n?document.body:"string"==typeof n?document.querySelector(n):n).querySelectorAll(`.${e}`).forEach((t=>{t.reposition()}))},addScript(t,e="application/javascript",n){if(!document.querySelector(`script[src="${t}"]`)){const i=document.createElement("script");n&&(i.onload=n),i.src=t,i.type=e,document.head.appendChild(i)}},ajax(t,n){let i,r,o=new XMLHttpRequest;const s={method:"GET",async:!0,user:"",pwd:"",done:function(){if(n){let t=e.strToHtml(this.responseText);i.urlSelector&&(t=t.querySelector(i.urlSelector)),n.contentRemove(),n.content.append(t)}},autoresize:!0,autoreposition:!0};if(n&&"string"==typeof t)i=Object.assign({},s,{url:t});else{if("object"!=typeof t||!t.url){if(this.errorReporting){let t="XMLHttpRequest seems to miss the <mark>url</mark> parameter!";e.errorpanel(t)}return}(i=Object.assign({},s,t)).url=t.url,!1===i.async&&(i.timeout=0,i.withCredentials&&(i.withCredentials=void 0),i.responseType&&(i.responseType=void 0))}r=i.url.trim().split(/\s+/),i.url=encodeURI(r[0]),r.length>1&&(r.shift(),i.urlSelector=r.join(" ")),o.onreadystatechange=()=>{4===o.readyState&&(200===o.status?n?i.done.call(o,o,n):i.done.call(o,o):i.fail&&(n?i.fail.call(o,o,n):i.fail.call(o,o)),i.always&&(n?i.always.call(o,o,n):i.always.call(o,o)),n&&(i.autoresize||i.autoreposition)&&e.ajaxAutoresizeAutoreposition(n,i),e.ajaxAlwaysCallbacks.length&&e.ajaxAlwaysCallbacks.forEach((t=>{n?t.call(o,o,n):t.call(o,o)})))},o.open(i.method,i.url,i.async,i.user,i.pwd),o.timeout=i.timeout||0,i.withCredentials&&(o.withCredentials=i.withCredentials),i.responseType&&(o.responseType=i.responseType),i.beforeSend&&(n?i.beforeSend.call(o,o,n):i.beforeSend.call(o,o)),i.data?o.send(i.data):o.send(null)},ajaxAutoresizeAutoreposition(t,e){const n=t.options.contentSize;if("string"==typeof n&&n.match(/auto/i)){const i=n.split(" "),r=Object.assign({},{width:i[0],height:i[1]});e.autoresize&&t.resize(r),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}else if("object"==typeof n&&("auto"===n.width||"auto"===n.height)){const i=Object.assign({},n);e.autoresize&&t.resize(i),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}},createPanelTemplate(t=!0){const e=document.createElement("div");return e.className="jsPanel",e.style.left="0",e.style.top="0",t&&["close","maximize","normalize","minimize","smallify"].forEach((t=>{e.setAttribute(`data-btn${t}`,"enabled")})),e.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-smallify"  aria-label="Smallify">${this.icons.smallify}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-minimize"  aria-label="Minimize">${this.icons.minimize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                                <div class="jsPanel-hdr-toolbar"></div>\n                            </div>\n                            <div class="jsPanel-progressbar">\n                                <div class="jsPanel-progressbar-slider"></div>\n                            </div>\n                            <div class="jsPanel-content"></div>\n                            <div class="jsPanel-minimized-box"></div>\n                            <div class="jsPanel-ftr"></div>`,e},createMinimizedTemplate(){const t=document.createElement("div");return t.className="jsPanel-replacement",t.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                            </div>`,t},createSnapArea(t,e,n){const i=document.createElement("div"),r=t.parentElement;i.className=`jsPanel-snap-area jsPanel-snap-area-${e}`,"lt"===e||"rt"===e||"rb"===e||"lb"===e?(i.style.width=n+"px",i.style.height=n+"px"):"ct"===e||"cb"===e?i.style.height=n+"px":"lc"!==e&&"rc"!==e||(i.style.width=n+"px"),r!==document.body&&(i.style.position="absolute"),document.querySelector(`.jsPanel-snap-area.jsPanel-snap-area-${e}`)||t.parentElement.appendChild(i)},emptyNode(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},extend(t){if("[object Object]"===Object.prototype.toString.call(t))for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this.extensions[e]=t[e])},fetch(t,n){let i;const r={bodyMethod:"text",autoresize:!0,autoreposition:!0,done:function(t,n){if(n){let i=e.strToHtml(t);n.contentRemove(),n.content.append(i)}}};if(n&&"string"==typeof t)i=Object.assign({},r,{resource:encodeURI(t)});else{if("object"!=typeof t||!t.resource){if(this.errorReporting){let t="Fetch Request seems to miss the <mark>resource</mark> parameter!";e.errorpanel(t)}return}(i=Object.assign({},r,t)).resource=encodeURI(t.resource)}const o=i.fetchInit||{};i.beforeSend&&(n?i.beforeSend.call(t,t,n):i.beforeSend.call(t,t)),fetch(i.resource,o).then((t=>{if(t.ok)return t[i.bodyMethod]()})).then((t=>{n?i.done.call(t,t,n):i.done.call(t,t),n&&(i.autoresize||i.autoreposition)&&e.ajaxAutoresizeAutoreposition(n,i)}))},getPanels:(t=function(){return this.classList.contains("jsPanel-standard")})=>Array.prototype.slice.call(document.querySelectorAll(".jsPanel")).filter((e=>t.call(e,e))).sort(((t,e)=>e.style.zIndex-t.style.zIndex)),pOcontainer(t){if("window"===t)return document.body;if("string"==typeof t){let e=document.querySelectorAll(t);return!!(e.length&&e.length>0)&&e}return 1===t.nodeType?t:!!t.length&&t[0]},pOcontainment(t){let e=t;if("function"==typeof t&&(e=t()),"number"==typeof e)return[e,e,e,e];if(Array.isArray(e)){if(1===e.length)return[e[0],e[0],e[0],e[0]];if(2===e.length)return e.concat(e);3===e.length&&(e[3]=e[1])}return e},pOsize(t,e){let n=e||this.defaults.contentSize;const i=t.parentElement;if("string"==typeof n){const t=n.trim().split(" ");(n={}).width=t[0],2===t.length?n.height=t[1]:n.height=t[0]}else n.width&&!n.height?n.height=n.width:n.height&&!n.width&&(n.width=n.height);if(String(n.width).match(/^[0-9.]+$/gi))n.width+="px";else if("string"==typeof n.width&&n.width.endsWith("%"))if(i===document.body)n.width=window.innerWidth*(parseFloat(n.width)/100)+"px";else{const t=window.getComputedStyle(i),e=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);n.width=(parseFloat(t.width)-e)*(parseFloat(n.width)/100)+"px"}else"function"==typeof n.width&&(n.width=n.width.call(t,t),("number"==typeof n.width||"string"==typeof n.width&&n.width.match(/^[0-9.]+$/gi))&&(n.width+="px"));if(String(n.height).match(/^[0-9.]+$/gi))n.height+="px";else if("string"==typeof n.height&&n.height.endsWith("%"))if(i===document.body)n.height=window.innerHeight*(parseFloat(n.height)/100)+"px";else{const t=window.getComputedStyle(i),e=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);n.height=(parseFloat(t.height)-e)*(parseFloat(n.height)/100)+"px"}else"function"==typeof n.height&&(n.height=n.height.call(t,t),("number"==typeof n.height||"string"==typeof n.height&&n.height.match(/^[0-9.]+$/gi))&&(n.height+="px"));return n},pOborder(t){t=t.trim();const e=new Array(3),n=t.match(/\s*(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s*/gi),i=t.match(/\s*(thin|medium|thick)|(\d*\.?\d+[a-zA-Z]{2,4})\s*/gi);return n?(e[1]=n[0].trim(),t=t.replace(e[1],"")):e[1]="solid",i?(e[0]=i[0].trim(),t=t.replace(e[0],"")):e[0]="medium",e[2]=t.trim(),e},pOheaderControls(t){if("string"==typeof t){let e={},n=t.toLowerCase(),i=n.match(/xl|lg|md|sm|xs/),r=n.match(/closeonly|none/);return i&&(e.size=i[0]),r&&(e=Object.assign({},e,{maximize:"remove",normalize:"remove",minimize:"remove",smallify:"remove"}),"none"===r[0]&&(e.close="remove")),Object.assign({},this.defaults.headerControls,e)}return Object.assign({},this.defaults.headerControls,t)},processCallbacks(t,e,n="some",i,r){if("function"==typeof e&&(e=[e]),n)return e[n]((e=>e.call(t,t,i,r)));e.forEach((e=>{e.call(t,t,i,r)}))},removeSnapAreas(){document.querySelectorAll(".jsPanel-snap-area").forEach((t=>{t.parentElement.removeChild(t)}))},resetZi(){this.zi=((t=e.ziBase)=>{let n=t;return{next:()=>n++}})(),Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).sort(((t,e)=>t.style.zIndex-e.style.zIndex)).forEach((t=>{t.style.zIndex=e.zi.next()}))},getScrollbarWidth(t=document.body){if(t===document.body)return{y:window.innerWidth-document.documentElement.clientWidth,x:window.innerHeight-document.documentElement.clientHeight};{let e=getComputedStyle(t);return{y:t.offsetWidth-t.clientWidth-parseFloat(e.borderRightWidth)-parseFloat(e.borderLeftWidth),x:t.offsetHeight-t.clientHeight-parseFloat(e.borderBottomWidth)-parseFloat(e.borderTopWidth)}}},remClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.remove(e))),t),setClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.add(e))),t),setStyles(t,e){for(let n in e)n in t.style?t.style[n]=e[n]:t.style.setProperty(n,e[n]);return t},setStyle(t,e){return this.setStyles.call(t,t,e)},strToHtml:t=>document.createRange().createContextualFragment(t),toggleClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)})),t),errorpanel(t){this.create({paneltype:"error",dragit:!1,resizeit:!1,theme:{bgPanel:"white",bgContent:"white",colorHeader:"rebeccapurple",colorContent:"#333",border:"2px solid rebeccapurple"},borderRadius:".33rem",headerControls:"closeonly xs",headerTitle:"&#9888; jsPanel Error",contentSize:{width:"50%",height:"auto"},position:"center-top 0 5 down",animateIn:"jsPanelFadeIn",content:`<div class="jsPanel-error-content-separator"></div><p>${t}</p>`})},create(t={},n){e.zi||(e.zi=((t=e.ziBase)=>{let n=t;return{next:()=>n++}})()),t.config?delete(t=Object.assign({},this.defaults,t.config,t)).config:t=Object.assign({},this.defaults,t),t.id?"function"==typeof t.id&&(t.id=t.id()):t.id=`jsPanel-${e.idCounter+=1}`;const i=document.getElementById(t.id);if(null!==i){if(i.classList.contains("jsPanel")&&i.front(),this.errorReporting){let n=`&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>An element with the ID <mark>${t.id}</mark> already exists in the document.`;e.errorpanel(n)}return!1}let r=this.pOcontainer(t.container);if("object"==typeof r&&r.length&&r.length>0&&(r=r[0]),!r){if(this.errorReporting){let t="&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>The container to append the panel to does not exist";e.errorpanel(t)}return!1}["onbeforeclose","onbeforemaximize","onbeforeminimize","onbeforenormalize","onbeforesmallify","onbeforeunsmallify","onclosed","onfronted","onmaximized","onminimized","onnormalized","onsmallified","onstatuschange","onunsmallified"].forEach((e=>{t[e]?"function"==typeof t[e]&&(t[e]=[t[e]]):t[e]=[]}));const o=t.template?t.template:this.createPanelTemplate();o.options=t,o.closetimer=void 0,o.status="initialized",o.currentData={},o.header=o.querySelector(".jsPanel-hdr"),o.headerbar=o.header.querySelector(".jsPanel-headerbar"),o.titlebar=o.header.querySelector(".jsPanel-titlebar"),o.headerlogo=o.headerbar.querySelector(".jsPanel-headerlogo"),o.headertitle=o.headerbar.querySelector(".jsPanel-title"),o.controlbar=o.headerbar.querySelector(".jsPanel-controlbar"),o.headertoolbar=o.header.querySelector(".jsPanel-hdr-toolbar"),o.content=o.querySelector(".jsPanel-content"),o.footer=o.querySelector(".jsPanel-ftr"),o.snappableTo=!1,o.snapped=!1,o.droppableTo=!1,o.progressbar=o.autocloseProgressbar=o.querySelector(".jsPanel-progressbar");const s=new CustomEvent("jspanelloaded",{detail:t.id,cancelable:!0}),a=new CustomEvent("jspanelstatuschange",{detail:t.id,cancelable:!0}),l=new CustomEvent("jspanelbeforenormalize",{detail:t.id,cancelable:!0}),c=new CustomEvent("jspanelnormalized",{detail:t.id,cancelable:!0}),u=new CustomEvent("jspanelbeforemaximize",{detail:t.id,cancelable:!0}),h=new CustomEvent("jspanelmaximized",{detail:t.id,cancelable:!0}),m=new CustomEvent("jspanelbeforeminimize",{detail:t.id,cancelable:!0}),p=new CustomEvent("jspanelminimized",{detail:t.id,cancelable:!0}),d=new CustomEvent("jspanelbeforesmallify",{detail:t.id,cancelable:!0}),f=new CustomEvent("jspanelsmallified",{detail:t.id,cancelable:!0}),y=new CustomEvent("jspanelsmallifiedmax",{detail:t.id,cancelable:!0}),_=new CustomEvent("jspanelbeforeunsmallify",{detail:t.id,cancelable:!0}),g=new CustomEvent("jspanelfronted",{detail:t.id,cancelable:!0}),v=new CustomEvent("jspanelbeforeclose",{detail:t.id,cancelable:!0}),b=new CustomEvent("jspanelclosed",{detail:t.id,cancelable:!0}),x=new CustomEvent("jspanelcloseduser",{detail:t.id,cancelable:!0});[s,a,l,c,u,h,m,p,d,f,y,_,g,v].forEach((t=>{t.panel=o}));const $=o.querySelector(".jsPanel-btn-close"),A=o.querySelector(".jsPanel-btn-maximize"),w=o.querySelector(".jsPanel-btn-normalize"),B=o.querySelector(".jsPanel-btn-smallify"),C=o.querySelector(".jsPanel-btn-minimize");$&&e.pointerup.forEach((t=>{$.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})),A&&e.pointerup.forEach((t=>{A.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.maximize()}))})),w&&e.pointerup.forEach((t=>{w.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.normalize()}))})),B&&e.pointerup.forEach((t=>{B.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;"normalized"===o.status||"maximized"===o.status?o.smallify():"smallified"!==o.status&&"smallifiedmax"!==o.status||o.unsmallify()}))})),C&&e.pointerup.forEach((t=>{C.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.minimize()}))}));let S=e.extensions;for(let e in S)Object.prototype.hasOwnProperty.call(S,e)&&(o[e]=S[e]);if(o.clearTheme=t=>(e.themes.forEach((t=>{["panel",`jsPanel-theme-${t}`,`panel-${t}`,`${t}-color`].forEach((t=>{o.classList.remove(t)})),o.header.classList.remove(`jsPanel-theme-${t}`)})),o.content.classList.remove("jsPanel-content-filled","jsPanel-content-filledlight"),o.header.classList.remove("jsPanel-hdr-light"),o.header.classList.remove("jsPanel-hdr-dark"),o.style.backgroundColor="",e.setStyle(o.headertoolbar,{boxShadow:"",width:"",marginLeft:"",borderTopColor:"transparent"}),e.setStyle(o.content,{background:"",borderTopColor:"transparent"}),o.header.style.background="",Array.prototype.slice.call(o.controlbar.querySelectorAll(".jsPanel-icon")).concat([o.headerlogo,o.headertitle,o.headertoolbar,o.content]).forEach((t=>{t.style.color=""})),t&&t.call(o,o),o),o.getThemeDetails=t=>{const n=t.toLowerCase(),i={color:!1,colors:!1,filling:!1},r=n.split("fill");if(i.color=r[0].trim().replace(/\s*/g,""),2===r.length)if(r[1].startsWith("edlight"))i.filling="filledlight";else if(r[1].startsWith("eddark"))i.filling="filleddark";else if(r[1].startsWith("ed"))i.filling="filled";else if(r[1].startsWith("color")){let t=r[1].split("color"),n=t[t.length-1].trim().replace(/\s*/g,"");e.colorNames[n]&&(n=e.colorNames[n]),n.match(/^([0-9a-f]{3}|[0-9a-f]{6})$/gi)&&(n="#"+n),i.filling=n}if(e.themes.some((t=>t===i.color.split(/\s/i)[0]))){let t=i.color.split(/\s/i)[0],e=document.createElement("button");e.className=t+"-bg",document.body.appendChild(e),i.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(i.color.startsWith("bootstrap-")){let t=i.color.indexOf("-"),e=document.createElement("button");e.className="btn btn"+i.color.slice(t),document.body.appendChild(e),i.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(i.color.startsWith("mdb-")){let t,e=i.color.indexOf("-")+1,n=document.createElement("span");t=i.color.endsWith("-dark")?(t=i.color.slice(e)).replace("-dark","-color-dark"):i.color.slice(e)+"-color",n.className=t,document.body.appendChild(n),i.color=getComputedStyle(n).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(n),n=void 0}return i.colors=e.calcColors(i.color),i},o.applyColorTheme=t=>{if(o.style.backgroundColor=t.colors[0],o.header.style.backgroundColor=t.colors[0],o.header.style.color=t.colors[3],[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((e=>{o.querySelector(e).style.color=t.colors[3]})),o.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((e=>{e.style.color=t.colors[3]})),"string"==typeof o.options.theme&&"filled"===t.filling&&(o.content.style.borderTop="#000000"===t.colors[3]?"1px solid rgba(0,0,0,0.15)":"1px solid rgba(255,255,255,0.15)"),"#000000"===t.colors[3]?o.header.classList.add("jsPanel-hdr-light"):o.header.classList.add("jsPanel-hdr-dark"),t.filling)switch(t.filling){case"filled":e.setStyle(o.content,{backgroundColor:t.colors[2],color:t.colors[3]});break;case"filledlight":o.content.style.backgroundColor=t.colors[1];break;case"filleddark":e.setStyle(o.content,{backgroundColor:t.colors[6],color:t.colors[7]});break;default:o.content.style.backgroundColor=t.filling,o.content.style.color=e.perceivedBrightness(t.filling)<=e.colorBrightnessThreshold?"#fff":"#000"}return o},o.applyCustomTheme=t=>{let n,i={bgPanel:"#fff",bgContent:"#fff",colorHeader:"#000",colorContent:"#000"},r=(n="object"==typeof t?Object.assign(i,t):i).bgPanel,s=n.bgContent,a=n.colorHeader,l=n.colorContent;if(e.colorNames[r]?o.style.background="#"+e.colorNames[r]:o.style.background=r,e.colorNames[a]&&(a="#"+e.colorNames[a]),[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((t=>{o.querySelector(t).style.color=a})),o.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{t.style.color=a})),e.colorNames[s]?o.content.style.background="#"+e.colorNames[s]:o.content.style.background=s,e.colorNames[l]?o.content.style.color="#"+e.colorNames[l]:o.content.style.color=l,e.perceivedBrightness(a)>e.colorBrightnessThreshold?o.header.classList.add("jsPanel-hdr-dark"):o.header.classList.add("jsPanel-hdr-light"),e.perceivedBrightness(l)>e.colorBrightnessThreshold?o.content.style.borderTop="1px solid rgba(255,255,255,0.15)":o.content.style.borderTop="1px solid rgba(0,0,0,0.15)",n.border){let t=n.border,i=t.lastIndexOf(" "),r=t.slice(++i);e.colorNames[r]&&(t=t.replace(r,"#"+e.colorNames[r])),o.style.border=t}return o},o.setBorder=t=>{let n=e.pOborder(t);return n[2].length?e.colorNames[n[2]]&&(n[2]="#"+e.colorNames[n[2]]):n[2]=o.style.backgroundColor,n=n.join(" "),o.style.border=n,o.options.border=n,o},o.setBorderRadius=t=>{"number"==typeof t&&(t+="px"),o.style.borderRadius=t;const e=getComputedStyle(o);return o.options.header?(o.header.style.borderTopLeftRadius=e.borderTopLeftRadius,o.header.style.borderTopRightRadius=e.borderTopRightRadius):(o.content.style.borderTopLeftRadius=e.borderTopLeftRadius,o.content.style.borderTopRightRadius=e.borderTopRightRadius),o.options.footerToolbar?(o.footer.style.borderBottomRightRadius=e.borderBottomRightRadius,o.footer.style.borderBottomLeftRadius=e.borderBottomLeftRadius):(o.content.style.borderBottomRightRadius=e.borderBottomRightRadius,o.content.style.borderBottomLeftRadius=e.borderBottomLeftRadius),o},o.setTheme=(e=t.theme,n)=>{let i;if("minimized"===o.status&&(i=!0,o.normalize()),o.clearTheme(),"object"==typeof e)t.border=void 0,o.applyCustomTheme(e);else{"none"===e&&(e="white");let t=o.getThemeDetails(e);o.applyColorTheme(t)}return i&&o.minimize(),n&&n.call(o,o),o},o.remove=(t,n,i)=>{o.parentElement.removeChild(o),document.getElementById(t)?i&&i.call(o,t,o):(o.removeMinimizedReplacement(),o.status="closed",n&&document.dispatchEvent(x),document.dispatchEvent(b),o.options.onclosed&&e.processCallbacks(o,o.options.onclosed,"every",n),e.autopositionRemaining(o),i&&i.call(t,t)),window.removeEventListener("resize",o.windowResizeHandler),document.removeEventListener("jspanelresize",o.parentResizeHandler)},o.close=(t,n)=>{if(o.closetimer&&window.clearInterval(o.closetimer),document.dispatchEvent(v),o.statusBefore=o.status,o.options.onbeforeclose&&o.options.onbeforeclose.length>0&&!e.processCallbacks(o,o.options.onbeforeclose,"some",o.status,n))return o;o.options.animateOut?(o.options.animateIn&&e.remClass(o,o.options.animateIn),e.setClass(o,o.options.animateOut),o.addEventListener("animationend",(e=>{e.stopPropagation(),o.remove(o.id,n,t)}))):o.remove(o.id,n,t)},o.maximize=(n,i)=>{if(o.statusBefore=o.status,t.onbeforemaximize&&t.onbeforemaximize.length>0&&!e.processCallbacks(o,t.onbeforemaximize,"some",o.statusBefore))return o;document.dispatchEvent(u);const r=o.parentElement,s=e.pOcontainment(t.maximizedMargin);return r===document.body?(o.style.width=document.documentElement.clientWidth-s[1]-s[3]+"px",o.style.height=document.documentElement.clientHeight-s[0]-s[2]+"px",o.style.left=s[3]+"px",o.style.top=s[0]+"px"):(o.style.width=r.clientWidth-s[1]-s[3]+"px",o.style.height=r.clientHeight-s[0]-s[2]+"px",o.style.left=s[3]+"px",o.style.top=s[0]+"px"),B.style.transform="unset",o.removeMinimizedReplacement(),o.status="maximized",o.setControls([".jsPanel-btn-maximize"]),i||o.front(),document.dispatchEvent(h),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every",o.statusBefore),n&&n.call(o,o,o.statusBefore),t.onmaximized&&e.processCallbacks(o,t.onmaximized,"every",o.statusBefore),o},o.minimize=n=>{if("minimized"===o.status)return o;if(o.statusBefore=o.status,t.onbeforeminimize&&t.onbeforeminimize.length>0&&!e.processCallbacks(o,t.onbeforeminimize,"some",o.statusBefore))return o;if(document.dispatchEvent(m),!document.getElementById("jsPanel-replacement-container")){const t=document.createElement("div");t.id="jsPanel-replacement-container",document.body.append(t)}if(o.style.left="-9999px",o.status="minimized",document.dispatchEvent(p),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every",o.statusBefore),t.minimizeTo){let e,n,i,r=o.createMinimizedReplacement();switch(t.minimizeTo){case"default":document.getElementById("jsPanel-replacement-container").append(r);break;case"parentpanel":(e=(i=(n=o.closest(".jsPanel-content").parentElement).querySelectorAll(".jsPanel-minimized-box"))[i.length-1]).append(r);break;case"parent":(e=(n=o.parentElement).querySelector(".jsPanel-minimized-container"))||((e=document.createElement("div")).className="jsPanel-minimized-container",n.append(e)),e.append(r);break;default:document.querySelector(t.minimizeTo).append(r)}}return n&&n.call(o,o,o.statusBefore),t.onminimized&&e.processCallbacks(o,t.onminimized,"every",o.statusBefore),o},o.normalize=n=>("normalized"===o.status||(o.statusBefore=o.status,t.onbeforenormalize&&t.onbeforenormalize.length>0&&!e.processCallbacks(o,t.onbeforenormalize,"some",o.statusBefore)||(document.dispatchEvent(l),o.style.width=o.currentData.width,o.style.height=o.currentData.height,o.snapped?o.snap(o.snapped,!0):(o.style.left=o.currentData.left,o.style.top=o.currentData.top),B.style.transform="unset",o.removeMinimizedReplacement(),o.status="normalized",o.setControls([".jsPanel-btn-normalize"]),o.front(),document.dispatchEvent(c),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every",o.statusBefore),n&&n.call(o,o,o.statusBefore),t.onnormalized&&e.processCallbacks(o,t.onnormalized,"every",o.statusBefore))),o),o.smallify=n=>{if("smallified"===o.status||"smallifiedmax"===o.status)return o;if(o.statusBefore=o.status,t.onbeforesmallify&&t.onbeforesmallify.length>0&&!e.processCallbacks(o,t.onbeforesmallify,"some",o.statusBefore))return o;document.dispatchEvent(d),o.style.overflow="hidden";const i=window.getComputedStyle(o),r=parseFloat(window.getComputedStyle(o.headerbar).height);o.style.height=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+r+"px",B.style.transform="rotate(180deg)","normalized"===o.status?(o.setControls([".jsPanel-btn-normalize"]),o.status="smallified",document.dispatchEvent(f),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every",o.statusBefore)):"maximized"===o.status&&(o.setControls([".jsPanel-btn-maximize"]),o.status="smallifiedmax",document.dispatchEvent(y),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every",o.statusBefore));const s=o.querySelectorAll(".jsPanel-minimized-box");return s[s.length-1].style.display="none",n&&n.call(o,o,o.statusBefore),t.onsmallified&&e.processCallbacks(o,t.onsmallified,"every",o.statusBefore),o},o.unsmallify=n=>{if(o.statusBefore=o.status,"smallified"===o.status||"smallifiedmax"===o.status){if(t.onbeforeunsmallify&&t.onbeforeunsmallify.length>0&&!e.processCallbacks(o,t.onbeforeunsmallify,"some",o.statusBefore))return o;document.dispatchEvent(_),o.style.overflow="visible",o.front(),"smallified"===o.status?(o.style.height=o.currentData.height,o.setControls([".jsPanel-btn-normalize"]),o.status="normalized",document.dispatchEvent(c),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every",o.statusBefore)):"smallifiedmax"===o.status?o.maximize():"minimized"===o.status&&o.normalize(),B.style.transform="rotate(0deg)";const i=o.querySelectorAll(".jsPanel-minimized-box");i[i.length-1].style.display="flex",n&&n.call(o,o,o.statusBefore),t.onunsmallified&&e.processCallbacks(o,t.onunsmallified,"every",o.statusBefore)}return o},o.front=(n,i=!0)=>{if("minimized"===o.status)"maximized"===o.statusBefore?o.maximize():o.normalize();else{const t=Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).map((t=>t.style.zIndex));Math.max(...t)>o.style.zIndex&&(o.style.zIndex=e.zi.next()),e.resetZi()}return document.dispatchEvent(g),n&&n.call(o,o),t.onfronted&&i&&e.processCallbacks(o,t.onfronted,"every",o.status),o},o.snap=(t,n=!1)=>{if(n||(o.currentData.beforeSnap={width:o.currentData.width,height:o.currentData.height}),t&&"function"==typeof t&&!n)t.call(o,o,o.snappableTo);else if(!1!==t){let t=[0,0];if(o.options.dragit.snap.containment&&o.options.dragit.containment){const n=e.pOcontainment(o.options.dragit.containment),i=o.snappableTo;i.startsWith("left")?t[0]=n[3]:i.startsWith("right")&&(t[0]=-n[1]),i.endsWith("top")?t[1]=n[0]:i.endsWith("bottom")&&(t[1]=-n[2])}o.reposition(`${o.snappableTo} ${t[0]} ${t[1]}`)}n||(o.snapped=o.snappableTo)},o.move=(t,e)=>{let n=o.overlaps(t,"paddingbox"),i=o.parentElement;return t.appendChild(o),o.options.container=t,o.style.left=n.left+"px",o.style.top=n.top+"px",o.saveCurrentDimensions(),o.saveCurrentPosition(),o.calcSizeFactors(),e&&e.call(o,o,t,i),o},o.closeChildpanels=t=>(o.getChildpanels().forEach((t=>t.close())),t&&t.call(o,o),o),o.getChildpanels=t=>{const e=o.content.querySelectorAll(".jsPanel");return t&&e.forEach(((e,n,i)=>{t.call(e,e,n,i)})),e},o.isChildpanel=t=>{const e=o.closest(".jsPanel-content"),n=e?e.parentElement:null;return t&&t.call(o,o,n),!!e&&n},o.contentRemove=t=>(e.emptyNode(o.content),t&&t.call(o,o),o),o.createMinimizedReplacement=()=>{const n=e.createMinimizedTemplate(),i=window.getComputedStyle(o.headertitle).color,r=window.getComputedStyle(o),s=t.iconfont,a=n.querySelector(".jsPanel-controlbar");return"auto-show-hide"!==o.options.header?e.setStyle(n,{backgroundColor:r.backgroundColor,backgroundPositionX:r.backgroundPositionX,backgroundPositionY:r.backgroundPositionY,backgroundRepeat:r.backgroundRepeat,backgroundAttachment:r.backgroundAttachment,backgroundImage:r.backgroundImage,backgroundSize:r.backgroundSize,backgroundOrigin:r.backgroundOrigin,backgroundClip:r.backgroundClip}):n.style.backgroundColor=window.getComputedStyle(o.header).backgroundColor,n.id=o.id+"-min",n.querySelector(".jsPanel-headerbar").replaceChild(o.headerlogo.cloneNode(!0),n.querySelector(".jsPanel-headerlogo")),n.querySelector(".jsPanel-titlebar").replaceChild(o.headertitle.cloneNode(!0),n.querySelector(".jsPanel-title")),n.querySelector(".jsPanel-titlebar").setAttribute("title",o.headertitle.textContent),n.querySelector(".jsPanel-title").style.color=i,a.style.color=i,a.querySelectorAll("button").forEach((t=>{t.style.color=i})),["jsPanel-hdr-dark","jsPanel-hdr-light"].forEach((t=>{o.header.classList.contains(t)&&n.querySelector(".jsPanel-hdr").classList.add(t)})),o.setIconfont(s,n),"enabled"===o.dataset.btnnormalize?e.pointerup.forEach((t=>{n.querySelector(".jsPanel-btn-normalize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.normalize()}))})):a.querySelector(".jsPanel-btn-normalize").style.display="none","enabled"===o.dataset.btnmaximize?e.pointerup.forEach((t=>{n.querySelector(".jsPanel-btn-maximize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.maximize()}))})):a.querySelector(".jsPanel-btn-maximize").style.display="none","enabled"===o.dataset.btnclose?e.pointerup.forEach((t=>{n.querySelector(".jsPanel-btn-close").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})):a.querySelector(".jsPanel-btn-close").style.display="none",n},o.removeMinimizedReplacement=()=>{const t=document.getElementById(`${o.id}-min`);t&&t.parentElement.removeChild(t)},o.drag=(t={})=>{let n,i,r;const s=new CustomEvent("jspaneldragstart",{detail:o.id}),a=new CustomEvent("jspaneldrag",{detail:o.id}),l=new CustomEvent("jspaneldragstop",{detail:o.id});[s,a,l].forEach((t=>{t.panel=o}));const c=t=>{let e=t.split("-");return e.forEach(((t,n)=>{e[n]=t.charAt(0).toUpperCase()+t.slice(1)})),"snap"+e.join("")};function u(t){null===t.relatedTarget&&e.pointermove.forEach((t=>{document.removeEventListener(t,i,!1),o.style.opacity=1}))}let h=t.handles||e.defaults.dragit.handles,m=t.cursor||e.defaults.dragit.cursor;function p(t){if(e.pointermove.forEach((t=>{document.removeEventListener(t,i)})),e.removeSnapAreas(),n){if(o.style.opacity=1,n=void 0,r.snap){switch(o.snappableTo){case"left-top":o.snap(r.snap.snapLeftTop);break;case"center-top":o.snap(r.snap.snapCenterTop);break;case"right-top":o.snap(r.snap.snapRightTop);break;case"right-center":o.snap(r.snap.snapRightCenter);break;case"right-bottom":o.snap(r.snap.snapRightBottom);break;case"center-bottom":o.snap(r.snap.snapCenterBottom);break;case"left-bottom":o.snap(r.snap.snapLeftBottom);break;case"left-center":o.snap(r.snap.snapLeftCenter)}r.snap.callback&&o.snappableTo&&"function"==typeof r.snap.callback&&(r.snap.callback.call(o,o),r.snap.repositionOnSnap&&!1!==r.snap[c(o.snappableTo)]&&o.repositionOnSnap(o.snappableTo)),o.snappableTo&&r.snap.repositionOnSnap&&r.snap[c(o.snappableTo)]&&o.repositionOnSnap(o.snappableTo)}if(o.droppableTo&&o.droppableTo){let t=o.parentElement;o.move(o.droppableTo),r.drop.callback&&r.drop.callback.call(o,o,o.droppableTo,t)}if(document.dispatchEvent(l),r.stop.length){let n=window.getComputedStyle(o),i={left:parseFloat(n.left),top:parseFloat(n.top),width:parseFloat(n.width),height:parseFloat(n.height)};e.processCallbacks(o,r.stop,!1,i,t)}o.saveCurrentPosition(),o.calcSizeFactors()}o.controlbar.style.pointerEvents="inherit",o.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),document.removeEventListener(t,p)}return o.querySelectorAll(h).forEach((l=>{l.style.touchAction="none",l.style.cursor=m,e.pointerdown.forEach((c=>{l.addEventListener(c,(l=>{if(l.button&&l.button>0)return!1;if((r=Object.assign({},e.defaults.dragit,t)).disableOnMaximized&&"maximized"===o.status)return!1;if((r.containment||0===r.containment)&&(r.containment=e.pOcontainment(r.containment)),r.grid&&Array.isArray(r.grid)&&1===r.grid.length&&(r.grid[1]=r.grid[0]),r.snap&&("object"==typeof r.snap?r.snap=Object.assign({},e.defaultSnapConfig,r.snap):r.snap=e.defaultSnapConfig),l.target.closest(".jsPanel-ftr-btn"))return;o.controlbar.style.pointerEvents="none",o.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));let c=window.getComputedStyle(o),h=parseFloat(c.left),m=parseFloat(c.top),p=parseFloat(c.width),d=parseFloat(c.height),f=l.touches?l.touches[0].clientX:l.clientX,y=l.touches?l.touches[0].clientY:l.clientY,_=o.parentElement,g=_.getBoundingClientRect(),v=window.getComputedStyle(_),b=o.getScaleFactor(),x=0,$=e.getScrollbarWidth(_);i=t=>{if(t.preventDefault(),!n){if(document.dispatchEvent(s),o.style.opacity=r.opacity,o.snapped&&r.snap.resizeToPreSnap&&o.currentData.beforeSnap){o.resize(o.currentData.beforeSnap.width+" "+o.currentData.beforeSnap.height),o.setControls([".jsPanel-btn-normalize"]);let t=o.getBoundingClientRect(),e=f-(t.left+t.width),n=t.width/2;e>-n&&(x=e+n)}if(o.front(),o.snapped=!1,"maximized"===o.status&&(o.setControls([".jsPanel-btn-normalize"]),o.status="normalized"),r.drop&&r.drop.dropZones){let t=r.drop.dropZones.map((t=>e.pOcontainer(t))),n=[];t.forEach((function(t){t.length?t.forEach((function(t){n.push(t)})):n.push(t)})),n=n.filter((function(t,e,n){return n.indexOf(t)===e})),r.drop.dropZones=n}r.start.length&&e.processCallbacks(o,r.start,!1,{left:h,top:m,width:p,height:d},t)}let i,l,c,u,A,w,B,C,S,E;n=1;let M,T=t.touches?t.touches[0].clientX:t.clientX,k=t.touches?t.touches[0].clientY:t.clientY,P=window.getComputedStyle(o);if(_===document.body){let t=o.getBoundingClientRect();S=window.innerWidth-parseInt(v.borderLeftWidth,10)-parseInt(v.borderRightWidth,10)-(t.left+t.width),E=window.innerHeight-parseInt(v.borderTopWidth,10)-parseInt(v.borderBottomWidth,10)-(t.top+t.height)}else S=parseInt(v.width,10)-parseInt(v.borderLeftWidth,10)-parseInt(v.borderRightWidth,10)-(parseInt(P.left,10)+parseInt(P.width,10)),E=parseInt(v.height,10)-parseInt(v.borderTopWidth,10)-parseInt(v.borderBottomWidth,10)-(parseInt(P.top,10)+parseInt(P.height,10));i=parseFloat(P.left),c=parseFloat(P.top),A=S,B=E,r.snap&&("panel"===r.snap.trigger?(l=i**2,u=c**2,w=A**2,C=B**2):"pointer"===r.snap.trigger&&("window"===o.options.container?(i=T,l=T**2,u=(c=k)**2,w=(A=window.innerWidth-T)**2,C=(B=window.innerHeight-k)**2):(i=(M=o.overlaps(_,"paddingbox",t)).pointer.left,c=M.pointer.top,A=M.pointer.right,B=M.pointer.bottom,l=M.pointer.left**2,u=M.pointer.top**2,w=M.pointer.right**2,C=M.pointer.bottom**2)));let z=Math.sqrt(l+u),I=Math.sqrt(l+C),F=Math.sqrt(w+u),V=Math.sqrt(w+C),j=Math.abs(i-A)/2,L=Math.abs(c-B)/2,D=Math.sqrt(l+L**2),O=Math.sqrt(u+j**2),R=Math.sqrt(w+L**2),q=Math.sqrt(C+j**2);if(window.getSelection().removeAllRanges(),document.dispatchEvent(a),r.axis&&"x"!==r.axis||(o.style.left=h+(T-f)/b.x+x+"px"),r.axis&&"y"!==r.axis||(o.style.top=m+(k-y)/b.y+"px"),r.grid){let t=r.grid,e=r.axis,n=t[0]*Math.round((h+(T-f))/t[0]),i=t[1]*Math.round((m+(k-y))/t[1]);e&&"x"!==e||(o.style.left=`${n}px`),e&&"y"!==e||(o.style.top=`${i}px`)}if(r.containment||0===r.containment){let t,e,n=r.containment;if("window"===o.options.container)t=window.innerWidth-parseFloat(P.width)-n[1]-$.y,e=window.innerHeight-parseFloat(P.height)-n[2]-$.x;else{let i=parseFloat(v.borderLeftWidth)+parseFloat(v.borderRightWidth),r=parseFloat(v.borderTopWidth)+parseFloat(v.borderBottomWidth);t=g.width/b.x-parseFloat(P.width)-n[1]-i-$.y,e=g.height/b.y-parseFloat(P.height)-n[2]-r-$.x}parseFloat(o.style.left)<=n[3]&&(o.style.left=n[3]+"px"),parseFloat(o.style.top)<=n[0]&&(o.style.top=n[0]+"px"),parseFloat(o.style.left)>=t&&(o.style.left=t+"px"),parseFloat(o.style.top)>=e&&(o.style.top=e+"px")}if(r.drag.length){let n={left:i,top:c,right:A,bottom:B,width:parseFloat(P.width),height:parseFloat(P.height)};e.processCallbacks(o,r.drag,!1,n,t)}if(r.snap){let t=r.snap.sensitivity,n=_===document.body?window.innerWidth/8:g.width/8,s=_===document.body?window.innerHeight/8:g.height/8;o.snappableTo=!1,e.removeSnapAreas(),z<t?!1!==r.snap.snapLeftTop&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.left>0&&M.pointer.top>0?(o.snappableTo="left-top",e.createSnapArea(o,"lt",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="left-top",e.createSnapArea(o,"lt",t))):I<t?!1!==r.snap.snapLeftBottom&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.left>0&&M.pointer.bottom>0?(o.snappableTo="left-bottom",e.createSnapArea(o,"lb",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="left-bottom",e.createSnapArea(o,"lb",t))):F<t?!1!==r.snap.snapRightTop&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.right>0&&M.pointer.top>0?(o.snappableTo="right-top",e.createSnapArea(o,"rt",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="right-top",e.createSnapArea(o,"rt",t))):V<t?!1!==r.snap.snapRightBottom&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.right>0&&M.pointer.bottom>0?(o.snappableTo="right-bottom",e.createSnapArea(o,"rb",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="right-bottom",e.createSnapArea(o,"rb",t))):c<t&&O<n?!1!==r.snap.snapCenterTop&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.top>0?(o.snappableTo="center-top",e.createSnapArea(o,"ct",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="center-top",e.createSnapArea(o,"ct",t))):i<t&&D<s?!1!==r.snap.snapLeftCenter&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.left>0?(o.snappableTo="left-center",e.createSnapArea(o,"lc",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="left-center",e.createSnapArea(o,"lc",t))):A<t&&R<s?!1!==r.snap.snapRightCenter&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.right>0?(o.snappableTo="right-center",e.createSnapArea(o,"rc",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="right-center",e.createSnapArea(o,"rc",t))):B<t&&q<n&&!1!==r.snap.snapCenterBottom&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.bottom>0?(o.snappableTo="center-bottom",e.createSnapArea(o,"cb",t)):(o.snappableTo=!1,e.removeSnapAreas())):(o.snappableTo="center-bottom",e.createSnapArea(o,"cb",t)))}if(r.drop&&r.drop.dropZones){let n=e.isIE?"msElementsFromPoint":"elementsFromPoint",i=document[n](t.clientX,t.clientY);Array.isArray(i)||(i=Array.prototype.slice.call(i)),r.drop.dropZones.forEach((t=>{i.includes(t)&&(o.droppableTo=t)})),i.includes(o.droppableTo)||(o.droppableTo=!1)}},e.pointermove.forEach((t=>{document.addEventListener(t,i)})),window.addEventListener("mouseout",u,!1)}))})),e.pointerup.forEach((t=>{document.addEventListener(t,p),window.removeEventListener("mouseout",u)})),t.disable&&(l.style.pointerEvents="none")})),o},o.dragit=n=>{const i=Object.assign({},e.defaults.dragit,t.dragit),r=o.querySelectorAll(i.handles);return"disable"===n?r.forEach((t=>{t.style.pointerEvents="none"})):r.forEach((t=>{t.style.pointerEvents="auto"})),o},o.sizeit=(t={})=>{const n=new CustomEvent("jspanelresizestart",{detail:o.id}),i=new CustomEvent("jspanelresize",{detail:o.id}),r=new CustomEvent("jspanelresizestop",{detail:o.id});[n,i,r].forEach((t=>{t.panel=o}));let s,a,l,c,u,h,m={};m.handles=t.handles||e.defaults.resizeit.handles,m.handles.split(",").forEach((t=>{const e=document.createElement("DIV");e.className=`jsPanel-resizeit-handle jsPanel-resizeit-${t.trim()}`,o.append(e)}));let p=!!t.aspectRatio&&t.aspectRatio;function d(t){null===t.relatedTarget&&e.pointermove.forEach((t=>{document.removeEventListener(t,s,!1)}))}function f(t){if(e.pointermove.forEach((t=>{document.removeEventListener(t,s,!1)})),t.target.classList&&t.target.classList.contains("jsPanel-resizeit-handle")){let e,n,i=t.target.className;if(i.match(/jsPanel-resizeit-nw|jsPanel-resizeit-w|jsPanel-resizeit-sw/i)&&(e=!0),i.match(/jsPanel-resizeit-nw|jsPanel-resizeit-n|jsPanel-resizeit-ne/i)&&(n=!0),m.grid&&Array.isArray(m.grid)){1===m.grid.length&&(m.grid[1]=m.grid[0]);const t=parseFloat(o.style.width),i=parseFloat(o.style.height),r=t%m.grid[0],s=i%m.grid[1],a=parseFloat(o.style.left),l=parseFloat(o.style.top),c=a%m.grid[0],u=l%m.grid[1];r<m.grid[0]/2?o.style.width=t-r+"px":o.style.width=t+(m.grid[0]-r)+"px",s<m.grid[1]/2?o.style.height=i-s+"px":o.style.height=i+(m.grid[1]-s)+"px",e&&(c<m.grid[0]/2?o.style.left=a-c+"px":o.style.left=a+(m.grid[0]-c)+"px"),n&&(u<m.grid[1]/2?o.style.top=l-u+"px":o.style.top=l+(m.grid[1]-u)+"px")}}if(a){o.content.style.pointerEvents="inherit",a=void 0,o.saveCurrentDimensions(),o.saveCurrentPosition(),o.calcSizeFactors();let n=o.controlbar.querySelector(".jsPanel-btn-smallify"),i=o.getBoundingClientRect();if(n&&i.height>h+5&&(n.style.transform="rotate(0deg)"),document.dispatchEvent(r),m.stop.length){let n=window.getComputedStyle(o),i={left:parseFloat(n.left),top:parseFloat(n.top),width:parseFloat(n.width),height:parseFloat(n.height)};e.processCallbacks(o,m.stop,!1,i,t)}}o.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),m.aspectRatio=p,document.removeEventListener(t,f)}return o.querySelectorAll(".jsPanel-resizeit-handle").forEach((r=>{r.style.touchAction="none",e.pointerdown.forEach((p=>{r.addEventListener(p,(r=>{if(r.preventDefault(),r.stopPropagation(),r.button&&r.button>0)return!1;let p=1;if(((m=Object.assign({},e.defaults.resizeit,t)).containment||0===m.containment)&&(m.containment=e.pOcontainment(m.containment)),m.aspectRatio&&!0===m.aspectRatio&&(m.aspectRatio="panel"),e.modifier){let t=e.modifier;t.altKey?m.aspectRatio="content":t.ctrlKey?m.aspectRatio="panel":t.shiftKey&&(m.aspectRatio=!1,p=2)}let f="function"==typeof m.maxWidth?m.maxWidth():m.maxWidth||1e4,y="function"==typeof m.maxHeight?m.maxHeight():m.maxHeight||1e4,_="function"==typeof m.minWidth?m.minWidth():m.minWidth,g="function"==typeof m.minHeight?m.minHeight():m.minHeight;o.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));const v=o.parentElement,b=v.tagName.toLowerCase(),x=o.getBoundingClientRect(),$=v.getBoundingClientRect(),A=window.getComputedStyle(v,null),w=parseInt(A.borderLeftWidth,10),B=parseInt(A.borderTopWidth,10),C=A.getPropertyValue("position"),S=r.clientX||0===r.clientX||r.touches[0].clientX,E=r.clientY||0===r.clientY||r.touches[0].clientY,M=S/E,T=r.target.classList,k=o.getScaleFactor(),P=x.width/x.height,z=o.content.getBoundingClientRect(),I=z.width/z.height,F=o.header.getBoundingClientRect().height,V=o.footer.getBoundingClientRect().height||0;let j=x.left,L=x.top,D=1e4,O=1e4,R=1e4,q=1e4;u=x.width,h=x.height,"body"!==b&&(j=x.left-$.left+v.scrollLeft,L=x.top-$.top+v.scrollTop),"body"===b&&m.containment?(D=document.documentElement.clientWidth-x.left,R=document.documentElement.clientHeight-x.top,O=x.width+x.left,q=x.height+x.top):m.containment&&("static"===C?(D=$.width-x.left+w,R=$.height+$.top-x.top+B,O=x.width+(x.left-$.left)-w,q=x.height+(x.top-$.top)-B):(D=v.clientWidth-(x.left-$.left)/k.x+w,R=v.clientHeight-(x.top-$.top)/k.y+B,O=(x.width+x.left-$.left)/k.x-w,q=o.clientHeight+(x.top-$.top)/k.y-B)),m.containment&&(O-=m.containment[3],q-=m.containment[0],D-=m.containment[1],R-=m.containment[2]);const U=window.getComputedStyle(o),N=parseFloat(U.width)-x.width,W=parseFloat(U.height)-x.height;let H=parseFloat(U.left)-x.left,Y=parseFloat(U.top)-x.top;v!==document.body&&(H+=$.left,Y+=$.top);let G=parseInt(U.borderTopWidth,10),J=parseInt(U.borderRightWidth,10),Z=parseInt(U.borderBottomWidth,10),X=parseInt(U.borderLeftWidth,10);s=t=>{t.preventDefault(),a||(document.dispatchEvent(n),m.start.length&&e.processCallbacks(o,m.start,!1,{width:u,height:h,left:j,top:L},t),o.front(),x.height>h+5&&(o.status="normalized",o.setControls([".jsPanel-btn-normalize"]))),a=1,document.dispatchEvent(i);let r=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY;T.contains("jsPanel-resizeit-e")?((l=u+(r-S)*p/k.x+N)>=D&&(l=D),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",2===p&&(o.style.left=j-(r-S)+"px"),"content"===m.aspectRatio?(o.style.height=(l-J-X)/I+F+V+G+Z+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*I+"px")):"panel"===m.aspectRatio&&(o.style.height=l/P+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*P+"px"))):T.contains("jsPanel-resizeit-s")?((c=h+(s-E)*p/k.y+W)>=R&&(c=R),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px",2===p&&(o.style.top=L-(s-E)+"px"),"content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-w")?((l=u+(S-r)*p/k.x+N)<=f&&l>=_&&l<=O&&(o.style.left=j+(r-S)/k.x+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px","content"===m.aspectRatio?(o.style.height=(l-J-X)/I+F+V+G+Z+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*I+"px")):"panel"===m.aspectRatio&&(o.style.height=l/P+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*P+"px"))):T.contains("jsPanel-resizeit-n")?((c=h+(E-s)*p/k.y+W)<=y&&c>=g&&c<=q&&(o.style.top=L+(s-E)/k.y+Y+"px"),c>=q&&(c=q),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px","content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-se")?((l=u+(r-S)*p/k.x+N)>=D&&(l=D),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",2===p&&(o.style.left=j-(r-S)+"px"),m.aspectRatio&&(o.style.height=l/P+"px"),(c=h+(s-E)*p/k.y+W)>=R&&(c=R),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px",2===p&&(o.style.top=L-(s-E)+"px"),"content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-sw")?((c=h+(s-E)*p/k.y+W)>=R&&(c=R),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px",2===p&&(o.style.top=L-(s-E)+"px"),m.aspectRatio&&(o.style.width=c*P+"px"),(l=u+(S-r)*p/k.x+N)<=f&&l>=_&&l<=O&&(o.style.left=j+(r-S)/k.x+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px","content"===m.aspectRatio?(o.style.height=(l-J-X)/I+F+V+G+Z+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*I+"px")):"panel"===m.aspectRatio&&(o.style.height=l/P+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*P+"px"))):T.contains("jsPanel-resizeit-ne")?((l=u+(r-S)*p/k.x+N)>=D&&(l=D),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",2===p&&(o.style.left=j-(r-S)+"px"),m.aspectRatio&&(o.style.height=l/P+"px"),(c=h+(E-s)*p/k.y+W)<=y&&c>=g&&c<=q&&(o.style.top=L+(s-E)/k.y+Y+"px"),c>=q&&(c=q),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px","content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-nw")&&(m.aspectRatio&&T.contains("jsPanel-resizeit-nw")&&(s=(r=s*M)/M),(l=u+(S-r)*p/k.x+N)<=f&&l>=_&&l<=O&&(o.style.left=j+(r-S)/k.x+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",m.aspectRatio&&(o.style.height=l/P+"px"),(c=h+(E-s)*p/k.y+W)<=y&&c>=g&&c<=q&&(o.style.top=L+(s-E)/k.y+Y+"px"),c>=q&&(c=q),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px","content"===m.aspectRatio?o.style.width=(c-F-V-G-Z)*I+G+Z+"px":"panel"===m.aspectRatio&&(o.style.width=c*P+"px")),window.getSelection().removeAllRanges();const d=window.getComputedStyle(o),b={left:parseFloat(d.left),top:parseFloat(d.top),right:parseFloat(d.right),bottom:parseFloat(d.bottom),width:parseFloat(d.width),height:parseFloat(d.height)};m.resize.length&&e.processCallbacks(o,m.resize,!1,b,t)},e.pointermove.forEach((t=>{document.addEventListener(t,s,!1)})),window.addEventListener("mouseout",d,!1)}))})),e.pointerup.forEach((function(t){document.addEventListener(t,f),window.removeEventListener("mouseout",d)})),t.disable&&(r.style.pointerEvents="none")})),o},o.resizeit=t=>{const e=o.querySelectorAll(".jsPanel-resizeit-handle");return"disable"===t?e.forEach((t=>{t.style.pointerEvents="none"})):e.forEach((t=>{t.style.pointerEvents="auto"})),o},o.getScaleFactor=()=>{const t=o.getBoundingClientRect();return{x:t.width/o.offsetWidth,y:t.height/o.offsetHeight}},o.calcSizeFactors=()=>{const e=window.getComputedStyle(o);if("window"===t.container)o.hf=parseFloat(e.left)/(window.innerWidth-parseFloat(e.width)),o.vf=parseFloat(e.top)/(window.innerHeight-parseFloat(e.height));else if(o.parentElement){let t=o.parentElement.getBoundingClientRect();o.hf=parseFloat(e.left)/(t.width-parseFloat(e.width)),o.vf=parseFloat(e.top)/(t.height-parseFloat(e.height))}},o.saveCurrentDimensions=(t=!1)=>{const e=window.getComputedStyle(o);o.currentData.width=e.width,"normalized"===o.status&&(o.currentData.height=e.height),t&&(o.style.height=e.height)},o.saveCurrentPosition=()=>{const t=window.getComputedStyle(o);o.currentData.left=t.left,o.currentData.top=t.top},o.reposition=(...n)=>{let i,r=t.position,s=!0;return n.forEach((t=>{"string"==typeof t||"object"==typeof t?r=t:"boolean"==typeof t?s=t:"function"==typeof t&&(i=t)})),e.position(o,r),o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()})),s&&o.saveCurrentPosition(),i&&i.call(o,o),o},o.repositionOnSnap=n=>{let i="0",r="0",s=e.pOcontainment(t.dragit.containment);if(t.dragit.snap.containment)switch(n){case"left-top":i=s[3],r=s[0];break;case"right-top":i=-s[1],r=s[0];break;case"right-bottom":i=-s[1],r=-s[2];break;case"left-bottom":i=s[3],r=-s[2];break;case"center-top":i=s[3]/2-s[1]/2,r=s[0];break;case"center-bottom":i=s[3]/2-s[1]/2,r=-s[2];break;case"left-center":i=s[3],r=s[0]/2-s[2]/2;break;case"right-center":i=-s[1],r=s[0]/2-s[2]/2}e.position(o,n),e.setStyle(o,{left:`calc(${o.style.left} + ${i}px)`,top:`calc(${o.style.top} + ${r}px)`})},o.overlaps=(t,e,n)=>{let i,r=o.getBoundingClientRect(),s=getComputedStyle(o.parentElement),a=o.getScaleFactor(),l={top:0,right:0,bottom:0,left:0},c=0,u=0,h=0,m=0;"window"!==o.options.container&&"paddingbox"===e&&(l.top=parseInt(s.borderTopWidth,10)*a.y,l.right=parseInt(s.borderRightWidth,10)*a.x,l.bottom=parseInt(s.borderBottomWidth,10)*a.y,l.left=parseInt(s.borderLeftWidth,10)*a.x),i="string"==typeof t?"window"===t?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:"parent"===t?o.parentElement.getBoundingClientRect():document.querySelector(t).getBoundingClientRect():t.getBoundingClientRect(),n&&(c=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,h=c-i.left,m=u-i.top);let p=r.left<i.right&&r.right>i.left,d=r.top<i.bottom&&r.bottom>i.top;return{overlaps:p&&d,top:r.top-i.top-l.top,right:i.right-r.right-l.right,bottom:i.bottom-r.bottom-l.bottom,left:r.left-i.left-l.left,parentBorderWidth:l,panelRect:r,referenceRect:i,pointer:{clientX:c,clientY:u,left:h-l.left,top:m-l.top,right:i.width-h-l.right,bottom:i.height-m-l.bottom}}},o.setSize=()=>{if(t.panelSize){const n=e.pOsize(o,t.panelSize);o.style.width=n.width,o.style.height=n.height}else if(t.contentSize){const n=e.pOsize(o,t.contentSize);o.content.style.width=n.width,o.content.style.height=n.height,o.style.width=n.width,o.content.style.width="100%"}return o},o.resize=(...t)=>{let n,i=window.getComputedStyle(o),r={width:i.width,height:i.height},s=!0;t.forEach((t=>{"string"==typeof t?r=t:"object"==typeof t?r=Object.assign(r,t):"boolean"==typeof t?s=t:"function"==typeof t&&(n=t)}));let a=e.pOsize(o,r);o.style.width=a.width,o.style.height=a.height,o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()})),s&&o.saveCurrentDimensions(),o.status="normalized";let l=o.controlbar.querySelector(".jsPanel-btn-smallify");return l&&(l.style.transform="rotate(0deg)"),n&&n.call(o,o),o.calcSizeFactors(),o},o.windowResizeHandler=e=>{if(e.target===window){let n,i,r=o.status,s=t.onwindowresize;"maximized"===r&&s?o.maximize(!1,!0):o.snapped&&"minimized"!==r?o.snap(o.snapped,!0):"normalized"===r||"smallified"===r||"maximized"===r?"function"==typeof s?s.call(o,e,o):(n=(window.innerWidth-o.offsetWidth)*o.hf,o.style.left=n<=0?0:n+"px",i=(window.innerHeight-o.offsetHeight)*o.vf,o.style.top=i<=0?0:i+"px"):"smallifiedmax"===r&&s&&o.maximize(!1,!0).smallify(),o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()}))}},o.setControls=(t,e)=>(o.header.querySelectorAll(".jsPanel-btn").forEach((t=>{const e=t.className.split("-"),n=e[e.length-1];"hidden"!==o.getAttribute(`data-btn${n}`)&&(t.style.display="block")})),t.forEach((t=>{const e=o.controlbar.querySelector(t);e&&(e.style.display="none")})),e&&e.call(o,o),o),o.setControlStatus=(t,e="enable",n)=>{const i=o.controlbar.querySelector(`.jsPanel-btn-${t}`);switch(e){case"disable":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"disabled"),i.style.pointerEvents="none",i.style.opacity=.4,i.style.cursor="default");break;case"hide":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"hidden"),i.style.display="none");break;case"show":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"enabled"),i.style.display="block",i.style.pointerEvents="auto",i.style.opacity=1,i.style.cursor="pointer");break;case"enable":"removed"!==o.getAttribute(`data-btn${t}`)&&("hidden"===o.getAttribute(`data-btn${t}`)&&(i.style.display="block"),o.setAttribute(`data-btn${t}`,"enabled"),i.style.pointerEvents="auto",i.style.opacity=1,i.style.cursor="pointer");break;case"remove":o.controlbar.removeChild(i),o.setAttribute(`data-btn${t}`,"removed")}return n&&n.call(o,o),o},o.setControlSize=t=>{const e=t.toLowerCase();o.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{["jsPanel-btn-xl","jsPanel-btn-lg","jsPanel-btn-md","jsPanel-btn-sm","jsPanel-btn-xs"].forEach((e=>{t.classList.remove(e)})),t.classList.add(`jsPanel-btn-${e}`)})),"xl"===e?o.titlebar.style.fontSize="1.5rem":"lg"===e?o.titlebar.style.fontSize="1.25rem":"md"===e?o.titlebar.style.fontSize="1.05rem":"sm"===e?o.titlebar.style.fontSize=".9rem":"xs"===e&&(o.titlebar.style.fontSize=".8rem")},o.setHeaderControls=n=>{if(o.options.headerControls.add){let t=o.options.headerControls.add;Array.isArray(t)||(t=[t]),t.forEach((t=>{o.addControl(t)}))}let i=[];o.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{let e=t.className.match(/jsPanel-btn-[a-z0-9]{3,}/i)[0].substring(12);i.push(e)}));const r=e.pOheaderControls(t.headerControls);return t.headerControls=r,i.forEach((t=>{r[t]&&o.setControlStatus(t,r[t])})),o.setControlSize(r.size),n&&n.call(o,o),o},o.setHeaderLogo=(t,n)=>{let i=[o.headerlogo],r=document.querySelector("#"+o.id+"-min");return r&&i.push(r.querySelector(".jsPanel-headerlogo")),"string"==typeof t?"<"!==t.substr(0,1)?i.forEach((n=>{e.emptyNode(n);let i=document.createElement("img");i.src=t,n.append(i)})):i.forEach((e=>{e.innerHTML=t})):i.forEach((n=>{e.emptyNode(n),n.append(t)})),o.headerlogo.childNodes.forEach((t=>{t.nodeName&&"IMG"===t.nodeName&&t.setAttribute("draggable","false")})),n&&n.call(o,o),o},o.setHeaderRemove=t=>(o.removeChild(o.header),o.content.classList.add("jsPanel-content-noheader"),["close","maximize","normalize","minimize","smallify"].forEach((t=>{o.setAttribute(`data-btn${t}`,"removed")})),t&&t.call(o,o),o),o.setHeaderTitle=(t,n)=>{let i=[o.headertitle],r=document.querySelector("#"+o.id+"-min");return r&&i.push(r.querySelector(".jsPanel-title")),"string"==typeof t?i.forEach((e=>{e.innerHTML=t})):"function"==typeof t?i.forEach((n=>{e.emptyNode(n),n.innerHTML=t()})):i.forEach((n=>{e.emptyNode(n),n.append(t)})),n&&n.call(o,o),o},o.setIconfont=(t,n=o,i)=>{if(t){let i,r;if("fa"===t||"far"===t||"fal"===t||"fas"===t||"fad"===t)i=[`${t} fa-window-close`,`${t} fa-window-maximize`,`${t} fa-window-restore`,`${t} fa-window-minimize`,`${t} fa-chevron-up`];else if("material-icons"===t)i=[t,t,t,t,t,t],r=["close","fullscreen","fullscreen_exit","call_received","expand_less"];else if(Array.isArray(t))i=[`custom-control-icon ${t[4]}`,`custom-control-icon ${t[3]}`,`custom-control-icon ${t[2]}`,`custom-control-icon ${t[1]}`,`custom-control-icon ${t[0]}`];else{if("bootstrap"!==t&&"glyphicon"!==t)return n;i=["glyphicon glyphicon-remove","glyphicon glyphicon-fullscreen","glyphicon glyphicon-resize-full","glyphicon glyphicon-minus","glyphicon glyphicon-chevron-up"]}n.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{e.emptyNode(t).innerHTML="<span></span>"})),Array.prototype.slice.call(n.querySelectorAll(".jsPanel-controlbar .jsPanel-btn > span")).reverse().forEach(((e,n)=>{e.className=i[n],"material-icons"===t&&(e.textContent=r[n])}))}return i&&i.call(n,n),n},o.addToolbar=(t,e,n)=>{if("header"===t?t=o.headertoolbar:"footer"===t&&(t=o.footer),"string"==typeof e)t.innerHTML=e;else if(Array.isArray(e))e.forEach((e=>{"string"==typeof e?t.innerHTML+=e:t.append(e)}));else if("function"==typeof e){let n=e.call(o,o);"string"==typeof n?t.innerHTML=n:t.append(n)}else t.append(e);return t.classList.add("active"),n&&n.call(o,o),o},o.addCloseControl=()=>{let t=document.createElement("button"),n=o.content.style.color;return t.classList.add("jsPanel-addCloseCtrl"),t.innerHTML=e.icons.close,t.style.color=n,o.options.rtl&&t.classList.add("rtl"),o.appendChild(t),e.pointerup.forEach((e=>{t.addEventListener(e,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})),e.pointerdown.forEach((e=>{t.addEventListener(e,(t=>{t.preventDefault()}))})),o},o.addControl=n=>{if(!n.html)return o;n.position||(n.position=1);const i=o.controlbar.querySelectorAll(".jsPanel-btn").length;let r=document.createElement("button");r.innerHTML=n.html,r.className=`jsPanel-btn jsPanel-btn-${n.name} jsPanel-btn-${t.headerControls.size}`,r.style.color=o.header.style.color,n.position>i?o.controlbar.append(r):o.controlbar.insertBefore(r,o.querySelector(`.jsPanel-controlbar .jsPanel-btn:nth-child(${n.position})`));const s=n.ariaLabel||n.name;return s&&r.setAttribute("aria-label",s),e.pointerup.forEach((t=>{r.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;n.handler.call(o,o,r)}))})),n.afterInsert&&n.afterInsert.call(r,r),o},o.setRtl=()=>{[o.header,o.content,o.footer].forEach((e=>{e.dir="rtl",t.rtl.lang&&(e.lang=t.rtl.lang)}))},o.id=t.id,o.classList.add("jsPanel-"+t.paneltype),"standard"===t.paneltype&&(o.style.zIndex=this.zi.next()),r.append(o),o.front(!1,!1),o.setTheme(t.theme),t.boxShadow&&o.classList.add(`jsPanel-depth-${t.boxShadow}`),t.header){if(t.headerLogo&&o.setHeaderLogo(t.headerLogo),o.setIconfont(t.iconfont),o.setHeaderTitle(t.headerTitle),o.setHeaderControls(),e.isIE){let t=[o.headerbar,o.controlbar];switch(o.options.headerControls.size){case"md":t.forEach((t=>{t.style.height="34px"}));break;case"xs":t.forEach((t=>{t.style.height="26px"}));break;case"sm":t.forEach((t=>{t.style.height="30px"}));break;case"lg":t.forEach((t=>{t.style.height="38px"}));break;case"xl":t.forEach((t=>{t.style.height="42px"}))}}if("auto-show-hide"===t.header){let n="jsPanel-depth-"+t.boxShadow;o.header.style.opacity=0,o.style.backgroundColor="transparent",this.remClass(o,n),this.setClass(o.content,n),o.header.addEventListener("mouseenter",(()=>{o.header.style.opacity=1,e.setClass(o,n),e.remClass(o.content,n)})),o.header.addEventListener("mouseleave",(()=>{o.header.style.opacity=0,e.remClass(o,n),e.setClass(o.content,n)}))}}else o.setHeaderRemove(),t.addCloseControl&&o.addCloseControl();if(t.headerToolbar&&o.addToolbar(o.headertoolbar,t.headerToolbar),t.footerToolbar&&o.addToolbar(o.footer,t.footerToolbar),t.border&&o.setBorder(t.border),t.borderRadius&&o.setBorderRadius(t.borderRadius),t.content&&("function"==typeof t.content?t.content.call(o,o):"string"==typeof t.content?o.content.innerHTML=t.content:o.content.append(t.content)),t.contentAjax&&this.ajax(t.contentAjax,o),t.contentFetch&&this.fetch(t.contentFetch,o),t.contentOverflow){const e=t.contentOverflow.split(" ");1===e.length?o.content.style.overflow=e[0]:2===e.length&&(o.content.style.overflowX=e[0],o.content.style.overflowY=e[1])}if(t.autoclose){"number"==typeof t.autoclose?t.autoclose={time:t.autoclose+"ms"}:"string"==typeof t.autoclose&&(t.autoclose={time:t.autoclose});let n=Object.assign({},e.defaultAutocloseConfig,t.autoclose);n.time&&"number"==typeof n.time&&(n.time+="ms");let i=o.progressbar.querySelector("div");i.addEventListener("animationend",(t=>{t.stopPropagation(),o.progressbar.classList.remove("active"),o.close()})),n.progressbar&&(o.progressbar.classList.add("active"),n.background?e.themes.indexOf(n.background)>-1?o.progressbar.classList.add(n.background+"-bg"):e.colorNames[n.background]?o.progressbar.style.background="#"+e.colorNames[n.background]:o.progressbar.style.background=n.background:o.progressbar.classList.add("success-bg")),i.style.animation=`${n.time} progressbar`}if(t.rtl&&o.setRtl(),o.setSize(),o.status="normalized",t.position?this.position(o,t.position):o.style.opacity=1,document.dispatchEvent(c),o.calcSizeFactors(),t.animateIn&&(o.addEventListener("animationend",(()=>{this.remClass(o,t.animateIn)})),this.setClass(o,t.animateIn)),t.syncMargins){let n=this.pOcontainment(t.maximizedMargin);t.dragit&&(t.dragit.containment=n,!0===t.dragit.snap?(t.dragit.snap=e.defaultSnapConfig,t.dragit.snap.containment=!0):t.dragit.snap&&(t.dragit.snap.containment=!0)),t.resizeit&&(t.resizeit.containment=n)}if(t.dragit?(["start","drag","stop"].forEach((e=>{t.dragit[e]?"function"==typeof t.dragit[e]&&(t.dragit[e]=[t.dragit[e]]):t.dragit[e]=[]})),o.drag(t.dragit),o.addEventListener("jspaneldragstop",(t=>{t.panel===o&&o.calcSizeFactors()}),!1)):o.titlebar.style.cursor="default",t.resizeit){let n;["start","resize","stop"].forEach((e=>{t.resizeit[e]?"function"==typeof t.resizeit[e]&&(t.resizeit[e]=[t.resizeit[e]]):t.resizeit[e]=[]})),o.sizeit(t.resizeit),o.addEventListener("jspanelresizestart",(t=>{t.panel===o&&(n=o.status)}),!1),o.addEventListener("jspanelresizestop",(i=>{i.panel===o&&("smallified"===n||"smallifiedmax"===n||"maximized"===n)&&parseFloat(o.style.height)>parseFloat(window.getComputedStyle(o.header).height)&&(o.setControls([".jsPanel-btn-normalize"]),o.status="normalized",document.dispatchEvent(c),document.dispatchEvent(a),t.onstatuschange&&e.processCallbacks(o,t.onstatuschange,"every"),o.calcSizeFactors())}),!1)}if(o.saveCurrentDimensions(!0),o.saveCurrentPosition(),t.setStatus&&("smallifiedmax"===t.setStatus?o.maximize().smallify():"smallified"===t.setStatus?o.smallify():o[t.setStatus.substr(0,t.setStatus.length-1)]()),this.pointerdown.forEach((e=>{o.addEventListener(e,(e=>{e.target.closest(".jsPanel-btn-close")||e.target.closest(".jsPanel-btn-minimize")||"standard"!==t.paneltype||o.front()}),!1)})),t.onwindowresize&&"window"===o.options.container&&window.addEventListener("resize",o.windowResizeHandler,!1),t.onparentresize){let e=t.onparentresize,n=o.isChildpanel();if(n){const t=n.content;let i=[];o.parentResizeHandler=r=>{if(r.panel===n){i[0]=t.offsetWidth,i[1]=t.offsetHeight;let n,r,s=o.status;"maximized"===s&&e?o.maximize():o.snapped&&"minimized"!==s?o.snap(o.snapped,!0):"normalized"===s||"smallified"===s||"maximized"===s?"function"==typeof e?e.call(o,o,{width:i[0],height:i[1]}):(n=(i[0]-o.offsetWidth)*o.hf,o.style.left=n<=0?0:n+"px",r=(i[1]-o.offsetHeight)*o.vf,o.style.top=r<=0?0:r+"px"):"smallifiedmax"===s&&e&&o.maximize().smallify()}},document.addEventListener("jspanelresize",o.parentResizeHandler,!1)}}return this.globalCallbacks&&(Array.isArray(this.globalCallbacks)?this.globalCallbacks.forEach((t=>{t.call(o,o)})):this.globalCallbacks.call(o,o)),t.callback&&(Array.isArray(t.callback)?t.callback.forEach((t=>{t.call(o,o)})):t.callback.call(o,o)),n&&n.call(o,o),document.dispatchEvent(s),o}});
/**
			 * @license AngularJS v1.8.2
			 * (c) 2010-2020 Google LLC. http://angularjs.org
			 * License: MIT
			 */function n(t,e,n,i){let r;n=n||0;let o=(i=i||e.length-1)<=2147483647;for(;i-n>1;)r=o?n+i>>1:g((n+i)/2),e[r]<t?n=r:i=r;return t-e[n]<=e[i]-t?n:i}function i(t,e,n,i){for(let r=1==i?e:n;r>=e&&r<=n;r+=i)if(null!=t[r])return r;return-1}!function(t){var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!O(t))return e;D(t.objectMaxDepth)&&(e.objectMaxDepth=i(t.objectMaxDepth)?t.objectMaxDepth:NaN),D(t.urlErrorParamsEnabled)&&X(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function i(t){return U(t)&&t>0}function r(t,n){n=n||Error;var i="https://errors.angularjs.org/1.8.2/",r=i.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(r,"g");return function(){var r,s,a=arguments[0],l=arguments[1],c="["+(t?t+":":"")+a+"] ",u=mt(arguments,2).map((function(t){return Nt(t,e.objectMaxDepth)}));if(c+=l.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<u.length?u[e].replace(o,""):t})),c+="\n"+i+(t?t+"/":"")+a,e.urlErrorParamsEnabled)for(s=0,r="?";s<u.length;s++,r="&")c+=r+"p"+s+"="+encodeURIComponent(u[s]);return new n(c)}}var o,s,a,l,c=/^\/(.+)\/([a-z]*)$/,u="validity",h=Object.prototype.hasOwnProperty,m=function(t){return q(t)?t.toLowerCase():t},p=function(t){return q(t)?t.toUpperCase():t},d=[].slice,f=[].splice,y=[].push,_=Object.prototype.toString,g=Object.getPrototypeOf,v=r("ng"),b=t.angular||(t.angular={}),x=0;function $(t){if(null==t||J(t))return!1;if(W(t)||q(t)||s&&t instanceof s)return!0;var e="length"in Object(t)&&t.length;return U(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function A(t,e,n){var i,r;if(t)if(Y(t))for(i in t)"prototype"!==i&&"length"!==i&&"name"!==i&&t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else if(W(t)||$(t)){var o="object"!=typeof t;for(i=0,r=t.length;i<r;i++)(o||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==A)t.forEach(e,n,t);else if(R(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)h.call(t,i)&&e.call(n,t[i],i,t);return t}function w(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function B(t){return function(e,n){t(n,e)}}function C(){return++x}function S(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(O(s)||Y(s))for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l],h=s[u];n&&O(h)?N(h)?t[u]=new Date(h.valueOf()):G(h)?t[u]=new RegExp(h):h.nodeName?t[u]=h.cloneNode(!0):nt(h)?t[u]=h.clone():"__proto__"!==u&&(O(t[u])||(t[u]=W(h)?[]:{}),E(t[u],[h],!0)):t[u]=h}}return S(t,i),t}function M(t){return E(t,d.call(arguments,1),!1)}function T(t){return E(t,d.call(arguments,1),!0)}function k(t){return parseInt(t,10)}o=t.document.documentMode;var P=Number.isNaN||function(t){return t!=t};function z(t,e){return M(Object.create(t),e)}function I(){}function F(t){return t}function V(t){return function(){return t}}function j(t){return Y(t.toString)&&t.toString!==_}function L(t){return void 0===t}function D(t){return void 0!==t}function O(t){return null!==t&&"object"==typeof t}function R(t){return null!==t&&"object"==typeof t&&!g(t)}function q(t){return"string"==typeof t}function U(t){return"number"==typeof t}function N(t){return"[object Date]"===_.call(t)}function W(t){return Array.isArray(t)||t instanceof Array}function H(t){switch(_.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function Y(t){return"function"==typeof t}function G(t){return"[object RegExp]"===_.call(t)}function J(t){return t&&t.window===t}function Z(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function K(t){return t&&Y(t.then)}I.$inject=[],F.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,tt=function(t){return q(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function it(t){return m(t.nodeName||t[0]&&t[0].nodeName)}function rt(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function st(t,e,n){var r,o,s=[],a=[];if(n=i(n)?n:NaN,e){if((o=e)&&U(o.length)&&Q.test(_.call(o))||(r=e,"[object ArrayBuffer]"===_.call(r)))throw v("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw v("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:A(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),s.push(t),a.push(e),l(t,e,n)}return c(t,n);function l(t,e,n){if(--n<0)return"...";var i,r=e.$$hashKey;if(W(t))for(var o=0,s=t.length;o<s;o++)e.push(c(t[o],n));else if(R(t))for(i in t)e[i]=c(t[i],n);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=c(t[i],n));else for(i in t)h.call(t,i)&&(e[i]=c(t[i],n));return S(e,r),e}function c(t,e){if(!O(t))return t;var n=s.indexOf(t);if(-1!==n)return a[n];if(J(t)||Z(t))throw v("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(t){switch(_.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(c(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(Y(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===r&&(r=W(t)?[]:Object.create(g(t)),i=!0),s.push(t),a.push(r),i?l(t,r,e):r}}function at(t,e){return t===e||t!=t&&e!=e}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o===typeof e&&"object"===o){if(!W(t)){if(N(t))return!!N(e)&&at(t.getTime(),e.getTime());if(G(t))return!!G(e)&&t.toString()===e.toString();if(Z(t)||Z(e)||J(t)||J(e)||W(e)||N(e)||G(e))return!1;for(i in r=Ot(),t)if("$"!==i.charAt(0)&&!Y(t[i])){if(!lt(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&D(e[i])&&!Y(e[i]))return!1;return!0}if(!W(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!lt(t[i],e[i]))return!1;return!0}}return!1}var ct=function(){if(!D(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},ut=function(){if(D(ut.name_))return ut.name_;var e,n,i,r,o=Ct.length;for(n=0;n<o;++n)if(i=Ct[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return ut.name_=r};function ht(t,e,n){return t.concat(d.call(e,n))}function mt(t,e){return d.call(t,e||0)}function pt(t,e){var n=arguments.length>2?mt(arguments,2):[];return!Y(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ht(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:J(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":Z(n)&&(i="$SCOPE"),i}function ft(t,e){if(!L(t))return U(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function yt(t){return q(t)?JSON.parse(t):t}var _t=/:/g;function gt(t,e){t=t.replace(_t,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return P(n)?e:n}function vt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return vt(t,n*(gt(e,i)-i))}function xt(t){t=s(t).clone().empty();var e=s("<div></div>").append(t).html();try{return t[0].nodeType===qt?m(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+m(e)}))}catch(n){return m(e)}}function $t(t){try{return decodeURIComponent(t)}catch(e){}}function At(t){var e={};return A((t||"").split("&"),(function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),r=t.substring(n+1)),D(i=$t(i))&&(r=!D(r)||$t(r),h.call(e,i)?W(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))})),e}function wt(t){return Bt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Bt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Ct=["ng-","data-ng-","ng:","x-ng-"],St=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var i=n.attributes;return[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Et(e,n){var i,r,o={};if(A(Ct,(function(t){var n=t+"app";!i&&e.hasAttribute&&e.hasAttribute(n)&&(i=e,r=e.getAttribute(n))})),A(Ct,(function(t){var n,o=t+"app";!i&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))})),i){if(!St)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,i,r=Ct.length;for(i=0;i<r;++i)if(n=Ct[i]+e,q(n=t.getAttribute(n)))return n;return null}(i,"strict-di"),n(i,r?[r]:[],o)}}function Mt(e,n,i){O(i)||(i={}),i=M({strictDi:!1},i);var r=function(){if((e=s(e)).injector()){var r=e[0]===t.document?"document":xt(e);throw v("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Ke(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply((function(){e.data("$injector",i),n(e)(t)}))}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return r();t.name=t.name.replace(a,""),b.resumeBootstrap=function(t){return A(t,(function(t){n.push(t)})),r()},Y(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Tt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function kt(t){var e=b.element(t).injector();if(!e)throw v("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Pt=/[A-Z]/g;function zt(t,e){return e=e||"_",t.replace(Pt,(function(t,n){return(n?e:"")+t.toLowerCase()}))}var It=!1;function Ft(){pe.legacyXHTMLReplacement=!0}function Vt(t,e,n){if(!t)throw v("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function jt(t,e,n){return n&&W(t)&&(t=t[t.length-1]),Vt(Y(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Lt(t,e){if("hasOwnProperty"===t)throw v("badname","hasOwnProperty is not a valid {0} name",e)}function Dt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=s(d.call(t,0,r))),e.push(n));return e||t}function Ot(){return Object.create(null)}function Rt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!j(t)||W(t)||N(t)?ft(t):t.toString()}return t}var qt=3;function Ut(t,e){if(W(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(O(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function Nt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):L(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return i(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(O(e=dt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e}))}(t,e):t}var Wt={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};pe.expando="ng339";var Ht=pe.cache={},Yt=1;pe._data=function(t){return this.cache[t[this.expando]]||{}};var Gt=/-([a-z])/g,Jt=/^-ms-/,Zt={mouseleave:"mouseout",mouseenter:"mouseover"},Xt=r("jqLite");function Kt(t,e){return e.toUpperCase()}function Qt(t){return t.replace(Gt,Kt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ne=/<([\w:-]+)/,ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,re={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};re.tbody=re.tfoot=re.colgroup=re.caption=re.thead,re.th=re.td;var oe={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var se in re){var ae=re[se],le=ae.slice().reverse();oe[se]=[le.length,"<"+le.join("><")+">","</"+ae.join("></")+">"]}function ce(t){return!ee.test(t)}function ue(t){var e=t.nodeType;return 1===e||!e||9===e}function he(e,n){var i,r,s,a,l,c=n.createDocumentFragment(),u=[];if(ce(e))u.push(n.createTextNode(e));else{if(i=c.appendChild(n.createElement("div")),r=(ne.exec(e)||["",""])[1].toLowerCase(),a=pe.legacyXHTMLReplacement?e.replace(ie,"<$1></$2>"):e,o<10)for(s=oe[r]||oe._default,i.innerHTML=s[1]+a+s[2],l=s[0];l--;)i=i.firstChild;else{for(l=(s=re[r]||[]).length;--l>-1;)i.appendChild(t.document.createElement(s[l])),i=i.firstChild;i.innerHTML=a}u=ht(u,i.childNodes),(i=c.firstChild).textContent=""}return c.textContent="",c.innerHTML="",A(u,(function(t){c.appendChild(t)})),c}oe.optgroup=oe.option;var me=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function pe(e){if(e instanceof pe)return e;var n,i,r,o;if(q(e)&&(e=tt(e),n=!0),!(this instanceof pe)){if(n&&"<"!==e.charAt(0))throw Xt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pe(e)}n?Be(this,(i=e,r=r||t.document,(o=te.exec(i))?[r.createElement(o[1])]:(o=he(i,r))?o.childNodes:[])):Y(e)?Te(e):Be(this,e)}function de(t){return t.cloneNode(!0)}function fe(t,e){!e&&ue(t)&&s.cleanData([t]),t.querySelectorAll&&s.cleanData(t.querySelectorAll("*"))}function ye(t){var e;for(e in t)return!1;return!0}function _e(t){var e=t.ng339,n=e&&Ht[e],i=n&&n.events,r=n&&n.data;r&&!ye(r)||i&&!ye(i)||(delete Ht[e],t.ng339=void 0)}function ge(t,e,n,i){if(D(i))throw Xt("offargs","jqLite#off() does not support the `selector` argument");var r=be(t),o=r&&r.events,s=r&&r.handle;if(s){if(e){var a=function(e){var i=o[e];D(n)&&ot(i||[],n),D(n)&&i&&i.length>0||(t.removeEventListener(e,s),delete o[e])};A(e.split(" "),(function(t){a(t),Zt[t]&&a(Zt[t])}))}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,s),delete o[e];_e(t)}}function ve(t,e){var n=t.ng339,i=n&&Ht[n];i&&(e?delete i.data[e]:i.data={},_e(t))}function be(t,e){var n=t.ng339,i=n&&Ht[n];return e&&!i&&(t.ng339=n=++Yt,i=Ht[n]={events:{},data:{},handle:void 0}),i}function xe(t,e,n){if(ue(t)){var i,r=D(n),o=!r&&e&&!O(e),s=!e,a=be(t,!o),l=a&&a.data;if(r)l[Qt(e)]=n;else{if(s)return l;if(o)return l&&l[Qt(e)];for(i in e)l[Qt(i)]=e[i]}}}function $e(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Ae(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;A(e.split(" "),(function(t){t=tt(t),i=i.replace(" "+t+" "," ")})),i!==n&&t.setAttribute("class",tt(i))}}function we(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;A(e.split(" "),(function(t){t=tt(t),-1===i.indexOf(" "+t+" ")&&(i+=t+" ")})),i!==n&&t.setAttribute("class",tt(i))}}function Be(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function Ce(t,e){return Se(t,"$"+(e||"ngController")+"Controller")}function Se(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var i=W(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(D(n=s.data(t,i[r])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Ee(t){for(fe(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Me(t,e){e||fe(t);var n=t.parentNode;n&&n.removeChild(t)}function Te(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var ke=pe.prototype={ready:Te,toString:function(){var t=[];return A(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return s(t>=0?this[t]:this[this.length+t])},length:0,push:y,sort:[].sort,splice:[].splice},Pe={};A("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){Pe[m(t)]=t}));var ze={};A("input,select,option,textarea,button,form,details".split(","),(function(t){ze[t]=!0}));var Ie={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Fe(t,e){var n=Pe[e.toLowerCase()];return n&&ze[it(t)]&&n}function Ve(t,e,n){n.call(t,e)}function je(t,e,n){var i=e.relatedTarget;i&&(i===t||me.call(t,i))||n.call(t,e)}function Le(){this.$get=function(){return M(pe,{hasClass:function(t,e){return t.attr&&(t=t[0]),$e(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Ae(t,e)}})}}function De(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"===i||"object"===i&&null!==t?t.$$hashKey=i+":"+(e||C)():i+":"+t}A({data:xe,removeData:ve,hasData:function(t){for(var e in Ht[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ve(t[e]),ge(t[e])}},(function(t,e){pe[e]=t})),A({data:xe,inheritedData:Se,scope:function(t){return s.data(t,"$scope")||Se(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return s.data(t,"$isolateScope")||s.data(t,"$isolateScopeNoTemplate")},controller:Ce,injector:function(t){return Se(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:$e,css:function(t,e,n){if(e=function(t){return Qt(t.replace(Jt,"ms-"))}(e),!D(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i,r=t.nodeType;if(r!==qt&&2!==r&&8!==r&&t.getAttribute){var o=m(e),s=Pe[o];if(!D(n))return i=t.getAttribute(e),s&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&s?t.removeAttribute(e):t.setAttribute(e,s?o:n)}},prop:function(t,e,n){if(!D(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(L(e)){var n=t.nodeType;return 1===n||n===qt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(L(e)){if(t.multiple&&"select"===it(t)){var n=[];return A(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(L(e))return t.innerHTML;fe(t,!0),t.innerHTML=e},empty:Ee},(function(t,e){pe.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==Ee&&L(2===t.length&&t!==$e&&t!==Ce?e:n)){if(O(e)){for(i=0;i<o;i++)if(t===xe)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var s=t.$dv,a=L(s)?Math.min(o,1):o,l=0;l<a;l++){var c=t(this[l],e,n);s=s?s+c:c}return s}for(i=0;i<o;i++)t(this[i],e,n);return this}})),A({removeData:ve,on:function(t,e,n,i){if(D(i))throw Xt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ue(t)){var r=be(t,!0),o=r.events,s=r.handle;s||(s=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(L(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var a=r.specialHandlerWrapper||Ve;o>1&&(r=Ut(r));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||a(t,n,r[l])}};return n.elem=t,n}(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],l=a.length,c=function(e,i,r){var a=o[e];a||((a=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||t.addEventListener(e,s)),a.push(n)};l--;)e=a[l],Zt[e]?(c(Zt[e],je),c(e,void 0,!0)):c(e)}},off:ge,one:function(t,e,n){(t=s(t)).on(e,(function i(){t.off(e,n),t.off(e,i)})),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;fe(t),A(new pe(e),(function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e}))},children:function(t){var e=[];return A(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var i=0,r=(e=new pe(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;A(new pe(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){var n,i,r;n=t,i=s(e).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:Me,detach:function(t){Me(t,!0)},after:function(t,e){var n=t,i=t.parentNode;if(i)for(var r=0,o=(e=new pe(e)).length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:we,removeClass:Ae,toggleClass:function(t,e,n){e&&A(e.split(" "),(function(e){var i=n;L(i)&&(i=!$e(t,e)),(i?we:Ae)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,n){var i,r,o,s=e.type||e,a=be(t),l=a&&a.events,c=l&&l[s];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:s,target:t},e.type&&(i=M(i,e)),r=Ut(c),o=n?[i].concat(n):[i],A(r,(function(e){i.isImmediatePropagationStopped()||e.apply(t,o)})))}},(function(t,e){pe.prototype[e]=function(e,n,i){for(var r,o=0,a=this.length;o<a;o++)L(r)?D(r=t(this[o],e,n,i))&&(r=s(r)):Be(r,t(this[o],e,n,i));return D(r)?r:this}})),pe.prototype.bind=pe.prototype.on,pe.prototype.unbind=pe.prototype.off;var Oe=Object.create(null);function Re(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Re.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return P(t)?Oe:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var qe=Re,Ue=[function(){this.$get=[function(){return qe}]}],Ne=/^([^(]+?)=>/,We=/^[^(]*\(\s*([^)]*)\)/m,He=/,/,Ye=/^\s*(_?)(\S+?)\1\s*$/,Ge=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Je=r("$injector");function Ze(t){return Function.prototype.toString.call(t)}function Xe(t){var e=Ze(t).replace(Ge,"");return e.match(Ne)||e.match(We)}function Ke(t,e){e=!0===e;var n={},i="Provider",r=[],s=new qe,a={$provide:{provider:d(f),factory:d(_),service:d((function(t,e){return _(t,["$injector",function(t){return t.instantiate(e)}])})),value:d((function(t,e){return _(t,V(e),!1)})),constant:d((function(t,e){Lt(t,"constant"),a[t]=e,u[t]=e})),decorator:function(t,e){var n=c.get(t+i),r=n.$get;n.$get=function(){var t=m.invoke(r,n);return m.invoke(e,null,{$delegate:t})}}}},c=a.$injector=v(a,(function(t,e){throw b.isString(e)&&r.push(e),Je("unpr","Unknown provider: {0}",r.join(" <- "))})),u={},h=v(u,(function(t,e){var n=c.get(t+i,e);return m.invoke(n.$get,n,void 0,t)})),m=h;a.$injectorProvider={$get:V(h)},m.modules=c.modules=Ot();var p=g(t);return(m=h.get("$injector")).strictDi=e,A(p,(function(t){t&&m.invoke(t)})),m.loadNewModules=function(t){A(g(t),(function(t){t&&m.invoke(t)}))},m;function d(t){return function(e,n){if(!O(e))return t(e,n);A(e,B(t))}}function f(t,e){if(Lt(t,"service"),(Y(e)||W(e))&&(e=c.instantiate(e)),!e.$get)throw Je("pget","Provider '{0}' must define $get factory method.",t);return a[t+i]=e}function y(t,e){return function(){var n=m.invoke(e,this);if(L(n))throw Je("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function _(t,e,n){return f(t,{$get:!1!==n?y(t,e):e})}function g(t){Vt(L(t)||W(t),"modulesToLoad","not an array");var e,n=[];return A(t,(function(t){if(!s.get(t)){s.set(t,!0);try{q(t)?(e=l(t),m.modules[t]=e,n=n.concat(g(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):Y(t)||W(t)?n.push(c.invoke(t)):jt(t,"module")}catch(r){throw W(t)&&(t=t[t.length-1]),r.message&&r.stack&&-1===r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),Je("modulerr","Failed to instantiate module {0} due to:\n{1}",t,r.stack||r.message||r)}}function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=c.get(i[0]);r[i[1]].apply(r,i[2])}}})),n}function v(t,s){function l(e,i){if(t.hasOwnProperty(e)){if(t[e]===n)throw Je("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "));return t[e]}try{return r.unshift(e),t[e]=n,t[e]=s(e,i),t[e]}catch(o){throw t[e]===n&&delete t[e],o}finally{r.shift()}}function c(t,n,i){for(var r=[],o=Ke.$$annotate(t,e,i),s=0,a=o.length;s<a;s++){var c=o[s];if("string"!=typeof c)throw Je("itkn","Incorrect injection token! Expected service name as string, got {0}",c);r.push(n&&n.hasOwnProperty(c)?n[c]:l(c,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r=c(t,n,i);return W(t)&&(t=t[t.length-1]),function(t){if(o||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^class\b/.test(Ze(t))),e}(t)?(r.unshift(null),new(Function.prototype.bind.apply(t,r))):t.apply(e,r)},instantiate:function(t,e,n){var i=W(t)?t[t.length-1]:t,r=c(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:l,annotate:Ke.$$annotate,has:function(e){return a.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(Y(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else U(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function l(t){var e,n,r;(t=q(t)?t:U(t)?t.toString():i.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),r=null,Array.prototype.some.call(n,(function(t){if("a"===it(t))return r=t,!0})),(e=r)?a(e):"top"===t&&a(null)):a(null)}return e&&r.$watch((function(){return i.hash()}),(function(e,n){e===n&&""===e||function(e,n){"complete"===(n=n||t).document.readyState?n.setTimeout(e):s(n).on("load",e)}((function(){r.$evalAsync(l)}))})),l}]}Ke.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw q(n)&&n||(n=t.name||function(t){var e=Xe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Je("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);A(Xe(t)[1].split(He),(function(t){t.replace(Ye,(function(t,e,n){i.push(n)}))}))}t.$inject=i}}else W(t)?(jt(t[r=t.length-1],"fn"),i=t.slice(0,r)):jt(t,"fn",!0);return i};var tn=r("$animate"),en="ng-animate";function nn(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function rn(t){return O(t)?t:{}}var on=function(){this.$get=I},sn=function(){var t=new qe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:I,on:I,off:I,pin:I,push:function(s,a,l,c){c&&c(),(l=l||{}).from&&s.css(l.from),l.to&&s.css(l.to),(l.addClass||l.removeClass)&&function(n,s,a){var l=t.get(n)||{},c=r(l,s,!0),u=r(l,a,!1);(c||u)&&(t.set(n,l),e.push(n),1===e.length&&i.$$postDigest(o))}(s,l.addClass,l.removeClass);var u=new n;return u.complete(),u}};function r(t,e,n){var i=!1;return e&&A(e=q(e)?e.split(" "):W(e)?e:[],(function(e){e&&(i=!0,t[e]=n)})),i}function o(){A(e,(function(e){var n=t.get(e);if(n){var i=function(t){q(t)&&(t=t.split(" "));var e=Ot();return A(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),r="",o="";A(n,(function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)})),A(e,(function(t){r&&we(t,r),o&&Ae(t,o)})),t.delete(e)}})),e.length=0}}]},an=["$provide",function(t){var e=this,n=null,i=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw tn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.customFilter=function(t){return 1===arguments.length&&(i=Y(t)?t:null),i},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,tn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en)}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,i,r,o){return i=i&&s(i),r=r&&s(r),e(n,i=i||r.parent(),r),t.push(n,"enter",rn(o))},move:function(n,i,r,o){return i=i&&s(i),r=r&&s(r),e(n,i=i||r.parent(),r),t.push(n,"move",rn(o))},leave:function(e,n){return t.push(e,"leave",rn(n),(function(){e.remove()}))},addClass:function(e,n,i){return(i=rn(i)).addClass=nn(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=rn(i)).removeClass=nn(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=rn(r)).addClass=nn(r.addClass,n),r.removeClass=nn(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=rn(o)).from=o.from?M(o.from,n):n,o.to=o.to?M(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=nn(o.tempClasses,r),t.push(e,"animate",o)}}}]}],ln=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return n((function(){t=!0})),function(e){t?e():n(e)}}}]},cn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){i()?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){n!==t.length?t[n]((function(t){!1!==t?(n++,i()):e(!1)})):e(!0)}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}A(t,(function(t){t.done(r)}))},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(A(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},o}]},un=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=st(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,s=new n;return{start:a,end:a};function a(){return t((function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null),r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null),r.to&&(e.css(r.to),r.to=null),o||s.complete(),o=!0})),s}}}]};function hn(t,e,n,i,r){var o=this,a=t.location,l=t.history,c=t.setTimeout,u=t.clearTimeout,h={},m=r(n);o.isMock=!1,o.$$completeOutstandingRequest=m.completeTask,o.$$incOutstandingRequestCount=m.incTaskCount,o.notifyWhenNoOutstandingRequests=m.notifyWhenNoPendingTasks;var p,d,f=a.href,y=e.find("base"),_=null,g=i.history?function(){try{return l.state}catch(t){}}:I;w(),o.url=function(e,n,r){if(L(r)&&(r=null),a!==t.location&&(a=t.location),l!==t.history&&(l=t.history),e){var s=d===r;if(e=hr(e).href,f===e&&(!i.history||s))return o;var c=f&&ui(f)===ui(e);return f=e,d=r,!i.history||c&&s?(c||(_=e),n?a.replace(e):c?a.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):a.href=e,a.href!==e&&(_=e)):(l[n?"replaceState":"pushState"](r,"",e),w()),_&&(_=e),o}return function(t){return t.replace(/#$/,"")}(_||a.href)},o.state=function(){return p};var v=[],b=!1;function x(){_=null,B()}var $=null;function w(){lt(p=L(p=g())?null:p,$)&&(p=$),$=p,d=p}function B(){var t=d;w(),f===o.url()&&t===p||(f=o.url(),d=p,A(v,(function(t){t(o.url(),p)})))}o.onUrlChange=function(e){return b||(i.history&&s(t).on("popstate",x),s(t).on("hashchange",x),b=!0),v.push(e),e},o.$$applicationDestroyed=function(){s(t).off("hashchange popstate",x)},o.$$checkUrlChange=B,o.baseHref=function(){var t=y.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},o.defer=function(t,e,n){var i;return e=e||0,n=n||m.DEFAULT_TASK_TYPE,m.incTaskCount(n),i=c((function(){delete h[i],m.completeTask(t,n)}),e),h[i]=n,i},o.defer.cancel=function(t){if(h.hasOwnProperty(t)){var e=h[t];return delete h[t],u(t),m.completeTask(I,e),!0}return!1}}function mn(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,i,r){return new hn(t,i,e,n,r)}]}function pn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var i=0,o=M({},n,{id:e}),s=Ot(),a=n&&n.capacity||Number.MAX_VALUE,l=Ot(),c=null,u=null;return t[e]={put:function(t,e){if(!L(e))return a<Number.MAX_VALUE&&h(l[t]||(l[t]={key:t})),t in s||i++,s[t]=e,i>a&&this.remove(u.key),e},get:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;h(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;e===c&&(c=e.p),e===u&&(u=e.n),m(e.n,e.p),delete l[t]}t in s&&(delete s[t],i--)},removeAll:function(){s=Ot(),i=0,l=Ot(),c=u=null},destroy:function(){s=null,o=null,l=null,delete t[e]},info:function(){return M({},o,{size:i})}};function h(t){t!==c&&(u?u===t&&(u=t.n):u=t,m(t.n,t.p),m(t,c),(c=t).n=null)}function m(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return A(t,(function(t,n){e[n]=t.info()})),e},e.get=function(e){return t[e]},e}}function dn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var fn=r("$compile"),yn=new function(){};function _n(e,n){var i={},r="Directive",a=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),u=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,d=Ot();function f(t,e,n){var i=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,r=Ot();return A(t,(function(t,o){if((t=t.trim())in d)r[o]=d[t];else{var s=t.match(i);if(!s)throw fn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o},s[4]&&(d[t]=r[o])}})),r}function y(t,e){var n={isolateScope:null,bindToController:null};if(O(t.scope)&&(!0===t.bindToController?(n.bindToController=f(t.scope,e,!0),n.isolateScope={}):n.isolateScope=f(t.scope,e,!1)),O(t.bindToController)&&(n.bindToController=f(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw fn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return Vt(n,"name"),Lt(n,"directive"),q(n)?(function(t){var e=t.charAt(0);if(!e||e!==m(e))throw fn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw fn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Vt(o,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+r,["$injector","$exceptionHandler",function(t,e){var r=[];return A(i[n],(function(i,o){try{var s=t.invoke(i);Y(s)?s={compile:V(s)}:!s.compile&&s.link&&(s.compile=V(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||n,s.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&O(e)&&A(e,(function(t,n){var i=t.match(u);t.substring(i[0].length)||(e[n]=i[0]+n)})),e}(s),s.restrict=function(t,e){if(t&&(!q(t)||!/[EACM]/.test(t)))throw fn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(s.restrict,n),s.$$moduleName=i.$$moduleName,r.push(s)}catch(a){e(a)}})),r}])),i[n].push(o)):A(n,B(t)),this},this.component=function t(e,n){if(!q(e))return A(e,B(pt(this,t))),this;var i=n.controller||function(){};function r(t){function e(e){return Y(e)||W(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=n.template||n.templateUrl?n.template:"",o={controller:i,controllerAs:Cn(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return A(n,(function(t,e){"$"===e.charAt(0)&&(o[e]=t)})),o}return A(n,(function(t,e){"$"===e.charAt(0)&&(r[e]=t,Y(i)&&(i[e]=t))})),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationTrustedUrlList=function(t){return D(t)?(n.aHrefSanitizationTrustedUrlList(t),this):n.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return D(t)?(n.imgSrcSanitizationTrustedUrlList(t),this):n.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var g=!0;this.debugInfoEnabled=function(t){return D(t)?(g=t,this):g};var v=!1;this.strictComponentBindingsEnabled=function(t){return D(t)?(v=t,this):v};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var $=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?($=t,this):$};var w=Ot();this.addPropertySecurityContext=function(t,e,n){var i=t.toLowerCase()+"|"+e.toLowerCase();if(i in w&&w[i]!==n)throw fn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,w[i],n);return w[i]=n,this},function(){function t(t,e){A(e,(function(e){w[e.toLowerCase()]=t}))}t(Yi.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Yi.CSS,["*|style"]),t(Yi.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Yi.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Yi.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,d,f,B,C,S,E,T){var k,P=/^\w/,V=t.document.createElement("div"),j=x,D=$,R=b;function U(){try{if(!--R)throw k=void 0,fn("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);S.$apply((function(){for(var t=0,e=k.length;t<e;++t)try{k[t]()}catch(n){d(n)}k=void 0}))}finally{R++}}function N(t,e){if(!t)return t;if(!q(t))throw fn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",i=tt(t),r=/\s/.test(i)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=i.split(r),s=Math.floor(o.length/2),a=0;a<s;a++){var l=2*a;n+=E.getTrustedMediaUrl(tt(o[l])),n+=" "+tt(o[l+1])}var c=tt(o[2*a]).split(/\s/);return n+=E.getTrustedMediaUrl(tt(c[0])),2===c.length&&(n+=" "+tt(c[1])),n}function G(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function J(t,e){try{t.addClass(e)}catch(n){}}G.prototype={$normalize:xn,$addClass:function(t){t&&t.length>0&&T.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&T.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=$n(t,e);n&&n.length&&T.addClass(this.$$element,n);var i=$n(e,t);i&&i.length&&T.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r=Fe(this.$$element[0],t),o=Ie[t],s=t;r?(this.$$element.prop(t,e),i=r):o&&(this[o]=e,s=o),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=zt(t,"-")),"img"===it(this.$$element)&&"srcset"===t&&(this[t]=e=N(e,"$set('srcset', value)")),!1!==n&&(null===e||L(e)?this.$$element.removeAttr(i):P.test(i)?r&&!1===e?this.$$element.removeAttr(i):this.$$element.attr(i,e):function(t,e,n){V.innerHTML="<span "+e+">";var i=V.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var a=this.$$observers;a&&A(a[s],(function(t){try{t(e)}catch(n){d(n)}}))},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=Ot()),r=i[t]||(i[t]=[]);return r.push(e),S.$evalAsync((function(){r.$$inter||!n.hasOwnProperty(t)||L(n[t])||e(n[t])})),function(){ot(r,e)}}};var K=n.startSymbol(),Q=n.endSymbol(),et="{{"===K&&"}}"===Q?F:function(t){return t.replace(/\{\{/g,K).replace(/}}/g,Q)},nt=/^ng(Attr|Prop|On)([A-Z].*)$/,rt=/^(.+)Start$/;return st.$$addBindingInfo=g?function(t,e){var n=t.data("$binding")||[];W(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:I,st.$$addBindingClass=g?function(t){J(t,"ng-binding")}:I,st.$$addScopeInfo=g?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:I,st.$$addScopeClass=g?function(t,e){J(t,e?"ng-isolate-scope":"ng-scope")}:I,st.$$createComment=function(e,n){var i="";return g&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},st;function st(t,e,n,i,r){t instanceof s||(t=s(t));var o=ct(t,e,t,n,i,r);st.$$addScopeClass(t);var a=null;return function(e,n,i){if(!t)throw fn("multilink","This element has already been linked.");Vt(e,"scope"),r&&r.needsNewScope&&(e=e.$parent.$new());var l,c,u,h=(i=i||{}).parentBoundTranscludeFn,m=i.transcludeControllers,p=i.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),a||(c=(l=p)&&l[0],a=c&&"foreignobject"!==it(c)&&_.call(c).match(/SVG/)?"svg":"html"),u="html"!==a?s(Et(a,s("<div></div>").append(t).html())):n?ke.clone.call(t):t,m)for(var d in m)u.data("$"+d+"Controller",m[d].instance);return st.$$addScopeInfo(u,e),n&&n(u,e),o&&o(e,u,u,h),n||(t=o=null),u}}function ct(t,e,n,i,r,a){for(var l,c,u,h,m,p,d,f=[],y=W(t)||t instanceof s,_=0;_<t.length;_++)l=new G,11===o&&ut(t,_,y),(u=(c=dt(t[_],[],l,0===_?i:void 0,r)).length?gt(c,t[_],l,e,n,null,[],[],a):null)&&u.scope&&st.$$addScopeClass(l.$$element),m=u&&u.terminal||!(h=t[_].childNodes)||!h.length?null:ct(h,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||m)&&(f.push(_,u,m),p=!0,d=d||u),a=null;return p?function(t,n,i,r){var o,a,l,c,u,h,m,p,y;if(d){var _=n.length;for(y=new Array(_),u=0;u<f.length;u+=3)m=f[u],y[m]=n[m]}else y=n;for(u=0,h=f.length;u<h;)l=y[f[u++]],o=f[u++],a=f[u++],o?(o.scope?(c=t.$new(),st.$$addScopeInfo(s(l),c)):c=t,p=o.transcludeOnThisElement?ht(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?ht(t,e):null,o(a,c,l,i,p)):a&&a(t,l.childNodes,void 0,r)}:null}function ut(t,e,n){var i,r=t[e],o=r.parentNode;if(r.nodeType===qt)for(;(i=o?r.nextSibling:t[e+1])&&i.nodeType===qt;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===t[e+1]&&t.splice(e+1,1)}function ht(t,e,n){function i(i,r,o,s,a){return i||((i=t.$new(!1,a)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var r=i.$$slots=Ot();for(var o in e.$$slots)e.$$slots[o]?r[o]=ht(t,e.$$slots[o],n):r[o]=null;return i}function dt(t,e,i,r,o){var s,c,u,h=t.nodeType,m=i.$attr;switch(h){case 1:$t(e,xn(c=it(t)),"E",r,o);for(var p,d,f,y,_,g=t.attributes,v=0,b=g&&g.length;v<b;v++){var x,$=!1,A=!1,w=!1,B=!1,C=!1;d=(p=g[v]).name,y=p.value,(_=(f=xn(d.toLowerCase())).match(nt))?(w="Attr"===_[1],B="Prop"===_[1],C="On"===_[1],d=d.replace(vn,"").toLowerCase().substr(4+_[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(x=f.match(rt))&&At(x[1])&&($=d,A=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),B||C?(i[f]=y,m[f]=p.name,B?Tt(t,e,f,d):kt(e,f,d)):(m[f=xn(d.toLowerCase())]=d,!w&&i.hasOwnProperty(f)||(i[f]=y,Fe(t,f)&&(i[f]=!0)),Pt(t,e,y,f,w),$t(e,f,"A",r,o,$,A))}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!D)break;if(O(u=t.className)&&(u=u.animVal),q(u)&&""!==u)for(;s=l.exec(u);)$t(e,f=xn(s[2]),"C",r,o)&&(i[f]=tt(s[3])),u=u.substr(s.index+s[0].length);break;case qt:!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&st.$$addBindingClass(e),function(t,e){var r=e.parent();n||st.$$addBindingClass(r),st.$$addBindingInfo(r,i.expressions),t.$watch(i,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!j)break;!function(t,e,n,i,r){try{var o=a.exec(t.nodeValue);if(o){var s=xn(o[1]);$t(e,s,"M",i,r)&&(n[s]=tt(o[2]))}}catch(l){}}(t,e,i,r,o)}return e.sort(Ct),e}function ft(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw fn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return s(i)}function yt(t,e,n){return function(i,r,o,s,a){return r=ft(r[0],e,n),t(i,r,o,s,a)}}function _t(t,e,n,i,r,o){var s;return t?st(e,n,i,r,o):function(){return s||(s=st(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function gt(e,n,i,r,o,a,l,c,u){u=u||{};for(var h,m,p,f,y,_=-Number.MAX_VALUE,g=u.newScopeDirective,v=u.controllerDirectives,b=u.newIsolateScopeDirective,x=u.templateDirective,$=u.nonTlbTranscludeDirective,w=!1,B=!1,S=u.hasElementTranscludeDirective,E=i.$$element=s(n),T=a,k=r,P=!1,z=!1,I=0,F=e.length;I<F;I++){var V=(h=e[I]).$$start,j=h.$$end;if(V&&(E=ft(n,V,j)),p=void 0,_>h.priority)break;if((y=h.scope)&&(h.templateUrl||(O(y)?(St("new/isolated scope",b||g,h,E),b=h):St("new/isolated scope",b,h,E)),g=g||h),m=h.name,!P&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var D,R=I+1;D=e[R++];)if(D.transclude&&!D.$$tlb||D.replace&&(D.templateUrl||D.template)){z=!0;break}P=!0}if(!h.templateUrl&&h.controller&&(v=v||Ot(),St("'"+m+"' controller",v[m],h,E),v[m]=h),y=h.transclude)if(w=!0,h.$$tlb||(St("transclusion",$,h,E),$=h),"element"===y)S=!0,_=h.priority,p=E,E=i.$$element=s(st.$$createComment(m,i[m])),n=E[0],It(o,mt(p),n),k=_t(z,p,r,_,T&&T.name,{nonTlbTranscludeDirective:$});else{var q=Ot();if(O(y)){p=t.document.createDocumentFragment();var U=Ot(),N=Ot();for(var H in A(y,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,U[t]=e,q[e]=null,N[e]=n})),A(E.contents(),(function(e){var n=U[xn(it(e))];n?(N[n]=!0,q[n]=q[n]||t.document.createDocumentFragment(),q[n].appendChild(e)):p.appendChild(e)})),A(N,(function(t,e){if(!t)throw fn("reqslot","Required transclusion slot `{0}` was not filled.",e)})),q)if(q[H]){var J=s(q[H].childNodes);q[H]=_t(z,J,r)}p=s(p.childNodes)}else p=s(de(n)).contents();E.empty(),(k=_t(z,p,r,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=q}if(h.template)if(B=!0,St("template",x,h,E),x=h,y=Y(h.template)?h.template(E,i):h.template,y=et(y),h.replace){if(T=h,p=ce(y)?[]:An(Et(h.templateNamespace,tt(y))),n=p[0],1!==p.length||1!==n.nodeType)throw fn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");It(o,E,n);var X={$attr:{}},K=dt(n,[],X),Q=e.splice(I+1,e.length-(I+1));(b||g)&&bt(K,b,g),e=e.concat(K).concat(Q),wt(i,X),F=e.length}else E.html(y);if(h.templateUrl)B=!0,St("template",x,h,E),x=h,h.replace&&(T=h),ot=Bt(e.splice(I,e.length-I),E,i,o,w&&k,l,c,{controllerDirectives:v,newScopeDirective:g!==h&&g,newIsolateScopeDirective:b,templateDirective:x,nonTlbTranscludeDirective:$}),F=e.length;else if(h.compile)try{f=h.compile(E,i,k);var nt=h.$$originalDirective||h;Y(f)?rt(null,pt(nt,f),V,j):f&&rt(pt(nt,f.pre),pt(nt,f.post),V,j)}catch(at){d(at,xt(E))}h.terminal&&(ot.terminal=!0,_=Math.max(_,h.priority))}return ot.scope=g&&!0===g.scope,ot.transcludeOnThisElement=w,ot.templateOnThisElement=B,ot.transclude=k,u.hasElementTranscludeDirective=S,ot;function rt(t,e,n,i){t&&(n&&(t=yt(t,n,i)),t.require=h.require,t.directiveName=m,(b===h||h.$$isolateScope)&&(t=Ft(t,{isolateScope:!0})),l.push(t)),e&&(n&&(e=yt(e,n,i)),e.require=h.require,e.directiveName=m,(b===h||h.$$isolateScope)&&(e=Ft(e,{isolateScope:!0})),c.push(e))}function ot(t,e,r,o,a){var u,h,m,p,f,y,_,$,w,B;for(var E in n===r?(w=i,$=i.$$element):w=new G($=s(r),i),f=e,b?p=e.$new(!0):g&&(f=e.$parent),a&&(_=function(t,e,n,i){var r;if(Z(t)||(i=n,n=e,e=t,t=void 0),S&&(r=y),n||(n=S?$.parent():$),!i)return a(t,e,r,n,z);var o=a.$$slots[i];if(o)return o(t,e,r,n,z);if(L(o))throw fn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,xt($))},_.$$boundTransclude=a,_.isSlotFilled=function(t){return!!a.$$slots[t]}),v&&(y=function(t,e,n,i,r,o,s){var a=Ot();for(var l in i){var c=i[l],u={$scope:c===s||c.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=c.controller;"@"===h&&(h=e[c.name]);var m=C(h,u,!0,c.controllerAs);a[c.name]=m,t.data("$"+c.name+"Controller",m.instance)}return a}($,w,_,v,p,e,b)),b&&(st.$$addScopeInfo($,p,!0,!(x&&(x===b||x===b.$$originalDirective))),st.$$addScopeClass($,!0),p.$$isolateBindings=b.$$isolateBindings,(B=Dt(e,w,p,p.$$isolateBindings,b)).removeWatches&&p.$on("$destroy",B.removeWatches)),y){var T=v[E],k=y[E],P=T.$$bindings.bindToController;k.instance=k(),$.data("$"+T.name+"Controller",k.instance),k.bindingInfo=Dt(f,w,k.instance,P,T)}for(A(v,(function(t,e){var n=t.require;t.bindToController&&!W(n)&&O(n)&&M(y[e].instance,vt(e,n,$,y))})),A(y,(function(t){var e=t.instance;if(Y(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(at){d(at)}if(Y(e.$onInit))try{e.$onInit()}catch(at){d(at)}Y(e.$doCheck)&&(f.$watch((function(){e.$doCheck()})),e.$doCheck()),Y(e.$onDestroy)&&f.$on("$destroy",(function(){e.$onDestroy()}))})),u=0,h=l.length;u<h;u++)jt(m=l[u],m.isolateScope?p:e,$,w,m.require&&vt(m.directiveName,m.require,$,y),_);var z=e;for(b&&(b.template||null===b.templateUrl)&&(z=p),t&&t(z,r.childNodes,void 0,a),u=c.length-1;u>=0;u--)jt(m=c[u],m.isolateScope?p:e,$,w,m.require&&vt(m.directiveName,m.require,$,y),_);A(y,(function(t){var e=t.instance;Y(e.$postLink)&&e.$postLink()}))}}function vt(t,e,n,i){var r;if(q(e)){var o=e.match(u),s=e.substring(o[0].length),a=o[1]||o[3],l="?"===o[2];if("^^"===a?n=n.parent():r=(r=i&&i[s])&&r.instance,!r){var c="$"+s+"Controller";r="^^"===a&&n[0]&&9===n[0].nodeType?null:a?n.inheritedData(c):n.data(c)}if(!r&&!l)throw fn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(W(e)){r=[];for(var h=0,m=e.length;h<m;h++)r[h]=vt(t,e[h],n,i)}else O(e)&&(r={},A(e,(function(e,o){r[o]=vt(t,e,n,i)})));return r||null}function bt(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=z(t[i],{$$isolateScope:e,$$newScope:n})}function $t(t,n,o,s,a,l,c){if(n===a)return null;var u=null;if(i.hasOwnProperty(n))for(var h,m=e.get(n+r),p=0,d=m.length;p<d;p++)if(h=m[p],(L(s)||s>h.priority)&&-1!==h.restrict.indexOf(o)){if(l&&(h=z(h,{$$start:l,$$end:c})),!h.$$bindings){var f=h.$$bindings=y(h,h.name);O(f.isolateScope)&&(h.$$isolateBindings=f.isolateScope)}t.push(h),u=h}return u}function At(t){if(i.hasOwnProperty(t))for(var n=e.get(t+r),o=0,s=n.length;o<s;o++)if(n[o].multiElement)return!0;return!1}function wt(t,e){var n=e.$attr,i=t.$attr;A(t,(function(i,r){"$"!==r.charAt(0)&&(e[r]&&e[r]!==i&&(i.length?i+=("style"===r?";":" ")+e[r]:i=e[r]),t.$set(r,i,!0,n[r]))})),A(e,(function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))}))}function Bt(t,e,n,i,r,o,a,l){var c,u,h=[],m=e[0],p=t.shift(),y=z(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),_=Y(p.templateUrl)?p.templateUrl(e,n):p.templateUrl,g=p.templateNamespace;return e.empty(),f(_).then((function(d){var f,v,b,x;if(d=et(d),p.replace){if(b=ce(d)?[]:An(Et(g,tt(d))),f=b[0],1!==b.length||1!==f.nodeType)throw fn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,_);v={$attr:{}},It(i,e,f);var $=dt(f,[],v);O(p.scope)&&bt($,!0),t=$.concat(t),wt(n,v)}else f=m,e.html(d);for(t.unshift(y),c=gt(t,f,n,r,e,p,o,a,l),A(i,(function(t,n){t===f&&(i[n]=e[0])})),u=ct(e[0].childNodes,r);h.length;){var w=h.shift(),B=h.shift(),C=h.shift(),S=h.shift(),E=e[0];if(!w.$$destroyed){if(B!==m){var M=B.className;l.hasElementTranscludeDirective&&p.replace||(E=de(f)),It(C,s(B),E),J(s(E),M)}x=c.transcludeOnThisElement?ht(w,c.transclude,S):S,c(u,w,E,i,x)}}h=null})).catch((function(t){H(t)&&d(t)})),function(t,e,n,i,r){var o=r;e.$$destroyed||(h?h.push(e,n,i,o):(c.transcludeOnThisElement&&(o=ht(e,c.transclude,r)),c(u,e,n,i,o)))}}function Ct(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function St(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw fn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,xt(i))}function Et(e,n){switch(e=m(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Mt(t){return N(E.valueOf(t),"ng-prop-srcset")}function Tt(t,e,n,i){if(p.test(i))throw fn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var r=it(t),o=function(t,e){var n=e.toLowerCase();return w[t+"|"+n]||w["*|"+n]}(r,i),s=F;"srcset"!==i||"img"!==r&&"source"!==r?o&&(s=E.getTrusted.bind(E,o)):s=Mt,e.push({priority:100,compile:function(t,e){var r=B(e[n]),o=B(e[n],(function(t){return E.valueOf(t)}));return{pre:function(t,e){function n(){var n=r(t);e[0][i]=s(n)}n(),t.$watch(o,n)}}}})}function kt(t,e,n){t.push(jo(B,S,d,e,n,!1))}function Pt(t,e,i,r,o){var s=it(t),a=function(t,e){return"srcdoc"===e?E.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?E.RESOURCE_URL:E.MEDIA_URL:"xlinkHref"===e?"image"===t?E.MEDIA_URL:"a"===t?E.URL:E.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?E.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:E.URL}(s,r),l=!o,u=c[r]||o,h=n(i,l,a,u);if(h){if("multiple"===r&&"select"===s)throw fn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",xt(t));if(p.test(r))throw fn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Ot()),l=o[r];l!==i&&(h=l&&n(l,!0,a,u),i=l),h&&(o[r]=h(t),(s[r]||(s[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||t).$watch(h,(function(t,e){"class"===r&&t!==e?o.$updateClass(t,e):o.$set(r,t)})))}}}})}}function It(e,n,i){var r,o,a=n[0],l=n.length,c=a.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]===a){e[r++]=i;for(var u=r,h=u+l-1,m=e.length;u<m;u++,h++)h<m?e[u]=e[h]:delete e[u];e.length-=l-1,e.context===a&&(e.context=i);break}c&&c.replaceChild(i,a);var p=t.document.createDocumentFragment();for(r=0;r<l;r++)p.appendChild(n[r]);for(s.hasData(a)&&(s.data(i,s.data(a)),s(a).off("$destroy")),s.cleanData(p.querySelectorAll("*")),r=1;r<l;r++)delete n[r];n[0]=i,n.length=1}function Ft(t,e){return M((function(){return t.apply(null,arguments)}),t,e)}function jt(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(s){d(s,xt(n))}}function Lt(t,e){if(v)throw fn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Dt(t,e,i,r,o){var s,a=[],l={};function c(e,n,r){Y(i.$onChanges)&&!at(n,r)&&(k||(t.$$postDigest(U),k=[]),s||(s={},k.push(u)),s[e]&&(r=s[e].previousValue),s[e]=new gn(r,n))}function u(){i.$onChanges(s),s=void 0}return A(r,(function(r,s){var u,m,p,d,f,y=r.attrName,_=r.optional;switch(r.mode){case"@":_||h.call(e,y)||(Lt(y,o.name),i[s]=e[y]=void 0),f=e.$observe(y,(function(t){if(q(t)||X(t)){var e=i[s];c(s,t,e),i[s]=t}})),e.$$observers[y].$$scope=t,q(u=e[y])?i[s]=n(u)(t):X(u)&&(i[s]=u),l[s]=new gn(yn,i[s]),a.push(f);break;case"=":if(!h.call(e,y)){if(_)break;Lt(y,o.name),e[y]=void 0}if(_&&!e[y])break;m=B(e[y]),d=m.literal?lt:at,p=m.assign||function(){throw u=i[s]=m(t),fn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[y],y,o.name)},u=i[s]=m(t);var g=function(e){return d(e,i[s])||(d(e,u)?p(t,e=i[s]):i[s]=e),u=e};g.$stateful=!0,f=r.collection?t.$watchCollection(e[y],g):t.$watch(B(e[y],g),null,m.literal),a.push(f);break;case"<":if(!h.call(e,y)){if(_)break;Lt(y,o.name),e[y]=void 0}if(_&&!e[y])break;var v=(m=B(e[y])).literal,b=i[s]=m(t);l[s]=new gn(yn,i[s]),f=t[r.collection?"$watchCollection":"$watch"](m,(function(t,e){if(e===t){if(e===b||v&&lt(e,b))return;e=b}c(s,t,e),i[s]=t})),a.push(f);break;case"&":if(_||h.call(e,y)||Lt(y,o.name),(m=e.hasOwnProperty(y)?B(e[y]):I)===I&&_)break;i[s]=function(e){return m(t,e)}}})),{initialChanges:l,removeWatches:a.length&&function(){for(var t=0,e=a.length;t<e;++t)a[t]()}}}}]}function gn(t,e){this.previousValue=t,this.currentValue=e}_n.$inject=["$provide","$$sanitizeUriProvider"],gn.prototype.isFirstChange=function(){return this.previousValue===yn};var vn=/^((?:x|data)[:\-_])/i,bn=/[:\-_]+(.)/g;function xn(t){return t.replace(vn,"").replace(bn,(function(t,e,n){return n?e.toUpperCase():e}))}function $n(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s===r[a])continue t;n+=(n.length>0?" ":"")+s}return n}function An(t){var e=(t=s(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===qt&&""===n.nodeValue.trim())&&f.call(t,e,1)}return t}var wn=r("$controller"),Bn=/^(\S+)(\s+as\s+([\w$]+))?$/;function Cn(t,e){if(e&&q(e))return e;if(q(t)){var n=Bn.exec(t);if(n)return n[3]}}function Sn(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Lt(e,"controller"),O(e)?M(t,e):t[e]=n},this.$get=["$injector",function(e){return function(i,r,o,s){var a,l,c,u;if(o=!0===o,s&&q(s)&&(u=s),q(i)){if(!(l=i.match(Bn)))throw wn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(c=l[1],u=u||l[3],i=t.hasOwnProperty(c)?t[c]:function(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t&&(t=(o=t)[i]);return!n&&Y(t)?pt(o,t):t}(r.$scope,c,!0),!i)throw wn("ctrlreg","The controller with the name '{0}' is not registered.",c);jt(i,c,!0)}if(o){var h=(W(i)?i[i.length-1]:i).prototype;return a=Object.create(h||null),u&&n(r,u,a,c||i.name),M((function(){var t=e.invoke(i,a,r,c);return t!==a&&(O(t)||Y(t))&&(a=t,u&&n(r,u,a,c||i.name)),a}),{instance:a,identifier:u})}return a=e.instantiate(i,r,c),u&&n(r,u,a,c||i.name),a};function n(t,e,n,i){if(!t||!O(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}}]}function En(){this.$get=["$window",function(t){return s(t.document)}]}function Mn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],i=n&&n.hidden;function r(){i=n.hidden}return t.on("visibilitychange",r),e.$on("$destroy",(function(){t.off("visibilitychange",r)})),function(){return i}}]}function Tn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var kn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof s&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Pn="application/json",zn={"Content-Type":"application/json;charset=utf-8"},In=/^\[|^\{(?!\{)/,Fn={"[":/]$/,"{":/}$/},Vn=/^\)]\}',?\n/,jn=r("$http");function Ln(t){return O(t)?N(t)?t.toISOString():ft(t):t}function Dn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return w(t,(function(t,n){null===t||L(t)||Y(t)||(W(t)?A(t,(function(t){e.push(Bt(n)+"="+Bt(Ln(t)))})):e.push(Bt(n)+"="+Bt(Ln(t))))})),e.join("&")}}}function On(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){W(n)?A(n,(function(e,n){t(e,i+"["+(O(e)?n:"")+"]")})):O(n)&&!N(n)?w(n,(function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))})):(Y(n)&&(n=n()),e.push(Bt(i)+"="+(null==n?"":Bt(Ln(n)))))}(t,"",!0),e.join("&")}}}function Rn(t,e){if(q(t)){var n=t.replace(Vn,"").trim();if(n){var i=e("Content-Type"),r=i&&0===i.indexOf(Pn);if(r||(s=(o=n).match(In))&&Fn[s[0]].test(o))try{t=yt(n)}catch(a){if(!r)return t;throw jn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,a)}}}var o,s;return t}function qn(t){var e,n=Ot();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return q(t)?A(t.split("\n"),(function(t){e=t.indexOf(":"),i(m(tt(t.substr(0,e))),tt(t.substr(e+1)))})):O(t)&&A(t,(function(t,e){i(m(e),tt(t))})),n}function Un(t){var e;return function(n){if(e||(e=qn(t)),n){var i=e[m(n)];return void 0===i&&(i=null),i}return e}}function Nn(t,e,n,i){return Y(i)?i(t,e,n):(A(i,(function(i){t=i(t,e,n)})),t)}function Wn(t){return 200<=t&&t<300}function Hn(){var t=this.defaults={transformResponse:[Rn],transformRequest:[function(t){return!O(t)||(e=t,"[object File]"===_.call(e))||function(t){return"[object Blob]"===_.call(t)}(t)||function(t){return"[object FormData]"===_.call(t)}(t)?t:ft(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ut(zn),put:Ut(zn),patch:Ut(zn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return D(t)?(e=!!t,this):e};var n=this.interceptors=[],i=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,s,a,l,c,u,h,d){var f=l("$http");t.paramSerializer=q(t.paramSerializer)?h.get(t.paramSerializer):t.paramSerializer;var y=[];A(n,(function(t){y.unshift(q(t)?h.get(t):h.invoke(t))}));var _,g=(_=[cr].concat(i.map(hr)),function(t){var e=hr(t);return _.some(mr.bind(null,e))});function v(n){if(!O(n))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!q(d.valueOf(n.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var i=M({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);i.headers=function(e){var n,i,r,o=t.headers,s=M({},e.headers);o=M({},o.common,o[m(e.method)]);t:for(n in o){for(r in i=m(n),s)if(m(r)===i)continue t;s[n]=o[n]}return function(t,e){var n,i={};return A(t,(function(t,r){Y(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t})),i}(s,Ut(e))}(n),i.method=p(i.method),i.paramSerializer=q(i.paramSerializer)?h.get(i.paramSerializer):i.paramSerializer,o.$$incOutstandingRequestCount("$http");var l=[],_=[],b=u.resolve(i);return A(y,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&_.push(t.response,t.responseError)})),b=(b=x(b,l)).then((function(n){var i=n.headers,r=Nn(n.data,Un(i),void 0,n.transformRequest);return L(r)&&A(i,(function(t,e){"content-type"===m(e)&&delete i[e]})),L(n.withCredentials)&&!L(t.withCredentials)&&(n.withCredentials=t.withCredentials),function(n,i){var r,o,l=u.defer(),h=l.promise,p=n.headers,y="jsonp"===m(n.method),_=n.url;if(y?_=d.getTrustedResourceUrl(_):q(_)||(_=d.valueOf(_)),_=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(_,n.paramSerializer(n.params)),y&&(_=function(t,e){var n=t.split("?");if(n.length>2)throw jn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return A(At(n[1]),(function(n,i){if("JSON_CALLBACK"===n)throw jn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(i===e)throw jn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(_,n.jsonpCallbackParam)),v.pendingRequests.push(n),h.then(C,C),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(r=O(n.cache)?n.cache:O(t.cache)?t.cache:f),r&&(D(o=r.get(_))?K(o)?o.then(B,B):W(o)?w(o[1],o[0],Ut(o[2]),o[3],o[4]):w(o,200,{},"OK","complete"):r.put(_,h)),L(o)){var b=g(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(p[n.xsrfHeaderName||t.xsrfHeaderName]=b),s(n.method,_,i,$,p,n.timeout,n.withCredentials,n.responseType,x(n.eventHandlers),x(n.uploadEventHandlers))}return h;function x(t){if(t){var n={};return A(t,(function(t,i){n[i]=function(n){function i(){t(n)}e?c.$applyAsync(i):c.$$phase?i():c.$apply(i)}})),n}}function $(t,n,i,o,s){function a(){w(n,t,i,o,s)}r&&(Wn(t)?r.put(_,[t,n,qn(i),o,s]):r.remove(_)),e?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function w(t,e,i,r,o){(Wn(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Un(i),config:n,statusText:r,xhrStatus:o})}function B(t){w(t.data,t.status,Ut(t.headers()),t.statusText,t.xhrStatus)}function C(){var t=v.pendingRequests.indexOf(n);-1!==t&&v.pendingRequests.splice(t,1)}}(n,r).then($,$)})),b=(b=x(b,_)).finally((function(){o.$$completeOutstandingRequest(I,"$http")}));function x(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function $(t){var e=M({},t);return e.data=Nn(t.data,t.headers,t.status,i.transformResponse),Wn(t.status)?e:u.reject(e)}}return v.pendingRequests=[],function(t){A(arguments,(function(t){v[t]=function(e,n){return v(M({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){A(arguments,(function(t){v[t]=function(e,n,i){return v(M({},i||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),v.defaults=t,v}]}function Yn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Gn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(r,s,a,l,c,u,h,p,d,f){if(s=s||t.url(),"jsonp"===m(r))var y=i.createCallback(s),_=o(s,y,(function(t,e){var n=200===t&&i.getResponse(y);C(l,t,n,"",e,"complete"),i.removeCallback(y)}));else{var g=e(r,s),v=!1;g.open(r,s,!0),A(c,(function(t,e){D(t)&&g.setRequestHeader(e,t)})),g.onload=function(){var t=g.statusText||"",e="response"in g?g.response:g.responseText,n=1223===g.status?204:g.status;0===n&&(n=e?200:"file"===hr(s).protocol?404:0),C(l,n,e,g.getAllResponseHeaders(),t,"complete")};var b=function(){C(l,-1,null,null,"","error")},x=function(){C(l,-1,null,null,"",v?"timeout":"abort")},$=function(){C(l,-1,null,null,"","timeout")};if(g.onerror=b,g.ontimeout=$,g.onabort=x,A(d,(function(t,e){g.addEventListener(e,t)})),A(f,(function(t,e){g.upload.addEventListener(e,t)})),h&&(g.withCredentials=!0),p)try{g.responseType=p}catch(S){if("json"!==p)throw S}g.send(L(a)?null:a)}if(u>0)var w=n((function(){B("timeout")}),u);else K(u)&&u.then((function(){B(D(u.$$timeoutId)?"timeout":"abort")}));function B(t){v="timeout"===t,_&&_(),g&&g.abort()}function C(t,e,i,r,o,s){D(w)&&n.cancel(w),_=g=null,t(e,i,r,o,s)}};function o(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){o.removeEventListener("load",s),o.removeEventListener("error",s),r.body.removeChild(o),o=null;var a=-1,l="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),l=t.type,a="error"===t.type?404:200),n&&n(a,l)},o.addEventListener("load",s),o.addEventListener("error",s),r.body.appendChild(o),s}}(t,i,t.defer,e,n[0])}]}var Jn=b.$interpolateMinErr=r("$interpolate");function Zn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,s=e.length,a=new RegExp(t.replace(/./g,c),"g"),l=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function u(n){return n.replace(a,t).replace(l,e)}function h(t,e,n,i){var r=t.$watch((function(t){return r(),i(t)}),e,n);return r}function m(a,l,c,m){var p=c===r.URL||c===r.MEDIA_URL;if(!a.length||-1===a.indexOf(t)){if(l)return;var d=u(a);p&&(d=r.getTrusted(c,d));var f=V(d);return f.exp=a,f.expressions=[],f.$$watchDelegate=h,f}m=!!m;for(var y,_,g,v,b,x=0,$=[],A=a.length,w=[],B=[];x<A;){if(-1===(y=a.indexOf(t,x))||-1===(_=a.indexOf(e,y+o))){x!==A&&w.push(u(a.substring(x)));break}x!==y&&w.push(u(a.substring(x,y))),v=a.substring(y+o,_),$.push(v),x=_+s,B.push(w.length),w.push("")}b=1===w.length&&1===B.length;var C=p&&b?void 0:function(t){try{return t=c&&!p?r.getTrusted(c,t):r.valueOf(t),m&&!D(t)?t:Rt(t)}catch(e){i(Jn.interr(a,e))}};if(g=$.map((function(t){return n(t,C)})),!l||$.length){var S=function(t){for(var e=0,n=$.length;e<n;e++){if(m&&L(t[e]))return;w[B[e]]=t[e]}return p?r.getTrusted(c,b?w[0]:w.join("")):(c&&w.length>1&&Jn.throwNoconcat(a),w.join(""))};return M((function(t){var e=0,n=$.length,r=new Array(n);try{for(;e<n;e++)r[e]=g[e](t);return S(r)}catch(o){i(Jn.interr(a,o))}}),{exp:a,expressions:$,$$watchDelegate:function(t,e){var n;return t.$watchGroup(g,(function(i,r){var o=S(i);e.call(this,o,i!==r?n:o,t),n=o}))}})}}return m.startSymbol=function(){return t},m.endSymbol=function(){return e},m}]}Jn.throwNoconcat=function(t){throw Jn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Jn.interr=function(t,e){return Jn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Xn=r("$interval");function Kn(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},i=function(t){e.clearInterval(t),delete n[t]},r=t((function(t,i,r){var o=e.setInterval(t,i);return n[o]=r,o}),i);return r.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Xn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,r=n[e];return qi(r.promise),r.reject("canceled"),i(e),!0},r}]}function Qn(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,i){return function(r,o){return function(s,a,l,c){var u=arguments.length>4,h=u?mt(arguments,4):[],m=0,p=D(c)&&!c,d=(p?n:e).defer(),f=d.promise;function y(){u?s.apply(null,h):s(m)}function _(){p?t.defer(y):i.$evalAsync(y),d.notify(m++),l>0&&m>=l&&(d.resolve(m),o(f.$$intervalId)),p||i.$apply()}return l=D(l)?l:0,f.$$intervalId=r(_,a,d,p),f}}}]}var ti=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(n){var i="_"+(t.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return e[r]=t[i]=o,r},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var i=e[n];delete t[i.id],delete e[n]}}}},ei=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ni={http:80,https:443,ftp:21},ii=r("$location");function ri(t,e,n){var i,r=(i=[],A(e,(function(t,e){W(t)?A(t,(function(t){i.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})):i.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})),i.length?i.join("&"):""),o=n?"#"+wt(n):"";return function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=wt(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(r?"?"+r:"")+o}function oi(t,e){var n=hr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=k(n.port)||ni[n.protocol]||null}var si=/^\s*[\\/]{2,}/;function ai(t,e,n){if(si.test(t))throw ii("badpath",'Invalid url "{0}".',t);var i="/"!==t.charAt(0);i&&(t="/"+t);var r=hr(t),o=i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname;e.$$path=function(t,e){for(var n=t.split("/"),i=n.length;i--;)n[i]=decodeURIComponent(n[i]),e&&(n[i]=n[i].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=At(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function li(t,e){return t.slice(0,e.length)===e}function ci(t,e){if(li(e,t))return e.substr(t.length)}function ui(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function hi(t,e,n){this.$$html5=!0,n=n||"",oi(t,this),this.$$parse=function(t){var n=ci(e,t);if(!q(n))throw ii("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);ai(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(D(o=ci(t,i))?(s=o,a=n&&D(o=ci(n,o))?e+(ci("/",o)||o):t+s):D(o=ci(e,i))?a=e+o:e===i+"/"&&(a=e),a&&this.$$parse(a),!!a);var o,s,a}}function mi(t,e,n){oi(t,this),this.$$parse=function(i){var r,o=ci(t,i)||ci(e,i);L(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",L(o)&&(t=i,this.replace())):L(r=ci(n,o))&&(r=o),ai(r,this,!1),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;return li(e,n)&&(e=e.replace(n,"")),r.exec(e)?t:(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return ui(t)===ui(e)&&(this.$$parse(e),!0)}}function pi(t,e,n){this.$$html5=!0,mi.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t===ui(i)?o=i:(s=ci(e,i))?o=t+n+s:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,s},this.$$normalizeUrl=function(e){return t+n+e}}var di={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=ri(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:fi("$$absUrl"),url:function(t){if(L(t))return this.$$url;var e=ei.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:fi("$$protocol"),host:fi("$$host"),port:fi("$$port"),path:yi("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(q(t)||U(t))t=t.toString(),this.$$search=At(t);else{if(!O(t))throw ii("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");A(t=st(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:L(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:yi("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function fi(t){return function(){return this[t]}}function yi(t,e){return function(n){return L(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function _i(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return D(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):O(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||q(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){var l,c,u,h,m=i.baseHref(),p=i.url();if(e.enabled){if(!m&&e.requireBase)throw ii("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(h=p).substring(0,h.indexOf("/",h.indexOf("//")+2))+(m||"/"),c=r.history?hi:pi}else u=ui(p),c=mi;var d=function(t){return t.substr(0,ui(t).lastIndexOf("/")+1)}(u);(l=new c(u,d,"#"+t)).$$parseLinkUrl(p,p),l.$$state=i.state();var f=/^\s*(javascript|mailto):/i;function y(t,e,n){var r=l.url(),o=l.$$state;try{i.url(t,e,n),l.$$state=i.state()}catch(s){throw l.url(r),l.$$state=o,s}}o.on("click",(function(t){var r=e.rewriteLinks;if(r&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var a=s(t.target);"a"!==it(a[0]);)if(a[0]===o[0]||!(a=a.parent())[0])return;if(!q(r)||!L(a.attr(r))){var c=a.prop("href"),u=a.attr("href")||a.attr("xlink:href");O(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=hr(c.animVal).href),f.test(c)||!c||a.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(c,u)&&(t.preventDefault(),l.absUrl()!==i.url()&&n.$apply())}}})),l.absUrl()!==p&&i.url(l.absUrl(),!0);var _=!0;return i.onUrlChange((function(t,e){li(t,d)?(n.$evalAsync((function(){var i,r=l.absUrl(),o=l.$$state;l.$$parse(t),l.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,l.absUrl()===t&&(i?(l.$$parse(r),l.$$state=o,y(r,!1,o)):(_=!1,g(r,o)))})),n.$$phase||n.$digest()):a.location.href=t})),n.$watch((function(){if(_||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=i.url(),e=l.absUrl(),o=i.state(),s=l.$$replace,a=!((c=t)===(u=e)||hr(c).href===hr(u).href)||l.$$html5&&r.history&&o!==l.$$state;(_||a)&&(_=!1,n.$evalAsync((function(){var e=l.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(i?(l.$$parse(t),l.$$state=o):(a&&y(e,s,o===l.$$state?null:l.$$state),g(t,o)))})))}var c,u;l.$$replace=!1})),l;function g(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function gi(){var t=!0,e=this;this.debugEnabled=function(e){return D(e)?(t=e,this):t},this.$get=["$window",function(n){var i,r=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(i=a("debug"),function(){t&&i.apply(e,arguments)})};function s(t){return H(t)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function a(t){var e=n.console||{},i=e[t]||e.log||I;return function(){var t=[];return A(arguments,(function(e){t.push(s(e))})),Function.prototype.apply.call(i,e,t)}}}]}A([pi,mi,hi],(function(t){t.prototype=Object.create(di),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==hi||!this.$$html5)throw ii("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=L(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var vi=r("$parse"),bi={}.constructor.prototype.valueOf;function xi(t){return t+""}var $i=Ot();A("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){$i[t]=!0}));var Ai={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wi=function(t){this.options=t};wi.prototype={constructor:wi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=$i[e],o=$i[n],s=$i[i];if(r||o||s){var a=s?i:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=D(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw vi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=m(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else n+=Ai[o]||o;r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Bi=function(t,e){this.lexer=t,this.options=e};function Ci(t,e){return void 0!==t?t:e}function Si(t,e){return void 0===t?e:void 0===e?t:t+e}function Ei(t,e,n){var i,r,o,s=t.isPure=function(t,e){switch(t.type){case Bi.MemberExpression:if(t.computed)return!1;break;case Bi.UnaryExpression:return 1;case Bi.BinaryExpression:return"+"!==t.operator&&1;case Bi.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case Bi.Program:i=!0,A(t.body,(function(t){Ei(t.expression,e,s),i=i&&t.expression.constant})),t.constant=i;break;case Bi.Literal:t.constant=!0,t.toWatch=[];break;case Bi.UnaryExpression:Ei(t.argument,e,s),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Bi.BinaryExpression:Ei(t.left,e,s),Ei(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Bi.LogicalExpression:Ei(t.left,e,s),Ei(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Bi.ConditionalExpression:Ei(t.test,e,s),Ei(t.alternate,e,s),Ei(t.consequent,e,s),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Bi.Identifier:t.constant=!1,t.toWatch=[t];break;case Bi.MemberExpression:Ei(t.object,e,s),t.computed&&Ei(t.property,e,s),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Bi.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),i=o,r=[],A(t.arguments,(function(t){Ei(t,e,s),i=i&&t.constant,r.push.apply(r,t.toWatch)})),t.constant=i,t.toWatch=o?r:[t];break;case Bi.AssignmentExpression:Ei(t.left,e,s),Ei(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Bi.ArrayExpression:i=!0,r=[],A(t.elements,(function(t){Ei(t,e,s),i=i&&t.constant,r.push.apply(r,t.toWatch)})),t.constant=i,t.toWatch=r;break;case Bi.ObjectExpression:i=!0,r=[],A(t.properties,(function(t){Ei(t.value,e,s),i=i&&t.value.constant,r.push.apply(r,t.value.toWatch),t.computed&&(Ei(t.key,e,!1),i=i&&t.key.constant,r.push.apply(r,t.key.toWatch))})),t.constant=i,t.toWatch=r;break;case Bi.ThisExpression:case Bi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Mi(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function Ti(t){return t.type===Bi.Identifier||t.type===Bi.MemberExpression}function ki(t){if(1===t.body.length&&Ti(t.body[0].expression))return{type:Bi.AssignmentExpression,left:t.body[0].expression,right:{type:Bi.NGValueParameter},operator:"="}}function Pi(t){this.$filter=t}function zi(t){this.$filter=t}function Ii(t,e,n){this.ast=new Bi(t,n),this.astCompiler=n.csp?new zi(e):new Pi(e)}function Fi(t){return Y(t.valueOf)?t.valueOf():bi.call(t)}function Vi(){var t,e,n=Ot(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){i[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(r){var o={csp:ct().noUnsafeEval,literals:st(i),isIdentifierStart:Y(t)&&t,isIdentifierContinue:Y(e)&&e};return s.$$getAst=function(t){return new Ii(new wi(o),r,o).getAst(t).ast},s;function s(t,e){var i,s;switch(typeof t){case"string":return t=t.trim(),(i=n[s=t])||(i=new Ii(new wi(o),r,o).parse(t),n[s]=m(i)),p(i,e);case"function":return p(t,e);default:return p(I,e)}}function a(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Fi(t))&&!n)&&(t===e||t!=t&&e!=e)}function l(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var l=a;return s=s[0],t.$watch((function(t){var e=s(t);return a(e,l,s.isPure)||(o=i(t,void 0,void 0,[e]),l=e&&Fi(e)),o}),e,n,r)}for(var c=[],u=[],h=0,m=s.length;h<m;h++)c[h]=a,u[h]=null;return t.$watch((function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var l=s[n](t);(e||(e=!a(l,c[n],s[n].isPure)))&&(u[n]=l,c[n]=l&&Fi(l))}return e&&(o=i(t,void 0,void 0,u)),o}),e,n,r)}function c(t,e,n,i,r){var o,s,a=i.literal?u:D,l=i.$$intercepted||i,c=i.$$interceptor||F,h=i.inputs&&!l.inputs;return d.literal=i.literal,d.constant=i.constant,d.inputs=i.inputs,m(d),o=t.$watch(d,e,n,r);function p(){a(s)&&o()}function d(t,e,n,i){return s=h&&i?i[0]:l(t,e,n,i),a(s)&&t.$$postDigest(p),c(s)}}function u(t){var e=!0;return A(t,(function(t){D(t)||(e=!1)})),e}function h(t,e,n,i){var r=t.$watch((function(t){return r(),i(t)}),e,n);return r}function m(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=l),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,i=function(i,r,o,s){var a=n&&s?s[0]:t(i,r,o,s);return e(a)};return i.$$intercepted=t,i.$$interceptor=e,i.literal=t.literal,i.oneTime=t.oneTime,i.constant=t.constant,e.$stateful||(n=!t.inputs,i.inputs=t.inputs?t.inputs:[t],e.$$pure||(i.inputs=i.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),m(i)}}]}function ji(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Di((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return D(e)?(t=e,this):t}}function Li(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Di((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return D(e)?(t=e,this):t}}function Di(t,e,n){var i=r("$q",TypeError),o=0,s=[];function a(){return new l}function l(){var t=this.promise=new c;this.resolve=function(e){m(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){y(t,e)}}function c(){this.$$state={status:0}}function u(){for(;!o&&s.length;){var t=s.shift();if(!Oi(t)){Ri(t);var n="Possibly unhandled rejection: "+Nt(t.value);H(t.value)?e(t.value,n):e(n)}}}function h(i){!n||i.pending||2!==i.status||Oi(i)||(0===o&&0===s.length&&t(u),s.push(i)),!i.processScheduled&&i.pending&&(i.processScheduled=!0,++o,t((function(){!function(i){var r,s,a;a=i.pending,i.processScheduled=!1,i.pending=void 0;try{for(var l=0,c=a.length;l<c;++l){Ri(i),s=a[l][0],r=a[l][i.status];try{Y(r)?m(s,r(i.value)):1===i.status?m(s,i.value):d(s,i.value)}catch(h){d(s,h),h&&!0===h.$$passToExceptionHandler&&e(h)}}}finally{--o,n&&0===o&&t(u)}}(i)})))}function m(t,e){t.$$state.status||(e===t?f(t,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):p(t,e))}function p(t,e){var n,i=!1;try{(O(e)||Y(e))&&(n=e.then),Y(n)?(t.$$state.status=-1,n.call(e,(function(e){i||(i=!0,p(t,e))}),r,(function(e){y(t,e)}))):(t.$$state.value=e,t.$$state.status=1,h(t.$$state))}catch(o){r(o)}function r(e){i||(i=!0,f(t,e))}}function d(t,e){t.$$state.status||f(t,e)}function f(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function y(n,i){var r=n.$$state.pending;n.$$state.status<=0&&r&&r.length&&t((function(){for(var t,n,o=0,s=r.length;o<s;o++){n=r[o][0],t=r[o][3];try{y(n,Y(t)?t(i):i)}catch(a){e(a)}}}))}function _(t){var e=new c;return d(e,t),e}function g(t,e,n){var i=null;try{Y(n)&&(i=n())}catch(r){return _(r)}return K(i)?i.then((function(){return e(t)}),_):e(t)}function v(t,e,n,i){var r=new c;return m(r,t),r.then(e,n,i)}M(c.prototype,{then:function(t,e,n){if(L(t)&&L(e)&&L(n))return this;var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&h(this.$$state),i},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return g(e,b,t)}),(function(e){return g(e,_,t)}),e)}});var b=v;function x(t){if(!Y(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new c;return t((function(t){m(e,t)}),(function(t){d(e,t)})),e}return x.prototype=c.prototype,x.defer=a,x.reject=_,x.when=v,x.resolve=b,x.all=function(t){var e=new c,n=0,i=W(t)?[]:{};return A(t,(function(t,r){n++,v(t).then((function(t){i[r]=t,--n||m(e,i)}),(function(t){d(e,t)}))})),0===n&&m(e,i),e},x.race=function(t){var e=a();return A(t,(function(t){v(t).then(e.resolve,e.reject)})),e.promise},x}function Oi(t){return!!t.pur}function Ri(t){t.pur=!0}function qi(t){t.$$state&&Ri(t.$$state)}function Ui(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Ni(){var t=10,e=r("$rootScope"),n=null,i=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,s,a){function l(t){t.currentScope.$$destroyed=!0}function c(t){9===o&&(t.$$childHead&&c(t.$$childHead),t.$$nextSibling&&c(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function u(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var n;return e=e||this,t?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",l),n},$watch:function(t,e,i,r){var o=s(t),a=Y(e)?e:I;if(o.$$watchDelegate)return o.$$watchDelegate(this,a,i,o,t);var l=this,c=l.$$watchers,u={fn:a,last:x,get:o,exp:r||t,eq:!!i};return n=null,c||((c=l.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(u),c.$$digestWatchIndex++,v(this,1),function(){var t=ot(c,u);t>=0&&(v(l,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,s=!1,a=!0;if(!t.length){var l=!0;return o.$evalAsync((function(){l&&e(i,i,o)})),function(){l=!1}}if(1===t.length)return this.$watch(t[0],(function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)}));function c(){s=!1;try{a?(a=!1,e(i,i,o)):e(i,n,o)}finally{for(var r=0;r<t.length;r++)n[r]=i[r]}}return A(t,(function(t,e){var n=o.$watch(t,(function(t){i[e]=t,s||(s=!0,o.$evalAsync(c))}));r.push(n)})),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){f.$$pure=s(t).literal,f.$stateful=!f.$$pure;var n,i,r,o=this,a=e.length>1,l=0,c=s(t,f),u=[],m={},p=!0,d=0;function f(t){var e,r,o,s;if(!L(n=t)){if(O(n))if($(n)){i!==u&&(d=(i=u).length=0,l++),e=n.length,d!==e&&(l++,i.length=d=e);for(var a=0;a<e;a++)s=i[a],o=n[a],s!=s&&o!=o||s===o||(l++,i[a]=o)}else{for(r in i!==m&&(i=m={},d=0,l++),e=0,n)h.call(n,r)&&(e++,o=n[r],s=i[r],r in i?s!=s&&o!=o||s===o||(l++,i[r]=o):(d++,i[r]=o,l++));if(d>e)for(r in l++,i)h.call(n,r)||(d--,delete i[r])}else i!==n&&(i=n,l++);return l}}return this.$watch(c,(function(){if(p?(p=!1,e(n,n,o)):e(n,r,o),a)if(O(n))if($(n)){r=new Array(n.length);for(var t=0;t<n.length;t++)r[t]=n[t]}else for(var i in r={},n)h.call(n,i)&&(r[i]=n[i]);else r=n}))},$digest:function(){var o,s,l,c,u,h,f,v,b,$=t,A=p.length?m:this,B=[];_("$digest"),a.$$checkUrlChange(),this===m&&null!==i&&(a.defer.cancel(i),w()),n=null;do{u=!1,f=A;for(var C=0;C<p.length;C++){try{(0,(b=p[C]).fn)(b.scope,b.locals)}catch(S){r(S)}n=null}p.length=0;t:do{if(c=!f.$$suspended&&f.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((s=(0,o.get)(f))===(l=o.last)||(o.eq?lt(s,l):P(s)&&P(l))){if(o===n){u=!1;break t}}else u=!0,n=o,o.last=o.eq?st(s,null):s,(0,o.fn)(s,l===x?s:l,f),$<5&&(B[v=4-$]||(B[v]=[]),B[v].push({msg:Y(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:s,oldVal:l}))}catch(S){r(S)}if(!(h=!f.$$suspended&&f.$$watchersCount&&f.$$childHead||f!==A&&f.$$nextSibling))for(;f!==A&&!(h=f.$$nextSibling);)f=f.$parent}while(f=h);if((u||p.length)&&!$--)throw g(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,B)}while(u||p.length);for(g();y<d.length;)try{d[y++]()}catch(S){r(S)}d.length=y=0,a.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&a.$$applicationDestroyed(),v(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,c(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){m.$$phase||p.length||a.defer((function(){p.length&&m.$digest()}),null,"$evalAsync"),p.push({scope:this,fn:s(t),locals:e})},$$postDigest:function(t){d.push(t)},$apply:function(t){try{_("$apply");try{return this.$eval(t)}finally{g()}}catch(e){r(e)}finally{try{m.$digest()}catch(e){throw r(e),e}}},$applyAsync:function(t){var e=this;t&&f.push((function(){e.$eval(t)})),t=s(t),null===i&&(i=a.defer((function(){m.$apply(w)}),null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(delete n[i],b(r,1,t))}},$emit:function(t,e){var n,i,o,s=[],a=this,l=!1,c={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ht([c],arguments,1);do{for(n=a.$$listeners[t]||s,c.currentScope=a,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,u)}catch(h){r(h)}else n.splice(i,1),i--,o--;if(l)break;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,i=n,o=n,s={name:t,targetScope:n,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return s;for(var a,l,c,u=ht([s],arguments,1);i=o;){for(s.currentScope=i,l=0,c=(a=i.$$listeners[t]||[]).length;l<c;l++)if(a[l])try{a[l].apply(null,u)}catch(h){r(h)}else a.splice(l,1),l--,c--;if(!(o=i.$$listenerCount[t]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(o=i.$$nextSibling);)i=i.$parent}return s.currentScope=null,s}};var m=new u,p=m.$$asyncQueue=[],d=m.$$postDigestQueue=[],f=m.$$applyAsyncQueue=[],y=0;return m;function _(t){if(m.$$phase)throw e("inprog","{0} already in progress",m.$$phase);m.$$phase=t}function g(){m.$$phase=null}function v(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function b(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function x(){}function w(){for(;f.length;)try{f.shift()()}catch(t){r(t)}i=null}}]}function Wi(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return D(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return D(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r=i?e:t,o=hr(n&&n.trim()).href;return""===o||o.match(r)?n:"unsafe:"+o}}}Bi.Program="Program",Bi.ExpressionStatement="ExpressionStatement",Bi.AssignmentExpression="AssignmentExpression",Bi.ConditionalExpression="ConditionalExpression",Bi.LogicalExpression="LogicalExpression",Bi.BinaryExpression="BinaryExpression",Bi.UnaryExpression="UnaryExpression",Bi.CallExpression="CallExpression",Bi.MemberExpression="MemberExpression",Bi.Identifier="Identifier",Bi.Literal="Literal",Bi.ArrayExpression="ArrayExpression",Bi.Property="Property",Bi.ObjectExpression="ObjectExpression",Bi.ThisExpression="ThisExpression",Bi.LocalsExpression="LocalsExpression",Bi.NGValueParameter="NGValueParameter",Bi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Bi.Program,body:t}},expressionStatement:function(){return{type:Bi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Ti(t))throw vi("lval","Trying to assign a value to a non l-value");t={type:Bi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Bi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Bi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Bi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Bi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=st(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Bi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Bi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Bi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Bi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Bi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Bi.Identifier,name:t.text}},constant:function(){return{type:Bi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Bi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Bi.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Bi.ObjectExpression,properties:e}},throwError:function(t,e){throw vi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw vi("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw vi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Bi.ThisExpression},$locals:{type:Bi.LocalsExpression}}},Pi.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ei(t,e.$filter);var n,i="";if(this.stage="assign",n=ki(t)){this.state.computing="assign";var r=this.nextId();this.recurse(n,r),this.return_(r),i="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Mi(t.body);e.stage="inputs",A(o,(function(t,n){var i="fn"+n;e.state[i]={vars:[],body:[],own:{}},e.state.computing=i;var r=e.nextId();e.recurse(t,r),e.return_(r),e.state.inputs.push({name:i,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,xi,Ci,Si);return this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return A(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return A(this.state.filters,(function(n,i){t.push(n+"=$filter("+e.escape(i)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var s,a,l,c,u,h=this;if(i=i||I,!o&&D(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case Bi.Program:A(t.body,(function(e,n){h.recurse(e.expression,void 0,void 0,(function(t){a=t})),n!==t.body.length-1?h.current().body.push(a,";"):h.return_(a)}));break;case Bi.Literal:c=this.escape(t.value),this.assign(e,c),i(e||c);break;case Bi.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){a=t})),c=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,c),i(c);break;case Bi.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){s=t})),this.recurse(t.right,void 0,void 0,(function(t){a=t})),c="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,c),i(c);break;case Bi.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),i(e);break;case Bi.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),i(e);break;case Bi.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),(function(){h.if_("inputs"===h.stage||"s",(function(){r&&1!==r&&h.if_(h.isNull(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))}))}),e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),i(e);break;case Bi.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,s,void 0,(function(){h.if_(h.notNull(s),(function(){t.computed?(a=h.nextId(),h.recurse(t.property,a),h.getStringValue(a),r&&1!==r&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),c=h.computedMember(s,a),h.assign(e,c),n&&(n.computed=!0,n.name=a)):(r&&1!==r&&h.if_(h.isNull(h.nonComputedMember(s,t.property.name)),h.lazyAssign(h.nonComputedMember(s,t.property.name),"{}")),c=h.nonComputedMember(s,t.property.name),h.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))}),(function(){h.assign(e,"undefined")})),i(e)}),!!r);break;case Bi.CallExpression:e=e||this.nextId(),t.filter?(a=h.filter(t.callee.name),l=[],A(t.arguments,(function(t){var e=h.nextId();h.recurse(t,e),l.push(e)})),c=a+"("+l.join(",")+")",h.assign(e,c),i(e)):(a=h.nextId(),s={},l=[],h.recurse(t.callee,a,s,(function(){h.if_(h.notNull(a),(function(){A(t.arguments,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c=s.name?h.member(s.context,s.name,s.computed)+"("+l.join(",")+")":a+"("+l.join(",")+")",h.assign(e,c)}),(function(){h.assign(e,"undefined")})),i(e)})));break;case Bi.AssignmentExpression:a=this.nextId(),s={},this.recurse(t.left,void 0,s,(function(){h.if_(h.notNull(s.context),(function(){h.recurse(t.right,a),c=h.member(s.context,s.name,s.computed)+t.operator+a,h.assign(e,c),i(e||c)}))}),1);break;case Bi.ArrayExpression:l=[],A(t.elements,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c="["+l.join(",")+"]",this.assign(e,c),i(e||c);break;case Bi.ObjectExpression:l=[],u=!1,A(t.properties,(function(t){t.computed&&(u=!0)})),u?(e=e||this.nextId(),this.assign(e,"{}"),A(t.properties,(function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===Bi.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)}))):(A(t.properties,(function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(h.escape(e.key.type===Bi.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),c="{"+l.join(",")+"}",this.assign(e,c)),i(e||c);break;case Bi.ThisExpression:this.assign(e,"s"),i(e||"s");break;case Bi.LocalsExpression:this.assign(e,"l"),i(e||"l");break;case Bi.NGValueParameter:this.assign(e,"v"),i(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(q(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(U(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw vi("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},zi.prototype={compile:function(t){var e,n,i=this;Ei(t,i.$filter),(e=ki(t))&&(n=this.recurse(e));var r,o=Mi(t.body);o&&(r=[],A(o,(function(t,e){var n=i.recurse(t);n.isPure=t.isPure,t.input=n,r.push(n),t.watchId=e})));var s=[];A(t.body,(function(t){s.push(i.recurse(t.expression))}));var a=0===t.body.length?I:1===t.body.length?s[0]:function(t,e){var n;return A(s,(function(i){n=i(t,e)})),n};return n&&(a.assign=function(t,e,i){return n(t,i,e)}),r&&(a.inputs=r),a},recurse:function(t,e,n){var i,r,o,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Bi.Literal:return this.value(t.value,e);case Bi.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case Bi.BinaryExpression:case Bi.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case Bi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Bi.Identifier:return s.identifier(t.name,e,n);case Bi.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n):this.nonComputedMember(i,r,e,n);case Bi.CallExpression:return o=[],A(t.arguments,(function(t){o.push(s.recurse(t))})),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,s){for(var a=[],l=0;l<o.length;++l)a.push(o[l](t,n,i,s));var c=r.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,i,s){var a,l=r(t,n,i,s);if(null!=l.value){for(var c=[],u=0;u<o.length;++u)c.push(o[u](t,n,i,s));a=l.value.apply(l.context,c)}return e?{value:a}:a};case Bi.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,s){var a=i(t,n,o,s),l=r(t,n,o,s);return a.context[a.name]=l,e?{value:l}:l};case Bi.ArrayExpression:return o=[],A(t.elements,(function(t){o.push(s.recurse(t))})),function(t,n,i,r){for(var s=[],a=0;a<o.length;++a)s.push(o[a](t,n,i,r));return e?{value:s}:s};case Bi.ObjectExpression:return o=[],A(t.properties,(function(t){t.computed?o.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):o.push({key:t.key.type===Bi.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})})),function(t,n,i,r){for(var s={},a=0;a<o.length;++a)o[a].computed?s[o[a].key(t,n,i,r)]=o[a].value(t,n,i,r):s[o[a].key]=o[a].value(t,n,i,r);return e?{value:s}:s};case Bi.ThisExpression:return function(t){return e?{value:t}:t};case Bi.LocalsExpression:return function(t,n){return e?{value:n}:n};case Bi.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=D(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=D(s)?-s:-0,e?{value:s}:s}},"unary!":function(t,e){return function(n,i,r,o){var s=!t(n,i,r,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(i,r,o,s){var a=Si(t(i,r,o,s),e(i,r,o,s));return n?{value:a}:a}},"binary-":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),l=e(i,r,o,s),c=(D(a)?a:0)-(D(l)?l:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)*e(i,r,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)/e(i,r,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)%e(i,r,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)===e(i,r,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!==e(i,r,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)==e(i,r,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!=e(i,r,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<e(i,r,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>e(i,r,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<=e(i,r,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>=e(i,r,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)&&e(i,r,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)||e(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,i){return function(r,o,s,a){var l=t(r,o,s,a)?e(r,o,s,a):n(r,o,s,a);return i?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(i,r,o,s){var a=r&&t in r?r:i;n&&1!==n&&a&&null==a[t]&&(a[t]={});var l=a?a[t]:void 0;return e?{context:a,name:t,value:l}:l}},computedMember:function(t,e,n,i){return function(r,o,s,a){var l,c,u=t(r,o,s,a);return null!=u&&(l=xi(l=e(r,o,s,a)),i&&1!==i&&u&&!u[l]&&(u[l]={}),c=u[l]),n?{context:u,name:l,value:c}:c}},nonComputedMember:function(t,e,n,i){return function(r,o,s,a){var l=t(r,o,s,a);i&&1!==i&&l&&null==l[e]&&(l[e]={});var c=null!=l?l[e]:void 0;return n?{context:l,name:e,value:c}:c}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}},Ii.prototype={constructor:Ii,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Bi.Literal||t.body[0].expression.type===Bi.ArrayExpression||t.body[0].expression.type===Bi.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Hi=r("$sce"),Yi={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=/_([a-z])/g;function Ji(t){return t.replace(Gi,Kt)}function Zi(t){var e=[];return D(t)&&A(t,(function(t){e.push(function(t){if("self"===t)return t;if(q(t)){if(t.indexOf("***")>-1)throw Hi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(G(t))return new RegExp("^"+t.source+"$");throw Hi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Xi(){this.SCE_CONTEXTS=Yi;var e=["self"],n=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=Zi(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(n=Zi(t)),n},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(i,r){var o=function(t){throw Hi("unsafe","Attempting to use an unsafe value in a safe context.")};function s(e,n){return"self"===e?mr(n,cr)||function(e){return mr(e,t.document.baseURI?t.document.baseURI:(ar||((ar=t.document.createElement("a")).href=".",ar=ar.cloneNode(!1)),ar.href))}(n):!!e.exec(n.href)}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}i.has("$sanitize")&&(o=i.get("$sanitize"));var l=a(),c={};return c[Yi.HTML]=a(l),c[Yi.CSS]=a(l),c[Yi.MEDIA_URL]=a(l),c[Yi.URL]=a(c[Yi.MEDIA_URL]),c[Yi.JS]=a(l),c[Yi.RESOURCE_URL]=a(c[Yi.URL]),{trustAs:function(t,e){var n=c.hasOwnProperty(t)?c[t]:null;if(!n)throw Hi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||L(e)||""===e)return e;if("string"!=typeof e)throw Hi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,i){if(null===i||L(i)||""===i)return i;var a=c.hasOwnProperty(t)?c[t]:null;if(a&&i instanceof a)return i.$$unwrapTrustedValue();if(Y(i.$$unwrapTrustedValue)&&(i=i.$$unwrapTrustedValue()),t===Yi.MEDIA_URL||t===Yi.URL)return r(i.toString(),t===Yi.MEDIA_URL);if(t===Yi.RESOURCE_URL){if(function(t){var i,r,o=hr(t.toString()),a=!1;for(i=0,r=e.length;i<r;i++)if(s(e[i],o)){a=!0;break}if(a)for(i=0,r=n.length;i<r;i++)if(s(n[i],o)){a=!1;break}return a}(i))return i;throw Hi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",i.toString())}if(t===Yi.HTML)return o(i);throw Hi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Ki(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&o<8)throw Hi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Ut(Yi);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=F),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,(function(e){return i.getTrusted(t,e)}))};var r=i.parseAs,s=i.getTrusted,a=i.trustAs;return A(Yi,(function(t,e){var n=m(e);i[Ji("parse_as_"+n)]=function(e){return r(t,e)},i[Ji("get_trusted_"+n)]=function(e){return s(t,e)},i[Ji("trust_as_"+n)]=function(e){return a(t,e)}})),i}]}function Qi(){this.$get=["$window","$document",function(t,e){var n={},i=!((!t.nw||!t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,r=k((/android (\d+)/.exec(m((t.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},l=a.body&&a.body.style,c=!1,u=!1;return l&&(c=!(!("transition"in l)&&!("webkitTransition"in l)),u=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!i||r<4||s),hasEvent:function(t){if("input"===t&&o)return!1;if(L(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:ct(),transitions:c,animations:u,android:r}}]}function tr(){this.$get=V((function(t){return new er(t)}))}function er(t){var e=this,n={},i=[],r=e.ALL_TASKS_TYPE="$$all$$",o=e.DEFAULT_TASK_TYPE="$$default$$";function s(){var t=i.pop();return t&&t.cb}function a(t){for(var e=i.length-1;e>=0;--e){var n=i[e];if(n.type===t)return i.splice(e,1),n.cb}}e.completeTask=function(e,i){i=i||o;try{e()}finally{!function(t){n[t=t||o]&&(n[t]--,n[r]--)}(i);var l=n[i],c=n[r];if(!c||!l)for(var u,h=c?a:s;u=h(i);)try{u()}catch(m){t.error(m)}}},e.incTaskCount=function(t){n[t=t||o]=(n[t]||0)+1,n[r]=(n[r]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){n[e=e||r]?i.push({type:e,cb:t}):t()}}var nr=r("$templateRequest");function ir(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,i,r,o){function s(a,l){s.totalPendingRequests++,q(a)&&!L(n.get(a))||(a=o.getTrustedResourceUrl(a));var c=i.defaults&&i.defaults.transformResponse;return W(c)?c=c.filter((function(t){return t!==Rn})):c===Rn&&(c=null),i.get(a,M({cache:n,transformResponse:c},t)).finally((function(){s.totalPendingRequests--})).then((function(t){return n.put(a,t.data)}),(function(t){return l||(t=nr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText),e(t)),r.reject(t)}))}return s.totalPendingRequests=0,s}]}function rr(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={findBindings:function(t,e,n){var i=t.getElementsByClassName("ng-binding"),r=[];return A(i,(function(t){var i=b.element(t).data("$binding");i&&A(i,(function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)}))})),r},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return i}]}var or=r("$timeout");function sr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function s(s,a,l){Y(s)||(l=a,a=s,s=I);var c,u=mt(arguments,3),h=D(l)&&!l,m=(h?i:n).defer(),p=m.promise;return c=e.defer((function(){try{m.resolve(s.apply(null,u))}catch(e){m.reject(e),r(e)}finally{delete o[p.$$timeoutId]}h||t.$apply()}),a,"$timeout"),p.$$timeoutId=c,o[c]=m,p}return s.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw or("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,i=o[n];return qi(i.promise),i.reject("canceled"),delete o[n],e.defer.cancel(n)},s}]}var ar,lr=t.document.createElement("a"),cr=hr(t.location.href);lr.href="http://[::1]";var ur="[::1]"===lr.hostname;function hr(t){if(!q(t))return t;var e=t;o&&(lr.setAttribute("href",e),e=lr.href),lr.setAttribute("href",e);var n=lr.hostname;return!ur&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:lr.href,protocol:lr.protocol?lr.protocol.replace(/:$/,""):"",host:lr.host,search:lr.search?lr.search.replace(/^\?/,""):"",hash:lr.hash?lr.hash.replace(/^#/,""):"",hostname:n,port:lr.port,pathname:"/"===lr.pathname.charAt(0)?lr.pathname:"/"+lr.pathname}}function mr(t,e){return t=hr(t),e=hr(e),t.protocol===e.protocol&&t.host===e.host}function pr(){this.$get=V(t)}function dr(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,s,a,l,c=function(t){try{return t.cookie||""}catch(e){return""}}(e);if(c!==i)for(t=(i=c).split("; "),n={},s=0;s<t.length;s++)(a=(o=t[s]).indexOf("="))>0&&(l=r(o.substring(0,a)),L(n[l])&&(n[l]=r(o.substring(a+1))));return n}}function fr(){this.$get=dr}function yr(t){var e="Filter";function n(i,r){if(O(i)){var o={};return A(i,(function(t,e){o[e]=n(e,t)})),o}return t.factory(i+e,r)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",br),n("date",Pr),n("filter",_r),n("json",zr),n("limitTo",Vr),n("lowercase",Ir),n("number",xr),n("orderBy",Lr),n("uppercase",Fr)}function _r(){return function(t,e,n,i){if(!$(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var o,s;switch(i=i||"$",vr(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=function(t,e,n,i){var r=O(t)&&n in t;return!0===e?e=lt:Y(e)||(e=function(t,e){return!(L(t)||(null===t||null===e?t!==e:O(e)||O(t)&&!j(t)||(t=m(""+t),e=m(""+e),-1===t.indexOf(e))))}),function(o){return r&&!O(o)?gr(o,t[n],e,n,!1):gr(o,t,e,n,i)}}(e,n,i,s);break;default:return t}return Array.prototype.filter.call(t,o)}}function gr(t,e,n,i,r,o){var s=vr(t),a=vr(e);if("string"===a&&"!"===e.charAt(0))return!gr(t,e.substring(1),n,i,r);if(W(t))return t.some((function(t){return gr(t,e,n,i,r)}));switch(s){case"object":var l;if(r){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&gr(t[l],e,n,i,!0))return!0;return!o&&gr(t,e,n,i,!1)}if("object"===a){for(l in e){var c=e[l];if(!Y(c)&&!L(c)){var u=l===i;if(!gr(u?t:t[l],c,n,i,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function vr(t){return null===t?"null":typeof t}function br(t){var e=t.NUMBER_FORMATS;return function(t,n,i){L(n)&&(n=e.CURRENCY_SYM),L(i)&&(i=e.PATTERNS[1].maxFrac);var r=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:$r(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(r,n)}}function xr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:$r(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function $r(t,e,n,i,r){if(!q(t)&&!U(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,l=Math.abs(t)+"",c="";if(s)c="∞";else{o=function(t){var e,n,i,r,o,s=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;"0"===t.charAt(i);i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;"0"===t.charAt(o);)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>22&&(e=e.splice(0,21),s=n-1,n=1),{d:e,e:s,i:n}}(l),function(t,e,n,i){var r=t.d,o=r.length-t.i,s=(e=L(e)?Math.min(Math.max(n,o),i):+e)+t.i,a=r[s];if(s>0){r.splice(Math.max(t.i,s));for(var l=s;l<r.length;l++)r[l]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var c=1;c<s;c++)r[c]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight((function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)}),0);h&&(r.unshift(h),t.i++)}(o,r,e.minFrac,e.maxFrac);var u=o.d,h=o.i,m=o.e,p=[];for(a=u.reduce((function(t,e){return t&&!e}),!0);h<0;)u.unshift(0),h++;h>0?p=u.splice(h,u.length):(p=u,u=[0]);var d=[];for(u.length>=e.lgSize&&d.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)d.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&d.unshift(u.join("")),c=d.join(n),p.length&&(c+=i+p.join("")),m&&(c+="e+"+m)}return t<0&&!a?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function Ar(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function wr(t,e,n,i,r){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&-12===n&&(s=12),Ar(s,e,i,r)}}function Br(t,e,n){return function(i,r){var o=i["get"+t]();return r[p((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Cr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Sr(t){return function(e){var n,i=Cr(e.getFullYear()),r=(n=e,+new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))-+i);return Ar(1+Math.round(r/6048e5),t)}}function Er(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}dr.$inject=["$document"],yr.$inject=["$provide"],br.$inject=["$locale"],xr.$inject=["$locale"];var Mr={yyyy:wr("FullYear",4,0,!1,!0),yy:wr("FullYear",2,0,!0,!0),y:wr("FullYear",1,0,!1,!0),MMMM:Br("Month"),MMM:Br("Month",!0),MM:wr("Month",2,1),M:wr("Month",1,1),LLLL:Br("Month",!1,!0),dd:wr("Date",2),d:wr("Date",1),HH:wr("Hours",2),H:wr("Hours",1),hh:wr("Hours",2,-12),h:wr("Hours",1,-12),mm:wr("Minutes",2),m:wr("Minutes",1),ss:wr("Seconds",2),s:wr("Seconds",1),sss:wr("Milliseconds",3),EEEE:Br("Day"),EEE:Br("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=Ar(Math[i>0?"floor":"ceil"](i/60),2)+Ar(Math.abs(i%60),2)},ww:Sr(2),w:Sr(1),G:Er,GG:Er,GGG:Er,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Tr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,kr=/^-?\d+$/;function Pr(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,s,a="",l=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,q(n)&&(n=kr.test(n)?k(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,s=n[8]?i.setUTCFullYear:i.setFullYear,a=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=k(n[9]+n[10]),o=k(n[9]+n[11])),s.call(i,k(n[1]),k(n[2])-1,k(n[3]));var l=k(n[4]||0)-r,c=k(n[5]||0)-o,u=k(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return a.call(i,l,c,u,h),i}return t}(n)),U(n)&&(n=new Date(n)),!N(n)||!isFinite(n.getTime()))return n;for(;i;)(s=Tr.exec(i))?i=(l=ht(l,s,1)).pop():(l.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=gt(r,c),n=bt(n,r,!0)),A(l,(function(e){a+=(o=Mr[e])?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),a}}function zr(){return function(t,e){return L(e)&&(e=2),ft(t,e)}}Pr.$inject=["$locale"];var Ir=V(m),Fr=V(p);function Vr(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):k(e),P(e)?t:(U(t)&&(t=t.toString()),$(t)?(n=(n=!n||isNaN(n)?0:k(n))<0?Math.max(0,t.length+n):n,e>=0?jr(t,n,n+e):0===n?jr(t,e,t.length):jr(t,Math.max(0,n+e),n)):t)}}function jr(t,e,n){return q(t)?t.slice(e,n):d.call(t,e,n)}function Lr(t){return function(i,o,s,a){if(null==i)return i;if(!$(i))throw r("orderBy")("notarray","Expected array but received: {0}",i);W(o)||(o=[o]),0===o.length&&(o=["+"]);var l=o.map((function(e){var n=1,i=F;if(Y(e))i=e;else if(q(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}})),c=s?-1:1,u=Y(a)?a:n,h=Array.prototype.map.call(i,(function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:l.map((function(i){return function(t,n){var i=typeof t;return null===t?i="null":"object"===i&&(t=function(t){return Y(t.valueOf)&&e(t=t.valueOf())||j(t)&&e(t=t.toString()),t}(t)),{value:t,type:i,index:n}}(i.get(t),n)}))}}));return h.sort((function(t,e){for(var i=0,r=l.length;i<r;i++){var o=u(t.predicateValues[i],e.predicateValues[i]);if(o)return o*l[i].descending*c}return(u(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c})),i=h.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,s=e.value;"string"===i?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===i&&(O(o)&&(o=t.index),O(s)&&(s=e.index)),o!==s&&(n=o<s?-1:1)}else n="undefined"===i?1:"undefined"===r?-1:"null"===i?1:"null"===r||i<r?-1:1;return n}}function Dr(t){return Y(t)&&(t={link:t}),t.restrict=t.restrict||"AC",V(t)}Lr.$inject=["$parse"];var Or=V({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===_.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),Rr={};A(Pe,(function(t,e){if("multiple"!==t){var n=xn("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),Rr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],(function(t){r.$set(e,!!t)}))}})),A(Ie,(function(t,e){Rr[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"===i.ngPattern.charAt(0)){var r=i.ngPattern.match(c);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],(function(t){i.$set(e,t)}))}}}})),A(["src","srcset","href"],(function(t){var e=xn("ng-"+t);Rr[e]=["$sce",function(n){return{priority:99,link:function(i,r,s){var a=t,l=t;"href"===t&&"[object SVGAnimatedString]"===_.call(r.prop("href"))&&(l="xlinkHref",s.$attr[l]="xlink:href",a=null),s.$set(e,n.getTrustedMediaUrl(s[e])),s.$observe(e,(function(e){e?(s.$set(l,e),o&&a&&r.prop(a,s[l])):"href"===t&&s.$set(l,null)}))}}}]}));var qr={$addControl:I,$getControls:V([]),$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I,$$setSubmitted:I},Ur="ng-pending",Nr="ng-submitted";function Wr(t,e,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=qr,this.$$element=t,this.$$animate=i,Jr(this)}Wr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Wr.prototype={$rollbackViewValue:function(){A(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){A(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){Lt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Ut(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],A(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),A(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),A(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),ot(this.$$controls,t),t.$$parentForm=qr},$setDirty:function(){this.$$animate.removeClass(this.$$element,Wo),this.$$animate.addClass(this.$$element,Ho),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Wo,Ho+" "+Nr),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,A(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){A(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==qr;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Nr),this.$submitted=!0,A(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Zr({clazz:Wr,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(ot(i,n),0===i.length&&delete t[e])}});var Hr=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Wr,compile:function(n,r){n.addClass(Wo).addClass(Uo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,s){var a=s[0];if(!("action"in r)){var l=function(e){t.$apply((function(){a.$commitViewValue(),a.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",l)}),0,!1)}))}(s[1]||a.$$parentForm).$addControl(a);var c=o?i(a.$name):I;o&&(c(t,a),r.$observe(o,(function(e){a.$name!==e&&(c(t,void 0),a.$$parentForm.$$renameControl(a,e),(c=i(a.$name))(t,a))}))),n.on("$destroy",(function(){a.$$parentForm.$removeControl(a),c(t,void 0),M(a,qr)}))}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||I}}]},Yr=Hr(),Gr=Hr(!0);function Jr(t){t.$$classCache={},t.$$classCache[No]=!(t.$$classCache[Uo]=t.$$element.hasClass(Uo))}function Zr(t){var e=t.clazz,n=t.set,i=t.unset;function r(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+zt(e,"-"):"",r(t,Uo+e,!0===n),r(t,No+e,!1===n)}e.prototype.$setValidity=function(t,e,s){var a;L(e)?function(t,e,i,r){t[e]||(t[e]={}),n(t[e],i,r)}(this,"$pending",t,s):function(t,e,n,r){t[e]&&i(t[e],n,r),Xr(t[e])&&(t[e]=void 0)}(this,"$pending",t,s),X(e)?e?(i(this.$error,t,s),n(this.$$success,t,s)):(n(this.$error,t,s),i(this.$$success,t,s)):(i(this.$error,t,s),i(this.$$success,t,s)),this.$pending?(r(this,Ur,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(r(this,Ur,!1),this.$valid=Xr(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,a=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,a,this)}}function Xr(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Kr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,to=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,eo=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,no=/^(\d{4,})-(\d{2})-(\d{2})$/,io=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro=/^(\d{4,})-W(\d\d)$/,oo=/^(\d{4,})-(\d\d)$/,so=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ao=Ot();A("date,datetime-local,month,time,week".split(","),(function(t){ao[t]=!0}));var lo={text:function(t,e,n,i,r,o){uo(0,e,n,i,r,o),co(i)},date:mo("date",no,ho(no,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mo("datetimelocal",io,ho(io,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mo("time",so,ho(so,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mo("week",ro,(function(t,e){if(N(t))return t;if(q(t)){ro.lastIndex=0;var n=ro.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,l=0,c=Cr(i),u=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(i,0,c.getDate()+u,o,s,a,l)}}return NaN}),"yyyy-Www"),month:mo("month",oo,ho(oo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o,s,a){var l;if(po(0,e,0,i,"number"),fo(i),uo(0,e,n,i,r,o),D(n.min)||n.ngMin){var c=n.min||a(n.ngMin)(t);l=yo(c),i.$validators.min=function(t,e){return i.$isEmpty(e)||L(l)||e>=l},n.$observe("min",(function(t){t!==c&&(l=yo(t),c=t,i.$validate())}))}if(D(n.max)||n.ngMax){var u=n.max||a(n.ngMax)(t),h=yo(u);i.$validators.max=function(t,e){return i.$isEmpty(e)||L(h)||e<=h},n.$observe("max",(function(t){t!==u&&(h=yo(t),u=t,i.$validate())}))}if(D(n.step)||n.ngStep){var m=n.step||a(n.ngStep)(t),p=yo(m);i.$validators.step=function(t,e){return i.$isEmpty(e)||L(p)||vo(e,l||0,p)},n.$observe("step",(function(t){t!==m&&(p=yo(t),m=t,i.$validate())}))}},url:function(t,e,n,i,r,o){uo(0,e,n,i,r,o),co(i),i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Qr.test(n)}},email:function(t,e,n,i,r,o){uo(0,e,n,i,r,o),co(i),i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||to.test(n)}},radio:function(t,e,n,i){var r=!n.ngTrim||"false"!==tt(n.ngTrim);L(n.name)&&e.attr("name",C()),e.on("change",(function(t){var o;e[0].checked&&(o=n.value,r&&(o=tt(o)),i.$setViewValue(o,t&&t.type))})),i.$render=function(){var t=n.value;r&&(t=tt(t)),e[0].checked=t===i.$viewValue},n.$observe("value",i.$render)},range:function(t,e,n,i,r,o){po(0,e,0,i,"range"),fo(i),uo(0,e,n,i,r,o);var s=i.$$hasNativeValidators&&"range"===e[0].type,a=s?0:void 0,l=s?100:void 0,c=s?1:void 0,u=e[0].validity,h=D(n.min),m=D(n.max),p=D(n.step),d=i.$render;function f(t,i){e.attr(t,n[t]);var r=n[t];n.$observe(t,(function(t){t!==r&&(r=t,i(t))}))}i.$render=s&&D(u.rangeUnderflow)&&D(u.rangeOverflow)?function(){d(),i.$setViewValue(e.val())}:d,h&&(a=yo(n.min),i.$validators.min=s?function(){return!0}:function(t,e){return i.$isEmpty(e)||L(a)||e>=a},f("min",(function(t){if(a=yo(t),!P(i.$modelValue))if(s){var n=e.val();a>n&&(n=a,e.val(n)),i.$setViewValue(n)}else i.$validate()}))),m&&(l=yo(n.max),i.$validators.max=s?function(){return!0}:function(t,e){return i.$isEmpty(e)||L(l)||e<=l},f("max",(function(t){if(l=yo(t),!P(i.$modelValue))if(s){var n=e.val();l<n&&(e.val(l),n=l<a?a:l),i.$setViewValue(n)}else i.$validate()}))),p&&(c=yo(n.step),i.$validators.step=s?function(){return!u.stepMismatch}:function(t,e){return i.$isEmpty(e)||L(c)||vo(e,a||0,c)},f("step",(function(t){c=yo(t),P(i.$modelValue)||(s?i.$viewValue!==e.val()&&i.$setViewValue(e.val()):i.$validate())})))},checkbox:function(t,e,n,i,r,o,s,a){var l=bo(a,t,"ngTrueValue",n.ngTrueValue,!0),c=bo(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",(function(t){i.$setViewValue(e[0].checked,t&&t.type)})),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push((function(t){return lt(t,l)})),i.$parsers.push((function(t){return t?l:c}))},hidden:I,button:I,submit:I,reset:I,file:I};function co(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function uo(t,e,n,i,r,o){var s,a=m(e[0].type);if(!r.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionupdate",(function(t){(L(t.data)||""===t.data)&&(l=!1)})),e.on("compositionend",(function(){l=!1,c()}))}var c=function(t){if(s&&(o.defer.cancel(s),s=null),!l){var r=e.val(),c=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(r=tt(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,c)}};if(r.hasEvent("input"))e.on("input",c);else{var u=function(t,e,n){s||(s=o.defer((function(){s=null,e&&e.value===n||c(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||u(t,this,this.value)})),r.hasEvent("paste")&&e.on("paste cut drop",u)}e.on("change",c),ao[a]&&i.$$hasNativeValidators&&a===n.type&&e.on("keydown wheel mousedown",(function(t){if(!s){var e=this.validity,n=e.badInput,i=e.typeMismatch;s=o.defer((function(){s=null,e.badInput===n&&e.typeMismatch===i||c(t)}))}})),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function ho(t,e){return function(n,i){var r,o;if(N(n))return n;if(q(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Kr.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n)){r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},A(r,(function(t,n){n<e.length&&(o[e[n]]=+t)}));var s=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&s.setFullYear(o.yyyy),s}}return NaN}}function mo(t,e,n,i){return function(r,o,s,a,l,c,u,h){po(0,o,0,a,t),uo(0,o,s,a,l,c);var m,p,d="time"===t||"datetimelocal"===t;if(a.$parsers.push((function(n){return a.$isEmpty(n)?null:e.test(n)?x(n,m):void(a.$$parserName=t)})),a.$formatters.push((function(t){if(t&&!N(t))throw Xo("datefmt","Expected `{0}` to be a date",t);if(v(t)){m=t;var e=a.$options.getOption("timezone");return e&&(p=e,m=bt(m,e,!0)),function(t,e){var n=i;d&&q(a.$options.getOption("timeSecondsFormat"))&&(n=i.replace("ss.sss",a.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var r=u("date")(t,n,e);return d&&a.$options.getOption("timeStripZeroSeconds")&&(r=r.replace(/(?::00)?(?:\.000)?$/,"")),r}(t,e)}return m=null,p=null,""})),D(s.min)||s.ngMin){var f=s.min||h(s.ngMin)(r),y=b(f);a.$validators.min=function(t){return!v(t)||L(y)||n(t)>=y},s.$observe("min",(function(t){t!==f&&(y=b(t),f=t,a.$validate())}))}if(D(s.max)||s.ngMax){var _=s.max||h(s.ngMax)(r),g=b(_);a.$validators.max=function(t){return!v(t)||L(g)||n(t)<=g},s.$observe("max",(function(t){t!==_&&(g=b(t),_=t,a.$validate())}))}function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function b(t){return D(t)&&!N(t)?x(t)||void 0:t}function x(t,e){var i=a.$options.getOption("timezone");p&&p!==i&&(e=vt(e,gt(p)));var r=n(t,e);return!isNaN(r)&&i&&(r=bt(r,i)),r}}}function po(t,e,n,i,r){var o=e[0];(i.$$hasNativeValidators=O(o.validity))&&i.$parsers.push((function(t){var n=e.prop(u)||{};if(!n.badInput&&!n.typeMismatch)return t;i.$$parserName=r}))}function fo(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:eo.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!U(e))throw Xo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function yo(t){return D(t)&&!U(t)&&(t=parseFloat(t)),P(t)?void 0:t}function _o(t){return(0|t)===t}function go(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}return e.length-n-1}function vo(t,e,n){var i=Number(t),r=!_o(i),o=!_o(e),s=!_o(n);if(r||o||s){var a=r?go(i):0,l=o?go(e):0,c=s?go(n):0,u=Math.max(a,l,c),h=Math.pow(10,u);i*=h,e*=h,n*=h,r&&(i=Math.round(i)),o&&(e=Math.round(e)),s&&(n=Math.round(n))}return(i-e)%n==0}function bo(t,e,n,i,r){var o;if(D(i)){if(!(o=t(i)).constant)throw Xo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var xo=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(lo[m(s.type)]||lo.text)(r,o,s,a[0],e,t,n,i)}}}}],$o=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,n){if("hidden"===m(n.type))return{pre:function(e,n,i,r){var o=n[0];o.parentNode&&o.parentNode.insertBefore(o,o.nextSibling),Object.defineProperty&&Object.defineProperty(o,"value",t)}}}}},Ao=/^(true|false|\d+)$/,wo=function(){function t(t,e,n){var i=D(n)?n:9===o?"":null;t.prop("value",i),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return Ao.test(n.ngValue)?function(e,n,i){t(n,i,e.$eval(i.ngValue))}:function(e,n,i){e.$watch(i.ngValue,(function(e){t(n,i,e)}))}}}},Bo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,(function(t){n.textContent=Rt(t)}))}}}}],Co=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",(function(t){i.textContent=L(t)?"":t}))}}}}],So=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),s=e(r.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(s,(function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")}))}}}}],Eo=V({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}});function Mo(t,e){var n;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(a,l,c){var u,h=l.data("$classCounts"),m=!0;function p(t,e){var n=[];return A(t,(function(t){(e>0||h[t])&&(h[t]=(h[t]||0)+e,h[t]===+(e>0)&&n.push(t))})),n.join(" ")}h||(h=Ot(),l.data("$classCounts",h)),"ngClass"!==t&&(n||(n=s("$index",(function(t){return 1&t}))),a.$watch(n,(function(t){var n;t===e?(n=p(r(n=u),1),c.$addClass(n)):function(t){t=p(r(t),-1),c.$removeClass(t)}(u),m=t}))),a.$watch(s(c[t],o),(function(t){m===e&&function(t,e){var n=r(t),o=r(e),s=i(n,o),a=i(o,n),l=p(s,-1),u=p(a,1);c.$addClass(u),c.$removeClass(l)}(u,t),u=t}))}}}];function i(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function r(t){return t&&t.split(" ")}function o(t){if(!t)return t;var e=t;return W(t)?e=t.map(o).join(" "):O(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):q(t)||(e=t+""),e}}var To=Mo("",!0),ko=Mo("Odd",0),Po=Mo("Even",1),zo=Dr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Io=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Fo={},Vo={blur:!0,focus:!0};function jo(t,e,n,i,r,o){return{restrict:"A",compile:function(s,a){var l=t(a[i]);return function(t,i){i.on(r,(function(i){var r=function(){l(t,{$event:i})};if(e.$$phase)if(o)t.$evalAsync(r);else try{r()}catch(s){n(s)}else t.$apply(r)}))}}}}A("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=xn("ng-"+t);Fo[e]=["$parse","$rootScope","$exceptionHandler",function(n,i,r){return jo(n,i,r,e,t,Vo[t])}]}));var Lo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,l,c;n.$watch(r.ngIf,(function(n){n?l||s((function(n,o){l=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),a={clone:n},t.enter(n,i.parent(),i)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=Dt(a.clone),t.leave(c).done((function(t){!1!==t&&(c=null)})),a=null))}))}}}],Do=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,l,c,u){var h,m,p,d=0,f=function(){m&&(m.remove(),m=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).done((function(t){!1!==t&&(m=null)})),m=p,p=null)};i.$watch(o,(function(o){var l=function(t){!1===t||!D(a)||a&&!i.$eval(a)||e()},m=++d;o?(t(o,!0).then((function(t){if(!i.$$destroyed&&m===d){var e=i.$new();c.template=t;var a=u(e,(function(t){f(),n.enter(t,null,r).done(l)}));p=a,(h=e).$emit("$includeContentLoaded",o),i.$eval(s)}}),(function(){i.$$destroyed||m===d&&(f(),i.$emit("$includeContentError",o))})),i.$emit("$includeContentRequested",o)):(f(),c.template=null)}))}}}}],Oo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(_.call(i[0]).match(/SVG/))return i.empty(),void e(he(o.template,t.document).childNodes)(n,(function(t){i.append(t)}),{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],Ro=Dr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),qo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,s=o?tt(r):r;i.$parsers.push((function(t){if(!L(t)){var e=[];return t&&A(t.split(s),(function(t){t&&e.push(o?tt(t):t)})),e}})),i.$formatters.push((function(t){if(W(t))return t.join(r)})),i.$isEmpty=function(t){return!t||!t.length}}}},Uo="ng-valid",No="ng-invalid",Wo="ng-pristine",Ho="ng-dirty",Yo="ng-untouched",Go="ng-touched",Jo="ng-empty",Zo="ng-not-empty",Xo=r("ngModel");function Ko(t,e,n,i,r,o,s,a,l){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(t),this.$$parentForm=qr,this.$options=Qo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=s,this.$$parse=r,this.$$q=a,this.$$exceptionHandler=e,Jr(this),(c=this).$$scope.$watch((function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e}))}Ko.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Ko.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return Y(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){Y(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Xo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,xt(this.$$element))},$render:I,$isEmpty:function(t){return L(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Zo),this.$$animate.addClass(this.$$element,Jo)):(this.$$animate.removeClass(this.$$element,Jo),this.$$animate.addClass(this.$$element,Zo))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,Wo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Wo),this.$$animate.addClass(this.$$element,Ho),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Yo,Go)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Go,Yo)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!P(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,(function(t){r||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==i&&o.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var i,r,o,s,a=this.$$currentValidationRunId,l=this;function c(t,e){a===l.$$currentValidationRunId&&l.$setValidity(t,e)}function u(t){a===l.$$currentValidationRunId&&n(t)}s=l.$$parserName,(L(l.$$parserValid)?(c(s,null),1):(l.$$parserValid||(A(l.$validators,(function(t,e){c(e,null)})),A(l.$asyncValidators,(function(t,e){c(e,null)}))),c(s,l.$$parserValid),l.$$parserValid))?(o=!0,A(l.$validators,(function(n,i){var r=Boolean(n(t,e));o=o&&r,c(i,r)})),!o&&(A(l.$asyncValidators,(function(t,e){c(e,null)})),1)?u(!1):(i=[],r=!0,A(l.$asyncValidators,(function(n,o){var s=n(t,e);if(!K(s))throw Xo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);c(o,void 0),i.push(s.then((function(){c(o,!0)}),(function(){r=!1,c(o,!1)})))})),i.length?l.$$q.all(i).then((function(){u(r)}),I):u(!0))):u(!1)},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!L(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(L(t=this.$parsers[n](t))){this.$$parserValid=!1;break}P(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==i&&e.$$writeModelToScope()}this.$$rawModelValue=t,r&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){r||(e.$modelValue=n?t:void 0,o())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),A(this.$viewChangeListeners,(function(t){try{t()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");U(e[t])?e=e[t]:U(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:U(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Zr({clazz:Ko,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Qo,ts=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ko,priority:1,compile:function(e){return e.addClass(Wo).addClass(Yo).addClass(Uo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm,s=i[2];s&&(r.$options=s.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",(function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)})),t.$on("$destroy",(function(){r.$$parentForm.$removeControl(r)}))},post:function(e,n,i,r){var o=r[0];function s(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",(function(){o.$touched||(t.$$phase?e.$evalAsync(s):e.$apply(s))}))}}}}}],es=/(\s+|^)default(\s+|$)/;function ns(t){this.$$options=t}ns.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return A(t=M({},t),(function(n,i){"$inherit"===n?"*"===i?e=!0:(t[i]=this.$$options[i],"updateOn"===i&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===i&&(t.updateOnDefault=!1,t[i]=tt(n.replace(es,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],rs(t,this.$$options)),rs(t,Qo.$$options),new ns(t)}},Qo=new ns({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var is=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Qo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function rs(t,e){A(e,(function(e,n){D(t[n])||(t[n]=e)}))}var os=Dr({terminal:!0,priority:1e3}),ss=r("ngOptions"),as=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ls=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=I},post:function(t,a,l,c){for(var u=c[0],h=c[1],m=l.multiple,p=0,d=a.children(),f=d.length;p<f;p++)if(""===d[p].value){u.hasEmptyOption=!0,u.emptyOption=d.eq(p);break}a.empty();var y,_=!!u.emptyOption;s(r.cloneNode(!1)).val("?");var g=function(t,e,n){var r=t.match(as);if(!r)throw ss("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,xt(e));var o=r[5]||r[7],s=r[6],a=/ as /.test(r[0])&&r[1],l=r[9],c=i(r[2]?r[1]:o),u=a&&i(a)||c,h=l&&i(l),m=l?function(t,e){return h(n,e)}:function(t){return De(t)},p=function(t,e){return m(t,v(t,e))},d=i(r[2]||r[1]),f=i(r[3]||""),y=i(r[4]||""),_=i(r[8]),g={},v=s?function(t,e){return g[s]=e,g[o]=t,g}:function(t){return g[o]=t,g};function b(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function x(t){var e;if(!s&&$(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:p,getWatchables:i(_,(function(t){for(var e=[],i=x(t=t||[]),o=i.length,s=0;s<o;s++){var a=t===i?s:i[s],l=t[a],c=v(l,a),u=m(l,c);if(e.push(u),r[2]||r[1]){var h=d(n,c);e.push(h)}if(r[4]){var p=y(n,c);e.push(p)}}return e})),getOptions:function(){for(var t=[],e={},i=_(n)||[],r=x(i),o=r.length,s=0;s<o;s++){var a=i===r?s:r[s],c=i[a],h=v(c,a),g=u(n,h),$=m(g,h),A=new b($,g,d(n,h),f(n,h),y(n,h));t.push(A),e[$]=A}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return l?st(t.viewValue):t.viewValue}}}}}(l.ngOptions,a,t),v=n[0].createDocumentFragment();function b(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function x(t){var e=y.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}u.generateUnknownOptionValue=function(t){return"?"},m?(u.writeValue=function(t){if(y){var e=t&&t.map(x)||[];y.items.forEach((function(t){t.element.selected&&!rt(e,t)&&(t.element.selected=!1)}))}},u.readValue=function(){var t=a.val()||[],e=[];return A(t,(function(t){var n=y.selectValueMap[t];n&&!n.disabled&&e.push(y.getViewValueFromOption(n))})),e},g.trackBy&&t.$watchCollection((function(){if(W(h.$viewValue))return h.$viewValue.map((function(t){return g.getTrackByValue(t)}))}),(function(){h.$render()}))):(u.writeValue=function(t){if(y){var e=a[0].options[a[0].selectedIndex],n=y.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(u.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):u.selectUnknownOrEmptyOption(t)}},u.readValue=function(){var t=y.selectValueMap[a.val()];return t&&!t.disabled?(u.unselectEmptyOption(),u.removeUnknownOption(),y.getViewValueFromOption(t)):null},g.trackBy&&t.$watch((function(){return g.getTrackByValue(h.$viewValue)}),(function(){h.$render()}))),_&&(e(u.emptyOption)(t),a.prepend(u.emptyOption),8===u.emptyOption[0].nodeType?(u.hasEmptyOption=!1,u.registerOption=function(t,e){""===e.val()&&(u.hasEmptyOption=!0,u.emptyOption=e,u.emptyOption.removeClass("ng-scope"),h.$render(),e.on("$destroy",(function(){var t=u.$isEmptyOptionSelected();u.hasEmptyOption=!1,u.emptyOption=void 0,t&&h.$render()})))}):u.emptyOption.removeClass("ng-scope")),t.$watchCollection(g.getWatchables,(function(){var t=y&&u.readValue();if(y)for(var e=y.items.length-1;e>=0;e--){var n=y.items[e];D(n.group)?Me(n.element.parentNode):Me(n.element)}y=g.getOptions();var i={};if(y.items.forEach((function(t){var e;D(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),v.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),b(t,e)):b(t,v)})),a[0].appendChild(v),h.$render(),!h.$isEmpty(t)){var r=u.readValue();(g.trackBy||m?lt(t,r):t===r)||(h.$setViewValue(r),h.$render())}}))}}}}],cs=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(o,s,a){var l,c=a.count,u=a.$attr.when&&s.attr(a.$attr.when),h=a.offset||0,p=o.$eval(u)||{},d={},f=e.startSymbol(),y=e.endSymbol(),_=f+c+"-"+h+y,g=b.noop;function v(t){s.text(t||"")}A(a,(function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+m(n[2]);p[i]=s.attr(a.$attr[e])}})),A(p,(function(t,n){d[n]=e(t.replace(i,_))})),o.$watch(c,(function(e){var i=parseFloat(e),r=P(i);if(r||i in p||(i=t.pluralCat(i-h)),!(i===l||r&&P(l))){g();var s=d[i];L(s)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+u),g=I,v()):g=o.$watch(s,v),l=i}}))}}}],us=r("ngRef"),hs=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var i=xn(it(e)),r=t(n.ngRef),o=r.assign||function(){throw us("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,s){var a;if(s.hasOwnProperty("ngRefRead")){if("$element"===s.ngRefRead)a=e;else if(!(a=e.data("$"+s.ngRefRead+"Controller")))throw us("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',s.ngRefRead,n.ngRef)}else a=e.data("$"+i+"Controller");o(t,a=a||e),e.on("$destroy",(function(){r(t)===a&&o(t,null)}))}}}}],ms=["$parse","$animate","$compile",function(t,e,n){var i="$$NG_REMOVED",o=r("ngRepeat"),s=function(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]},c=function(t,e,n){return De(n)},u=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,m){var p=m.ngRepeat,d=n.$$createComment("end ngRepeat",p),f=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var y=f[1],_=f[2],g=f[3],v=f[4];if(!(f=y.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",y);var b,x=f[3]||f[1],w=f[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);if(v){var B={$id:De},C=t(v);b=function(t,e,n,i){return w&&(B[w]=e),B[x]=n,B.$index=i,C(t,B)}}return function(t,n,r,m,f){var y=Ot();t.$watchCollection(_,(function(r){var m,_,v,C,S,E,M,T,k,P,z,I,F=n[0],V=Ot();if(g&&(t[g]=r),$(r))k=r,T=b||c;else for(var j in T=b||u,k=[],r)h.call(r,j)&&"$"!==j.charAt(0)&&k.push(j);for(C=k.length,z=new Array(C),m=0;m<C;m++)if(S=r===k?m:k[m],E=r[S],M=T(t,S,E,m),y[M])P=y[M],delete y[M],V[M]=P,z[m]=P;else{if(V[M])throw A(z,(function(t){t&&t.scope&&(y[t.id]=t)})),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,M,E);z[m]={id:M,scope:void 0,clone:void 0},V[M]=!0}for(var L in B&&(B[x]=void 0),y){if(I=Dt((P=y[L]).clone),e.leave(I),I[0].parentNode)for(m=0,_=I.length;m<_;m++)I[m][i]=!0;P.scope.$destroy()}for(m=0;m<C;m++)if(S=r===k?m:k[m],E=r[S],(P=z[m]).scope){v=F;do{v=v.nextSibling}while(v&&v[i]);a(P)!==v&&e.move(Dt(P.clone),null,F),F=l(P),s(P.scope,m,x,E,w,S,C)}else f((function(t,n){P.scope=n;var i=d.cloneNode(!1);t[t.length++]=i,e.enter(t,null,F),F=i,P.clone=t,V[P.id]=P,s(P.scope,m,x,E,w,S,C)}));y=V}))}}}}],ps="ng-hide",ds="ng-hide-animate",fs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,(function(e){t[e?"removeClass":"addClass"](n,ps,{tempClasses:ds})}))}}}],ys=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,(function(e){t[e?"addClass":"removeClass"](n,ps,{tempClasses:ds})}))}}}],_s=Dr((function(t,e,n){t.$watchCollection(n.ngStyle,(function(t,n){n&&t!==n&&A(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}))})),gs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var s=r.ngSwitch||r.on,a=[],l=[],c=[],u=[],h=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(s,(function(n){for(var i,r;c.length;)t.cancel(c.pop());for(i=0,r=u.length;i<r;++i){var s=Dt(l[i].clone);u[i].$destroy(),(c[i]=t.leave(s)).done(h(c,i))}l.length=0,u.length=0,(a=o.cases["!"+n]||o.cases["?"])&&A(a,(function(n){n.transclude((function(i,r){u.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:i};l.push(s),t.enter(i,o.parent(),o)}))}))}))}}}],vs=Dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){var o=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t}));A(o,(function(t){i.cases["!"+t]=i.cases["!"+t]||[],i.cases["!"+t].push({transclude:r,element:e})}))}}),bs=Dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),xs=r("ngTransclude"),$s=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw xs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",xt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var s=i.ngTransclude||i.ngTranscludeSlot;function a(){n(t,(function(t){e.append(t)}))}o((function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.nodeType!==qt||i.nodeValue.trim())return!0}}(t)?e.append(t):(a(),n.$destroy())}),null,s),s&&!o.isSlotFilled(s)&&a()}}}}],As=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],ws={$setViewValue:I,$render:I};function Bs(t,e){t.prop("selected",e),t.attr("selected",e)}var Cs=["$element","$scope",function(e,n){var i=this,r=new qe;i.selectValueMap={},i.ngModelCtrl=ws,i.multiple=!1,i.unknownOption=s(t.document.createElement("option")),i.hasEmptyOption=!1,i.emptyOption=void 0,i.renderUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),e.prepend(i.unknownOption),Bs(i.unknownOption,!0),e.val(n)},i.updateUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),Bs(i.unknownOption,!0),e.val(n)},i.generateUnknownOptionValue=function(t){return"? "+De(t)+" ?"},i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.selectEmptyOption=function(){i.emptyOption&&(e.val(""),Bs(i.emptyOption,!0))},i.unselectEmptyOption=function(){i.hasEmptyOption&&Bs(i.emptyOption,!1)},n.$on("$destroy",(function(){i.renderUnknownOption=I})),i.readValue=function(){var t=e.val(),n=t in i.selectValueMap?i.selectValueMap[t]:t;return i.hasOption(n)?n:null},i.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&Bs(s(n),!1),i.hasOption(t)){i.removeUnknownOption();var r=De(t);e.val(r in i.selectValueMap?r:t);var o=e[0].options[e[0].selectedIndex];Bs(s(o),!0)}else i.selectUnknownOrEmptyOption(t)},i.addOption=function(t,e){if(8!==e[0].nodeType){Lt(t,'"option value"'),""===t&&(i.hasEmptyOption=!0,i.emptyOption=e);var n=r.get(t)||0;r.set(t,n+1),a()}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.delete(t),""===t&&(i.hasEmptyOption=!1,i.emptyOption=void 0)):r.set(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.$hasEmptyOption=function(){return i.hasEmptyOption},i.$isUnknownOptionSelected=function(){return e[0].options[0]===i.unknownOption[0]},i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&e[0].options[e[0].selectedIndex]===i.emptyOption[0]},i.selectUnknownOrEmptyOption=function(t){null==t&&i.emptyOption?(i.removeUnknownOption(),i.selectEmptyOption()):i.unknownOption.parent().length?i.updateUnknownOption(t):i.renderUnknownOption(t)};var o=!1;function a(){o||(o=!0,n.$$postDigest((function(){o=!1,i.ngModelCtrl.$render()})))}var l=!1;function c(t){l||(l=!0,n.$$postDigest((function(){n.$$destroyed||(l=!1,i.ngModelCtrl.$setViewValue(i.readValue()),t&&i.ngModelCtrl.$render())})))}i.registerOption=function(t,e,n,r,o){var s,l;n.$attr.ngValue?n.$observe("value",(function(t){var n,r=e.prop("selected");D(l)&&(i.removeOption(s),delete i.selectValueMap[l],n=!0),l=De(t),s=t,i.selectValueMap[l]=t,i.addOption(t,e),e.attr("value",l),n&&r&&c()})):r?n.$observe("value",(function(t){var n;i.readValue();var r=e.prop("selected");D(s)&&(i.removeOption(s),n=!0),s=t,i.addOption(t,e),n&&r&&c()})):o?t.$watch(o,(function(t,r){n.$set("value",t);var o=e.prop("selected");r!==t&&i.removeOption(r),i.addOption(t,e),r&&o&&c()})):i.addOption(n.value,e),n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(i.multiple?c(!0):(i.ngModelCtrl.$setViewValue(null),i.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=i.readValue(),e=n.value;i.removeOption(e),a(),(i.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)}))}}],Ss=function(){return{restrict:"E",require:["select","?ngModel"],controller:Cs,priority:1,link:{pre:function(t,e,n,i){var r=i[0],o=i[1];if(o){if(r.ngModelCtrl=o,e.on("change",(function(){r.removeUnknownOption(),t.$apply((function(){o.$setViewValue(r.readValue())}))})),n.multiple){r.multiple=!0,r.readValue=function(){var t=[];return A(e.find("option"),(function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in r.selectValueMap?r.selectValueMap[n]:n)}})),t},r.writeValue=function(t){A(e.find("option"),(function(e){var n=!!t&&(rt(t,e.value)||rt(t,r.selectValueMap[e.value]));n!==e.selected&&Bs(s(e),n)}))};var a,l=NaN;t.$watch((function(){l!==o.$viewValue||lt(a,o.$viewValue)||(a=Ut(o.$viewValue),o.$render()),l=o.$viewValue})),o.$isEmpty=function(t){return!t||0===t.length}}}else r.registerOption=I},post:function(t,e,n,i){var r=i[1];if(r){var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}}},Es=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var i,r;return D(n.ngValue)||(D(n.value)?i=t(n.value,!0):(r=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o="$selectController",s=e.parent(),a=s.data(o)||s.parent().data(o);a&&a.registerOption(t,e,n,i,r)}}}}],Ms=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,i,r){if(r){var o=i.hasOwnProperty("required")||t(i.ngRequired)(e);i.ngRequired||(i.required=!0),r.$validators.required=function(t,e){return!o||!r.$isEmpty(e)},i.$observe("required",(function(t){o!==t&&(o=t,r.$validate())}))}}}}],Ts=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,n){var i,r;return n.ngPattern&&(i=n.ngPattern,r="/"===n.ngPattern.charAt(0)&&c.test(n.ngPattern)?function(){return n.ngPattern}:t(n.ngPattern)),function(t,e,n,o){if(o){var s=n.pattern;n.ngPattern?s=r(t):i=n.pattern;var a=zs(s,i,e);n.$observe("pattern",(function(t){var n=a;a=zs(t,i,e),(n&&n.toString())!==(a&&a.toString())&&o.$validate()})),o.$validators.pattern=function(t,e){return o.$isEmpty(e)||L(a)||a.test(e)}}}}}}],ks=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,i,r){if(r){var o=i.maxlength||t(i.ngMaxlength)(e),s=Is(o);i.$observe("maxlength",(function(t){o!==t&&(s=Is(t),o=t,r.$validate())})),r.$validators.maxlength=function(t,e){return s<0||r.$isEmpty(e)||e.length<=s}}}}}],Ps=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,i,r){if(r){var o=i.minlength||t(i.ngMinlength)(e),s=Is(o)||-1;i.$observe("minlength",(function(t){o!==t&&(s=Is(t)||-1,o=t,r.$validate())})),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=s}}}}}];function zs(t,e,n){if(t){if(q(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,xt(n));return t}}function Is(t){var e=k(t);return P(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(function(){var e;if(!It){var n=ut();(a=L(n)?t.jQuery:n?t[n]:void 0)&&a.fn.on?(s=a,M(a.fn,{scope:ke.scope,isolateScope:ke.isolateScope,controller:ke.controller,injector:ke.injector,inheritedData:ke.inheritedData})):s=pe,e=s.cleanData,s.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=(s._data(i)||{}).events)&&n.$destroy&&s(i).triggerHandler("$destroy");e(t)},b.element=s,It=!0}}(),function(e){M(e,{errorHandlingConfig:n,bootstrap:Mt,copy:st,extend:M,merge:T,equals:lt,element:s,forEach:A,injector:Ke,noop:I,bind:pt,toJson:ft,fromJson:yt,identity:F,isUndefined:L,isDefined:D,isString:q,isFunction:Y,isObject:O,isNumber:U,isElement:nt,isArray:W,version:Wt,isDate:N,callbacks:{$$counter:0},getTestability:kt,reloadWithDebugInfo:Tt,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Ft,$$minErr:r,$$csp:ct,$$encodeUriSegment:wt,$$encodeUriQuery:Bt,$$lowercase:m,$$stringify:Rt,$$uppercase:p}),l=function(t){var e=r("$injector"),n=r("ng");function i(t,e,n){return t[e]||(t[e]=n())}var o=i(t,"angular",Object);return o.$$minErr=o.$$minErr||r,i(o,"module",(function(){var t={};return function(r,o,s){var a={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(r),o&&t.hasOwnProperty(r)&&(t[r]=null),i(t,r,(function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],l=[],c=h("$injector","invoke","push",i),u={_invokeQueue:t,_configBlocks:i,_runBlocks:l,info:function(t){if(D(t)){if(!O(t))throw n("aobj","Argument '{0}' must be an object","value");return a=t,this}return a},requires:o,name:r,provider:m("$provide","provider"),factory:m("$provide","factory"),service:m("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:m("$provide","decorator",i),animation:m("$animateProvider","register"),filter:m("$filterProvider","register"),controller:m("$controllerProvider","register"),directive:m("$compileProvider","directive"),component:m("$compileProvider","component"),config:c,run:function(t){return l.push(t),this}};return s&&c(s),u;function h(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),u}}function m(e,n,i){return i||(i=t),function(t,o){return o&&Y(o)&&(o.$$moduleName=r),i.push([e,n,arguments]),u}}}))}}))}(t),l("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Wi}),t.provider("$compile",_n).directive({a:Or,input:xo,textarea:xo,form:Yr,script:As,select:Ss,option:Es,ngBind:Bo,ngBindHtml:So,ngBindTemplate:Co,ngClass:To,ngClassEven:Po,ngClassOdd:ko,ngCloak:zo,ngController:Io,ngForm:Gr,ngHide:ys,ngIf:Lo,ngInclude:Do,ngInit:Ro,ngNonBindable:os,ngPluralize:cs,ngRef:hs,ngRepeat:ms,ngShow:fs,ngStyle:_s,ngSwitch:gs,ngSwitchWhen:vs,ngSwitchDefault:bs,ngOptions:ls,ngTransclude:$s,ngModel:ts,ngList:qo,ngChange:Eo,pattern:Ts,ngPattern:Ts,required:Ms,ngRequired:Ms,minlength:Ps,ngMinlength:Ps,maxlength:ks,ngMaxlength:ks,ngValue:wo,ngModelOptions:is}).directive({ngInclude:Oo,input:$o}).directive(Rr).directive(Fo),t.provider({$anchorScroll:Qe,$animate:an,$animateCss:un,$$animateJs:on,$$animateQueue:sn,$$AnimateRunner:cn,$$animateAsyncRun:ln,$browser:mn,$cacheFactory:pn,$controller:Sn,$document:En,$$isDocumentHidden:Mn,$exceptionHandler:Tn,$filter:yr,$$forceReflow:kn,$interpolate:Zn,$interval:Kn,$$intervalFactory:Qn,$http:Hn,$httpParamSerializer:Dn,$httpParamSerializerJQLike:On,$httpBackend:Gn,$xhrFactory:Yn,$jsonpCallbacks:ti,$location:_i,$log:gi,$parse:Vi,$rootScope:Ni,$q:ji,$$q:Li,$sce:Ki,$sceDelegate:Xi,$sniffer:Qi,$$taskTrackerFactory:tr,$templateCache:dn,$templateRequest:ir,$$testability:rr,$timeout:sr,$window:pr,$$rAF:Ui,$$jqLite:Le,$$Map:Ue,$$cookieReader:fr})}]).info({angularVersion:"1.8.2"})}(b),b.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,i){var r=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,i);return 1==r&&0==o.v?e:n}})}]),s((function(){Et(t.document,Mt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}')),t("a",angular),function(t){var e;e=()=>{const t="object"==typeof window?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let e=null,n=!1;const i=t.WebStreamsPolyfill||{},r=t.isSecureContext;let o=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=r||"MozAppearance"in document.documentElement.style?"iframe":"navigate",a={createWriteStream:function(i,c,u){let h={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},m=0,p=null,d=null,f=null;if(Number.isFinite(c)?([u,c]=[c,u],console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):c&&c.highWaterMark?(console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):h=c||{},!o){e||(e=r?l(a.mitm):function(e){const n="width=200,height=100",i=document.createDocumentFragment(),r={frame:t.open(e,"popup",n),loaded:!1,isIframe:!1,isPopup:!0,remove(){r.frame.close()},addEventListener(...t){i.addEventListener(...t)},dispatchEvent(...t){i.dispatchEvent(...t)},removeEventListener(...t){i.removeEventListener(...t)},postMessage(...t){r.frame.postMessage(...t)}},o=e=>{e.source===r.frame&&(r.loaded=!0,t.removeEventListener("message",o),r.dispatchEvent(new Event("load")))};return t.addEventListener("message",o),r}(a.mitm)),d=new MessageChannel,i=encodeURIComponent(i.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const o={transferringReadable:n,pathname:h.pathname||Math.random().toString().slice(-6)+"/"+i,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+i}};h.size&&(o.headers["Content-Length"]=h.size);const c=[o,"*",[d.port2]];if(n){const t="iframe"===s?void 0:{transform(t,e){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");m+=t.length,e.enqueue(t),p&&(location.href=p,p=null)},flush(){p&&(location.href=p)}};f=new a.TransformStream(t,h.writableStrategy,h.readableStrategy);const e=f.readable;d.port1.postMessage({readableStream:e},[e])}d.port1.onmessage=t=>{t.data.download&&("navigate"===s?(e.remove(),e=null,m?location.href=t.data.download:p=t.data.download):(e.isPopup&&(e.remove(),e=null,"iframe"===s&&l(a.mitm)),l(t.data.download)))},e.loaded?e.postMessage(...c):e.addEventListener("load",(()=>{e.postMessage(...c)}),{once:!0})}let y=[];return!o&&f&&f.writable||new a.WritableStream({write(t){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");o?y.push(t):(d.port1.postMessage(t),m+=t.length,p&&(location.href=p,p=null))},close(){if(o){const t=new Blob(y,{type:"application/octet-stream; charset=utf-8"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=i,e.click()}else d.port1.postMessage("end")},abort(){y=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},h.writableStrategy)},WritableStream:t.WritableStream||i.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function l(t){if(!t)throw new Error("meh");const e=document.createElement("iframe");return e.hidden=!0,e.src=t,e.loaded=!1,e.name="iframe",e.isIframe=!0,e.postMessage=(...t)=>e.contentWindow.postMessage(...t),e.addEventListener("load",(()=>{e.loaded=!0}),{once:!0}),document.body.appendChild(e),e}try{new Response(new ReadableStream),r&&!("serviceWorker"in navigator)&&(o=!0)}catch(c){o=!0}return(t=>{try{t()}catch(e){}})((()=>{const{readable:t}=new TransformStream,e=new MessageChannel;e.port1.postMessage(t,[t]),e.port1.close(),e.port2.close(),n=!0,Object.defineProperty(a,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})})),a},t.exports=e()}(t("S",{exports:{}}));const r=[0,0];function o(t,e,n,i){return r[0]=n<0?O(t,-n):t,r[1]=i<0?O(e,-i):e,r}function s(t,e,n,i){let r,s,a,l=w(t),c=10==n?B:C;return t==e&&(-1==l?(t*=n,e/=n):(t/=n,e*=n)),i?(r=g(c(t)),s=b(c(e)),a=o(A(n,r),A(n,s),r,s),t=a[0],e=a[1]):(r=g(c(_(t))),s=g(c(_(e))),a=o(A(n,r),A(n,s),r,s),t=D(t,a[0]),e=L(e,a[1])),[t,e]}function a(t,e,n,i){let r=s(t,e,n,i);return 0==t&&(r[0]=0),0==e&&(r[1]=0),r}const l={mode:3,pad:.1},c={pad:0,soft:null,mode:0},u={min:c,max:c};function h(t,e,n,i){return J(n)?p(t,e,n):(c.pad=n,c.soft=i?0:null,c.mode=i?3:0,p(t,e,u))}function m(t,e){return null==t?e:t}function p(t,e,n){let i=n.min,r=n.max,o=m(i.pad,0),s=m(r.pad,0),a=m(i.hard,-E),l=m(r.hard,E),c=m(i.soft,E),u=m(r.soft,-E),h=m(i.mode,0),p=m(r.mode,0),d=e-t;d<1e-9&&(d=0,0!=t&&0!=e||(d=1e-9,2==h&&c!=E&&(o=0),2==p&&u!=-E&&(s=0)));let f=d||_(e)||1e3,y=B(f),v=A(10,g(y)),b=O(D(t-f*(0==d?0==t?.1:1:o),v/10),9),w=t>=c&&(1==h||3==h&&b<=c||2==h&&b>=c)?c:E,C=$(a,b<w&&t>=w?w:x(w,b)),S=O(L(e+f*(0==d?0==e?.1:1:s),v/10),9),M=e<=u&&(1==p||3==p&&S>=u||2==p&&S<=u)?u:-E,T=x(l,S>M&&e<=M?M:$(M,S));return C==T&&0==C&&(T=100),[C,T]}const d=new Intl.NumberFormat(navigator.language).format,f=Math,y=f.PI,_=f.abs,g=f.floor,v=f.round,b=f.ceil,x=f.min,$=f.max,A=f.pow,w=f.sign,B=f.log10,C=f.log2,S=(t,e=1)=>f.asinh(t/e),E=1/0;function M(t){return 1+(0|B((t^t>>31)-(t>>31)))}function T(t,e){return v(t/e)*e}function k(t,e,n){return x($(t,e),n)}function P(t){return"function"==typeof t?t:()=>t}const z=t=>t,I=(t,e)=>e,F=t=>null,V=t=>!0,j=(t,e)=>t==e;function L(t,e){return b(t/e)*e}function D(t,e){return g(t/e)*e}function O(t,e){return v(t*(e=10**e))/e}const R=new Map;function q(t){return((""+t).split(".")[1]||"").length}function U(t,e,n,i){let r=[],o=i.map(q);for(let s=e;s<n;s++){let e=_(s),n=O(A(t,s),e);for(let t=0;t<i.length;t++){let a=i[t]*n,l=(a>=0&&s>=0?0:e)+(s>=o[t]?0:o[t]),c=O(a,l);r.push(c),R.set(c,l)}}return r}const N={},W=[],H=[null,null],Y=Array.isArray;function G(t){return"string"==typeof t}function J(t){let e=!1;if(null!=t){let n=t.constructor;e=null==n||n==Object}return e}function Z(t){return null!=t&&"object"==typeof t}function X(t,e=J){let n;if(Y(t)){let i=t.find((t=>null!=t));if(Y(i)||e(i)){n=Array(t.length);for(let i=0;i<t.length;i++)n[i]=X(t[i],e)}else n=t.slice()}else if(e(t)){n={};for(let i in t)n[i]=X(t[i],e)}else n=t;return n}function K(t){let e=arguments;for(let n=1;n<e.length;n++){let i=e[n];for(let e in i)J(t[e])?K(t[e],X(i[e])):t[e]=X(i[e])}return t}function Q(t,e,n){for(let i,r=0,o=-1;r<e.length;r++){let s=e[r];if(s>o){for(i=s-1;i>=0&&null==t[i];)t[i--]=null;for(i=s+1;i<n&&null==t[i];)t[o=i++]=null}}}const tt="undefined"==typeof queueMicrotask?t=>Promise.resolve().then(t):queueMicrotask,et="width",nt="height",it="top",rt="bottom",ot="left",st="right",at="#000",lt="mousemove",ct="mousedown",ut="mouseup",ht="mouseenter",mt="mouseleave",pt="dblclick",dt="change",ft="dppxchange",yt="u-off",_t="u-label",gt=document,vt=window;let bt,xt;function $t(t,e){if(null!=e){let n=t.classList;!n.contains(e)&&n.add(e)}}function At(t,e){let n=t.classList;n.contains(e)&&n.remove(e)}function wt(t,e,n){t.style[e]=n+"px"}function Bt(t,e,n,i){let r=gt.createElement(t);return null!=e&&$t(r,e),null!=n&&n.insertBefore(r,i),r}function Ct(t,e){return Bt("div",t,e)}const St=new WeakMap;function Et(t,e,n,i,r){let o="translate("+e+"px,"+n+"px)";o!=St.get(t)&&(t.style.transform=o,St.set(t,o),e<0||n<0||e>i||n>r?$t(t,yt):At(t,yt))}const Mt=new WeakMap;function Tt(t,e,n){let i=e+n;i!=Mt.get(t)&&(Mt.set(t,i),t.style.background=e,t.style.borderColor=n)}const kt=new WeakMap;function Pt(t,e,n,i){let r=e+""+n;r!=kt.get(t)&&(kt.set(t,r),t.style.height=n+"px",t.style.width=e+"px",t.style.marginLeft=i?-e/2+"px":0,t.style.marginTop=i?-n/2+"px":0)}const zt={passive:!0},It=K({capture:!0},zt);function Ft(t,e,n,i){e.addEventListener(t,n,i?It:zt)}function Vt(t,e,n,i){e.removeEventListener(t,n,i?It:zt)}!function t(){let e=devicePixelRatio;bt!=e&&(bt=e,xt&&Vt(dt,xt,t),xt=matchMedia(`(min-resolution: ${bt-.001}dppx) and (max-resolution: ${bt+.001}dppx)`),Ft(dt,xt,t),vt.dispatchEvent(new CustomEvent(ft)))}();const jt=["January","February","March","April","May","June","July","August","September","October","November","December"],Lt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Dt(t){return t.slice(0,3)}const Ot=Lt.map(Dt),Rt=jt.map(Dt),qt={MMMM:jt,MMM:Rt,WWWW:Lt,WWW:Ot};function Ut(t){return(t<10?"0":"")+t}const Nt={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>Ut(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>Ut(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>Ut(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return 0==e?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>Ut(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>Ut(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>{return((e=t.getMilliseconds())<10?"00":e<100?"0":"")+e;var e}};function Wt(t,e){e=e||qt;let n,i=[],r=/\{([a-z]+)\}|[^{]+/gi;for(;n=r.exec(t);)i.push("{"==n[0][0]?Nt[n[1]]:n[0]);return t=>{let n="";for(let r=0;r<i.length;r++)n+="string"==typeof i[r]?i[r]:i[r](t,e);return n}}const Ht=(new Intl.DateTimeFormat).resolvedOptions().timeZone,Yt=t=>t%1==0,Gt=[1,2,2.5,5],Jt=U(10,-16,0,Gt),Zt=U(10,0,16,Gt),Xt=Zt.filter(Yt),Kt=Jt.concat(Zt),Qt="{YYYY}",te="\n"+Qt,ee="{M}/{D}",ne="\n"+ee,ie=ne+"/{YY}",re="{aa}",oe="{h}:{mm}"+re,se="\n"+oe,ae=":{ss}",le=null;function ce(t){let e=1e3*t,n=60*e,i=60*n,r=24*i,o=30*r,s=365*r;return[(1==t?U(10,0,3,Gt).filter(Yt):U(10,-3,0,Gt)).concat([e,5*e,10*e,15*e,30*e,n,5*n,10*n,15*n,30*n,i,2*i,3*i,4*i,6*i,8*i,12*i,r,2*r,3*r,4*r,5*r,6*r,7*r,8*r,9*r,10*r,15*r,o,2*o,3*o,4*o,6*o,s,2*s,5*s,10*s,25*s,50*s,100*s]),[[s,Qt,le,le,le,le,le,le,1],[28*r,"{MMM}",te,le,le,le,le,le,1],[r,ee,te,le,le,le,le,le,1],[i,"{h}"+re,ie,le,ne,le,le,le,1],[n,oe,ie,le,ne,le,le,le,1],[e,ae,ie+" "+oe,le,ne+" "+oe,le,se,le,1],[t,ae+".{fff}",ie+" "+oe,le,ne+" "+oe,le,se,le,1]],function(e){return(a,l,c,u,h,m)=>{let p=[],d=h>=s,f=h>=o&&h<s,y=e(c),_=O(y*t,3),b=ge(y.getFullYear(),d?0:y.getMonth(),f||d?1:y.getDate()),x=O(b*t,3);if(f||d){let n=f?h/o:0,i=d?h/s:0,r=_==x?_:O(ge(b.getFullYear()+i,b.getMonth()+n,1)*t,3),a=new Date(v(r/t)),l=a.getFullYear(),c=a.getMonth();for(let o=0;r<=u;o++){let s=ge(l+i*o,c+n*o,1),a=s-e(O(s*t,3));r=O((+s+a)*t,3),r<=u&&p.push(r)}}else{let o=h>=r?r:h,s=x+(g(c)-g(_))+L(_-x,o);p.push(s);let d=e(s),f=d.getHours()+d.getMinutes()/n+d.getSeconds()/i,y=h/i,v=m/a.axes[l]._space;for(;s=O(s+h,1==t?0:3),!(s>u);)if(y>1){let t=g(O(f+y,6))%24,n=e(s).getHours()-t;n>1&&(n=-1),s-=n*i,f=(f+y)%24,O((s-p[p.length-1])/h,3)*v>=.7&&p.push(s)}else p.push(s)}return p}}]}const[ue,he,me]=ce(1),[pe,de,fe]=ce(.001);function ye(t,e){return t.map((t=>t.map(((n,i)=>0==i||8==i||null==n?n:e(1==i||0==t[8]?n:t[1]+n)))))}function _e(t,e){return(n,i,r,o,s)=>{let a,l,c,u,h,m,p=e.find((t=>s>=t[0]))||e[e.length-1];return i.map((e=>{let n=t(e),i=n.getFullYear(),r=n.getMonth(),o=n.getDate(),s=n.getHours(),d=n.getMinutes(),f=n.getSeconds(),y=i!=a&&p[2]||r!=l&&p[3]||o!=c&&p[4]||s!=u&&p[5]||d!=h&&p[6]||f!=m&&p[7]||p[1];return a=i,l=r,c=o,u=s,h=d,m=f,y(n)}))}}function ge(t,e,n){return new Date(t,e,n)}function ve(t,e){return e(t)}function be(t,e){return(n,i)=>e(t(i))}U(2,-53,53,[1]);const xe={show:!0,live:!0,isolate:!1,markers:{show:!0,width:2,stroke:function(t,e){let n=t.series[e];return n.width?n.stroke(t,e):n.points.width?n.points.stroke(t,e):null},fill:function(t,e){return t.series[e].fill(t,e)},dash:"solid"},idx:null,idxs:null,values:[]},$e=[0,0];function Ae(t,e,n){return t=>{0==t.button&&n(t)}}function we(t,e,n){return n}const Be={show:!0,x:!0,y:!0,lock:!1,move:function(t,e,n){return $e[0]=e,$e[1]=n,$e},points:{show:function(t,e){let n=t.cursor.points,i=Ct(),r=n.size(t,e);wt(i,et,r),wt(i,nt,r);let o=r/-2;wt(i,"marginLeft",o),wt(i,"marginTop",o);let s=n.width(t,e,r);return s&&wt(i,"borderWidth",s),i},size:function(t,e){return Ue(t.series[e].points.width,1)},width:0,stroke:function(t,e){let n=t.series[e].points;return n._stroke||n._fill},fill:function(t,e){let n=t.series[e].points;return n._fill||n._stroke}},bind:{mousedown:Ae,mouseup:Ae,click:Ae,dblclick:Ae,mousemove:we,mouseleave:we,mouseenter:we},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},left:-10,top:-10,idx:null,dataIdx:function(t,e,n){return n},idxs:null},Ce={show:!0,stroke:"rgba(0,0,0,0.07)",width:2,filter:I},Se=K({},Ce,{size:10}),Ee='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Me="bold "+Ee,Te={show:!0,scale:"x",stroke:at,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Me,side:2,grid:Ce,ticks:Se,font:Ee,rotate:0},ke={show:!0,scale:"x",auto:!1,sorted:1,min:E,max:-E,idxs:[]};function Pe(t,e,n,i,r){return e.map((t=>null==t?"":d(t)))}function ze(t,e,n,i,r,o,s){let a=[],l=R.get(r)||0;for(let c=n=s?n:O(L(n,r),l);c<=i;c=O(c+r,l))a.push(Object.is(c,-0)?0:c);return a}function Ie(t,e,n,i,r,o,s){const a=[],l=t.scales[t.axes[e].scale].log,c=g((10==l?B:C)(n));r=A(l,c),c<0&&(r=O(r,-c));let u=n;do{a.push(u),u=O(u+r,R.get(r)),u>=r*l&&(r=u)}while(u<=i);return a}function Fe(t,e,n,i,r,o,s){let a=t.scales[t.axes[e].scale].asinh,l=i>a?Ie(t,e,$(a,n),i,r):[a],c=i>=0&&n<=0?[0]:[];return(n<-a?Ie(t,e,$(a,-i),-n,r):[a]).reverse().map((t=>-t)).concat(c,l)}const Ve=/./,je=/[12357]/,Le=/[125]/,De=/1/;function Oe(t,e,n,i,r){let o=t.axes[n],s=o.scale,a=t.scales[s];if(3==a.distr&&2==a.log)return e;let l=t.valToPos,c=o._space,u=l(10,s),h=l(9,s)-u>=c?Ve:l(7,s)-u>=c?je:l(5,s)-u>=c?Le:De;return e.map((t=>4==a.distr&&0==t||h.test(t)?t:null))}function Re(t,e){return null==e?"":d(e)}const qe={show:!0,scale:"y",stroke:at,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Me,side:3,grid:Ce,ticks:Se,font:Ee,rotate:0};function Ue(t,e){return O((3+2*(t||1))*e,3)}function Ne(t,e,n,i){let r=t.scales[t.series[e].scale],o=t.bands&&t.bands.some((t=>t.series[0]==e));return 3==r.distr||o?r.min:0}const We={scale:null,auto:!0,min:E,max:-E},He={show:!0,auto:!0,sorted:0,alpha:1,facets:[K({},We,{scale:"x"}),K({},We,{scale:"y"})]},Ye={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:(t,e,n,i,r)=>r,alpha:1,points:{show:function(t,e){let{scale:n,idxs:i}=t.series[0],r=t._data[0],o=t.valToPos(r[i[0]],n,!0),s=t.valToPos(r[i[1]],n,!0),a=_(s-o)/(t.series[e].points.space*bt);return i[1]-i[0]<=a},filter:null},values:null,min:E,max:-E,idxs:[],path:null,clip:null};function Ge(t,e,n,i,r){return n/10}const Je={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ze=K({},Je,{time:!1,ori:1}),Xe={};function Ke(t,e){let n=Xe[t];return n||(n={key:t,plots:[],sub(t){n.plots.push(t)},unsub(t){n.plots=n.plots.filter((e=>e!=t))},pub(t,e,i,r,o,s,a){for(let l=0;l<n.plots.length;l++)n.plots[l]!=e&&n.plots[l].pub(t,e,i,r,o,s,a)}},null!=t&&(Xe[t]=n)),n}function Qe(t,e,n){const i=t.series[e],r=t.scales,o=t.bbox,s=2==t.mode?r[i.facets[0].scale]:r[t.series[0].scale];let a=t._data[0],l=t._data[e],c=s,u=2==t.mode?r[i.facets[1].scale]:r[i.scale],h=o.left,m=o.top,p=o.width,d=o.height,f=t.valToPosH,y=t.valToPosV;return 0==c.ori?n(i,a,l,c,u,f,y,h,m,p,d,sn,ln,un,mn,dn):n(i,a,l,c,u,y,f,m,h,d,p,an,cn,hn,pn,fn)}function tn(t,e,n,i,r){return Qe(t,e,((t,e,o,s,a,l,c,u,h,m,p)=>{let d=t.pxRound;const f=s.dir*(0==s.ori?1:-1),y=0==s.ori?ln:cn;let _,g;1==f?(_=n,g=i):(_=i,g=n);let v=d(l(e[_],s,m,u)),b=d(c(o[_],a,p,h)),x=d(l(e[g],s,m,u)),$=d(c(a.max,a,p,h)),A=new Path2D(r);return y(A,x,$),y(A,v,$),y(A,v,b),A}))}function en(t,e,n,i,r,o){let s=null;if(t.length>0){s=new Path2D;const a=0==e?un:hn;let l=n;for(let e=0;e<t.length;e++){let n=t[e];n[1]>n[0]&&(a(s,l,i,n[0]-l,i+o),l=n[1])}a(s,l,i,n+r-l,i+o)}return s}function nn(t,e,n){let i=t[t.length-1];i&&i[0]==e?i[1]=n:t.push([e,n])}function rn(t){return 0==t?z:1==t?v:e=>T(e,t)}function on(t){let e=0==t?sn:an,n=0==t?(t,e,n,i,r,o)=>{t.arcTo(e,n,i,r,o)}:(t,e,n,i,r,o)=>{t.arcTo(n,e,r,i,o)},i=0==t?(t,e,n,i,r)=>{t.rect(e,n,i,r)}:(t,e,n,i,r)=>{t.rect(n,e,r,i)};return(t,r,o,s,a,l=0)=>{0==l?i(t,r,o,s,a):(l=Math.min(l,s/2,a/2),e(t,r+l,o),n(t,r+s,o,r+s,o+a,l),n(t,r+s,o+a,r,o+a,l),n(t,r,o+a,r,o,l),n(t,r,o,r+s,o,l),t.closePath())}}const sn=(t,e,n)=>{t.moveTo(e,n)},an=(t,e,n)=>{t.moveTo(n,e)},ln=(t,e,n)=>{t.lineTo(e,n)},cn=(t,e,n)=>{t.lineTo(n,e)},un=on(0),hn=on(1),mn=(t,e,n,i,r,o)=>{t.arc(e,n,i,r,o)},pn=(t,e,n,i,r,o)=>{t.arc(n,e,i,r,o)},dn=(t,e,n,i,r,o,s)=>{t.bezierCurveTo(e,n,i,r,o,s)},fn=(t,e,n,i,r,o,s)=>{t.bezierCurveTo(n,e,r,i,s,o)};function yn(t){return(t,e,n,i,r)=>Qe(t,e,((e,o,s,a,l,c,u,h,m,p,d)=>{let f,_,{pxRound:g,points:v}=e;0==a.ori?(f=sn,_=mn):(f=an,_=pn);const b=O(v.width*bt,3);let x=(v.size-v.width)/2*bt,$=O(2*x,3),A=new Path2D,w=new Path2D,{left:B,top:C,width:S,height:E}=t.bbox;un(w,B-$,C-$,S+2*$,E+2*$);const M=t=>{if(null!=s[t]){let e=g(c(o[t],a,p,h)),n=g(u(s[t],l,d,m));f(A,e+x,n),_(A,e,n,x,0,2*y)}};if(r)r.forEach(M);else for(let t=n;t<=i;t++)M(t);return{stroke:b>0?A:null,fill:A,clip:w,flags:3}}))}function _n(t){return(e,n,i,r,o,s)=>{i!=r&&(o!=i&&s!=i&&t(e,n,i),o!=r&&s!=r&&t(e,n,r),t(e,n,s))}}const gn=_n(ln),vn=_n(cn);function bn(){return(t,e,n,r)=>Qe(t,e,((o,s,a,l,c,u,h,m,p,d,f)=>{let y,_,g=o.pxRound;0==l.ori?(y=ln,_=gn):(y=cn,_=vn);const v=l.dir*(0==l.ori?1:-1),b={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},A=b.stroke;let w,B,C,S,M=E,T=-E,k=[],P=g(u(s[1==v?n:r],l,d,m)),z=!1,I=!1,F=i(a,n,r,1*v),V=i(a,n,r,-1*v),j=g(u(s[F],l,d,m)),L=g(u(s[V],l,d,m));j>m&&nn(k,m,j);for(let t=1==v?n:r;t>=n&&t<=r;t+=v){let e=g(u(s[t],l,d,m));if(e==P)null!=a[t]?(B=g(h(a[t],c,f,p)),M==E&&(y(A,e,B),w=B),M=x(B,M),T=$(B,T)):null===a[t]&&(z=I=!0);else{let n=!1;M!=E?(_(A,P,M,T,w,B),C=S=P):z&&(n=!0,z=!1),null!=a[t]?(B=g(h(a[t],c,f,p)),y(A,e,B),M=T=w=B,I&&e-P>1&&(n=!0),I=!1):(M=E,T=-E,null===a[t]&&(z=!0,e-P>1&&(n=!0))),n&&nn(k,C,e),P=e}}if(M!=E&&M!=T&&S!=P&&_(A,P,M,T,w,B),L<m+d&&nn(k,L,m+d),null!=o.fill){let n=b.fill=new Path2D(A),i=g(h(o.fillTo(t,e,o.min,o.max),c,f,p));y(n,L,i),y(n,j,i)}return b.gaps=k=o.gaps(t,e,n,r,k),o.spanGaps||(b.clip=en(k,l.ori,m,p,d,f)),t.bands.length>0&&(b.band=tn(t,e,n,r,A)),b}))}function xn(t,e,n,i,r,o){const s=t.length;if(s<2)return null;const a=new Path2D;if(n(a,t[0],e[0]),2==s)i(a,t[1],e[1]);else{let n=Array(s),i=Array(s-1),o=Array(s-1),l=Array(s-1);for(let r=0;r<s-1;r++)o[r]=e[r+1]-e[r],l[r]=t[r+1]-t[r],i[r]=o[r]/l[r];n[0]=i[0];for(let t=1;t<s-1;t++)0===i[t]||0===i[t-1]||i[t-1]>0!=i[t]>0?n[t]=0:(n[t]=3*(l[t-1]+l[t])/((2*l[t]+l[t-1])/i[t-1]+(l[t]+2*l[t-1])/i[t]),isFinite(n[t])||(n[t]=0));n[s-1]=i[s-2];for(let c=0;c<s-1;c++)r(a,t[c]+l[c]/3,e[c]+n[c]*l[c]/3,t[c+1]-l[c]/3,e[c+1]-n[c+1]*l[c]/3,t[c+1],e[c+1])}return a}const $n=new Set;function An(){$n.forEach((t=>{t.syncRect(!0)}))}Ft("resize",vt,An),Ft("scroll",vt,An,!0);const wn=bn(),Bn=yn();function Cn(t,e,n,i){return(i?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map(((t,i)=>Sn(t,i,e,n)))}function Sn(t,e,n,i){return K({},0==e?n:i,t)}function En(t,e,n){return null==e?H:[e,n]}const Mn=En;function Tn(t,e,n){return null==e?H:h(e,n,.1,!0)}function kn(t,e,n,i){return null==e?H:s(e,n,t.scales[i].log,!1)}const Pn=kn;function zn(t,e,n,i){return null==e?H:a(e,n,t.scales[i].log,!1)}const In=zn;function Fn(t,e,i,r,o){let s=$(M(t),M(e)),a=e-t,l=n(o/r*a,i);do{let t=i[l],e=r*t/a;if(e>=o&&s+(t<5?R.get(t):0)<=17)return[t,e]}while(++l<i.length);return[0,0]}function Vn(t){let e,n;return[t=t.replace(/(\d+)px/,((t,i)=>(e=v((n=+i)*bt))+"px")),e,n]}function jn(t){t.show&&[t.font,t.labelFont].forEach((t=>{let e=O(t[2]*bt,1);t[0]=t[0].replace(/[0-9.]+px/,e+"px"),t[1]=e}))}function Ln(t,e,i){const r={mode:m(t.mode,1)},o=r.mode;function c(t,e){return((3==e.distr?B(t>0?t:e.clamp(r,t,e.min,e.max,e.key)):4==e.distr?S(t,e.asinh):t)-e._min)/(e._max-e._min)}function u(t,e,n,i){let r=c(t,e);return i+n*(-1==e.dir?1-r:r)}function p(t,e,n,i){let r=c(t,e);return i+n*(-1==e.dir?r:1-r)}function d(t,e,n,i){return 0==e.ori?u(t,e,n,i):p(t,e,n,i)}r.valToPosH=u,r.valToPosV=p;let g=!1;r.status=0;const w=r.root=Ct("uplot");null!=t.id&&(w.id=t.id),$t(w,t.class),t.title&&(Ct("u-title",w).textContent=t.title);const C=Bt("canvas"),M=r.ctx=C.getContext("2d"),z=Ct("u-wrap",w),D=r.under=Ct("u-under",z);z.appendChild(C);const R=r.over=Ct("u-over",z),q=+m((t=X(t)).pxAlign,1),U=rn(q);(t.plugins||[]).forEach((e=>{e.opts&&(t=e.opts(r,t)||t)}));const Q=t.ms||.001,at=r.series=1==o?Cn(t.series||[],ke,Ye,!1):(dt=t.series||[null],xt=He,dt.map(((t,e)=>0==e?null:K({},xt,t))));var dt,xt;const St=r.axes=Cn(t.axes||[],Te,qe,!0),Mt=r.scales={},kt=r.bands=t.bands||[];kt.forEach((t=>{t.fill=P(t.fill||null)}));const zt=2==o?at[1].facets[0].scale:at[0].scale,It={axes:function(){for(let t=0;t<St.length;t++){let e=St[t];if(!e.show||!e._show)continue;let n,i,o=e.side,s=o%2,a=e.stroke(r,t),l=0==o||3==o?-1:1;if(e.label){let t=e.labelGap*l,r=v((e._lpos+t)*bt);Xn(e.labelFont[0],a,"center",2==o?it:rt),M.save(),1==s?(n=i=0,M.translate(r,v(De+Xe/2)),M.rotate((3==o?-y:y)/2)):(n=v(Le+We/2),i=r),M.fillText(e.label,n,i),M.restore()}let[c,u]=e._found;if(0==u)continue;let h=Mt[e.scale],m=0==s?We:Xe,p=0==s?Le:De,f=v(e.gap*bt),_=e._splits,g=2==h.distr?_.map((t=>Hn[t])):_,b=2==h.distr?Hn[_[1]]-Hn[_[0]]:c,x=e.ticks,$=x.show?v(x.size*bt):0,A=e._rotate*-y/180,w=U(e._pos*bt),B=w+($+f)*l;i=0==s?B:0,n=1==s?B:0;let C=e.font[0],S=1==e.align?ot:2==e.align?st:A>0?ot:A<0?st:0==s?"center":3==o?st:ot;Xn(C,a,S,A||1==s?"middle":2==o?it:rt);let E=1.5*e.font[1],T=_.map((t=>U(d(t,h,m,p)))),k=e._values;for(let t=0;t<k.length;t++){let e=k[t];if(null!=e){0==s?n=T[t]:i=T[t],e=""+e;let r=-1==e.indexOf("\n")?[e]:e.split(/\n/gm);for(let t=0;t<r.length;t++){let e=r[t];A?(M.save(),M.translate(n,i+t*E),M.rotate(A),M.fillText(e,0,0),M.restore()):M.fillText(e,n,i+t*E)}}}x.show&&ri(T,x.filter(r,g,t,u,b),s,o,w,$,O(x.width*bt,3),x.stroke(r,t),x.dash,x.cap);let P=e.grid;P.show&&ri(T,P.filter(r,g,t,u,b),s,0==s?2:1,0==s?De:Le,0==s?Xe:We,O(P.width*bt,3),P.stroke(r,t),P.dash,P.cap)}ir("drawAxes")},series:function(){_n>0&&(at.forEach(((t,n)=>{if(n>0&&t.show&&null==t._paths){let i=function(t){let e=k(gn-1,0,_n-1),n=k(vn+1,0,_n-1);for(;null==t[e]&&e>0;)e--;for(;null==t[n]&&n<_n-1;)n++;return[e,n]}(e[n]);t._paths=t.paths(r,n,i[0],i[1])}})),at.forEach(((t,e)=>{if(e>0&&t.show){Wn!=t.alpha&&(M.globalAlpha=Wn=t.alpha),Qn(e,!1),t._paths&&ti(e,!1);{Qn(e,!0);let n=t.points.show(r,e,gn,vn),i=t.points.filter(r,e,n,t._paths?t._paths.gaps:null);(n||i)&&(t.points._paths=t.points.paths(r,e,gn,vn,i),ti(e,!0))}1!=Wn&&(M.globalAlpha=Wn=1),ir("drawSeries",e)}})))}},jt=(t.drawOrder||["axes","series"]).map((t=>It[t]));function Lt(e){let n=Mt[e];if(null==n){let i=(t.scales||N)[e]||N;if(null!=i.from)Lt(i.from),Mt[e]=K({},Mt[i.from],i,{key:e});else{n=Mt[e]=K({},e==zt?Je:Ze,i),2==o&&(n.time=!1),n.key=e;let t=n.time,r=n.range,s=Y(r);if((e!=zt||2==o)&&(!s||null!=r[0]&&null!=r[1]||(r={min:null==r[0]?l:{mode:1,hard:r[0],soft:r[0]},max:null==r[1]?l:{mode:1,hard:r[1],soft:r[1]}},s=!1),!s&&J(r))){let t=r;r=(e,n,i)=>null==n?H:h(n,i,t)}n.range=P(r||(t?Mn:e==zt?3==n.distr?Pn:4==n.distr?In:En:3==n.distr?kn:4==n.distr?zn:Tn)),n.auto=P(!s&&n.auto),n.clamp=P(n.clamp||Ge),n._min=n._max=null}}}Lt("x"),Lt("y"),1==o&&at.forEach((t=>{Lt(t.scale)})),St.forEach((t=>{Lt(t.scale)}));for(let n in t.scales)Lt(n);const Dt=Mt[zt],Ot=Dt.distr;let Rt,qt;0==Dt.ori?($t(w,"u-hz"),Rt=u,qt=p):($t(w,"u-vt"),Rt=p,qt=u);const Ut={};for(let n in Mt){let t=Mt[n];null==t.min&&null==t.max||(Ut[n]={min:t.min,max:t.max},t.min=t.max=null)}const Nt=t.tzDate||(t=>new Date(v(t/Q))),Ht=t.fmtDate||Wt,Yt=1==Q?me(Nt):fe(Nt),Gt=_e(Nt,ye(1==Q?he:de,Ht)),Jt=be(Nt,ve("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",Ht)),Zt=[],Qt=r.legend=K({},xe,t.legend),te=Qt.show,ee=Qt.markers;let ne;Qt.idxs=Zt,ee.width=P(ee.width),ee.dash=P(ee.dash),ee.stroke=P(ee.stroke),ee.fill=P(ee.fill);let ie,re=[],oe=[],se=!1,ae={};if(Qt.live){const t=at[1]?at[1].values:null;se=null!=t,ie=se?t(r,1,0):{_:0};for(let e in ie)ae[e]="--"}if(te)if(ne=Bt("table","u-legend",w),se){let t=Bt("tr","u-thead",ne);for(var le in Bt("th",null,t),ie)Bt("th",_t,t).textContent=le}else $t(ne,"u-inline"),Qt.live&&$t(ne,"u-live");const ce={show:!0},ge={show:!1},$e=new Map;function Ae(t,e,n){const i=$e.get(e)||{},o=ln.bind[t](r,e,n);o&&(Ft(t,e,i[t]=o),$e.set(e,i))}function we(t,e,n){const i=$e.get(e)||{};for(let r in i)null!=t&&r!=t||(Vt(r,e,i[r]),delete i[r]);null==t&&$e.delete(e)}let Ce=0,Se=0,Ee=0,Me=0,Ve=0,je=0,Le=0,De=0,We=0,Xe=0;r.bbox={};let Qe=!1,tn=!1,en=!1,nn=!1,on=!1;function sn(t,e,n){(n||t!=r.width||e!=r.height)&&an(t,e),ai(!1),en=!0,tn=!0,nn=on=ln.left>=0,xi()}function an(t,e){r.width=Ce=Ee=t,r.height=Se=Me=e,Ve=je=0,function(){let t=!1,e=!1,n=!1,i=!1;St.forEach(((r,o)=>{if(r.show&&r._show){let{side:o,_size:s}=r,a=o%2,l=s+(null!=r.label?r.labelSize:0);l>0&&(a?(Ee-=l,3==o?(Ve+=l,i=!0):n=!0):(Me-=l,0==o?(je+=l,t=!0):e=!0))}})),pn[0]=t,pn[1]=n,pn[2]=e,pn[3]=i,Ee-=yn[1]+yn[3],Ve+=yn[3],Me-=yn[2]+yn[0],je+=yn[0]}(),function(){let t=Ve+Ee,e=je+Me,n=Ve,i=je;function r(r,o){switch(r){case 1:return t+=o,t-o;case 2:return e+=o,e-o;case 3:return n-=o,n+o;case 0:return i-=o,i+o}}St.forEach(((t,e)=>{if(t.show&&t._show){let e=t.side;t._pos=r(e,t._size),null!=t.label&&(t._lpos=r(e,t.labelSize))}}))}();let n=r.bbox;Le=n.left=T(Ve*bt,.5),De=n.top=T(je*bt,.5),We=n.width=T(Ee*bt,.5),Xe=n.height=T(Me*bt,.5)}r.setSize=function({width:t,height:e}){sn(t,e)};const ln=r.cursor=K({},Be,{drag:{y:2==o}},t.cursor);{ln.idxs=Zt,ln._lock=!1;let t=ln.points;t.show=P(t.show),t.size=P(t.size),t.stroke=P(t.stroke),t.width=P(t.width),t.fill=P(t.fill)}const cn=r.focus=K({},t.focus||{alpha:.3},ln.focus),un=cn.prox>=0;let hn=[null];function mn(t,e){if(1==o||e>0){let e=1==o&&Mt[t.scale].time,n=t.value;t.value=e?G(n)?be(Nt,ve(n,Ht)):n||Jt:n||Re,t.label=t.label||(e?"Time":"Value")}if(e>0){t.width=null==t.width?1:t.width,t.paths=t.paths||wn||F,t.fillTo=P(t.fillTo||Ne),t.pxAlign=+m(t.pxAlign,q),t.pxRound=rn(t.pxAlign),t.stroke=P(t.stroke||null),t.fill=P(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let e=Ue(t.width,1),n=t.points=K({},{size:e,width:$(1,.2*e),stroke:t.stroke,space:2*e,paths:Bn,_stroke:null,_fill:null},t.points);n.show=P(n.show),n.filter=P(n.filter),n.fill=P(n.fill),n.stroke=P(n.stroke),n.paths=P(n.paths),n.pxAlign=t.pxAlign}if(te){let n=function(t,e){if(0==e&&(se||!Qt.live||2==o))return H;let n=[],i=Bt("tr","u-series",ne,ne.childNodes[e]);$t(i,t.class),t.show||$t(i,yt);let s=Bt("th",null,i);if(ee.show){let t=Ct("u-marker",s);if(e>0){let n=ee.width(r,e);n&&(t.style.border=n+"px "+ee.dash(r,e)+" "+ee.stroke(r,e)),t.style.background=ee.fill(r,e)}}let a=Ct(_t,s);for(var l in a.textContent=t.label,e>0&&(ee.show||(a.style.color=t.width>0?ee.stroke(r,e):ee.fill(r,e)),Ae("click",s,(e=>{if(ln._lock)return;let n=at.indexOf(t);if((e.ctrlKey||e.metaKey)!=Qt.isolate){let t=at.some(((t,e)=>e>0&&e!=n&&t.show));at.forEach(((e,i)=>{i>0&&Pi(i,t?i==n?ce:ge:ce,!0,rr.setSeries)}))}else Pi(n,{show:!t.show},!0,rr.setSeries)})),un&&Ae(ht,s,(e=>{ln._lock||Pi(at.indexOf(t),Vi,!0,rr.setSeries)}))),ie){let t=Bt("td","u-value",i);t.textContent="--",n.push(t)}return[i,n]}(t,e);re.splice(e,0,n[0]),oe.splice(e,0,n[1]),Qt.values.push(null)}if(ln.show){Zt.splice(e,0,null);let n=function(t,e){if(e>0){let n=ln.points.show(r,e);if(n)return $t(n,"u-cursor-pt"),$t(n,t.class),Et(n,-10,-10,Ee,Me),R.insertBefore(n,hn[e]),n}}(t,e);n&&hn.splice(e,0,n)}}r.addSeries=function(t,e){t=Sn(t,e=null==e?at.length:e,ke,Ye),at.splice(e,0,t),mn(at[e],e)},r.delSeries=function(t){if(at.splice(t,1),te){Qt.values.splice(t,1),oe.splice(t,1);let e=re.splice(t,1)[0];we(null,e.firstChild),e.remove()}ln.show&&(Zt.splice(t,1),hn.length>1&&hn.splice(t,1)[0].remove())};const pn=[!1,!1,!1,!1];function dn(t,e,n,i){let[r,o,s,a]=n,l=e%2,c=0;return 0==l&&(a||o)&&(c=0==e&&!r||2==e&&!s?v(Te.size/3):0),1==l&&(r||s)&&(c=1==e&&!o||3==e&&!a?v(qe.size/2):0),c}const fn=r.padding=(t.padding||[dn,dn,dn,dn]).map((t=>P(m(t,dn)))),yn=r._padding=fn.map(((t,e)=>t(r,e,pn,0)));let _n,gn=null,vn=null;const bn=1==o?at[0].idxs:null;let xn,An,Ln,Dn,On,Rn,qn,Un,Nn,Wn,Hn=null,Yn=!1;function Gn(t,n){if(2==o){_n=0;for(let t=1;t<at.length;t++)_n+=e[t][0].length;r.data=e=t}else(e=(t||[]).slice())[0]=e[0]||[],r.data=e.slice(),Hn=e[0],_n=Hn.length,2==Ot&&(e[0]=Hn.map(((t,e)=>e)));if(r._data=e,ai(!0),ir("setData"),!1!==n){let t=Dt;t.auto(r,Yn)?Jn():ki(zt,t.min,t.max),nn=ln.left>=0,on=!0,xi()}}function Jn(){let t,n;Yn=!0,1==o&&(_n>0?(gn=bn[0]=0,vn=bn[1]=_n-1,t=e[0][gn],n=e[0][vn],2==Ot?(t=gn,n=vn):1==_n&&(3==Ot?[t,n]=s(t,t,Dt.log,!1):4==Ot?[t,n]=a(t,t,Dt.log,!1):Dt.time?n=t+v(86400/Q):[t,n]=h(t,n,.1,!0))):(gn=bn[0]=t=null,vn=bn[1]=n=null)),ki(zt,t,n)}function Zn(t="#0000",e,n=W,i="butt",r="#0000",o="round"){t!=xn&&(M.strokeStyle=xn=t),r!=An&&(M.fillStyle=An=r),e!=Ln&&(M.lineWidth=Ln=e),o!=On&&(M.lineJoin=On=o),i!=Rn&&(M.lineCap=Rn=i),n!=Dn&&M.setLineDash(Dn=n)}function Xn(t,e,n,i){e!=An&&(M.fillStyle=An=e),t!=qn&&(M.font=qn=t),n!=Un&&(M.textAlign=Un=n),i!=Nn&&(M.textBaseline=Nn=i)}function Kn(t,e,n,i){if(t.auto(r,Yn)&&(null==e||null==e.min)){let e=m(gn,0),r=m(vn,i.length-1),o=null==n.min?3==t.distr?function(t,e,n){let i=E,r=-E;for(let o=e;o<=n;o++)t[o]>0&&(i=x(i,t[o]),r=$(r,t[o]));return[i==E?1:i,r==-E?10:r]}(i,e,r):function(t,e,n,i){let r=E,o=-E;if(1==i)r=t[e],o=t[n];else if(-1==i)r=t[n],o=t[e];else for(let s=e;s<=n;s++)null!=t[s]&&(r=x(r,t[s]),o=$(o,t[s]));return[r,o]}(i,e,r):[n.min,n.max];t.min=x(t.min,n.min=o[0]),t.max=$(t.max,n.max=o[1])}}function Qn(t,e){let n=e?at[t].points:at[t];n._stroke=n.stroke(r,t),n._fill=n.fill(r,t)}function ti(t,n){let i=n?at[t].points:at[t],o=i._stroke,s=i._fill,{stroke:a,fill:l,clip:c,flags:u}=i._paths,h=null,p=O(i.width*bt,3),d=p%2/2;n&&null==s&&(s=p>0?"#fff":o);let f=1==i.pxAlign;if(f&&M.translate(d,d),!n){let t=Le,e=De,n=We,r=Xe,o=p*bt/2;0==i.min&&(r+=o),0==i.max&&(e-=o,r+=o),h=new Path2D,h.rect(t,e,n,r)}n?ei(o,p,i.dash,i.cap,s,a,l,u,c):function(t,n,i,o,s,a,l,c,u,h,p){let d=!1;kt.forEach(((f,y)=>{if(f.series[0]==t){let t,_=at[f.series[1]],g=e[f.series[1]],v=(_._paths||N).band,b=null;_.show&&v&&function(t,e,n){for(e=m(e,0),n=m(n,t.length-1);e<=n;){if(null!=t[e])return!0;e++}return!1}(g,gn,vn)?(b=f.fill(r,y)||a,t=_._paths.clip):v=null,ei(n,i,o,s,b,l,c,u,h,p,t,v),d=!0}})),d||ei(n,i,o,s,a,l,c,u,h,p)}(t,o,p,i.dash,i.cap,s,a,l,u,h,c),f&&M.translate(-d,-d)}function ei(t,e,n,i,r,o,s,a,l,c,u,h){Zn(t,e,n,i,r),(l||c||h)&&(M.save(),l&&M.clip(l),c&&M.clip(c)),h?3==(3&a)?(M.clip(h),u&&M.clip(u),ii(r,s),ni(t,o,e)):2&a?(ii(r,s),M.clip(h),ni(t,o,e)):1&a&&(M.save(),M.clip(h),u&&M.clip(u),ii(r,s),M.restore(),ni(t,o,e)):(ii(r,s),ni(t,o,e)),(l||c||h)&&M.restore()}function ni(t,e,n){n>0&&(e instanceof Map?e.forEach(((t,e)=>{M.strokeStyle=xn=e,M.stroke(t)})):null!=e&&t&&M.stroke(e))}function ii(t,e){e instanceof Map?e.forEach(((t,e)=>{M.fillStyle=An=e,M.fill(t)})):null!=e&&t&&M.fill(e)}function ri(t,e,n,i,r,o,s,a,l,c){let u=s%2/2;1==q&&M.translate(u,u),Zn(a,s,l,c,a),M.beginPath();let h,m,p,d,f=r+(0==i||3==i?-o:o);0==n?(m=r,d=f):(h=r,p=f);for(let y=0;y<t.length;y++)null!=e[y]&&(0==n?h=p=t[y]:m=d=t[y],M.moveTo(h,m),M.lineTo(p,d));M.stroke(),1==q&&M.translate(-u,-u)}function oi(t){let e=!0;return St.forEach(((n,i)=>{if(!n.show)return;let o=Mt[n.scale];if(null==o.min)return void(n._show&&(e=!1,n._show=!1,ai(!1)));n._show||(e=!1,n._show=!0,ai(!1));let s=n.side,a=s%2,{min:l,max:c}=o,[u,h]=function(t,e,n,i){let o,s=St[t];if(i<=0)o=[0,0];else{let a=s._space=s.space(r,t,e,n,i);o=Fn(e,n,s._incrs=s.incrs(r,t,e,n,i,a),i,a)}return s._found=o}(i,l,c,0==a?Ee:Me);if(0==h)return;let m=2==o.distr,p=n._splits=n.splits(r,i,l,c,u,h,m),d=2==o.distr?p.map((t=>Hn[t])):p,f=2==o.distr?Hn[p[1]]-Hn[p[0]]:u,y=n._values=n.values(r,n.filter(r,d,i,h,f),i,h,f);n._rotate=2==s?n.rotate(r,y,i,h):0;let _=n._size;n._size=b(n.size(r,y,i,t)),null!=_&&n._size!=_&&(e=!1)})),e}function si(t){let e=!0;return fn.forEach(((n,i)=>{let o=n(r,i,pn,t);o!=yn[i]&&(e=!1),yn[i]=o})),e}function ai(t){at.forEach(((e,n)=>{n>0&&(e._paths=null,t&&(1==o?(e.min=null,e.max=null):e.facets.forEach((t=>{t.min=null,t.max=null}))))}))}r.setData=Gn;let li,ci,ui,hi,mi,pi,di,fi,yi,_i,gi,vi,bi=!1;function xi(){bi||(tt($i),bi=!0)}function $i(){Qe&&(function(){let t=X(Mt,Z);for(let e in t){let n=t[e],i=Ut[e];if(null!=i&&null!=i.min)K(n,i),e==zt&&ai(!0);else if(e!=zt||2==o)if(0==_n&&null==n.from){let t=n.range(r,null,null,e);n.min=t[0],n.max=t[1]}else n.min=E,n.max=-E}if(_n>0){at.forEach(((i,s)=>{if(1==o){let o=i.scale,a=t[o],l=Ut[o];if(0==s){let t=a.range(r,a.min,a.max,o);a.min=t[0],a.max=t[1],gn=n(a.min,e[0]),vn=n(a.max,e[0]),e[0][gn]<a.min&&gn++,e[0][vn]>a.max&&vn--,i.min=Hn[gn],i.max=Hn[vn]}else i.show&&i.auto&&Kn(a,l,i,e[s]);i.idxs[0]=gn,i.idxs[1]=vn}else if(s>0&&i.show&&i.auto){let[n,r]=i.facets,o=n.scale,a=r.scale,[l,c]=e[s];Kn(t[o],Ut[o],n,l),Kn(t[a],Ut[a],r,c),i.min=r.min,i.max=r.max}}));for(let e in t){let n=t[e],i=Ut[e];if(null==n.from&&(null==i||null==i.min)){let t=n.range(r,n.min==E?null:n.min,n.max==-E?null:n.max,e);n.min=t[0],n.max=t[1]}}}for(let e in t){let n=t[e];if(null!=n.from){let i=t[n.from];if(null==i.min)n.min=n.max=null;else{let t=n.range(r,i.min,i.max,e);n.min=t[0],n.max=t[1]}}}let i={},s=!1;for(let e in t){let n=t[e],r=Mt[e];if(r.min!=n.min||r.max!=n.max){r.min=n.min,r.max=n.max;let t=r.distr;r._min=3==t?B(r.min):4==t?S(r.min,r.asinh):r.min,r._max=3==t?B(r.max):4==t?S(r.max,r.asinh):r.max,i[e]=s=!0}}if(s){at.forEach(((t,e)=>{2==o?e>0&&i.y&&(t._paths=null):i[t.scale]&&(t._paths=null)}));for(let t in i)en=!0,ir("setScale",t);ln.show&&(nn=on=ln.left>=0)}for(let e in Ut)Ut[e]=null}(),Qe=!1),en&&(function(){let t=!1,e=0;for(;!t;){e++;let n=oi(e),i=si(e);t=3==e||n&&i,t||(an(r.width,r.height),tn=!0)}}(),en=!1),tn&&(wt(D,ot,Ve),wt(D,it,je),wt(D,et,Ee),wt(D,nt,Me),wt(R,ot,Ve),wt(R,it,je),wt(R,et,Ee),wt(R,nt,Me),wt(z,et,Ce),wt(z,nt,Se),C.width=v(Ce*bt),C.height=v(Se*bt),St.forEach((t=>{let{_show:e,_el:n,_size:i,_pos:r,side:o}=t;if(e){let t=o%2==1;wt(n,t?"left":"top",r-(3===o||0===o?i:0)),wt(n,t?"width":"height",i),wt(n,t?"top":"left",t?je:Ve),wt(n,t?"height":"width",t?Me:Ee),n&&At(n,yt)}else n&&$t(n,yt)})),xn=An=Ln=On=Rn=qn=Un=Nn=Dn=null,Wn=1,Yi(!1),ir("setSize"),tn=!1),Ce>0&&Se>0&&(M.clearRect(0,0,C.width,C.height),ir("drawClear"),jt.forEach((t=>t())),ir("draw")),ln.show&&nn&&(Wi(null,!0,!1),nn=!1),g||(g=!0,r.status=1,ir("ready")),Yn=!1,bi=!1}function Ai(t,i){let o=Mt[t];if(null==o.from){if(0==_n){let e=o.range(r,i.min,i.max,t);i.min=e[0],i.max=e[1]}if(i.min>i.max){let t=i.min;i.min=i.max,i.max=t}if(_n>1&&null!=i.min&&null!=i.max&&i.max-i.min<1e-16)return;t==zt&&2==o.distr&&_n>0&&(i.min=n(i.min,e[0]),i.max=n(i.max,e[0])),Ut[t]=i,Qe=!0,xi()}}r.redraw=(t,e)=>{en=e||!1,!1!==t?ki(zt,Dt.min,Dt.max):xi()},r.setScale=Ai;let wi=!1;const Bi=ln.drag;let Ci=Bi.x,Si=Bi.y;ln.show&&(ln.x&&(li=Ct("u-cursor-x",R)),ln.y&&(ci=Ct("u-cursor-y",R)),0==Dt.ori?(ui=li,hi=ci):(ui=ci,hi=li),gi=ln.left,vi=ln.top);const Ei=r.select=K({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),Mi=Ei.show?Ct("u-select",Ei.over?R:D):null;function Ti(t,e){if(Ei.show){for(let e in t)wt(Mi,e,Ei[e]=t[e]);!1!==e&&ir("setSelect")}}function ki(t,e,n){Ai(t,{min:e,max:n})}function Pi(t,e,n,i){let s=at[t];null!=e.focus&&function(t){if(t!=Fi){let e=null==t,n=1!=cn.alpha;at.forEach(((i,r)=>{let o=e||0==r||r==t;i._focus=e?null:o,n&&function(t,e){at[t].alpha=e,ln.show&&hn[t]&&(hn[t].style.opacity=e),te&&re[t]&&(re[t].style.opacity=e)}(r,o?1:cn.alpha)})),Fi=t,n&&xi()}}(t),null!=e.show&&(s.show=e.show,function(t,e){let n=at[t],i=te?re[t]:null;n.show?i&&At(i,yt):(i&&$t(i,yt),hn.length>1&&Et(hn[t],-10,-10,Ee,Me))}(t,e.show),ki(2==o?s.facets[1].scale:s.scale,null,null),xi()),!1!==n&&ir("setSeries",t,e),i&&ar("setSeries",r,t,e)}let zi,Ii,Fi;r.setSelect=Ti,r.setSeries=Pi,r.addBand=function(t,e){t.fill=P(t.fill||null),e=null==e?kt.length:e,kt.splice(e,0,t)},r.setBand=function(t,e){K(kt[t],e)},r.delBand=function(t){null==t?kt.length=0:kt.splice(t,1)};const Vi={focus:!0},ji={focus:!1};function Li(t,e,n){let i=Mt[e];n&&(t=t/bt-(1==i.ori?je:Ve));let r=Ee;1==i.ori&&(r=Me,t=r-t),-1==i.dir&&(t=r-t);let o=i._min,s=o+(i._max-o)*(t/r),a=i.distr;return 3==a?A(10,s):4==a?((t,e=1)=>f.sinh(t)*e)(s,i.asinh):s}function Di(t,e){wt(Mi,ot,Ei.left=t),wt(Mi,et,Ei.width=e)}function Oi(t,e){wt(Mi,it,Ei.top=t),wt(Mi,nt,Ei.height=e)}te&&un&&Ft(mt,ne,(t=>{ln._lock||(Pi(null,ji,!0,rr.setSeries),Wi(null,!0,!1))})),r.valToIdx=t=>n(t,e[0]),r.posToIdx=function(t,i){return n(Li(t,zt,i),e[0],gn,vn)},r.posToVal=Li,r.valToPos=(t,e,n)=>0==Mt[e].ori?u(t,Mt[e],n?We:Ee,n?Le:0):p(t,Mt[e],n?Xe:Me,n?De:0),r.batch=function(t){t(r),xi()},r.setCursor=(t,e,n)=>{gi=t.left,vi=t.top,Wi(null,e,n)};let Ri=0==Dt.ori?Di:Oi,qi=1==Dt.ori?Di:Oi;function Ui(t,e){if(null!=t){let e=t.idx;Qt.idx=e,at.forEach(((t,n)=>{(n>0||!se)&&Ni(n,e)}))}te&&Qt.live&&function(){if(te&&Qt.live)for(let t=2==o?1:0;t<at.length;t++){if(0==t&&se)continue;let e=Qt.values[t],n=0;for(let i in e)oe[t][n++].firstChild.nodeValue=e[i]}}(),on=!1,!1!==e&&ir("setLegend")}function Ni(t,n){let i;if(null==n)i=ae;else{let o=at[t],s=0==t&&2==Ot?Hn:e[t];i=se?o.values(r,t,n):{_:o.value(r,s[n],t,n)}}Qt.values[t]=i}function Wi(t,i,s){let a;yi=gi,_i=vi,[gi,vi]=ln.move(r,gi,vi),ln.show&&(ui&&Et(ui,v(gi),0,Ee,Me),hi&&Et(hi,0,v(vi),Ee,Me));let l=gn>vn;zi=E;let c=0==Dt.ori?Ee:Me,u=1==Dt.ori?Ee:Me;if(gi<0||0==_n||l){a=null;for(let t=0;t<at.length;t++)t>0&&hn.length>1&&Et(hn[t],-10,-10,Ee,Me);if(un&&Pi(null,Vi,!0,null==t&&rr.setSeries),Qt.live){Zt.fill(null),on=!0;for(let t=0;t<at.length;t++)Qt.values[t]=ae}}else{let t,i,s;1==o&&(t=0==Dt.ori?gi:vi,i=Li(t,zt),a=n(i,e[0],gn,vn),s=L(Rt(e[0][a],Dt,c,0),.5));for(let n=2==o?1:0;n<at.length;n++){let t=at[n],l=Zt[n],h=1==o?e[n][l]:e[n][1][l],m=ln.dataIdx(r,n,a,i),p=1==o?e[n][m]:e[n][1][m];on=on||p!=h||m!=l,Zt[n]=m;let d=m==a?s:L(Rt(1==o?e[0][m]:e[n][0][m],Dt,c,0),.5);if(n>0&&t.show){let e,i,s=null==p?-10:L(qt(p,1==o?Mt[t.scale]:Mt[t.facets[1].scale],u,0),.5);if(s>0&&1==o){let t=_(s-vi);t<=zi&&(zi=t,Ii=n)}if(0==Dt.ori?(e=d,i=s):(e=s,i=d),on&&hn.length>1){Tt(hn[n],ln.points.fill(r,n),ln.points.stroke(r,n));let t,o,s,a,l=!0,c=ln.points.bbox;if(null!=c){l=!1;let e=c(r,n);s=e.left,a=e.top,t=e.width,o=e.height}else s=e,a=i,t=o=ln.points.size(r,n);Pt(hn[n],t,o,l),Et(hn[n],s,a,Ee,Me)}}if(Qt.live){if(!on||0==n&&se)continue;Ni(n,m)}}}if(ln.idx=a,ln.left=gi,ln.top=vi,on&&(Qt.idx=a,Ui()),Ei.show&&wi)if(null!=t){let[e,n]=rr.scales,[i,r]=rr.match,[o,s]=t.cursor.sync.scales,a=t.cursor.drag;Ci=a._x,Si=a._y;let l,h,m,p,d,{left:f,top:y,width:g,height:v}=t.select,b=t.scales[e].ori,$=t.posToVal,A=null!=e&&i(e,o),w=null!=n&&r(n,s);A&&(0==b?(l=f,h=g):(l=y,h=v),Ci?(m=Mt[e],p=Rt($(l,o),m,c,0),d=Rt($(l+h,o),m,c,0),Ri(x(p,d),_(d-p))):Ri(0,c),w||qi(0,u)),w&&(1==b?(l=f,h=g):(l=y,h=v),Si?(m=Mt[n],p=qt($(l,s),m,u,0),d=qt($(l+h,s),m,u,0),qi(x(p,d),_(d-p))):qi(0,u),A||Ri(0,c))}else{let t=_(yi-mi),e=_(_i-pi);if(1==Dt.ori){let n=t;t=e,e=n}Ci=Bi.x&&t>=Bi.dist,Si=Bi.y&&e>=Bi.dist;let n,i,r=Bi.uni;null!=r?Ci&&Si&&(Ci=t>=r,Si=e>=r,Ci||Si||(e>t?Si=!0:Ci=!0)):Bi.x&&Bi.y&&(Ci||Si)&&(Ci=Si=!0),Ci&&(0==Dt.ori?(n=di,i=gi):(n=fi,i=vi),Ri(x(n,i),_(i-n)),Si||qi(0,u)),Si&&(1==Dt.ori?(n=di,i=gi):(n=fi,i=vi),qi(x(n,i),_(i-n)),Ci||Ri(0,c)),Ci||Si||(Ri(0,0),qi(0,0))}if(Bi._x=Ci,Bi._y=Si,null==t){if(s){if(null!=or){let[t,e]=rr.scales;rr.values[0]=null!=t?Li(0==Dt.ori?gi:vi,t):null,rr.values[1]=null!=e?Li(1==Dt.ori?gi:vi,e):null}ar(lt,r,gi,vi,Ee,Me,a)}if(un){let t=s&&rr.setSeries,e=cn.prox;null==Fi?zi<=e&&Pi(Ii,Vi,!0,t):zi>e?Pi(null,Vi,!0,t):Ii!=Fi&&Pi(Ii,Vi,!0,t)}}g&&!1!==i&&ir("setCursor")}r.setLegend=Ui;let Hi=null;function Yi(t){!0===t?Hi=null:(Hi=R.getBoundingClientRect(),ir("syncRect",Hi))}function Gi(t,e,n,i,r,o,s){ln._lock||(Ji(t,e,n,i,r,o,0,!1,null!=t),null!=t?Wi(null,!0,!0):Wi(e,!0,!1))}function Ji(t,e,n,i,o,s,a,l,c){if(null==Hi&&Yi(!1),null!=t)n=t.clientX-Hi.left,i=t.clientY-Hi.top;else{if(n<0||i<0)return gi=-10,void(vi=-10);let[t,r]=rr.scales,a=e.cursor.sync,[l,c]=a.values,[u,h]=a.scales,[m,p]=rr.match,f=1==e.scales[u].ori,y=0==Dt.ori?Ee:Me,_=1==Dt.ori?Ee:Me,g=f?s:o,v=f?o:s,b=f?i:n,x=f?n:i;if(n=null!=u?m(t,u)?d(l,Mt[t],y,0):-10:y*(b/g),i=null!=h?p(r,h)?d(c,Mt[r],_,0):-10:_*(x/v),1==Dt.ori){let t=n;n=i,i=t}}c&&((n<=1||n>=Ee-1)&&(n=T(n,Ee)),(i<=1||i>=Me-1)&&(i=T(i,Me))),l?(mi=n,pi=i,[di,fi]=ln.move(r,n,i)):(gi=n,vi=i)}function Zi(){Ti({width:0,height:0},!1)}function Xi(t,e,n,i,o,s,a){wi=!0,Ci=Si=Bi._x=Bi._y=!1,Ji(t,e,n,i,o,s,0,!0,!1),null!=t&&(Ae(ut,gt,Ki),ar(ct,r,di,fi,Ee,Me,null))}function Ki(t,e,n,i,o,s,a){wi=Bi._x=Bi._y=!1,Ji(t,e,n,i,o,s,0,!1,!0);let{left:l,top:c,width:u,height:h}=Ei,m=u>0||h>0;if(m&&Ti(Ei),Bi.setScale&&m){let t=l,e=u,n=c,i=h;if(1==Dt.ori&&(t=c,e=h,n=l,i=u),Ci&&ki(zt,Li(t,zt),Li(t+e,zt)),Si)for(let r in Mt){let t=Mt[r];r!=zt&&null==t.from&&t.min!=E&&ki(r,Li(n+i,r),Li(n,r))}Zi()}else ln.lock&&(ln._lock=!ln._lock,ln._lock||Wi(null,!0,!1));null!=t&&(we(ut,gt),ar(ut,r,gi,vi,Ee,Me,null))}function Qi(t,e,n,i,o,s,a){Jn(),Zi(),null!=t&&ar(pt,r,gi,vi,Ee,Me,null)}function tr(){St.forEach(jn),sn(r.width,r.height,!0)}Ft(ft,vt,tr);const er={};er.mousedown=Xi,er.mousemove=Gi,er.mouseup=Ki,er.dblclick=Qi,er.setSeries=(t,e,n,i)=>{Pi(n,i,!0,!1)},ln.show&&(Ae(ct,R,Xi),Ae(lt,R,Gi),Ae(ht,R,Yi),Ae(mt,R,(function(t,e,n,i,r,o,s){if(!ln._lock){let t=wi;if(wi){let t,e,n=!0,i=!0,r=10;0==Dt.ori?(t=Ci,e=Si):(t=Si,e=Ci),t&&e&&(n=gi<=r||gi>=Ee-r,i=vi<=r||vi>=Me-r),t&&n&&(gi=gi<di?0:Ee),e&&i&&(vi=vi<fi?0:Me),Wi(null,!0,!0),wi=!1}gi=-10,vi=-10,Wi(null,!0,!0),t&&(wi=t)}})),Ae(pt,R,Qi),$n.add(r),r.syncRect=Yi);const nr=r.hooks=t.hooks||{};function ir(t,e,n){t in nr&&nr[t].forEach((t=>{t.call(null,r,e,n)}))}(t.plugins||[]).forEach((t=>{for(let e in t.hooks)nr[e]=(nr[e]||[]).concat(t.hooks[e])}));const rr=K({key:null,setSeries:!1,filters:{pub:V,sub:V},scales:[zt,at[1]?at[1].scale:null],match:[j,j],values:[null,null]},ln.sync);ln.sync=rr;const or=rr.key,sr=Ke(or);function ar(t,e,n,i,r,o,s){rr.filters.pub(t,e,n,i,r,o,s)&&sr.pub(t,e,n,i,r,o,s)}function lr(){ir("init",t,e),Gn(e||t.data,!1),Ut[zt]?Ai(zt,Ut[zt]):Jn(),sn(t.width,t.height),Wi(null,!0,!1),Ti(Ei,!1)}return sr.sub(r),r.pub=function(t,e,n,i,r,o,s){rr.filters.sub(t,e,n,i,r,o,s)&&er[t](null,e,n,i,r,o,s)},r.destroy=function(){sr.unsub(r),$n.delete(r),$e.clear(),Vt(ft,vt,tr),w.remove(),ir("destroy")},at.forEach(mn),St.forEach((function(t,e){if(t._show=t.show,t.show){let n=t.side%2,i=Mt[t.scale];null==i&&(t.scale=n?at[1].scale:zt,i=Mt[t.scale]);let o=i.time;t.size=P(t.size),t.space=P(t.space),t.rotate=P(t.rotate),t.incrs=P(t.incrs||(2==i.distr?Xt:o?1==Q?ue:pe:Kt)),t.splits=P(t.splits||(o&&1==i.distr?Yt:3==i.distr?Ie:4==i.distr?Fe:ze)),t.stroke=P(t.stroke),t.grid.stroke=P(t.grid.stroke),t.ticks.stroke=P(t.ticks.stroke);let s=t.values;t.values=Y(s)&&!Y(s[0])?P(s):o?Y(s)?_e(Nt,ye(s,Ht)):G(s)?function(t,e){let n=Wt(e);return(e,i,r,o,s)=>i.map((e=>n(t(e))))}(Nt,s):s||Gt:s||Pe,t.filter=P(t.filter||(i.distr>=3?Oe:I)),t.font=Vn(t.font),t.labelFont=Vn(t.labelFont),t._size=t.size(r,null,e,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(pn[e]=!0),t._el=Ct("u-axis",z)}})),i?i instanceof HTMLElement?(i.appendChild(w),lr()):i(r,lr):lr(),r}Ln.assign=K,Ln.fmtNum=d,Ln.rangeNum=h,Ln.rangeLog=s,Ln.rangeAsinh=a,Ln.orient=Qe,Ln.join=function(t,e){let n=new Set;for(let s=0;s<t.length;s++){let e=t[s][0],i=e.length;for(let t=0;t<i;t++)n.add(e[t])}let i=[Array.from(n).sort(((t,e)=>t-e))],r=i[0].length,o=new Map;for(let s=0;s<r;s++)o.set(i[0][s],s);for(let s=0;s<t.length;s++){let n=t[s],a=n[0];for(let t=1;t<n.length;t++){let l=n[t],c=Array(r).fill(void 0),u=e?e[s][t]:1,h=[];for(let t=0;t<l.length;t++){let e=l[t],n=o.get(a[t]);null===e?0!=u&&(c[n]=e,2==u&&h.push(n)):c[n]=e}Q(c,h,r),i.push(c)}}return i},Ln.fmtDate=Wt,Ln.tzDate=function(t,e){let n;return"UTC"==e||"Etc/UTC"==e?n=new Date(+t+6e4*t.getTimezoneOffset()):e==Ht?n=t:(n=new Date(t.toLocaleString("en-US",{timeZone:e})),n.setMilliseconds(t.getMilliseconds())),n},Ln.sync=Ke;{Ln.addGap=nn,Ln.clipGaps=en;let t=Ln.paths={points:yn};t.linear=bn,t.stepped=function(t){const e=m(t.align,1),n=m(t.ascDesc,!1);return(t,r,o,s)=>Qe(t,r,((a,l,c,u,h,m,p,d,f,y,_)=>{let g=a.pxRound,v=0==u.ori?ln:cn;const b={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},x=b.stroke,$=1*u.dir*(0==u.ori?1:-1);o=i(c,o,s,1),s=i(c,o,s,-1);let A=[],w=!1,B=g(p(c[1==$?o:s],h,_,f)),C=g(m(l[1==$?o:s],u,y,d)),S=C;v(x,C,B);for(let t=1==$?o:s;t>=o&&t<=s;t+=$){let i=c[t],r=g(m(l[t],u,y,d));if(null==i){null===i&&(nn(A,S,r),w=!0);continue}let o=g(p(i,h,_,f));if(w){if(nn(A,S,r),B!=o){let t=a.width*bt/2,i=A[A.length-1];i[0]+=n||1==e?t:-t,i[1]-=n||-1==e?t:-t}w=!1}1==e?v(x,r,B):v(x,S,o),v(x,r,o),B=o,S=r}if(null!=a.fill){let e=b.fill=new Path2D(x),n=g(p(a.fillTo(t,r,a.min,a.max),h,_,f));v(e,S,n),v(e,C,n)}return b.gaps=A=a.gaps(t,r,o,s,A),a.spanGaps||(b.clip=en(A,u.ori,d,f,y,_)),t.bands.length>0&&(b.band=tn(t,r,o,s,x)),b}))},t.bars=function(t){const e=m((t=t||N).size,[.6,E,1]),n=t.align||0,i=(t.gap||0)*bt,r=m(t.radius,0)*bt,o=1-e[0],s=m(e[1],E)*bt,a=m(e[2],1)*bt,l=t.disp,c=m(t.each,(t=>{}));return(t,e,u,h)=>Qe(t,e,((m,p,d,f,y,g,v,b,A,w,B)=>{let C=m.pxRound;const S=f.dir*(0==f.ori?1:-1),E=y.dir*(1==y.ori?1:-1);let M,T,k=0==f.ori?un:hn,P=0==f.ori?c:(t,e,n,i,r,o,s)=>{c(t,e,n,r,i,s,o)},z=v(m.fillTo(t,e,m.min,m.max),y,B,A),I=C(m.width*bt),F=!1,V=null,j=null,L=null,D=null;if(null!=l){null!=l.fill&&null!=l.stroke&&(F=!0,V=l.fill.values(t,e,u,h),j=new Map,new Set(V).forEach((t=>{null!=t&&j.set(t,new Path2D)})),L=l.stroke.values(t,e,u,h),D=new Map,new Set(L).forEach((t=>{null!=t&&D.set(t,new Path2D)}))),p=l.x0.values(t,e,u,h),2==l.x0.unit&&(p=p.map((e=>t.posToVal(b+e*w,f.key,!0))));let n=l.size.values(t,e,u,h);T=2==l.size.unit?n[0]*w:g(n[0],f,w,b)-g(0,f,w,b),T=C(T-I),M=1==S?-I/2:T+I/2}else{let t=w;if(p.length>1){let e=null;for(let n=0,i=1/0;n<p.length;n++)if(void 0!==d[n]){if(null!=e){let r=_(p[n]-p[e]);r<i&&(i=r,t=_(g(p[n],f,w,b)-g(p[e],f,w,b)))}e=n}}T=C(x(s,$(a,t-t*o))-I-i),M=(0==n?T/2:n==S?0:T)-n*S*i/2}const O={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:3},R=t.bands.length>0;let q;R&&(O.band=new Path2D,q=C(v(y.max,y,B,A)));const U=F?null:new Path2D,N=O.band;for(let n=1==S?u:h;n>=u&&n<=h;n+=S){let i=d[n],o=g(2!=f.distr||null!=l?p[n]:n,f,w,b),s=v(i,y,B,A),a=C(o-M),c=C($(s,z)),u=C(x(s,z)),h=c-u;null!=d[n]&&(F?(I>0&&null!=L[n]&&k(D.get(L[n]),a,u,T,h,r*T),null!=V[n]&&k(j.get(V[n]),a,u,T,h,r*T)):k(U,a,u,T,h,r*T),P(t,e,n,a-I/2,u-I/2,T+I,h+I)),R&&(1==E?(c=u,u=q):(u=c,c=q),h=c-u,k(N,a-I/2,u+I/2,T+I,h-I,0))}return I>0&&(O.stroke=F?D:U),O.fill=F?j:U,O}))},t.spline=function(t){return e=xn,(t,n,r,o)=>Qe(t,n,((s,a,l,c,u,h,m,p,d,f,y)=>{let _,g,v,b=s.pxRound;0==c.ori?(_=sn,v=ln,g=dn):(_=an,v=cn,g=fn);const x=1*c.dir*(0==c.ori?1:-1);r=i(l,r,o,1),o=i(l,r,o,-1);let $=[],A=!1,w=b(h(a[1==x?r:o],c,f,p)),B=w,C=[],S=[];for(let t=1==x?r:o;t>=r&&t<=o;t+=x){let e=l[t],n=h(a[t],c,f,p);null!=e?(A&&(nn($,B,n),A=!1),C.push(B=n),S.push(m(l[t],u,y,d))):null===e&&(nn($,B,n),A=!0)}const E={stroke:e(C,S,_,v,g,b),fill:null,clip:null,band:null,gaps:null,flags:1},M=E.stroke;if(null!=s.fill&&null!=M){let e=E.fill=new Path2D(M),i=b(m(s.fillTo(t,n,s.min,s.max),u,y,d));v(e,B,i),v(e,w,i)}return E.gaps=$=s.gaps(t,n,r,o,$),s.spanGaps||(E.clip=en($,c.ori,p,d,f,y)),t.bands.length>0&&(E.band=tn(t,n,r,o,M)),E}));var e}}var Dn={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var On=function(t,e){null==t&&(t={});var n=Object.assign({},t);for(var i in e)e.hasOwnProperty(i)&&void 0===t[i]&&(n[i]=e[i]);if("function"==typeof Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++){var s=r[o];e.propertyIsEnumerable(s)&&void 0===t[i]&&(n[s]=e[s])}return n},Rn={},qn="undefined"!=typeof DEBUG&&DEBUG,Un="undefined"!=typeof ASSERT&&ASSERT;Rn.debug=function(){qn&&console.log.apply(console,arguments)},Rn.assert=function(t,e,n){if(Un&&!t)throw n&&console.log(n),new Error(e)};var Nn={exports:{}},Wn="undefined"!=typeof DEBUG&&DEBUG,Hn="undefined"!=typeof ASSERT&&ASSERT,Yn=Rn,Gn=Math,Jn=Nn.exports=Object.create(Gn);Jn.EPSILON=1e-9,Jn.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},Jn.assert=function(t){if(Hn&&!Jn.isFinite(t))throw Wn&&Yn.debug(t),new Error("Invalid Number!")},Jn.invSqrt=function(t){return 1/Gn.sqrt(t)},Jn.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16)},Jn.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},Jn.mod=function(t,e,n){return void 0===e?(n=1,e=0):void 0===n&&(n=e,e=0),n>e?(t=(t-e)%(n-e))+(t<0?n:e):(t=(t-n)%(e-n))+(t<=0?e:n)},Jn.clamp=function(t,e,n){return t<e?e:t>n?n:t},Jn.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:Gn.random()*(e-t)+t};var Zn="undefined"!=typeof DEBUG&&DEBUG,Xn="undefined"!=typeof ASSERT&&ASSERT,Kn=ei,Qn=Rn,ti=Nn.exports;function ei(t,e){if(!(this instanceof ei))return new ei(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),Xn&&ei.assert(this)}ei.prototype._serialize=function(){return{x:this.x,y:this.y}},ei._deserialize=function(t){var e=Object.create(ei.prototype);return e.x=t.x,e.y=t.y,e},ei.zero=function(){var t=Object.create(ei.prototype);return t.x=0,t.y=0,t},ei.neo=function(t,e){var n=Object.create(ei.prototype);return n.x=t,n.y=e,n},ei.clone=function(t){return Xn&&ei.assert(t),ei.neo(t.x,t.y)},ei.prototype.toString=function(){return JSON.stringify(this)},ei.isValid=function(t){return t&&ti.isFinite(t.x)&&ti.isFinite(t.y)},ei.assert=function(t){if(Xn&&!ei.isValid(t))throw Zn&&Qn.debug(t),new Error("Invalid Vec2!")},ei.prototype.clone=function(){return ei.clone(this)},ei.prototype.setZero=function(){return this.x=0,this.y=0,this},ei.prototype.set=function(t,e){return"object"==typeof t?(Xn&&ei.assert(t),this.x=t.x,this.y=t.y):(Xn&&ti.assert(t),Xn&&ti.assert(e),this.x=t,this.y=e),this},ei.prototype.wSet=function(t,e,n,i){return void 0!==n||void 0!==i?this.setCombine(t,e,n,i):this.setMul(t,e)},ei.prototype.setCombine=function(t,e,n,i){Xn&&ti.assert(t),Xn&&ei.assert(e),Xn&&ti.assert(n),Xn&&ei.assert(i);var r=t*e.x+n*i.x,o=t*e.y+n*i.y;return this.x=r,this.y=o,this},ei.prototype.setMul=function(t,e){Xn&&ti.assert(t),Xn&&ei.assert(e);var n=t*e.x,i=t*e.y;return this.x=n,this.y=i,this},ei.prototype.add=function(t){return Xn&&ei.assert(t),this.x+=t.x,this.y+=t.y,this},ei.prototype.wAdd=function(t,e,n,i){return void 0!==n||void 0!==i?this.addCombine(t,e,n,i):this.addMul(t,e)},ei.prototype.addCombine=function(t,e,n,i){Xn&&ti.assert(t),Xn&&ei.assert(e),Xn&&ti.assert(n),Xn&&ei.assert(i);var r=t*e.x+n*i.x,o=t*e.y+n*i.y;return this.x+=r,this.y+=o,this},ei.prototype.addMul=function(t,e){Xn&&ti.assert(t),Xn&&ei.assert(e);var n=t*e.x,i=t*e.y;return this.x+=n,this.y+=i,this},ei.prototype.wSub=function(t,e,n,i){return void 0!==n||void 0!==i?this.subCombine(t,e,n,i):this.subMul(t,e)},ei.prototype.subCombine=function(t,e,n,i){Xn&&ti.assert(t),Xn&&ei.assert(e),Xn&&ti.assert(n),Xn&&ei.assert(i);var r=t*e.x+n*i.x,o=t*e.y+n*i.y;return this.x-=r,this.y-=o,this},ei.prototype.subMul=function(t,e){Xn&&ti.assert(t),Xn&&ei.assert(e);var n=t*e.x,i=t*e.y;return this.x-=n,this.y-=i,this},ei.prototype.sub=function(t){return Xn&&ei.assert(t),this.x-=t.x,this.y-=t.y,this},ei.prototype.mul=function(t){return Xn&&ti.assert(t),this.x*=t,this.y*=t,this},ei.prototype.length=function(){return ei.lengthOf(this)},ei.prototype.lengthSquared=function(){return ei.lengthSquared(this)},ei.prototype.normalize=function(){var t=this.length();if(t<ti.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},ei.lengthOf=function(t){return Xn&&ei.assert(t),ti.sqrt(t.x*t.x+t.y*t.y)},ei.lengthSquared=function(t){return Xn&&ei.assert(t),t.x*t.x+t.y*t.y},ei.distance=function(t,e){Xn&&ei.assert(t),Xn&&ei.assert(e);var n=t.x-e.x,i=t.y-e.y;return ti.sqrt(n*n+i*i)},ei.distanceSquared=function(t,e){Xn&&ei.assert(t),Xn&&ei.assert(e);var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},ei.areEqual=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},ei.skew=function(t){return Xn&&ei.assert(t),ei.neo(-t.y,t.x)},ei.dot=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),t.x*e.x+t.y*e.y},ei.cross=function(t,e){return"number"==typeof e?(Xn&&ei.assert(t),Xn&&ti.assert(e),ei.neo(e*t.y,-e*t.x)):"number"==typeof t?(Xn&&ti.assert(t),Xn&&ei.assert(e),ei.neo(-t*e.y,t*e.x)):(Xn&&ei.assert(t),Xn&&ei.assert(e),t.x*e.y-t.y*e.x)},ei.addCross=function(t,e,n){return"number"==typeof n?(Xn&&ei.assert(e),Xn&&ti.assert(n),ei.neo(n*e.y+t.x,-n*e.x+t.y)):"number"==typeof e?(Xn&&ti.assert(e),Xn&&ei.assert(n),ei.neo(-e*n.y+t.x,e*n.x+t.y)):void(Xn&&Qn.assert(!1))},ei.add=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),ei.neo(t.x+e.x,t.y+e.y)},ei.wAdd=function(t,e,n,i){return void 0!==n||void 0!==i?ei.combine(t,e,n,i):ei.mul(t,e)},ei.combine=function(t,e,n,i){return ei.zero().setCombine(t,e,n,i)},ei.sub=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),ei.neo(t.x-e.x,t.y-e.y)},ei.mul=function(t,e){return"object"==typeof t?(Xn&&ei.assert(t),Xn&&ti.assert(e),ei.neo(t.x*e,t.y*e)):"object"==typeof e?(Xn&&ti.assert(t),Xn&&ei.assert(e),ei.neo(t*e.x,t*e.y)):void 0},ei.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},ei.neg=function(t){return Xn&&ei.assert(t),ei.neo(-t.x,-t.y)},ei.abs=function(t){return Xn&&ei.assert(t),ei.neo(ti.abs(t.x),ti.abs(t.y))},ei.mid=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),ei.neo(.5*(t.x+e.x),.5*(t.y+e.y))},ei.upper=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),ei.neo(ti.max(t.x,e.x),ti.max(t.y,e.y))},ei.lower=function(t,e){return Xn&&ei.assert(t),Xn&&ei.assert(e),ei.neo(ti.min(t.x,e.x),ti.min(t.y,e.y))},ei.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var n=ti.invSqrt(e);this.x*=n*t,this.y*=n*t}return this},ei.clamp=function(t,e){return(t=ei.neo(t.x,t.y)).clamp(e),t},ei.scaleFn=function(t,e){return function(n){return ei.neo(n.x*t,n.y*e)}},ei.translateFn=function(t,e){return function(n){return ei.neo(n.x+t,n.y+e)}};var ni={};!function(t){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var e=t;e.maxManifoldPoints=2,e.maxPolygonVertices=12,e.aabbExtension=.1,e.aabbMultiplier=2,e.linearSlop=.005,e.linearSlopSquared=e.linearSlop*e.linearSlop,e.angularSlop=2/180*Math.PI,e.polygonRadius=2*e.linearSlop,e.maxSubSteps=8,e.maxTOIContacts=32,e.maxTOIIterations=20,e.maxDistnceIterations=20,e.velocityThreshold=1,e.maxLinearCorrection=.2,e.maxAngularCorrection=8/180*Math.PI,e.maxTranslation=2,e.maxTranslationSquared=e.maxTranslation*e.maxTranslation,e.maxRotation=.5*Math.PI,e.maxRotationSquared=e.maxRotation*e.maxRotation,e.baumgarte=.2,e.toiBaugarte=.75,e.timeToSleep=.5,e.linearSleepTolerance=.01,e.linearSleepToleranceSqr=Math.pow(e.linearSleepTolerance,2),e.angularSleepTolerance=2/180*Math.PI,e.angularSleepToleranceSqr=Math.pow(e.angularSleepTolerance,2)}(ni);var ii="undefined"!=typeof DEBUG&&DEBUG,ri="undefined"!=typeof ASSERT&&ASSERT,oi=Rn,si=Nn.exports,ai=Kn,li=ci;function ci(t,e){if(!(this instanceof ci))return new ci(t,e);this.lowerBound=ai.zero(),this.upperBound=ai.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e?this.upperBound.set(e):"object"==typeof t&&this.upperBound.set(t)}ci.prototype.isValid=function(){return ci.isValid(this)},ci.isValid=function(t){var e=ai.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&ai.isValid(t.lowerBound)&&ai.isValid(t.upperBound)},ci.assert=function(t){if(ri&&!ci.isValid(t))throw ii&&oi.debug(t),new Error("Invalid AABB!")},ci.prototype.getCenter=function(){return ai.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},ci.prototype.getExtents=function(){return ai.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},ci.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},ci.prototype.combine=function(t,e){e=e||this;var n=t.lowerBound,i=t.upperBound,r=e.lowerBound,o=e.upperBound,s=si.min(n.x,r.x),a=si.min(n.y,r.y),l=si.max(o.x,i.x),c=si.max(o.y,i.y);this.lowerBound.set(s,a),this.upperBound.set(l,c)},ci.prototype.combinePoints=function(t,e){this.lowerBound.set(si.min(t.x,e.x),si.min(t.y,e.y)),this.upperBound.set(si.max(t.x,e.x),si.max(t.y,e.y))},ci.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},ci.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},ci.prototype.extend=function(t){return ci.extend(this,t),this},ci.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},ci.testOverlap=function(t,e){var n=e.lowerBound.x-t.upperBound.x,i=t.lowerBound.x-e.upperBound.x,r=e.lowerBound.y-t.upperBound.y,o=t.lowerBound.y-e.upperBound.y;return!(n>0||r>0||i>0||o>0)},ci.areEqual=function(t,e){return ai.areEqual(t.lowerBound,e.lowerBound)&&ai.areEqual(t.upperBound,e.upperBound)},ci.diff=function(t,e){var n=si.max(0,si.min(t.upperBound.x,e.upperBound.x)-si.max(e.lowerBound.x,t.lowerBound.x)),i=si.max(0,si.min(t.upperBound.y,e.upperBound.y)-si.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-n*i},ci.prototype.rayCast=function(t,e){for(var n=-1/0,i=1/0,r=e.p1,o=ai.sub(e.p2,e.p1),s=ai.abs(o),a=ai.zero(),l="x";null!==l;l="x"===l?"y":null)if(s.x<si.EPSILON){if(r[l]<this.lowerBound[l]||this.upperBound[l]<r[l])return!1}else{var c=1/o[l],u=(this.lowerBound[l]-r[l])*c,h=(this.upperBound[l]-r[l])*c,m=-1;if(u>h){var p=u;u=h,h=p,m=1}if(u>n&&(a.setZero(),a[l]=m,n=u),n>(i=si.min(i,h)))return!1}return!(n<0||e.maxFraction<n||(t.fraction=n,t.normal=a,0))},ci.prototype.toString=function(){return JSON.stringify(this)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,"undefined"!=typeof DEBUG&&DEBUG;var ui="undefined"!=typeof ASSERT&&ASSERT,hi=ni,mi=Rn,pi=function(t){var e=[],n=t.max||1/0,i=t.create,r=t.allocate,o=t.release,s=t.discard,a=0,l=0,c=0,u=0;this.max=function(t){return"number"==typeof t?(n=t,this):n},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof i?i():{}),l++,"function"==typeof r&&r(t),t},this.release=function(t){e.length<n?(c++,"function"==typeof o&&o(t),e.push(t)):(u++,"function"==typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+l+" <"+c+" -"+u+" ="+e.length+"/"+n}},di=Kn,fi=Nn.exports,yi=li,_i=vi;function gi(t){this.id=t,this.aabb=new yi,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function vi(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new pi({create:function(){return new gi}})}gi.prototype.isLeaf=function(){return null==this.child1},vi.prototype.getUserData=function(t){var e=this.m_nodes[t];return ui&&mi.assert(!!e),e.userData},vi.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return ui&&mi.assert(!!e),e.aabb},vi.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},vi.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},vi.prototype.createProxy=function(t,e){ui&&mi.assert(yi.isValid(t));var n=this.allocateNode();return n.aabb.set(t),yi.extend(n.aabb,hi.aabbExtension),n.userData=e,n.height=0,this.insertLeaf(n),n.id},vi.prototype.destroyProxy=function(t){var e=this.m_nodes[t];ui&&mi.assert(!!e),ui&&mi.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},vi.prototype.moveProxy=function(t,e,n){ui&&mi.assert(yi.isValid(e)),ui&&mi.assert(!n||di.isValid(n));var i=this.m_nodes[t];return ui&&mi.assert(!!i),ui&&mi.assert(i.isLeaf()),!i.aabb.contains(e)&&(this.removeLeaf(i),i.aabb.set(e),e=i.aabb,yi.extend(e,hi.aabbExtension),n.x<0?e.lowerBound.x+=n.x*hi.aabbMultiplier:e.upperBound.x+=n.x*hi.aabbMultiplier,n.y<0?e.lowerBound.y+=n.y*hi.aabbMultiplier:e.upperBound.y+=n.y*hi.aabbMultiplier,this.insertLeaf(i),!0)},vi.prototype.insertLeaf=function(t){if(ui&&mi.assert(yi.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,n=this.m_root;0==n.isLeaf();){var i=n.child1,r=n.child2,o=n.aabb.getPerimeter(),s=new yi;s.combine(n.aabb,e);var a,l,c,u=s.getPerimeter(),h=2*u,m=2*(u-o);if(i.isLeaf())(c=new yi).combine(e,i.aabb),a=c.getPerimeter()+m;else{(c=new yi).combine(e,i.aabb);var p=i.aabb.getPerimeter();a=c.getPerimeter()-p+m}if(r.isLeaf())(c=new yi).combine(e,r.aabb),l=c.getPerimeter()+m;else(c=new yi).combine(e,r.aabb),p=r.aabb.getPerimeter(),l=c.getPerimeter()-p+m;if(h<a&&h<l)break;n=a<l?i:r}var d=n,f=d.parent,y=this.allocateNode();for(y.parent=f,y.userData=null,y.aabb.combine(e,d.aabb),y.height=d.height+1,null!=f?(f.child1==d?f.child1=y:f.child2=y,y.child1=d,y.child2=t,d.parent=y,t.parent=y):(y.child1=d,y.child2=t,d.parent=y,t.parent=y,this.m_root=y),n=t.parent;null!=n;)i=(n=this.balance(n)).child1,r=n.child2,ui&&mi.assert(null!=i),ui&&mi.assert(null!=r),n.height=1+fi.max(i.height,r.height),n.aabb.combine(i.aabb,r.aabb),n=n.parent},vi.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,n=t.parent,i=n.parent;if(e=n.child1==t?n.child2:n.child1,null!=i){i.child1==n?i.child1=e:i.child2=e,e.parent=i,this.freeNode(n);for(var r=i;null!=r;){var o=(r=this.balance(r)).child1,s=r.child2;r.aabb.combine(o.aabb,s.aabb),r.height=1+fi.max(o.height,s.height),r=r.parent}}else this.m_root=e,e.parent=null,this.freeNode(n)}else this.m_root=null},vi.prototype.balance=function(t){ui&&mi.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var n=e.child1,i=e.child2,r=i.height-n.height;if(r>1){var o=i.child1,s=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==t?i.parent.child1=i:i.parent.child2=i:this.m_root=i,o.height>s.height?(i.child2=o,e.child2=s,s.parent=e,e.aabb.combine(n.aabb,s.aabb),i.aabb.combine(e.aabb,o.aabb),e.height=1+fi.max(n.height,s.height),i.height=1+fi.max(e.height,o.height)):(i.child2=s,e.child2=o,o.parent=e,e.aabb.combine(n.aabb,o.aabb),i.aabb.combine(e.aabb,s.aabb),e.height=1+fi.max(n.height,o.height),i.height=1+fi.max(e.height,s.height)),i}if(r<-1){var a=n.child1,l=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==e?n.parent.child1=n:n.parent.child2=n:this.m_root=n,a.height>l.height?(n.child2=a,e.child1=l,l.parent=e,e.aabb.combine(i.aabb,l.aabb),n.aabb.combine(e.aabb,a.aabb),e.height=1+fi.max(i.height,l.height),n.height=1+fi.max(e.height,a.height)):(n.child2=l,e.child1=a,a.parent=e,e.aabb.combine(i.aabb,a.aabb),n.aabb.combine(e.aabb,l.aabb),e.height=1+fi.max(i.height,a.height),n.height=1+fi.max(e.height,l.height)),n}return e},vi.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},vi.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),n=0,i=$i.allocate().preorder(this.m_root);t=i.next();)t.height<0||(n+=t.aabb.getPerimeter());return $i.release(i),n/e},vi.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var n=this.computeHeight(e.child1.id),i=this.computeHeight(e.child2.id);return 1+fi.max(n,i)},vi.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&ui&&mi.assert(null==t.parent);var e=t.child1,n=t.child2;if(t.isLeaf())return ui&&mi.assert(null==e),ui&&mi.assert(null==n),void(ui&&mi.assert(0==t.height));ui&&mi.assert(e.parent==t),ui&&mi.assert(n.parent==t),this.validateStructure(e),this.validateStructure(n)}},vi.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,n=t.child2;if(t.isLeaf())return ui&&mi.assert(null==e),ui&&mi.assert(null==n),void(ui&&mi.assert(0==t.height));var i=e.height,r=n.height,o=1+fi.max(i,r);ui&&mi.assert(t.height==o);var s=new yi;s.combine(e.aabb,n.aabb),ui&&mi.assert(yi.areEqual(s,t.aabb)),this.validateMetrics(e),this.validateMetrics(n)}},vi.prototype.validate=function(){this.validateStructure(this.m_root),this.validateMetrics(this.m_root),ui&&mi.assert(this.getHeight()==this.computeHeight())},vi.prototype.getMaxBalance=function(){for(var t,e=0,n=$i.allocate().preorder(this.m_root);t=n.next();)if(!(t.height<=1)){ui&&mi.assert(0==t.isLeaf());var i=fi.abs(t.child2.height-t.child1.height);e=fi.max(e,i)}return $i.release(n),e},vi.prototype.rebuildBottomUp=function(){for(var t,e=[],n=0,i=$i.allocate().preorder(this.m_root);t=i.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[n]=t,++n):this.freeNode(t));for($i.release(i);n>1;){for(var r=1/0,o=-1,s=-1,a=0;a<n;++a)for(var l=e[a].aabb,c=a+1;c<n;++c){var u=e[c].aabb,h=new yi;h.combine(l,u);var m=h.getPerimeter();m<r&&(o=a,s=c,r=m)}var p=e[o],d=e[s],f=this.allocateNode();f.child1=p,f.child2=d,f.height=1+fi.max(p.height,d.height),f.aabb.combine(p.aabb,d.aabb),f.parent=null,p.parent=f,d.parent=f,e[s]=e[n-1],e[o]=f,--n}this.m_root=e[0],this.validate()},vi.prototype.shiftOrigin=function(t){for(var e,n=$i.allocate().preorder(this.m_root);e=n.next();){var i=e.aabb;i.lowerBound.x-=t.x,i.lowerBound.y-=t.y,i.upperBound.x-=t.x,i.upperBound.y-=t.y}$i.release(n)},vi.prototype.query=function(t,e){ui&&mi.assert("function"==typeof e);var n=xi.allocate();for(n.push(this.m_root);n.length>0;){var i=n.pop();if(null!=i&&yi.testOverlap(i.aabb,t))if(i.isLeaf()){if(0==e(i.id))return}else n.push(i.child1),n.push(i.child2)}xi.release(n)},vi.prototype.rayCast=function(t,e){ui&&mi.assert("function"==typeof e);var n=t.p1,i=t.p2,r=di.sub(i,n);ui&&mi.assert(r.lengthSquared()>0),r.normalize();var o=di.cross(1,r),s=di.abs(o),a=t.maxFraction,l=new yi,c=di.combine(1-a,n,a,i);l.combinePoints(n,c);var u=xi.allocate(),h=bi.allocate();for(u.push(this.m_root);u.length>0;){var m=u.pop();if(null!=m&&0!=yi.testOverlap(m.aabb,l)){var p=m.aabb.getCenter(),d=m.aabb.getExtents();if(!(fi.abs(di.dot(o,di.sub(n,p)))-di.dot(s,d)>0))if(m.isLeaf()){h.p1=di.clone(t.p1),h.p2=di.clone(t.p2),h.maxFraction=a;var f=e(h,m.id);if(0==f)return;f>0&&(a=f,c=di.combine(1-a,n,a,i),l.combinePoints(n,c))}else u.push(m.child1),u.push(m.child2)}}xi.release(u),bi.release(h)};var bi=new pi({create:function(){return{}},release:function(t){}}),xi=new pi({create:function(){return[]},release:function(t){t.length=0}}),$i=new pi({create:function(){return new Ai},release:function(t){t.close()}});function Ai(){var t=[],e=[];return{preorder:function(n){return t.length=0,t.push(n),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var n=t.length-1,i=t[n];if(0===e[n])return e[n]=1,i;if(1===e[n]&&(e[n]=2,i.child1))return t.push(i.child1),e.push(1),i.child1;if(2===e[n]&&(e[n]=3,i.child2))return t.push(i.child2),e.push(1),i.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}"undefined"!=typeof DEBUG&&DEBUG;var wi="undefined"!=typeof ASSERT&&ASSERT,Bi=Rn,Ci=Nn.exports,Si=li,Ei=_i,Mi=Ti;function Ti(){this.m_tree=new Ei,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}Ti.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},Ti.prototype.testOverlap=function(t,e){var n=this.m_tree.getFatAABB(t),i=this.m_tree.getFatAABB(e);return Si.testOverlap(n,i)},Ti.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},Ti.prototype.getProxyCount=function(){return this.m_proxyCount},Ti.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},Ti.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},Ti.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},Ti.prototype.query=function(t,e){this.m_tree.query(t,e)},Ti.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},Ti.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},Ti.prototype.createProxy=function(t,e){wi&&Bi.assert(Si.isValid(t));var n=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(n),n},Ti.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},Ti.prototype.moveProxy=function(t,e,n){wi&&Bi.assert(Si.isValid(e)),this.m_tree.moveProxy(t,e,n)&&this.bufferMove(t)},Ti.prototype.touchProxy=function(t){this.bufferMove(t)},Ti.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},Ti.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},Ti.prototype.updatePairs=function(t){for(wi&&Bi.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},Ti.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=Ci.min(t,this.m_queryProxyId),n=Ci.max(t,this.m_queryProxyId),i=this.m_tree.getUserData(e),r=this.m_tree.getUserData(n);return this.m_callback(i,r),!0};var ki={exports:{}},Pi="undefined"!=typeof DEBUG&&DEBUG,zi="undefined"!=typeof ASSERT&&ASSERT,Ii=Li,Fi=Rn,Vi=Kn,ji=Nn.exports;function Li(t){if(!(this instanceof Li))return new Li(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}Li.neo=function(t){var e=Object.create(Li.prototype);return e.setAngle(t),e},Li.clone=function(t){zi&&Li.assert(t);var e=Object.create(Li.prototype);return e.s=t.s,e.c=t.c,e},Li.identity=function(){var t=Object.create(Li.prototype);return t.s=0,t.c=1,t},Li.isValid=function(t){return t&&ji.isFinite(t.s)&&ji.isFinite(t.c)},Li.assert=function(t){if(zi&&!Li.isValid(t))throw Pi&&Fi.debug(t),new Error("Invalid Rot!")},Li.prototype.setIdentity=function(){this.s=0,this.c=1},Li.prototype.set=function(t){"object"==typeof t?(zi&&Li.assert(t),this.s=t.s,this.c=t.c):(zi&&ji.assert(t),this.s=ji.sin(t),this.c=ji.cos(t))},Li.prototype.setAngle=function(t){zi&&ji.assert(t),this.s=ji.sin(t),this.c=ji.cos(t)},Li.prototype.getAngle=function(){return ji.atan2(this.s,this.c)},Li.prototype.getXAxis=function(){return Vi.neo(this.c,this.s)},Li.prototype.getYAxis=function(){return Vi.neo(-this.s,this.c)},Li.mul=function(t,e){if(zi&&Li.assert(t),"c"in e&&"s"in e){zi&&Li.assert(e);var n=Li.identity();return n.s=t.s*e.c+t.c*e.s,n.c=t.c*e.c-t.s*e.s,n}if("x"in e&&"y"in e)return zi&&Vi.assert(e),Vi.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},Li.mulRot=function(t,e){zi&&Li.assert(t),zi&&Li.assert(e);var n=Li.identity();return n.s=t.s*e.c+t.c*e.s,n.c=t.c*e.c-t.s*e.s,n},Li.mulVec2=function(t,e){return zi&&Li.assert(t),zi&&Vi.assert(e),Vi.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},Li.mulSub=function(t,e,n){var i=t.c*(e.x-n.x)-t.s*(e.y-n.y),r=t.s*(e.x-n.x)+t.c*(e.y-n.y);return Vi.neo(i,r)},Li.mulT=function(t,e){if("c"in e&&"s"in e){zi&&Li.assert(e);var n=Li.identity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n}if("x"in e&&"y"in e)return zi&&Vi.assert(e),Vi.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},Li.mulTRot=function(t,e){zi&&Li.assert(e);var n=Li.identity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n},Li.mulTVec2=function(t,e){return zi&&Vi.assert(e),Vi.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)};var Di="undefined"!=typeof DEBUG&&DEBUG,Oi="undefined"!=typeof ASSERT&&ASSERT,Ri=Wi,qi=Rn,Ui=Kn,Ni=Ii;function Wi(t,e){if(!(this instanceof Wi))return new Wi(t,e);this.p=Ui.zero(),this.q=Ni.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}Wi.clone=function(t){var e=Object.create(Wi.prototype);return e.p=Ui.clone(t.p),e.q=Ni.clone(t.q),e},Wi.neo=function(t,e){var n=Object.create(Wi.prototype);return n.p=Ui.clone(t),n.q=Ni.clone(e),n},Wi.identity=function(){var t=Object.create(Wi.prototype);return t.p=Ui.zero(),t.q=Ni.identity(),t},Wi.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},Wi.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},Wi.isValid=function(t){return t&&Ui.isValid(t.p)&&Ni.isValid(t.q)},Wi.assert=function(t){if(Oi&&!Wi.isValid(t))throw Di&&qi.debug(t),new Error("Invalid Transform!")},Wi.mul=function(t,e){if(Oi&&Wi.assert(t),Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)n[i]=Wi.mul(t,e[i]);return n}if("x"in e&&"y"in e){Oi&&Ui.assert(e);var r=t.q.c*e.x-t.q.s*e.y+t.p.x,o=t.q.s*e.x+t.q.c*e.y+t.p.y;return Ui.neo(r,o)}if("p"in e&&"q"in e){Oi&&Wi.assert(e);var s=Wi.identity();return s.q=Ni.mulRot(t.q,e.q),s.p=Ui.add(Ni.mulVec2(t.q,e.p),t.p),s}},Wi.mulAll=function(t,e){Oi&&Wi.assert(t);for(var n=[],i=0;i<e.length;i++)n[i]=Wi.mul(t,e[i]);return n},Wi.mulFn=function(t){return Oi&&Wi.assert(t),function(e){return Wi.mul(t,e)}},Wi.mulVec2=function(t,e){Oi&&Wi.assert(t),Oi&&Ui.assert(e);var n=t.q.c*e.x-t.q.s*e.y+t.p.x,i=t.q.s*e.x+t.q.c*e.y+t.p.y;return Ui.neo(n,i)},Wi.mulXf=function(t,e){Oi&&Wi.assert(t),Oi&&Wi.assert(e);var n=Wi.identity();return n.q=Ni.mulRot(t.q,e.q),n.p=Ui.add(Ni.mulVec2(t.q,e.p),t.p),n},Wi.mulT=function(t,e){if(Oi&&Wi.assert(t),"x"in e&&"y"in e){Oi&&Ui.assert(e);var n=e.x-t.p.x,i=e.y-t.p.y,r=t.q.c*n+t.q.s*i,o=-t.q.s*n+t.q.c*i;return Ui.neo(r,o)}if("p"in e&&"q"in e){Oi&&Wi.assert(e);var s=Wi.identity();return s.q.set(Ni.mulTRot(t.q,e.q)),s.p.set(Ni.mulTVec2(t.q,Ui.sub(e.p,t.p))),s}},Wi.mulTVec2=function(t,e){Oi&&Wi.assert(t),Oi&&Ui.assert(e);var n=e.x-t.p.x,i=e.y-t.p.y,r=t.q.c*n+t.q.s*i,o=-t.q.s*n+t.q.c*i;return Ui.neo(r,o)},Wi.mulTXf=function(t,e){Oi&&Wi.assert(t),Oi&&Wi.assert(e);var n=Wi.identity();return n.q.set(Ni.mulTRot(t.q,e.q)),n.p.set(Ni.mulTVec2(t.q,Ui.sub(e.p,t.p))),n},"undefined"!=typeof DEBUG&&DEBUG;var Hi="undefined"!=typeof ASSERT&&ASSERT,Yi=Qi,Gi=Rn,Ji=Nn.exports,Zi=Kn,Xi=Ii,Ki=Ri;function Qi(t,e){Hi&&Gi.assert(void 0===t),Hi&&Gi.assert(void 0===e),this.localCenter=Zi.zero(),this.c=Zi.zero(),this.a=0,this.alpha0=0,this.c0=Zi.zero(),this.a0=0}Qi.prototype.setTransform=function(t){var e=Ki.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},Qi.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var n=Ki.mulVec2(e,this.localCenter);this.c.set(n),this.c0.set(n)},Qi.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(Xi.mulVec2(t.q,this.localCenter))},Qi.prototype.advance=function(t){Hi&&Gi.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},Qi.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},Qi.prototype.normalize=function(){var t=Ji.mod(this.a0,-Ji.PI,+Ji.PI);this.a-=this.a0-t,this.a0=t},Qi.prototype.clone=function(){var t=new Qi;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},Qi.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var tr=function(){this.v=er.zero(),this.w=0},er=Kn;"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var nr=or,ir=Kn,rr=Ii;function or(){this.c=ir.zero(),this.a=0}or.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(ir.sub(this.c,rr.mulVec2(t.q,e))),t},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var sr=ar;function ar(){this.m_type,this.m_radius}ar.prototype._reset=function(){},ar.prototype._serialize=function(){return{}},ar.TYPES={},ar._deserialize=function(t,e,n){var i=ar.TYPES[t.type];return i&&n(i,t)},ar.isValid=function(t){return!!t},ar.prototype.getRadius=function(){return this.m_radius},ar.prototype.getType=function(){return this.m_type},ar.prototype._clone=function(){},ar.prototype.getChildCount=function(){},ar.prototype.testPoint=function(t,e){},ar.prototype.rayCast=function(t,e,n,i){},ar.prototype.computeAABB=function(t,e,n){},ar.prototype.computeMass=function(t,e){},ar.prototype.computeDistanceProxy=function(t){},"undefined"!=typeof DEBUG&&DEBUG;var lr="undefined"!=typeof ASSERT&&ASSERT,cr=gr,ur=Rn,hr=On,mr=Nn.exports,pr=Kn,dr=li,fr=sr,yr={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function _r(t,e){this.aabb=new dr,this.fixture=t,this.childIndex=e,this.proxyId}function gr(t,e,n){e.shape?(n=e,e=e.shape):"number"==typeof n&&(n={density:n}),n=hr(n,yr),this.m_body=t,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_density=n.density,this.m_isSensor=n.isSensor,this.m_filterGroupIndex=n.filterGroupIndex,this.m_filterCategoryBits=n.filterCategoryBits,this.m_filterMaskBits=n.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var i=this.m_shape.getChildCount(),r=0;r<i;++r)this.m_proxies[r]=new _r(this,r);this.m_userData=n.userData}gr.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var n=this.m_shape.getChildCount(),i=0;i<n;++i)this.m_proxies[i]=new _r(this,i);this.createProxies(e,t.m_xf),t.resetMassData()},gr.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},gr._deserialize=function(t,e,n){var i=n(fr,t.shape);return i&&new gr(e,i,t)},gr.prototype.getType=function(){return this.m_shape.getType()},gr.prototype.getShape=function(){return this.m_shape},gr.prototype.isSensor=function(){return this.m_isSensor},gr.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},gr.prototype.getUserData=function(){return this.m_userData},gr.prototype.setUserData=function(t){this.m_userData=t},gr.prototype.getBody=function(){return this.m_body},gr.prototype.getNext=function(){return this.m_next},gr.prototype.getDensity=function(){return this.m_density},gr.prototype.setDensity=function(t){lr&&ur.assert(mr.isFinite(t)&&t>=0),this.m_density=t},gr.prototype.getFriction=function(){return this.m_friction},gr.prototype.setFriction=function(t){this.m_friction=t},gr.prototype.getRestitution=function(){return this.m_restitution},gr.prototype.setRestitution=function(t){this.m_restitution=t},gr.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},gr.prototype.rayCast=function(t,e,n){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),n)},gr.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},gr.prototype.getAABB=function(t){return lr&&ur.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},gr.prototype.createProxies=function(t,e){lr&&ur.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var n=0;n<this.m_proxyCount;++n){var i=this.m_proxies[n];this.m_shape.computeAABB(i.aabb,e,n),i.proxyId=t.createProxy(i.aabb,i)}},gr.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var n=this.m_proxies[e];t.destroyProxy(n.proxyId),n.proxyId=null}this.m_proxyCount=0},gr.prototype.synchronize=function(t,e,n){for(var i=0;i<this.m_proxyCount;++i){var r=this.m_proxies[i],o=new dr,s=new dr;this.m_shape.computeAABB(o,e,r.childIndex),this.m_shape.computeAABB(s,n,r.childIndex),r.aabb.combine(o,s);var a=pr.sub(n.p,e.p);t.moveProxy(r.proxyId,r.aabb,a)}},gr.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},gr.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},gr.prototype.setFilterGroupIndex=function(t){return this.m_filterGroupIndex=t},gr.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},gr.prototype.setFilterCategoryBits=function(t){this.m_filterCategoryBits=t},gr.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},gr.prototype.setFilterMaskBits=function(t){this.m_filterMaskBits=t},gr.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,n=e.getFixtureA(),i=e.getFixtureB();n!=this&&i!=this||e.flagForFiltering(),t=t.next}var r=this.m_body.getWorld();if(null!=r)for(var o=r.m_broadPhase,s=0;s<this.m_proxyCount;++s)o.touchProxy(this.m_proxies[s].proxyId)}},gr.prototype.shouldCollide=function(t){if(t.m_filterGroupIndex===this.m_filterGroupIndex&&0!==t.m_filterGroupIndex)return t.m_filterGroupIndex>0;var e=0!=(t.m_filterMaskBits&this.m_filterCategoryBits),n=0!=(t.m_filterCategoryBits&this.m_filterMaskBits);return e&&n},"undefined"!=typeof DEBUG&&DEBUG;var vr="undefined"!=typeof ASSERT&&ASSERT,br=Fr,xr=Rn,$r=On,Ar=Kn,wr=Ii,Br=Nn.exports,Cr=Yi,Sr=Ri,Er=tr,Mr=nr,Tr=cr,kr=Fr.STATIC="static",Pr=Fr.KINEMATIC="kinematic",zr=Fr.DYNAMIC="dynamic",Ir={type:kr,position:Ar.zero(),angle:0,linearVelocity:Ar.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function Fr(t,e){e=$r(e,Ir),vr&&xr.assert(Ar.isValid(e.position)),vr&&xr.assert(Ar.isValid(e.linearVelocity)),vr&&xr.assert(Br.isFinite(e.angle)),vr&&xr.assert(Br.isFinite(e.angularVelocity)),vr&&xr.assert(Br.isFinite(e.angularDamping)&&e.angularDamping>=0),vr&&xr.assert(Br.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==zr?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=Sr.identity(),this.m_xf.p=Ar.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new Cr,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new Er,this.c_position=new Mr,this.m_force=Ar.zero(),this.m_torque=0,this.m_linearVelocity=Ar.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function Vr(){this.mass=0,this.center=Ar.zero(),this.I=0}Fr.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},Fr._deserialize=function(t,e,n){var i=new Fr(e,t);if(t.fixtures)for(var r=t.fixtures.length-1;r>=0;r--){var o=n(Tr,t.fixtures[r],i);i._addFixture(o)}return i},Fr.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},Fr.prototype.getWorld=function(){return this.m_world},Fr.prototype.getNext=function(){return this.m_next},Fr.prototype.setUserData=function(t){this.m_userData=t},Fr.prototype.getUserData=function(){return this.m_userData},Fr.prototype.getFixtureList=function(){return this.m_fixtureList},Fr.prototype.getJointList=function(){return this.m_jointList},Fr.prototype.getContactList=function(){return this.m_contactList},Fr.prototype.isStatic=function(){return this.m_type==kr},Fr.prototype.isDynamic=function(){return this.m_type==zr},Fr.prototype.isKinematic=function(){return this.m_type==Pr},Fr.prototype.setStatic=function(){return this.setType(kr),this},Fr.prototype.setDynamic=function(){return this.setType(zr),this},Fr.prototype.setKinematic=function(){return this.setType(Pr),this},Fr.prototype.getType=function(){return this.m_type},Fr.prototype.setType=function(t){if(vr&&xr.assert(t===kr||t===Pr||t===zr),vr&&xr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==kr&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var n=e;e=e.next,this.m_world.destroyContact(n.contact)}this.m_contactList=null;for(var i=this.m_world.m_broadPhase,r=this.m_fixtureList;r;r=r.m_next)for(var o=r.m_proxyCount,s=0;s<o;++s)i.touchProxy(r.m_proxies[s].proxyId)}},Fr.prototype.isBullet=function(){return this.m_bulletFlag},Fr.prototype.setBullet=function(t){this.m_bulletFlag=!!t},Fr.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},Fr.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},Fr.prototype.isAwake=function(){return this.m_awakeFlag},Fr.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},Fr.prototype.isActive=function(){return this.m_activeFlag},Fr.prototype.setActive=function(t){if(vr&&xr.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.destroyProxies(e);for(var i=this.m_contactList;i;){var r=i;i=i.next,this.m_world.destroyContact(r.contact)}this.m_contactList=null}},Fr.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},Fr.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},Fr.prototype.getTransform=function(){return this.m_xf},Fr.prototype.setTransform=function(t,e){if(vr&&xr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var n=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(n,this.m_xf,this.m_xf)}},Fr.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},Fr.prototype.synchronizeFixtures=function(){var t=Sr.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.synchronize(e,t,this.m_xf)},Fr.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},Fr.prototype.getPosition=function(){return this.m_xf.p},Fr.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},Fr.prototype.getAngle=function(){return this.m_sweep.a},Fr.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},Fr.prototype.getWorldCenter=function(){return this.m_sweep.c},Fr.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},Fr.prototype.getLinearVelocity=function(){return this.m_linearVelocity},Fr.prototype.getLinearVelocityFromWorldPoint=function(t){var e=Ar.sub(t,this.m_sweep.c);return Ar.add(this.m_linearVelocity,Ar.cross(this.m_angularVelocity,e))},Fr.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},Fr.prototype.setLinearVelocity=function(t){this.m_type!=kr&&(Ar.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},Fr.prototype.getAngularVelocity=function(){return this.m_angularVelocity},Fr.prototype.setAngularVelocity=function(t){this.m_type!=kr&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},Fr.prototype.getLinearDamping=function(){return this.m_linearDamping},Fr.prototype.setLinearDamping=function(t){this.m_linearDamping=t},Fr.prototype.getAngularDamping=function(){return this.m_angularDamping},Fr.prototype.setAngularDamping=function(t){this.m_angularDamping=t},Fr.prototype.getGravityScale=function(){return this.m_gravityScale},Fr.prototype.setGravityScale=function(t){this.m_gravityScale=t},Fr.prototype.getMass=function(){return this.m_mass},Fr.prototype.getInertia=function(){return this.m_I+this.m_mass*Ar.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},Fr.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},Fr.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);vr&&xr.assert(this.isDynamic());for(var t=Ar.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var n=new Vr;e.getMassData(n),this.m_mass+=n.mass,t.addMul(n.mass,n.center),this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*Ar.dot(t,t),vr&&xr.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var i=Ar.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(Ar.cross(this.m_angularVelocity,Ar.sub(this.m_sweep.c,i)))},Fr.prototype.setMassData=function(t){if(vr&&xr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==zr){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*Ar.dot(t.center,t.center),vr&&xr.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=Ar.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(Ar.cross(this.m_angularVelocity,Ar.sub(this.m_sweep.c,e)))}},Fr.prototype.applyForce=function(t,e,n){this.m_type==zr&&(n&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=Ar.cross(Ar.sub(e,this.m_sweep.c),t)))},Fr.prototype.applyForceToCenter=function(t,e){this.m_type==zr&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},Fr.prototype.applyTorque=function(t,e){this.m_type==zr&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},Fr.prototype.applyLinearImpulse=function(t,e,n){this.m_type==zr&&(n&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*Ar.cross(Ar.sub(e,this.m_sweep.c),t)))},Fr.prototype.applyAngularImpulse=function(t,e){this.m_type==zr&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},Fr.prototype.shouldCollide=function(t){if(this.m_type!=zr&&t.m_type!=zr)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},Fr.prototype._addFixture=function(t){if(vr&&xr.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},Fr.prototype.createFixture=function(t,e){if(vr&&xr.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var n=new Tr(this,t,e);return this._addFixture(n),n},Fr.prototype.destroyFixture=function(t){if(vr&&xr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){vr&&xr.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var n=this.m_fixtureList;null!=n;){if(n.m_next===t){n.m_next=t.m_next,e=!0;break}n=n.m_next}vr&&xr.assert(e);for(var i=this.m_contactList;i;){var r=i.contact;i=i.next;var o=r.getFixtureA(),s=r.getFixtureB();t!=o&&t!=s||this.m_world.destroyContact(r)}if(this.m_activeFlag){var a=this.m_world.m_broadPhase;t.destroyProxies(a)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},Fr.prototype.getWorldPoint=function(t){return Sr.mulVec2(this.m_xf,t)},Fr.prototype.getWorldVector=function(t){return wr.mulVec2(this.m_xf.q,t)},Fr.prototype.getLocalPoint=function(t){return Sr.mulTVec2(this.m_xf,t)},Fr.prototype.getLocalVector=function(t){return wr.mulTVec2(this.m_xf.q,t)};var jr="undefined"!=typeof DEBUG&&DEBUG,Lr="undefined"!=typeof ASSERT&&ASSERT,Dr=qr,Or=Rn,Rr=Kn;function qr(t,e,n,i){"object"==typeof t&&null!==t?(this.ex=Rr.clone(t),this.ey=Rr.clone(e)):"number"==typeof t?(this.ex=Rr.neo(t,n),this.ey=Rr.neo(e,i)):(this.ex=Rr.zero(),this.ey=Rr.zero())}qr.prototype.toString=function(){return JSON.stringify(this)},qr.isValid=function(t){return t&&Rr.isValid(t.ex)&&Rr.isValid(t.ey)},qr.assert=function(t){if(Lr&&!qr.isValid(t))throw jr&&Or.debug(t),new Error("Invalid Mat22!")},qr.prototype.set=function(t,e,n,i){"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof i?(this.ex.set(t,n),this.ey.set(e,i)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(Lr&&qr.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):Lr&&Or.assert(!1)},qr.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},qr.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},qr.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,n=this.ex.y,i=this.ey.y,r=t*i-e*n;0!=r&&(r=1/r);var o=new qr;return o.ex.x=r*i,o.ey.x=-r*e,o.ex.y=-r*n,o.ey.y=r*t,o},qr.prototype.solve=function(t){Lr&&Rr.assert(t);var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o);var s=Rr.zero();return s.x=o*(r*t.x-n*t.y),s.y=o*(e*t.y-i*t.x),s},qr.mul=function(t,e){if(e&&"x"in e&&"y"in e){Lr&&Rr.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return Rr.neo(n,i)}if(e&&"ex"in e&&"ey"in e)return Lr&&qr.assert(e),new qr(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y);Lr&&Or.assert(!1)},qr.mulVec2=function(t,e){Lr&&Rr.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return Rr.neo(n,i)},qr.mulMat22=function(t,e){return Lr&&qr.assert(e),new qr(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y)},qr.mulT=function(t,e){return e&&"x"in e&&"y"in e?(Lr&&Rr.assert(e),Rr.neo(Rr.dot(e,t.ex),Rr.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(Lr&&qr.assert(e),new qr(Rr.neo(Rr.dot(t.ex,e.ex),Rr.dot(t.ey,e.ex)),Rr.neo(Rr.dot(t.ex,e.ey),Rr.dot(t.ey,e.ey)))):void(Lr&&Or.assert(!1))},qr.mulTVec2=function(t,e){return Lr&&qr.assert(t),Lr&&Rr.assert(e),Rr.neo(Rr.dot(e,t.ex),Rr.dot(e,t.ey))},qr.mulTMat22=function(t,e){return Lr&&qr.assert(t),Lr&&qr.assert(e),new qr(Rr.neo(Rr.dot(t.ex,e.ex),Rr.dot(t.ey,e.ex)),Rr.neo(Rr.dot(t.ex,e.ey),Rr.dot(t.ey,e.ey)))},qr.abs=function(t){return Lr&&qr.assert(t),new qr(Rr.abs(t.ex),Rr.abs(t.ey))},qr.add=function(t,e){return Lr&&qr.assert(t),Lr&&qr.assert(e),new qr(Rr.add(t.ex,e.ex),Rr.add(t.ey,e.ey))};var Ur={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Nr=Kn,Wr=Ri,Hr=Nn.exports,Yr=Ii;function Gr(){this.type,this.localNormal=Nr.zero(),this.localPoint=Nr.zero(),this.points=[new Jr,new Jr],this.pointCount=0}function Jr(){this.localPoint=Nr.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new Zr}function Zr(){this.cf=new Xr}function Xr(){this.indexA,this.indexB,this.typeA,this.typeB}function Kr(){this.normal,this.points=[],this.separations=[]}Ur.exports=Gr,Ur.exports.clipSegmentToLine=function(t,e,n,i,r){var o=0,s=Nr.dot(n,e[0].v)-i,a=Nr.dot(n,e[1].v)-i;if(s<=0&&t[o++].set(e[0]),a<=0&&t[o++].set(e[1]),s*a<0){var l=s/(s-a);t[o].v.setCombine(1-l,e[0].v,l,e[1].v),t[o].id.cf.indexA=r,t[o].id.cf.indexB=e[0].id.cf.indexB,t[o].id.cf.typeA=Gr.e_vertex,t[o].id.cf.typeB=Gr.e_face,++o}return o},Ur.exports.clipVertex=to,Ur.exports.getPointStates=function(t,e,n,i){for(var r=0;r<n.pointCount;++r){var o=n.points[r].id;t[r]=Qr.removeState;for(var s=0;s<i.pointCount;++s)if(i.points[s].id.key==o.key){t[r]=Qr.persistState;break}}for(r=0;r<i.pointCount;++r)for(o=i.points[r].id,e[r]=Qr.addState,s=0;s<n.pointCount;++s)if(n.points[s].id.key==o.key){e[r]=Qr.persistState;break}},Ur.exports.PointState=Qr,Gr.e_circles=0,Gr.e_faceA=1,Gr.e_faceB=2,Gr.e_vertex=0,Gr.e_face=1,Object.defineProperty(Zr.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),Zr.prototype.set=function(t){this.cf.set(t.cf)},Xr.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},Gr.prototype.getWorldManifold=function(t,e,n,i,r){if(0!=this.pointCount){var o=(t=t||new Kr).normal,s=t.points,a=t.separations;switch(this.type){case Gr.e_circles:o=Nr.neo(1,0);var l=Wr.mulVec2(e,this.localPoint),c=Wr.mulVec2(i,this.points[0].localPoint),u=Nr.sub(c,l);Nr.lengthSquared(u)>Hr.EPSILON*Hr.EPSILON&&(o.set(u),o.normalize());var h=l.clone().addMul(n,o),m=c.clone().addMul(-r,o);s[0]=Nr.mid(h,m),a[0]=Nr.dot(Nr.sub(m,h),o),s.length=1,a.length=1;break;case Gr.e_faceA:o=Yr.mulVec2(e.q,this.localNormal);for(var p=Wr.mulVec2(e,this.localPoint),d=0;d<this.pointCount;++d){var f=Wr.mulVec2(i,this.points[d].localPoint);h=Nr.clone(f).addMul(n-Nr.dot(Nr.sub(f,p),o),o),m=Nr.clone(f).subMul(r,o),s[d]=Nr.mid(h,m),a[d]=Nr.dot(Nr.sub(m,h),o)}s.length=this.pointCount,a.length=this.pointCount;break;case Gr.e_faceB:for(o=Yr.mulVec2(i.q,this.localNormal),p=Wr.mulVec2(i,this.localPoint),d=0;d<this.pointCount;++d)f=Wr.mulVec2(e,this.points[d].localPoint),m=Nr.combine(1,f,r-Nr.dot(Nr.sub(f,p),o),o),h=Nr.combine(1,f,-n,o),s[d]=Nr.mid(h,m),a[d]=Nr.dot(Nr.sub(h,m),o);s.length=this.pointCount,a.length=this.pointCount,o.mul(-1)}return t.normal=o,t.points=s,t.separations=a,t}};var Qr={nullState:0,addState:1,persistState:2,removeState:3};function to(){this.v=Nr.zero(),this.id=new Zr}to.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)};var eo={exports:{}},no={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,no.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var n in this)"function"!=typeof this[n]&&"object"!=typeof this[n]&&(e+=n+": "+this[n]+t);return e};var io="undefined"!=typeof DEBUG&&DEBUG,ro="undefined"!=typeof ASSERT&&ASSERT,oo=lo,so=Rn,ao=Nn.exports;function lo(t,e,n){if(!(this instanceof lo))return new lo(t,e,n);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=n),ro&&lo.assert(this)}lo.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},lo._deserialize=function(t){var e=Object.create(lo.prototype);return e.x=t.x,e.y=t.y,e.z=t.z,e},lo.neo=function(t,e,n){var i=Object.create(lo.prototype);return i.x=t,i.y=e,i.z=n,i},lo.clone=function(t){return ro&&lo.assert(t),lo.neo(t.x,t.y,t.z)},lo.prototype.toString=function(){return JSON.stringify(this)},lo.isValid=function(t){return t&&ao.isFinite(t.x)&&ao.isFinite(t.y)&&ao.isFinite(t.z)},lo.assert=function(t){if(ro&&!lo.isValid(t))throw io&&so.debug(t),new Error("Invalid Vec3!")},lo.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},lo.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},lo.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},lo.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},lo.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},lo.areEqual=function(t,e){return ro&&lo.assert(t),ro&&lo.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},lo.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},lo.cross=function(t,e){return new lo(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},lo.add=function(t,e){return new lo(t.x+e.x,t.y+e.y,t.z+e.z)},lo.sub=function(t,e){return new lo(t.x-e.x,t.y-e.y,t.z-e.z)},lo.mul=function(t,e){return new lo(e*t.x,e*t.y,e*t.z)},lo.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},lo.neg=function(t){return new lo(-t.x,-t.y,-t.z)};var co="undefined"!=typeof DEBUG&&DEBUG,uo="undefined"!=typeof ASSERT&&ASSERT,ho=yo,mo=Rn,po=Kn,fo=oo;function yo(t,e,n){"object"==typeof t&&null!==t?(this.ex=fo.clone(t),this.ey=fo.clone(e),this.ez=fo.clone(n)):(this.ex=fo(),this.ey=fo(),this.ez=fo())}yo.prototype.toString=function(){return JSON.stringify(this)},yo.isValid=function(t){return t&&fo.isValid(t.ex)&&fo.isValid(t.ey)&&fo.isValid(t.ez)},yo.assert=function(t){if(uo&&!yo.isValid(t))throw co&&mo.debug(t),new Error("Invalid Mat33!")},yo.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},yo.prototype.solve33=function(t){var e=fo.dot(this.ex,fo.cross(this.ey,this.ez));0!=e&&(e=1/e);var n=new fo;return n.x=e*fo.dot(t,fo.cross(this.ey,this.ez)),n.y=e*fo.dot(this.ex,fo.cross(t,this.ez)),n.z=e*fo.dot(this.ex,fo.cross(this.ey,t)),n},yo.prototype.solve22=function(t){var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o);var s=po.zero();return s.x=o*(r*t.x-n*t.y),s.y=o*(e*t.y-i*t.x),s},yo.prototype.getInverse22=function(t){var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o),t.ex.x=o*r,t.ey.x=-o*n,t.ex.z=0,t.ex.y=-o*i,t.ey.y=o*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},yo.prototype.getSymInverse33=function(t){var e=fo.dot(this.ex,fo.cross(this.ey,this.ez));0!=e&&(e=1/e);var n=this.ex.x,i=this.ey.x,r=this.ez.x,o=this.ey.y,s=this.ez.y,a=this.ez.z;t.ex.x=e*(o*a-s*s),t.ex.y=e*(r*s-i*a),t.ex.z=e*(i*s-r*o),t.ey.x=t.ex.y,t.ey.y=e*(n*a-r*r),t.ey.z=e*(r*i-n*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(n*o-i*i)},yo.mul=function(t,e){if(uo&&yo.assert(t),e&&"z"in e&&"y"in e&&"x"in e){uo&&fo.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,i=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,r=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new fo(n,i,r)}if(e&&"y"in e&&"x"in e)return uo&&po.assert(e),n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y,po.neo(n,i);uo&&mo.assert(!1)},yo.mulVec3=function(t,e){uo&&yo.assert(t),uo&&fo.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,i=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,r=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new fo(n,i,r)},yo.mulVec2=function(t,e){uo&&yo.assert(t),uo&&po.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return po.neo(n,i)},yo.add=function(t,e){return uo&&yo.assert(t),uo&&yo.assert(e),new yo(fo.add(t.ex,e.ex),fo.add(t.ey,e.ey),fo.add(t.ez,e.ez))},"undefined"!=typeof DEBUG&&DEBUG;var _o="undefined"!=typeof ASSERT&&ASSERT;eo.exports=Eo,eo.exports.Input=Bo,eo.exports.Output=Co,eo.exports.Proxy=Mo,eo.exports.Cache=So;var go=ni,vo=Rn,bo=no,xo=Nn.exports,$o=Kn,Ao=Ii,wo=Ri;function Bo(){this.proxyA=new Mo,this.proxyB=new Mo,this.transformA=null,this.transformB=null,this.useRadii=!1}function Co(){this.pointA=$o.zero(),this.pointB=$o.zero(),this.distance,this.iterations}function So(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function Eo(t,e,n){++bo.gjkCalls;var i=n.proxyA,r=n.proxyB,o=n.transformA,s=n.transformB,a=new ko;a.readCache(e,i,o,r,s);for(var l=a.m_v,c=go.maxDistnceIterations,u=[],h=[],m=0,p=0;p<c;){m=a.m_count;for(var d=0;d<m;++d)u[d]=l[d].indexA,h[d]=l[d].indexB;if(a.solve(),3==a.m_count)break;(x=a.getClosestPoint()).lengthSquared();var f=a.getSearchDirection();if(f.lengthSquared()<xo.EPSILON*xo.EPSILON)break;var y=l[a.m_count];y.indexA=i.getSupport(Ao.mulTVec2(o.q,$o.neg(f))),y.wA=wo.mulVec2(o,i.getVertex(y.indexA)),y.indexB=r.getSupport(Ao.mulTVec2(s.q,f)),y.wB=wo.mulVec2(s,r.getVertex(y.indexB)),y.w=$o.sub(y.wB,y.wA),++p,++bo.gjkIters;var _=!1;for(d=0;d<m;++d)if(y.indexA==u[d]&&y.indexB==h[d]){_=!0;break}if(_)break;++a.m_count}if(bo.gjkMaxIters=xo.max(bo.gjkMaxIters,p),a.getWitnessPoints(t.pointA,t.pointB),t.distance=$o.distance(t.pointA,t.pointB),t.iterations=p,a.writeCache(e),n.useRadii){var g=i.m_radius,v=r.m_radius;if(t.distance>g+v&&t.distance>xo.EPSILON){t.distance-=g+v;var b=$o.sub(t.pointB,t.pointA);b.normalize(),t.pointA.addMul(g,b),t.pointB.subMul(v,b)}else{var x=$o.mid(t.pointA,t.pointB);t.pointA.set(x),t.pointB.set(x),t.distance=0}}}function Mo(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function To(){this.indexA,this.indexB,this.wA=$o.zero(),this.wB=$o.zero(),this.w=$o.zero(),this.a}function ko(){this.m_v1=new To,this.m_v2=new To,this.m_v3=new To,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}bo.gjkCalls=0,bo.gjkIters=0,bo.gjkMaxIters=0,Mo.prototype.getVertexCount=function(){return this.m_count},Mo.prototype.getVertex=function(t){return _o&&vo.assert(0<=t&&t<this.m_count),this.m_vertices[t]},Mo.prototype.getSupport=function(t){for(var e=0,n=$o.dot(this.m_vertices[0],t),i=0;i<this.m_count;++i){var r=$o.dot(this.m_vertices[i],t);r>n&&(e=i,n=r)}return e},Mo.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},Mo.prototype.set=function(t,e){_o&&vo.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},To.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=$o.clone(t.wA),this.wB=$o.clone(t.wB),this.w=$o.clone(t.w),this.a=t.a},ko.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},ko.prototype.readCache=function(t,e,n,i,r){_o&&vo.assert(t.count<=3),this.m_count=t.count;for(var o=0;o<this.m_count;++o){(u=this.m_v[o]).indexA=t.indexA[o],u.indexB=t.indexB[o];var s=e.getVertex(u.indexA),a=i.getVertex(u.indexB);u.wA=wo.mulVec2(n,s),u.wB=wo.mulVec2(r,a),u.w=$o.sub(u.wB,u.wA),u.a=0}if(this.m_count>1){var l=t.metric,c=this.getMetric();(c<.5*l||2*l<c||c<xo.EPSILON)&&(this.m_count=0)}var u;0==this.m_count&&((u=this.m_v[0]).indexA=0,u.indexB=0,s=e.getVertex(0),a=i.getVertex(0),u.wA=wo.mulVec2(n,s),u.wB=wo.mulVec2(r,a),u.w=$o.sub(u.wB,u.wA),u.a=1,this.m_count=1)},ko.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},ko.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return $o.neg(this.m_v1.w);case 2:var t=$o.sub(this.m_v2.w,this.m_v1.w);return $o.cross(t,$o.neg(this.m_v1.w))>0?$o.cross(1,t):$o.cross(t,1);default:return _o&&vo.assert(!1),$o.zero()}},ko.prototype.getClosestPoint=function(){switch(this.m_count){default:return _o&&vo.assert(!1),$o.zero();case 1:return $o.clone(this.m_v1.w);case 2:return $o.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return $o.zero()}},ko.prototype.getWitnessPoints=function(t,e){switch(this.m_count){default:_o&&vo.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t)}},ko.prototype.getMetric=function(){switch(this.m_count){default:return _o&&vo.assert(!1),0;case 1:return 0;case 2:return $o.distance(this.m_v1.w,this.m_v2.w);case 3:return $o.cross($o.sub(this.m_v2.w,this.m_v1.w),$o.sub(this.m_v3.w,this.m_v1.w))}},ko.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:_o&&vo.assert(!1)}},ko.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,n=$o.sub(e,t),i=-$o.dot(t,n);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);var r=$o.dot(e,n);if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var o=1/(r+i);this.m_v1.a=r*o,this.m_v2.a=i*o,this.m_count=2},ko.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,n=this.m_v3.w,i=$o.sub(e,t),r=$o.dot(t,i),o=$o.dot(e,i),s=-r,a=$o.sub(n,t),l=$o.dot(t,a),c=$o.dot(n,a),u=-l,h=$o.sub(n,e),m=$o.dot(e,h),p=$o.dot(n,h),d=-m,f=$o.cross(i,a),y=f*$o.cross(e,n),_=f*$o.cross(n,t),g=f*$o.cross(t,e);if(s<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&s>0&&g<=0){var v=1/(o+s);return this.m_v1.a=o*v,this.m_v2.a=s*v,void(this.m_count=2)}if(c>0&&u>0&&_<=0){var b=1/(c+u);return this.m_v1.a=c*b,this.m_v3.a=u*b,this.m_count=2,void this.m_v2.set(this.m_v3)}if(o<=0&&d<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(c<=0&&p<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(p>0&&d>0&&y<=0){var x=1/(p+d);return this.m_v2.a=p*x,this.m_v3.a=d*x,this.m_count=2,void this.m_v1.set(this.m_v3)}var $=1/(y+_+g);this.m_v1.a=y*$,this.m_v2.a=_*$,this.m_v3.a=g*$,this.m_count=3},Eo.testOverlap=function(t,e,n,i,r,o){var s=new Bo;s.proxyA.set(t,e),s.proxyB.set(n,i),s.transformA=r,s.transformB=o,s.useRadii=!0;var a=new So,l=new Co;return Eo(l,a,s),l.distance<10*xo.EPSILON},"undefined"!=typeof DEBUG&&DEBUG;var Po="undefined"!=typeof ASSERT&&ASSERT,zo=Rn,Io=Nn.exports,Fo=Kn,Vo=Ri,jo=Dr,Lo=Ii,Do=ni,Oo=Ur.exports,Ro=eo.exports,qo=No;function Uo(t){this.contact=t,this.prev,this.next,this.other}function No(t,e,n,i,r){this.m_nodeA=new Uo(this),this.m_nodeB=new Uo(this),this.m_fixtureA=t,this.m_fixtureB=n,this.m_indexA=e,this.m_indexB=i,this.m_evaluateFcn=r,this.m_manifold=new Oo,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=Ho(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=Yo(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=Fo.zero(),this.v_normalMass=new jo,this.v_K=new jo,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=Fo.zero(),this.p_localPoint=Fo.zero(),this.p_localCenterA=Fo.zero(),this.p_localCenterB=Fo.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function Wo(){this.rA=Fo.zero(),this.rB=Fo.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function Ho(t,e){return Io.sqrt(t*e)}function Yo(t,e){return t>e?t:e}No.prototype.initConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getShape(),r=n.getShape(),o=e.getBody(),s=n.getBody(),a=this.getManifold(),l=a.pointCount;Po&&zo.assert(l>0),this.v_invMassA=o.m_invMass,this.v_invMassB=s.m_invMass,this.v_invIA=o.m_invI,this.v_invIB=s.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=o.m_invMass,this.p_invMassB=s.m_invMass,this.p_invIA=o.m_invI,this.p_invIB=s.m_invI,this.p_localCenterA=Fo.clone(o.m_sweep.localCenter),this.p_localCenterB=Fo.clone(s.m_sweep.localCenter),this.p_radiusA=i.m_radius,this.p_radiusB=r.m_radius,this.p_type=a.type,this.p_localNormal=Fo.clone(a.localNormal),this.p_localPoint=Fo.clone(a.localPoint),this.p_pointCount=l;for(var c=0;c<l;++c){var u=a.points[c],h=this.v_points[c]=new Wo;t.warmStarting?(h.normalImpulse=t.dtRatio*u.normalImpulse,h.tangentImpulse=t.dtRatio*u.tangentImpulse):(h.normalImpulse=0,h.tangentImpulse=0),h.rA.setZero(),h.rB.setZero(),h.normalMass=0,h.tangentMass=0,h.velocityBias=0,this.p_localPoints[c]=Fo.clone(u.localPoint)}},No.prototype.getManifold=function(){return this.m_manifold},No.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),n=this.m_fixtureB.getBody(),i=this.m_fixtureA.getShape(),r=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),i.m_radius,n.getTransform(),r.m_radius)},No.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},No.prototype.isEnabled=function(){return this.m_enabledFlag},No.prototype.isTouching=function(){return this.m_touchingFlag},No.prototype.getNext=function(){return this.m_next},No.prototype.getFixtureA=function(){return this.m_fixtureA},No.prototype.getFixtureB=function(){return this.m_fixtureB},No.prototype.getChildIndexA=function(){return this.m_indexA},No.prototype.getChildIndexB=function(){return this.m_indexB},No.prototype.flagForFiltering=function(){this.m_filterFlag=!0},No.prototype.setFriction=function(t){this.m_friction=t},No.prototype.getFriction=function(){return this.m_friction},No.prototype.resetFriction=function(){this.m_friction=Ho(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},No.prototype.setRestitution=function(t){this.m_restitution=t},No.prototype.getRestitution=function(){return this.m_restitution},No.prototype.resetRestitution=function(){this.m_restitution=Yo(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},No.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},No.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},No.prototype.evaluate=function(t,e,n){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,n,this.m_fixtureB,this.m_indexB)},No.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,n=this.m_touchingFlag,i=this.m_fixtureA.isSensor(),r=this.m_fixtureB.isSensor(),o=i||r,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),l=s.getTransform(),c=a.getTransform();if(o){var u=this.m_fixtureA.getShape(),h=this.m_fixtureB.getShape();e=Ro.testOverlap(u,this.m_indexA,h,this.m_indexB,l,c),this.m_manifold.pointCount=0}else{var m=this.m_manifold;this.m_manifold=new Oo,this.evaluate(this.m_manifold,l,c),e=this.m_manifold.pointCount>0;for(var p=0;p<this.m_manifold.pointCount;++p){var d=this.m_manifold.points[p];d.normalImpulse=0,d.tangentImpulse=0;for(var f=0;f<m.pointCount;++f){var y=m.points[f];if(y.id.key==d.id.key){d.normalImpulse=y.normalImpulse,d.tangentImpulse=y.tangentImpulse;break}}}e!=n&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==n&&1==e&&t&&t.beginContact(this),1==n&&0==e&&t&&t.endContact(this),0==o&&e&&t&&t.preSolve(this,m)},No.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},No.prototype.solvePositionConstraintTOI=function(t,e,n){return this._solvePositionConstraint(t,!0,e,n)},No.prototype._solvePositionConstraint=function(t,e,n,i){var r=this.m_fixtureA,o=this.m_fixtureB,s=r.getBody(),a=o.getBody();s.c_velocity,a.c_velocity;var l=s.c_position,c=a.c_position,u=Fo.clone(this.p_localCenterA),h=Fo.clone(this.p_localCenterB),m=0,p=0;e&&s!=n&&s!=i||(m=this.p_invMassA,p=this.p_invIA);var d=0,f=0;e&&a!=n&&a!=i||(d=this.p_invMassB,f=this.p_invIB);for(var y=Fo.clone(l.c),_=l.a,g=Fo.clone(c.c),v=c.a,b=0,x=0;x<this.p_pointCount;++x){var $,A,w,B=Vo.identity(),C=Vo.identity();switch(B.q.set(_),C.q.set(v),B.p=Fo.sub(y,Lo.mulVec2(B.q,u)),C.p=Fo.sub(g,Lo.mulVec2(C.q,h)),this.p_type){case Oo.e_circles:var S=Vo.mulVec2(B,this.p_localPoint),E=Vo.mulVec2(C,this.p_localPoints[0]);($=Fo.sub(E,S)).normalize(),A=Fo.combine(.5,S,.5,E),w=Fo.dot(Fo.sub(E,S),$)-this.p_radiusA-this.p_radiusB;break;case Oo.e_faceA:$=Lo.mulVec2(B.q,this.p_localNormal);var M=Vo.mulVec2(B,this.p_localPoint),T=Vo.mulVec2(C,this.p_localPoints[x]);w=Fo.dot(Fo.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T;break;case Oo.e_faceB:$=Lo.mulVec2(C.q,this.p_localNormal),M=Vo.mulVec2(C,this.p_localPoint),T=Vo.mulVec2(B,this.p_localPoints[x]),w=Fo.dot(Fo.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T,$.mul(-1)}var k=Fo.sub(A,y),P=Fo.sub(A,g);b=Io.min(b,w);var z=e?Do.toiBaugarte:Do.baumgarte,I=Do.linearSlop,F=Do.maxLinearCorrection,V=Io.clamp(z*(w+I),-F,0),j=Fo.cross(k,$),L=Fo.cross(P,$),D=m+d+p*j*j+f*L*L,O=D>0?-V/D:0,R=Fo.mul(O,$);y.subMul(m,R),_-=p*Fo.cross(k,R),g.addMul(d,R),v+=f*Fo.cross(P,R)}return l.c.set(y),l.a=_,c.c.set(g),c.a=v,b},No.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getBody(),r=n.getBody(),o=i.c_velocity,s=r.c_velocity,a=i.c_position,l=r.c_position,c=this.p_radiusA,u=this.p_radiusB,h=this.getManifold(),m=this.v_invMassA,p=this.v_invMassB,d=this.v_invIA,f=this.v_invIB,y=Fo.clone(this.p_localCenterA),_=Fo.clone(this.p_localCenterB),g=Fo.clone(a.c),v=a.a,b=Fo.clone(o.v),x=o.w,$=Fo.clone(l.c),A=l.a,w=Fo.clone(s.v),B=s.w;Po&&zo.assert(h.pointCount>0);var C=Vo.identity(),S=Vo.identity();C.q.set(v),S.q.set(A),C.p.setCombine(1,g,-1,Lo.mulVec2(C.q,y)),S.p.setCombine(1,$,-1,Lo.mulVec2(S.q,_));var E=h.getWorldManifold(null,C,c,S,u);this.v_normal.set(E.normal);for(var M=0;M<this.v_pointCount;++M){var T=this.v_points[M];T.rA.set(Fo.sub(E.points[M],g)),T.rB.set(Fo.sub(E.points[M],$));var k=Fo.cross(T.rA,this.v_normal),P=Fo.cross(T.rB,this.v_normal),z=m+p+d*k*k+f*P*P;T.normalMass=z>0?1/z:0;var I=Fo.cross(this.v_normal,1),F=Fo.cross(T.rA,I),V=Fo.cross(T.rB,I),j=m+p+d*F*F+f*V*V;T.tangentMass=j>0?1/j:0,T.velocityBias=0;var L=Fo.dot(this.v_normal,w)+Fo.dot(this.v_normal,Fo.cross(B,T.rB))-Fo.dot(this.v_normal,b)-Fo.dot(this.v_normal,Fo.cross(x,T.rA));L<-Do.velocityThreshold&&(T.velocityBias=-this.v_restitution*L)}if(2==this.v_pointCount&&t.blockSolve){var D=this.v_points[0],O=this.v_points[1],R=Fo.cross(D.rA,this.v_normal),q=Fo.cross(D.rB,this.v_normal),U=Fo.cross(O.rA,this.v_normal),N=Fo.cross(O.rB,this.v_normal),W=m+p+d*R*R+f*q*q,H=m+p+d*U*U+f*N*N,Y=m+p+d*R*U+f*q*N;W*W<1e3*(W*H-Y*Y)?(this.v_K.ex.set(W,Y),this.v_K.ey.set(Y,H),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}a.c.set(g),a.a=v,o.v.set(b),o.w=x,l.c.set($),l.a=A,s.v.set(w),s.w=B},No.prototype.warmStartConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getBody(),r=n.getBody(),o=i.c_velocity,s=r.c_velocity;i.c_position,r.c_position;for(var a=this.v_invMassA,l=this.v_invIA,c=this.v_invMassB,u=this.v_invIB,h=Fo.clone(o.v),m=o.w,p=Fo.clone(s.v),d=s.w,f=this.v_normal,y=Fo.cross(f,1),_=0;_<this.v_pointCount;++_){var g=this.v_points[_],v=Fo.combine(g.normalImpulse,f,g.tangentImpulse,y);m-=l*Fo.cross(g.rA,v),h.subMul(a,v),d+=u*Fo.cross(g.rB,v),p.addMul(c,v)}o.v.set(h),o.w=m,s.v.set(p),s.w=d},No.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,n=0;n<this.v_pointCount;++n)e.points[n].normalImpulse=this.v_points[n].normalImpulse,e.points[n].tangentImpulse=this.v_points[n].tangentImpulse},No.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body,i=e.c_velocity;e.c_position;var r=n.c_velocity;n.c_position;var o=this.v_invMassA,s=this.v_invIA,a=this.v_invMassB,l=this.v_invIB,c=Fo.clone(i.v),u=i.w,h=Fo.clone(r.v),m=r.w,p=this.v_normal,d=Fo.cross(p,1),f=this.v_friction;Po&&zo.assert(1==this.v_pointCount||2==this.v_pointCount);for(var y=0;y<this.v_pointCount;++y){var _=this.v_points[y];(A=Fo.zero()).addCombine(1,h,1,Fo.cross(m,_.rB)),A.subCombine(1,c,1,Fo.cross(u,_.rA));var g=Fo.dot(A,d)-this.v_tangentSpeed,v=_.tangentMass*-g,b=f*_.normalImpulse;v=(w=Io.clamp(_.tangentImpulse+v,-b,b))-_.tangentImpulse,_.tangentImpulse=w;var x=Fo.mul(v,d);c.subMul(o,x),u-=s*Fo.cross(_.rA,x),h.addMul(a,x),m+=l*Fo.cross(_.rB,x)}if(1==this.v_pointCount||0==t.blockSolve)for(var $=0;$<this.v_pointCount;++$){var A;_=this.v_points[$],(A=Fo.zero()).addCombine(1,h,1,Fo.cross(m,_.rB)),A.subCombine(1,c,1,Fo.cross(u,_.rA));var w,B=Fo.dot(A,p);v=-_.normalMass*(B-_.velocityBias),v=(w=Io.max(_.normalImpulse+v,0))-_.normalImpulse,_.normalImpulse=w,x=Fo.mul(v,p),c.subMul(o,x),u-=s*Fo.cross(_.rA,x),h.addMul(a,x),m+=l*Fo.cross(_.rB,x)}else{var C=this.v_points[0],S=this.v_points[1],E=Fo.neo(C.normalImpulse,S.normalImpulse);Po&&zo.assert(E.x>=0&&E.y>=0);var M=Fo.zero().add(h).add(Fo.cross(m,C.rB)).sub(c).sub(Fo.cross(u,C.rA)),T=Fo.zero().add(h).add(Fo.cross(m,S.rB)).sub(c).sub(Fo.cross(u,S.rA)),k=Fo.dot(M,p),P=Fo.dot(T,p),z=Fo.neo(k-C.velocityBias,P-S.velocityBias);for(z.sub(jo.mulVec2(this.v_K,E));;){var I=jo.mulVec2(this.v_normalMass,z).neg();if(I.x>=0&&I.y>=0){var F=Fo.sub(I,E),V=Fo.mul(F.x,p),j=Fo.mul(F.y,p);c.subCombine(o,V,o,j),u-=s*(Fo.cross(C.rA,V)+Fo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(Fo.cross(C.rB,V)+Fo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=-C.normalMass*z.x,I.y=0,k=0,P=this.v_K.ex.y*I.x+z.y,I.x>=0&&P>=0){F=Fo.sub(I,E),V=Fo.mul(F.x,p),j=Fo.mul(F.y,p),c.subCombine(o,V,o,j),u-=s*(Fo.cross(C.rA,V)+Fo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(Fo.cross(C.rB,V)+Fo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=-S.normalMass*z.y,k=this.v_K.ey.x*I.y+z.x,P=0,I.y>=0&&k>=0){F=Fo.sub(I,E),V=Fo.mul(F.x,p),j=Fo.mul(F.y,p),c.subCombine(o,V,o,j),u-=s*(Fo.cross(C.rA,V)+Fo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(Fo.cross(C.rB,V)+Fo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=0,k=z.x,P=z.y,k>=0&&P>=0){F=Fo.sub(I,E),V=Fo.mul(F.x,p),j=Fo.mul(F.y,p),c.subCombine(o,V,o,j),u-=s*(Fo.cross(C.rA,V)+Fo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(Fo.cross(C.rB,V)+Fo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}break}}i.v.set(c),i.w=u,r.v.set(h),r.w=m};var Go=[];No.addType=function(t,e,n){Go[t]=Go[t]||{},Go[t][e]=n},No.create=function(t,e,n,i){var r,o,s=t.getType(),a=n.getType();if(o=Go[s]&&Go[s][a])r=new No(t,e,n,i,o);else{if(!(o=Go[a]&&Go[a][s]))return null;r=new No(n,i,t,e,o)}t=r.getFixtureA(),n=r.getFixtureB(),e=r.getChildIndexA(),i=r.getChildIndexB();var l=t.getBody(),c=n.getBody();return r.m_nodeA.contact=r,r.m_nodeA.other=c,r.m_nodeA.prev=null,r.m_nodeA.next=l.m_contactList,null!=l.m_contactList&&(l.m_contactList.prev=r.m_nodeA),l.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=l,r.m_nodeB.prev=null,r.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=r.m_nodeB),c.m_contactList=r.m_nodeB,0==t.isSensor()&&0==n.isSensor()&&(l.setAwake(!0),c.setAwake(!0)),r},No.destroy=function(t,e){var n=t.m_fixtureA,i=t.m_fixtureB,r=n.getBody(),o=i.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==r.m_contactList&&(r.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==n.isSensor()&&0==i.isSensor()&&(r.setAwake(!0),o.setAwake(!0));var s=n.getType(),a=i.getType(),l=Go[s][a].destroyFcn;"function"==typeof l&&l(t)},"undefined"!=typeof DEBUG&&DEBUG;var Jo="undefined"!=typeof ASSERT&&ASSERT,Zo=Qo,Xo=Rn;function Ko(){this.other=null,this.joint=null,this.prev=null,this.next=null}function Qo(t,e,n){e=t.bodyA||e,n=t.bodyB||n,Jo&&Xo.assert(e),Jo&&Xo.assert(n),Jo&&Xo.assert(e!=n),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=n,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new Ko,this.m_edgeB=new Ko,this.m_islandFlag=!1,this.m_userData=t.userData}Qo.TYPES={},Qo._deserialize=function(t,e,n){var i=Qo.TYPES[t.type];return i&&n(i,t)},Qo.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},Qo.prototype.getType=function(){return this.m_type},Qo.prototype.getBodyA=function(){return this.m_bodyA},Qo.prototype.getBodyB=function(){return this.m_bodyB},Qo.prototype.getNext=function(){return this.m_next},Qo.prototype.getUserData=function(){return this.m_userData},Qo.prototype.setUserData=function(t){this.m_userData=t},Qo.prototype.getCollideConnected=function(){return this.m_collideConnected},Qo.prototype.getAnchorA=function(){},Qo.prototype.getAnchorB=function(){},Qo.prototype.getReactionForce=function(t){},Qo.prototype.getReactionTorque=function(t){},Qo.prototype.shiftOrigin=function(t){},Qo.prototype.initVelocityConstraints=function(t){},Qo.prototype.solveVelocityConstraints=function(t){},Qo.prototype.solvePositionConstraints=function(t){};var ts={exports:{}},es={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,es.now=function(){return Date.now()},es.diff=function(t){return Date.now()-t},"undefined"!=typeof DEBUG&&DEBUG;var ns="undefined"!=typeof ASSERT&&ASSERT;ts.exports=function(t,e){var n=os.now();++ss.toiCalls,t.state=_s.e_unknown,t.t=e.tMax;var i=e.proxyA,r=e.proxyB,o=e.sweepA,s=e.sweepB;o.normalize(),s.normalize();var a=e.tMax,l=i.m_radius+r.m_radius,c=as.max(is.linearSlop,l-3*is.linearSlop),u=.25*is.linearSlop;ns&&rs.assert(c>u);var h=0,m=is.maxTOIIterations,p=0,d=new ys,f=new ps;for(f.proxyA=e.proxyA,f.proxyB=e.proxyB,f.useRadii=!1;;){var y=hs.identity(),_=hs.identity();o.getTransform(y,h),s.getTransform(_,h),f.transformA=y,f.transformB=_;var g=new ds;if(ms(g,d,f),g.distance<=0){t.state=_s.e_overlapped,t.t=0;break}if(g.distance<c+u){t.state=_s.e_touching,t.t=h;break}var v=new gs;v.initialize(d,i,o,r,s,h);for(var b=!1,x=a,$=0;;){var A=v.findMinSeparation(x);if(v.indexA,v.indexB,A>c+u){t.state=_s.e_separated,t.t=a,b=!0;break}if(A>c-u){h=x;break}var w=v.evaluate(h);if(v.indexA,v.indexB,w<c-u){t.state=_s.e_failed,t.t=h,b=!0;break}if(w<=c+u){t.state=_s.e_touching,t.t=h,b=!0;break}for(var B=0,C=h,S=x;;){var E;E=1&B?C+(c-w)*(S-C)/(A-w):.5*(C+S),++B,++ss.toiRootIters;var M=v.evaluate(E);if(v.indexA,v.indexB,as.abs(M-c)<u){x=E;break}if(M>c?(C=E,w=M):(S=E,A=M),50==B)break}if(ss.toiMaxRootIters=as.max(ss.toiMaxRootIters,B),++$==is.maxPolygonVertices)break}if(++p,++ss.toiIters,b)break;if(p==m){t.state=_s.e_failed,t.t=h;break}}ss.toiMaxIters=as.max(ss.toiMaxIters,p);var T=os.diff(n);ss.toiMaxTime=as.max(ss.toiMaxTime,T),ss.toiTime+=T},ts.exports.Input=function(){this.proxyA=new fs,this.proxyB=new fs,this.sweepA=new us,this.sweepB=new us,this.tMax},ts.exports.Output=_s;var is=ni,rs=Rn,os=es,ss=no,as=Nn.exports,ls=Kn,cs=Ii,us=Yi,hs=Ri,ms=eo.exports,ps=ms.Input,ds=ms.Output,fs=ms.Proxy,ys=ms.Cache;function _s(){this.state,this.t}function gs(){this.m_proxyA=new fs,this.m_proxyB=new fs,this.m_sweepA,this.m_sweepB,this.indexA,this.indexB,this.m_type,this.m_localPoint=ls.zero(),this.m_axis=ls.zero()}_s.e_unknown=0,_s.e_failed=1,_s.e_overlapped=2,_s.e_touching=3,_s.e_separated=4,ss.toiTime=0,ss.toiMaxTime=0,ss.toiCalls=0,ss.toiIters=0,ss.toiMaxIters=0,ss.toiRootIters=0,ss.toiMaxRootIters=0,gs.prototype.initialize=function(t,e,n,i,r,o){this.m_proxyA=e,this.m_proxyB=i;var s=t.count;ns&&rs.assert(0<s&&s<3),this.m_sweepA=n,this.m_sweepB=r;var a=hs.identity(),l=hs.identity();if(this.m_sweepA.getTransform(a,o),this.m_sweepB.getTransform(l,o),1==s){this.m_type=1;var c=this.m_proxyA.getVertex(t.indexA[0]),u=this.m_proxyB.getVertex(t.indexB[0]),h=hs.mulVec2(a,c),m=hs.mulVec2(l,u);return this.m_axis.setCombine(1,m,-1,h),y=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var p=i.getVertex(t.indexB[0]),d=i.getVertex(t.indexB[1]);this.m_axis=ls.cross(ls.sub(d,p),1),this.m_axis.normalize();var f=cs.mulVec2(l.q,this.m_axis);return this.m_localPoint=ls.mid(p,d),m=hs.mulVec2(l,this.m_localPoint),c=e.getVertex(t.indexA[0]),h=hs.mulVec2(a,c),(y=ls.dot(h,f)-ls.dot(m,f))<0&&(this.m_axis=ls.neg(this.m_axis),y=-y),y}this.m_type=2;var y,_=this.m_proxyA.getVertex(t.indexA[0]),g=this.m_proxyA.getVertex(t.indexA[1]);return this.m_axis=ls.cross(ls.sub(g,_),1),this.m_axis.normalize(),f=cs.mulVec2(a.q,this.m_axis),this.m_localPoint=ls.mid(_,g),h=hs.mulVec2(a,this.m_localPoint),u=this.m_proxyB.getVertex(t.indexB[0]),m=hs.mulVec2(l,u),(y=ls.dot(m,f)-ls.dot(h,f))<0&&(this.m_axis=ls.neg(this.m_axis),y=-y),y},gs.prototype.compute=function(t,e){var n=hs.identity(),i=hs.identity();switch(this.m_sweepA.getTransform(n,e),this.m_sweepB.getTransform(i,e),this.m_type){case 1:if(t){var r=cs.mulTVec2(n.q,this.m_axis),o=cs.mulTVec2(i.q,ls.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(r),this.indexB=this.m_proxyB.getSupport(o)}var s=this.m_proxyA.getVertex(this.indexA),a=this.m_proxyB.getVertex(this.indexB),l=hs.mulVec2(n,s),c=hs.mulVec2(i,a);return ls.dot(c,this.m_axis)-ls.dot(l,this.m_axis);case 2:var u=cs.mulVec2(n.q,this.m_axis);return l=hs.mulVec2(n,this.m_localPoint),t&&(o=cs.mulTVec2(i.q,ls.neg(u)),this.indexA=-1,this.indexB=this.m_proxyB.getSupport(o)),a=this.m_proxyB.getVertex(this.indexB),c=hs.mulVec2(i,a),ls.dot(c,u)-ls.dot(l,u);case 3:return u=cs.mulVec2(i.q,this.m_axis),c=hs.mulVec2(i,this.m_localPoint),t&&(r=cs.mulTVec2(n.q,ls.neg(u)),this.indexB=-1,this.indexA=this.m_proxyA.getSupport(r)),s=this.m_proxyA.getVertex(this.indexA),l=hs.mulVec2(n,s),ls.dot(l,u)-ls.dot(c,u);default:return ns&&rs.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},gs.prototype.findMinSeparation=function(t){return this.compute(!0,t)},gs.prototype.evaluate=function(t){return this.compute(!1,t)};var vs="undefined"!=typeof DEBUG&&DEBUG,bs="undefined"!=typeof ASSERT&&ASSERT;ki.exports=zs,ki.exports.TimeStep=Ps;var xs=ni,$s=Rn,As=Kn,ws=Nn.exports,Bs=br,Cs=qo,Ss=Zo,Es=ts.exports,Ms=Es.Input,Ts=Es.Output,ks=eo.exports;function Ps(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function zs(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}ks.Input,ks.Output,ks.Proxy,ks.Cache,Ps.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},zs.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},zs.prototype.addBody=function(t){bs&&$s.assert(t instanceof Bs,"Not a Body!",t),this.m_bodies.push(t)},zs.prototype.addContact=function(t){bs&&$s.assert(t instanceof Cs,"Not a Contact!",t),this.m_contacts.push(t)},zs.prototype.addJoint=function(t){bs&&$s.assert(t instanceof Ss,"Not a Joint!",t),this.m_joints.push(t)},zs.prototype.solveWorld=function(t){for(var e=this.m_world,n=e.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1;for(var i=e.m_contactList;i;i=i.m_next)i.m_islandFlag=!1;for(var r=e.m_jointList;r;r=r.m_next)r.m_islandFlag=!1;for(var o=this.m_stack,s=e.m_bodyList;s;s=s.m_next)if(!s.m_islandFlag&&0!=s.isAwake()&&0!=s.isActive()&&!s.isStatic()){for(this.clear(),o.push(s),s.m_islandFlag=!0;o.length>0;)if(n=o.pop(),bs&&$s.assert(1==n.isActive()),this.addBody(n),n.setAwake(!0),!n.isStatic()){for(var a=n.m_contactList;a;a=a.next){var l=a.contact;if(!l.m_islandFlag&&0!=l.isEnabled()&&0!=l.isTouching()){var c=l.m_fixtureA.m_isSensor,u=l.m_fixtureB.m_isSensor;c||u||(this.addContact(l),l.m_islandFlag=!0,(m=a.other).m_islandFlag||(o.push(m),m.m_islandFlag=!0))}}for(var h=n.m_jointList;h;h=h.next){var m;1!=h.joint.m_islandFlag&&0!=(m=h.other).isActive()&&(this.addJoint(h.joint),h.joint.m_islandFlag=!0,m.m_islandFlag||(o.push(m),m.m_islandFlag=!0))}}this.solveIsland(t);for(var p=0;p<this.m_bodies.length;++p)(n=this.m_bodies[p]).isStatic()&&(n.m_islandFlag=!1)}},zs.prototype.solveIsland=function(t){for(var e=this.m_world,n=e.m_gravity,i=e.m_allowSleep,r=t.dt,o=0;o<this.m_bodies.length;++o){var s=this.m_bodies[o],a=As.clone(s.m_sweep.c),l=s.m_sweep.a,c=As.clone(s.m_linearVelocity),u=s.m_angularVelocity;s.m_sweep.c0.set(s.m_sweep.c),s.m_sweep.a0=s.m_sweep.a,s.isDynamic()&&(c.addMul(r*s.m_gravityScale,n),c.addMul(r*s.m_invMass,s.m_force),u+=r*s.m_invI*s.m_torque,c.mul(1/(1+r*s.m_linearDamping)),u*=1/(1+r*s.m_angularDamping)),s.c_position.c=a,s.c_position.a=l,s.c_velocity.v=c,s.c_velocity.w=u}for(o=0;o<this.m_contacts.length;++o)this.m_contacts[o].initConstraint(t);for(vs&&this.printBodies("M: "),o=0;o<this.m_contacts.length;++o)this.m_contacts[o].initVelocityConstraint(t);if(vs&&this.printBodies("R: "),t.warmStarting)for(o=0;o<this.m_contacts.length;++o)this.m_contacts[o].warmStartConstraint(t);for(vs&&this.printBodies("Q: "),o=0;o<this.m_joints.length;++o)this.m_joints[o].initVelocityConstraints(t);for(vs&&this.printBodies("E: "),o=0;o<t.velocityIterations;++o){for(var h=0;h<this.m_joints.length;++h)this.m_joints[h].solveVelocityConstraints(t);for(h=0;h<this.m_contacts.length;++h)this.m_contacts[h].solveVelocityConstraint(t)}for(vs&&this.printBodies("D: "),o=0;o<this.m_contacts.length;++o)this.m_contacts[o].storeConstraintImpulses(t);for(vs&&this.printBodies("C: "),o=0;o<this.m_bodies.length;++o){s=this.m_bodies[o],a=As.clone(s.c_position.c),l=s.c_position.a,c=As.clone(s.c_velocity.v),u=s.c_velocity.w;var m=As.mul(r,c);if(As.lengthSquared(m)>xs.maxTranslationSquared){var p=xs.maxTranslation/m.length();c.mul(p)}var d=r*u;d*d>xs.maxRotationSquared&&(u*=p=xs.maxRotation/ws.abs(d)),a.addMul(r,c),l+=r*u,s.c_position.c.set(a),s.c_position.a=l,s.c_velocity.v.set(c),s.c_velocity.w=u}vs&&this.printBodies("B: ");var f=!1;for(o=0;o<t.positionIterations;++o){var y=0;for(h=0;h<this.m_contacts.length;++h){var _=this.m_contacts[h].solvePositionConstraint(t);y=ws.min(y,_)}var g=y>=-3*xs.linearSlop,v=!0;for(h=0;h<this.m_joints.length;++h){var b=this.m_joints[h].solvePositionConstraints(t);v=v&&b}if(g&&v){f=!0;break}}for(vs&&this.printBodies("L: "),o=0;o<this.m_bodies.length;++o)(s=this.m_bodies[o]).m_sweep.c.set(s.c_position.c),s.m_sweep.a=s.c_position.a,s.m_linearVelocity.set(s.c_velocity.v),s.m_angularVelocity=s.c_velocity.w,s.synchronizeTransform();if(this.postSolveIsland(),i){var x=1/0,$=xs.linearSleepToleranceSqr,A=xs.angularSleepToleranceSqr;for(o=0;o<this.m_bodies.length;++o)(s=this.m_bodies[o]).isStatic()||(0==s.m_autoSleepFlag||s.m_angularVelocity*s.m_angularVelocity>A||As.lengthSquared(s.m_linearVelocity)>$?(s.m_sleepTime=0,x=0):(s.m_sleepTime+=r,x=ws.min(x,s.m_sleepTime)));if(x>=xs.timeToSleep&&f)for(o=0;o<this.m_bodies.length;++o)(s=this.m_bodies[o]).setAwake(!1)}},zs.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var n=this.m_bodies[e];$s.debug(t,n.c_position.a,n.c_position.c.x,n.c_position.c.y,n.c_velocity.w,n.c_velocity.v.x,n.c_velocity.v.y)}};var Is=new Ps;function Fs(){this.normalImpulses=[],this.tangentImpulses=[]}zs.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var n=e.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1,n.m_sweep.alpha0=0;for(var i=e.m_contactList;i;i=i.m_next)i.m_toiFlag=!1,i.m_islandFlag=!1,i.m_toiCount=0,i.m_toi=1}for(;;){var r=null,o=1;for(i=e.m_contactList;i;i=i.m_next)if(0!=i.isEnabled()&&!(i.m_toiCount>xs.maxSubSteps)){var s=1;if(i.m_toiFlag)s=i.m_toi;else{var a=i.getFixtureA(),l=i.getFixtureB();if(a.isSensor()||l.isSensor())continue;var c=a.getBody(),u=l.getBody();bs&&$s.assert(c.isDynamic()||u.isDynamic());var h=c.isAwake()&&!c.isStatic(),m=u.isAwake()&&!u.isStatic();if(0==h&&0==m)continue;var p=c.isBullet()||!c.isDynamic(),d=u.isBullet()||!u.isDynamic();if(0==p&&0==d)continue;var f=c.m_sweep.alpha0;c.m_sweep.alpha0<u.m_sweep.alpha0?(f=u.m_sweep.alpha0,c.m_sweep.advance(f)):u.m_sweep.alpha0<c.m_sweep.alpha0&&(f=c.m_sweep.alpha0,u.m_sweep.advance(f)),bs&&$s.assert(f<1);var y=i.getChildIndexA(),_=i.getChildIndexB();c.m_sweep,u.m_sweep;var g=new Ms;g.proxyA.set(a.getShape(),y),g.proxyB.set(l.getShape(),_),g.sweepA.set(c.m_sweep),g.sweepB.set(u.m_sweep),g.tMax=1;var v=new Ts;Es(v,g);var b=v.t;s=v.state==Ts.e_touching?ws.min(f+(1-f)*b,1):1,i.m_toi=s,i.m_toiFlag=!0}s<o&&(r=i,o=s)}if(null==r||1-10*ws.EPSILON<o){e.m_stepComplete=!0;break}a=r.getFixtureA(),l=r.getFixtureB(),c=a.getBody(),u=l.getBody();var x=c.m_sweep.clone(),$=u.m_sweep.clone();if(c.advance(o),u.advance(o),r.update(e),r.m_toiFlag=!1,++r.m_toiCount,0!=r.isEnabled()&&0!=r.isTouching()){c.setAwake(!0),u.setAwake(!0),this.clear(),this.addBody(c),this.addBody(u),this.addContact(r),c.m_islandFlag=!0,u.m_islandFlag=!0,r.m_islandFlag=!0;for(var A=[c,u],w=0;w<A.length;++w)if((k=A[w]).isDynamic())for(var B=k.m_contactList;B;B=B.next){var C=B.contact;if(!C.m_islandFlag){var S=B.other;if(!S.isDynamic()||k.isBullet()||S.isBullet()){var E=C.m_fixtureA.m_isSensor,M=C.m_fixtureB.m_isSensor;if(!E&&!M){var T=S.m_sweep.clone();0==S.m_islandFlag&&S.advance(o),C.update(e),0!=C.isEnabled()&&0!=C.isTouching()?(C.m_islandFlag=!0,this.addContact(C),S.m_islandFlag||(S.m_islandFlag=!0,S.isStatic()||S.setAwake(!0),this.addBody(S))):(S.m_sweep.set(T),S.synchronizeTransform())}}}}for(Is.reset((1-o)*t.dt),Is.dtRatio=1,Is.positionIterations=20,Is.velocityIterations=t.velocityIterations,Is.warmStarting=!1,this.solveIslandTOI(Is,c,u),w=0;w<this.m_bodies.length;++w){var k;if((k=this.m_bodies[w]).m_islandFlag=!1,k.isDynamic())for(k.synchronizeFixtures(),B=k.m_contactList;B;B=B.next)B.contact.m_toiFlag=!1,B.contact.m_islandFlag=!1}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else r.setEnabled(!1),c.m_sweep.set(x),u.m_sweep.set($),c.synchronizeTransform(),u.synchronizeTransform()}if(vs)for(n=e.m_bodyList;n;n=n.m_next)i=n.m_sweep.c,n.m_sweep.a,n.m_linearVelocity,n.m_angularVelocity},zs.prototype.solveIslandTOI=function(t,e,n){this.m_world;for(var i=0;i<this.m_bodies.length;++i)(l=this.m_bodies[i]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity;for(i=0;i<this.m_contacts.length;++i)this.m_contacts[i].initConstraint(t);for(i=0;i<t.positionIterations;++i){for(var r=0,o=0;o<this.m_contacts.length;++o){var s=this.m_contacts[o].solvePositionConstraintTOI(t,e,n);r=ws.min(r,s)}if(r>=-1.5*xs.linearSlop)break}for(e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,n.m_sweep.c0.set(n.c_position.c),n.m_sweep.a0=n.c_position.a,i=0;i<this.m_contacts.length;++i)this.m_contacts[i].initVelocityConstraint(t);for(i=0;i<t.velocityIterations;++i)for(o=0;o<this.m_contacts.length;++o)this.m_contacts[o].solveVelocityConstraint(t);var a=t.dt;for(i=0;i<this.m_bodies.length;++i){var l=this.m_bodies[i],c=As.clone(l.c_position.c),u=l.c_position.a,h=As.clone(l.c_velocity.v),m=l.c_velocity.w,p=As.mul(a,h);if(As.dot(p,p)>xs.maxTranslationSquared){var d=xs.maxTranslation/p.length();h.mul(d)}var f=a*m;f*f>xs.maxRotationSquared&&(m*=d=xs.maxRotation/ws.abs(f)),c.addMul(a,h),u+=a*m,l.c_position.c=c,l.c_position.a=u,l.c_velocity.v=h,l.c_velocity.w=m,l.m_sweep.c=c,l.m_sweep.a=u,l.m_linearVelocity=h,l.m_angularVelocity=m,l.synchronizeTransform()}this.postSolveIsland()},zs.prototype.postSolveIsland=function(){for(var t=new Fs,e=0;e<this.m_contacts.length;++e){for(var n=this.m_contacts[e],i=0;i<n.v_points.length;++i)t.normalImpulses.push(n.v_points[i].normalImpulse),t.tangentImpulses.push(n.v_points[i].tangentImpulse);this.m_world.postSolve(n,t)}},"undefined"!=typeof DEBUG&&DEBUG;var Vs="undefined"!=typeof ASSERT&&ASSERT,js=Ys,Ls=On,Ds=Rn,Os=Kn,Rs=Mi,qs=ki.exports,Us=br,Ns=Zo,Ws=qo,Hs={gravity:Os.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function Ys(t){if(!(this instanceof Ys))return new Ys(t);t&&Os.isValid(t)&&(t={gravity:t}),t=Ls(t,Hs),this.m_solver=new qs(this),this.m_broadPhase=new Rs,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=Os.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.addPair=this.createContact.bind(this)}Ys.prototype._serialize=function(){for(var t=[],e=[],n=this.getBodyList();n;n=n.getNext())t.push(n);for(var i=this.getJointList();i;i=i.getNext())"function"==typeof i._serialize&&e.push(i);return{gravity:this.m_gravity,bodies:t,joints:e}},Ys._deserialize=function(t,e,n){if(!t)return new Ys;var i=new Ys(t.gravity);if(t.bodies)for(var r=t.bodies.length-1;r>=0;r-=1)i._addBody(n(Us,t.bodies[r],i));if(t.joints)for(r=t.joints.length-1;r>=0;r--)i.createJoint(n(Ns,t.joints[r],i));return i},Ys.prototype.getBodyList=function(){return this.m_bodyList},Ys.prototype.getJointList=function(){return this.m_jointList},Ys.prototype.getContactList=function(){return this.m_contactList},Ys.prototype.getBodyCount=function(){return this.m_bodyCount},Ys.prototype.getJointCount=function(){return this.m_jointCount},Ys.prototype.getContactCount=function(){return this.m_contactCount},Ys.prototype.setGravity=function(t){this.m_gravity=t},Ys.prototype.getGravity=function(){return this.m_gravity},Ys.prototype.isLocked=function(){return this.m_locked},Ys.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},Ys.prototype.getAllowSleeping=function(){return this.m_allowSleep},Ys.prototype.setWarmStarting=function(t){this.m_warmStarting=t},Ys.prototype.getWarmStarting=function(){return this.m_warmStarting},Ys.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},Ys.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},Ys.prototype.setSubStepping=function(t){this.m_subStepping=t},Ys.prototype.getSubStepping=function(){return this.m_subStepping},Ys.prototype.setAutoClearForces=function(t){this.m_clearForces=t},Ys.prototype.getAutoClearForces=function(){return this.m_clearForces},Ys.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},Ys.prototype.queryAABB=function(t,e){Vs&&Ds.assert("function"==typeof e);var n=this.m_broadPhase;this.m_broadPhase.query(t,(function(t){var i=n.getUserData(t);return e(i.fixture)}))},Ys.prototype.rayCast=function(t,e,n){Vs&&Ds.assert("function"==typeof n);var i=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},(function(t,e){var r=i.getUserData(e),o=r.fixture,s=r.childIndex,a={};if(o.rayCast(a,t,s)){var l=a.fraction,c=Os.add(Os.mul(1-l,t.p1),Os.mul(l,t.p2));return n(o,c,a.normal,l)}return t.maxFraction}))},Ys.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},Ys.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},Ys.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},Ys.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},Ys.prototype.shiftOrigin=function(t){if(Vs&&Ds.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var n=this.m_jointList;n;n=n.m_next)n.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},Ys.prototype._addBody=function(t){Vs&&Ds.assert(!1===this.isLocked()),this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},Ys.prototype.createBody=function(t,e){if(Vs&&Ds.assert(0==this.isLocked()),this.isLocked())return null;t&&Os.isValid(t)&&(t={position:t,angle:e});var n=new Us(this,t);return this._addBody(n),n},Ys.prototype.createDynamicBody=function(t,e){return t?Os.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},Ys.prototype.createKinematicBody=function(t,e){return t?Os.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},Ys.prototype.destroyBody=function(t){if(Vs&&Ds.assert(this.m_bodyCount>0),Vs&&Ds.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var n=e;e=e.next,this.publish("remove-joint",n.joint),this.destroyJoint(n.joint),t.m_jointList=e}t.m_jointList=null;for(var i=t.m_contactList;i;){var r=i;i=i.next,this.destroyContact(r.contact),t.m_contactList=i}t.m_contactList=null;for(var o=t.m_fixtureList;o;){var s=o;o=o.m_next,this.publish("remove-fixture",s),s.destroyProxies(this.m_broadPhase),t.m_fixtureList=o}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},Ys.prototype.createJoint=function(t){if(Vs&&Ds.assert(!!t.m_bodyA),Vs&&Ds.assert(!!t.m_bodyB),Vs&&Ds.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},Ys.prototype.destroyJoint=function(t){if(Vs&&Ds.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,n=t.m_bodyB;if(e.setAwake(!0),n.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,Vs&&Ds.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var i=n.getContactList();i;)i.other==e&&i.contact.flagForFiltering(),i=i.next;this.publish("remove-joint",t)}};var Gs=new qs.TimeStep;Ys.prototype.step=function(t,e,n){if(this.publish("pre-step",t),(0|e)!==e&&(e=0),e=e||this.m_velocityIterations,n=n||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,Gs.reset(t),Gs.velocityIterations=e,Gs.positionIterations=n,Gs.warmStarting=this.m_warmStarting,Gs.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(Gs);for(var i=this.m_bodyList;i;i=i.getNext())0!=i.m_islandFlag&&(i.isStatic()||i.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(Gs),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",t)},Ys.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},Ys.prototype.createContact=function(t,e){var n=t.fixture,i=e.fixture,r=t.childIndex,o=e.childIndex,s=n.getBody(),a=i.getBody();if(s!=a){for(var l=a.getContactList();l;){if(l.other==s){var c=l.contact.getFixtureA(),u=l.contact.getFixtureB(),h=l.contact.getChildIndexA(),m=l.contact.getChildIndexB();if(c==n&&u==i&&h==r&&m==o)return;if(c==i&&u==n&&h==o&&m==r)return}l=l.next}if(0!=a.shouldCollide(s)&&0!=i.shouldCollide(n)){var p=Ws.create(n,r,i,o);null!=p&&(p.m_prev=null,null!=this.m_contactList&&(p.m_next=this.m_contactList,this.m_contactList.m_prev=p),this.m_contactList=p,++this.m_contactCount)}}},Ys.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var n=t.getFixtureA(),i=t.getFixtureB(),r=t.getChildIndexA(),o=t.getChildIndexB(),s=n.getBody(),a=i.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==i.shouldCollide(n)){this.destroyContact(t);continue}t.m_filterFlag=!1}var l=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=l||0!=c){var u=n.m_proxies[r].proxyId,h=i.m_proxies[o].proxyId;0!=this.m_broadPhase.testOverlap(u,h)?t.update(this):this.destroyContact(t)}}},Ys.prototype.destroyContact=function(t){Ws.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},Ys.prototype._listeners=null,Ys.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e||(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this},Ys.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var n=this._listeners&&this._listeners[t];if(!n||!n.length)return this;var i=n.indexOf(e);return i>=0&&n.splice(i,1),this},Ys.prototype.publish=function(t,e,n,i){var r=this._listeners&&this._listeners[t];if(!r||!r.length)return 0;for(var o=0;o<r.length;o++)r[o].call(this,e,n,i);return r.length},Ys.prototype.beginContact=function(t){this.publish("begin-contact",t)},Ys.prototype.endContact=function(t){this.publish("end-contact",t)},Ys.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},Ys.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)};var Js=js,Zs=br,Xs=Zo,Ks=cr,Qs=sr,ta=Kn,ea=oo,na=0;function ia(t){var e=(t=t||{}).rootClass||Js,n=t.preSerialize||function(t){return t},i=t.postSerialize||function(t,e){return t},r=t.preDeserialize||function(t){return t},o=t.postDeserialize||function(t,e){return t},s={World:Js,Body:Zs,Joint:Xs,Fixture:Ks,Shape:Qs},a=Object.assign({Vec2:ta,Vec3:ea},s);this.toJson=function(t){var e=[],r=[t],o={};function a(t,n){if(t.__sid=t.__sid||++na,!o[t.__sid]){r.push(t);var i={refIndex:e.length+r.length,refType:n};o[t.__sid]=i}return o[t.__sid]}function l(t,e){if("object"!=typeof t||null===t)return t;if("function"==typeof t._serialize){if(t!==e)for(var r in s)if(t instanceof s[r])return a(t,r);t=function(t){var e=(t=n(t))._serialize();return i(e,t)}(t)}if(Array.isArray(t)){for(var o=[],c=0;c<t.length;c++)o[c]=l(t[c]);t=o}else{for(var c in o={},t)t.hasOwnProperty(c)&&(o[c]=l(t[c]));t=o}return t}for(;r.length;){var c=r.shift(),u=l(c,c);e.push(u)}return e},this.fromJson=function(t){var n={};function i(t,e,n){e=r(e);var i=t._deserialize(e,n,s);return i=o(i,e)}function s(e,r,o){if(!r.refIndex)return e&&e._deserialize&&i(e,r,o);e=a[r.refType]||e;var s=r.refIndex;if(!n[s]){var l=i(e,t[s],o);n[s]=l}return n[s]}return e._deserialize(t[0],null,s)}}Dn.exports=ia;var ra=new ia,oa=(t("t",Dn.exports.toJson=ra.toJson),t("f",Dn.exports.fromJson=ra.fromJson),t("l",{}));"undefined"!=typeof DEBUG&&DEBUG;var sa="undefined"!=typeof ASSERT&&ASSERT,aa=pa,la=Rn,ca=Nn.exports,ua=Ii,ha=Kn,ma=sr;function pa(t,e){if(!(this instanceof pa))return new pa(t,e);pa._super.call(this),this.m_type=pa.TYPE,this.m_p=ha.zero(),this.m_radius=1,"object"==typeof t&&ha.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}pa._super=ma,pa.prototype=Object.create(pa._super.prototype),pa.TYPE="circle",ma.TYPES[pa.TYPE]=pa,pa.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},pa._deserialize=function(t){return new pa(t.p,t.radius)},pa.prototype.getRadius=function(){return this.m_radius},pa.prototype.getCenter=function(){return this.m_p},pa.prototype.getVertex=function(t){return sa&&la.assert(0==t),this.m_p},pa.prototype.getVertexCount=function(t){return 1},pa.prototype._clone=function(){var t=new pa;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},pa.prototype.getChildCount=function(){return 1},pa.prototype.testPoint=function(t,e){var n=ha.add(t.p,ua.mulVec2(t.q,this.m_p)),i=ha.sub(e,n);return ha.dot(i,i)<=this.m_radius*this.m_radius},pa.prototype.rayCast=function(t,e,n,i){var r=ha.add(n.p,ua.mulVec2(n.q,this.m_p)),o=ha.sub(e.p1,r),s=ha.dot(o,o)-this.m_radius*this.m_radius,a=ha.sub(e.p2,e.p1),l=ha.dot(o,a),c=ha.dot(a,a),u=l*l-c*s;if(u<0||c<ca.EPSILON)return!1;var h=-(l+ca.sqrt(u));return 0<=h&&h<=e.maxFraction*c&&(h/=c,t.fraction=h,t.normal=ha.add(o,ha.mul(h,a)),t.normal.normalize(),!0)},pa.prototype.computeAABB=function(t,e,n){var i=ha.add(e.p,ua.mulVec2(e.q,this.m_p));t.lowerBound.set(i.x-this.m_radius,i.y-this.m_radius),t.upperBound.set(i.x+this.m_radius,i.y+this.m_radius)},pa.prototype.computeMass=function(t,e){t.mass=e*ca.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+ha.dot(this.m_p,this.m_p))},pa.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var da=ba,fa=ni,ya=sr,_a=Ri,ga=Ii,va=Kn;function ba(t,e){if(!(this instanceof ba))return new ba(t,e);ba._super.call(this),this.m_type=ba.TYPE,this.m_radius=fa.polygonRadius,this.m_vertex1=t?va.clone(t):va.zero(),this.m_vertex2=e?va.clone(e):va.zero(),this.m_vertex0=va.zero(),this.m_vertex3=va.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}ba._super=ya,ba.prototype=Object.create(ba._super.prototype),ba.TYPE="edge",ya.TYPES[ba.TYPE]=ba,ba.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},ba._deserialize=function(t){var e=new ba(t.vertex1,t.vertex2);return e.hasVertex0&&e.setPrev(t.vertex0),e.hasVertex3&&e.setNext(t.vertex3),e},ba.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},ba.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},ba.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},ba.prototype._clone=function(){var t=new ba;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},ba.prototype.getChildCount=function(){return 1},ba.prototype.testPoint=function(t,e){return!1},ba.prototype.rayCast=function(t,e,n,i){var r=ga.mulTVec2(n.q,va.sub(e.p1,n.p)),o=ga.mulTVec2(n.q,va.sub(e.p2,n.p)),s=va.sub(o,r),a=this.m_vertex1,l=this.m_vertex2,c=va.sub(l,a),u=va.neo(c.y,-c.x);u.normalize();var h=va.dot(u,va.sub(a,r)),m=va.dot(u,s);if(0==m)return!1;var p=h/m;if(p<0||e.maxFraction<p)return!1;var d=va.add(r,va.mul(p,s)),f=va.sub(l,a),y=va.dot(f,f);if(0==y)return!1;var _=va.dot(va.sub(d,a),f)/y;return!(_<0||1<_||(t.fraction=p,t.normal=h>0?ga.mulVec2(n.q,u).neg():ga.mulVec2(n.q,u),0))},ba.prototype.computeAABB=function(t,e,n){var i=_a.mulVec2(e,this.m_vertex1),r=_a.mulVec2(e,this.m_vertex2);t.combinePoints(i,r),t.extend(this.m_radius)},ba.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},ba.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var xa="undefined"!=typeof ASSERT&&ASSERT,$a=Ta,Aa=Rn,wa=Nn.exports,Ba=Ri,Ca=Ii,Sa=Kn,Ea=ni,Ma=sr;function Ta(t){if(!(this instanceof Ta))return new Ta(t);Ta._super.call(this),this.m_type=Ta.TYPE,this.m_radius=Ea.polygonRadius,this.m_centroid=Sa.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}Ta._super=Ma,Ta.prototype=Object.create(Ta._super.prototype),Ta.TYPE="polygon",Ma.TYPES[Ta.TYPE]=Ta,Ta.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},Ta._deserialize=function(t,e,n){var i=[];if(t.vertices)for(var r=0;r<t.vertices.length;r++)i.push(n(Sa,t.vertices[r]));return new Ta(i)},Ta.prototype.getVertex=function(t){return xa&&Aa.assert(0<=t&&t<this.m_count),this.m_vertices[t]},Ta.prototype._clone=function(){var t=new Ta;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},Ta.prototype.getChildCount=function(){return 1},Ta.prototype._reset=function(){this._set(this.m_vertices)},Ta.prototype._set=function(t){if(xa&&Aa.assert(3<=t.length&&t.length<=Ea.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=wa.min(t.length,Ea.maxPolygonVertices),n=[],i=0;i<e;++i){for(var r=t[i],o=!0,s=0;s<n.length;++s)if(Sa.distanceSquared(r,n[s])<.25*Ea.linearSlopSquared){o=!1;break}o&&n.push(r)}if((e=n.length)<3)return xa&&Aa.assert(!1),void this._setAsBox(1,1);var a=0,l=n[0].x;for(i=1;i<e;++i){var c=n[i].x;(c>l||c===l&&n[i].y<n[a].y)&&(a=i,l=c)}for(var u=[],h=0,m=a;;){u[h]=m;var p=0;for(s=1;s<e;++s)if(p!==m){var d=Sa.sub(n[p],n[u[h]]),f=(r=Sa.sub(n[s],n[u[h]]),Sa.cross(d,r));f<0&&(p=s),0===f&&r.lengthSquared()>d.lengthSquared()&&(p=s)}else p=s;if(++h,m=p,p===a)break}if(h<3)return xa&&Aa.assert(!1),void this._setAsBox(1,1);for(this.m_count=h,this.m_vertices=[],i=0;i<h;++i)this.m_vertices[i]=n[u[i]];for(i=0;i<h;++i){var y=i,_=i+1<h?i+1:0,g=Sa.sub(this.m_vertices[_],this.m_vertices[y]);xa&&Aa.assert(g.lengthSquared()>wa.EPSILON*wa.EPSILON),this.m_normals[i]=Sa.cross(g,1),this.m_normals[i].normalize()}this.m_centroid=function(t,e){xa&&Aa.assert(e>=3);for(var n=Sa.zero(),i=0,r=Sa.zero(),o=1/3,s=0;s<e;++s){var a=r,l=t[s],c=s+1<e?t[s+1]:t[0],u=Sa.sub(l,a),h=Sa.sub(c,a),m=.5*Sa.cross(u,h);i+=m,n.addMul(m*o,a),n.addMul(m*o,l),n.addMul(m*o,c)}return xa&&Aa.assert(i>wa.EPSILON),n.mul(1/i),n}(this.m_vertices,h)}},Ta.prototype._setAsBox=function(t,e,n,i){if(this.m_vertices[0]=Sa.neo(t,-e),this.m_vertices[1]=Sa.neo(t,e),this.m_vertices[2]=Sa.neo(-t,e),this.m_vertices[3]=Sa.neo(-t,-e),this.m_normals[0]=Sa.neo(1,0),this.m_normals[1]=Sa.neo(0,1),this.m_normals[2]=Sa.neo(-1,0),this.m_normals[3]=Sa.neo(0,-1),this.m_count=4,Sa.isValid(n)){i=i||0,this.m_centroid.set(n);var r=Ba.identity();r.p.set(n),r.q.set(i);for(var o=0;o<this.m_count;++o)this.m_vertices[o]=Ba.mulVec2(r,this.m_vertices[o]),this.m_normals[o]=Ca.mulVec2(r.q,this.m_normals[o])}},Ta.prototype.testPoint=function(t,e){for(var n=Ca.mulTVec2(t.q,Sa.sub(e,t.p)),i=0;i<this.m_count;++i)if(Sa.dot(this.m_normals[i],Sa.sub(n,this.m_vertices[i]))>0)return!1;return!0},Ta.prototype.rayCast=function(t,e,n,i){for(var r=Ca.mulTVec2(n.q,Sa.sub(e.p1,n.p)),o=Ca.mulTVec2(n.q,Sa.sub(e.p2,n.p)),s=Sa.sub(o,r),a=0,l=e.maxFraction,c=-1,u=0;u<this.m_count;++u){var h=Sa.dot(this.m_normals[u],Sa.sub(this.m_vertices[u],r)),m=Sa.dot(this.m_normals[u],s);if(0==m){if(h<0)return!1}else m<0&&h<a*m?(a=h/m,c=u):m>0&&h<l*m&&(l=h/m);if(l<a)return!1}return xa&&Aa.assert(0<=a&&a<=e.maxFraction),c>=0&&(t.fraction=a,t.normal=Ca.mulVec2(n.q,this.m_normals[c]),!0)},Ta.prototype.computeAABB=function(t,e,n){for(var i=1/0,r=1/0,o=-1/0,s=-1/0,a=0;a<this.m_count;++a){var l=Ba.mulVec2(e,this.m_vertices[a]);i=wa.min(i,l.x),o=wa.max(o,l.x),r=wa.min(r,l.y),s=wa.max(s,l.y)}t.lowerBound.set(i,r),t.upperBound.set(o,s),t.extend(this.m_radius)},Ta.prototype.computeMass=function(t,e){xa&&Aa.assert(this.m_count>=3);for(var n=Sa.zero(),i=0,r=0,o=Sa.zero(),s=0;s<this.m_count;++s)o.add(this.m_vertices[s]);o.mul(1/this.m_count);var a=1/3;for(s=0;s<this.m_count;++s){var l=Sa.sub(this.m_vertices[s],o),c=s+1<this.m_count?Sa.sub(this.m_vertices[s+1],o):Sa.sub(this.m_vertices[0],o),u=Sa.cross(l,c),h=.5*u;i+=h,n.addCombine(h*a,l,h*a,c);var m=l.x,p=l.y,d=c.x,f=c.y;r+=.25*a*u*(m*m+d*m+d*d+(p*p+f*p+f*f))}t.mass=e*i,xa&&Aa.assert(i>wa.EPSILON),n.mul(1/i),t.center.setCombine(1,n,1,o),t.I=e*r,t.I+=t.mass*(Sa.dot(t.center,t.center)-Sa.dot(n,n))},Ta.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,n=t<this.m_count-1?e+1:0,i=this.m_vertices[e],r=Sa.sub(this.m_vertices[n],i),o=0;o<this.m_count;++o)if(o!=e&&o!=n){var s=Sa.sub(this.m_vertices[o],i);if(Sa.cross(r,s)<0)return!1}return!0},Ta.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var ka="undefined"!=typeof ASSERT&&ASSERT,Pa=Da,za=Rn,Ia=Ri,Fa=Kn,Va=ni,ja=sr,La=da;function Da(t,e){if(!(this instanceof Da))return new Da(t,e);Da._super.call(this),this.m_type=Da.TYPE,this.m_radius=Va.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_isLoop=e,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}Da._super=ja,Da.prototype=Object.create(Da._super.prototype),Da.TYPE="chain",ja.TYPES[Da.TYPE]=Da,Da.prototype._serialize=function(){const t={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex};return this.m_prevVertex&&(t.prevVertex=this.m_prevVertex),this.m_nextVertex&&(t.nextVertex=this.m_nextVertex),t},Da._deserialize=function(t,e,n){var i=[];if(t.vertices)for(var r=0;r<t.vertices.length;r++)i.push(n(Fa,t.vertices[r]));var o=new Da(i,t.isLoop);return t.prevVertex&&o.setPrevVertex(t.prevVertex),t.nextVertex&&o.setNextVertex(t.nextVertex),o},Da.prototype._createLoop=function(t){ka&&za.assert(0==this.m_vertices.length&&0==this.m_count),ka&&za.assert(t.length>=3);for(var e=1;e<t.length;++e){var n=t[e-1],i=t[e];ka&&za.assert(Fa.distanceSquared(n,i)>Va.linearSlopSquared)}for(this.m_vertices=[],this.m_count=t.length+1,e=0;e<t.length;++e)this.m_vertices[e]=Fa.clone(t[e]);return this.m_vertices[t.length]=Fa.clone(t[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},Da.prototype._createChain=function(t){ka&&za.assert(0==this.m_vertices.length&&0==this.m_count),ka&&za.assert(t.length>=2);for(var e=1;e<t.length;++e){var n=t[e-1],i=t[e];ka&&za.assert(Fa.distanceSquared(n,i)>Va.linearSlopSquared)}for(this.m_count=t.length,e=0;e<t.length;++e)this.m_vertices[e]=Fa.clone(t[e]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},Da.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},Da.prototype.setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},Da.prototype.setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},Da.prototype._clone=function(){var t=new Da;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},Da.prototype.getChildCount=function(){return this.m_count-1},Da.prototype.getChildEdge=function(t,e){ka&&za.assert(0<=e&&e<this.m_count-1),t.m_type=La.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},Da.prototype.getVertex=function(t){return ka&&za.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},Da.prototype.testPoint=function(t,e){return!1},Da.prototype.rayCast=function(t,e,n,i){return ka&&za.assert(0<=i&&i<this.m_count),new La(this.getVertex(i),this.getVertex(i+1)).rayCast(t,e,n,0)},Da.prototype.computeAABB=function(t,e,n){ka&&za.assert(0<=n&&n<this.m_count);var i=Ia.mulVec2(e,this.getVertex(n)),r=Ia.mulVec2(e,this.getVertex(n+1));t.combinePoints(i,r)},Da.prototype.computeMass=function(t,e){t.mass=0,t.center=Fa.neo(),t.I=0},Da.prototype.computeDistanceProxy=function(t,e){ka&&za.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Oa=qa,Ra=$a;function qa(t,e,n,i){if(!(this instanceof qa))return new qa(t,e,n,i);qa._super.call(this),this._setAsBox(t,e,n,i)}qa._super=Ra,qa.prototype=Object.create(qa._super.prototype),qa.TYPE="polygon","undefined"!=typeof DEBUG&&DEBUG;var Ua="undefined"!=typeof ASSERT&&ASSERT,Na=Rn,Wa=Ri,Ha=Kn,Ya=qo,Ga=Ur.exports,Ja=aa;Ya.addType(Ja.TYPE,Ja.TYPE,(function(t,e,n,i,r,o,s){Ua&&Na.assert(n.getType()==Ja.TYPE),Ua&&Na.assert(o.getType()==Ja.TYPE),function(t,e,n,i,r){t.pointCount=0;var o=Wa.mulVec2(n,e.m_p),s=Wa.mulVec2(r,i.m_p),a=Ha.distanceSquared(s,o),l=e.m_radius,c=i.m_radius,u=l+c;a>u*u||(t.type=Ga.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=Ga.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=Ga.e_vertex)}(t,n.getShape(),e,o.getShape(),r)})),"undefined"!=typeof DEBUG&&DEBUG;var Za="undefined"!=typeof ASSERT&&ASSERT,Xa=Rn,Ka=Ri,Qa=Kn,tl=qo,el=Ur.exports,nl=da,il=Pa,rl=aa;function ol(t,e,n,i,r){t.pointCount=0;var o=Ka.mulTVec2(n,Ka.mulVec2(r,i.m_p)),s=e.m_vertex1,a=e.m_vertex2,l=Qa.sub(a,s),c=Qa.dot(l,Qa.sub(a,o)),u=Qa.dot(l,Qa.sub(o,s)),h=e.m_radius+i.m_radius;if(u<=0){var m=Qa.clone(s),p=Qa.sub(o,m);if(Qa.dot(p,p)>h*h)return;if(e.m_hasVertex0){var d=e.m_vertex0,f=s,y=Qa.sub(f,d);if(Qa.dot(y,Qa.sub(f,o))>0)return}return t.type=el.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=el.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=el.e_vertex)}if(c<=0){if(m=Qa.clone(a),p=Qa.sub(o,m),Qa.dot(p,p)>h*h)return;if(e.m_hasVertex3){var _=e.m_vertex3,g=a,v=Qa.sub(_,g);if(Qa.dot(v,Qa.sub(o,g))>0)return}return t.type=el.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=el.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=el.e_vertex)}var b=Qa.dot(l,l);if(Za&&Xa.assert(b>0),m=Qa.combine(c/b,s,u/b,a),p=Qa.sub(o,m),!(Qa.dot(p,p)>h*h)){var x=Qa.neo(-l.y,l.x);Qa.dot(x,Qa.sub(o,s))<0&&x.set(-x.x,-x.y),x.normalize(),t.type=el.e_faceA,t.localNormal=x,t.localPoint.set(s),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=el.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=el.e_vertex}}tl.addType(nl.TYPE,rl.TYPE,(function(t,e,n,i,r,o,s){Za&&Xa.assert(n.getType()==nl.TYPE),Za&&Xa.assert(o.getType()==rl.TYPE);var a=n.getShape(),l=o.getShape();ol(t,a,e,l,r)})),tl.addType(il.TYPE,rl.TYPE,(function(t,e,n,i,r,o,s){Za&&Xa.assert(n.getType()==il.TYPE),Za&&Xa.assert(o.getType()==rl.TYPE);var a=n.getShape(),l=new nl;a.getChildEdge(l,i);var c=l,u=o.getShape();ol(t,c,e,u,r)})),"undefined"!=typeof DEBUG&&DEBUG;var sl="undefined"!=typeof ASSERT&&ASSERT,al=Rn,ll=Ri,cl=Ii,ul=Kn,hl=ni,ml=Ur.exports,pl=$a,dl=yl;function fl(t,e,n,i){for(var r=t.m_count,o=n.m_count,s=t.m_normals,a=t.m_vertices,l=n.m_vertices,c=ll.mulTXf(i,e),u=0,h=-1/0,m=0;m<r;++m){for(var p=cl.mulVec2(c.q,s[m]),d=ll.mulVec2(c,a[m]),f=1/0,y=0;y<o;++y){var _=ul.dot(p,l[y])-ul.dot(p,d);_<f&&(f=_)}f>h&&(h=f,u=m)}fl._maxSeparation=h,fl._bestIndex=u}function yl(t,e,n,i,r){t.pointCount=0;var o=e.m_radius+i.m_radius;fl(e,n,i,r);var s=fl._bestIndex,a=fl._maxSeparation;if(!(a>o)){fl(i,r,e,n);var l=fl._bestIndex,c=fl._maxSeparation;if(!(c>o)){var u,h,m,p,d,f;c>a+.1*hl.linearSlop?(u=i,h=e,m=r,p=n,d=l,t.type=ml.e_faceB,f=1):(u=e,h=i,m=n,p=r,d=s,t.type=ml.e_faceA,f=0);var y=[new ml.clipVertex,new ml.clipVertex];!function(t,e,n,i,r,o){var s=e.m_normals,a=r.m_count,l=r.m_vertices,c=r.m_normals;sl&&al.assert(0<=i&&i<e.m_count);for(var u=cl.mulT(o.q,cl.mulVec2(n.q,s[i])),h=0,m=1/0,p=0;p<a;++p){var d=ul.dot(u,c[p]);d<m&&(m=d,h=p)}var f=h,y=f+1<a?f+1:0;t[0].v=ll.mulVec2(o,l[f]),t[0].id.cf.indexA=i,t[0].id.cf.indexB=f,t[0].id.cf.typeA=ml.e_face,t[0].id.cf.typeB=ml.e_vertex,t[1].v=ll.mulVec2(o,l[y]),t[1].id.cf.indexA=i,t[1].id.cf.indexB=y,t[1].id.cf.typeA=ml.e_face,t[1].id.cf.typeB=ml.e_vertex}(y,u,m,d,h,p);var _=u.m_count,g=u.m_vertices,v=d,b=d+1<_?d+1:0,x=g[v],$=g[b],A=ul.sub($,x);A.normalize();var w=ul.cross(A,1),B=ul.combine(.5,x,.5,$),C=cl.mulVec2(m.q,A),S=ul.cross(C,1);x=ll.mulVec2(m,x),$=ll.mulVec2(m,$);var E=ul.dot(S,x),M=-ul.dot(C,x)+o,T=ul.dot(C,$)+o,k=[new ml.clipVertex,new ml.clipVertex],P=[new ml.clipVertex,new ml.clipVertex];if(!(ml.clipSegmentToLine(k,y,ul.neg(C),M,v)<2||ml.clipSegmentToLine(P,k,C,T,b)<2)){t.localNormal=w,t.localPoint=B;for(var z=0,I=0;I<P.length;++I)if(ul.dot(S,P[I].v)-E<=o){var F=t.points[z];if(F.localPoint.set(ll.mulTVec2(p,P[I].v)),F.id=P[I].id,f){var V=F.id.cf,j=V.indexA,L=V.indexB,D=V.typeA,O=V.typeB;V.indexA=L,V.indexB=j,V.typeA=O,V.typeB=D}++z}t.pointCount=z}}}}qo.addType(pl.TYPE,pl.TYPE,(function(t,e,n,i,r,o,s){sl&&al.assert(n.getType()==pl.TYPE),sl&&al.assert(o.getType()==pl.TYPE),yl(t,n.getShape(),e,o.getShape(),r)})),"undefined"!=typeof DEBUG&&DEBUG;var _l="undefined"!=typeof ASSERT&&ASSERT,gl=Rn,vl=Nn.exports,bl=Ri,xl=Kn,$l=Ur.exports,Al=aa,wl=$a;qo.addType(wl.TYPE,Al.TYPE,(function(t,e,n,i,r,o,s){_l&&gl.assert(n.getType()==wl.TYPE),_l&&gl.assert(o.getType()==Al.TYPE),function(t,e,n,i,r){t.pointCount=0;for(var o=bl.mulVec2(r,i.m_p),s=bl.mulTVec2(n,o),a=0,l=-1/0,c=e.m_radius+i.m_radius,u=e.m_count,h=e.m_vertices,m=e.m_normals,p=0;p<u;++p){var d=xl.dot(m[p],xl.sub(s,h[p]));if(d>c)return;d>l&&(l=d,a=p)}var f=a,y=f+1<u?f+1:0,_=h[f],g=h[y];if(l<vl.EPSILON)return t.pointCount=1,t.type=$l.e_faceA,t.localNormal.set(m[a]),t.localPoint.setCombine(.5,_,.5,g),t.points[0].localPoint=i.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=$l.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=$l.e_vertex);var v=xl.dot(xl.sub(s,_),xl.sub(g,_)),b=xl.dot(xl.sub(s,g),xl.sub(_,g));if(v<=0){if(xl.distanceSquared(s,_)>c*c)return;t.pointCount=1,t.type=$l.e_faceA,t.localNormal.setCombine(1,s,-1,_),t.localNormal.normalize(),t.localPoint=_,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=$l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=$l.e_vertex}else if(b<=0){if(xl.distanceSquared(s,g)>c*c)return;t.pointCount=1,t.type=$l.e_faceA,t.localNormal.setCombine(1,s,-1,g),t.localNormal.normalize(),t.localPoint.set(g),t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=$l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=$l.e_vertex}else{var x=xl.mid(_,g);if((l=xl.dot(s,m[f])-xl.dot(x,m[f]))>c)return;t.pointCount=1,t.type=$l.e_faceA,t.localNormal.set(m[f]),t.localPoint.set(x),t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=$l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=$l.e_vertex}}(t,n.getShape(),e,o.getShape(),r)})),"undefined"!=typeof DEBUG&&DEBUG;var Bl="undefined"!=typeof ASSERT&&ASSERT,Cl=Rn,Sl=Nn.exports,El=Ri,Ml=Kn,Tl=Ii,kl=ni,Pl=qo,zl=Ur.exports,Il=da,Fl=Pa,Vl=$a;function jl(){this.type,this.index,this.separation}Pl.addType(Il.TYPE,Vl.TYPE,(function(t,e,n,i,r,o,s){Bl&&Cl.assert(n.getType()==Il.TYPE),Bl&&Cl.assert(o.getType()==Vl.TYPE),ql(t,n.getShape(),e,o.getShape(),r)})),Pl.addType(Fl.TYPE,Vl.TYPE,(function(t,e,n,i,r,o,s){Bl&&Cl.assert(n.getType()==Fl.TYPE),Bl&&Cl.assert(o.getType()==Vl.TYPE);var a=n.getShape(),l=new Il;a.getChildEdge(l,i),ql(t,l,e,o.getShape(),r)}));var Ll=new jl,Dl=new jl,Ol=new function(){this.vertices=[],this.normals=[],this.count=0},Rl=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=Ml.zero(),this.sideNormal1=Ml.zero(),this.sideOffset1,this.sideNormal2=Ml.zero(),this.sideOffset2};function ql(t,e,n,i,r){var o=El.mulTXf(n,r),s=El.mulVec2(o,i.m_centroid),a=e.m_vertex0,l=e.m_vertex1,c=e.m_vertex2,u=e.m_vertex3,h=e.m_hasVertex0,m=e.m_hasVertex3,p=Ml.sub(c,l);p.normalize();var d,f=Ml.neo(p.y,-p.x),y=Ml.dot(f,Ml.sub(s,l)),_=0,g=0,v=!1,b=!1;if(h){var x=Ml.sub(l,a);x.normalize();var $=Ml.neo(x.y,-x.x);v=Ml.cross(x,p)>=0,_=Ml.dot($,s)-Ml.dot($,a)}if(m){var A=Ml.sub(u,c);A.normalize();var w=Ml.neo(A.y,-A.x);b=Ml.cross(p,A)>0,g=Ml.dot(w,s)-Ml.dot(w,c)}var B=Ml.zero(),C=Ml.zero(),S=Ml.zero();h&&m?v&&b?(d=_>=0||y>=0||g>=0)?(B.set(f),C.set($),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,f)):v?(d=_>=0||y>=0&&g>=0)?(B.set(f),C.set($),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,f)):b?(d=g>=0||_>=0&&y>=0)?(B.set(f),C.set(f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,$)):(d=_>=0&&y>=0&&g>=0)?(B.set(f),C.set(f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,$)):h?v?(d=_>=0||y>=0)?(B.set(f),C.set($),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,f)):(d=_>=0&&y>=0)?(B.set(f),C.set(f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,$)):m?b?(d=y>=0||g>=0)?(B.set(f),C.setMul(-1,f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.set(f)):(d=y>=0&&g>=0)?(B.set(f),C.setMul(-1,f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.set(f)):(d=y>=0)?(B.set(f),C.setMul(-1,f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.set(f)),Ol.count=i.m_count;for(var E=0;E<i.m_count;++E)Ol.vertices[E]=El.mulVec2(o,i.m_vertices[E]),Ol.normals[E]=Tl.mulVec2(o.q,i.m_normals[E]);var M=2*kl.polygonRadius;for(t.pointCount=0,Ll.type=1,Ll.index=d?0:1,Ll.separation=1/0,E=0;E<Ol.count;++E)(k=Ml.dot(B,Ml.sub(Ol.vertices[E],l)))<Ll.separation&&(Ll.separation=k);if(-1!=Ll.type&&!(Ll.separation>M)){Dl.type=-1,Dl.index=-1,Dl.separation=-1/0;var T=Ml.neo(-B.y,B.x);for(E=0;E<Ol.count;++E){var k,P=Ml.neg(Ol.normals[E]),z=Ml.dot(P,Ml.sub(Ol.vertices[E],l)),I=Ml.dot(P,Ml.sub(Ol.vertices[E],c));if((k=Sl.min(z,I))>M){Dl.type=2,Dl.index=E,Dl.separation=k;break}if(Ml.dot(P,T)>=0){if(Ml.dot(Ml.sub(P,S),B)<-kl.angularSlop)continue}else if(Ml.dot(Ml.sub(P,C),B)<-kl.angularSlop)continue;k>Dl.separation&&(Dl.type=2,Dl.index=E,Dl.separation=k)}if(!(-1!=Dl.type&&Dl.separation>M)){var F;F=-1==Dl.type?Ll:Dl.separation>.98*Ll.separation+.001?Dl:Ll;var V=[new zl.clipVertex,new zl.clipVertex];if(1==F.type){t.type=zl.e_faceA;var j=0,L=Ml.dot(B,Ol.normals[0]);for(E=1;E<Ol.count;++E){var D=Ml.dot(B,Ol.normals[E]);D<L&&(L=D,j=E)}var O=j,R=O+1<Ol.count?O+1:0;V[0].v=Ol.vertices[O],V[0].id.cf.indexA=0,V[0].id.cf.indexB=O,V[0].id.cf.typeA=zl.e_face,V[0].id.cf.typeB=zl.e_vertex,V[1].v=Ol.vertices[R],V[1].id.cf.indexA=0,V[1].id.cf.indexB=R,V[1].id.cf.typeA=zl.e_face,V[1].id.cf.typeB=zl.e_vertex,d?(Rl.i1=0,Rl.i2=1,Rl.v1=l,Rl.v2=c,Rl.normal.set(f)):(Rl.i1=1,Rl.i2=0,Rl.v1=c,Rl.v2=l,Rl.normal.setMul(-1,f))}else t.type=zl.e_faceB,V[0].v=l,V[0].id.cf.indexA=0,V[0].id.cf.indexB=F.index,V[0].id.cf.typeA=zl.e_vertex,V[0].id.cf.typeB=zl.e_face,V[1].v=c,V[1].id.cf.indexA=0,V[1].id.cf.indexB=F.index,V[1].id.cf.typeA=zl.e_vertex,V[1].id.cf.typeB=zl.e_face,Rl.i1=F.index,Rl.i2=Rl.i1+1<Ol.count?Rl.i1+1:0,Rl.v1=Ol.vertices[Rl.i1],Rl.v2=Ol.vertices[Rl.i2],Rl.normal.set(Ol.normals[Rl.i1]);Rl.sideNormal1.set(Rl.normal.y,-Rl.normal.x),Rl.sideNormal2.setMul(-1,Rl.sideNormal1),Rl.sideOffset1=Ml.dot(Rl.sideNormal1,Rl.v1),Rl.sideOffset2=Ml.dot(Rl.sideNormal2,Rl.v2);var q=[new zl.clipVertex,new zl.clipVertex],U=[new zl.clipVertex,new zl.clipVertex];if(!(zl.clipSegmentToLine(q,V,Rl.sideNormal1,Rl.sideOffset1,Rl.i1)<kl.maxManifoldPoints||zl.clipSegmentToLine(U,q,Rl.sideNormal2,Rl.sideOffset2,Rl.i2)<kl.maxManifoldPoints)){1==F.type?(t.localNormal=Ml.clone(Rl.normal),t.localPoint=Ml.clone(Rl.v1)):(t.localNormal=Ml.clone(i.m_normals[Rl.i1]),t.localPoint=Ml.clone(i.m_vertices[Rl.i1]));var N=0;for(E=0;E<kl.maxManifoldPoints;++E)if(Ml.dot(Rl.normal,Ml.sub(U[E].v,Rl.v1))<=M){var W=t.points[N];1==F.type?(W.localPoint=El.mulT(o,U[E].v),W.id=U[E].id):(W.localPoint=U[E].v,W.id.cf.typeA=U[E].id.cf.typeB,W.id.cf.typeB=U[E].id.cf.typeA,W.id.cf.indexA=U[E].id.cf.indexB,W.id.cf.indexB=U[E].id.cf.indexA),++N}t.pointCount=N}}}}"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Ul=Kl,Nl=On,Wl=ni,Hl=Nn.exports,Yl=Kn,Gl=Ii,Jl=Zo,Zl=br;Kl.TYPE="distance-joint",Jl.TYPES[Kl.TYPE]=Kl,Kl._super=Jl,Kl.prototype=Object.create(Kl._super.prototype);var Xl={frequencyHz:0,dampingRatio:0};function Kl(t,e,n,i,r){if(!(this instanceof Kl))return new Kl(t,e,n,i,r);if(n&&i&&"m_type"in i&&"x"in n&&"y"in n){var o=n;n=i,i=o}t=Nl(t,Xl),Jl.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Kl.TYPE,this.m_localAnchorA=Yl.clone(i?e.getLocalPoint(i):t.localAnchorA||Yl.zero()),this.m_localAnchorB=Yl.clone(r?n.getLocalPoint(r):t.localAnchorB||Yl.zero()),this.m_length=Hl.isFinite(t.length)?t.length:Yl.distance(e.getWorldPoint(this.m_localAnchorA),n.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}Kl.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},Kl._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Zl,t.bodyA,e),t.bodyB=n(Zl,t.bodyB,e),new Kl(t)},Kl.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.length>0?this.m_length=+t.length:t.length<0||(t.anchorA||t.anchorA||t.anchorA||t.anchorA)&&(this.m_length=Yl.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB)))},Kl.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Kl.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Kl.prototype.setLength=function(t){this.m_length=t},Kl.prototype.getLength=function(){return this.m_length},Kl.prototype.setFrequency=function(t){this.m_frequencyHz=t},Kl.prototype.getFrequency=function(){return this.m_frequencyHz},Kl.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Kl.prototype.getDampingRatio=function(){return this.m_dampingRatio},Kl.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Kl.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Kl.prototype.getReactionForce=function(t){return Yl.mul(this.m_impulse,this.m_u).mul(t)},Kl.prototype.getReactionTorque=function(t){return 0},Kl.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Gl.neo(n),u=Gl.neo(s);this.m_rA=Gl.mulVec2(c,Yl.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Gl.mulVec2(u,Yl.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=Yl.sub(Yl.add(o,this.m_rB),Yl.add(e,this.m_rA));var h=this.m_u.length();h>Wl.linearSlop?this.m_u.mul(1/h):this.m_u.set(0,0);var m=Yl.cross(this.m_rA,this.m_u),p=Yl.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,this.m_frequencyHz>0){var f=h-this.m_length,y=2*Hl.PI*this.m_frequencyHz,_=2*this.m_mass*this.m_dampingRatio*y,g=this.m_mass*y*y,v=t.dt;this.m_gamma=v*(_+v*g),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=f*v*g*this.m_gamma,d+=this.m_gamma,this.m_mass=0!=d?1/d:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var b=Yl.mul(this.m_impulse,this.m_u);i.subMul(this.m_invMassA,b),r-=this.m_invIA*Yl.cross(this.m_rA,b),a.addMul(this.m_invMassB,b),l+=this.m_invIB*Yl.cross(this.m_rB,b)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Kl.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=Yl.add(e,Yl.cross(n,this.m_rA)),s=Yl.add(i,Yl.cross(r,this.m_rB)),a=Yl.dot(this.m_u,s)-Yl.dot(this.m_u,o),l=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=l;var c=Yl.mul(l,this.m_u);e.subMul(this.m_invMassA,c),n-=this.m_invIA*Yl.cross(this.m_rA,c),i.addMul(this.m_invMassB,c),r+=this.m_invIB*Yl.cross(this.m_rB,c),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(i),this.m_bodyB.c_velocity.w=r},Kl.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=Gl.neo(n),s=Gl.neo(r),a=Gl.mulSub(o,this.m_localAnchorA,this.m_localCenterA),l=Gl.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=Yl.sub(Yl.add(i,l),Yl.add(e,a)),u=c.normalize()-this.m_length;u=Hl.clamp(u,-Wl.maxLinearCorrection,Wl.maxLinearCorrection);var h=-this.m_mass*u,m=Yl.mul(h,c);return e.subMul(this.m_invMassA,m),n-=this.m_invIA*Yl.cross(a,m),i.addMul(this.m_invMassB,m),r+=this.m_invIB*Yl.cross(l,m),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,Hl.abs(u)<Wl.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var Ql="undefined"!=typeof ASSERT&&ASSERT,tc=uc,ec=Rn,nc=On,ic=Nn.exports,rc=Kn,oc=Dr,sc=Ii,ac=Zo,lc=br;uc.TYPE="friction-joint",ac.TYPES[uc.TYPE]=uc,uc._super=ac,uc.prototype=Object.create(uc._super.prototype);var cc={maxForce:0,maxTorque:0};function uc(t,e,n,i){if(!(this instanceof uc))return new uc(t,e,n,i);t=nc(t,cc),ac.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=uc.TYPE,this.m_localAnchorA=rc.clone(i?e.getLocalPoint(i):t.localAnchorA||rc.zero()),this.m_localAnchorB=rc.clone(i?n.getLocalPoint(i):t.localAnchorB||rc.zero()),this.m_linearImpulse=rc.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}uc.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},uc._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(lc,t.bodyA,e),t.bodyB=n(lc,t.bodyB,e),new uc(t)},uc.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},uc.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},uc.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},uc.prototype.setMaxForce=function(t){Ql&&ec.assert(ic.isFinite(t)&&t>=0),this.m_maxForce=t},uc.prototype.getMaxForce=function(){return this.m_maxForce},uc.prototype.setMaxTorque=function(t){Ql&&ec.assert(ic.isFinite(t)&&t>=0),this.m_maxTorque=t},uc.prototype.getMaxTorque=function(){return this.m_maxTorque},uc.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},uc.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},uc.prototype.getReactionForce=function(t){return rc.mul(t,this.m_linearImpulse)},uc.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},uc.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=sc.neo(e),l=sc.neo(r);this.m_rA=sc.mulVec2(a,rc.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=sc.mulVec2(l,rc.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new oc;if(p.ex.x=c+u+h*this.m_rA.y*this.m_rA.y+m*this.m_rB.y*this.m_rB.y,p.ex.y=-h*this.m_rA.x*this.m_rA.y-m*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=c+u+h*this.m_rA.x*this.m_rA.x+m*this.m_rB.x*this.m_rB.x,this.m_linearMass=p.getInverse(),this.m_angularMass=h+m,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var d=rc.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.subMul(c,d),i-=h*(rc.cross(this.m_rA,d)+this.m_angularImpulse),o.addMul(u,d),s+=m*(rc.cross(this.m_rB,d)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},uc.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=r-n,h=-this.m_angularMass*u,m=this.m_angularImpulse,p=c*this.m_maxTorque;this.m_angularImpulse=ic.clamp(this.m_angularImpulse+h,-p,p),n-=a*(h=this.m_angularImpulse-m),r+=l*h,u=rc.sub(rc.add(i,rc.cross(r,this.m_rB)),rc.add(e,rc.cross(n,this.m_rA))),h=rc.neg(oc.mulVec2(this.m_linearMass,u)),m=this.m_linearImpulse,this.m_linearImpulse.add(h),p=c*this.m_maxForce,this.m_linearImpulse.lengthSquared()>p*p&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(p)),h=rc.sub(this.m_linearImpulse,m),e.subMul(o,h),n-=a*rc.cross(this.m_rA,h),i.addMul(s,h),r+=l*rc.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},uc.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var hc="undefined"!=typeof ASSERT&&ASSERT,mc=Bc,pc=Rn,dc=On,fc=ni,yc=Nn.exports,_c=Kn,gc=oo,vc=Dr,bc=ho,xc=Ii,$c=Zo,Ac=br;Bc.TYPE="revolute-joint",$c.TYPES[Bc.TYPE]=Bc,Bc._super=$c,Bc.prototype=Object.create(Bc._super.prototype);var wc={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function Bc(t,e,n,i){if(!(this instanceof Bc))return new Bc(t,e,n,i);t=dc(t,wc),$c.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Bc.TYPE,this.m_localAnchorA=_c.clone(i?e.getLocalPoint(i):t.localAnchorA||_c.zero()),this.m_localAnchorB=_c.clone(i?n.getLocalPoint(i):t.localAnchorB||_c.zero()),this.m_referenceAngle=yc.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_impulse=gc(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new bc,this.m_motorMass,this.m_limitState=0}Bc.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},Bc._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Ac,t.bodyA,e),t.bodyB=n(Ac,t.bodyB,e),new Bc(t)},Bc.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Bc.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Bc.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Bc.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Bc.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},Bc.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},Bc.prototype.isMotorEnabled=function(){return this.m_enableMotor},Bc.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},Bc.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},Bc.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},Bc.prototype.getMotorSpeed=function(){return this.m_motorSpeed},Bc.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},Bc.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},Bc.prototype.isLimitEnabled=function(){return this.m_enableLimit},Bc.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},Bc.prototype.getLowerLimit=function(){return this.m_lowerAngle},Bc.prototype.getUpperLimit=function(){return this.m_upperAngle},Bc.prototype.setLimits=function(t,e){hc&&pc.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},Bc.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Bc.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Bc.prototype.getReactionForce=function(t){return _c.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},Bc.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},Bc.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=xc.neo(e),l=xc.neo(r);this.m_rA=xc.mulVec2(a,_c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=xc.mulVec2(l,_c.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=h+m===0;if(this.m_mass.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,this.m_mass.ez.x=-this.m_rA.y*h-this.m_rB.y*m,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,this.m_mass.ez.y=this.m_rA.x*h+this.m_rB.x*m,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=h+m,this.m_motorMass=h+m,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||p)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==p){var d=r-e-this.m_referenceAngle;yc.abs(this.m_upperAngle-this.m_lowerAngle)<2*fc.angularSlop?this.m_limitState=3:d<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):d>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var f=_c.neo(this.m_impulse.x,this.m_impulse.y);n.subMul(c,f),i-=h*(_c.cross(this.m_rA,f)+this.m_motorImpulse+this.m_impulse.z),o.addMul(u,f),s+=m*(_c.cross(this.m_rB,f)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},Bc.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=a+l===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==c){var u=r-n-this.m_motorSpeed,h=-this.m_motorMass*u,m=this.m_motorImpulse,p=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=yc.clamp(this.m_motorImpulse+h,-p,p),n-=a*(h=this.m_motorImpulse-m),r+=l*h}if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var d=_c.zero();d.addCombine(1,i,1,_c.cross(r,this.m_rB)),d.subCombine(1,e,1,_c.cross(n,this.m_rA));var f=r-n;if(u=gc(d.x,d.y,f),h=gc.neg(this.m_mass.solve33(u)),3==this.m_limitState)this.m_impulse.add(h);else if(1==this.m_limitState)if(this.m_impulse.z+h.z<0){var y=_c.combine(-1,d,this.m_impulse.z,_c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),_=this.m_mass.solve22(y);h.x=_.x,h.y=_.y,h.z=-this.m_impulse.z,this.m_impulse.x+=_.x,this.m_impulse.y+=_.y,this.m_impulse.z=0}else this.m_impulse.add(h);else 2==this.m_limitState&&(this.m_impulse.z+h.z>0?(y=_c.combine(-1,d,this.m_impulse.z,_c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),_=this.m_mass.solve22(y),h.x=_.x,h.y=_.y,h.z=-this.m_impulse.z,this.m_impulse.x+=_.x,this.m_impulse.y+=_.y,this.m_impulse.z=0):this.m_impulse.add(h));var g=_c.neo(h.x,h.y);e.subMul(o,g),n-=a*(_c.cross(this.m_rA,g)+h.z),i.addMul(s,g),r+=l*(_c.cross(this.m_rB,g)+h.z)}else(u=_c.zero()).addCombine(1,i,1,_c.cross(r,this.m_rB)),u.subCombine(1,e,1,_c.cross(n,this.m_rA)),h=this.m_mass.solve22(_c.neg(u)),this.m_impulse.x+=h.x,this.m_impulse.y+=h.y,e.subMul(o,h),n-=a*_c.cross(this.m_rA,h),i.addMul(s,h),r+=l*_c.cross(this.m_rB,h);this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Bc.prototype.solvePositionConstraints=function(t){var e,n=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,s=xc.neo(i),a=xc.neo(o),l=0,c=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var u=o-i-this.m_referenceAngle,h=0;if(3==this.m_limitState){var m=yc.clamp(u-this.m_lowerAngle,-fc.maxAngularCorrection,fc.maxAngularCorrection);h=-this.m_motorMass*m,l=yc.abs(m)}else 1==this.m_limitState?(l=-(m=u-this.m_lowerAngle),m=yc.clamp(m+fc.angularSlop,-fc.maxAngularCorrection,0),h=-this.m_motorMass*m):2==this.m_limitState&&(l=m=u-this.m_upperAngle,m=yc.clamp(m-fc.angularSlop,0,fc.maxAngularCorrection),h=-this.m_motorMass*m);i-=this.m_invIA*h,o+=this.m_invIB*h}s.set(i),a.set(o);var p=xc.mulVec2(s,_c.sub(this.m_localAnchorA,this.m_localCenterA)),d=xc.mulVec2(a,_c.sub(this.m_localAnchorB,this.m_localCenterB));(m=_c.zero()).addCombine(1,r,1,d),m.subCombine(1,n,1,p),e=m.length();var f=this.m_invMassA,y=this.m_invMassB,_=this.m_invIA,g=this.m_invIB,v=new vc;v.ex.x=f+y+_*p.y*p.y+g*d.y*d.y,v.ex.y=-_*p.x*p.y-g*d.x*d.y,v.ey.x=v.ex.y,v.ey.y=f+y+_*p.x*p.x+g*d.x*d.x;var b=_c.neg(v.solve(m));return n.subMul(f,b),i-=_*_c.cross(p,b),r.addMul(y,b),o+=g*_c.cross(d,b),this.m_bodyA.c_position.c.set(n),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=o,e<=fc.linearSlop&&l<=fc.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var Cc="undefined"!=typeof ASSERT&&ASSERT,Sc=Oc,Ec=Rn,Mc=On,Tc=ni,kc=Nn.exports,Pc=Kn,zc=oo,Ic=Dr,Fc=ho,Vc=Ii,jc=Zo,Lc=br;Oc.TYPE="prismatic-joint",jc.TYPES[Oc.TYPE]=Oc,Oc._super=jc,Oc.prototype=Object.create(Oc._super.prototype);var Dc={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function Oc(t,e,n,i,r){if(!(this instanceof Oc))return new Oc(t,e,n,i,r);t=Mc(t,Dc),jc.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Oc.TYPE,this.m_localAnchorA=Pc.clone(i?e.getLocalPoint(i):t.localAnchorA||Pc.zero()),this.m_localAnchorB=Pc.clone(i?n.getLocalPoint(i):t.localAnchorB||Pc.zero()),this.m_localXAxisA=Pc.clone(r?e.getLocalVector(r):t.localAxisA||Pc.neo(1,0)),this.m_localXAxisA.normalize(),this.m_localYAxisA=Pc.cross(1,this.m_localXAxisA),this.m_referenceAngle=kc.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_impulse=zc(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=0,this.m_axis=Pc.zero(),this.m_perp=Pc.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new Fc,this.m_motorMass}Oc.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},Oc._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Lc,t.bodyA,e),t.bodyB=n(Lc,t.bodyB,e),t.localAxisA=Pc(t.localAxisA),new Oc(t)},Oc.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(Pc.cross(1,t.localAxisA)))},Oc.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Oc.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Oc.prototype.getLocalAxisA=function(){return this.m_localXAxisA},Oc.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Oc.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),n=Pc.sub(e,t),i=this.m_bodyA.getWorldVector(this.m_localXAxisA);return Pc.dot(n,i)},Oc.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,n=Vc.mulVec2(t.m_xf.q,Pc.sub(this.m_localAnchorA,t.m_sweep.localCenter)),i=Vc.mulVec2(e.m_xf.q,Pc.sub(this.m_localAnchorB,e.m_sweep.localCenter)),r=Pc.add(t.m_sweep.c,n),o=Pc.add(e.m_sweep.c,i),s=Pc.sub(o,r),a=Vc.mulVec2(t.m_xf.q,this.m_localXAxisA),l=t.m_linearVelocity,c=e.m_linearVelocity,u=t.m_angularVelocity,h=e.m_angularVelocity;return Pc.dot(s,Pc.cross(u,a))+Pc.dot(a,Pc.sub(Pc.addCross(c,h,i),Pc.addCross(l,u,n)))},Oc.prototype.isLimitEnabled=function(){return this.m_enableLimit},Oc.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},Oc.prototype.getLowerLimit=function(){return this.m_lowerTranslation},Oc.prototype.getUpperLimit=function(){return this.m_upperTranslation},Oc.prototype.setLimits=function(t,e){Cc&&Ec.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},Oc.prototype.isMotorEnabled=function(){return this.m_enableMotor},Oc.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},Oc.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},Oc.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},Oc.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},Oc.prototype.getMotorSpeed=function(){return this.m_motorSpeed},Oc.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},Oc.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Oc.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Oc.prototype.getReactionForce=function(t){return Pc.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},Oc.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},Oc.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Vc.neo(n),u=Vc.neo(s),h=Vc.mulVec2(c,Pc.sub(this.m_localAnchorA,this.m_localCenterA)),m=Vc.mulVec2(u,Pc.sub(this.m_localAnchorB,this.m_localCenterB)),p=Pc.zero();p.addCombine(1,o,1,m),p.subCombine(1,e,1,h);var d=this.m_invMassA,f=this.m_invMassB,y=this.m_invIA,_=this.m_invIB;this.m_axis=Vc.mulVec2(c,this.m_localXAxisA),this.m_a1=Pc.cross(Pc.add(p,h),this.m_axis),this.m_a2=Pc.cross(m,this.m_axis),this.m_motorMass=d+f+y*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=Vc.mulVec2(c,this.m_localYAxisA),this.m_s1=Pc.cross(Pc.add(p,h),this.m_perp),this.m_s2=Pc.cross(m,this.m_perp),Pc.cross(h,this.m_perp);var g=d+f+y*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,v=y*this.m_s1+_*this.m_s2,b=y*this.m_s1*this.m_a1+_*this.m_s2*this.m_a2,x=y+_;0==x&&(x=1);var $=y*this.m_a1+_*this.m_a2,A=d+f+y*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2;if(this.m_K.ex.set(g,v,b),this.m_K.ey.set(v,x,$),this.m_K.ez.set(b,$,A),this.m_enableLimit){var w=Pc.dot(this.m_axis,p);kc.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*Tc.linearSlop?this.m_limitState=3:w<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):w>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var B=Pc.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,S=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;i.subMul(d,B),r-=y*C,a.addMul(f,B),l+=_*S}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Oc.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var c=Pc.dot(this.m_axis,Pc.sub(i,e))+this.m_a2*r-this.m_a1*n,u=this.m_motorMass*(this.m_motorSpeed-c),h=this.m_motorImpulse,m=t.dt*this.m_maxMotorForce;this.m_motorImpulse=kc.clamp(this.m_motorImpulse+u,-m,m),u=this.m_motorImpulse-h;var p=Pc.mul(u,this.m_axis),d=u*this.m_a1,f=u*this.m_a2;e.subMul(o,p),n-=a*d,i.addMul(s,p),r+=l*f}var y=Pc.zero();if(y.x+=Pc.dot(this.m_perp,i)+this.m_s2*r,y.x-=Pc.dot(this.m_perp,e)+this.m_s1*n,y.y=r-n,this.m_enableLimit&&0!=this.m_limitState){var _=0;_+=Pc.dot(this.m_axis,i)+this.m_a2*r,_-=Pc.dot(this.m_axis,e)+this.m_a1*n,c=zc(y.x,y.y,_);var g=zc(this.m_impulse),v=this.m_K.solve33(zc.neg(c));this.m_impulse.add(v),1==this.m_limitState?this.m_impulse.z=kc.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=kc.min(this.m_impulse.z,0));var b=Pc.combine(-1,y,-(this.m_impulse.z-g.z),Pc.neo(this.m_K.ez.x,this.m_K.ez.y)),x=Pc.add(this.m_K.solve22(b),Pc.neo(g.x,g.y));this.m_impulse.x=x.x,this.m_impulse.y=x.y,v=zc.sub(this.m_impulse,g),p=Pc.combine(v.x,this.m_perp,v.z,this.m_axis),d=v.x*this.m_s1+v.y+v.z*this.m_a1,f=v.x*this.m_s2+v.y+v.z*this.m_a2,e.subMul(o,p),n-=a*d,i.addMul(s,p),r+=l*f}else v=this.m_K.solve22(Pc.neg(y)),this.m_impulse.x+=v.x,this.m_impulse.y+=v.y,p=Pc.mul(v.x,this.m_perp),d=v.x*this.m_s1+v.y,f=v.x*this.m_s2+v.y,e.subMul(o,p),n-=a*d,i.addMul(s,p),r+=l*f;this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Oc.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=Vc.neo(n),s=Vc.neo(r),a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,h=Vc.mulVec2(o,Pc.sub(this.m_localAnchorA,this.m_localCenterA)),m=Vc.mulVec2(s,Pc.sub(this.m_localAnchorB,this.m_localCenterB)),p=Pc.sub(Pc.add(i,m),Pc.add(e,h)),d=Vc.mulVec2(o,this.m_localXAxisA),f=Pc.cross(Pc.add(p,h),d),y=Pc.cross(m,d),_=Vc.mulVec2(o,this.m_localYAxisA),g=Pc.cross(Pc.add(p,h),_),v=Pc.cross(m,_),b=zc(),x=Pc.zero();x.x=Pc.dot(_,p),x.y=r-n-this.m_referenceAngle;var $=kc.abs(x.x),A=kc.abs(x.y),w=Tc.linearSlop,B=Tc.maxLinearCorrection,C=!1,S=0;if(this.m_enableLimit){var E=Pc.dot(d,p);kc.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*w?(S=kc.clamp(E,-B,B),$=kc.max($,kc.abs(E)),C=!0):E<=this.m_lowerTranslation?(S=kc.clamp(E-this.m_lowerTranslation+w,-B,0),$=kc.max($,this.m_lowerTranslation-E),C=!0):E>=this.m_upperTranslation&&(S=kc.clamp(E-this.m_upperTranslation-w,0,B),$=kc.max($,E-this.m_upperTranslation),C=!0)}if(C){var M=a+l+c*g*g+u*v*v,T=c*g+u*v,k=c*g*f+u*v*y;0==(F=c+u)&&(F=1);var P=c*f+u*y,z=a+l+c*f*f+u*y*y;(V=new Fc).ex.set(M,T,k),V.ey.set(T,F,P),V.ez.set(k,P,z);var I=zc();I.x=x.x,I.y=x.y,I.z=S,b=V.solve33(zc.neg(I))}else{var F,V;M=a+l+c*g*g+u*v*v,T=c*g+u*v,0==(F=c+u)&&(F=1),(V=new Ic).ex.set(M,T),V.ey.set(T,F);var j=V.solve(Pc.neg(x));b.x=j.x,b.y=j.y,b.z=0}var L=Pc.combine(b.x,_,b.z,d),D=b.x*g+b.y+b.z*f,O=b.x*v+b.y+b.z*y;return e.subMul(a,L),n-=c*D,i.addMul(l,L),r+=u*O,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=i,this.m_bodyB.c_position.a=r,$<=Tc.linearSlop&&A<=Tc.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var Rc="undefined"!=typeof ASSERT&&ASSERT,qc=tu,Uc=Rn,Nc=On,Wc=ni,Hc=Nn.exports,Yc=Kn,Gc=Ii,Jc=Zo,Zc=br,Xc=mc,Kc=Sc;tu.TYPE="gear-joint",Jc.TYPES[tu.TYPE]=tu,tu._super=Jc,tu.prototype=Object.create(tu._super.prototype);var Qc={ratio:1};function tu(t,e,n,i,r,o){if(!(this instanceof tu))return new tu(t,e,n,i,r,o);var s,a;t=Nc(t,Qc),Jc.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=tu.TYPE,Rc&&Uc.assert(i.m_type===Xc.TYPE||i.m_type===Kc.TYPE),Rc&&Uc.assert(r.m_type===Xc.TYPE||r.m_type===Kc.TYPE),this.m_joint1=i||t.joint1,this.m_joint2=r||t.joint2,this.m_ratio=Hc.isFinite(o)?o:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var l=this.m_bodyA.m_xf,c=this.m_bodyA.m_sweep.a,u=this.m_bodyC.m_xf,h=this.m_bodyC.m_sweep.a;if(this.m_type1===Xc.TYPE){var m=this.m_joint1;this.m_localAnchorC=m.m_localAnchorA,this.m_localAnchorA=m.m_localAnchorB,this.m_referenceAngleA=m.m_referenceAngle,this.m_localAxisC=Yc.zero(),s=c-h-this.m_referenceAngleA}else{var p=this.m_joint1;this.m_localAnchorC=p.m_localAnchorA,this.m_localAnchorA=p.m_localAnchorB,this.m_referenceAngleA=p.m_referenceAngle,this.m_localAxisC=p.m_localXAxisA;var d=this.m_localAnchorC,f=Gc.mulTVec2(u.q,Yc.add(Gc.mul(l.q,this.m_localAnchorA),Yc.sub(l.p,u.p)));s=Yc.dot(f,this.m_localAxisC)-Yc.dot(d,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var y=this.m_bodyB.m_xf,_=this.m_bodyB.m_sweep.a,g=this.m_bodyD.m_xf,v=this.m_bodyD.m_sweep.a;if(this.m_type2===Xc.TYPE)m=this.m_joint2,this.m_localAnchorD=m.m_localAnchorA,this.m_localAnchorB=m.m_localAnchorB,this.m_referenceAngleB=m.m_referenceAngle,this.m_localAxisD=Yc.zero(),a=_-v-this.m_referenceAngleB;else{p=this.m_joint2,this.m_localAnchorD=p.m_localAnchorA,this.m_localAnchorB=p.m_localAnchorB,this.m_referenceAngleB=p.m_referenceAngle,this.m_localAxisD=p.m_localXAxisA;var b=this.m_localAnchorD,x=Gc.mulTVec2(g.q,Yc.add(Gc.mul(y.q,this.m_localAnchorB),Yc.sub(y.p,g.p)));a=Yc.dot(x,this.m_localAxisD)-Yc.dot(b,this.m_localAxisD)}this.m_constant=s+this.m_ratio*a,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}tu.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},tu._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Zc,t.bodyA,e),t.bodyB=n(Zc,t.bodyB,e),t.joint1=n(Jc,t.joint1,e),t.joint2=n(Jc,t.joint2,e),new tu(t)},tu.prototype.getJoint1=function(){return this.m_joint1},tu.prototype.getJoint2=function(){return this.m_joint2},tu.prototype.setRatio=function(t){Rc&&Uc.assert(Hc.isFinite(t)),this.m_ratio=t},tu.prototype.getRatio=function(){return this.m_ratio},tu.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},tu.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},tu.prototype.getReactionForce=function(t){return Yc.mul(this.m_impulse,this.m_JvAC).mul(t)},tu.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},tu.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,l=this.m_bodyC.c_velocity.v,c=this.m_bodyC.c_velocity.w,u=this.m_bodyD.c_position.a,h=this.m_bodyD.c_velocity.v,m=this.m_bodyD.c_velocity.w,p=Gc.neo(e),d=Gc.neo(r),f=Gc.neo(a),y=Gc.neo(u);if(this.m_mass=0,this.m_type1==Xc.TYPE)this.m_JvAC=Yc.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var _=Gc.mulVec2(f,this.m_localAxisC),g=Gc.mulSub(f,this.m_localAnchorC,this.m_lcC),v=Gc.mulSub(p,this.m_localAnchorA,this.m_lcA);this.m_JvAC=_,this.m_JwC=Yc.cross(g,_),this.m_JwA=Yc.cross(v,_),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==Xc.TYPE)this.m_JvBD=Yc.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{_=Gc.mulVec2(y,this.m_localAxisD);var b=Gc.mulSub(y,this.m_localAnchorD,this.m_lcD),x=Gc.mulSub(d,this.m_localAnchorB,this.m_lcB);this.m_JvBD=Yc.mul(this.m_ratio,_),this.m_JwD=this.m_ratio*Yc.cross(b,_),this.m_JwB=this.m_ratio*Yc.cross(x,_),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(n.addMul(this.m_mA*this.m_impulse,this.m_JvAC),i+=this.m_iA*this.m_impulse*this.m_JwA,o.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,l.subMul(this.m_mC*this.m_impulse,this.m_JvAC),c-=this.m_iC*this.m_impulse*this.m_JwC,h.subMul(this.m_mD*this.m_impulse,this.m_JvBD),m-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(o),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(l),this.m_bodyC.c_velocity.w=c,this.m_bodyD.c_velocity.v.set(h),this.m_bodyD.c_velocity.w=m},tu.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,l=this.m_bodyD.c_velocity.w,c=Yc.dot(this.m_JvAC,e)-Yc.dot(this.m_JvAC,o)+Yc.dot(this.m_JvBD,i)-Yc.dot(this.m_JvBD,a);c+=this.m_JwA*n-this.m_JwC*s+(this.m_JwB*r-this.m_JwD*l);var u=-this.m_mass*c;this.m_impulse+=u,e.addMul(this.m_mA*u,this.m_JvAC),n+=this.m_iA*u*this.m_JwA,i.addMul(this.m_mB*u,this.m_JvBD),r+=this.m_iB*u*this.m_JwB,o.subMul(this.m_mC*u,this.m_JvAC),s-=this.m_iC*u*this.m_JwC,a.subMul(this.m_mD*u,this.m_JvBD),l-=this.m_iD*u*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(i),this.m_bodyB.c_velocity.w=r,this.m_bodyC.c_velocity.v.set(o),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=l},tu.prototype.solvePositionConstraints=function(t){var e,n,i,r,o,s,a,l,c=this.m_bodyA.c_position.c,u=this.m_bodyA.c_position.a,h=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,p=this.m_bodyC.c_position.c,d=this.m_bodyC.c_position.a,f=this.m_bodyD.c_position.c,y=this.m_bodyD.c_position.a,_=Gc.neo(u),g=Gc.neo(m),v=Gc.neo(d),b=Gc.neo(y),x=0;if(this.m_type1==Xc.TYPE)i=Yc.zero(),o=1,a=1,x+=this.m_iA+this.m_iC,e=u-d-this.m_referenceAngleA;else{var $=Gc.mulVec2(v,this.m_localAxisC),A=Gc.mulSub(v,this.m_localAnchorC,this.m_lcC),w=Gc.mulSub(_,this.m_localAnchorA,this.m_lcA);i=$,a=Yc.cross(A,$),o=Yc.cross(w,$),x+=this.m_mC+this.m_mA+this.m_iC*a*a+this.m_iA*o*o;var B=Yc.sub(this.m_localAnchorC,this.m_lcC),C=Gc.mulTVec2(v,Yc.add(w,Yc.sub(c,p)));e=Yc.dot(Yc.sub(C,B),this.m_localAxisC)}if(this.m_type2==Xc.TYPE)r=Yc.zero(),s=this.m_ratio,l=this.m_ratio,x+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),n=m-y-this.m_referenceAngleB;else{$=Gc.mulVec2(b,this.m_localAxisD);var S=Gc.mulSub(b,this.m_localAnchorD,this.m_lcD),E=Gc.mulSub(g,this.m_localAnchorB,this.m_lcB);r=Yc.mul(this.m_ratio,$),l=this.m_ratio*Yc.cross(S,$),s=this.m_ratio*Yc.cross(E,$),x+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var M=Yc.sub(this.m_localAnchorD,this.m_lcD),T=Gc.mulTVec2(b,Yc.add(E,Yc.sub(h,f)));n=Yc.dot(T,this.m_localAxisD)-Yc.dot(M,this.m_localAxisD)}var k=e+this.m_ratio*n-this.m_constant,P=0;return x>0&&(P=-k/x),c.addMul(this.m_mA*P,i),u+=this.m_iA*P*o,h.addMul(this.m_mB*P,r),m+=this.m_iB*P*s,p.subMul(this.m_mC*P,i),d-=this.m_iC*P*a,f.subMul(this.m_mD*P,r),y-=this.m_iD*P*l,this.m_bodyA.c_position.c.set(c),this.m_bodyA.c_position.a=u,this.m_bodyB.c_position.c.set(h),this.m_bodyB.c_position.a=m,this.m_bodyC.c_position.c.set(p),this.m_bodyC.c_position.a=d,this.m_bodyD.c_position.c.set(f),this.m_bodyD.c_position.a=y,0<Wc.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var eu="undefined"!=typeof ASSERT&&ASSERT,nu=mu,iu=Rn,ru=On,ou=Nn.exports,su=Kn,au=Dr,lu=Ii,cu=Zo,uu=br;mu.TYPE="motor-joint",cu.TYPES[mu.TYPE]=mu,mu._super=cu,mu.prototype=Object.create(mu._super.prototype);var hu={maxForce:1,maxTorque:1,correctionFactor:.3};function mu(t,e,n){if(!(this instanceof mu))return new mu(t,e,n);t=ru(t,hu),cu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=mu.TYPE,this.m_linearOffset=ou.isFinite(t.linearOffset)?t.linearOffset:e.getLocalPoint(n.getPosition()),this.m_angularOffset=ou.isFinite(t.angularOffset)?t.angularOffset:n.getAngle()-e.getAngle(),this.m_linearImpulse=su.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}mu.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},mu._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(uu,t.bodyA,e),t.bodyB=n(uu,t.bodyB,e),new mu(t)},mu.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},mu.prototype.setMaxForce=function(t){eu&&iu.assert(ou.isFinite(t)&&t>=0),this.m_maxForce=t},mu.prototype.getMaxForce=function(){return this.m_maxForce},mu.prototype.setMaxTorque=function(t){eu&&iu.assert(ou.isFinite(t)&&t>=0),this.m_maxTorque=t},mu.prototype.getMaxTorque=function(){return this.m_maxTorque},mu.prototype.setCorrectionFactor=function(t){eu&&iu.assert(ou.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},mu.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},mu.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},mu.prototype.getLinearOffset=function(){return this.m_linearOffset},mu.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},mu.prototype.getAngularOffset=function(){return this.m_angularOffset},mu.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},mu.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},mu.prototype.getReactionForce=function(t){return su.mul(t,this.m_linearImpulse)},mu.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},mu.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=lu.neo(n),u=lu.neo(s);this.m_rA=lu.mulVec2(c,su.neg(this.m_localCenterA)),this.m_rB=lu.mulVec2(u,su.neg(this.m_localCenterB));var h=this.m_invMassA,m=this.m_invMassB,p=this.m_invIA,d=this.m_invIB,f=new au;if(f.ex.x=h+m+p*this.m_rA.y*this.m_rA.y+d*this.m_rB.y*this.m_rB.y,f.ex.y=-p*this.m_rA.x*this.m_rA.y-d*this.m_rB.x*this.m_rB.y,f.ey.x=f.ex.y,f.ey.y=h+m+p*this.m_rA.x*this.m_rA.x+d*this.m_rB.x*this.m_rB.x,this.m_linearMass=f.getInverse(),this.m_angularMass=p+d,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=su.zero(),this.m_linearError.addCombine(1,o,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(lu.mulVec2(c,this.m_linearOffset)),this.m_angularError=s-n-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var y=su.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(h,y),r-=p*(su.cross(this.m_rA,y)+this.m_angularImpulse),a.addMul(m,y),l+=d*(su.cross(this.m_rB,y)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},mu.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=t.inv_dt,h=r-n+u*this.m_correctionFactor*this.m_angularError,m=-this.m_angularMass*h,p=this.m_angularImpulse,d=c*this.m_maxTorque;this.m_angularImpulse=ou.clamp(this.m_angularImpulse+m,-d,d),n-=a*(m=this.m_angularImpulse-p),r+=l*m,(h=su.zero()).addCombine(1,i,1,su.cross(r,this.m_rB)),h.subCombine(1,e,1,su.cross(n,this.m_rA)),h.addMul(u*this.m_correctionFactor,this.m_linearError),m=su.neg(au.mulVec2(this.m_linearMass,h)),p=su.clone(this.m_linearImpulse),this.m_linearImpulse.add(m),d=c*this.m_maxForce,this.m_linearImpulse.clamp(d),m=su.sub(this.m_linearImpulse,p),e.subMul(o,m),n-=a*su.cross(this.m_rA,m),i.addMul(s,m),r+=l*su.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},mu.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var pu="undefined"!=typeof ASSERT&&ASSERT,du=Bu,fu=Rn,yu=On,_u=Nn.exports,gu=Kn,vu=Dr,bu=Ii,xu=Ri,$u=Zo,Au=br;Bu.TYPE="mouse-joint",$u.TYPES[Bu.TYPE]=Bu,Bu._super=$u,Bu.prototype=Object.create(Bu._super.prototype);var wu={maxForce:0,frequencyHz:5,dampingRatio:.7};function Bu(t,e,n,i){if(!(this instanceof Bu))return new Bu(t,e,n,i);t=yu(t,wu),$u.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Bu.TYPE,pu&&fu.assert(_u.isFinite(t.maxForce)&&t.maxForce>=0),pu&&fu.assert(_u.isFinite(t.frequencyHz)&&t.frequencyHz>=0),pu&&fu.assert(_u.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=i?gu.clone(i):t.target||gu.zero(),this.m_localAnchorB=xu.mulTVec2(n.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=gu.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=gu.zero(),this.m_localCenterB=gu.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new vu,this.m_C=gu.zero()}Bu.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},Bu._deserialize=function(t,e,n){(t=Object.assign({},t)).bodyA=n(Au,t.bodyA,e),t.bodyB=n(Au,t.bodyB,e),t.target=gu(t.target);var i=new Bu(t);return t._localAnchorB&&(i.m_localAnchorB=t._localAnchorB),i},Bu.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=gu.clone(t)},Bu.prototype.getTarget=function(){return this.m_targetA},Bu.prototype.setMaxForce=function(t){this.m_maxForce=t},Bu.getMaxForce=function(){return this.m_maxForce},Bu.prototype.setFrequency=function(t){this.m_frequencyHz=t},Bu.prototype.getFrequency=function(){return this.m_frequencyHz},Bu.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Bu.prototype.getDampingRatio=function(){return this.m_dampingRatio},Bu.prototype.getAnchorA=function(){return gu.clone(this.m_targetA)},Bu.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Bu.prototype.getReactionForce=function(t){return gu.mul(t,this.m_impulse)},Bu.prototype.getReactionTorque=function(t){return 0*t},Bu.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},Bu.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,n=this.m_bodyB.c_velocity,i=e.c,r=e.a,o=n.v,s=n.w,a=bu.neo(r),l=this.m_bodyB.getMass(),c=2*_u.PI*this.m_frequencyHz,u=2*l*this.m_dampingRatio*c,h=l*(c*c),m=t.dt;pu&&fu.assert(u+m*h>_u.EPSILON),this.m_gamma=m*(u+m*h),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=m*h*this.m_gamma,this.m_rB=bu.mulVec2(a,gu.sub(this.m_localAnchorB,this.m_localCenterB));var p=new vu;p.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,p.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=p.getInverse(),this.m_C.set(i),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),s*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),o.addMul(this.m_invMassB,this.m_impulse),s+=this.m_invIB*gu.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),n.v.set(o),n.w=s},Bu.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,n=gu.clone(e.v),i=e.w,r=gu.cross(i,this.m_rB);r.add(n),r.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),r.neg();var o=vu.mulVec2(this.m_mass,r),s=gu.clone(this.m_impulse);this.m_impulse.add(o);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),o=gu.sub(this.m_impulse,s),n.addMul(this.m_invMassB,o),i+=this.m_invIB*gu.cross(this.m_rB,o),e.v.set(n),e.w=i},Bu.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Cu="undefined"!=typeof ASSERT&&ASSERT,Su=ju,Eu=Rn,Mu=On,Tu=ni,ku=Nn.exports,Pu=Kn,zu=Ii,Iu=Zo,Fu=br;ju.TYPE="pulley-joint",ju.MIN_PULLEY_LENGTH=2,Iu.TYPES[ju.TYPE]=ju,ju._super=Iu,ju.prototype=Object.create(ju._super.prototype);var Vu={collideConnected:!0};function ju(t,e,n,i,r,o,s,a){if(!(this instanceof ju))return new ju(t,e,n,i,r,o,s,a);t=Mu(t,Vu),Iu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=ju.TYPE,this.m_groundAnchorA=i||t.groundAnchorA||Pu.neo(-1,1),this.m_groundAnchorB=r||t.groundAnchorB||Pu.neo(1,1),this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||Pu.neo(-1,0),this.m_localAnchorB=s?n.getLocalPoint(s):t.localAnchorB||Pu.neo(1,0),this.m_lengthA=ku.isFinite(t.lengthA)?t.lengthA:Pu.distance(o,i),this.m_lengthB=ku.isFinite(t.lengthB)?t.lengthB:Pu.distance(s,r),this.m_ratio=ku.isFinite(a)?a:t.ratio,Cu&&Eu.assert(a>ku.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}ju.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},ju._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Fu,t.bodyA,e),t.bodyB=n(Fu,t.bodyB,e),new ju(t)},ju.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},ju.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},ju.prototype.getLengthA=function(){return this.m_lengthA},ju.prototype.getLengthB=function(){return this.m_lengthB},ju.prototype.getRatio=function(){return this.m_ratio},ju.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return Pu.distance(t,e)},ju.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return Pu.distance(t,e)},ju.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},ju.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},ju.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},ju.prototype.getReactionForce=function(t){return Pu.mul(this.m_impulse,this.m_uB).mul(t)},ju.prototype.getReactionTorque=function(t){return 0},ju.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=zu.neo(n),u=zu.neo(s);this.m_rA=zu.mulVec2(c,Pu.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=zu.mulVec2(u,Pu.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=Pu.sub(Pu.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=Pu.sub(Pu.add(o,this.m_rB),this.m_groundAnchorB);var h=this.m_uA.length(),m=this.m_uB.length();h>10*Tu.linearSlop?this.m_uA.mul(1/h):this.m_uA.setZero(),m>10*Tu.linearSlop?this.m_uB.mul(1/m):this.m_uB.setZero();var p=Pu.cross(this.m_rA,this.m_uA),d=Pu.cross(this.m_rB,this.m_uB),f=this.m_invMassA+this.m_invIA*p*p,y=this.m_invMassB+this.m_invIB*d*d;if(this.m_mass=f+this.m_ratio*this.m_ratio*y,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var _=Pu.mul(-this.m_impulse,this.m_uA),g=Pu.mul(-this.m_ratio*this.m_impulse,this.m_uB);i.addMul(this.m_invMassA,_),r+=this.m_invIA*Pu.cross(this.m_rA,_),a.addMul(this.m_invMassB,g),l+=this.m_invIB*Pu.cross(this.m_rB,g)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},ju.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=Pu.add(e,Pu.cross(n,this.m_rA)),s=Pu.add(i,Pu.cross(r,this.m_rB)),a=-Pu.dot(this.m_uA,o)-this.m_ratio*Pu.dot(this.m_uB,s),l=-this.m_mass*a;this.m_impulse+=l;var c=Pu.mul(-l,this.m_uA),u=Pu.mul(-this.m_ratio*l,this.m_uB);e.addMul(this.m_invMassA,c),n+=this.m_invIA*Pu.cross(this.m_rA,c),i.addMul(this.m_invMassB,u),r+=this.m_invIB*Pu.cross(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},ju.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=zu.neo(n),s=zu.neo(r),a=zu.mulVec2(o,Pu.sub(this.m_localAnchorA,this.m_localCenterA)),l=zu.mulVec2(s,Pu.sub(this.m_localAnchorB,this.m_localCenterB)),c=Pu.sub(Pu.add(e,this.m_rA),this.m_groundAnchorA),u=Pu.sub(Pu.add(i,this.m_rB),this.m_groundAnchorB),h=c.length(),m=u.length();h>10*Tu.linearSlop?c.mul(1/h):c.setZero(),m>10*Tu.linearSlop?u.mul(1/m):u.setZero();var p=Pu.cross(a,c),d=Pu.cross(l,u),f=this.m_invMassA+this.m_invIA*p*p,y=this.m_invMassB+this.m_invIB*d*d,_=f+this.m_ratio*this.m_ratio*y;_>0&&(_=1/_);var g=this.m_constant-h-this.m_ratio*m,v=ku.abs(g),b=-_*g,x=Pu.mul(-b,c),$=Pu.mul(-this.m_ratio*b,u);return e.addMul(this.m_invMassA,x),n+=this.m_invIA*Pu.cross(a,x),i.addMul(this.m_invMassB,$),r+=this.m_invIB*Pu.cross(l,$),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=i,this.m_bodyB.c_position.a=r,v<Tu.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Lu=Yu,Du=On,Ou=ni,Ru=Nn.exports,qu=Kn,Uu=Ii,Nu=Zo,Wu=br;Yu.TYPE="rope-joint",Nu.TYPES[Yu.TYPE]=Yu,Yu._super=Nu,Yu.prototype=Object.create(Yu._super.prototype);var Hu={maxLength:0};function Yu(t,e,n,i){if(!(this instanceof Yu))return new Yu(t,e,n,i);t=Du(t,Hu),Nu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Yu.TYPE,this.m_localAnchorA=i?e.getLocalPoint(i):t.localAnchorA||qu.neo(-1,0),this.m_localAnchorB=i?n.getLocalPoint(i):t.localAnchorB||qu.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}Yu.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},Yu._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Wu,t.bodyA,e),t.bodyB=n(Wu,t.bodyB,e),new Yu(t)},Yu.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Yu.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Yu.prototype.setMaxLength=function(t){this.m_maxLength=t},Yu.prototype.getMaxLength=function(){return this.m_maxLength},Yu.prototype.getLimitState=function(){return this.m_state},Yu.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Yu.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Yu.prototype.getReactionForce=function(t){return qu.mul(this.m_impulse,this.m_u).mul(t)},Yu.prototype.getReactionTorque=function(t){return 0},Yu.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Uu.neo(n),u=Uu.neo(s);this.m_rA=Uu.mulSub(c,this.m_localAnchorA,this.m_localCenterA),this.m_rB=Uu.mulSub(u,this.m_localAnchorB,this.m_localCenterB),this.m_u=qu.zero(),this.m_u.addCombine(1,o,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var h=this.m_length-this.m_maxLength;if(this.m_state=h>0?2:0,!(this.m_length>Ou.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var m=qu.cross(this.m_rA,this.m_u),p=qu.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,t.warmStarting){this.m_impulse*=t.dtRatio;var f=qu.mul(this.m_impulse,this.m_u);i.subMul(this.m_invMassA,f),r-=this.m_invIA*qu.cross(this.m_rA,f),a.addMul(this.m_invMassB,f),l+=this.m_invIB*qu.cross(this.m_rB,f)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Yu.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=qu.addCross(e,n,this.m_rA),s=qu.addCross(i,r,this.m_rB),a=this.m_length-this.m_maxLength,l=qu.dot(this.m_u,qu.sub(s,o));a<0&&(l+=t.inv_dt*a);var c=-this.m_mass*l,u=this.m_impulse;this.m_impulse=Ru.min(0,this.m_impulse+c),c=this.m_impulse-u;var h=qu.mul(c,this.m_u);e.subMul(this.m_invMassA,h),n-=this.m_invIA*qu.cross(this.m_rA,h),i.addMul(this.m_invMassB,h),r+=this.m_invIB*qu.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Yu.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=Uu.neo(n),s=Uu.neo(r),a=Uu.mulSub(o,this.m_localAnchorA,this.m_localCenterA),l=Uu.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=qu.zero();c.addCombine(1,i,1,l),c.subCombine(1,e,1,a);var u=c.normalize(),h=u-this.m_maxLength;h=Ru.clamp(h,0,Ou.maxLinearCorrection);var m=-this.m_mass*h,p=qu.mul(m,c);return e.subMul(this.m_invMassA,p),n-=this.m_invIA*qu.cross(a,p),i.addMul(this.m_invMassB,p),r+=this.m_invIB*qu.cross(l,p),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,u-this.m_maxLength<Ou.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Gu=oh,Ju=On,Zu=ni,Xu=Nn.exports,Ku=Kn,Qu=oo,th=ho,eh=Ii,nh=Zo,ih=br;oh.TYPE="weld-joint",nh.TYPES[oh.TYPE]=oh,oh._super=nh,oh.prototype=Object.create(oh._super.prototype);var rh={frequencyHz:0,dampingRatio:0};function oh(t,e,n,i){if(!(this instanceof oh))return new oh(t,e,n,i);t=Ju(t,rh),nh.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=oh.TYPE,this.m_localAnchorA=Ku.clone(i?e.getLocalPoint(i):t.localAnchorA||Ku.zero()),this.m_localAnchorB=Ku.clone(i?n.getLocalPoint(i):t.localAnchorB||Ku.zero()),this.m_referenceAngle=Xu.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=Qu(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new th}oh.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},oh._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(ih,t.bodyA,e),t.bodyB=n(ih,t.bodyB,e),new oh(t)},oh.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},oh.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},oh.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},oh.prototype.getReferenceAngle=function(){return this.m_referenceAngle},oh.prototype.setFrequency=function(t){this.m_frequencyHz=t},oh.prototype.getFrequency=function(){return this.m_frequencyHz},oh.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},oh.prototype.getDampingRatio=function(){return this.m_dampingRatio},oh.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},oh.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},oh.prototype.getReactionForce=function(t){return Ku.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},oh.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},oh.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=eh.neo(e),l=eh.neo(r);this.m_rA=eh.mulVec2(a,Ku.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=eh.mulVec2(l,Ku.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new th;if(p.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,p.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,p.ez.x=-this.m_rA.y*h-this.m_rB.y*m,p.ex.y=p.ey.x,p.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,p.ez.y=this.m_rA.x*h+this.m_rB.x*m,p.ex.z=p.ez.x,p.ey.z=p.ez.y,p.ez.z=h+m,this.m_frequencyHz>0){p.getInverse22(this.m_mass);var d=h+m,f=d>0?1/d:0,y=r-e-this.m_referenceAngle,_=2*Xu.PI*this.m_frequencyHz,g=2*f*this.m_dampingRatio*_,v=f*_*_,b=t.dt;this.m_gamma=b*(g+b*v),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=y*b*v*this.m_gamma,d+=this.m_gamma,this.m_mass.ez.z=0!=d?1/d:0}else 0==p.ez.z?(p.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(p.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var x=Ku.neo(this.m_impulse.x,this.m_impulse.y);n.subMul(c,x),i-=h*(Ku.cross(this.m_rA,x)+this.m_impulse.z),o.addMul(u,x),s+=m*(Ku.cross(this.m_rB,x)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},oh.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var c=r-n,u=-this.m_mass.ez.z*(c+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,n-=a*u,r+=l*u,(p=Ku.zero()).addCombine(1,i,1,Ku.cross(r,this.m_rB)),p.subCombine(1,e,1,Ku.cross(n,this.m_rA));var h=Ku.neg(th.mulVec2(this.m_mass,p));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y;var m=Ku.clone(h);e.subMul(o,m),n-=a*Ku.cross(this.m_rA,m),i.addMul(s,m),r+=l*Ku.cross(this.m_rB,m)}else{var p;(p=Ku.zero()).addCombine(1,i,1,Ku.cross(r,this.m_rB)),p.subCombine(1,e,1,Ku.cross(n,this.m_rA)),c=r-n;var d=Qu(p.x,p.y,c),f=Qu.neg(th.mulVec3(this.m_mass,d));this.m_impulse.add(f),m=Ku.neo(f.x,f.y),e.subMul(o,m),n-=a*(Ku.cross(this.m_rA,m)+f.z),i.addMul(s,m),r+=l*(Ku.cross(this.m_rB,m)+f.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},oh.prototype.solvePositionConstraints=function(t){var e,n,i=this.m_bodyA.c_position.c,r=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=eh.neo(r),l=eh.neo(s),c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=eh.mulVec2(a,Ku.sub(this.m_localAnchorA,this.m_localCenterA)),d=eh.mulVec2(l,Ku.sub(this.m_localAnchorB,this.m_localCenterB)),f=new th;if(f.ex.x=c+u+p.y*p.y*h+d.y*d.y*m,f.ey.x=-p.y*p.x*h-d.y*d.x*m,f.ez.x=-p.y*h-d.y*m,f.ex.y=f.ey.x,f.ey.y=c+u+p.x*p.x*h+d.x*d.x*m,f.ez.y=p.x*h+d.x*m,f.ex.z=f.ez.x,f.ey.z=f.ez.y,f.ez.z=h+m,this.m_frequencyHz>0){(_=Ku.zero()).addCombine(1,o,1,d),_.subCombine(1,i,1,p),e=_.length(),n=0;var y=Ku.neg(f.solve22(_));i.subMul(c,y),r-=h*Ku.cross(p,y),o.addMul(u,y),s+=m*Ku.cross(d,y)}else{var _;(_=Ku.zero()).addCombine(1,o,1,d),_.subCombine(1,i,1,p);var g=s-r-this.m_referenceAngle;e=_.length(),n=Xu.abs(g);var v=Qu(_.x,_.y,g),b=Qu();if(f.ez.z>0)b=Qu.neg(f.solve33(v));else{var x=Ku.neg(f.solve22(_));b.set(x.x,x.y,0)}y=Ku.neo(b.x,b.y),i.subMul(c,y),r-=h*(Ku.cross(p,y)+b.z),o.addMul(u,y),s+=m*(Ku.cross(d,y)+b.z)}return this.m_bodyA.c_position.c=i,this.m_bodyA.c_position.a=r,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=s,e<=Zu.linearSlop&&n<=Zu.angularSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var sh=fh,ah=On,lh=ni,ch=Nn.exports,uh=Kn,hh=Ii,mh=Zo,ph=br;fh.TYPE="wheel-joint",mh.TYPES[fh.TYPE]=fh,fh._super=mh,fh.prototype=Object.create(fh._super.prototype);var dh={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function fh(t,e,n,i,r){if(!(this instanceof fh))return new fh(t,e,n,i,r);t=ah(t,dh),mh.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=fh.TYPE,this.m_localAnchorA=uh.clone(i?e.getLocalPoint(i):t.localAnchorA||uh.zero()),this.m_localAnchorB=uh.clone(i?n.getLocalPoint(i):t.localAnchorB||uh.zero()),this.m_localXAxisA=uh.clone(r?e.getLocalVector(r):t.localAxisA||t.localAxis||uh.neo(1,0)),this.m_localYAxisA=uh.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=uh.zero(),this.m_ay=uh.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}let yh,_h,gh;fh.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},fh._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(ph,t.bodyA,e),t.bodyB=n(ph,t.bodyB,e),new fh(t)},fh.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(uh.cross(1,t.localAxisA)))},fh.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},fh.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},fh.prototype.getLocalAxisA=function(){return this.m_localXAxisA},fh.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.getWorldPoint(this.m_localAnchorA),i=e.getWorldPoint(this.m_localAnchorB),r=uh.sub(i,n),o=t.getWorldVector(this.m_localXAxisA);return uh.dot(r,o)},fh.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},fh.prototype.isMotorEnabled=function(){return this.m_enableMotor},fh.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},fh.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},fh.prototype.getMotorSpeed=function(){return this.m_motorSpeed},fh.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},fh.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},fh.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},fh.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},fh.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},fh.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},fh.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},fh.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},fh.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},fh.prototype.getReactionForce=function(t){return uh.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},fh.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},fh.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,n=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,a=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,u=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,p=hh.neo(s),d=hh.neo(u),f=hh.mulVec2(p,uh.sub(this.m_localAnchorA,this.m_localCenterA)),y=hh.mulVec2(d,uh.sub(this.m_localAnchorB,this.m_localCenterB));if((b=uh.zero()).addCombine(1,c,1,y),b.subCombine(1,o,1,f),this.m_ay=hh.mulVec2(p,this.m_localYAxisA),this.m_sAy=uh.cross(uh.add(b,f),this.m_ay),this.m_sBy=uh.cross(y,this.m_ay),this.m_mass=e+n+i*this.m_sAy*this.m_sAy+r*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=hh.mulVec2(p,this.m_localXAxisA),this.m_sAx=uh.cross(uh.add(b,f),this.m_ax),this.m_sBx=uh.cross(y,this.m_ax);var _=e+n+i*this.m_sAx*this.m_sAx+r*this.m_sBx*this.m_sBx;if(_>0){this.m_springMass=1/_;var g=uh.dot(b,this.m_ax),v=2*ch.PI*this.m_frequencyHz,b=2*this.m_springMass*this.m_dampingRatio*v,x=this.m_springMass*v*v,$=t.dt;this.m_gamma=$*(b+$*x),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=g*$*x*this.m_gamma,this.m_springMass=_+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=i+r,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var A=uh.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),w=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,B=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;a.subMul(this.m_invMassA,A),l-=this.m_invIA*w,h.addMul(this.m_invMassB,A),m+=this.m_invIB*B}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=m},fh.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,n=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=uh.dot(this.m_ax,a)-uh.dot(this.m_ax,o)+this.m_sBx*l-this.m_sAx*s,u=-this.m_springMass*(c+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;var h=uh.mul(u,this.m_ax),m=u*this.m_sAx,p=u*this.m_sBx;o.subMul(e,h),s-=i*m,a.addMul(n,h),c=(l+=r*p)-s-this.m_motorSpeed,u=-this.m_motorMass*c;var d=this.m_motorImpulse,f=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=ch.clamp(this.m_motorImpulse+u,-f,f),s-=i*(u=this.m_motorImpulse-d),l+=r*u,c=uh.dot(this.m_ay,a)-uh.dot(this.m_ay,o)+this.m_sBy*l-this.m_sAy*s,u=-this.m_mass*c,this.m_impulse+=u,h=uh.mul(u,this.m_ay),m=u*this.m_sAy,p=u*this.m_sBy,o.subMul(e,h),s-=i*m,a.addMul(n,h),l+=r*p,this.m_bodyA.c_velocity.v.set(o),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},fh.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=hh.neo(n),s=hh.neo(r),a=hh.mulVec2(o,uh.sub(this.m_localAnchorA,this.m_localCenterA)),l=hh.mulVec2(s,uh.sub(this.m_localAnchorB,this.m_localCenterB)),c=uh.zero();c.addCombine(1,i,1,l),c.subCombine(1,e,1,a);var u,h=hh.mulVec2(o,this.m_localYAxisA),m=uh.cross(uh.add(c,a),h),p=uh.cross(l,h),d=uh.dot(c,h),f=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;u=0!=f?-d/f:0;var y=uh.mul(u,h),_=u*m,g=u*p;return e.subMul(this.m_invMassA,y),n-=this.m_invIA*_,i.addMul(this.m_invMassB,y),r+=this.m_invIB*g,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,ch.abs(d)<=lh.linearSlop},function(t){t.internal={},t.Serializer=Dn.exports,t.Math=Nn.exports,t.Vec2=Kn,t.Vec3=oo,t.Mat22=Dr,t.Mat33=ho,t.Transform=Ri,t.Rot=Ii,t.AABB=li,t.Shape=sr,t.Fixture=cr,t.Body=br,t.Contact=qo,t.Joint=Zo,t.World=js,t.Circle=aa,t.Edge=da,t.Polygon=$a,t.Chain=Pa,t.Box=Oa,t.internal.CollidePolygons=dl,t.DistanceJoint=Ul,t.FrictionJoint=tc,t.GearJoint=qc,t.MotorJoint=nu,t.MouseJoint=du,t.PrismaticJoint=Sc,t.PulleyJoint=Su,t.RevoluteJoint=mc,t.RopeJoint=Lu,t.WeldJoint=Gu,t.WheelJoint=sh,t.Settings=ni,t.internal.Sweep=Yi,t.internal.stats=no,t.internal.Manifold=Ur.exports,t.internal.Distance=eo.exports,t.internal.TimeOfImpact=ts.exports,t.internal.DynamicTree=_i,t.internal.Settings=t.Settings}(oa);try{yh=new TextDecoder}catch(zp){}let vh=0;const bh={};let xh,$h,Ah,wh,Bh,Ch,Sh={},Eh=0,Mh=0,Th=[],kh=[],Ph={useRecords:!1,mapsAsObjects:!0},zh=!1;class Ih{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.getStructures&&!t.structures&&((t.structures=[]).uninitialized=!0)),Object.assign(this,t)}decode(t,e){if(_h)return tm((()=>(em(),this?this.decode(t,e):Ih.prototype.decode.call(Ph,t,e))));gh=e>-1?e:t.length,vh=0,Mh=0,$h=null,_h=t;try{Bh=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(zp){if(_h=null,t instanceof Uint8Array)throw zp;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof Ih){if(Sh=this,wh=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return xh=this.structures,Fh();(!xh||xh.length>0)&&(xh=[])}else Sh=Ph,(!xh||xh.length>0)&&(xh=[]),wh=null;return Fh()}decodeMultiple(t,e){let n,i=0;try{let r=t.length;zh=!0;let o=this?this.decode(t,r):im.decode(t,r);if(!e){for(n=[o];vh<r;)i=vh,n.push(Fh());return n}if(!1===e(o))return;for(;vh<r;)if(i=vh,!1===e(Fh()))return}catch(zp){throw zp.lastPosition=i,zp.values=n,zp}finally{zh=!1,em()}}}function Fh(){try{let t=Vh();if(vh==gh)xh=null,_h=null,Ah&&(Ah=null);else{if(vh>gh){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}if(!zh)throw new Error("Data read, but end of buffer not reached")}return t}catch(zp){throw em(),(zp instanceof RangeError||zp.message.startsWith("Unexpected end of buffer"))&&(zp.incomplete=!0),zp}}function Vh(){let t=_h[vh++],e=t>>5;if(t&=31,t>23)switch(t){case 24:t=_h[vh++];break;case 25:if(7==e)return function(){let t,e=_h[vh++],n=_h[vh++],i=(e<<8)+n,r=i>>10&31,o=1023&i;return t=0==r?Math.exp(o,-24):31!=r?Math.exp(o+1024,r-25):0==o?1/0:NaN,32768&i?-t:t}();t=Bh.getUint16(vh),vh+=2;break;case 26:if(7==e){let t=Bh.getFloat32(vh);if(Sh.useFloat32>2){let e=nm[(127&_h[vh])<<1|_h[vh+1]>>7];return vh+=4,(e*t+(t>0?.5:-.5)>>0)/e}return vh+=4,t}t=Bh.getUint32(vh),vh+=4;break;case 27:if(7==e){let t=Bh.getFloat64(vh);return vh+=8,t}Sh.int64AsNumber?(t=4294967296*Bh.getUint32(vh),t+=Bh.getUint32(vh+4)):t=Bh.getBigUint64(vh),vh+=8;break;case 31:switch(e){case 2:case 3:case 4:let t,n=[],i=0;for(;(t=Vh())!=bh;)n[i++]=t;return 4==e?n:3==e?n.join(""):Buffer.concat(n);case 5:let r;if(Sh.mapsAsObjects){let t={};for(;(r=Wh())!=bh;)t[r]=Vh();return t}{Ch&&(Sh.mapsAsObjects=!0,Ch=!1);let t=new Map;for(;(r=Vh())!=bh;)t.set(r,Vh());return t}case 7:return bh;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return n=t,Sh.copyBuffers?Uint8Array.prototype.slice.call(_h,vh,vh+=n):_h.subarray(vh,vh+=n);case 3:if(Mh>=vh)return $h.slice(vh-Eh,(vh+=t)-Eh);if(0==Mh&&gh<140&&t<32){let e=t<16?Uh(t):qh(t);if(null!=e)return e}return Oh(t);case 4:let e=new Array(t);for(let n=0;n<t;n++)e[n]=Vh();return e;case 5:if(Sh.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[Wh()]=Vh();return e}{Ch&&(Sh.mapsAsObjects=!0,Ch=!1);let e=new Map;for(let n=0;n<t;n++)e.set(Vh(),Vh());return e}case 6:if(t>>8==105){let e=xh[255&t];if(e)return e.read||(e.read=Lh(e)),e.read();if(Sh.getStructures){let n=tm((()=>(_h=null,Sh.getStructures())));return!0===xh?Sh.structures=xh=n:xh.splice.apply(xh,[0,n.length].concat(n)),e=xh[255&t],e?(e.read||(e.read=Lh(e)),e.read()):t}return t}{let e=Th[t];if(e)return e.handlesRead?e(Vh):e(Vh());{let e=Vh();for(let n=0;n<kh.length;n++){let i=kh[n](t,e);if(void 0!==i)return i}return new Hh(e)}}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let e=wh[t];if(void 0!==e)return e;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}throw new Error("Unknown CBOR token "+t)}var n}const jh=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Lh(t){let e=t.length;function n(){if(n.count++>2)return this.read=new Function("a","r","return function(){a();return {"+t.map((t=>jh.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"}}")(Dh,Vh),this.read();Dh();let i={};for(let n=0;n<e;n++)i[t[n]]=Vh();return i}return n.count=0,n}function Dh(t){let e=_h[vh++];if(e&=31,e>23)switch(e){case 24:vh++;break;case 25:vh+=2;break;case 26:vh+=4}}let Oh=function(t){let e;if(t<16&&(e=Uh(t)))return e;if(t>64&&yh)return yh.decode(_h.subarray(vh,vh+=t));const n=vh+t,i=[];for(e="";vh<n;){const t=_h[vh++];if(0==(128&t))i.push(t);else if(192==(224&t)){const e=63&_h[vh++];i.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&_h[vh++],n=63&_h[vh++];i.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){const e=63&_h[vh++],n=63&_h[vh++],r=63&_h[vh++];let o=(7&t)<<18|e<<12|n<<6|r;o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o)}else i.push(t);i.length>=4096&&(e+=Rh.apply(String,i),i.length=0)}return i.length>0&&(e+=Rh.apply(String,i)),e},Rh=String.fromCharCode;function qh(t){let e=vh,n=new Array(t);for(let i=0;i<t;i++){const t=_h[vh++];if((128&t)>0)return void(vh=e);n[i]=t}return Rh.apply(String,n)}function Uh(t){if(t<4){if(t<2){if(0===t)return"";{let t=_h[vh++];return(128&t)>1?void(vh-=1):Rh(t)}}{let e=_h[vh++],n=_h[vh++];if((128&e)>0||(128&n)>0)return void(vh-=2);if(t<3)return Rh(e,n);let i=_h[vh++];return(128&i)>0?void(vh-=3):Rh(e,n,i)}}{let e=_h[vh++],n=_h[vh++],i=_h[vh++],r=_h[vh++];if((128&e)>0||(128&n)>0||(128&i)>0||(128&r)>0)return void(vh-=4);if(t<6){if(4===t)return Rh(e,n,i,r);{let t=_h[vh++];return(128&t)>0?void(vh-=5):Rh(e,n,i,r,t)}}if(t<8){let o=_h[vh++],s=_h[vh++];if((128&o)>0||(128&s)>0)return void(vh-=6);if(t<7)return Rh(e,n,i,r,o,s);let a=_h[vh++];return(128&a)>0?void(vh-=7):Rh(e,n,i,r,o,s,a)}{let o=_h[vh++],s=_h[vh++],a=_h[vh++],l=_h[vh++];if((128&o)>0||(128&s)>0||(128&a)>0||(128&l)>0)return void(vh-=8);if(t<10){if(8===t)return Rh(e,n,i,r,o,s,a,l);{let t=_h[vh++];return(128&t)>0?void(vh-=9):Rh(e,n,i,r,o,s,a,l,t)}}if(t<12){let c=_h[vh++],u=_h[vh++];if((128&c)>0||(128&u)>0)return void(vh-=10);if(t<11)return Rh(e,n,i,r,o,s,a,l,c,u);let h=_h[vh++];return(128&h)>0?void(vh-=11):Rh(e,n,i,r,o,s,a,l,c,u,h)}{let c=_h[vh++],u=_h[vh++],h=_h[vh++],m=_h[vh++];if((128&c)>0||(128&u)>0||(128&h)>0||(128&m)>0)return void(vh-=12);if(t<14){if(12===t)return Rh(e,n,i,r,o,s,a,l,c,u,h,m);{let t=_h[vh++];return(128&t)>0?void(vh-=13):Rh(e,n,i,r,o,s,a,l,c,u,h,m,t)}}{let p=_h[vh++],d=_h[vh++];if((128&p)>0||(128&d)>0)return void(vh-=14);if(t<15)return Rh(e,n,i,r,o,s,a,l,c,u,h,m,p,d);let f=_h[vh++];return(128&f)>0?void(vh-=15):Rh(e,n,i,r,o,s,a,l,c,u,h,m,p,d,f)}}}}}let Nh=new Array(4096);function Wh(){let t=_h[vh++];if(!(t>=96&&t<120))return vh--,Vh();if(t-=96,Mh>=vh)return $h.slice(vh-Eh,(vh+=t)-Eh);if(!(0==Mh&&gh<180))return Oh(t);let e,n=4095&(t<<5^(t>1?Bh.getUint16(vh):t>0?_h[vh]:0)),i=Nh[n],r=vh,o=vh+t-3,s=0;if(i&&i.bytes==t){for(;r<o;){if(e=Bh.getUint32(r),e!=i[s++]){r=1879048192;break}r+=4}for(o+=3;r<o;)if(e=_h[r++],e!=i[s++]){r=1879048192;break}if(r===o)return vh=r,i.string;o-=3,r=vh}for(i=[],Nh[n]=i,i.bytes=t;r<o;)e=Bh.getUint32(r),i.push(e),r+=4;for(o+=3;r<o;)e=_h[r++],i.push(e);let a=t<16?Uh(t):qh(t);return i.string=null!=a?a:Oh(t)}class Hh{constructor(t){this.value=t}}let Yh="object"==typeof window?window:global;Th[0]=t=>new Date(t),Th[1]=t=>new Date(1e3*t),Th[2]=t=>new DataView(t.buffer,t.byteOffset,t.byteLength).getBigUint64(0),Th[3]=t=>BigInt(-1)-new DataView(t.buffer,t.byteOffset,t.byteLength).getBigUint64(0);const Gh=()=>{let t=Vh(),e=t[0],n=t[1];xh[255&n]=e,e.read=Lh(e);let i={};for(let r=2,o=t.length;r<o;r++)i[e[r-2]]=t[r];return i};Gh.handlesRead=!0,Th[105]=Gh,Th[27]=t=>(Yh[t[0]]||Error)(t[1],t[2]);const Jh=t=>{if(132!=_h[vh++])throw new Error("Packed values structure must be followed by 4 element array");let e=t();return wh=wh?e.concat(wh.slice(e.length)):e,wh.prefixes=t(),wh.suffixes=t(),t()};function Zh(t,e){return"string"==typeof t?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}Jh.handlesRead=!0,Th[51]=Jh,Th[6]=t=>{if("number"==typeof t)return wh[16+(t>=0?2*t:-2*t-1)];throw new Error("No support for non-integer packed references yet")},Th[40009]=t=>{let e;Ah||(Ah=new Map),e=_h[vh]>>5==4?[]:{};let n={target:e};Ah.set(t,n);let i=Vh();return n.used?Object.assign(e,i):(n.target=i,i)},Th[40010]=t=>{let e=Ah.get(t);return e.used=!0,e.target},Th[258]=t=>new Set(t),(Th[259]=t=>(Sh.mapsAsObjects&&(Sh.mapsAsObjects=!1,Ch=!0),t())).handlesRead=!0,kh.push(((t,e)=>t>=225&&t<=255?Zh(Jh.prefixes[t-224],e):t>=28704&&t<=32767?Zh(Jh.prefixes[t-28672],e):t>=1879052288&&t<=2147483647?Zh(Jh.prefixes[t-1879048192],e):t>=216&&t<=223?Zh(e,Jh.suffixes[t-216]):t>=27647&&t<=28671?Zh(e,Jh.suffixes[t-27639]):t>=1811940352&&t<=1879048191?Zh(e,Jh.suffixes[t-1811939328]):void 0));const Xh=["Uint8","Uint8Clamped","Uint16","Uint32","BigUint64","Int8","Int16","Int32","BigInt64","Float32","Float64"].map((t=>t+"Array")),Kh=[64,68,69,70,71,72,77,78,79,81,82];for(let t=0;t<Xh.length;t++)Qh(Xh[t],Kh[t]);function Qh(t,e){Th[e]=e=>{if(!t)throw new Error("Could not find typed array for code "+typeCode);return new Yh[t](Uint8Array.prototype.slice.call(e,0).buffer)}}function tm(t){let e=gh,n=vh,i=Eh,r=Mh,o=$h,s=Ah,a=new Uint8Array(_h.slice(0,gh)),l=xh,c=Sh,u=zh,h=t();return gh=e,vh=n,Eh=i,Mh=r,$h=o,Ah=s,_h=a,zh=u,xh=l,Sh=c,Bh=new DataView(_h.buffer,_h.byteOffset,_h.byteLength),h}function em(){_h=null,Ah=null,xh=null}const nm=new Array(147);for(let t=0;t<256;t++)nm[t]=+("1e"+Math.floor(45.15-.30103*t));let im=new Ih({useRecords:!1});t("d",im.decode),im.decodeMultiple;let rm,om,sm,am=new Float32Array(1);new Uint8Array(am.buffer,0,4);try{rm=new TextEncoder}catch(zp){}const lm="undefined"!=typeof Buffer,cm=lm?Buffer.allocUnsafeSlow:Uint8Array,um=lm?Buffer:Uint8Array,hm=105,mm=lm?4294967296:2144337920;let pm,dm,fm,ym=0;const _m=Symbol("record-id");function gm(t){t<24?pm[ym++]=128|t:t<256?(pm[ym++]=152,pm[ym++]=t):t<65536?(pm[ym++]=153,pm[ym++]=t>>8,pm[ym++]=255&t):(pm[ym++]=154,dm.setUint32(ym,t),ym+=4)}function vm(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let n=e.get(t);if(n)2==++n.count&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let n=e.samplingPackedValues.get(t);n?n.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let n=0,i=t.length;n<i;n++)vm(t[n],e);else{let i=!e.encoder.useRecords;for(var n in t)t.hasOwnProperty(n)&&(i&&vm(n,e),vm(t[n],e))}break;case"function":console.log(t)}}function bm(t){return{tag:t,encode:function(t,e){let n=t.byteLength,i=t.byteOffset||0,r=t.buffer||t;e(lm?Buffer.from(r,i,n):new Uint8Array(r,i,n))}}}function xm(t,e){let n=t.byteLength;n<24?pm[ym++]=64+n:n<256?(pm[ym++]=88,pm[ym++]=n):n<65536?(pm[ym++]=89,pm[ym++]=n>>8,pm[ym++]=255&n):(pm[ym++]=90,dm.setUint32(ym,n),ym+=4),ym+n>=pm.length&&e(ym+n),pm.set(t,ym),ym+=n}sm=[Date,Set,Error,RegExp,ArrayBuffer,um,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array],om=[{tag:1,encode(t,e){let n=t.getTime()/1e3;(this.useTimestamp32||0===t.getMilliseconds())&&n>=0&&n<4294967296?(pm[ym++]=26,dm.setUint32(ym,n),ym+=4):(pm[ym++]=251,dm.setFloat64(ym,n),ym+=8)}},{tag:258,encode(t,e){e(Array.from(t))}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{encode(t,e,n){xm(t,n)}},{encode(t,e,n){xm(t,n)}},bm(64),bm(68),bm(69),bm(70),bm(71),bm(72),bm(77),bm(78),bm(79),bm(81),bm(82)];let $m=new class extends Ih{constructor(t){let e,n,i,r,o;super(t),this.offset=0,t=t||{};let s=0,a=um.prototype.utf8Write?function(t,e,n){return pm.utf8Write(t,e,n)}:!(!rm||!rm.encodeInto)&&function(t,e){return rm.encodeInto(t,pm.subarray(e)).written},l=this,c=64,u=t.sequential;u&&(c=0,this.structures=[]);let h,m,p,d=t.sharedValues;if(d){p=Object.create(null);for(let t=0,e=d.length;t<e;t++)p[d[t]]=t}let f=[],y=0,_=0;this.encode=function(a,v){if(pm||(pm=new cm(8192),dm=new DataView(pm.buffer,0,8192),ym=0),fm=pm.length-10,fm-ym<2048?(pm=new cm(pm.length),dm=new DataView(pm.buffer,0,pm.length),fm=pm.length-10,ym=0):v===Am&&(ym=ym+7&2147483640),e=ym,o=l.structuredClone?new Map:null,n=l.structures,n){n.uninitialized&&(l.structures=n=l.getStructures());let t=n.length;if(t>c&&!u&&(t=c),!n.transitions){n.transitions=Object.create(null);for(let e=0;e<t;e++){let t=n[e];if(!t)continue;let i,r=n.transitions;for(let e=0,n=t.length;e<n;e++){let n=t[e];i=r[n],i||(i=r[n]=Object.create(null)),r=i}r[_m]=e}s=n.length}u||(n.nextId=t)}if(i&&(i=!1),r=n||[],m=p,t.pack){let e=new Map;if(e.values=[],e.encoder=l,e.maxValues=t.maxPrivatePackedValues||(p?16:1/0),e.objectMap=p||!1,e.samplingPackedValues=h,vm(a,e),e.values.length>0){pm[ym++]=216,pm[ym++]=51,gm(4);let t=e.values;g(t),gm(0),gm(0),m=Object.create(p||null);for(let e=0,n=t.length;e<n;e++)m[t[e]]=e}}try{if(g(a),l.offset=ym,o&&o.idsToInsert){ym+=8*o.idsToInsert.length,ym>fm&&b(ym),l.offset=ym;let t=function(t,e){let n,i=8*e.length,r=t.length-i;for(e.sort(((t,e)=>t.offset>e.offset?1:-1));n=e.pop();){let e=n.offset,o=n.id;t.copyWithin(e+i,e,r),i-=8;let s=e+i;t[s++]=217,t[s++]=156,t[s++]=73,t[s++]=26,t[s++]=o>>24,t[s++]=o>>16&255,t[s++]=o>>8&255,t[s++]=255&o,r=e}return t}(pm.subarray(e,ym),o.idsToInsert);return o=null,t}return v===Am?(pm.start=e,pm.end=ym,pm):pm.subarray(e,ym)}finally{if(n){if(_<10&&_++,y>1e4)n.transitions=null,_=0,y=0,f.length>0&&(f=[]);else if(f.length>0&&!u){for(let t=0,e=f.length;t<e;t++)f[t][_m]=void 0;f=[]}if(i&&l.saveStructures){l.structures.length>c&&(l.structures=l.structures.slice(0,c));let t=pm.subarray(e,ym),n=l.structures||[];return d&&(n=n.concat(d)),!1===l.saveStructures(l.structures,s)?(l.structures=l.getStructures()||[],l.encode(a)):(s=n.length,t)}}}},this.findCommonStringsToPack=()=>(h=new Map,p||(p=Object.create(null)),({threshold:e})=>{e=e||4;let n=this.pack?t.maxPrivatePackedValues||16:0;d||(d=this.sharedValues=[]);for(let[t,r]of h)r.count>e&&(p[t]=n++,d.push(t),i=!0);h=null});const g=n=>{ym>fm&&(pm=b(ym));var i,r=typeof n;if("string"===r){if(m){let e=m[n];if(e>=0)return void(e<16?pm[ym++]=e+224:(pm[ym++]=198,g(1&e?15-e>>1:e-16>>1)));if(h&&!t.pack){let t=h.get(n);t?t.count++:h.set(n,{count:1})}}let e,r=n.length;e=r<32?1:r<256?2:r<65536?3:5;let o=3*r;if(ym+o>fm&&(pm=b(ym+o)),r<64||!a){let t,o,s,a=ym+e;for(t=0;t<r;t++)o=n.charCodeAt(t),o<128?pm[a++]=o:o<2048?(pm[a++]=o>>6|192,pm[a++]=63&o|128):55296==(64512&o)&&56320==(64512&(s=n.charCodeAt(t+1)))?(o=65536+((1023&o)<<10)+(1023&s),t++,pm[a++]=o>>18|240,pm[a++]=o>>12&63|128,pm[a++]=o>>6&63|128,pm[a++]=63&o|128):(pm[a++]=o>>12|224,pm[a++]=o>>6&63|128,pm[a++]=63&o|128);i=a-ym-e}else i=a(n,ym+e,o);i<24?pm[ym++]=96|i:i<256?(e<2&&pm.copyWithin(ym+2,ym+1,ym+1+i),pm[ym++]=120,pm[ym++]=i):i<65536?(e<3&&pm.copyWithin(ym+3,ym+2,ym+2+i),pm[ym++]=121,pm[ym++]=i>>8,pm[ym++]=255&i):(e<5&&pm.copyWithin(ym+5,ym+3,ym+3+i),pm[ym++]=122,dm.setUint32(ym,i),ym+=4),ym+=i}else if("number"===r)if(n>>>0===n)n<24?pm[ym++]=n:n<256?(pm[ym++]=24,pm[ym++]=n):n<65536?(pm[ym++]=25,pm[ym++]=n>>8,pm[ym++]=255&n):(pm[ym++]=26,dm.setUint32(ym,n),ym+=4);else if(n>>0===n)n>=-24?pm[ym++]=31-n:n>=-256?(pm[ym++]=56,pm[ym++]=~n):n>=-65536?(pm[ym++]=57,dm.setUint16(ym,~n),ym+=2):(pm[ym++]=58,dm.setUint32(ym,~n),ym+=4);else{let t;if((t=this.useFloat32)>0&&n<4294967296&&n>=-2147483648){let e;if(pm[ym++]=250,dm.setFloat32(ym,n),t<4||(e=n*nm[(127&pm[ym])<<1|pm[ym+1]>>7])>>0===e)return void(ym+=4);ym--}pm[ym++]=251,dm.setFloat64(ym,n),ym+=8}else if("object"===r)if(n){if(o){let t=o.get(n);if(t){if(!t.id){let e=o.idsToInsert||(o.idsToInsert=[]);t.id=e.push(t)}return pm[ym++]=217,pm[ym++]=156,pm[ym++]=74,pm[ym++]=26,dm.setUint32(ym,t.id),void(ym+=4)}o.set(n,{offset:ym-e})}let t=n.constructor;if(t===Object)v(n,!0);else if(t===Array){(i=n.length)<24?pm[ym++]=128|i:gm(i);for(let t=0;t<i;t++)g(n[t])}else if(t===Map){(this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(pm[ym++]=217,pm[ym++]=1,pm[ym++]=3),(i=n.size)<24?pm[ym++]=160|i:i<256?(pm[ym++]=184,pm[ym++]=i):i<65536?(pm[ym++]=185,pm[ym++]=i>>8,pm[ym++]=255&i):(pm[ym++]=186,dm.setUint32(ym,i),ym+=4);for(let[t,e]of n)g(t),g(e)}else{for(let t=0,e=om.length;t<e;t++)if(n instanceof sm[t]){let e=om[t],i=e.tag;return i<24?pm[ym++]=192|i:i<256?(pm[ym++]=216,pm[ym++]=i):i<65536?(pm[ym++]=217,pm[ym++]=i>>8,pm[ym++]=255&i):i>-1&&(pm[ym++]=218,dm.setUint32(ym,i),ym+=4),void e.encode.call(this,n,g,b)}if(n[Symbol.iterator]){pm[ym++]=159;for(let t of n)g(t);return void(pm[ym++]=255)}v(n,!n.hasOwnProperty)}}else pm[ym++]=246;else if("boolean"===r)pm[ym++]=n?245:244;else if("bigint"===r){if(n<BigInt(1)<<BigInt(64)&&n>=0)pm[ym++]=27,dm.setBigUint64(ym,n);else if(n>-(BigInt(1)<<BigInt(64))&&n<0)pm[ym++]=59,dm.setBigUint64(ym,-n-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(n+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");pm[ym++]=251,dm.setFloat64(ym,Number(n))}ym+=8}else{if("undefined"!==r)throw new Error("Unknown type: "+r);pm[ym++]=247}},v=!1===this.useRecords?this.variableMapSize?t=>{let e,n=Object.keys(t),i=n.length;i<24?pm[ym++]=160|i:i<256?(pm[ym++]=184,pm[ym++]=i):i<65536?(pm[ym++]=185,pm[ym++]=i>>8,pm[ym++]=255&i):(pm[ym++]=186,dm.setUint32(ym,i),ym+=4);for(let r=0;r<i;r++)g(e=n[r]),g(t[e])}:(t,n)=>{pm[ym++]=185;let i=ym-e;ym+=2;let r=0;for(let e in t)(n||t.hasOwnProperty(e))&&(g(e),g(t[e]),r++);pm[i+++e]=r>>8,pm[i+e]=255&r}:t=>{let e,o=Object.keys(t),s=r.transitions||(r.transitions=Object.create(null)),a=0,l=o.length;for(let n=0;n<l;n++){let t=o[n];e=s[t],e||(e=s[t]=Object.create(null),a++),s=e}let u=s[_m];if(void 0!==u)pm[ym++]=217,pm[ym++]=hm,pm[ym++]=u;else{if(u=r.nextId++,u||(u=0,r.nextId=1),u>=256&&(r.nextId=(u=c)+1),s[_m]=u,r[u]=o,!(n&&n.length<=c)){pm[ym++]=216,pm[ym++]=hm,a&&(y+=_*a),f.length>=256-c&&(f.shift()[_m]=void 0),f.push(s),gm(l+2),g(o),pm[ym++]=25,pm[ym++]=hm,pm[ym++]=u;for(let e=0;e<l;e++)g(t[o[e]]);return}pm[ym++]=217,pm[ym++]=hm,pm[ym++]=u,i=!0}l<24?pm[ym++]=128|l:gm(l);for(let n=0;n<l;n++)g(t[o[n]])},b=t=>{let n;if(t>16777216){if(t-e>mm)throw new Error("Encoded buffer would be larger than maximum buffer size");n=Math.min(mm,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(t-e<<2,pm.length-1)>>12)<<12;let i=new cm(n);return dm=new DataView(i.buffer,0,n),pm.copy?pm.copy(i,0,e,t):i.set(pm.slice(e,t)),ym-=e,e=0,fm=i.length-10,pm=i}}useBuffer(t){pm=t,dm=new DataView(pm.buffer,pm.byteOffset,pm.byteLength),ym=0}}({useRecords:!1});t("e",$m.encode);const Am=1e3;var wm,Bm,Cm;try{wm=new TextDecoder}catch(zp){}var Sm,Em,Mm,Tm,km=0,Pm={},zm=0,Im=0,Fm=[],Vm={useRecords:!1,mapsAsObjects:!0};class jm{}const Lm=new jm;Lm.name="MessagePack 0xC1";var Dm=!1;class Om{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(Bm)return hp((()=>(mp(),this?this.unpack(t,e):Om.prototype.unpack.call(Vm,t,e))));Cm=e>-1?e:t.length,km=0,Im=0,Em=null,Bm=t;try{Tm=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(zp){if(Bm=null,t instanceof Uint8Array)throw zp;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof Om){if(Pm=this,this.structures)return Sm=this.structures,Rm();(!Sm||Sm.length>0)&&(Sm=[])}else Pm=Vm,(!Sm||Sm.length>0)&&(Sm=[]);return Rm()}unpackMultiple(t,e){let n,i=0;try{Dm=!0;let r=t.length,o=this?this.unpack(t,r):dp.unpack(t,r);if(!e){for(n=[o];km<r;)i=km,n.push(Rm());return n}for(e(o);km<r;)if(i=km,!1===e(Rm()))return}catch(zp){throw zp.lastPosition=i,zp.values=n,zp}finally{Dm=!1,mp()}}_mergeStructures(t,e){for(let n=0,i=(t=t||[]).length;n<i;n++){let e=t[n];e&&(e.isShared=!0,n>=32&&(e.highByte=n-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let i=t[n],r=e[n];r&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[n]=i),t[n]=r)}return this.structures=t}decode(t,e){return this.unpack(t,e)}}function Rm(){try{if(!Pm.trusted&&!Dm){let t=Sm.sharedLength||0;t<Sm.length&&(Sm.length=t)}let t=Um();if(km==Cm)Sm.restoreStructures&&qm(),Sm=null,Bm=null,Mm&&(Mm=null);else{if(km>Cm){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}if(!Dm)throw new Error("Data read, but end of buffer not reached")}return t}catch(zp){throw Sm.restoreStructures&&qm(),mp(),(zp instanceof RangeError||zp.message.startsWith("Unexpected end of buffer"))&&(zp.incomplete=!0),zp}}function qm(){for(let t in Sm.restoreStructures)Sm[t]=Sm.restoreStructures[t];Sm.restoreStructures=null}function Um(){let t=Bm[km++];if(t<160){if(t<128){if(t<64)return t;{let e=Sm[63&t]||Pm.getStructures&&Ym()[63&t];return e?(e.read||(e.read=Wm(e,63&t)),e.read()):t}}if(t<144){if(t-=128,Pm.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[ap()]=Um();return e}{let e=new Map;for(let n=0;n<t;n++)e.set(Um(),Um());return e}}{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Um();return e}}if(t<192){let e=t-160;if(Im>=km)return Em.slice(km-zm,(km+=e)-zm);if(0==Im&&Cm<140){let t=e<16?ip(e):np(e);if(null!=t)return t}return Gm(e)}{let e;switch(t){case 192:return null;case 193:return Lm;case 194:return!1;case 195:return!0;case 196:return rp(Bm[km++]);case 197:return e=Tm.getUint16(km),km+=2,rp(e);case 198:return e=Tm.getUint32(km),km+=4,rp(e);case 199:return op(Bm[km++]);case 200:return e=Tm.getUint16(km),km+=2,op(e);case 201:return e=Tm.getUint32(km),km+=4,op(e);case 202:if(e=Tm.getFloat32(km),Pm.useFloat32>2){let t=pp[(127&Bm[km])<<1|Bm[km+1]>>7];return km+=4,(t*e+(e>0?.5:-.5)>>0)/t}return km+=4,e;case 203:return e=Tm.getFloat64(km),km+=8,e;case 204:return Bm[km++];case 205:return e=Tm.getUint16(km),km+=2,e;case 206:return e=Tm.getUint32(km),km+=4,e;case 207:return Pm.int64AsNumber?(e=4294967296*Tm.getUint32(km),e+=Tm.getUint32(km+4)):e=Tm.getBigUint64(km),km+=8,e;case 208:return Tm.getInt8(km++);case 209:return e=Tm.getInt16(km),km+=2,e;case 210:return e=Tm.getInt32(km),km+=4,e;case 211:return Pm.int64AsNumber?(e=4294967296*Tm.getInt32(km),e+=Tm.getUint32(km+4)):e=Tm.getBigInt64(km),km+=8,e;case 212:if(e=Bm[km++],114==e)return lp(63&Bm[km++]);{let t=Fm[e];if(t)return t.read?(km++,t.read(Um())):t.noBuffer?(km++,t()):t(Bm.subarray(km,++km));throw new Error("Unknown extension "+e)}case 213:return e=Bm[km],114==e?(km++,lp(63&Bm[km++],Bm[km++])):op(2);case 214:return op(4);case 215:return op(8);case 216:return op(16);case 217:return e=Bm[km++],Im>=km?Em.slice(km-zm,(km+=e)-zm):Jm(e);case 218:return e=Tm.getUint16(km),Im>=(km+=2)?Em.slice(km-zm,(km+=e)-zm):Zm(e);case 219:return e=Tm.getUint32(km),Im>=(km+=4)?Em.slice(km-zm,(km+=e)-zm):Xm(e);case 220:return e=Tm.getUint16(km),km+=2,Qm(e);case 221:return e=Tm.getUint32(km),km+=4,Qm(e);case 222:return e=Tm.getUint16(km),km+=2,tp(e);case 223:return e=Tm.getUint32(km),km+=4,tp(e);default:if(t>=224)return t-256;if(void 0===t){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+t)}}}const Nm=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Wm(t,e){function n(){if(n.count++>2){let n=t.read=new Function("r","return function(){return {"+t.map((t=>Nm.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"}}")(Um);return 0===t.highByte&&(t.read=Hm(e,t.read)),n()}let i={};for(let e=0,n=t.length;e<n;e++)i[t[e]]=Um();return i}return n.count=0,0===t.highByte?Hm(e,n):n}const Hm=(t,e)=>function(){let n=Bm[km++];if(0===n)return e();let i=t<32?-(t+(n<<5)):t+(n<<5),r=Sm[i]||Ym()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=Wm(r,t)),r.read()};function Ym(){let t=hp((()=>(Bm=null,Pm.getStructures())));return Sm=Pm._mergeStructures(t,Sm)}var Gm=Km,Jm=Km,Zm=Km,Xm=Km;function Km(t){let e;if(t<16&&(e=ip(t)))return e;if(t>64&&wm)return wm.decode(Bm.subarray(km,km+=t));const n=km+t,i=[];for(e="";km<n;){const t=Bm[km++];if(0==(128&t))i.push(t);else if(192==(224&t)){const e=63&Bm[km++];i.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&Bm[km++],n=63&Bm[km++];i.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){let e=(7&t)<<18|(63&Bm[km++])<<12|(63&Bm[km++])<<6|63&Bm[km++];e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e)}else i.push(t);i.length>=4096&&(e+=ep.apply(String,i),i.length=0)}return i.length>0&&(e+=ep.apply(String,i)),e}function Qm(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Um();return e}function tp(t){if(Pm.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[ap()]=Um();return e}{let e=new Map;for(let n=0;n<t;n++)e.set(Um(),Um());return e}}var ep=String.fromCharCode;function np(t){let e=km,n=new Array(t);for(let i=0;i<t;i++){const t=Bm[km++];if((128&t)>0)return void(km=e);n[i]=t}return ep.apply(String,n)}function ip(t){if(t<4){if(t<2){if(0===t)return"";{let t=Bm[km++];return(128&t)>1?void(km-=1):ep(t)}}{let e=Bm[km++],n=Bm[km++];if((128&e)>0||(128&n)>0)return void(km-=2);if(t<3)return ep(e,n);let i=Bm[km++];return(128&i)>0?void(km-=3):ep(e,n,i)}}{let e=Bm[km++],n=Bm[km++],i=Bm[km++],r=Bm[km++];if((128&e)>0||(128&n)>0||(128&i)>0||(128&r)>0)return void(km-=4);if(t<6){if(4===t)return ep(e,n,i,r);{let t=Bm[km++];return(128&t)>0?void(km-=5):ep(e,n,i,r,t)}}if(t<8){let o=Bm[km++],s=Bm[km++];if((128&o)>0||(128&s)>0)return void(km-=6);if(t<7)return ep(e,n,i,r,o,s);let a=Bm[km++];return(128&a)>0?void(km-=7):ep(e,n,i,r,o,s,a)}{let o=Bm[km++],s=Bm[km++],a=Bm[km++],l=Bm[km++];if((128&o)>0||(128&s)>0||(128&a)>0||(128&l)>0)return void(km-=8);if(t<10){if(8===t)return ep(e,n,i,r,o,s,a,l);{let t=Bm[km++];return(128&t)>0?void(km-=9):ep(e,n,i,r,o,s,a,l,t)}}if(t<12){let c=Bm[km++],u=Bm[km++];if((128&c)>0||(128&u)>0)return void(km-=10);if(t<11)return ep(e,n,i,r,o,s,a,l,c,u);let h=Bm[km++];return(128&h)>0?void(km-=11):ep(e,n,i,r,o,s,a,l,c,u,h)}{let c=Bm[km++],u=Bm[km++],h=Bm[km++],m=Bm[km++];if((128&c)>0||(128&u)>0||(128&h)>0||(128&m)>0)return void(km-=12);if(t<14){if(12===t)return ep(e,n,i,r,o,s,a,l,c,u,h,m);{let t=Bm[km++];return(128&t)>0?void(km-=13):ep(e,n,i,r,o,s,a,l,c,u,h,m,t)}}{let p=Bm[km++],d=Bm[km++];if((128&p)>0||(128&d)>0)return void(km-=14);if(t<15)return ep(e,n,i,r,o,s,a,l,c,u,h,m,p,d);let f=Bm[km++];return(128&f)>0?void(km-=15):ep(e,n,i,r,o,s,a,l,c,u,h,m,p,d,f)}}}}}function rp(t){return Pm.copyBuffers?Uint8Array.prototype.slice.call(Bm,km,km+=t):Bm.subarray(km,km+=t)}function op(t){let e=Bm[km++];if(Fm[e])return Fm[e](Bm.subarray(km,km+=t));throw new Error("Unknown extension type "+e)}var sp=new Array(4096);function ap(){let t=Bm[km++];if(!(t>=160&&t<192))return km--,Um();if(t-=160,Im>=km)return Em.slice(km-zm,(km+=t)-zm);if(!(0==Im&&Cm<180))return Gm(t);let e,n=4095&(t<<5^(t>1?Tm.getUint16(km):t>0?Bm[km]:0)),i=sp[n],r=km,o=km+t-3,s=0;if(i&&i.bytes==t){for(;r<o;){if(e=Tm.getUint32(r),e!=i[s++]){r=1879048192;break}r+=4}for(o+=3;r<o;)if(e=Bm[r++],e!=i[s++]){r=1879048192;break}if(r===o)return km=r,i.string;o-=3,r=km}for(i=[],sp[n]=i,i.bytes=t;r<o;)e=Tm.getUint32(r),i.push(e),r+=4;for(o+=3;r<o;)e=Bm[r++],i.push(e);let a=t<16?ip(t):np(t);return i.string=null!=a?a:Gm(t)}const lp=(t,e)=>{var n=Um();let i=t;void 0!==e&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let r=Sm[t];return r&&r.isShared&&((Sm.restoreStructures||(Sm.restoreStructures=[]))[t]=r),Sm[t]=n,n.read=Wm(n,i),n.read()};var cp="object"==typeof self?self:global;Fm[0]=()=>{},Fm[0].noBuffer=!0,Fm[101]=()=>{let t=Um();return(cp[t[0]]||Error)(t[1])},Fm[105]=t=>{let e=Tm.getUint32(km-4);Mm||(Mm=new Map);let n,i=Bm[km];n=i>=144&&i<160||220==i||221==i?[]:{};let r={target:n};Mm.set(e,r);let o=Um();return r.used?Object.assign(n,o):(r.target=o,o)},Fm[112]=t=>{let e=Tm.getUint32(km-4),n=Mm.get(e);return n.used=!0,n.target},Fm[115]=()=>new Set(Um());const up=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((t=>t+"Array"));function hp(t){let e=Cm,n=km,i=zm,r=Im,o=Em,s=Mm,a=new Uint8Array(Bm.slice(0,Cm)),l=Sm,c=Sm.slice(0,Sm.length),u=Pm,h=Dm,m=t();return Cm=e,km=n,zm=i,Im=r,Em=o,Mm=s,Bm=a,Dm=h,(Sm=l).splice(0,Sm.length,...c),Pm=u,Tm=new DataView(Bm.buffer,Bm.byteOffset,Bm.byteLength),m}function mp(){Bm=null,Mm=null,Sm=null}Fm[116]=t=>{let e=t[0],n=up[e];if(!n)throw new Error("Could not find typed array for code "+e);return new cp[n](Uint8Array.prototype.slice.call(t,1).buffer)},Fm[120]=()=>{let t=Um();return new RegExp(t[0],t[1])},Fm[255]=t=>4==t.length?new Date(1e3*(16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3])):8==t.length?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+1e3*(4294967296*(3&t[3])+16777216*t[4]+(t[5]<<16)+(t[6]<<8)+t[7])):12==t.length?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+1e3*((128&t[4]?-281474976710656:0)+1099511627776*t[6]+4294967296*t[7]+16777216*t[8]+(t[9]<<16)+(t[10]<<8)+t[11])):new Date("invalid");const pp=new Array(147);for(let t=0;t<256;t++)pp[t]=+("1e"+Math.floor(45.15-.30103*t));var dp=new Om({useRecords:!1});t("u",dp.unpack),dp.unpackMultiple,dp.unpack;let fp,yp,_p,gp=new Float32Array(1);new Uint8Array(gp.buffer,0,4);try{fp=new TextEncoder}catch(zp){}const vp="undefined"!=typeof Buffer,bp=vp?Buffer.allocUnsafeSlow:Uint8Array,xp=vp?Buffer:Uint8Array,$p=vp?4294967296:2144337920;let Ap,wp,Bp,Cp=0;const Sp=Symbol("record-id");function Ep(t,e,n,i){let r=t.byteLength;if(r+1<256){var{target:o,position:s}=n(4+r);o[s++]=199,o[s++]=r+1}else if(r+1<65536){var{target:o,position:s}=n(5+r);o[s++]=200,o[s++]=r+1>>8,o[s++]=r+1&255}else{var{target:o,position:s,targetView:a}=n(7+r);o[s++]=201,a.setUint32(s,r+1),s+=4}o[s++]=116,o[s++]=e,o.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s)}function Mp(t,e){let n=t.byteLength;var i,r;if(n<256){var{target:i,position:r}=e(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=e(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=255&n}else{var{target:i,position:r,targetView:o}=e(n+5);i[r++]=198,o.setUint32(r,n),r+=4}i.set(t,r)}function Tp(t,e,n,i){let r=t.length;switch(r){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:r<256?(e[n++]=199,e[n++]=r):r<65536?(e[n++]=200,e[n++]=r>>8,e[n++]=255&r):(e[n++]=201,e[n++]=r>>24,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=255&r)}return e[n++]=i,e.set(t,n),n+=r}_p=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,jm],yp=[{pack(t,e,n){let i=t.getTime()/1e3;if((this.useTimestamp32||0===t.getMilliseconds())&&i>=0&&i<4294967296){let{target:t,targetView:n,position:r}=e(6);t[r++]=214,t[r++]=255,n.setUint32(r,i)}else if(i>0&&i<17179869184){let{target:n,targetView:r,position:o}=e(10);n[o++]=215,n[o++]=255,r.setUint32(o,4e6*t.getMilliseconds()+(i/1e3/4294967296>>0)),r.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return n(this.onInvalidDate());let{target:t,targetView:i,position:r}=e(3);t[r++]=212,t[r++]=255,t[r++]=255}else{let{target:n,targetView:r,position:o}=e(15);n[o++]=199,n[o++]=12,n[o++]=255,r.setUint32(o,1e6*t.getMilliseconds()),r.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(t,e,n){let i=Array.from(t),{target:r,position:o}=e(this.structuredClone?3:0);this.structuredClone&&(r[o++]=212,r[o++]=115,r[o++]=0),n(i)}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?Ep(t,16,e):Mp(vp?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==xp&&this.structuredClone?Ep(t,up.indexOf(n.name),e):Mp(t,e)}},{pack(t,e){let{target:n,position:i}=e(1);n[i]=193}}];let kp=new class extends Om{constructor(t){let e,n,i,r,o;super(t),this.offset=0;let s=0,a=xp.prototype.utf8Write?function(t,e,n){return Ap.utf8Write(t,e,n)}:!(!fp||!fp.encodeInto)&&function(t,e){return fp.encodeInto(t,Ap.subarray(e)).written},l=this;t||(t={});let c=t&&t.sequential,u=t.structures||t.saveStructures,h=t.maxSharedStructures;if(null==h&&(h=u?32:0),h>8160)throw new Error("Maximum maxSharedStructure is 8160");let m=t.maxOwnStructures;null==m&&(m=u?32:64),c&&!t.saveStructures&&(this.structures=[]);let p=h>32||m+h>64,d=h+64,f=h+m+64;if(f>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let y=[],_=0,g=0;this.pack=this.encode=function(t,a){if(Ap||(Ap=new bp(8192),wp=new DataView(Ap.buffer,0,8192),Cp=0),Bp=Ap.length-10,Bp-Cp<2048?(Ap=new bp(Ap.length),wp=new DataView(Ap.buffer,0,Ap.length),Bp=Ap.length-10,Cp=0):Cp=Cp+7&2147483640,e=Cp,o=l.structuredClone?new Map:null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let t=n.sharedLength||0;if(t>h)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let e=0;e<t;e++){let t=n[e];if(!t)continue;let i,r=n.transitions;for(let e=0,n=t.length;e<n;e++){let n=t[e];i=r[n],i||(i=r[n]=Object.create(null)),r=i}r[Sp]=e+64}s=t}c||(n.nextId=t+64)}i&&(i=!1),r=n||[];try{if(v(t),l.offset=Cp,o&&o.idsToInsert){Cp+=6*o.idsToInsert.length,Cp>Bp&&x(Cp),l.offset=Cp;let t=function(t,e){let n,i=6*e.length,r=t.length-i;for(e.sort(((t,e)=>t.offset>e.offset?1:-1));n=e.pop();){let e=n.offset,o=n.id;t.copyWithin(e+i,e,r),i-=6;let s=e+i;t[s++]=214,t[s++]=105,t[s++]=o>>24,t[s++]=o>>16&255,t[s++]=o>>8&255,t[s++]=255&o,r=e}return t}(Ap.subarray(e,Cp),o.idsToInsert);return o=null,t}return a===Pp?(Ap.start=e,Ap.end=Cp,Ap):Ap.subarray(e,Cp)}finally{if(n){if(g<10&&g++,_>1e4)n.transitions=null,g=0,_=0,y.length>0&&(y=[]);else if(y.length>0&&!c){for(let t=0,e=y.length;t<e;t++)y[t][Sp]=0;y=[]}if(i&&l.saveStructures){let i=n.sharedLength||h;n.length>i&&(n=n.slice(0,i));let r=Ap.subarray(e,Cp);return!1===l.saveStructures(n,s)?(l._mergeStructures(l.getStructures()),l.pack(t)):(s=i,r)}}}};const v=t=>{Cp>Bp&&(Ap=x(Cp));var n,i=typeof t;if("string"===i){let e,i=t.length;e=i<32?1:i<256?2:i<65536?3:5;let r=3*i;if(Cp+r>Bp&&(Ap=x(Cp+r)),i<64||!a){let r,o,s,a=Cp+e;for(r=0;r<i;r++)o=t.charCodeAt(r),o<128?Ap[a++]=o:o<2048?(Ap[a++]=o>>6|192,Ap[a++]=63&o|128):55296==(64512&o)&&56320==(64512&(s=t.charCodeAt(r+1)))?(o=65536+((1023&o)<<10)+(1023&s),r++,Ap[a++]=o>>18|240,Ap[a++]=o>>12&63|128,Ap[a++]=o>>6&63|128,Ap[a++]=63&o|128):(Ap[a++]=o>>12|224,Ap[a++]=o>>6&63|128,Ap[a++]=63&o|128);n=a-Cp-e}else n=a(t,Cp+e,r);n<32?Ap[Cp++]=160|n:n<256?(e<2&&Ap.copyWithin(Cp+2,Cp+1,Cp+1+n),Ap[Cp++]=217,Ap[Cp++]=n):n<65536?(e<3&&Ap.copyWithin(Cp+3,Cp+2,Cp+2+n),Ap[Cp++]=218,Ap[Cp++]=n>>8,Ap[Cp++]=255&n):(e<5&&Ap.copyWithin(Cp+5,Cp+3,Cp+3+n),Ap[Cp++]=219,wp.setUint32(Cp,n),Cp+=4),Cp+=n}else if("number"===i)if(t>>>0===t)t<64?Ap[Cp++]=t:t<256?(Ap[Cp++]=204,Ap[Cp++]=t):t<65536?(Ap[Cp++]=205,Ap[Cp++]=t>>8,Ap[Cp++]=255&t):(Ap[Cp++]=206,wp.setUint32(Cp,t),Cp+=4);else if(t>>0===t)t>=-32?Ap[Cp++]=256+t:t>=-128?(Ap[Cp++]=208,Ap[Cp++]=t+256):t>=-32768?(Ap[Cp++]=209,wp.setInt16(Cp,t),Cp+=2):(Ap[Cp++]=210,wp.setInt32(Cp,t),Cp+=4);else{let e;if((e=this.useFloat32)>0&&t<4294967296&&t>=-2147483648){let n;if(Ap[Cp++]=202,wp.setFloat32(Cp,t),e<4||(n=t*pp[(127&Ap[Cp])<<1|Ap[Cp+1]>>7])>>0===n)return void(Cp+=4);Cp--}Ap[Cp++]=203,wp.setFloat64(Cp,t),Cp+=8}else if("object"===i)if(t){if(o){let n=o.get(t);if(n){if(!n.id){let t=o.idsToInsert||(o.idsToInsert=[]);n.id=t.push(n)}return Ap[Cp++]=214,Ap[Cp++]=112,wp.setUint32(Cp,n.id),void(Cp+=4)}o.set(t,{offset:Cp-e})}let i=t.constructor;if(i===Object)b(t,!0);else if(i===Array){(n=t.length)<16?Ap[Cp++]=144|n:n<65536?(Ap[Cp++]=220,Ap[Cp++]=n>>8,Ap[Cp++]=255&n):(Ap[Cp++]=221,wp.setUint32(Cp,n),Cp+=4);for(let e=0;e<n;e++)v(t[e])}else if(i===Map){(n=t.size)<16?Ap[Cp++]=128|n:n<65536?(Ap[Cp++]=222,Ap[Cp++]=n>>8,Ap[Cp++]=255&n):(Ap[Cp++]=223,wp.setUint32(Cp,n),Cp+=4);for(let[e,n]of t)v(e),v(n)}else{for(let e=0,n=yp.length;e<n;e++)if(t instanceof _p[e]){let n=yp[e];if(n.write)return n.type&&(Ap[Cp++]=212,Ap[Cp++]=n.type,Ap[Cp++]=0),void v(n.write.call(this,t));let i,r=Ap,o=wp,s=Cp;Ap=null;try{i=n.pack.call(this,t,(t=>(Ap=r,r=null,Cp+=t,Cp>Bp&&x(Cp),{target:Ap,targetView:wp,position:Cp-t})),v)}finally{r&&(Ap=r,wp=o,Cp=s,Bp=Ap.length-10)}return void(i&&(i.length+Cp>Bp&&x(i.length+Cp),Cp=Tp(i,Ap,Cp,n.type)))}b(t,!t.hasOwnProperty)}}else Ap[Cp++]=192;else if("boolean"===i)Ap[Cp++]=t?195:194;else if("bigint"===i){if(t<BigInt(1)<<BigInt(63)&&t>=-(BigInt(1)<<BigInt(63)))Ap[Cp++]=211,wp.setBigInt64(Cp,t);else if(t<BigInt(1)<<BigInt(64)&&t>0)Ap[Cp++]=207,wp.setBigUint64(Cp,t);else{if(!this.largeBigIntToFloat)throw new RangeError(t+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Ap[Cp++]=203,wp.setFloat64(Cp,Number(t))}Cp+=8}else if("undefined"===i)this.encodeUndefinedAsNil?Ap[Cp++]=192:(Ap[Cp++]=212,Ap[Cp++]=0,Ap[Cp++]=0);else{if("function"!==i)throw new Error("Unknown type: "+i);v(this.writeFunction&&this.writeFunction())}},b=!1===this.useRecords?this.variableMapSize?t=>{let e,n=Object.keys(t),i=n.length;i<16?Ap[Cp++]=128|i:i<65536?(Ap[Cp++]=222,Ap[Cp++]=i>>8,Ap[Cp++]=255&i):(Ap[Cp++]=223,wp.setUint32(Cp,i),Cp+=4);for(let r=0;r<i;r++)v(e=n[r]),v(t[e])}:(t,n)=>{Ap[Cp++]=222;let i=Cp-e;Cp+=2;let r=0;for(let e in t)(n||t.hasOwnProperty(e))&&(v(e),v(t[e]),r++);Ap[i+++e]=r>>8,Ap[i+e]=255&r}:t=>{let e,n=Object.keys(t),o=r.transitions||(r.transitions=Object.create(null)),s=0;for(let i=0,r=n.length;i<r;i++){let t=n[i];e=o[t],e||(e=o[t]=Object.create(null),s++),o=e}let a=o[Sp];if(a)a>=96&&p?(Ap[Cp++]=96+(31&(a-=96)),Ap[Cp++]=a>>5):Ap[Cp++]=a;else{a=r.nextId,a||(a=64),a<d&&this.shouldShareStructure&&!this.shouldShareStructure(n)?(a=r.nextOwnId,a<f||(a=d),r.nextOwnId=a+1):(a>=f&&(a=d),r.nextId=a+1);let t=n.highByte=a>=96&&p?a-96>>5:-1;o[Sp]=a,r[a-64]=n,a<d?(n.isShared=!0,r.sharedLength=a-63,i=!0,t>=0?(Ap[Cp++]=96+(31&a),Ap[Cp++]=t):Ap[Cp++]=a):(t>=0?(Ap[Cp++]=213,Ap[Cp++]=114,Ap[Cp++]=96+(31&a),Ap[Cp++]=t):(Ap[Cp++]=212,Ap[Cp++]=114,Ap[Cp++]=a),s&&(_+=g*s),y.length>=m&&(y.shift()[Sp]=0),y.push(o),v(n))}for(let i=0,r=n.length;i<r;i++)v(t[n[i]])},x=t=>{let n;if(t>16777216){if(t-e>$p)throw new Error("Packed buffer would be larger than maximum buffer size");n=Math.min($p,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(t-e<<2,Ap.length-1)>>12)<<12;let i=new bp(n);return wp=new DataView(i.buffer,0,n),Ap.copy?Ap.copy(i,0,e,t):i.set(Ap.slice(e,t)),Cp-=e,e=0,Bp=i.length-10,Ap=i}}useBuffer(t){Ap=t,wp=new DataView(Ap.buffer,Ap.byteOffset,Ap.byteLength),Cp=0}}({useRecords:!1});t("p",kp.pack),kp.pack;const Pp=1e3}}}));
