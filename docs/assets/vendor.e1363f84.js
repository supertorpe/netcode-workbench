let t={version:"4.13.0",date:"2021-11-24 11:58",ajaxAlwaysCallbacks:[],autopositionSpacing:4,closeOnEscape:void document.addEventListener("keydown",(e=>{"Escape"!==e.key&&"Escape"!==e.code&&"Esc"!==e.key||t.getPanels((t=>t.classList.contains("jsPanel"))).some((t=>!!t.options.closeOnEscape&&("function"==typeof t.options.closeOnEscape?t.options.closeOnEscape.call(t,t):(t.close(null,!0),!0))))}),!1),defaults:{boxShadow:3,container:"window",contentSize:{width:"400px",height:"200px"},dragit:{cursor:"move",handles:".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",opacity:.8,disableOnMaximized:!0},header:!0,headerTitle:"jsPanel",headerControls:{size:"md"},iconfont:void 0,maximizedMargin:0,minimizeTo:"default",paneltype:"standard",position:{my:"center",at:"center"},resizeit:{handles:"n, e, s, w, ne, se, sw, nw",minWidth:128,minHeight:38},theme:"default"},defaultAutocloseConfig:{time:"8s",progressbar:!0},defaultSnapConfig:{sensitivity:70,trigger:"panel",active:"both"},extensions:{},globalCallbacks:!1,icons:{close:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M13.7,11l6.1-6.1c0.4-0.4,0.4-0.9,0-1.3l-1.4-1.4c-0.4-0.4-0.9-0.4-1.3,0L11,8.3L4.9,2.3C4.6,1.9,4,1.9,3.7,2.3L2.3,3.7 C1.9,4,1.9,4.6,2.3,4.9L8.3,11l-6.1,6.1c-0.4,0.4-0.4,0.9,0,1.3l1.4,1.4c0.4,0.4,0.9,0.4,1.3,0l6.1-6.1l6.1,6.1 c0.4,0.4,0.9,0.4,1.3,0l1.4-1.4c0.4-0.4,0.4-0.9,0-1.3L13.7,11z"/></svg>',maximize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H3.7C2.8,2,2,2.9,2,3.9v14.1C2,19.1,2.8,20,3.7,20h14.6c0.9,0,1.7-0.9,1.7-1.9V3.9C20,2.9,19.2,2,18.3,2z M18.3,17.8 c0,0.1-0.1,0.2-0.2,0.2H3.9c-0.1,0-0.2-0.1-0.2-0.2V8.4h14.6V17.8z"/></svg>',normalize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H7.1C6.1,2,5.4,2.8,5.4,3.7v1.7H3.7C2.8,5.4,2,6.1,2,7.1v11.3C2,19.2,2.8,20,3.7,20h11.3c0.9,0,1.7-0.8,1.7-1.7v-1.7 h1.7c0.9,0,1.7-0.8,1.7-1.7V3.7C20,2.8,19.2,2,18.3,2z M14.9,18.3H3.7V11h11.3V18.3z M18.3,14.9h-1.7V7.1c0-0.9-0.8-1.7-1.7-1.7H7.1 V3.7h11.3V14.9z"/></svg>',minimize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.9,19.8H3.1c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h15.8c0.6,0,1.1,0.5,1.1,1.1S19.5,19.8,18.9,19.8z"/></svg>',smallify:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M2.1,15.2L2.9,16c0.2,0.2,0.5,0.2,0.7,0L11,8.7l7.4,7.3c0.2,0.2,0.5,0.2,0.7,0l0.8-0.8c0.2-0.2,0.2-0.5,0-0.7L11.3,6 c-0.2-0.2-0.5-0.2-0.7,0l-8.5,8.5C2,14.7,2,15,2.1,15.2z"/></svg>'},idCounter:0,isIE:navigator.appVersion.match(/Trident/),pointerdown:"onpointerdown"in window?["pointerdown"]:"ontouchend"in window?["touchstart","mousedown"]:["mousedown"],pointermove:"onpointermove"in window?["pointermove"]:"ontouchend"in window?["touchmove","mousemove"]:["mousemove"],pointerup:"onpointerup"in window?["pointerup"]:"ontouchend"in window?["touchend","mouseup"]:["mouseup"],polyfills:(Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==t)throw new TypeError("Cannot convert first argument to object");let e=Object(t);for(let n=1;n<arguments.length;n++){let t=arguments[n];if(null==t)continue;t=Object(t);let i=Object.keys(Object(t));for(let n=0,r=i.length;n<r;n++){let r=i[n],o=Object.getOwnPropertyDescriptor(t,r);void 0!==o&&o.enumerable&&(e[r]=t[r])}}return e}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(let n=0;n<this.length;n++)t.call(e,this[n],n,this)}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){t.append=t.append||function(){let t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){let n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))})),this.appendChild(e)}})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let e,n=(this.document||this.ownerDocument).querySelectorAll(t),i=this;do{for(e=n.length;--e>=0&&n.item(e)!==i;);}while(e<0&&(i=i.parentElement));return i}),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};let n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return e<this.length?e|=0:e=this.length,this.substr(e-t.length,t.length)===t}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},void(Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');let n=Object(this),i=n.length>>>0;if(0===i)return!1;let r=0|e,o=Math.max(r>=0?r:i-Math.abs(r),0);for(;o<i;){if((s=n[o])===(a=t)||"number"==typeof s&&"number"==typeof a&&isNaN(s)&&isNaN(a))return!0;o++}var s,a;return!1}}))),themes:["default","primary","secondary","info","success","warning","danger","light","dark"],ziBase:100,colorFilledLight:.81,colorFilledDark:.08,colorFilled:0,colorBrightnessThreshold:.55,colorNames:{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32",grey50:"fafafa",grey100:"f5f5f5",grey200:"eee",grey300:"e0e0e0",grey400:"bdbdbd",grey500:"9e9e9e",grey600:"757575",grey700:"616161",grey800:"424242",grey900:"212121",gray50:"fafafa",gray100:"f5f5f5",gray200:"eee",gray300:"e0e0e0",gray400:"bdbdbd",gray500:"9e9e9e",gray600:"757575",gray700:"616161",gray800:"424242",gray900:"212121",bluegrey50:"eceff1",bluegrey100:"CFD8DC",bluegrey200:"B0BEC5",bluegrey300:"90A4AE",bluegrey400:"78909C",bluegrey500:"607D8B",bluegrey600:"546E7A",bluegrey700:"455A64",bluegrey800:"37474F",bluegrey900:"263238",bluegray50:"eceff1",bluegray100:"CFD8DC",bluegray200:"B0BEC5",bluegray300:"90A4AE",bluegray400:"78909C",bluegray500:"607D8B",bluegray600:"546E7A",bluegray700:"455A64",bluegray800:"37474F",bluegray900:"263238",red50:"FFEBEE",red100:"FFCDD2",red200:"EF9A9A",red300:"E57373",red400:"EF5350",red500:"F44336",red600:"E53935",red700:"D32F2F",red800:"C62828",red900:"B71C1C",reda100:"FF8A80",reda200:"FF5252",reda400:"FF1744",reda700:"D50000",pink50:"FCE4EC",pink100:"F8BBD0",pink200:"F48FB1",pink300:"F06292",pink400:"EC407A",pink500:"E91E63",pink600:"D81B60",pink700:"C2185B",pink800:"AD1457",pink900:"880E4F",pinka100:"FF80AB",pinka200:"FF4081",pinka400:"F50057",pinka700:"C51162",purple50:"F3E5F5",purple100:"E1BEE7",purple200:"CE93D8",purple300:"BA68C8",purple400:"AB47BC",purple500:"9C27B0",purple600:"8E24AA",purple700:"7B1FA2",purple800:"6A1B9A",purple900:"4A148C",purplea100:"EA80FC",purplea200:"E040FB",purplea400:"D500F9",purplea700:"AA00FF",deeppurple50:"EDE7F6",deeppurple100:"D1C4E9",deeppurple200:"B39DDB",deeppurple300:"9575CD",deeppurple400:"7E57C2",deeppurple500:"673AB7",deeppurple600:"5E35B1",deeppurple700:"512DA8",deeppurple800:"4527A0",deeppurple900:"311B92",deeppurplea100:"B388FF",deeppurplea200:"7C4DFF",deeppurplea400:"651FFF",deeppurplea700:"6200EA",indigo50:"E8EAF6",indigo100:"C5CAE9",indigo200:"9FA8DA",indigo300:"7986CB",indigo400:"5C6BC0",indigo500:"3F51B5",indigo600:"3949AB",indigo700:"303F9F",indigo800:"283593",indigo900:"1A237E",indigoa100:"8C9EFF",indigoa200:"536DFE",indigoa400:"3D5AFE",indigoa700:"304FFE",blue50:"E3F2FD",blue100:"BBDEFB",blue200:"90CAF9",blue300:"64B5F6",blue400:"42A5F5",blue500:"2196F3",blue600:"1E88E5",blue700:"1976D2",blue800:"1565C0",blue900:"0D47A1",bluea100:"82B1FF",bluea200:"448AFF",bluea400:"2979FF",bluea700:"2962FF",lightblue50:"E1F5FE",lightblue100:"B3E5FC",lightblue200:"81D4FA",lightblue300:"4FC3F7",lightblue400:"29B6F6",lightblue500:"03A9F4",lightblue600:"039BE5",lightblue700:"0288D1",lightblue800:"0277BD",lightblue900:"01579B",lightbluea100:"80D8FF",lightbluea200:"40C4FF",lightbluea400:"00B0FF",lightbluea700:"0091EA",cyan50:"E0F7FA",cyan100:"B2EBF2",cyan200:"80DEEA",cyan300:"4DD0E1",cyan400:"26C6DA",cyan500:"00BCD4",cyan600:"00ACC1",cyan700:"0097A7",cyan800:"00838F",cyan900:"006064",cyana100:"84FFFF",cyana200:"18FFFF",cyana400:"00E5FF",cyana700:"00B8D4",teal50:"E0F2F1",teal100:"B2DFDB",teal200:"80CBC4",teal300:"4DB6AC",teal400:"26A69A",teal500:"009688",teal600:"00897B",teal700:"00796B",teal800:"00695C",teal900:"004D40",teala100:"A7FFEB",teala200:"64FFDA",teala400:"1DE9B6",teala700:"00BFA5",green50:"E8F5E9",green100:"C8E6C9",green200:"A5D6A7",green300:"81C784",green400:"66BB6A",green500:"4CAF50",green600:"43A047",green700:"388E3C",green800:"2E7D32",green900:"1B5E20",greena100:"B9F6CA",greena200:"69F0AE",greena400:"00E676",greena700:"00C853",lightgreen50:"F1F8E9",lightgreen100:"DCEDC8",lightgreen200:"C5E1A5",lightgreen300:"AED581",lightgreen400:"9CCC65",lightgreen500:"8BC34A",lightgreen600:"7CB342",lightgreen700:"689F38",lightgreen800:"558B2F",lightgreen900:"33691E",lightgreena100:"CCFF90",lightgreena200:"B2FF59",lightgreena400:"76FF03",lightgreena700:"64DD17",lime50:"F9FBE7",lime100:"F0F4C3",lime200:"E6EE9C",lime300:"DCE775",lime400:"D4E157",lime500:"CDDC39",lime600:"C0CA33",lime700:"AFB42B",lime800:"9E9D24",lime900:"827717",limea100:"F4FF81",limea200:"EEFF41",limea400:"C6FF00",limea700:"AEEA00",yellow50:"FFFDE7",yellow100:"FFF9C4",yellow200:"FFF59D",yellow300:"FFF176",yellow400:"FFEE58",yellow500:"FFEB3B",yellow600:"FDD835",yellow700:"FBC02D",yellow800:"F9A825",yellow900:"F57F17",yellowa100:"FFFF8D",yellowa200:"FFFF00",yellowa400:"FFEA00",yellowa700:"FFD600",amber50:"FFF8E1",amber100:"FFECB3",amber200:"FFE082",amber300:"FFD54F",amber400:"FFCA28",amber500:"FFC107",amber600:"FFB300",amber700:"FFA000",amber800:"FF8F00",amber900:"FF6F00",ambera100:"FFE57F",ambera200:"FFD740",ambera400:"FFC400",ambera700:"FFAB00",orange50:"FFF3E0",orange100:"FFE0B2",orange200:"FFCC80",orange300:"FFB74D",orange400:"FFA726",orange500:"FF9800",orange600:"FB8C00",orange700:"F57C00",orange800:"EF6C00",orange900:"E65100",orangea100:"FFD180",orangea200:"FFAB40",orangea400:"FF9100",orangea700:"FF6D00",deeporange50:"FBE9E7",deeporange100:"FFCCBC",deeporange200:"FFAB91",deeporange300:"FF8A65",deeporange400:"FF7043",deeporange500:"FF5722",deeporange600:"F4511E",deeporange700:"E64A19",deeporange800:"D84315",deeporange900:"BF360C",deeporangea100:"FF9E80",deeporangea200:"FF6E40",deeporangea400:"FF3D00",deeporangea700:"DD2C00",brown50:"EFEBE9",brown100:"D7CCC8",brown200:"BCAAA4",brown300:"A1887F",brown400:"8D6E63",brown500:"795548",brown600:"6D4C41",brown700:"5D4037",brown800:"4E342E",brown900:"3E2723"},errorReporting:1,modifier:!1,helper:(document.addEventListener("keydown",(e=>{t.modifier=e})),void document.addEventListener("keyup",(()=>{t.modifier=!1}))),usePointerEvents(t=!0){t?(this.pointerdown="onpointerdown"in window?["pointerdown"]:"ontouchend"in window?["touchstart","mousedown"]:["mousedown"],this.pointermove="onpointermove"in window?["pointermove"]:"ontouchend"in window?["touchmove","mousemove"]:["mousemove"],this.pointerup="onpointerup"in window?["pointerup"]:"ontouchend"in window?["touchend","mouseup"]:["mouseup"]):(this.pointerdown="ontouchend"in window?["touchstart","mousedown"]:["mousedown"],this.pointermove="ontouchend"in window?["touchmove","mousemove"]:["mousemove"],this.pointerup="ontouchend"in window?["touchend","mouseup"]:["mouseup"])},color(t){let e,n,i,r,o,s,a,l,c,u=t.toLowerCase(),h={};const m=/^rgba?\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3}),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,p=/^hsla?\(([0-9]{1,3}),([0-9]{1,3}%),([0-9]{1,3}%),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,d=this.colorNames;return d[u]&&(u=d[u]),null!==u.match(/^#?([0-9a-f]{3}|[0-9a-f]{6})$/gi)?((u=u.replace("#","")).length%2==1?(e=String(u.substr(0,1))+u.substr(0,1),n=String(u.substr(1,1))+u.substr(1,1),i=String(u.substr(2,1))+u.substr(2,1),h.rgb={r:parseInt(e,16),g:parseInt(n,16),b:parseInt(i,16)},h.hex=`#${e}${n}${i}`):(h.rgb={r:parseInt(u.substr(0,2),16),g:parseInt(u.substr(2,2),16),b:parseInt(u.substr(4,2),16)},h.hex=`#${u}`),c=this.rgbToHsl(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl=c,h.rgb.css=`rgb(${h.rgb.r},${h.rgb.g},${h.rgb.b})`):u.match(m)?(a=m.exec(u),h.rgb={css:u,r:a[1],g:a[2],b:a[3]},h.hex=this.rgbToHex(a[1],a[2],a[3]),c=this.rgbToHsl(a[1],a[2],a[3]),h.hsl=c):u.match(p)?(r=(a=p.exec(u))[1]/360,o=a[2].substr(0,a[2].length-1)/100,s=a[3].substr(0,a[3].length-1)/100,l=this.hslToRgb(r,o,s),h.rgb={css:`rgb(${l[0]},${l[1]},${l[2]})`,r:l[0],g:l[1],b:l[2]},h.hex=this.rgbToHex(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl={css:`hsl(${a[1]},${a[2]},${a[3]})`,h:a[1],s:a[2],l:a[3]}):(h.hex="#f5f5f5",h.rgb={css:"rgb(245,245,245)",r:245,g:245,b:245},h.hsl={css:"hsl(0,0%,96%)",h:0,s:"0%",l:"96%"}),h},calcColors(t){const e=this.colorBrightnessThreshold,n=this.color(t),i=this.lighten(t,this.colorFilledLight),r=this.darken(t,this.colorFilled),o=this.perceivedBrightness(t)<=e?"#ffffff":"#000000",s=this.perceivedBrightness(i)<=e?"#ffffff":"#000000",a=this.perceivedBrightness(r)<=e?"#ffffff":"#000000",l=this.lighten(t,this.colorFilledDark),c=this.perceivedBrightness(l)<=e?"#ffffff":"#000000";return[n.hsl.css,i,r,o,s,a,l,c]},darken(t,e){const n=this.color(t).hsl,i=parseFloat(n.l),r=Math.round(i-i*e)+"%";return`hsl(${n.h},${n.s},${r})`},lighten(t,e){const n=this.color(t).hsl,i=parseFloat(n.l),r=Math.round(i+(100-i)*e)+"%";return`hsl(${n.h},${n.s},${r})`},hslToRgb(t,e,n){let i,r,o;if(0===e)i=r=o=n;else{let s=(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=s(l,a,t+1/3),r=s(l,a,t),o=s(l,a,t-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*o)]},rgbToHsl(t,e,n){t/=255,e/=255,n/=255;let i,r,o=Math.max(t,e,n),s=Math.min(t,e,n),a=(o+s)/2;if(o===s)i=r=0;else{let l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{css:"hsl("+(i=Math.round(360*i))+","+(r=Math.round(100*r)+"%")+","+(a=Math.round(100*a)+"%")+")",h:i,s:r,l:a}},rgbToHex(t,e,n){let i=Number(t).toString(16),r=Number(e).toString(16),o=Number(n).toString(16);return 1===i.length&&(i=`0${i}`),1===r.length&&(r=`0${r}`),1===o.length&&(o=`0${o}`),`#${i}${r}${o}`},perceivedBrightness(t){const e=this.color(t).rgb;return e.r/255*.2126+e.g/255*.7152+e.b/255*.0722},pOposition(t){let e={},n=t.trim().split(/\s+/),i=n.filter((t=>t.match(/^(down|right|up|left)$/i)));i.length&&(e.autoposition=i[0],n.splice(n.indexOf(i[0]),1));let r=n.filter((t=>t.match(/^(left-|right-)(top|center|bottom)$|(^center-)(top|bottom)$|(^center$)/i)));r.length?(e.my=r[0],e.at=r[1]||r[0],n.splice(n.indexOf(r[0]),1),r[1]&&n.splice(n.indexOf(r[1]),1)):(e.my="center",e.at="center");let o=n.filter((t=>t.match(/^[+-]?\d*\.?\d+[a-z%]*$/i)));return o.length&&(e.offsetX=o[0].match(/^[+-]?\d*\.?\d+$/i)?`${o[0]}px`:o[0],o[1]?e.offsetY=o[1].match(/^[+-]?\d*\.?\d+$/i)?`${o[1]}px`:o[1]:e.offsetY=e.offsetX,n.splice(n.indexOf(o[0]),1),o[1]&&n.splice(n.indexOf(o[1]),1)),n.length&&(e.of=n.join(" ")),e},position(t,e){if(!e)return t.style.opacity=1,t;e="string"==typeof e?Object.assign({},this.defaults.position,this.pOposition(e)):Object.assign({},this.defaults.position,e),["my","at","of"].forEach((n=>{"function"==typeof e[n]&&(e[n]=e[n].call(t,t))})),"window"===t.options.container&&(t.style.position="fixed"),"string"==typeof t?t=document.querySelector(t):Object.getPrototypeOf(t).jquery&&(t=t[0]);const n="window"===t.options.container?"window":t.parentElement,i=t.getBoundingClientRect(),r=t.parentElement.getBoundingClientRect(),o="window"===n?{left:0,top:0,width:document.documentElement.clientWidth,height:window.innerHeight}:{width:r.width,height:r.height,left:r.left,top:r.top},s="window"===n?{x:1,y:1}:{x:o.width/n.offsetWidth,y:o.height/n.offsetHeight},a="window"===n?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:window.getComputedStyle(n);let l;o.width-=(parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth))*s.x,o.height-=(parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth))*s.y,l=e.of?"string"==typeof e.of?"window"===e.of?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:document.querySelector(e.of).getBoundingClientRect():Object.getPrototypeOf(e.of).jquery?e.of[0].getBoundingClientRect():e.of.getBoundingClientRect():o;let c=this.getScrollbarWidth(document.body),u=this.getScrollbarWidth(t.parentElement),h="0px";e.my.startsWith("left-")?e.at.startsWith("left-")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+"px":"0px":e.at.startsWith("center")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+l.width/2+"px":o.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+l.width+"px":o.width+"px"):e.my.startsWith("center")?e.at.startsWith("left-")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-i.width/2+"px":-i.width/2+"px":e.at.startsWith("center")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-(i.width-l.width)/2+"px":o.width/2-i.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+(l.width-i.width/2)+"px":o.width-i.width/2+"px"):e.my.startsWith("right-")&&(e.at.startsWith("left-")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-i.width+"px":-i.width+"px":e.at.startsWith("center")?h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)-i.width+l.width/2+"px":o.width/2-i.width+"px":e.at.startsWith("right-")&&(h=e.of?l.left-o.left-parseFloat(a.borderLeftWidth)+l.width-i.width+"px":o.width-i.width+"px","window"!==n&&(h=parseFloat(h)-u.y+"px")));let m="0px";e.my.endsWith("-top")?e.at.endsWith("-top")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)+"px":"0px":e.at.endsWith("center")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)+l.height/2+"px":o.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)+l.height+"px":o.height+"px"):e.my.endsWith("center")?e.at.endsWith("-top")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height/2+"px":-i.height/2+"px":e.at.endsWith("center")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height/2+l.height/2+"px":o.height/2-i.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height/2+l.height+"px":o.height-i.height/2+"px"):e.my.endsWith("-bottom")&&(e.at.endsWith("-top")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height+"px":-i.height+"px":e.at.endsWith("center")?m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height+l.height/2+"px":o.height/2-i.height+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-o.top-parseFloat(a.borderTopWidth)-i.height+l.height+"px":o.height-i.height+"px",m="window"!==n?parseFloat(m)-u.x+"px":parseFloat(m)-c.x+"px")),t.style.left=1===s.x?h:parseFloat(h)/s.x+"px",t.style.top=1===s.y?m:parseFloat(m)/s.y+"px";let p=getComputedStyle(t),d={left:p.left,top:p.top};return e.autoposition&&e.my===e.at&&["left-top","center-top","right-top","left-bottom","center-bottom","right-bottom"].indexOf(e.my)>=0&&(d=this.applyPositionAutopos(t,d,e)),(e.offsetX||e.offsetY)&&(d=this.applyPositionOffset(t,d,e)),(e.minLeft||e.minTop||e.maxLeft||e.maxTop)&&(d=this.applyPositionMinMax(t,d,e)),e.modify&&(d=this.applyPositionModify(t,d,e)),"number"==typeof t.options.opacity?t.style.opacity=t.options.opacity:t.style.opacity=1,t},applyPositionAutopos(e,n,i){const r=`${i.my}-${i.autoposition.toLowerCase()}`;e.classList.add(r);const o=Array.prototype.slice.call(document.querySelectorAll(`.${r}`)),s=o.indexOf(e);if(o.length>1){switch(i.autoposition){case"down":o.forEach(((e,i)=>{i>0&&i<=s&&(n.top=parseFloat(n.top)+o[--i].getBoundingClientRect().height+t.autopositionSpacing+"px")}));break;case"up":o.forEach(((e,i)=>{i>0&&i<=s&&(n.top=parseFloat(n.top)-o[--i].getBoundingClientRect().height-t.autopositionSpacing+"px")}));break;case"right":o.forEach(((e,i)=>{i>0&&i<=s&&(n.left=parseFloat(n.left)+o[--i].getBoundingClientRect().width+t.autopositionSpacing+"px")}));break;case"left":o.forEach(((e,i)=>{i>0&&i<=s&&(n.left=parseFloat(n.left)-o[--i].getBoundingClientRect().width-t.autopositionSpacing+"px")}))}e.style.left=n.left,e.style.top=n.top}return{left:n.left,top:n.top}},applyPositionOffset(t,e,n){["offsetX","offsetY"].forEach((t=>{n[t]?("function"==typeof n[t]&&(n[t]=n[t].call(e,e,n)),!1===isNaN(n[t])&&(n[t]=`${n[t]}px`)):n[t]="0px"})),t.style.left=`calc(${t.style.left} + ${n.offsetX})`,t.style.top=`calc(${t.style.top} + ${n.offsetY})`;const i=getComputedStyle(t);return{left:i.left,top:i.top}},applyPositionMinMax(t,e,n){if(["minLeft","minTop","maxLeft","maxTop"].forEach((t=>{n[t]&&("function"==typeof n[t]&&(n[t]=n[t].call(e,e,n)),(Number.isInteger(n[t])||n[t].match(/^\d+$/))&&(n[t]=`${n[t]}px`))})),n.minLeft){t.style.left=n.minLeft;let i=getComputedStyle(t).left;parseFloat(i)<parseFloat(e.left)?t.style.left=e.left:e.left=i}if(n.minTop){t.style.top=n.minTop;let i=getComputedStyle(t).top;parseFloat(i)<parseFloat(e.top)?t.style.top=e.top:e.top=i}if(n.maxLeft){t.style.left=n.maxLeft;let i=getComputedStyle(t).left;parseFloat(i)>parseFloat(e.left)?t.style.left=e.left:e.left=i}if(n.maxTop){t.style.top=n.maxTop;let i=getComputedStyle(t).top;parseFloat(i)>parseFloat(e.top)?t.style.top=e.top:e.top=i}const i=getComputedStyle(t);return{left:i.left,top:i.top}},applyPositionModify(t,e,n){if(n.modify&&"function"==typeof n.modify){const i=n.modify.call(e,e,n);t.style.left=Number.isInteger(i.left)||i.left.match(/^\d+$/)?`${i.left}px`:i.left,t.style.top=Number.isInteger(i.top)||i.top.match(/^\d+$/)?`${i.top}px`:i.top}const i=getComputedStyle(t);return{left:i.left,top:i.top}},autopositionRemaining(t){let e,n=t.options.container;["left-top-down","left-top-right","center-top-down","right-top-down","right-top-left","left-bottom-up","left-bottom-right","center-bottom-up","right-bottom-up","right-bottom-left"].forEach((n=>{t.classList.contains(n)&&(e=n)})),e&&("window"===n?document.body:"string"==typeof n?document.querySelector(n):n).querySelectorAll(`.${e}`).forEach((t=>{t.reposition()}))},addScript(t,e="application/javascript",n){if(!document.querySelector(`script[src="${t}"]`)){const i=document.createElement("script");n&&(i.onload=n),i.src=t,i.type=e,document.head.appendChild(i)}},ajax(e,n){let i,r,o=new XMLHttpRequest;const s={method:"GET",async:!0,user:"",pwd:"",done:function(){if(n){let e=t.strToHtml(this.responseText);i.urlSelector&&(e=e.querySelector(i.urlSelector)),n.contentRemove(),n.content.append(e)}},autoresize:!0,autoreposition:!0};if(n&&"string"==typeof e)i=Object.assign({},s,{url:e});else{if("object"!=typeof e||!e.url){if(this.errorReporting){let e="XMLHttpRequest seems to miss the <mark>url</mark> parameter!";t.errorpanel(e)}return}(i=Object.assign({},s,e)).url=e.url,!1===i.async&&(i.timeout=0,i.withCredentials&&(i.withCredentials=void 0),i.responseType&&(i.responseType=void 0))}r=i.url.trim().split(/\s+/),i.url=encodeURI(r[0]),r.length>1&&(r.shift(),i.urlSelector=r.join(" ")),o.onreadystatechange=()=>{4===o.readyState&&(200===o.status?n?i.done.call(o,o,n):i.done.call(o,o):i.fail&&(n?i.fail.call(o,o,n):i.fail.call(o,o)),i.always&&(n?i.always.call(o,o,n):i.always.call(o,o)),n&&(i.autoresize||i.autoreposition)&&t.ajaxAutoresizeAutoreposition(n,i),t.ajaxAlwaysCallbacks.length&&t.ajaxAlwaysCallbacks.forEach((t=>{n?t.call(o,o,n):t.call(o,o)})))},o.open(i.method,i.url,i.async,i.user,i.pwd),o.timeout=i.timeout||0,i.withCredentials&&(o.withCredentials=i.withCredentials),i.responseType&&(o.responseType=i.responseType),i.beforeSend&&(n?i.beforeSend.call(o,o,n):i.beforeSend.call(o,o)),i.data?o.send(i.data):o.send(null)},ajaxAutoresizeAutoreposition(t,e){const n=t.options.contentSize;if("string"==typeof n&&n.match(/auto/i)){const i=n.split(" "),r=Object.assign({},{width:i[0],height:i[1]});e.autoresize&&t.resize(r),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}else if("object"==typeof n&&("auto"===n.width||"auto"===n.height)){const i=Object.assign({},n);e.autoresize&&t.resize(i),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}},createPanelTemplate(t=!0){const e=document.createElement("div");return e.className="jsPanel",e.style.left="0",e.style.top="0",t&&["close","maximize","normalize","minimize","smallify"].forEach((t=>{e.setAttribute(`data-btn${t}`,"enabled")})),e.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-smallify"  aria-label="Smallify">${this.icons.smallify}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-minimize"  aria-label="Minimize">${this.icons.minimize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                                <div class="jsPanel-hdr-toolbar"></div>\n                            </div>\n                            <div class="jsPanel-progressbar">\n                                <div class="jsPanel-progressbar-slider"></div>\n                            </div>\n                            <div class="jsPanel-content"></div>\n                            <div class="jsPanel-minimized-box"></div>\n                            <div class="jsPanel-ftr"></div>`,e},createMinimizedTemplate(){const t=document.createElement("div");return t.className="jsPanel-replacement",t.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                            </div>`,t},createSnapArea(t,e,n){const i=document.createElement("div"),r=t.parentElement;i.className=`jsPanel-snap-area jsPanel-snap-area-${e}`,"lt"===e||"rt"===e||"rb"===e||"lb"===e?(i.style.width=n+"px",i.style.height=n+"px"):"ct"===e||"cb"===e?i.style.height=n+"px":"lc"!==e&&"rc"!==e||(i.style.width=n+"px"),r!==document.body&&(i.style.position="absolute"),document.querySelector(`.jsPanel-snap-area.jsPanel-snap-area-${e}`)||t.parentElement.appendChild(i)},emptyNode(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},extend(t){if("[object Object]"===Object.prototype.toString.call(t))for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this.extensions[e]=t[e])},fetch(e,n){let i;const r={bodyMethod:"text",autoresize:!0,autoreposition:!0,done:function(e,n){if(n){let i=t.strToHtml(e);n.contentRemove(),n.content.append(i)}}};if(n&&"string"==typeof e)i=Object.assign({},r,{resource:encodeURI(e)});else{if("object"!=typeof e||!e.resource){if(this.errorReporting){let e="Fetch Request seems to miss the <mark>resource</mark> parameter!";t.errorpanel(e)}return}(i=Object.assign({},r,e)).resource=encodeURI(e.resource)}const o=i.fetchInit||{};i.beforeSend&&(n?i.beforeSend.call(e,e,n):i.beforeSend.call(e,e)),fetch(i.resource,o).then((t=>{if(t.ok)return t[i.bodyMethod]()})).then((e=>{n?i.done.call(e,e,n):i.done.call(e,e),n&&(i.autoresize||i.autoreposition)&&t.ajaxAutoresizeAutoreposition(n,i)}))},getPanels:(t=function(){return this.classList.contains("jsPanel-standard")})=>Array.prototype.slice.call(document.querySelectorAll(".jsPanel")).filter((e=>t.call(e,e))).sort(((t,e)=>e.style.zIndex-t.style.zIndex)),pOcontainer(t){if("window"===t)return document.body;if("string"==typeof t){let e=document.querySelectorAll(t);return!!(e.length&&e.length>0)&&e}return 1===t.nodeType?t:!!t.length&&t[0]},pOcontainment(t){let e=t;if("function"==typeof t&&(e=t()),"number"==typeof e)return[e,e,e,e];if(Array.isArray(e)){if(1===e.length)return[e[0],e[0],e[0],e[0]];if(2===e.length)return e.concat(e);3===e.length&&(e[3]=e[1])}return e},pOsize(t,e){let n=e||this.defaults.contentSize;const i=t.parentElement;if("string"==typeof n){const t=n.trim().split(" ");(n={}).width=t[0],2===t.length?n.height=t[1]:n.height=t[0]}else n.width&&!n.height?n.height=n.width:n.height&&!n.width&&(n.width=n.height);if(String(n.width).match(/^[0-9.]+$/gi))n.width+="px";else if("string"==typeof n.width&&n.width.endsWith("%"))if(i===document.body)n.width=window.innerWidth*(parseFloat(n.width)/100)+"px";else{const t=window.getComputedStyle(i),e=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);n.width=(parseFloat(t.width)-e)*(parseFloat(n.width)/100)+"px"}else"function"==typeof n.width&&(n.width=n.width.call(t,t),("number"==typeof n.width||"string"==typeof n.width&&n.width.match(/^[0-9.]+$/gi))&&(n.width+="px"));if(String(n.height).match(/^[0-9.]+$/gi))n.height+="px";else if("string"==typeof n.height&&n.height.endsWith("%"))if(i===document.body)n.height=window.innerHeight*(parseFloat(n.height)/100)+"px";else{const t=window.getComputedStyle(i),e=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);n.height=(parseFloat(t.height)-e)*(parseFloat(n.height)/100)+"px"}else"function"==typeof n.height&&(n.height=n.height.call(t,t),("number"==typeof n.height||"string"==typeof n.height&&n.height.match(/^[0-9.]+$/gi))&&(n.height+="px"));return n},pOborder(t){t=t.trim();const e=new Array(3),n=t.match(/\s*(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s*/gi),i=t.match(/\s*(thin|medium|thick)|(\d*\.?\d+[a-zA-Z]{2,4})\s*/gi);return n?(e[1]=n[0].trim(),t=t.replace(e[1],"")):e[1]="solid",i?(e[0]=i[0].trim(),t=t.replace(e[0],"")):e[0]="medium",e[2]=t.trim(),e},pOheaderControls(t){if("string"==typeof t){let e={},n=t.toLowerCase(),i=n.match(/xl|lg|md|sm|xs/),r=n.match(/closeonly|none/);return i&&(e.size=i[0]),r&&(e=Object.assign({},e,{maximize:"remove",normalize:"remove",minimize:"remove",smallify:"remove"}),"none"===r[0]&&(e.close="remove")),Object.assign({},this.defaults.headerControls,e)}return Object.assign({},this.defaults.headerControls,t)},processCallbacks(t,e,n="some",i,r){if("function"==typeof e&&(e=[e]),n)return e[n]((e=>e.call(t,t,i,r)));e.forEach((e=>{e.call(t,t,i,r)}))},removeSnapAreas(){document.querySelectorAll(".jsPanel-snap-area").forEach((t=>{t.parentElement.removeChild(t)}))},resetZi(){this.zi=((e=t.ziBase)=>{let n=e;return{next:()=>n++}})(),Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).sort(((t,e)=>t.style.zIndex-e.style.zIndex)).forEach((e=>{e.style.zIndex=t.zi.next()}))},getScrollbarWidth(t=document.body){if(t===document.body)return{y:window.innerWidth-document.documentElement.clientWidth,x:window.innerHeight-document.documentElement.clientHeight};{let e=getComputedStyle(t);return{y:t.offsetWidth-t.clientWidth-parseFloat(e.borderRightWidth)-parseFloat(e.borderLeftWidth),x:t.offsetHeight-t.clientHeight-parseFloat(e.borderBottomWidth)-parseFloat(e.borderTopWidth)}}},remClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.remove(e))),t),setClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.add(e))),t),setStyles(t,e){for(let n in e)n in t.style?t.style[n]=e[n]:t.style.setProperty(n,e[n]);return t},setStyle(t,e){return this.setStyles.call(t,t,e)},strToHtml:t=>document.createRange().createContextualFragment(t),toggleClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)})),t),errorpanel(t){this.create({paneltype:"error",dragit:!1,resizeit:!1,theme:{bgPanel:"white",bgContent:"white",colorHeader:"rebeccapurple",colorContent:"#333",border:"2px solid rebeccapurple"},borderRadius:".33rem",headerControls:"closeonly xs",headerTitle:"&#9888; jsPanel Error",contentSize:{width:"50%",height:"auto"},position:"center-top 0 5 down",animateIn:"jsPanelFadeIn",content:`<div class="jsPanel-error-content-separator"></div><p>${t}</p>`})},create(e={},n){t.zi||(t.zi=((e=t.ziBase)=>{let n=e;return{next:()=>n++}})()),e.config?delete(e=Object.assign({},this.defaults,e.config,e)).config:e=Object.assign({},this.defaults,e),e.id?"function"==typeof e.id&&(e.id=e.id()):e.id=`jsPanel-${t.idCounter+=1}`;const i=document.getElementById(e.id);if(null!==i){if(i.classList.contains("jsPanel")&&i.front(),this.errorReporting){let n=`&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>An element with the ID <mark>${e.id}</mark> already exists in the document.`;t.errorpanel(n)}return!1}let r=this.pOcontainer(e.container);if("object"==typeof r&&r.length&&r.length>0&&(r=r[0]),!r){if(this.errorReporting){let e="&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>The container to append the panel to does not exist";t.errorpanel(e)}return!1}["onbeforeclose","onbeforemaximize","onbeforeminimize","onbeforenormalize","onbeforesmallify","onbeforeunsmallify","onclosed","onfronted","onmaximized","onminimized","onnormalized","onsmallified","onstatuschange","onunsmallified"].forEach((t=>{e[t]?"function"==typeof e[t]&&(e[t]=[e[t]]):e[t]=[]}));const o=e.template?e.template:this.createPanelTemplate();o.options=e,o.closetimer=void 0,o.status="initialized",o.currentData={},o.header=o.querySelector(".jsPanel-hdr"),o.headerbar=o.header.querySelector(".jsPanel-headerbar"),o.titlebar=o.header.querySelector(".jsPanel-titlebar"),o.headerlogo=o.headerbar.querySelector(".jsPanel-headerlogo"),o.headertitle=o.headerbar.querySelector(".jsPanel-title"),o.controlbar=o.headerbar.querySelector(".jsPanel-controlbar"),o.headertoolbar=o.header.querySelector(".jsPanel-hdr-toolbar"),o.content=o.querySelector(".jsPanel-content"),o.footer=o.querySelector(".jsPanel-ftr"),o.snappableTo=!1,o.snapped=!1,o.droppableTo=!1,o.progressbar=o.autocloseProgressbar=o.querySelector(".jsPanel-progressbar");const s=new CustomEvent("jspanelloaded",{detail:e.id,cancelable:!0}),a=new CustomEvent("jspanelstatuschange",{detail:e.id,cancelable:!0}),l=new CustomEvent("jspanelbeforenormalize",{detail:e.id,cancelable:!0}),c=new CustomEvent("jspanelnormalized",{detail:e.id,cancelable:!0}),u=new CustomEvent("jspanelbeforemaximize",{detail:e.id,cancelable:!0}),h=new CustomEvent("jspanelmaximized",{detail:e.id,cancelable:!0}),m=new CustomEvent("jspanelbeforeminimize",{detail:e.id,cancelable:!0}),p=new CustomEvent("jspanelminimized",{detail:e.id,cancelable:!0}),d=new CustomEvent("jspanelbeforesmallify",{detail:e.id,cancelable:!0}),f=new CustomEvent("jspanelsmallified",{detail:e.id,cancelable:!0}),y=new CustomEvent("jspanelsmallifiedmax",{detail:e.id,cancelable:!0}),_=new CustomEvent("jspanelbeforeunsmallify",{detail:e.id,cancelable:!0}),g=new CustomEvent("jspanelfronted",{detail:e.id,cancelable:!0}),v=new CustomEvent("jspanelbeforeclose",{detail:e.id,cancelable:!0}),b=new CustomEvent("jspanelclosed",{detail:e.id,cancelable:!0}),x=new CustomEvent("jspanelcloseduser",{detail:e.id,cancelable:!0});[s,a,l,c,u,h,m,p,d,f,y,_,g,v].forEach((t=>{t.panel=o}));const $=o.querySelector(".jsPanel-btn-close"),A=o.querySelector(".jsPanel-btn-maximize"),w=o.querySelector(".jsPanel-btn-normalize"),B=o.querySelector(".jsPanel-btn-smallify"),C=o.querySelector(".jsPanel-btn-minimize");$&&t.pointerup.forEach((t=>{$.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})),A&&t.pointerup.forEach((t=>{A.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.maximize()}))})),w&&t.pointerup.forEach((t=>{w.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.normalize()}))})),B&&t.pointerup.forEach((t=>{B.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;"normalized"===o.status||"maximized"===o.status?o.smallify():"smallified"!==o.status&&"smallifiedmax"!==o.status||o.unsmallify()}))})),C&&t.pointerup.forEach((t=>{C.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.minimize()}))}));let S=t.extensions;for(let t in S)Object.prototype.hasOwnProperty.call(S,t)&&(o[t]=S[t]);if(o.clearTheme=e=>(t.themes.forEach((t=>{["panel",`jsPanel-theme-${t}`,`panel-${t}`,`${t}-color`].forEach((t=>{o.classList.remove(t)})),o.header.classList.remove(`jsPanel-theme-${t}`)})),o.content.classList.remove("jsPanel-content-filled","jsPanel-content-filledlight"),o.header.classList.remove("jsPanel-hdr-light"),o.header.classList.remove("jsPanel-hdr-dark"),o.style.backgroundColor="",t.setStyle(o.headertoolbar,{boxShadow:"",width:"",marginLeft:"",borderTopColor:"transparent"}),t.setStyle(o.content,{background:"",borderTopColor:"transparent"}),o.header.style.background="",Array.prototype.slice.call(o.controlbar.querySelectorAll(".jsPanel-icon")).concat([o.headerlogo,o.headertitle,o.headertoolbar,o.content]).forEach((t=>{t.style.color=""})),e&&e.call(o,o),o),o.getThemeDetails=e=>{const n=e.toLowerCase(),i={color:!1,colors:!1,filling:!1},r=n.split("fill");if(i.color=r[0].trim().replace(/\s*/g,""),2===r.length)if(r[1].startsWith("edlight"))i.filling="filledlight";else if(r[1].startsWith("eddark"))i.filling="filleddark";else if(r[1].startsWith("ed"))i.filling="filled";else if(r[1].startsWith("color")){let e=r[1].split("color"),n=e[e.length-1].trim().replace(/\s*/g,"");t.colorNames[n]&&(n=t.colorNames[n]),n.match(/^([0-9a-f]{3}|[0-9a-f]{6})$/gi)&&(n="#"+n),i.filling=n}if(t.themes.some((t=>t===i.color.split(/\s/i)[0]))){let t=i.color.split(/\s/i)[0],e=document.createElement("button");e.className=t+"-bg",document.body.appendChild(e),i.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(i.color.startsWith("bootstrap-")){let t=i.color.indexOf("-"),e=document.createElement("button");e.className="btn btn"+i.color.slice(t),document.body.appendChild(e),i.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(i.color.startsWith("mdb-")){let t,e=i.color.indexOf("-")+1,n=document.createElement("span");t=i.color.endsWith("-dark")?(t=i.color.slice(e)).replace("-dark","-color-dark"):i.color.slice(e)+"-color",n.className=t,document.body.appendChild(n),i.color=getComputedStyle(n).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(n),n=void 0}return i.colors=t.calcColors(i.color),i},o.applyColorTheme=e=>{if(o.style.backgroundColor=e.colors[0],o.header.style.backgroundColor=e.colors[0],o.header.style.color=e.colors[3],[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((t=>{o.querySelector(t).style.color=e.colors[3]})),o.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{t.style.color=e.colors[3]})),"string"==typeof o.options.theme&&"filled"===e.filling&&(o.content.style.borderTop="#000000"===e.colors[3]?"1px solid rgba(0,0,0,0.15)":"1px solid rgba(255,255,255,0.15)"),"#000000"===e.colors[3]?o.header.classList.add("jsPanel-hdr-light"):o.header.classList.add("jsPanel-hdr-dark"),e.filling)switch(e.filling){case"filled":t.setStyle(o.content,{backgroundColor:e.colors[2],color:e.colors[3]});break;case"filledlight":o.content.style.backgroundColor=e.colors[1];break;case"filleddark":t.setStyle(o.content,{backgroundColor:e.colors[6],color:e.colors[7]});break;default:o.content.style.backgroundColor=e.filling,o.content.style.color=t.perceivedBrightness(e.filling)<=t.colorBrightnessThreshold?"#fff":"#000"}return o},o.applyCustomTheme=e=>{let n,i={bgPanel:"#fff",bgContent:"#fff",colorHeader:"#000",colorContent:"#000"},r=(n="object"==typeof e?Object.assign(i,e):i).bgPanel,s=n.bgContent,a=n.colorHeader,l=n.colorContent;if(t.colorNames[r]?o.style.background="#"+t.colorNames[r]:o.style.background=r,t.colorNames[a]&&(a="#"+t.colorNames[a]),[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((t=>{o.querySelector(t).style.color=a})),o.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{t.style.color=a})),t.colorNames[s]?o.content.style.background="#"+t.colorNames[s]:o.content.style.background=s,t.colorNames[l]?o.content.style.color="#"+t.colorNames[l]:o.content.style.color=l,t.perceivedBrightness(a)>t.colorBrightnessThreshold?o.header.classList.add("jsPanel-hdr-dark"):o.header.classList.add("jsPanel-hdr-light"),t.perceivedBrightness(l)>t.colorBrightnessThreshold?o.content.style.borderTop="1px solid rgba(255,255,255,0.15)":o.content.style.borderTop="1px solid rgba(0,0,0,0.15)",n.border){let e=n.border,i=e.lastIndexOf(" "),r=e.slice(++i);t.colorNames[r]&&(e=e.replace(r,"#"+t.colorNames[r])),o.style.border=e}return o},o.setBorder=e=>{let n=t.pOborder(e);return n[2].length?t.colorNames[n[2]]&&(n[2]="#"+t.colorNames[n[2]]):n[2]=o.style.backgroundColor,n=n.join(" "),o.style.border=n,o.options.border=n,o},o.setBorderRadius=t=>{"number"==typeof t&&(t+="px"),o.style.borderRadius=t;const e=getComputedStyle(o);return o.options.header?(o.header.style.borderTopLeftRadius=e.borderTopLeftRadius,o.header.style.borderTopRightRadius=e.borderTopRightRadius):(o.content.style.borderTopLeftRadius=e.borderTopLeftRadius,o.content.style.borderTopRightRadius=e.borderTopRightRadius),o.options.footerToolbar?(o.footer.style.borderBottomRightRadius=e.borderBottomRightRadius,o.footer.style.borderBottomLeftRadius=e.borderBottomLeftRadius):(o.content.style.borderBottomRightRadius=e.borderBottomRightRadius,o.content.style.borderBottomLeftRadius=e.borderBottomLeftRadius),o},o.setTheme=(t=e.theme,n)=>{let i;if("minimized"===o.status&&(i=!0,o.normalize()),o.clearTheme(),"object"==typeof t)e.border=void 0,o.applyCustomTheme(t);else{"none"===t&&(t="white");let e=o.getThemeDetails(t);o.applyColorTheme(e)}return i&&o.minimize(),n&&n.call(o,o),o},o.remove=(e,n,i)=>{o.parentElement.removeChild(o),document.getElementById(e)?i&&i.call(o,e,o):(o.removeMinimizedReplacement(),o.status="closed",n&&document.dispatchEvent(x),document.dispatchEvent(b),o.options.onclosed&&t.processCallbacks(o,o.options.onclosed,"every",n),t.autopositionRemaining(o),i&&i.call(e,e)),window.removeEventListener("resize",o.windowResizeHandler),document.removeEventListener("jspanelresize",o.parentResizeHandler)},o.close=(e,n)=>{if(o.closetimer&&window.clearInterval(o.closetimer),document.dispatchEvent(v),o.statusBefore=o.status,o.options.onbeforeclose&&o.options.onbeforeclose.length>0&&!t.processCallbacks(o,o.options.onbeforeclose,"some",o.status,n))return o;o.options.animateOut?(o.options.animateIn&&t.remClass(o,o.options.animateIn),t.setClass(o,o.options.animateOut),o.addEventListener("animationend",(t=>{t.stopPropagation(),o.remove(o.id,n,e)}))):o.remove(o.id,n,e)},o.maximize=(n,i)=>{if(o.statusBefore=o.status,e.onbeforemaximize&&e.onbeforemaximize.length>0&&!t.processCallbacks(o,e.onbeforemaximize,"some",o.statusBefore))return o;document.dispatchEvent(u);const r=o.parentElement,s=t.pOcontainment(e.maximizedMargin);return r===document.body?(o.style.width=document.documentElement.clientWidth-s[1]-s[3]+"px",o.style.height=document.documentElement.clientHeight-s[0]-s[2]+"px",o.style.left=s[3]+"px",o.style.top=s[0]+"px"):(o.style.width=r.clientWidth-s[1]-s[3]+"px",o.style.height=r.clientHeight-s[0]-s[2]+"px",o.style.left=s[3]+"px",o.style.top=s[0]+"px"),B.style.transform="unset",o.removeMinimizedReplacement(),o.status="maximized",o.setControls([".jsPanel-btn-maximize"]),i||o.front(),document.dispatchEvent(h),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every",o.statusBefore),n&&n.call(o,o,o.statusBefore),e.onmaximized&&t.processCallbacks(o,e.onmaximized,"every",o.statusBefore),o},o.minimize=n=>{if("minimized"===o.status)return o;if(o.statusBefore=o.status,e.onbeforeminimize&&e.onbeforeminimize.length>0&&!t.processCallbacks(o,e.onbeforeminimize,"some",o.statusBefore))return o;if(document.dispatchEvent(m),!document.getElementById("jsPanel-replacement-container")){const t=document.createElement("div");t.id="jsPanel-replacement-container",document.body.append(t)}if(o.style.left="-9999px",o.status="minimized",document.dispatchEvent(p),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every",o.statusBefore),e.minimizeTo){let t,n,i,r=o.createMinimizedReplacement();switch(e.minimizeTo){case"default":document.getElementById("jsPanel-replacement-container").append(r);break;case"parentpanel":(t=(i=(n=o.closest(".jsPanel-content").parentElement).querySelectorAll(".jsPanel-minimized-box"))[i.length-1]).append(r);break;case"parent":(t=(n=o.parentElement).querySelector(".jsPanel-minimized-container"))||((t=document.createElement("div")).className="jsPanel-minimized-container",n.append(t)),t.append(r);break;default:document.querySelector(e.minimizeTo).append(r)}}return n&&n.call(o,o,o.statusBefore),e.onminimized&&t.processCallbacks(o,e.onminimized,"every",o.statusBefore),o},o.normalize=n=>("normalized"===o.status||(o.statusBefore=o.status,e.onbeforenormalize&&e.onbeforenormalize.length>0&&!t.processCallbacks(o,e.onbeforenormalize,"some",o.statusBefore)||(document.dispatchEvent(l),o.style.width=o.currentData.width,o.style.height=o.currentData.height,o.snapped?o.snap(o.snapped,!0):(o.style.left=o.currentData.left,o.style.top=o.currentData.top),B.style.transform="unset",o.removeMinimizedReplacement(),o.status="normalized",o.setControls([".jsPanel-btn-normalize"]),o.front(),document.dispatchEvent(c),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every",o.statusBefore),n&&n.call(o,o,o.statusBefore),e.onnormalized&&t.processCallbacks(o,e.onnormalized,"every",o.statusBefore))),o),o.smallify=n=>{if("smallified"===o.status||"smallifiedmax"===o.status)return o;if(o.statusBefore=o.status,e.onbeforesmallify&&e.onbeforesmallify.length>0&&!t.processCallbacks(o,e.onbeforesmallify,"some",o.statusBefore))return o;document.dispatchEvent(d),o.style.overflow="hidden";const i=window.getComputedStyle(o),r=parseFloat(window.getComputedStyle(o.headerbar).height);o.style.height=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+r+"px",B.style.transform="rotate(180deg)","normalized"===o.status?(o.setControls([".jsPanel-btn-normalize"]),o.status="smallified",document.dispatchEvent(f),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every",o.statusBefore)):"maximized"===o.status&&(o.setControls([".jsPanel-btn-maximize"]),o.status="smallifiedmax",document.dispatchEvent(y),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every",o.statusBefore));const s=o.querySelectorAll(".jsPanel-minimized-box");return s[s.length-1].style.display="none",n&&n.call(o,o,o.statusBefore),e.onsmallified&&t.processCallbacks(o,e.onsmallified,"every",o.statusBefore),o},o.unsmallify=n=>{if(o.statusBefore=o.status,"smallified"===o.status||"smallifiedmax"===o.status){if(e.onbeforeunsmallify&&e.onbeforeunsmallify.length>0&&!t.processCallbacks(o,e.onbeforeunsmallify,"some",o.statusBefore))return o;document.dispatchEvent(_),o.style.overflow="visible",o.front(),"smallified"===o.status?(o.style.height=o.currentData.height,o.setControls([".jsPanel-btn-normalize"]),o.status="normalized",document.dispatchEvent(c),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every",o.statusBefore)):"smallifiedmax"===o.status?o.maximize():"minimized"===o.status&&o.normalize(),B.style.transform="rotate(0deg)";const i=o.querySelectorAll(".jsPanel-minimized-box");i[i.length-1].style.display="flex",n&&n.call(o,o,o.statusBefore),e.onunsmallified&&t.processCallbacks(o,e.onunsmallified,"every",o.statusBefore)}return o},o.front=(n,i=!0)=>{if("minimized"===o.status)"maximized"===o.statusBefore?o.maximize():o.normalize();else{const e=Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).map((t=>t.style.zIndex));Math.max(...e)>o.style.zIndex&&(o.style.zIndex=t.zi.next()),t.resetZi()}return document.dispatchEvent(g),n&&n.call(o,o),e.onfronted&&i&&t.processCallbacks(o,e.onfronted,"every",o.status),o},o.snap=(e,n=!1)=>{if(n||(o.currentData.beforeSnap={width:o.currentData.width,height:o.currentData.height}),e&&"function"==typeof e&&!n)e.call(o,o,o.snappableTo);else if(!1!==e){let e=[0,0];if(o.options.dragit.snap.containment&&o.options.dragit.containment){const n=t.pOcontainment(o.options.dragit.containment),i=o.snappableTo;i.startsWith("left")?e[0]=n[3]:i.startsWith("right")&&(e[0]=-n[1]),i.endsWith("top")?e[1]=n[0]:i.endsWith("bottom")&&(e[1]=-n[2])}o.reposition(`${o.snappableTo} ${e[0]} ${e[1]}`)}n||(o.snapped=o.snappableTo)},o.move=(t,e)=>{let n=o.overlaps(t,"paddingbox"),i=o.parentElement;return t.appendChild(o),o.options.container=t,o.style.left=n.left+"px",o.style.top=n.top+"px",o.saveCurrentDimensions(),o.saveCurrentPosition(),o.calcSizeFactors(),e&&e.call(o,o,t,i),o},o.closeChildpanels=t=>(o.getChildpanels().forEach((t=>t.close())),t&&t.call(o,o),o),o.getChildpanels=t=>{const e=o.content.querySelectorAll(".jsPanel");return t&&e.forEach(((e,n,i)=>{t.call(e,e,n,i)})),e},o.isChildpanel=t=>{const e=o.closest(".jsPanel-content"),n=e?e.parentElement:null;return t&&t.call(o,o,n),!!e&&n},o.contentRemove=e=>(t.emptyNode(o.content),e&&e.call(o,o),o),o.createMinimizedReplacement=()=>{const n=t.createMinimizedTemplate(),i=window.getComputedStyle(o.headertitle).color,r=window.getComputedStyle(o),s=e.iconfont,a=n.querySelector(".jsPanel-controlbar");return"auto-show-hide"!==o.options.header?t.setStyle(n,{backgroundColor:r.backgroundColor,backgroundPositionX:r.backgroundPositionX,backgroundPositionY:r.backgroundPositionY,backgroundRepeat:r.backgroundRepeat,backgroundAttachment:r.backgroundAttachment,backgroundImage:r.backgroundImage,backgroundSize:r.backgroundSize,backgroundOrigin:r.backgroundOrigin,backgroundClip:r.backgroundClip}):n.style.backgroundColor=window.getComputedStyle(o.header).backgroundColor,n.id=o.id+"-min",n.querySelector(".jsPanel-headerbar").replaceChild(o.headerlogo.cloneNode(!0),n.querySelector(".jsPanel-headerlogo")),n.querySelector(".jsPanel-titlebar").replaceChild(o.headertitle.cloneNode(!0),n.querySelector(".jsPanel-title")),n.querySelector(".jsPanel-titlebar").setAttribute("title",o.headertitle.textContent),n.querySelector(".jsPanel-title").style.color=i,a.style.color=i,a.querySelectorAll("button").forEach((t=>{t.style.color=i})),["jsPanel-hdr-dark","jsPanel-hdr-light"].forEach((t=>{o.header.classList.contains(t)&&n.querySelector(".jsPanel-hdr").classList.add(t)})),o.setIconfont(s,n),"enabled"===o.dataset.btnnormalize?t.pointerup.forEach((t=>{n.querySelector(".jsPanel-btn-normalize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.normalize()}))})):a.querySelector(".jsPanel-btn-normalize").style.display="none","enabled"===o.dataset.btnmaximize?t.pointerup.forEach((t=>{n.querySelector(".jsPanel-btn-maximize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.maximize()}))})):a.querySelector(".jsPanel-btn-maximize").style.display="none","enabled"===o.dataset.btnclose?t.pointerup.forEach((t=>{n.querySelector(".jsPanel-btn-close").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})):a.querySelector(".jsPanel-btn-close").style.display="none",n},o.removeMinimizedReplacement=()=>{const t=document.getElementById(`${o.id}-min`);t&&t.parentElement.removeChild(t)},o.drag=(e={})=>{let n,i,r;const s=new CustomEvent("jspaneldragstart",{detail:o.id}),a=new CustomEvent("jspaneldrag",{detail:o.id}),l=new CustomEvent("jspaneldragstop",{detail:o.id});[s,a,l].forEach((t=>{t.panel=o}));const c=t=>{let e=t.split("-");return e.forEach(((t,n)=>{e[n]=t.charAt(0).toUpperCase()+t.slice(1)})),"snap"+e.join("")};function u(e){null===e.relatedTarget&&t.pointermove.forEach((t=>{document.removeEventListener(t,i,!1),o.style.opacity=1}))}let h=e.handles||t.defaults.dragit.handles,m=e.cursor||t.defaults.dragit.cursor;function p(e){if(t.pointermove.forEach((t=>{document.removeEventListener(t,i)})),t.removeSnapAreas(),n){if(o.style.opacity=1,n=void 0,r.snap){switch(o.snappableTo){case"left-top":o.snap(r.snap.snapLeftTop);break;case"center-top":o.snap(r.snap.snapCenterTop);break;case"right-top":o.snap(r.snap.snapRightTop);break;case"right-center":o.snap(r.snap.snapRightCenter);break;case"right-bottom":o.snap(r.snap.snapRightBottom);break;case"center-bottom":o.snap(r.snap.snapCenterBottom);break;case"left-bottom":o.snap(r.snap.snapLeftBottom);break;case"left-center":o.snap(r.snap.snapLeftCenter)}r.snap.callback&&o.snappableTo&&"function"==typeof r.snap.callback&&(r.snap.callback.call(o,o),r.snap.repositionOnSnap&&!1!==r.snap[c(o.snappableTo)]&&o.repositionOnSnap(o.snappableTo)),o.snappableTo&&r.snap.repositionOnSnap&&r.snap[c(o.snappableTo)]&&o.repositionOnSnap(o.snappableTo)}if(o.droppableTo&&o.droppableTo){let t=o.parentElement;o.move(o.droppableTo),r.drop.callback&&r.drop.callback.call(o,o,o.droppableTo,t)}if(document.dispatchEvent(l),r.stop.length){let n=window.getComputedStyle(o),i={left:parseFloat(n.left),top:parseFloat(n.top),width:parseFloat(n.width),height:parseFloat(n.height)};t.processCallbacks(o,r.stop,!1,i,e)}o.saveCurrentPosition(),o.calcSizeFactors()}o.controlbar.style.pointerEvents="inherit",o.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),document.removeEventListener(e,p)}return o.querySelectorAll(h).forEach((l=>{l.style.touchAction="none",l.style.cursor=m,t.pointerdown.forEach((c=>{l.addEventListener(c,(l=>{if(l.button&&l.button>0)return!1;if((r=Object.assign({},t.defaults.dragit,e)).disableOnMaximized&&"maximized"===o.status)return!1;if((r.containment||0===r.containment)&&(r.containment=t.pOcontainment(r.containment)),r.grid&&Array.isArray(r.grid)&&1===r.grid.length&&(r.grid[1]=r.grid[0]),r.snap&&("object"==typeof r.snap?r.snap=Object.assign({},t.defaultSnapConfig,r.snap):r.snap=t.defaultSnapConfig),l.target.closest(".jsPanel-ftr-btn"))return;o.controlbar.style.pointerEvents="none",o.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));let c=window.getComputedStyle(o),h=parseFloat(c.left),m=parseFloat(c.top),p=parseFloat(c.width),d=parseFloat(c.height),f=l.touches?l.touches[0].clientX:l.clientX,y=l.touches?l.touches[0].clientY:l.clientY,_=o.parentElement,g=_.getBoundingClientRect(),v=window.getComputedStyle(_),b=o.getScaleFactor(),x=0,$=t.getScrollbarWidth(_);i=e=>{if(e.preventDefault(),!n){if(document.dispatchEvent(s),o.style.opacity=r.opacity,o.snapped&&r.snap.resizeToPreSnap&&o.currentData.beforeSnap){o.resize(o.currentData.beforeSnap.width+" "+o.currentData.beforeSnap.height),o.setControls([".jsPanel-btn-normalize"]);let t=o.getBoundingClientRect(),e=f-(t.left+t.width),n=t.width/2;e>-n&&(x=e+n)}if(o.front(),o.snapped=!1,"maximized"===o.status&&(o.setControls([".jsPanel-btn-normalize"]),o.status="normalized"),r.drop&&r.drop.dropZones){let e=r.drop.dropZones.map((e=>t.pOcontainer(e))),n=[];e.forEach((function(t){t.length?t.forEach((function(t){n.push(t)})):n.push(t)})),n=n.filter((function(t,e,n){return n.indexOf(t)===e})),r.drop.dropZones=n}r.start.length&&t.processCallbacks(o,r.start,!1,{left:h,top:m,width:p,height:d},e)}let i,l,c,u,A,w,B,C,S,E;n=1;let M,T=e.touches?e.touches[0].clientX:e.clientX,k=e.touches?e.touches[0].clientY:e.clientY,P=window.getComputedStyle(o);if(_===document.body){let t=o.getBoundingClientRect();S=window.innerWidth-parseInt(v.borderLeftWidth,10)-parseInt(v.borderRightWidth,10)-(t.left+t.width),E=window.innerHeight-parseInt(v.borderTopWidth,10)-parseInt(v.borderBottomWidth,10)-(t.top+t.height)}else S=parseInt(v.width,10)-parseInt(v.borderLeftWidth,10)-parseInt(v.borderRightWidth,10)-(parseInt(P.left,10)+parseInt(P.width,10)),E=parseInt(v.height,10)-parseInt(v.borderTopWidth,10)-parseInt(v.borderBottomWidth,10)-(parseInt(P.top,10)+parseInt(P.height,10));i=parseFloat(P.left),c=parseFloat(P.top),A=S,B=E,r.snap&&("panel"===r.snap.trigger?(l=i**2,u=c**2,w=A**2,C=B**2):"pointer"===r.snap.trigger&&("window"===o.options.container?(i=T,l=T**2,u=(c=k)**2,w=(A=window.innerWidth-T)**2,C=(B=window.innerHeight-k)**2):(i=(M=o.overlaps(_,"paddingbox",e)).pointer.left,c=M.pointer.top,A=M.pointer.right,B=M.pointer.bottom,l=M.pointer.left**2,u=M.pointer.top**2,w=M.pointer.right**2,C=M.pointer.bottom**2)));let z=Math.sqrt(l+u),I=Math.sqrt(l+C),F=Math.sqrt(w+u),V=Math.sqrt(w+C),j=Math.abs(i-A)/2,L=Math.abs(c-B)/2,D=Math.sqrt(l+L**2),O=Math.sqrt(u+j**2),R=Math.sqrt(w+L**2),q=Math.sqrt(C+j**2);if(window.getSelection().removeAllRanges(),document.dispatchEvent(a),r.axis&&"x"!==r.axis||(o.style.left=h+(T-f)/b.x+x+"px"),r.axis&&"y"!==r.axis||(o.style.top=m+(k-y)/b.y+"px"),r.grid){let t=r.grid,e=r.axis,n=t[0]*Math.round((h+(T-f))/t[0]),i=t[1]*Math.round((m+(k-y))/t[1]);e&&"x"!==e||(o.style.left=`${n}px`),e&&"y"!==e||(o.style.top=`${i}px`)}if(r.containment||0===r.containment){let t,e,n=r.containment;if("window"===o.options.container)t=window.innerWidth-parseFloat(P.width)-n[1]-$.y,e=window.innerHeight-parseFloat(P.height)-n[2]-$.x;else{let i=parseFloat(v.borderLeftWidth)+parseFloat(v.borderRightWidth),r=parseFloat(v.borderTopWidth)+parseFloat(v.borderBottomWidth);t=g.width/b.x-parseFloat(P.width)-n[1]-i-$.y,e=g.height/b.y-parseFloat(P.height)-n[2]-r-$.x}parseFloat(o.style.left)<=n[3]&&(o.style.left=n[3]+"px"),parseFloat(o.style.top)<=n[0]&&(o.style.top=n[0]+"px"),parseFloat(o.style.left)>=t&&(o.style.left=t+"px"),parseFloat(o.style.top)>=e&&(o.style.top=e+"px")}if(r.drag.length){let n={left:i,top:c,right:A,bottom:B,width:parseFloat(P.width),height:parseFloat(P.height)};t.processCallbacks(o,r.drag,!1,n,e)}if(r.snap){let e=r.snap.sensitivity,n=_===document.body?window.innerWidth/8:g.width/8,s=_===document.body?window.innerHeight/8:g.height/8;o.snappableTo=!1,t.removeSnapAreas(),z<e?!1!==r.snap.snapLeftTop&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.left>0&&M.pointer.top>0?(o.snappableTo="left-top",t.createSnapArea(o,"lt",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="left-top",t.createSnapArea(o,"lt",e))):I<e?!1!==r.snap.snapLeftBottom&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.left>0&&M.pointer.bottom>0?(o.snappableTo="left-bottom",t.createSnapArea(o,"lb",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="left-bottom",t.createSnapArea(o,"lb",e))):F<e?!1!==r.snap.snapRightTop&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.right>0&&M.pointer.top>0?(o.snappableTo="right-top",t.createSnapArea(o,"rt",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="right-top",t.createSnapArea(o,"rt",e))):V<e?!1!==r.snap.snapRightBottom&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.right>0&&M.pointer.bottom>0?(o.snappableTo="right-bottom",t.createSnapArea(o,"rb",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="right-bottom",t.createSnapArea(o,"rb",e))):c<e&&O<n?!1!==r.snap.snapCenterTop&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.top>0?(o.snappableTo="center-top",t.createSnapArea(o,"ct",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="center-top",t.createSnapArea(o,"ct",e))):i<e&&D<s?!1!==r.snap.snapLeftCenter&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.left>0?(o.snappableTo="left-center",t.createSnapArea(o,"lc",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="left-center",t.createSnapArea(o,"lc",e))):A<e&&R<s?!1!==r.snap.snapRightCenter&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.right>0?(o.snappableTo="right-center",t.createSnapArea(o,"rc",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="right-center",t.createSnapArea(o,"rc",e))):B<e&&q<n&&!1!==r.snap.snapCenterBottom&&(r.snap.active&&"both"!==r.snap.active?"pointer"===r.snap.trigger&&r.snap.active&&"inside"===r.snap.active&&(M.pointer.bottom>0?(o.snappableTo="center-bottom",t.createSnapArea(o,"cb",e)):(o.snappableTo=!1,t.removeSnapAreas())):(o.snappableTo="center-bottom",t.createSnapArea(o,"cb",e)))}if(r.drop&&r.drop.dropZones){let n=t.isIE?"msElementsFromPoint":"elementsFromPoint",i=document[n](e.clientX,e.clientY);Array.isArray(i)||(i=Array.prototype.slice.call(i)),r.drop.dropZones.forEach((t=>{i.includes(t)&&(o.droppableTo=t)})),i.includes(o.droppableTo)||(o.droppableTo=!1)}},t.pointermove.forEach((t=>{document.addEventListener(t,i)})),window.addEventListener("mouseout",u,!1)}))})),t.pointerup.forEach((t=>{document.addEventListener(t,p),window.removeEventListener("mouseout",u)})),e.disable&&(l.style.pointerEvents="none")})),o},o.dragit=n=>{const i=Object.assign({},t.defaults.dragit,e.dragit),r=o.querySelectorAll(i.handles);return"disable"===n?r.forEach((t=>{t.style.pointerEvents="none"})):r.forEach((t=>{t.style.pointerEvents="auto"})),o},o.sizeit=(e={})=>{const n=new CustomEvent("jspanelresizestart",{detail:o.id}),i=new CustomEvent("jspanelresize",{detail:o.id}),r=new CustomEvent("jspanelresizestop",{detail:o.id});[n,i,r].forEach((t=>{t.panel=o}));let s,a,l,c,u,h,m={};m.handles=e.handles||t.defaults.resizeit.handles,m.handles.split(",").forEach((t=>{const e=document.createElement("DIV");e.className=`jsPanel-resizeit-handle jsPanel-resizeit-${t.trim()}`,o.append(e)}));let p=!!e.aspectRatio&&e.aspectRatio;function d(e){null===e.relatedTarget&&t.pointermove.forEach((t=>{document.removeEventListener(t,s,!1)}))}function f(e){if(t.pointermove.forEach((t=>{document.removeEventListener(t,s,!1)})),e.target.classList&&e.target.classList.contains("jsPanel-resizeit-handle")){let t,n,i=e.target.className;if(i.match(/jsPanel-resizeit-nw|jsPanel-resizeit-w|jsPanel-resizeit-sw/i)&&(t=!0),i.match(/jsPanel-resizeit-nw|jsPanel-resizeit-n|jsPanel-resizeit-ne/i)&&(n=!0),m.grid&&Array.isArray(m.grid)){1===m.grid.length&&(m.grid[1]=m.grid[0]);const e=parseFloat(o.style.width),i=parseFloat(o.style.height),r=e%m.grid[0],s=i%m.grid[1],a=parseFloat(o.style.left),l=parseFloat(o.style.top),c=a%m.grid[0],u=l%m.grid[1];r<m.grid[0]/2?o.style.width=e-r+"px":o.style.width=e+(m.grid[0]-r)+"px",s<m.grid[1]/2?o.style.height=i-s+"px":o.style.height=i+(m.grid[1]-s)+"px",t&&(c<m.grid[0]/2?o.style.left=a-c+"px":o.style.left=a+(m.grid[0]-c)+"px"),n&&(u<m.grid[1]/2?o.style.top=l-u+"px":o.style.top=l+(m.grid[1]-u)+"px")}}if(a){o.content.style.pointerEvents="inherit",a=void 0,o.saveCurrentDimensions(),o.saveCurrentPosition(),o.calcSizeFactors();let n=o.controlbar.querySelector(".jsPanel-btn-smallify"),i=o.getBoundingClientRect();if(n&&i.height>h+5&&(n.style.transform="rotate(0deg)"),document.dispatchEvent(r),m.stop.length){let n=window.getComputedStyle(o),i={left:parseFloat(n.left),top:parseFloat(n.top),width:parseFloat(n.width),height:parseFloat(n.height)};t.processCallbacks(o,m.stop,!1,i,e)}}o.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),m.aspectRatio=p,document.removeEventListener(e,f)}return o.querySelectorAll(".jsPanel-resizeit-handle").forEach((r=>{r.style.touchAction="none",t.pointerdown.forEach((p=>{r.addEventListener(p,(r=>{if(r.preventDefault(),r.stopPropagation(),r.button&&r.button>0)return!1;let p=1;if(((m=Object.assign({},t.defaults.resizeit,e)).containment||0===m.containment)&&(m.containment=t.pOcontainment(m.containment)),m.aspectRatio&&!0===m.aspectRatio&&(m.aspectRatio="panel"),t.modifier){let e=t.modifier;e.altKey?m.aspectRatio="content":e.ctrlKey?m.aspectRatio="panel":e.shiftKey&&(m.aspectRatio=!1,p=2)}let f="function"==typeof m.maxWidth?m.maxWidth():m.maxWidth||1e4,y="function"==typeof m.maxHeight?m.maxHeight():m.maxHeight||1e4,_="function"==typeof m.minWidth?m.minWidth():m.minWidth,g="function"==typeof m.minHeight?m.minHeight():m.minHeight;o.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));const v=o.parentElement,b=v.tagName.toLowerCase(),x=o.getBoundingClientRect(),$=v.getBoundingClientRect(),A=window.getComputedStyle(v,null),w=parseInt(A.borderLeftWidth,10),B=parseInt(A.borderTopWidth,10),C=A.getPropertyValue("position"),S=r.clientX||0===r.clientX||r.touches[0].clientX,E=r.clientY||0===r.clientY||r.touches[0].clientY,M=S/E,T=r.target.classList,k=o.getScaleFactor(),P=x.width/x.height,z=o.content.getBoundingClientRect(),I=z.width/z.height,F=o.header.getBoundingClientRect().height,V=o.footer.getBoundingClientRect().height||0;let j=x.left,L=x.top,D=1e4,O=1e4,R=1e4,q=1e4;u=x.width,h=x.height,"body"!==b&&(j=x.left-$.left+v.scrollLeft,L=x.top-$.top+v.scrollTop),"body"===b&&m.containment?(D=document.documentElement.clientWidth-x.left,R=document.documentElement.clientHeight-x.top,O=x.width+x.left,q=x.height+x.top):m.containment&&("static"===C?(D=$.width-x.left+w,R=$.height+$.top-x.top+B,O=x.width+(x.left-$.left)-w,q=x.height+(x.top-$.top)-B):(D=v.clientWidth-(x.left-$.left)/k.x+w,R=v.clientHeight-(x.top-$.top)/k.y+B,O=(x.width+x.left-$.left)/k.x-w,q=o.clientHeight+(x.top-$.top)/k.y-B)),m.containment&&(O-=m.containment[3],q-=m.containment[0],D-=m.containment[1],R-=m.containment[2]);const U=window.getComputedStyle(o),N=parseFloat(U.width)-x.width,W=parseFloat(U.height)-x.height;let H=parseFloat(U.left)-x.left,Y=parseFloat(U.top)-x.top;v!==document.body&&(H+=$.left,Y+=$.top);let G=parseInt(U.borderTopWidth,10),J=parseInt(U.borderRightWidth,10),Z=parseInt(U.borderBottomWidth,10),X=parseInt(U.borderLeftWidth,10);s=e=>{e.preventDefault(),a||(document.dispatchEvent(n),m.start.length&&t.processCallbacks(o,m.start,!1,{width:u,height:h,left:j,top:L},e),o.front(),x.height>h+5&&(o.status="normalized",o.setControls([".jsPanel-btn-normalize"]))),a=1,document.dispatchEvent(i);let r=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;T.contains("jsPanel-resizeit-e")?((l=u+(r-S)*p/k.x+N)>=D&&(l=D),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",2===p&&(o.style.left=j-(r-S)+"px"),"content"===m.aspectRatio?(o.style.height=(l-J-X)/I+F+V+G+Z+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*I+"px")):"panel"===m.aspectRatio&&(o.style.height=l/P+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*P+"px"))):T.contains("jsPanel-resizeit-s")?((c=h+(s-E)*p/k.y+W)>=R&&(c=R),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px",2===p&&(o.style.top=L-(s-E)+"px"),"content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-w")?((l=u+(S-r)*p/k.x+N)<=f&&l>=_&&l<=O&&(o.style.left=j+(r-S)/k.x+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px","content"===m.aspectRatio?(o.style.height=(l-J-X)/I+F+V+G+Z+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*I+"px")):"panel"===m.aspectRatio&&(o.style.height=l/P+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*P+"px"))):T.contains("jsPanel-resizeit-n")?((c=h+(E-s)*p/k.y+W)<=y&&c>=g&&c<=q&&(o.style.top=L+(s-E)/k.y+Y+"px"),c>=q&&(c=q),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px","content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-se")?((l=u+(r-S)*p/k.x+N)>=D&&(l=D),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",2===p&&(o.style.left=j-(r-S)+"px"),m.aspectRatio&&(o.style.height=l/P+"px"),(c=h+(s-E)*p/k.y+W)>=R&&(c=R),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px",2===p&&(o.style.top=L-(s-E)+"px"),"content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-sw")?((c=h+(s-E)*p/k.y+W)>=R&&(c=R),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px",2===p&&(o.style.top=L-(s-E)+"px"),m.aspectRatio&&(o.style.width=c*P+"px"),(l=u+(S-r)*p/k.x+N)<=f&&l>=_&&l<=O&&(o.style.left=j+(r-S)/k.x+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px","content"===m.aspectRatio?(o.style.height=(l-J-X)/I+F+V+G+Z+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*I+"px")):"panel"===m.aspectRatio&&(o.style.height=l/P+"px",m.containment&&o.overlaps(v).bottom<=m.containment[2]&&(o.style.height=R+"px",o.style.width=R*P+"px"))):T.contains("jsPanel-resizeit-ne")?((l=u+(r-S)*p/k.x+N)>=D&&(l=D),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",2===p&&(o.style.left=j-(r-S)+"px"),m.aspectRatio&&(o.style.height=l/P+"px"),(c=h+(E-s)*p/k.y+W)<=y&&c>=g&&c<=q&&(o.style.top=L+(s-E)/k.y+Y+"px"),c>=q&&(c=q),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px","content"===m.aspectRatio?(o.style.width=(c-F-V-G-Z)*I+G+Z+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/I+"px")):"panel"===m.aspectRatio&&(o.style.width=c*P+"px",m.containment&&o.overlaps(v).right<=m.containment[1]&&(o.style.width=D+"px",o.style.height=D/P+"px"))):T.contains("jsPanel-resizeit-nw")&&(m.aspectRatio&&T.contains("jsPanel-resizeit-nw")&&(s=(r=s*M)/M),(l=u+(S-r)*p/k.x+N)<=f&&l>=_&&l<=O&&(o.style.left=j+(r-S)/k.x+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=_&&(l=_),o.style.width=l+"px",m.aspectRatio&&(o.style.height=l/P+"px"),(c=h+(E-s)*p/k.y+W)<=y&&c>=g&&c<=q&&(o.style.top=L+(s-E)/k.y+Y+"px"),c>=q&&(c=q),c>=y&&(c=y),c<=g&&(c=g),o.style.height=c+"px","content"===m.aspectRatio?o.style.width=(c-F-V-G-Z)*I+G+Z+"px":"panel"===m.aspectRatio&&(o.style.width=c*P+"px")),window.getSelection().removeAllRanges();const d=window.getComputedStyle(o),b={left:parseFloat(d.left),top:parseFloat(d.top),right:parseFloat(d.right),bottom:parseFloat(d.bottom),width:parseFloat(d.width),height:parseFloat(d.height)};m.resize.length&&t.processCallbacks(o,m.resize,!1,b,e)},t.pointermove.forEach((t=>{document.addEventListener(t,s,!1)})),window.addEventListener("mouseout",d,!1)}))})),t.pointerup.forEach((function(t){document.addEventListener(t,f),window.removeEventListener("mouseout",d)})),e.disable&&(r.style.pointerEvents="none")})),o},o.resizeit=t=>{const e=o.querySelectorAll(".jsPanel-resizeit-handle");return"disable"===t?e.forEach((t=>{t.style.pointerEvents="none"})):e.forEach((t=>{t.style.pointerEvents="auto"})),o},o.getScaleFactor=()=>{const t=o.getBoundingClientRect();return{x:t.width/o.offsetWidth,y:t.height/o.offsetHeight}},o.calcSizeFactors=()=>{const t=window.getComputedStyle(o);if("window"===e.container)o.hf=parseFloat(t.left)/(window.innerWidth-parseFloat(t.width)),o.vf=parseFloat(t.top)/(window.innerHeight-parseFloat(t.height));else if(o.parentElement){let e=o.parentElement.getBoundingClientRect();o.hf=parseFloat(t.left)/(e.width-parseFloat(t.width)),o.vf=parseFloat(t.top)/(e.height-parseFloat(t.height))}},o.saveCurrentDimensions=(t=!1)=>{const e=window.getComputedStyle(o);o.currentData.width=e.width,"normalized"===o.status&&(o.currentData.height=e.height),t&&(o.style.height=e.height)},o.saveCurrentPosition=()=>{const t=window.getComputedStyle(o);o.currentData.left=t.left,o.currentData.top=t.top},o.reposition=(...n)=>{let i,r=e.position,s=!0;return n.forEach((t=>{"string"==typeof t||"object"==typeof t?r=t:"boolean"==typeof t?s=t:"function"==typeof t&&(i=t)})),t.position(o,r),o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()})),s&&o.saveCurrentPosition(),i&&i.call(o,o),o},o.repositionOnSnap=n=>{let i="0",r="0",s=t.pOcontainment(e.dragit.containment);if(e.dragit.snap.containment)switch(n){case"left-top":i=s[3],r=s[0];break;case"right-top":i=-s[1],r=s[0];break;case"right-bottom":i=-s[1],r=-s[2];break;case"left-bottom":i=s[3],r=-s[2];break;case"center-top":i=s[3]/2-s[1]/2,r=s[0];break;case"center-bottom":i=s[3]/2-s[1]/2,r=-s[2];break;case"left-center":i=s[3],r=s[0]/2-s[2]/2;break;case"right-center":i=-s[1],r=s[0]/2-s[2]/2}t.position(o,n),t.setStyle(o,{left:`calc(${o.style.left} + ${i}px)`,top:`calc(${o.style.top} + ${r}px)`})},o.overlaps=(t,e,n)=>{let i,r=o.getBoundingClientRect(),s=getComputedStyle(o.parentElement),a=o.getScaleFactor(),l={top:0,right:0,bottom:0,left:0},c=0,u=0,h=0,m=0;"window"!==o.options.container&&"paddingbox"===e&&(l.top=parseInt(s.borderTopWidth,10)*a.y,l.right=parseInt(s.borderRightWidth,10)*a.x,l.bottom=parseInt(s.borderBottomWidth,10)*a.y,l.left=parseInt(s.borderLeftWidth,10)*a.x),i="string"==typeof t?"window"===t?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:"parent"===t?o.parentElement.getBoundingClientRect():document.querySelector(t).getBoundingClientRect():t.getBoundingClientRect(),n&&(c=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,h=c-i.left,m=u-i.top);let p=r.left<i.right&&r.right>i.left,d=r.top<i.bottom&&r.bottom>i.top;return{overlaps:p&&d,top:r.top-i.top-l.top,right:i.right-r.right-l.right,bottom:i.bottom-r.bottom-l.bottom,left:r.left-i.left-l.left,parentBorderWidth:l,panelRect:r,referenceRect:i,pointer:{clientX:c,clientY:u,left:h-l.left,top:m-l.top,right:i.width-h-l.right,bottom:i.height-m-l.bottom}}},o.setSize=()=>{if(e.panelSize){const n=t.pOsize(o,e.panelSize);o.style.width=n.width,o.style.height=n.height}else if(e.contentSize){const n=t.pOsize(o,e.contentSize);o.content.style.width=n.width,o.content.style.height=n.height,o.style.width=n.width,o.content.style.width="100%"}return o},o.resize=(...e)=>{let n,i=window.getComputedStyle(o),r={width:i.width,height:i.height},s=!0;e.forEach((t=>{"string"==typeof t?r=t:"object"==typeof t?r=Object.assign(r,t):"boolean"==typeof t?s=t:"function"==typeof t&&(n=t)}));let a=t.pOsize(o,r);o.style.width=a.width,o.style.height=a.height,o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()})),s&&o.saveCurrentDimensions(),o.status="normalized";let l=o.controlbar.querySelector(".jsPanel-btn-smallify");return l&&(l.style.transform="rotate(0deg)"),n&&n.call(o,o),o.calcSizeFactors(),o},o.windowResizeHandler=t=>{if(t.target===window){let n,i,r=o.status,s=e.onwindowresize;"maximized"===r&&s?o.maximize(!1,!0):o.snapped&&"minimized"!==r?o.snap(o.snapped,!0):"normalized"===r||"smallified"===r||"maximized"===r?"function"==typeof s?s.call(o,t,o):(n=(window.innerWidth-o.offsetWidth)*o.hf,o.style.left=n<=0?0:n+"px",i=(window.innerHeight-o.offsetHeight)*o.vf,o.style.top=i<=0?0:i+"px"):"smallifiedmax"===r&&s&&o.maximize(!1,!0).smallify(),o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()}))}},o.setControls=(t,e)=>(o.header.querySelectorAll(".jsPanel-btn").forEach((t=>{const e=t.className.split("-"),n=e[e.length-1];"hidden"!==o.getAttribute(`data-btn${n}`)&&(t.style.display="block")})),t.forEach((t=>{const e=o.controlbar.querySelector(t);e&&(e.style.display="none")})),e&&e.call(o,o),o),o.setControlStatus=(t,e="enable",n)=>{const i=o.controlbar.querySelector(`.jsPanel-btn-${t}`);switch(e){case"disable":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"disabled"),i.style.pointerEvents="none",i.style.opacity=.4,i.style.cursor="default");break;case"hide":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"hidden"),i.style.display="none");break;case"show":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"enabled"),i.style.display="block",i.style.pointerEvents="auto",i.style.opacity=1,i.style.cursor="pointer");break;case"enable":"removed"!==o.getAttribute(`data-btn${t}`)&&("hidden"===o.getAttribute(`data-btn${t}`)&&(i.style.display="block"),o.setAttribute(`data-btn${t}`,"enabled"),i.style.pointerEvents="auto",i.style.opacity=1,i.style.cursor="pointer");break;case"remove":o.controlbar.removeChild(i),o.setAttribute(`data-btn${t}`,"removed")}return n&&n.call(o,o),o},o.setControlSize=t=>{const e=t.toLowerCase();o.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{["jsPanel-btn-xl","jsPanel-btn-lg","jsPanel-btn-md","jsPanel-btn-sm","jsPanel-btn-xs"].forEach((e=>{t.classList.remove(e)})),t.classList.add(`jsPanel-btn-${e}`)})),"xl"===e?o.titlebar.style.fontSize="1.5rem":"lg"===e?o.titlebar.style.fontSize="1.25rem":"md"===e?o.titlebar.style.fontSize="1.05rem":"sm"===e?o.titlebar.style.fontSize=".9rem":"xs"===e&&(o.titlebar.style.fontSize=".8rem")},o.setHeaderControls=n=>{if(o.options.headerControls.add){let t=o.options.headerControls.add;Array.isArray(t)||(t=[t]),t.forEach((t=>{o.addControl(t)}))}let i=[];o.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{let e=t.className.match(/jsPanel-btn-[a-z0-9]{3,}/i)[0].substring(12);i.push(e)}));const r=t.pOheaderControls(e.headerControls);return e.headerControls=r,i.forEach((t=>{r[t]&&o.setControlStatus(t,r[t])})),o.setControlSize(r.size),n&&n.call(o,o),o},o.setHeaderLogo=(e,n)=>{let i=[o.headerlogo],r=document.querySelector("#"+o.id+"-min");return r&&i.push(r.querySelector(".jsPanel-headerlogo")),"string"==typeof e?"<"!==e.substr(0,1)?i.forEach((n=>{t.emptyNode(n);let i=document.createElement("img");i.src=e,n.append(i)})):i.forEach((t=>{t.innerHTML=e})):i.forEach((n=>{t.emptyNode(n),n.append(e)})),o.headerlogo.childNodes.forEach((t=>{t.nodeName&&"IMG"===t.nodeName&&t.setAttribute("draggable","false")})),n&&n.call(o,o),o},o.setHeaderRemove=t=>(o.removeChild(o.header),o.content.classList.add("jsPanel-content-noheader"),["close","maximize","normalize","minimize","smallify"].forEach((t=>{o.setAttribute(`data-btn${t}`,"removed")})),t&&t.call(o,o),o),o.setHeaderTitle=(e,n)=>{let i=[o.headertitle],r=document.querySelector("#"+o.id+"-min");return r&&i.push(r.querySelector(".jsPanel-title")),"string"==typeof e?i.forEach((t=>{t.innerHTML=e})):"function"==typeof e?i.forEach((n=>{t.emptyNode(n),n.innerHTML=e()})):i.forEach((n=>{t.emptyNode(n),n.append(e)})),n&&n.call(o,o),o},o.setIconfont=(e,n=o,i)=>{if(e){let i,r;if("fa"===e||"far"===e||"fal"===e||"fas"===e||"fad"===e)i=[`${e} fa-window-close`,`${e} fa-window-maximize`,`${e} fa-window-restore`,`${e} fa-window-minimize`,`${e} fa-chevron-up`];else if("material-icons"===e)i=[e,e,e,e,e,e],r=["close","fullscreen","fullscreen_exit","call_received","expand_less"];else if(Array.isArray(e))i=[`custom-control-icon ${e[4]}`,`custom-control-icon ${e[3]}`,`custom-control-icon ${e[2]}`,`custom-control-icon ${e[1]}`,`custom-control-icon ${e[0]}`];else{if("bootstrap"!==e&&"glyphicon"!==e)return n;i=["glyphicon glyphicon-remove","glyphicon glyphicon-fullscreen","glyphicon glyphicon-resize-full","glyphicon glyphicon-minus","glyphicon glyphicon-chevron-up"]}n.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((e=>{t.emptyNode(e).innerHTML="<span></span>"})),Array.prototype.slice.call(n.querySelectorAll(".jsPanel-controlbar .jsPanel-btn > span")).reverse().forEach(((t,n)=>{t.className=i[n],"material-icons"===e&&(t.textContent=r[n])}))}return i&&i.call(n,n),n},o.addToolbar=(t,e,n)=>{if("header"===t?t=o.headertoolbar:"footer"===t&&(t=o.footer),"string"==typeof e)t.innerHTML=e;else if(Array.isArray(e))e.forEach((e=>{"string"==typeof e?t.innerHTML+=e:t.append(e)}));else if("function"==typeof e){let n=e.call(o,o);"string"==typeof n?t.innerHTML=n:t.append(n)}else t.append(e);return t.classList.add("active"),n&&n.call(o,o),o},o.addCloseControl=()=>{let e=document.createElement("button"),n=o.content.style.color;return e.classList.add("jsPanel-addCloseCtrl"),e.innerHTML=t.icons.close,e.style.color=n,o.options.rtl&&e.classList.add("rtl"),o.appendChild(e),t.pointerup.forEach((t=>{e.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})),t.pointerdown.forEach((t=>{e.addEventListener(t,(t=>{t.preventDefault()}))})),o},o.addControl=n=>{if(!n.html)return o;n.position||(n.position=1);const i=o.controlbar.querySelectorAll(".jsPanel-btn").length;let r=document.createElement("button");r.innerHTML=n.html,r.className=`jsPanel-btn jsPanel-btn-${n.name} jsPanel-btn-${e.headerControls.size}`,r.style.color=o.header.style.color,n.position>i?o.controlbar.append(r):o.controlbar.insertBefore(r,o.querySelector(`.jsPanel-controlbar .jsPanel-btn:nth-child(${n.position})`));const s=n.ariaLabel||n.name;return s&&r.setAttribute("aria-label",s),t.pointerup.forEach((t=>{r.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;n.handler.call(o,o,r)}))})),n.afterInsert&&n.afterInsert.call(r,r),o},o.setRtl=()=>{[o.header,o.content,o.footer].forEach((t=>{t.dir="rtl",e.rtl.lang&&(t.lang=e.rtl.lang)}))},o.id=e.id,o.classList.add("jsPanel-"+e.paneltype),"standard"===e.paneltype&&(o.style.zIndex=this.zi.next()),r.append(o),o.front(!1,!1),o.setTheme(e.theme),e.boxShadow&&o.classList.add(`jsPanel-depth-${e.boxShadow}`),e.header){if(e.headerLogo&&o.setHeaderLogo(e.headerLogo),o.setIconfont(e.iconfont),o.setHeaderTitle(e.headerTitle),o.setHeaderControls(),t.isIE){let t=[o.headerbar,o.controlbar];switch(o.options.headerControls.size){case"md":t.forEach((t=>{t.style.height="34px"}));break;case"xs":t.forEach((t=>{t.style.height="26px"}));break;case"sm":t.forEach((t=>{t.style.height="30px"}));break;case"lg":t.forEach((t=>{t.style.height="38px"}));break;case"xl":t.forEach((t=>{t.style.height="42px"}))}}if("auto-show-hide"===e.header){let n="jsPanel-depth-"+e.boxShadow;o.header.style.opacity=0,o.style.backgroundColor="transparent",this.remClass(o,n),this.setClass(o.content,n),o.header.addEventListener("mouseenter",(()=>{o.header.style.opacity=1,t.setClass(o,n),t.remClass(o.content,n)})),o.header.addEventListener("mouseleave",(()=>{o.header.style.opacity=0,t.remClass(o,n),t.setClass(o.content,n)}))}}else o.setHeaderRemove(),e.addCloseControl&&o.addCloseControl();if(e.headerToolbar&&o.addToolbar(o.headertoolbar,e.headerToolbar),e.footerToolbar&&o.addToolbar(o.footer,e.footerToolbar),e.border&&o.setBorder(e.border),e.borderRadius&&o.setBorderRadius(e.borderRadius),e.content&&("function"==typeof e.content?e.content.call(o,o):"string"==typeof e.content?o.content.innerHTML=e.content:o.content.append(e.content)),e.contentAjax&&this.ajax(e.contentAjax,o),e.contentFetch&&this.fetch(e.contentFetch,o),e.contentOverflow){const t=e.contentOverflow.split(" ");1===t.length?o.content.style.overflow=t[0]:2===t.length&&(o.content.style.overflowX=t[0],o.content.style.overflowY=t[1])}if(e.autoclose){"number"==typeof e.autoclose?e.autoclose={time:e.autoclose+"ms"}:"string"==typeof e.autoclose&&(e.autoclose={time:e.autoclose});let n=Object.assign({},t.defaultAutocloseConfig,e.autoclose);n.time&&"number"==typeof n.time&&(n.time+="ms");let i=o.progressbar.querySelector("div");i.addEventListener("animationend",(t=>{t.stopPropagation(),o.progressbar.classList.remove("active"),o.close()})),n.progressbar&&(o.progressbar.classList.add("active"),n.background?t.themes.indexOf(n.background)>-1?o.progressbar.classList.add(n.background+"-bg"):t.colorNames[n.background]?o.progressbar.style.background="#"+t.colorNames[n.background]:o.progressbar.style.background=n.background:o.progressbar.classList.add("success-bg")),i.style.animation=`${n.time} progressbar`}if(e.rtl&&o.setRtl(),o.setSize(),o.status="normalized",e.position?this.position(o,e.position):o.style.opacity=1,document.dispatchEvent(c),o.calcSizeFactors(),e.animateIn&&(o.addEventListener("animationend",(()=>{this.remClass(o,e.animateIn)})),this.setClass(o,e.animateIn)),e.syncMargins){let n=this.pOcontainment(e.maximizedMargin);e.dragit&&(e.dragit.containment=n,!0===e.dragit.snap?(e.dragit.snap=t.defaultSnapConfig,e.dragit.snap.containment=!0):e.dragit.snap&&(e.dragit.snap.containment=!0)),e.resizeit&&(e.resizeit.containment=n)}if(e.dragit?(["start","drag","stop"].forEach((t=>{e.dragit[t]?"function"==typeof e.dragit[t]&&(e.dragit[t]=[e.dragit[t]]):e.dragit[t]=[]})),o.drag(e.dragit),o.addEventListener("jspaneldragstop",(t=>{t.panel===o&&o.calcSizeFactors()}),!1)):o.titlebar.style.cursor="default",e.resizeit){let n;["start","resize","stop"].forEach((t=>{e.resizeit[t]?"function"==typeof e.resizeit[t]&&(e.resizeit[t]=[e.resizeit[t]]):e.resizeit[t]=[]})),o.sizeit(e.resizeit),o.addEventListener("jspanelresizestart",(t=>{t.panel===o&&(n=o.status)}),!1),o.addEventListener("jspanelresizestop",(i=>{i.panel===o&&("smallified"===n||"smallifiedmax"===n||"maximized"===n)&&parseFloat(o.style.height)>parseFloat(window.getComputedStyle(o.header).height)&&(o.setControls([".jsPanel-btn-normalize"]),o.status="normalized",document.dispatchEvent(c),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(o,e.onstatuschange,"every"),o.calcSizeFactors())}),!1)}if(o.saveCurrentDimensions(!0),o.saveCurrentPosition(),e.setStatus&&("smallifiedmax"===e.setStatus?o.maximize().smallify():"smallified"===e.setStatus?o.smallify():o[e.setStatus.substr(0,e.setStatus.length-1)]()),this.pointerdown.forEach((t=>{o.addEventListener(t,(t=>{t.target.closest(".jsPanel-btn-close")||t.target.closest(".jsPanel-btn-minimize")||"standard"!==e.paneltype||o.front()}),!1)})),e.onwindowresize&&"window"===o.options.container&&window.addEventListener("resize",o.windowResizeHandler,!1),e.onparentresize){let t=e.onparentresize,n=o.isChildpanel();if(n){const e=n.content;let i=[];o.parentResizeHandler=r=>{if(r.panel===n){i[0]=e.offsetWidth,i[1]=e.offsetHeight;let n,r,s=o.status;"maximized"===s&&t?o.maximize():o.snapped&&"minimized"!==s?o.snap(o.snapped,!0):"normalized"===s||"smallified"===s||"maximized"===s?"function"==typeof t?t.call(o,o,{width:i[0],height:i[1]}):(n=(i[0]-o.offsetWidth)*o.hf,o.style.left=n<=0?0:n+"px",r=(i[1]-o.offsetHeight)*o.vf,o.style.top=r<=0?0:r+"px"):"smallifiedmax"===s&&t&&o.maximize().smallify()}},document.addEventListener("jspanelresize",o.parentResizeHandler,!1)}}return this.globalCallbacks&&(Array.isArray(this.globalCallbacks)?this.globalCallbacks.forEach((t=>{t.call(o,o)})):this.globalCallbacks.call(o,o)),e.callback&&(Array.isArray(e.callback)?e.callback.forEach((t=>{t.call(o,o)})):e.callback.call(o,o)),n&&n.call(o,o),document.dispatchEvent(s),o}};
/**
 * @license AngularJS v1.8.2
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */!function(t){var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!O(t))return e;D(t.objectMaxDepth)&&(e.objectMaxDepth=i(t.objectMaxDepth)?t.objectMaxDepth:NaN),D(t.urlErrorParamsEnabled)&&X(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function i(t){return U(t)&&t>0}function r(t,n){n=n||Error;var i="https://errors.angularjs.org/1.8.2/",r=i.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(r,"g");return function(){var r,s,a=arguments[0],l=arguments[1],c="["+(t?t+":":"")+a+"] ",u=mt(arguments,2).map((function(t){return Nt(t,e.objectMaxDepth)}));if(c+=l.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<u.length?u[e].replace(o,""):t})),c+="\n"+i+(t?t+"/":"")+a,e.urlErrorParamsEnabled)for(s=0,r="?";s<u.length;s++,r="&")c+=r+"p"+s+"="+encodeURIComponent(u[s]);return new n(c)}}var o,s,a,l,c=/^\/(.+)\/([a-z]*)$/,u="validity",h=Object.prototype.hasOwnProperty,m=function(t){return q(t)?t.toLowerCase():t},p=function(t){return q(t)?t.toUpperCase():t},d=[].slice,f=[].splice,y=[].push,_=Object.prototype.toString,g=Object.getPrototypeOf,v=r("ng"),b=t.angular||(t.angular={}),x=0;function $(t){if(null==t||J(t))return!1;if(W(t)||q(t)||s&&t instanceof s)return!0;var e="length"in Object(t)&&t.length;return U(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function A(t,e,n){var i,r;if(t)if(Y(t))for(i in t)"prototype"!==i&&"length"!==i&&"name"!==i&&t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else if(W(t)||$(t)){var o="object"!=typeof t;for(i=0,r=t.length;i<r;i++)(o||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==A)t.forEach(e,n,t);else if(R(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)h.call(t,i)&&e.call(n,t[i],i,t);return t}function w(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function B(t){return function(e,n){t(n,e)}}function C(){return++x}function S(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(O(s)||Y(s))for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l],h=s[u];n&&O(h)?N(h)?t[u]=new Date(h.valueOf()):G(h)?t[u]=new RegExp(h):h.nodeName?t[u]=h.cloneNode(!0):nt(h)?t[u]=h.clone():"__proto__"!==u&&(O(t[u])||(t[u]=W(h)?[]:{}),E(t[u],[h],!0)):t[u]=h}}return S(t,i),t}function M(t){return E(t,d.call(arguments,1),!1)}function T(t){return E(t,d.call(arguments,1),!0)}function k(t){return parseInt(t,10)}o=t.document.documentMode;var P=Number.isNaN||function(t){return t!=t};function z(t,e){return M(Object.create(t),e)}function I(){}function F(t){return t}function V(t){return function(){return t}}function j(t){return Y(t.toString)&&t.toString!==_}function L(t){return void 0===t}function D(t){return void 0!==t}function O(t){return null!==t&&"object"==typeof t}function R(t){return null!==t&&"object"==typeof t&&!g(t)}function q(t){return"string"==typeof t}function U(t){return"number"==typeof t}function N(t){return"[object Date]"===_.call(t)}function W(t){return Array.isArray(t)||t instanceof Array}function H(t){switch(_.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function Y(t){return"function"==typeof t}function G(t){return"[object RegExp]"===_.call(t)}function J(t){return t&&t.window===t}function Z(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function K(t){return t&&Y(t.then)}I.$inject=[],F.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return q(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function it(t){return m(t.nodeName||t[0]&&t[0].nodeName)}function rt(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function st(t,e,n){var r,o,s=[],a=[];if(n=i(n)?n:NaN,e){if((o=e)&&U(o.length)&&Q.test(_.call(o))||(r=e,"[object ArrayBuffer]"===_.call(r)))throw v("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw v("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:A(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),s.push(t),a.push(e),l(t,e,n)}return c(t,n);function l(t,e,n){if(--n<0)return"...";var i,r=e.$$hashKey;if(W(t))for(var o=0,s=t.length;o<s;o++)e.push(c(t[o],n));else if(R(t))for(i in t)e[i]=c(t[i],n);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=c(t[i],n));else for(i in t)h.call(t,i)&&(e[i]=c(t[i],n));return S(e,r),e}function c(t,e){if(!O(t))return t;var n=s.indexOf(t);if(-1!==n)return a[n];if(J(t)||Z(t))throw v("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(t){switch(_.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(c(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(Y(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===r&&(r=W(t)?[]:Object.create(g(t)),i=!0),s.push(t),a.push(r),i?l(t,r,e):r}}function at(t,e){return t===e||t!=t&&e!=e}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o===typeof e&&"object"===o){if(!W(t)){if(N(t))return!!N(e)&&at(t.getTime(),e.getTime());if(G(t))return!!G(e)&&t.toString()===e.toString();if(Z(t)||Z(e)||J(t)||J(e)||W(e)||N(e)||G(e))return!1;for(i in r=Ot(),t)if("$"!==i.charAt(0)&&!Y(t[i])){if(!lt(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&D(e[i])&&!Y(e[i]))return!1;return!0}if(!W(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!lt(t[i],e[i]))return!1;return!0}}return!1}var ct=function(){if(!D(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},ut=function(){if(D(ut.name_))return ut.name_;var e,n,i,r,o=Ct.length;for(n=0;n<o;++n)if(i=Ct[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return ut.name_=r};function ht(t,e,n){return t.concat(d.call(e,n))}function mt(t,e){return d.call(t,e||0)}function pt(t,e){var n=arguments.length>2?mt(arguments,2):[];return!Y(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ht(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:J(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":Z(n)&&(i="$SCOPE"),i}function ft(t,e){if(!L(t))return U(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function yt(t){return q(t)?JSON.parse(t):t}var _t=/:/g;function gt(t,e){t=t.replace(_t,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return P(n)?e:n}function vt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return vt(t,n*(gt(e,i)-i))}function xt(t){t=s(t).clone().empty();var e=s("<div></div>").append(t).html();try{return t[0].nodeType===qt?m(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+m(e)}))}catch(n){return m(e)}}function $t(t){try{return decodeURIComponent(t)}catch(e){}}function At(t){var e={};return A((t||"").split("&"),(function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),r=t.substring(n+1)),D(i=$t(i))&&(r=!D(r)||$t(r),h.call(e,i)?W(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))})),e}function wt(t){return Bt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Bt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Ct=["ng-","data-ng-","ng:","x-ng-"];var St=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var i=n.attributes;return[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Et(e,n){var i,r,o={};if(A(Ct,(function(t){var n=t+"app";!i&&e.hasAttribute&&e.hasAttribute(n)&&(i=e,r=e.getAttribute(n))})),A(Ct,(function(t){var n,o=t+"app";!i&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))})),i){if(!St)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,i,r=Ct.length;for(i=0;i<r;++i)if(n=Ct[i]+e,q(n=t.getAttribute(n)))return n;return null}(i,"strict-di"),n(i,r?[r]:[],o)}}function Mt(e,n,i){O(i)||(i={});i=M({strictDi:!1},i);var r=function(){if((e=s(e)).injector()){var r=e[0]===t.document?"document":xt(e);throw v("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Ke(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply((function(){e.data("$injector",i),n(e)(t)}))}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return r();t.name=t.name.replace(a,""),b.resumeBootstrap=function(t){return A(t,(function(t){n.push(t)})),r()},Y(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Tt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function kt(t){var e=b.element(t).injector();if(!e)throw v("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Pt=/[A-Z]/g;function zt(t,e){return e=e||"_",t.replace(Pt,(function(t,n){return(n?e:"")+t.toLowerCase()}))}var It=!1;function Ft(){pe.legacyXHTMLReplacement=!0}function Vt(t,e,n){if(!t)throw v("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function jt(t,e,n){return n&&W(t)&&(t=t[t.length-1]),Vt(Y(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Lt(t,e){if("hasOwnProperty"===t)throw v("badname","hasOwnProperty is not a valid {0} name",e)}function Dt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=s(d.call(t,0,r))),e.push(n));return e||t}function Ot(){return Object.create(null)}function Rt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!j(t)||W(t)||N(t)?ft(t):t.toString()}return t}var qt=3;function Ut(t,e){if(W(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(O(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function Nt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):L(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return i(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(O(e=dt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e}))}(t,e):t}var Wt={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};pe.expando="ng339";var Ht=pe.cache={},Yt=1;pe._data=function(t){return this.cache[t[this.expando]]||{}};var Gt=/-([a-z])/g,Jt=/^-ms-/,Zt={mouseleave:"mouseout",mouseenter:"mouseover"},Xt=r("jqLite");function Kt(t,e){return e.toUpperCase()}function Qt(t){return t.replace(Gt,Kt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ne=/<([\w:-]+)/,ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,re={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};re.tbody=re.tfoot=re.colgroup=re.caption=re.thead,re.th=re.td;var oe={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var se in re){var ae=re[se],le=ae.slice().reverse();oe[se]=[le.length,"<"+le.join("><")+">","</"+ae.join("></")+">"]}function ce(t){return!ee.test(t)}function ue(t){var e=t.nodeType;return 1===e||!e||9===e}function he(e,n){var i,r,s,a,l,c=n.createDocumentFragment(),u=[];if(ce(e))u.push(n.createTextNode(e));else{if(i=c.appendChild(n.createElement("div")),r=(ne.exec(e)||["",""])[1].toLowerCase(),a=pe.legacyXHTMLReplacement?e.replace(ie,"<$1></$2>"):e,o<10)for(s=oe[r]||oe._default,i.innerHTML=s[1]+a+s[2],l=s[0];l--;)i=i.firstChild;else{for(l=(s=re[r]||[]).length;--l>-1;)i.appendChild(t.document.createElement(s[l])),i=i.firstChild;i.innerHTML=a}u=ht(u,i.childNodes),(i=c.firstChild).textContent=""}return c.textContent="",c.innerHTML="",A(u,(function(t){c.appendChild(t)})),c}oe.optgroup=oe.option;var me=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function pe(e){if(e instanceof pe)return e;var n,i,r,o;if(q(e)&&(e=tt(e),n=!0),!(this instanceof pe)){if(n&&"<"!==e.charAt(0))throw Xt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pe(e)}n?Be(this,(i=e,r=r||t.document,(o=te.exec(i))?[r.createElement(o[1])]:(o=he(i,r))?o.childNodes:[])):Y(e)?Te(e):Be(this,e)}function de(t){return t.cloneNode(!0)}function fe(t,e){!e&&ue(t)&&s.cleanData([t]),t.querySelectorAll&&s.cleanData(t.querySelectorAll("*"))}function ye(t){var e;for(e in t)return!1;return!0}function _e(t){var e=t.ng339,n=e&&Ht[e],i=n&&n.events,r=n&&n.data;r&&!ye(r)||i&&!ye(i)||(delete Ht[e],t.ng339=void 0)}function ge(t,e,n,i){if(D(i))throw Xt("offargs","jqLite#off() does not support the `selector` argument");var r=be(t),o=r&&r.events,s=r&&r.handle;if(s){if(e){var a=function(e){var i=o[e];D(n)&&ot(i||[],n),D(n)&&i&&i.length>0||(t.removeEventListener(e,s),delete o[e])};A(e.split(" "),(function(t){a(t),Zt[t]&&a(Zt[t])}))}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,s),delete o[e];_e(t)}}function ve(t,e){var n=t.ng339,i=n&&Ht[n];i&&(e?delete i.data[e]:i.data={},_e(t))}function be(t,e){var n=t.ng339,i=n&&Ht[n];return e&&!i&&(t.ng339=n=++Yt,i=Ht[n]={events:{},data:{},handle:void 0}),i}function xe(t,e,n){if(ue(t)){var i,r=D(n),o=!r&&e&&!O(e),s=!e,a=be(t,!o),l=a&&a.data;if(r)l[Qt(e)]=n;else{if(s)return l;if(o)return l&&l[Qt(e)];for(i in e)l[Qt(i)]=e[i]}}}function $e(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Ae(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;A(e.split(" "),(function(t){t=tt(t),i=i.replace(" "+t+" "," ")})),i!==n&&t.setAttribute("class",tt(i))}}function we(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n;A(e.split(" "),(function(t){t=tt(t),-1===i.indexOf(" "+t+" ")&&(i+=t+" ")})),i!==n&&t.setAttribute("class",tt(i))}}function Be(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function Ce(t,e){return Se(t,"$"+(e||"ngController")+"Controller")}function Se(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var i=W(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(D(n=s.data(t,i[r])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Ee(t){for(fe(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Me(t,e){e||fe(t);var n=t.parentNode;n&&n.removeChild(t)}function Te(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var ke=pe.prototype={ready:Te,toString:function(){var t=[];return A(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return s(t>=0?this[t]:this[this.length+t])},length:0,push:y,sort:[].sort,splice:[].splice},Pe={};A("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){Pe[m(t)]=t}));var ze={};A("input,select,option,textarea,button,form,details".split(","),(function(t){ze[t]=!0}));var Ie={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Fe(t,e){var n=Pe[e.toLowerCase()];return n&&ze[it(t)]&&n}function Ve(t,e,n){n.call(t,e)}function je(t,e,n){var i=e.relatedTarget;i&&(i===t||me.call(t,i))||n.call(t,e)}function Le(){this.$get=function(){return M(pe,{hasClass:function(t,e){return t.attr&&(t=t[0]),$e(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Ae(t,e)}})}}function De(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"===i||"object"===i&&null!==t?t.$$hashKey=i+":"+(e||C)():i+":"+t}A({data:xe,removeData:ve,hasData:function(t){for(var e in Ht[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ve(t[e]),ge(t[e])}},(function(t,e){pe[e]=t})),A({data:xe,inheritedData:Se,scope:function(t){return s.data(t,"$scope")||Se(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return s.data(t,"$isolateScope")||s.data(t,"$isolateScopeNoTemplate")},controller:Ce,injector:function(t){return Se(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:$e,css:function(t,e,n){if(e=function(t){return Qt(t.replace(Jt,"ms-"))}(e),!D(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i,r=t.nodeType;if(r!==qt&&2!==r&&8!==r&&t.getAttribute){var o=m(e),s=Pe[o];if(!D(n))return i=t.getAttribute(e),s&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&s?t.removeAttribute(e):t.setAttribute(e,s?o:n)}},prop:function(t,e,n){if(!D(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(L(e)){var n=t.nodeType;return 1===n||n===qt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(L(e)){if(t.multiple&&"select"===it(t)){var n=[];return A(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(L(e))return t.innerHTML;fe(t,!0),t.innerHTML=e},empty:Ee},(function(t,e){pe.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==Ee&&L(2===t.length&&t!==$e&&t!==Ce?e:n)){if(O(e)){for(i=0;i<o;i++)if(t===xe)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var s=t.$dv,a=L(s)?Math.min(o,1):o,l=0;l<a;l++){var c=t(this[l],e,n);s=s?s+c:c}return s}for(i=0;i<o;i++)t(this[i],e,n);return this}})),A({removeData:ve,on:function(t,e,n,i){if(D(i))throw Xt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ue(t)){var r=be(t,!0),o=r.events,s=r.handle;s||(s=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(L(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var a=r.specialHandlerWrapper||Ve;o>1&&(r=Ut(r));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||a(t,n,r[l])}};return n.elem=t,n}(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],l=a.length,c=function(e,i,r){var a=o[e];a||((a=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||t.addEventListener(e,s)),a.push(n)};l--;)e=a[l],Zt[e]?(c(Zt[e],je),c(e,void 0,!0)):c(e)}},off:ge,one:function(t,e,n){(t=s(t)).on(e,(function i(){t.off(e,n),t.off(e,i)})),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;fe(t),A(new pe(e),(function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e}))},children:function(t){var e=[];return A(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var i=0,r=(e=new pe(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;A(new pe(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){var n,i,r;n=t,i=s(e).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:Me,detach:function(t){Me(t,!0)},after:function(t,e){var n=t,i=t.parentNode;if(i)for(var r=0,o=(e=new pe(e)).length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:we,removeClass:Ae,toggleClass:function(t,e,n){e&&A(e.split(" "),(function(e){var i=n;L(i)&&(i=!$e(t,e)),(i?we:Ae)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,n){var i,r,o,s=e.type||e,a=be(t),l=a&&a.events,c=l&&l[s];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:s,target:t},e.type&&(i=M(i,e)),r=Ut(c),o=n?[i].concat(n):[i],A(r,(function(e){i.isImmediatePropagationStopped()||e.apply(t,o)})))}},(function(t,e){pe.prototype[e]=function(e,n,i){for(var r,o=0,a=this.length;o<a;o++)L(r)?D(r=t(this[o],e,n,i))&&(r=s(r)):Be(r,t(this[o],e,n,i));return D(r)?r:this}})),pe.prototype.bind=pe.prototype.on,pe.prototype.unbind=pe.prototype.off;var Oe=Object.create(null);function Re(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Re.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return P(t)?Oe:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var qe=Re,Ue=[function(){this.$get=[function(){return qe}]}],Ne=/^([^(]+?)=>/,We=/^[^(]*\(\s*([^)]*)\)/m,He=/,/,Ye=/^\s*(_?)(\S+?)\1\s*$/,Ge=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Je=r("$injector");function Ze(t){return Function.prototype.toString.call(t)}function Xe(t){var e=Ze(t).replace(Ge,"");return e.match(Ne)||e.match(We)}function Ke(t,e){e=!0===e;var n={},i="Provider",r=[],s=new qe,a={$provide:{provider:d(f),factory:d(_),service:d((function(t,e){return _(t,["$injector",function(t){return t.instantiate(e)}])})),value:d((function(t,e){return _(t,V(e),!1)})),constant:d((function(t,e){Lt(t,"constant"),a[t]=e,u[t]=e})),decorator:function(t,e){var n=c.get(t+i),r=n.$get;n.$get=function(){var t=m.invoke(r,n);return m.invoke(e,null,{$delegate:t})}}}},c=a.$injector=v(a,(function(t,e){throw b.isString(e)&&r.push(e),Je("unpr","Unknown provider: {0}",r.join(" <- "))})),u={},h=v(u,(function(t,e){var n=c.get(t+i,e);return m.invoke(n.$get,n,void 0,t)})),m=h;a.$injectorProvider={$get:V(h)},m.modules=c.modules=Ot();var p=g(t);return(m=h.get("$injector")).strictDi=e,A(p,(function(t){t&&m.invoke(t)})),m.loadNewModules=function(t){A(g(t),(function(t){t&&m.invoke(t)}))},m;function d(t){return function(e,n){if(!O(e))return t(e,n);A(e,B(t))}}function f(t,e){if(Lt(t,"service"),(Y(e)||W(e))&&(e=c.instantiate(e)),!e.$get)throw Je("pget","Provider '{0}' must define $get factory method.",t);return a[t+i]=e}function y(t,e){return function(){var n=m.invoke(e,this);if(L(n))throw Je("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function _(t,e,n){return f(t,{$get:!1!==n?y(t,e):e})}function g(t){Vt(L(t)||W(t),"modulesToLoad","not an array");var e,n=[];return A(t,(function(t){if(!s.get(t)){s.set(t,!0);try{q(t)?(e=l(t),m.modules[t]=e,n=n.concat(g(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):Y(t)||W(t)?n.push(c.invoke(t)):jt(t,"module")}catch(r){throw W(t)&&(t=t[t.length-1]),r.message&&r.stack&&-1===r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),Je("modulerr","Failed to instantiate module {0} due to:\n{1}",t,r.stack||r.message||r)}}function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=c.get(i[0]);r[i[1]].apply(r,i[2])}}})),n}function v(t,s){function l(e,i){if(t.hasOwnProperty(e)){if(t[e]===n)throw Je("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "));return t[e]}try{return r.unshift(e),t[e]=n,t[e]=s(e,i),t[e]}catch(o){throw t[e]===n&&delete t[e],o}finally{r.shift()}}function c(t,n,i){for(var r=[],o=Ke.$$annotate(t,e,i),s=0,a=o.length;s<a;s++){var c=o[s];if("string"!=typeof c)throw Je("itkn","Incorrect injection token! Expected service name as string, got {0}",c);r.push(n&&n.hasOwnProperty(c)?n[c]:l(c,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r=c(t,n,i);return W(t)&&(t=t[t.length-1]),function(t){if(o||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^class\b/.test(Ze(t))),e}(t)?(r.unshift(null),new(Function.prototype.bind.apply(t,r))):t.apply(e,r)},instantiate:function(t,e,n){var i=W(t)?t[t.length-1]:t,r=c(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:l,annotate:Ke.$$annotate,has:function(e){return a.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(Y(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else U(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function l(t){var e,n,r;(t=q(t)?t:U(t)?t.toString():i.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),r=null,Array.prototype.some.call(n,(function(t){if("a"===it(t))return r=t,!0})),(e=r)?a(e):"top"===t&&a(null)):a(null)}return e&&r.$watch((function(){return i.hash()}),(function(e,n){var i,o;e===n&&""===e||(i=function(){r.$evalAsync(l)},"complete"===(o=o||t).document.readyState?o.setTimeout(i):s(o).on("load",i))})),l}]}Ke.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw q(n)&&n||(n=t.name||function(t){var e=Xe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Je("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);A(Xe(t)[1].split(He),(function(t){t.replace(Ye,(function(t,e,n){i.push(n)}))}))}t.$inject=i}}else W(t)?(jt(t[r=t.length-1],"fn"),i=t.slice(0,r)):jt(t,"fn",!0);return i};var tn=r("$animate"),en="ng-animate";function nn(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function rn(t){return O(t)?t:{}}var on=function(){this.$get=I},sn=function(){var t=new qe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:I,on:I,off:I,pin:I,push:function(s,a,l,c){c&&c(),(l=l||{}).from&&s.css(l.from),l.to&&s.css(l.to),(l.addClass||l.removeClass)&&function(n,s,a){var l=t.get(n)||{},c=r(l,s,!0),u=r(l,a,!1);(c||u)&&(t.set(n,l),e.push(n),1===e.length&&i.$$postDigest(o))}(s,l.addClass,l.removeClass);var u=new n;return u.complete(),u}};function r(t,e,n){var i=!1;return e&&A(e=q(e)?e.split(" "):W(e)?e:[],(function(e){e&&(i=!0,t[e]=n)})),i}function o(){A(e,(function(e){var n=t.get(e);if(n){var i=function(t){q(t)&&(t=t.split(" "));var e=Ot();return A(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),r="",o="";A(n,(function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)})),A(e,(function(t){r&&we(t,r),o&&Ae(t,o)})),t.delete(e)}})),e.length=0}}]},an=["$provide",function(t){var e=this,n=null,i=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw tn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.customFilter=function(t){return 1===arguments.length&&(i=Y(t)?t:null),i},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,tn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en)}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,i,r,o){return i=i&&s(i),r=r&&s(r),e(n,i=i||r.parent(),r),t.push(n,"enter",rn(o))},move:function(n,i,r,o){return i=i&&s(i),r=r&&s(r),e(n,i=i||r.parent(),r),t.push(n,"move",rn(o))},leave:function(e,n){return t.push(e,"leave",rn(n),(function(){e.remove()}))},addClass:function(e,n,i){return(i=rn(i)).addClass=nn(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=rn(i)).removeClass=nn(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=rn(r)).addClass=nn(r.addClass,n),r.removeClass=nn(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=rn(o)).from=o.from?M(o.from,n):n,o.to=o.to?M(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=nn(o.tempClasses,r),t.push(e,"animate",o)}}}]}],ln=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return n((function(){t=!0})),function(e){t?e():n(e)}}}]},cn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){i()?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){if(n===t.length)return void e(!0);t[n]((function(t){!1!==t?(n++,i()):e(!1)}))}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}A(t,(function(t){t.done(r)}))},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(A(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},o}]},un=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=st(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,s=new n;return{start:a,end:a};function a(){return t((function(){!function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null);r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null);r.to&&(e.css(r.to),r.to=null)}(),o||s.complete(),o=!0})),s}}}]};function hn(t,e,n,i,r){var o=this,a=t.location,l=t.history,c=t.setTimeout,u=t.clearTimeout,h={},m=r(n);o.isMock=!1,o.$$completeOutstandingRequest=m.completeTask,o.$$incOutstandingRequestCount=m.incTaskCount,o.notifyWhenNoOutstandingRequests=m.notifyWhenNoPendingTasks;var p,d,f=a.href,y=e.find("base"),_=null,g=i.history?function(){try{return l.state}catch(t){}}:I;w(),o.url=function(e,n,r){if(L(r)&&(r=null),a!==t.location&&(a=t.location),l!==t.history&&(l=t.history),e){var s=d===r;if(e=hr(e).href,f===e&&(!i.history||s))return o;var c=f&&ui(f)===ui(e);return f=e,d=r,!i.history||c&&s?(c||(_=e),n?a.replace(e):c?a.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):a.href=e,a.href!==e&&(_=e)):(l[n?"replaceState":"pushState"](r,"",e),w()),_&&(_=e),o}return function(t){return t.replace(/#$/,"")}(_||a.href)},o.state=function(){return p};var v=[],b=!1;function x(){_=null,B()}var $=null;function w(){lt(p=L(p=g())?null:p,$)&&(p=$),$=p,d=p}function B(){var t=d;w(),f===o.url()&&t===p||(f=o.url(),d=p,A(v,(function(t){t(o.url(),p)})))}o.onUrlChange=function(e){return b||(i.history&&s(t).on("popstate",x),s(t).on("hashchange",x),b=!0),v.push(e),e},o.$$applicationDestroyed=function(){s(t).off("hashchange popstate",x)},o.$$checkUrlChange=B,o.baseHref=function(){var t=y.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},o.defer=function(t,e,n){var i;return e=e||0,n=n||m.DEFAULT_TASK_TYPE,m.incTaskCount(n),i=c((function(){delete h[i],m.completeTask(t,n)}),e),h[i]=n,i},o.defer.cancel=function(t){if(h.hasOwnProperty(t)){var e=h[t];return delete h[t],u(t),m.completeTask(I,e),!0}return!1}}function mn(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,i,r){return new hn(t,i,e,n,r)}]}function pn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var i=0,o=M({},n,{id:e}),s=Ot(),a=n&&n.capacity||Number.MAX_VALUE,l=Ot(),c=null,u=null;return t[e]={put:function(t,e){if(!L(e)){if(a<Number.MAX_VALUE)h(l[t]||(l[t]={key:t}));return t in s||i++,s[t]=e,i>a&&this.remove(u.key),e}},get:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;h(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;e===c&&(c=e.p),e===u&&(u=e.n),m(e.n,e.p),delete l[t]}t in s&&(delete s[t],i--)},removeAll:function(){s=Ot(),i=0,l=Ot(),c=u=null},destroy:function(){s=null,o=null,l=null,delete t[e]},info:function(){return M({},o,{size:i})}};function h(t){t!==c&&(u?u===t&&(u=t.n):u=t,m(t.n,t.p),m(t,c),(c=t).n=null)}function m(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return A(t,(function(t,n){e[n]=t.info()})),e},e.get=function(e){return t[e]},e}}function dn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var fn=r("$compile");var yn=new function(){};function _n(e,n){var i={},r="Directive",a=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),u=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,d=Ot();function f(t,e,n){var i=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,r=Ot();return A(t,(function(t,o){if((t=t.trim())in d)r[o]=d[t];else{var s=t.match(i);if(!s)throw fn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o},s[4]&&(d[t]=r[o])}})),r}function y(t,e){var n={isolateScope:null,bindToController:null};if(O(t.scope)&&(!0===t.bindToController?(n.bindToController=f(t.scope,e,!0),n.isolateScope={}):n.isolateScope=f(t.scope,e,!1)),O(t.bindToController)&&(n.bindToController=f(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw fn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return Vt(n,"name"),Lt(n,"directive"),q(n)?(!function(t){var e=t.charAt(0);if(!e||e!==m(e))throw fn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw fn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Vt(o,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+r,["$injector","$exceptionHandler",function(t,e){var r=[];return A(i[n],(function(i,o){try{var s=t.invoke(i);Y(s)?s={compile:V(s)}:!s.compile&&s.link&&(s.compile=V(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||n,s.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&O(e)&&A(e,(function(t,n){var i=t.match(u);t.substring(i[0].length)||(e[n]=i[0]+n)})),e}(s),s.restrict=function(t,e){if(t&&(!q(t)||!/[EACM]/.test(t)))throw fn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(s.restrict,n),s.$$moduleName=i.$$moduleName,r.push(s)}catch(a){e(a)}})),r}])),i[n].push(o)):A(n,B(t)),this},this.component=function t(e,n){if(!q(e))return A(e,B(pt(this,t))),this;var i=n.controller||function(){};function r(t){function e(e){return Y(e)||W(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=n.template||n.templateUrl?n.template:"",o={controller:i,controllerAs:Cn(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return A(n,(function(t,e){"$"===e.charAt(0)&&(o[e]=t)})),o}return A(n,(function(t,e){"$"===e.charAt(0)&&(r[e]=t,Y(i)&&(i[e]=t))})),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationTrustedUrlList=function(t){return D(t)?(n.aHrefSanitizationTrustedUrlList(t),this):n.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return D(t)?(n.imgSrcSanitizationTrustedUrlList(t),this):n.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var g=!0;this.debugInfoEnabled=function(t){return D(t)?(g=t,this):g};var v=!1;this.strictComponentBindingsEnabled=function(t){return D(t)?(v=t,this):v};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var $=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?($=t,this):$};var w=Ot();this.addPropertySecurityContext=function(t,e,n){var i=t.toLowerCase()+"|"+e.toLowerCase();if(i in w&&w[i]!==n)throw fn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,w[i],n);return w[i]=n,this},function(){function t(t,e){A(e,(function(e){w[e.toLowerCase()]=t}))}t(Yi.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Yi.CSS,["*|style"]),t(Yi.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Yi.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Yi.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,d,f,B,C,S,E,T){var k,P=/^\w/,V=t.document.createElement("div"),j=x,D=$,R=b;function U(){try{if(!--R)throw k=void 0,fn("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);S.$apply((function(){for(var t=0,e=k.length;t<e;++t)try{k[t]()}catch(n){d(n)}k=void 0}))}finally{R++}}function N(t,e){if(!t)return t;if(!q(t))throw fn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",i=tt(t),r=/\s/.test(i)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=i.split(r),s=Math.floor(o.length/2),a=0;a<s;a++){var l=2*a;n+=E.getTrustedMediaUrl(tt(o[l])),n+=" "+tt(o[l+1])}var c=tt(o[2*a]).split(/\s/);return n+=E.getTrustedMediaUrl(tt(c[0])),2===c.length&&(n+=" "+tt(c[1])),n}function G(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function J(t,e){try{t.addClass(e)}catch(n){}}G.prototype={$normalize:xn,$addClass:function(t){t&&t.length>0&&T.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&T.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=$n(t,e);n&&n.length&&T.addClass(this.$$element,n);var i=$n(e,t);i&&i.length&&T.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r=Fe(this.$$element[0],t),o=Ie[t],s=t;r?(this.$$element.prop(t,e),i=r):o&&(this[o]=e,s=o),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=zt(t,"-")),"img"===it(this.$$element)&&"srcset"===t&&(this[t]=e=N(e,"$set('srcset', value)")),!1!==n&&(null===e||L(e)?this.$$element.removeAttr(i):P.test(i)?r&&!1===e?this.$$element.removeAttr(i):this.$$element.attr(i,e):function(t,e,n){V.innerHTML="<span "+e+">";var i=V.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var a=this.$$observers;a&&A(a[s],(function(t){try{t(e)}catch(n){d(n)}}))},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=Ot()),r=i[t]||(i[t]=[]);return r.push(e),S.$evalAsync((function(){r.$$inter||!n.hasOwnProperty(t)||L(n[t])||e(n[t])})),function(){ot(r,e)}}};var K=n.startSymbol(),Q=n.endSymbol(),et="{{"===K&&"}}"===Q?F:function(t){return t.replace(/\{\{/g,K).replace(/}}/g,Q)},nt=/^ng(Attr|Prop|On)([A-Z].*)$/,rt=/^(.+)Start$/;return st.$$addBindingInfo=g?function(t,e){var n=t.data("$binding")||[];W(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:I,st.$$addBindingClass=g?function(t){J(t,"ng-binding")}:I,st.$$addScopeInfo=g?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:I,st.$$addScopeClass=g?function(t,e){J(t,e?"ng-isolate-scope":"ng-scope")}:I,st.$$createComment=function(e,n){var i="";return g&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},st;function st(t,e,n,i,r){t instanceof s||(t=s(t));var o=ct(t,e,t,n,i,r);st.$$addScopeClass(t);var a=null;return function(e,n,i){if(!t)throw fn("multilink","This element has already been linked.");Vt(e,"scope"),r&&r.needsNewScope&&(e=e.$parent.$new());var l,c,u,h=(i=i||{}).parentBoundTranscludeFn,m=i.transcludeControllers,p=i.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),a||(c=(l=p)&&l[0],a=c&&"foreignobject"!==it(c)&&_.call(c).match(/SVG/)?"svg":"html"),u="html"!==a?s(Et(a,s("<div></div>").append(t).html())):n?ke.clone.call(t):t,m)for(var d in m)u.data("$"+d+"Controller",m[d].instance);return st.$$addScopeInfo(u,e),n&&n(u,e),o&&o(e,u,u,h),n||(t=o=null),u}}function ct(t,e,n,i,r,a){for(var l,c,u,h,m,p,d,f=[],y=W(t)||t instanceof s,_=0;_<t.length;_++)l=new G,11===o&&ut(t,_,y),(u=(c=dt(t[_],[],l,0===_?i:void 0,r)).length?gt(c,t[_],l,e,n,null,[],[],a):null)&&u.scope&&st.$$addScopeClass(l.$$element),m=u&&u.terminal||!(h=t[_].childNodes)||!h.length?null:ct(h,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||m)&&(f.push(_,u,m),p=!0,d=d||u),a=null;return p?function(t,n,i,r){var o,a,l,c,u,h,m,p,y;if(d){var _=n.length;for(y=new Array(_),u=0;u<f.length;u+=3)m=f[u],y[m]=n[m]}else y=n;for(u=0,h=f.length;u<h;)l=y[f[u++]],o=f[u++],a=f[u++],o?(o.scope?(c=t.$new(),st.$$addScopeInfo(s(l),c)):c=t,p=o.transcludeOnThisElement?ht(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?ht(t,e):null,o(a,c,l,i,p)):a&&a(t,l.childNodes,void 0,r)}:null}function ut(t,e,n){var i,r=t[e],o=r.parentNode;if(r.nodeType===qt)for(;(i=o?r.nextSibling:t[e+1])&&i.nodeType===qt;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===t[e+1]&&t.splice(e+1,1)}function ht(t,e,n){function i(i,r,o,s,a){return i||((i=t.$new(!1,a)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var r=i.$$slots=Ot();for(var o in e.$$slots)e.$$slots[o]?r[o]=ht(t,e.$$slots[o],n):r[o]=null;return i}function dt(t,e,i,r,o){var s,c,u,h=t.nodeType,m=i.$attr;switch(h){case 1:$t(e,xn(c=it(t)),"E",r,o);for(var p,d,f,y,_,g=t.attributes,v=0,b=g&&g.length;v<b;v++){var x,$=!1,A=!1,w=!1,B=!1,C=!1;d=(p=g[v]).name,y=p.value,(_=(f=xn(d.toLowerCase())).match(nt))?(w="Attr"===_[1],B="Prop"===_[1],C="On"===_[1],d=d.replace(vn,"").toLowerCase().substr(4+_[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(x=f.match(rt))&&At(x[1])&&($=d,A=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),B||C?(i[f]=y,m[f]=p.name,B?Tt(t,e,f,d):kt(e,f,d)):(m[f=xn(d.toLowerCase())]=d,!w&&i.hasOwnProperty(f)||(i[f]=y,Fe(t,f)&&(i[f]=!0)),Pt(t,e,y,f,w),$t(e,f,"A",r,o,$,A))}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!D)break;if(O(u=t.className)&&(u=u.animVal),q(u)&&""!==u)for(;s=l.exec(u);)$t(e,f=xn(s[2]),"C",r,o)&&(i[f]=tt(s[3])),u=u.substr(s.index+s[0].length);break;case qt:!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&st.$$addBindingClass(e),function(t,e){var r=e.parent();n||st.$$addBindingClass(r),st.$$addBindingInfo(r,i.expressions),t.$watch(i,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!j)break;!function(t,e,n,i,r){try{var o=a.exec(t.nodeValue);if(o){var s=xn(o[1]);$t(e,s,"M",i,r)&&(n[s]=tt(o[2]))}}catch(l){}}(t,e,i,r,o)}return e.sort(Ct),e}function ft(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw fn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return s(i)}function yt(t,e,n){return function(i,r,o,s,a){return r=ft(r[0],e,n),t(i,r,o,s,a)}}function _t(t,e,n,i,r,o){var s;return t?st(e,n,i,r,o):function(){return s||(s=st(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function gt(e,n,i,r,o,a,l,c,u){u=u||{};for(var h,m,p,f,y,_=-Number.MAX_VALUE,g=u.newScopeDirective,v=u.controllerDirectives,b=u.newIsolateScopeDirective,x=u.templateDirective,$=u.nonTlbTranscludeDirective,w=!1,B=!1,S=u.hasElementTranscludeDirective,E=i.$$element=s(n),T=a,k=r,P=!1,z=!1,I=0,F=e.length;I<F;I++){var V=(h=e[I]).$$start,j=h.$$end;if(V&&(E=ft(n,V,j)),p=void 0,_>h.priority)break;if((y=h.scope)&&(h.templateUrl||(O(y)?(St("new/isolated scope",b||g,h,E),b=h):St("new/isolated scope",b,h,E)),g=g||h),m=h.name,!P&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var D,R=I+1;D=e[R++];)if(D.transclude&&!D.$$tlb||D.replace&&(D.templateUrl||D.template)){z=!0;break}P=!0}if(!h.templateUrl&&h.controller&&(v=v||Ot(),St("'"+m+"' controller",v[m],h,E),v[m]=h),y=h.transclude)if(w=!0,h.$$tlb||(St("transclusion",$,h,E),$=h),"element"===y)S=!0,_=h.priority,p=E,E=i.$$element=s(st.$$createComment(m,i[m])),n=E[0],It(o,mt(p),n),k=_t(z,p,r,_,T&&T.name,{nonTlbTranscludeDirective:$});else{var q=Ot();if(O(y)){p=t.document.createDocumentFragment();var U=Ot(),N=Ot();for(var H in A(y,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,U[t]=e,q[e]=null,N[e]=n})),A(E.contents(),(function(e){var n=U[xn(it(e))];n?(N[n]=!0,q[n]=q[n]||t.document.createDocumentFragment(),q[n].appendChild(e)):p.appendChild(e)})),A(N,(function(t,e){if(!t)throw fn("reqslot","Required transclusion slot `{0}` was not filled.",e)})),q)if(q[H]){var J=s(q[H].childNodes);q[H]=_t(z,J,r)}p=s(p.childNodes)}else p=s(de(n)).contents();E.empty(),(k=_t(z,p,r,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=q}if(h.template)if(B=!0,St("template",x,h,E),x=h,y=Y(h.template)?h.template(E,i):h.template,y=et(y),h.replace){if(T=h,p=ce(y)?[]:An(Et(h.templateNamespace,tt(y))),n=p[0],1!==p.length||1!==n.nodeType)throw fn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");It(o,E,n);var X={$attr:{}},K=dt(n,[],X),Q=e.splice(I+1,e.length-(I+1));(b||g)&&bt(K,b,g),e=e.concat(K).concat(Q),wt(i,X),F=e.length}else E.html(y);if(h.templateUrl)B=!0,St("template",x,h,E),x=h,h.replace&&(T=h),ot=Bt(e.splice(I,e.length-I),E,i,o,w&&k,l,c,{controllerDirectives:v,newScopeDirective:g!==h&&g,newIsolateScopeDirective:b,templateDirective:x,nonTlbTranscludeDirective:$}),F=e.length;else if(h.compile)try{f=h.compile(E,i,k);var nt=h.$$originalDirective||h;Y(f)?rt(null,pt(nt,f),V,j):f&&rt(pt(nt,f.pre),pt(nt,f.post),V,j)}catch(at){d(at,xt(E))}h.terminal&&(ot.terminal=!0,_=Math.max(_,h.priority))}return ot.scope=g&&!0===g.scope,ot.transcludeOnThisElement=w,ot.templateOnThisElement=B,ot.transclude=k,u.hasElementTranscludeDirective=S,ot;function rt(t,e,n,i){t&&(n&&(t=yt(t,n,i)),t.require=h.require,t.directiveName=m,(b===h||h.$$isolateScope)&&(t=Ft(t,{isolateScope:!0})),l.push(t)),e&&(n&&(e=yt(e,n,i)),e.require=h.require,e.directiveName=m,(b===h||h.$$isolateScope)&&(e=Ft(e,{isolateScope:!0})),c.push(e))}function ot(t,e,r,o,a){var u,h,m,p,f,y,_,$,w,B;for(var E in n===r?(w=i,$=i.$$element):w=new G($=s(r),i),f=e,b?p=e.$new(!0):g&&(f=e.$parent),a&&((_=function(t,e,n,i){var r;Z(t)||(i=n,n=e,e=t,t=void 0);S&&(r=y);n||(n=S?$.parent():$);if(!i)return a(t,e,r,n,z);var o=a.$$slots[i];if(o)return o(t,e,r,n,z);if(L(o))throw fn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,xt($))}).$$boundTransclude=a,_.isSlotFilled=function(t){return!!a.$$slots[t]}),v&&(y=function(t,e,n,i,r,o,s){var a=Ot();for(var l in i){var c=i[l],u={$scope:c===s||c.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=c.controller;"@"===h&&(h=e[c.name]);var m=C(h,u,!0,c.controllerAs);a[c.name]=m,t.data("$"+c.name+"Controller",m.instance)}return a}($,w,_,v,p,e,b)),b&&(st.$$addScopeInfo($,p,!0,!(x&&(x===b||x===b.$$originalDirective))),st.$$addScopeClass($,!0),p.$$isolateBindings=b.$$isolateBindings,(B=Dt(e,w,p,p.$$isolateBindings,b)).removeWatches&&p.$on("$destroy",B.removeWatches)),y){var T=v[E],k=y[E],P=T.$$bindings.bindToController;k.instance=k(),$.data("$"+T.name+"Controller",k.instance),k.bindingInfo=Dt(f,w,k.instance,P,T)}for(A(v,(function(t,e){var n=t.require;t.bindToController&&!W(n)&&O(n)&&M(y[e].instance,vt(e,n,$,y))})),A(y,(function(t){var e=t.instance;if(Y(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(at){d(at)}if(Y(e.$onInit))try{e.$onInit()}catch(at){d(at)}Y(e.$doCheck)&&(f.$watch((function(){e.$doCheck()})),e.$doCheck()),Y(e.$onDestroy)&&f.$on("$destroy",(function(){e.$onDestroy()}))})),u=0,h=l.length;u<h;u++)jt(m=l[u],m.isolateScope?p:e,$,w,m.require&&vt(m.directiveName,m.require,$,y),_);var z=e;for(b&&(b.template||null===b.templateUrl)&&(z=p),t&&t(z,r.childNodes,void 0,a),u=c.length-1;u>=0;u--)jt(m=c[u],m.isolateScope?p:e,$,w,m.require&&vt(m.directiveName,m.require,$,y),_);A(y,(function(t){var e=t.instance;Y(e.$postLink)&&e.$postLink()}))}}function vt(t,e,n,i){var r;if(q(e)){var o=e.match(u),s=e.substring(o[0].length),a=o[1]||o[3],l="?"===o[2];if("^^"===a?n=n.parent():r=(r=i&&i[s])&&r.instance,!r){var c="$"+s+"Controller";r="^^"===a&&n[0]&&9===n[0].nodeType?null:a?n.inheritedData(c):n.data(c)}if(!r&&!l)throw fn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(W(e)){r=[];for(var h=0,m=e.length;h<m;h++)r[h]=vt(t,e[h],n,i)}else O(e)&&(r={},A(e,(function(e,o){r[o]=vt(t,e,n,i)})));return r||null}function bt(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=z(t[i],{$$isolateScope:e,$$newScope:n})}function $t(t,n,o,s,a,l,c){if(n===a)return null;var u=null;if(i.hasOwnProperty(n))for(var h,m=e.get(n+r),p=0,d=m.length;p<d;p++)if(h=m[p],(L(s)||s>h.priority)&&-1!==h.restrict.indexOf(o)){if(l&&(h=z(h,{$$start:l,$$end:c})),!h.$$bindings){var f=h.$$bindings=y(h,h.name);O(f.isolateScope)&&(h.$$isolateBindings=f.isolateScope)}t.push(h),u=h}return u}function At(t){if(i.hasOwnProperty(t))for(var n=e.get(t+r),o=0,s=n.length;o<s;o++)if(n[o].multiElement)return!0;return!1}function wt(t,e){var n=e.$attr,i=t.$attr;A(t,(function(i,r){"$"!==r.charAt(0)&&(e[r]&&e[r]!==i&&(i.length?i+=("style"===r?";":" ")+e[r]:i=e[r]),t.$set(r,i,!0,n[r]))})),A(e,(function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))}))}function Bt(t,e,n,i,r,o,a,l){var c,u,h=[],m=e[0],p=t.shift(),y=z(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),_=Y(p.templateUrl)?p.templateUrl(e,n):p.templateUrl,g=p.templateNamespace;return e.empty(),f(_).then((function(d){var f,v,b,x;if(d=et(d),p.replace){if(b=ce(d)?[]:An(Et(g,tt(d))),f=b[0],1!==b.length||1!==f.nodeType)throw fn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,_);v={$attr:{}},It(i,e,f);var $=dt(f,[],v);O(p.scope)&&bt($,!0),t=$.concat(t),wt(n,v)}else f=m,e.html(d);for(t.unshift(y),c=gt(t,f,n,r,e,p,o,a,l),A(i,(function(t,n){t===f&&(i[n]=e[0])})),u=ct(e[0].childNodes,r);h.length;){var w=h.shift(),B=h.shift(),C=h.shift(),S=h.shift(),E=e[0];if(!w.$$destroyed){if(B!==m){var M=B.className;l.hasElementTranscludeDirective&&p.replace||(E=de(f)),It(C,s(B),E),J(s(E),M)}x=c.transcludeOnThisElement?ht(w,c.transclude,S):S,c(u,w,E,i,x)}}h=null})).catch((function(t){H(t)&&d(t)})),function(t,e,n,i,r){var o=r;e.$$destroyed||(h?h.push(e,n,i,o):(c.transcludeOnThisElement&&(o=ht(e,c.transclude,r)),c(u,e,n,i,o)))}}function Ct(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function St(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw fn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,xt(i))}function Et(e,n){switch(e=m(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Mt(t){return N(E.valueOf(t),"ng-prop-srcset")}function Tt(t,e,n,i){if(p.test(i))throw fn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var r=it(t),o=function(t,e){var n=e.toLowerCase();return w[t+"|"+n]||w["*|"+n]}(r,i),s=F;"srcset"!==i||"img"!==r&&"source"!==r?o&&(s=E.getTrusted.bind(E,o)):s=Mt,e.push({priority:100,compile:function(t,e){var r=B(e[n]),o=B(e[n],(function(t){return E.valueOf(t)}));return{pre:function(t,e){function n(){var n=r(t);e[0][i]=s(n)}n(),t.$watch(o,n)}}}})}function kt(t,e,n){t.push(jo(B,S,d,e,n,!1))}function Pt(t,e,i,r,o){var s=it(t),a=function(t,e){return"srcdoc"===e?E.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?E.RESOURCE_URL:E.MEDIA_URL:"xlinkHref"===e?"image"===t?E.MEDIA_URL:"a"===t?E.URL:E.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?E.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:E.URL}(s,r),l=!o,u=c[r]||o,h=n(i,l,a,u);if(h){if("multiple"===r&&"select"===s)throw fn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",xt(t));if(p.test(r))throw fn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Ot()),l=o[r];l!==i&&(h=l&&n(l,!0,a,u),i=l),h&&(o[r]=h(t),(s[r]||(s[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||t).$watch(h,(function(t,e){"class"===r&&t!==e?o.$updateClass(t,e):o.$set(r,t)})))}}}})}}function It(e,n,i){var r,o,a=n[0],l=n.length,c=a.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]===a){e[r++]=i;for(var u=r,h=u+l-1,m=e.length;u<m;u++,h++)h<m?e[u]=e[h]:delete e[u];e.length-=l-1,e.context===a&&(e.context=i);break}c&&c.replaceChild(i,a);var p=t.document.createDocumentFragment();for(r=0;r<l;r++)p.appendChild(n[r]);for(s.hasData(a)&&(s.data(i,s.data(a)),s(a).off("$destroy")),s.cleanData(p.querySelectorAll("*")),r=1;r<l;r++)delete n[r];n[0]=i,n.length=1}function Ft(t,e){return M((function(){return t.apply(null,arguments)}),t,e)}function jt(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(s){d(s,xt(n))}}function Lt(t,e){if(v)throw fn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Dt(t,e,i,r,o){var s,a=[],l={};function c(e,n,r){Y(i.$onChanges)&&!at(n,r)&&(k||(t.$$postDigest(U),k=[]),s||(s={},k.push(u)),s[e]&&(r=s[e].previousValue),s[e]=new gn(r,n))}function u(){i.$onChanges(s),s=void 0}return A(r,(function(r,s){var u,m,p,d,f,y=r.attrName,_=r.optional;switch(r.mode){case"@":_||h.call(e,y)||(Lt(y,o.name),i[s]=e[y]=void 0),f=e.$observe(y,(function(t){if(q(t)||X(t)){var e=i[s];c(s,t,e),i[s]=t}})),e.$$observers[y].$$scope=t,q(u=e[y])?i[s]=n(u)(t):X(u)&&(i[s]=u),l[s]=new gn(yn,i[s]),a.push(f);break;case"=":if(!h.call(e,y)){if(_)break;Lt(y,o.name),e[y]=void 0}if(_&&!e[y])break;m=B(e[y]),d=m.literal?lt:at,p=m.assign||function(){throw u=i[s]=m(t),fn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[y],y,o.name)},u=i[s]=m(t);var g=function(e){return d(e,i[s])||(d(e,u)?p(t,e=i[s]):i[s]=e),u=e};g.$stateful=!0,f=r.collection?t.$watchCollection(e[y],g):t.$watch(B(e[y],g),null,m.literal),a.push(f);break;case"<":if(!h.call(e,y)){if(_)break;Lt(y,o.name),e[y]=void 0}if(_&&!e[y])break;var v=(m=B(e[y])).literal,b=i[s]=m(t);l[s]=new gn(yn,i[s]),f=t[r.collection?"$watchCollection":"$watch"](m,(function(t,e){if(e===t){if(e===b||v&&lt(e,b))return;e=b}c(s,t,e),i[s]=t})),a.push(f);break;case"&":if(_||h.call(e,y)||Lt(y,o.name),(m=e.hasOwnProperty(y)?B(e[y]):I)===I&&_)break;i[s]=function(e){return m(t,e)}}})),{initialChanges:l,removeWatches:a.length&&function(){for(var t=0,e=a.length;t<e;++t)a[t]()}}}}]}function gn(t,e){this.previousValue=t,this.currentValue=e}_n.$inject=["$provide","$$sanitizeUriProvider"],gn.prototype.isFirstChange=function(){return this.previousValue===yn};var vn=/^((?:x|data)[:\-_])/i,bn=/[:\-_]+(.)/g;function xn(t){return t.replace(vn,"").replace(bn,(function(t,e,n){return n?e.toUpperCase():e}))}function $n(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s===r[a])continue t;n+=(n.length>0?" ":"")+s}return n}function An(t){var e=(t=s(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===qt&&""===n.nodeValue.trim())&&f.call(t,e,1)}return t}var wn=r("$controller"),Bn=/^(\S+)(\s+as\s+([\w$]+))?$/;function Cn(t,e){if(e&&q(e))return e;if(q(t)){var n=Bn.exec(t);if(n)return n[3]}}function Sn(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Lt(e,"controller"),O(e)?M(t,e):t[e]=n},this.$get=["$injector",function(e){return function(i,r,o,s){var a,l,c,u;if(o=!0===o,s&&q(s)&&(u=s),q(i)){if(!(l=i.match(Bn)))throw wn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(c=l[1],u=u||l[3],!(i=t.hasOwnProperty(c)?t[c]:function(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t&&(t=(o=t)[i]);return!n&&Y(t)?pt(o,t):t}(r.$scope,c,!0)))throw wn("ctrlreg","The controller with the name '{0}' is not registered.",c);jt(i,c,!0)}if(o){var h=(W(i)?i[i.length-1]:i).prototype;return a=Object.create(h||null),u&&n(r,u,a,c||i.name),M((function(){var t=e.invoke(i,a,r,c);return t!==a&&(O(t)||Y(t))&&(a=t,u&&n(r,u,a,c||i.name)),a}),{instance:a,identifier:u})}return a=e.instantiate(i,r,c),u&&n(r,u,a,c||i.name),a};function n(t,e,n,i){if(!t||!O(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}}]}function En(){this.$get=["$window",function(t){return s(t.document)}]}function Mn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],i=n&&n.hidden;function r(){i=n.hidden}return t.on("visibilitychange",r),e.$on("$destroy",(function(){t.off("visibilitychange",r)})),function(){return i}}]}function Tn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var kn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof s&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Pn="application/json",zn={"Content-Type":"application/json;charset=utf-8"},In=/^\[|^\{(?!\{)/,Fn={"[":/]$/,"{":/}$/},Vn=/^\)]\}',?\n/,jn=r("$http");function Ln(t){return O(t)?N(t)?t.toISOString():ft(t):t}function Dn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return w(t,(function(t,n){null===t||L(t)||Y(t)||(W(t)?A(t,(function(t){e.push(Bt(n)+"="+Bt(Ln(t)))})):e.push(Bt(n)+"="+Bt(Ln(t))))})),e.join("&")}}}function On(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){W(n)?A(n,(function(e,n){t(e,i+"["+(O(e)?n:"")+"]")})):O(n)&&!N(n)?w(n,(function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))})):(Y(n)&&(n=n()),e.push(Bt(i)+"="+(null==n?"":Bt(Ln(n)))))}(t,"",!0),e.join("&")}}}function Rn(t,e){if(q(t)){var n=t.replace(Vn,"").trim();if(n){var i=e("Content-Type"),r=i&&0===i.indexOf(Pn);if(r||(s=(o=n).match(In))&&Fn[s[0]].test(o))try{t=yt(n)}catch(a){if(!r)return t;throw jn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,a)}}}var o,s;return t}function qn(t){var e,n=Ot();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return q(t)?A(t.split("\n"),(function(t){e=t.indexOf(":"),i(m(tt(t.substr(0,e))),tt(t.substr(e+1)))})):O(t)&&A(t,(function(t,e){i(m(e),tt(t))})),n}function Un(t){var e;return function(n){if(e||(e=qn(t)),n){var i=e[m(n)];return void 0===i&&(i=null),i}return e}}function Nn(t,e,n,i){return Y(i)?i(t,e,n):(A(i,(function(i){t=i(t,e,n)})),t)}function Wn(t){return 200<=t&&t<300}function Hn(){var t=this.defaults={transformResponse:[Rn],transformRequest:[function(t){return!O(t)||(e=t,"[object File]"===_.call(e))||function(t){return"[object Blob]"===_.call(t)}(t)||function(t){return"[object FormData]"===_.call(t)}(t)?t:ft(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ut(zn),put:Ut(zn),patch:Ut(zn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return D(t)?(e=!!t,this):e};var n=this.interceptors=[],i=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,s,a,l,c,u,h,d){var f=l("$http");t.paramSerializer=q(t.paramSerializer)?h.get(t.paramSerializer):t.paramSerializer;var y=[];A(n,(function(t){y.unshift(q(t)?h.get(t):h.invoke(t))}));var _,g=(_=[cr].concat(i.map(hr)),function(t){var e=hr(t);return _.some(mr.bind(null,e))});function v(n){if(!O(n))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!q(d.valueOf(n.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var i=M({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);i.headers=function(e){var n,i,r,o=t.headers,s=M({},e.headers);o=M({},o.common,o[m(e.method)]);t:for(n in o){for(r in i=m(n),s)if(m(r)===i)continue t;s[n]=o[n]}return function(t,e){var n,i={};return A(t,(function(t,r){Y(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t})),i}(s,Ut(e))}(n),i.method=p(i.method),i.paramSerializer=q(i.paramSerializer)?h.get(i.paramSerializer):i.paramSerializer,o.$$incOutstandingRequestCount("$http");var l=[],_=[],b=u.resolve(i);return A(y,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&_.push(t.response,t.responseError)})),b=(b=x(b,l)).then((function(n){var i=n.headers,r=Nn(n.data,Un(i),void 0,n.transformRequest);L(r)&&A(i,(function(t,e){"content-type"===m(e)&&delete i[e]}));L(n.withCredentials)&&!L(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,i){var r,o,l=u.defer(),h=l.promise,p=n.headers,y="jsonp"===m(n.method),_=n.url;y?_=d.getTrustedResourceUrl(_):q(_)||(_=d.valueOf(_));_=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(_,n.paramSerializer(n.params)),y&&(_=function(t,e){var n=t.split("?");if(n.length>2)throw jn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return A(At(n[1]),(function(n,i){if("JSON_CALLBACK"===n)throw jn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(i===e)throw jn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(_,n.jsonpCallbackParam));v.pendingRequests.push(n),h.then(C,C),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(r=O(n.cache)?n.cache:O(t.cache)?t.cache:f);r&&(D(o=r.get(_))?K(o)?o.then(B,B):W(o)?w(o[1],o[0],Ut(o[2]),o[3],o[4]):w(o,200,{},"OK","complete"):r.put(_,h));if(L(o)){var b=g(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(p[n.xsrfHeaderName||t.xsrfHeaderName]=b),s(n.method,_,i,$,p,n.timeout,n.withCredentials,n.responseType,x(n.eventHandlers),x(n.uploadEventHandlers))}return h;function x(t){if(t){var n={};return A(t,(function(t,i){n[i]=function(n){function i(){t(n)}e?c.$applyAsync(i):c.$$phase?i():c.$apply(i)}})),n}}function $(t,n,i,o,s){function a(){w(n,t,i,o,s)}r&&(Wn(t)?r.put(_,[t,n,qn(i),o,s]):r.remove(_)),e?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function w(t,e,i,r,o){(Wn(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Un(i),config:n,statusText:r,xhrStatus:o})}function B(t){w(t.data,t.status,Ut(t.headers()),t.statusText,t.xhrStatus)}function C(){var t=v.pendingRequests.indexOf(n);-1!==t&&v.pendingRequests.splice(t,1)}}(n,r).then($,$)})),b=(b=x(b,_)).finally((function(){o.$$completeOutstandingRequest(I,"$http")}));function x(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function $(t){var e=M({},t);return e.data=Nn(t.data,t.headers,t.status,i.transformResponse),Wn(t.status)?e:u.reject(e)}}return v.pendingRequests=[],function(t){A(arguments,(function(t){v[t]=function(e,n){return v(M({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){A(arguments,(function(t){v[t]=function(e,n,i){return v(M({},i||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),v.defaults=t,v}]}function Yn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Gn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(r,s,a,l,c,u,h,p,d,f){if(s=s||t.url(),"jsonp"===m(r))var y=i.createCallback(s),_=o(s,y,(function(t,e){var n=200===t&&i.getResponse(y);C(l,t,n,"",e,"complete"),i.removeCallback(y)}));else{var g=e(r,s),v=!1;g.open(r,s,!0),A(c,(function(t,e){D(t)&&g.setRequestHeader(e,t)})),g.onload=function(){var t=g.statusText||"",e="response"in g?g.response:g.responseText,n=1223===g.status?204:g.status;0===n&&(n=e?200:"file"===hr(s).protocol?404:0),C(l,n,e,g.getAllResponseHeaders(),t,"complete")};var b=function(){C(l,-1,null,null,"","error")},x=function(){C(l,-1,null,null,"",v?"timeout":"abort")},$=function(){C(l,-1,null,null,"","timeout")};if(g.onerror=b,g.ontimeout=$,g.onabort=x,A(d,(function(t,e){g.addEventListener(e,t)})),A(f,(function(t,e){g.upload.addEventListener(e,t)})),h&&(g.withCredentials=!0),p)try{g.responseType=p}catch(S){if("json"!==p)throw S}g.send(L(a)?null:a)}if(u>0)var w=n((function(){B("timeout")}),u);else K(u)&&u.then((function(){B(D(u.$$timeoutId)?"timeout":"abort")}));function B(t){v="timeout"===t,_&&_(),g&&g.abort()}function C(t,e,i,r,o,s){D(w)&&n.cancel(w),_=g=null,t(e,i,r,o,s)}};function o(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){o.removeEventListener("load",s),o.removeEventListener("error",s),r.body.removeChild(o),o=null;var a=-1,l="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),l=t.type,a="error"===t.type?404:200),n&&n(a,l)},o.addEventListener("load",s),o.addEventListener("error",s),r.body.appendChild(o),s}}(t,i,t.defer,e,n[0])}]}var Jn=b.$interpolateMinErr=r("$interpolate");function Zn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,s=e.length,a=new RegExp(t.replace(/./g,c),"g"),l=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function u(n){return n.replace(a,t).replace(l,e)}function h(t,e,n,i){var r=t.$watch((function(t){return r(),i(t)}),e,n);return r}function m(a,l,c,m){var p=c===r.URL||c===r.MEDIA_URL;if(!a.length||-1===a.indexOf(t)){if(l)return;var d=u(a);p&&(d=r.getTrusted(c,d));var f=V(d);return f.exp=a,f.expressions=[],f.$$watchDelegate=h,f}m=!!m;for(var y,_,g,v,b,x=0,$=[],A=a.length,w=[],B=[];x<A;){if(-1===(y=a.indexOf(t,x))||-1===(_=a.indexOf(e,y+o))){x!==A&&w.push(u(a.substring(x)));break}x!==y&&w.push(u(a.substring(x,y))),v=a.substring(y+o,_),$.push(v),x=_+s,B.push(w.length),w.push("")}b=1===w.length&&1===B.length;var C=p&&b?void 0:function(t){try{return t=c&&!p?r.getTrusted(c,t):r.valueOf(t),m&&!D(t)?t:Rt(t)}catch(e){i(Jn.interr(a,e))}};if(g=$.map((function(t){return n(t,C)})),!l||$.length){var S=function(t){for(var e=0,n=$.length;e<n;e++){if(m&&L(t[e]))return;w[B[e]]=t[e]}return p?r.getTrusted(c,b?w[0]:w.join("")):(c&&w.length>1&&Jn.throwNoconcat(a),w.join(""))};return M((function(t){var e=0,n=$.length,r=new Array(n);try{for(;e<n;e++)r[e]=g[e](t);return S(r)}catch(o){i(Jn.interr(a,o))}}),{exp:a,expressions:$,$$watchDelegate:function(t,e){var n;return t.$watchGroup(g,(function(i,r){var o=S(i);e.call(this,o,i!==r?n:o,t),n=o}))}})}}return m.startSymbol=function(){return t},m.endSymbol=function(){return e},m}]}Jn.throwNoconcat=function(t){throw Jn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Jn.interr=function(t,e){return Jn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Xn=r("$interval");function Kn(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},i=function(t){e.clearInterval(t),delete n[t]},r=t((function(t,i,r){var o=e.setInterval(t,i);return n[o]=r,o}),i);return r.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Xn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,r=n[e];return qi(r.promise),r.reject("canceled"),i(e),!0},r}]}function Qn(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,i){return function(r,o){return function(s,a,l,c){var u=arguments.length>4,h=u?mt(arguments,4):[],m=0,p=D(c)&&!c,d=(p?n:e).defer(),f=d.promise;function y(){u?s.apply(null,h):s(m)}function _(){p?t.defer(y):i.$evalAsync(y),d.notify(m++),l>0&&m>=l&&(d.resolve(m),o(f.$$intervalId)),p||i.$apply()}return l=D(l)?l:0,f.$$intervalId=r(_,a,d,p),f}}}]}var ti=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(n){var i="_"+(t.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return e[r]=t[i]=o,r},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var i=e[n];delete t[i.id],delete e[n]}}}},ei=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ni={http:80,https:443,ftp:21},ii=r("$location");function ri(t,e,n){var i,r=(i=[],A(e,(function(t,e){W(t)?A(t,(function(t){i.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})):i.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})),i.length?i.join("&"):""),o=n?"#"+wt(n):"";return function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=wt(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(r?"?"+r:"")+o}function oi(t,e){var n=hr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=k(n.port)||ni[n.protocol]||null}var si=/^\s*[\\/]{2,}/;function ai(t,e,n){if(si.test(t))throw ii("badpath",'Invalid url "{0}".',t);var i="/"!==t.charAt(0);i&&(t="/"+t);var r=hr(t),o=i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname;e.$$path=function(t,e){for(var n=t.split("/"),i=n.length;i--;)n[i]=decodeURIComponent(n[i]),e&&(n[i]=n[i].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=At(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function li(t,e){return t.slice(0,e.length)===e}function ci(t,e){if(li(e,t))return e.substr(t.length)}function ui(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function hi(t,e,n){this.$$html5=!0,n=n||"",oi(t,this),this.$$parse=function(t){var n=ci(e,t);if(!q(n))throw ii("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);ai(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(D(o=ci(t,i))?(s=o,a=n&&D(o=ci(n,o))?e+(ci("/",o)||o):t+s):D(o=ci(e,i))?a=e+o:e===i+"/"&&(a=e),a&&this.$$parse(a),!!a);var o,s,a}}function mi(t,e,n){oi(t,this),this.$$parse=function(i){var r,o=ci(t,i)||ci(e,i);L(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",L(o)&&(t=i,this.replace())):L(r=ci(n,o))&&(r=o),ai(r,this,!1),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;li(e,n)&&(e=e.replace(n,""));if(r.exec(e))return t;return(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return ui(t)===ui(e)&&(this.$$parse(e),!0)}}function pi(t,e,n){this.$$html5=!0,mi.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t===ui(i)?o=i:(s=ci(e,i))?o=t+n+s:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,s},this.$$normalizeUrl=function(e){return t+n+e}}var di={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=ri(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:fi("$$absUrl"),url:function(t){if(L(t))return this.$$url;var e=ei.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:fi("$$protocol"),host:fi("$$host"),port:fi("$$port"),path:yi("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(q(t)||U(t))t=t.toString(),this.$$search=At(t);else{if(!O(t))throw ii("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");A(t=st(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:L(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:yi("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function fi(t){return function(){return this[t]}}function yi(t,e){return function(n){return L(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function _i(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return D(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):O(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||q(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){var l,c,u,h,m=i.baseHref(),p=i.url();if(e.enabled){if(!m&&e.requireBase)throw ii("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(h=p).substring(0,h.indexOf("/",h.indexOf("//")+2))+(m||"/"),c=r.history?hi:pi}else u=ui(p),c=mi;var d=function(t){return t.substr(0,ui(t).lastIndexOf("/")+1)}(u);(l=new c(u,d,"#"+t)).$$parseLinkUrl(p,p),l.$$state=i.state();var f=/^\s*(javascript|mailto):/i;function y(t,e,n){var r=l.url(),o=l.$$state;try{i.url(t,e,n),l.$$state=i.state()}catch(s){throw l.url(r),l.$$state=o,s}}o.on("click",(function(t){var r=e.rewriteLinks;if(r&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var a=s(t.target);"a"!==it(a[0]);)if(a[0]===o[0]||!(a=a.parent())[0])return;if(!q(r)||!L(a.attr(r))){var c=a.prop("href"),u=a.attr("href")||a.attr("xlink:href");O(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=hr(c.animVal).href),f.test(c)||!c||a.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(c,u)&&(t.preventDefault(),l.absUrl()!==i.url()&&n.$apply())}}})),l.absUrl()!==p&&i.url(l.absUrl(),!0);var _=!0;return i.onUrlChange((function(t,e){li(t,d)?(n.$evalAsync((function(){var i,r=l.absUrl(),o=l.$$state;l.$$parse(t),l.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,l.absUrl()===t&&(i?(l.$$parse(r),l.$$state=o,y(r,!1,o)):(_=!1,g(r,o)))})),n.$$phase||n.$digest()):a.location.href=t})),n.$watch((function(){if(_||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=i.url(),e=l.absUrl(),o=i.state(),s=l.$$replace,a=!((c=t)===(u=e)||hr(c).href===hr(u).href)||l.$$html5&&r.history&&o!==l.$$state;(_||a)&&(_=!1,n.$evalAsync((function(){var e=l.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(i?(l.$$parse(t),l.$$state=o):(a&&y(e,s,o===l.$$state?null:l.$$state),g(t,o)))})))}var c,u;l.$$replace=!1})),l;function g(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function gi(){var t=!0,e=this;this.debugEnabled=function(e){return D(e)?(t=e,this):t},this.$get=["$window",function(n){var i,r=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(i=a("debug"),function(){t&&i.apply(e,arguments)})};function s(t){return H(t)&&(t.stack&&r?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function a(t){var e=n.console||{},i=e[t]||e.log||I;return function(){var t=[];return A(arguments,(function(e){t.push(s(e))})),Function.prototype.apply.call(i,e,t)}}}]}A([pi,mi,hi],(function(t){t.prototype=Object.create(di),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==hi||!this.$$html5)throw ii("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=L(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var vi=r("$parse"),bi={}.constructor.prototype.valueOf;function xi(t){return t+""}var $i=Ot();A("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){$i[t]=!0}));var Ai={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wi=function(t){this.options=t};wi.prototype={constructor:wi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=$i[e],o=$i[n],s=$i[i];if(r||o||s){var a=s?i:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=D(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw vi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=m(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=Ai[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Bi=function(t,e){this.lexer=t,this.options=e};function Ci(t,e){return void 0!==t?t:e}function Si(t,e){return void 0===t?e:void 0===e?t:t+e}Bi.Program="Program",Bi.ExpressionStatement="ExpressionStatement",Bi.AssignmentExpression="AssignmentExpression",Bi.ConditionalExpression="ConditionalExpression",Bi.LogicalExpression="LogicalExpression",Bi.BinaryExpression="BinaryExpression",Bi.UnaryExpression="UnaryExpression",Bi.CallExpression="CallExpression",Bi.MemberExpression="MemberExpression",Bi.Identifier="Identifier",Bi.Literal="Literal",Bi.ArrayExpression="ArrayExpression",Bi.Property="Property",Bi.ObjectExpression="ObjectExpression",Bi.ThisExpression="ThisExpression",Bi.LocalsExpression="LocalsExpression",Bi.NGValueParameter="NGValueParameter",Bi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Bi.Program,body:t}},expressionStatement:function(){return{type:Bi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Ti(t))throw vi("lval","Trying to assign a value to a non l-value");t={type:Bi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Bi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Bi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Bi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Bi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Bi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=st(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Bi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Bi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Bi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Bi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Bi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Bi.Identifier,name:t.text}},constant:function(){return{type:Bi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Bi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Bi.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Bi.ObjectExpression,properties:e}},throwError:function(t,e){throw vi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw vi("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw vi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Bi.ThisExpression},$locals:{type:Bi.LocalsExpression}}};function Ei(t,e,n){var i,r,o,s=t.isPure=function(t,e){switch(t.type){case Bi.MemberExpression:if(t.computed)return!1;break;case Bi.UnaryExpression:return 1;case Bi.BinaryExpression:return"+"!==t.operator&&1;case Bi.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case Bi.Program:i=!0,A(t.body,(function(t){Ei(t.expression,e,s),i=i&&t.expression.constant})),t.constant=i;break;case Bi.Literal:t.constant=!0,t.toWatch=[];break;case Bi.UnaryExpression:Ei(t.argument,e,s),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Bi.BinaryExpression:Ei(t.left,e,s),Ei(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Bi.LogicalExpression:Ei(t.left,e,s),Ei(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Bi.ConditionalExpression:Ei(t.test,e,s),Ei(t.alternate,e,s),Ei(t.consequent,e,s),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Bi.Identifier:t.constant=!1,t.toWatch=[t];break;case Bi.MemberExpression:Ei(t.object,e,s),t.computed&&Ei(t.property,e,s),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Bi.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),i=o,r=[],A(t.arguments,(function(t){Ei(t,e,s),i=i&&t.constant,r.push.apply(r,t.toWatch)})),t.constant=i,t.toWatch=o?r:[t];break;case Bi.AssignmentExpression:Ei(t.left,e,s),Ei(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Bi.ArrayExpression:i=!0,r=[],A(t.elements,(function(t){Ei(t,e,s),i=i&&t.constant,r.push.apply(r,t.toWatch)})),t.constant=i,t.toWatch=r;break;case Bi.ObjectExpression:i=!0,r=[],A(t.properties,(function(t){Ei(t.value,e,s),i=i&&t.value.constant,r.push.apply(r,t.value.toWatch),t.computed&&(Ei(t.key,e,!1),i=i&&t.key.constant,r.push.apply(r,t.key.toWatch))})),t.constant=i,t.toWatch=r;break;case Bi.ThisExpression:case Bi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Mi(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function Ti(t){return t.type===Bi.Identifier||t.type===Bi.MemberExpression}function ki(t){if(1===t.body.length&&Ti(t.body[0].expression))return{type:Bi.AssignmentExpression,left:t.body[0].expression,right:{type:Bi.NGValueParameter},operator:"="}}function Pi(t){this.$filter=t}function zi(t){this.$filter=t}function Ii(t,e,n){this.ast=new Bi(t,n),this.astCompiler=n.csp?new zi(e):new Pi(e)}function Fi(t){return Y(t.valueOf)?t.valueOf():bi.call(t)}function Vi(){var t,e,n=Ot(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){i[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(r){var o={csp:ct().noUnsafeEval,literals:st(i),isIdentifierStart:Y(t)&&t,isIdentifierContinue:Y(e)&&e};return s.$$getAst=function(t){return new Ii(new wi(o),r,o).getAst(t).ast},s;function s(t,e){var i,s;switch(typeof t){case"string":if(t=t.trim(),!(i=n[s=t]))i=new Ii(new wi(o),r,o).parse(t),n[s]=m(i);return p(i,e);case"function":return p(t,e);default:return p(I,e)}}function a(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Fi(t))&&!n)&&(t===e||t!=t&&e!=e)}function l(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var l=a;return s=s[0],t.$watch((function(t){var e=s(t);return a(e,l,s.isPure)||(o=i(t,void 0,void 0,[e]),l=e&&Fi(e)),o}),e,n,r)}for(var c=[],u=[],h=0,m=s.length;h<m;h++)c[h]=a,u[h]=null;return t.$watch((function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var l=s[n](t);(e||(e=!a(l,c[n],s[n].isPure)))&&(u[n]=l,c[n]=l&&Fi(l))}return e&&(o=i(t,void 0,void 0,u)),o}),e,n,r)}function c(t,e,n,i,r){var o,s,a=i.literal?u:D,l=i.$$intercepted||i,c=i.$$interceptor||F,h=i.inputs&&!l.inputs;return d.literal=i.literal,d.constant=i.constant,d.inputs=i.inputs,m(d),o=t.$watch(d,e,n,r);function p(){a(s)&&o()}function d(t,e,n,i){return s=h&&i?i[0]:l(t,e,n,i),a(s)&&t.$$postDigest(p),c(s)}}function u(t){var e=!0;return A(t,(function(t){D(t)||(e=!1)})),e}function h(t,e,n,i){var r=t.$watch((function(t){return r(),i(t)}),e,n);return r}function m(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=l),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,i=function(i,r,o,s){var a=n&&s?s[0]:t(i,r,o,s);return e(a)};return i.$$intercepted=t,i.$$interceptor=e,i.literal=t.literal,i.oneTime=t.oneTime,i.constant=t.constant,e.$stateful||(n=!t.inputs,i.inputs=t.inputs?t.inputs:[t],e.$$pure||(i.inputs=i.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),m(i)}}]}function ji(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Di((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return D(e)?(t=e,this):t}}function Li(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Di((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return D(e)?(t=e,this):t}}function Di(t,e,n){var i=r("$q",TypeError),o=0,s=[];function a(){return new l}function l(){var t=this.promise=new c;this.resolve=function(e){m(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){y(t,e)}}function c(){this.$$state={status:0}}function u(){for(;!o&&s.length;){var t=s.shift();if(!Oi(t)){Ri(t);var n="Possibly unhandled rejection: "+Nt(t.value);H(t.value)?e(t.value,n):e(n)}}}function h(i){!n||i.pending||2!==i.status||Oi(i)||(0===o&&0===s.length&&t(u),s.push(i)),!i.processScheduled&&i.pending&&(i.processScheduled=!0,++o,t((function(){!function(i){var r,s,a;a=i.pending,i.processScheduled=!1,i.pending=void 0;try{for(var l=0,c=a.length;l<c;++l){Ri(i),s=a[l][0],r=a[l][i.status];try{Y(r)?m(s,r(i.value)):1===i.status?m(s,i.value):d(s,i.value)}catch(h){d(s,h),h&&!0===h.$$passToExceptionHandler&&e(h)}}}finally{--o,n&&0===o&&t(u)}}(i)})))}function m(t,e){t.$$state.status||(e===t?f(t,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):p(t,e))}function p(t,e){var n,i=!1;try{(O(e)||Y(e))&&(n=e.then),Y(n)?(t.$$state.status=-1,n.call(e,(function(e){if(i)return;i=!0,p(t,e)}),r,(function(e){y(t,e)}))):(t.$$state.value=e,t.$$state.status=1,h(t.$$state))}catch(o){r(o)}function r(e){i||(i=!0,f(t,e))}}function d(t,e){t.$$state.status||f(t,e)}function f(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function y(n,i){var r=n.$$state.pending;n.$$state.status<=0&&r&&r.length&&t((function(){for(var t,n,o=0,s=r.length;o<s;o++){n=r[o][0],t=r[o][3];try{y(n,Y(t)?t(i):i)}catch(a){e(a)}}}))}function _(t){var e=new c;return d(e,t),e}function g(t,e,n){var i=null;try{Y(n)&&(i=n())}catch(r){return _(r)}return K(i)?i.then((function(){return e(t)}),_):e(t)}function v(t,e,n,i){var r=new c;return m(r,t),r.then(e,n,i)}M(c.prototype,{then:function(t,e,n){if(L(t)&&L(e)&&L(n))return this;var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&h(this.$$state),i},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return g(e,b,t)}),(function(e){return g(e,_,t)}),e)}});var b=v;function x(t){if(!Y(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new c;return t((function(t){m(e,t)}),(function(t){d(e,t)})),e}return x.prototype=c.prototype,x.defer=a,x.reject=_,x.when=v,x.resolve=b,x.all=function(t){var e=new c,n=0,i=W(t)?[]:{};return A(t,(function(t,r){n++,v(t).then((function(t){i[r]=t,--n||m(e,i)}),(function(t){d(e,t)}))})),0===n&&m(e,i),e},x.race=function(t){var e=a();return A(t,(function(t){v(t).then(e.resolve,e.reject)})),e.promise},x}function Oi(t){return!!t.pur}function Ri(t){t.pur=!0}function qi(t){t.$$state&&Ri(t.$$state)}function Ui(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Ni(){var t=10,e=r("$rootScope"),n=null,i=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,s,a){function l(t){t.currentScope.$$destroyed=!0}function c(t){9===o&&(t.$$childHead&&c(t.$$childHead),t.$$nextSibling&&c(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function u(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var n;return e=e||this,t?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",l),n},$watch:function(t,e,i,r){var o=s(t),a=Y(e)?e:I;if(o.$$watchDelegate)return o.$$watchDelegate(this,a,i,o,t);var l=this,c=l.$$watchers,u={fn:a,last:x,get:o,exp:r||t,eq:!!i};return n=null,c||((c=l.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(u),c.$$digestWatchIndex++,v(this,1),function(){var t=ot(c,u);t>=0&&(v(l,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,s=!1,a=!0;if(!t.length){var l=!0;return o.$evalAsync((function(){l&&e(i,i,o)})),function(){l=!1}}if(1===t.length)return this.$watch(t[0],(function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)}));function c(){s=!1;try{a?(a=!1,e(i,i,o)):e(i,n,o)}finally{for(var r=0;r<t.length;r++)n[r]=i[r]}}return A(t,(function(t,e){var n=o.$watch(t,(function(t){i[e]=t,s||(s=!0,o.$evalAsync(c))}));r.push(n)})),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){f.$$pure=s(t).literal,f.$stateful=!f.$$pure;var n,i,r,o=this,a=e.length>1,l=0,c=s(t,f),u=[],m={},p=!0,d=0;function f(t){var e,r,o,s;if(!L(n=t)){if(O(n))if($(n)){i!==u&&(d=(i=u).length=0,l++),e=n.length,d!==e&&(l++,i.length=d=e);for(var a=0;a<e;a++)s=i[a],o=n[a],s!=s&&o!=o||s===o||(l++,i[a]=o)}else{for(r in i!==m&&(i=m={},d=0,l++),e=0,n)h.call(n,r)&&(e++,o=n[r],s=i[r],r in i?s!=s&&o!=o||s===o||(l++,i[r]=o):(d++,i[r]=o,l++));if(d>e)for(r in l++,i)h.call(n,r)||(d--,delete i[r])}else i!==n&&(i=n,l++);return l}}return this.$watch(c,(function(){if(p?(p=!1,e(n,n,o)):e(n,r,o),a)if(O(n))if($(n)){r=new Array(n.length);for(var t=0;t<n.length;t++)r[t]=n[t]}else for(var i in r={},n)h.call(n,i)&&(r[i]=n[i]);else r=n}))},$digest:function(){var o,s,l,c,u,h,f,v,b,$=t,A=p.length?m:this,B=[];_("$digest"),a.$$checkUrlChange(),this===m&&null!==i&&(a.defer.cancel(i),w()),n=null;do{u=!1,f=A;for(var C=0;C<p.length;C++){try{(0,(b=p[C]).fn)(b.scope,b.locals)}catch(S){r(S)}n=null}p.length=0;t:do{if(c=!f.$$suspended&&f.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((s=(0,o.get)(f))===(l=o.last)||(o.eq?lt(s,l):P(s)&&P(l))){if(o===n){u=!1;break t}}else u=!0,n=o,o.last=o.eq?st(s,null):s,(0,o.fn)(s,l===x?s:l,f),$<5&&(B[v=4-$]||(B[v]=[]),B[v].push({msg:Y(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:s,oldVal:l}))}catch(S){r(S)}if(!(h=!f.$$suspended&&f.$$watchersCount&&f.$$childHead||f!==A&&f.$$nextSibling))for(;f!==A&&!(h=f.$$nextSibling);)f=f.$parent}while(f=h);if((u||p.length)&&!$--)throw g(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,B)}while(u||p.length);for(g();y<d.length;)try{d[y++]()}catch(S){r(S)}d.length=y=0,a.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&a.$$applicationDestroyed(),v(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,c(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){m.$$phase||p.length||a.defer((function(){p.length&&m.$digest()}),null,"$evalAsync"),p.push({scope:this,fn:s(t),locals:e})},$$postDigest:function(t){d.push(t)},$apply:function(t){try{_("$apply");try{return this.$eval(t)}finally{g()}}catch(e){r(e)}finally{try{m.$digest()}catch(e){throw r(e),e}}},$applyAsync:function(t){var e=this;t&&f.push((function(){e.$eval(t)})),t=s(t),null===i&&(i=a.defer((function(){m.$apply(w)}),null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(delete n[i],b(r,1,t))}},$emit:function(t,e){var n,i,o,s=[],a=this,l=!1,c={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ht([c],arguments,1);do{for(n=a.$$listeners[t]||s,c.currentScope=a,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,u)}catch(h){r(h)}else n.splice(i,1),i--,o--;if(l)break;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,i=n,o=n,s={name:t,targetScope:n,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return s;for(var a,l,c,u=ht([s],arguments,1);i=o;){for(s.currentScope=i,l=0,c=(a=i.$$listeners[t]||[]).length;l<c;l++)if(a[l])try{a[l].apply(null,u)}catch(h){r(h)}else a.splice(l,1),l--,c--;if(!(o=i.$$listenerCount[t]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(o=i.$$nextSibling);)i=i.$parent}return s.currentScope=null,s}};var m=new u,p=m.$$asyncQueue=[],d=m.$$postDigestQueue=[],f=m.$$applyAsyncQueue=[],y=0;return m;function _(t){if(m.$$phase)throw e("inprog","{0} already in progress",m.$$phase);m.$$phase=t}function g(){m.$$phase=null}function v(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function b(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function x(){}function w(){for(;f.length;)try{f.shift()()}catch(t){r(t)}i=null}}]}function Wi(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return D(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return D(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r=i?e:t,o=hr(n&&n.trim()).href;return""===o||o.match(r)?n:"unsafe:"+o}}}Pi.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ei(t,e.$filter);var n,i="";if(this.stage="assign",n=ki(t)){this.state.computing="assign";var r=this.nextId();this.recurse(n,r),this.return_(r),i="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Mi(t.body);e.stage="inputs",A(o,(function(t,n){var i="fn"+n;e.state[i]={vars:[],body:[],own:{}},e.state.computing=i;var r=e.nextId();e.recurse(t,r),e.return_(r),e.state.inputs.push({name:i,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,xi,Ci,Si);return this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return A(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return A(this.state.filters,(function(n,i){t.push(n+"=$filter("+e.escape(i)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var s,a,l,c,u,h=this;if(i=i||I,!o&&D(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case Bi.Program:A(t.body,(function(e,n){h.recurse(e.expression,void 0,void 0,(function(t){a=t})),n!==t.body.length-1?h.current().body.push(a,";"):h.return_(a)}));break;case Bi.Literal:c=this.escape(t.value),this.assign(e,c),i(e||c);break;case Bi.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){a=t})),c=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,c),i(c);break;case Bi.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){s=t})),this.recurse(t.right,void 0,void 0,(function(t){a=t})),c="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,c),i(c);break;case Bi.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),i(e);break;case Bi.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),i(e);break;case Bi.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),(function(){h.if_("inputs"===h.stage||"s",(function(){r&&1!==r&&h.if_(h.isNull(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))}))}),e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),i(e);break;case Bi.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,s,void 0,(function(){h.if_(h.notNull(s),(function(){t.computed?(a=h.nextId(),h.recurse(t.property,a),h.getStringValue(a),r&&1!==r&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),c=h.computedMember(s,a),h.assign(e,c),n&&(n.computed=!0,n.name=a)):(r&&1!==r&&h.if_(h.isNull(h.nonComputedMember(s,t.property.name)),h.lazyAssign(h.nonComputedMember(s,t.property.name),"{}")),c=h.nonComputedMember(s,t.property.name),h.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))}),(function(){h.assign(e,"undefined")})),i(e)}),!!r);break;case Bi.CallExpression:e=e||this.nextId(),t.filter?(a=h.filter(t.callee.name),l=[],A(t.arguments,(function(t){var e=h.nextId();h.recurse(t,e),l.push(e)})),c=a+"("+l.join(",")+")",h.assign(e,c),i(e)):(a=h.nextId(),s={},l=[],h.recurse(t.callee,a,s,(function(){h.if_(h.notNull(a),(function(){A(t.arguments,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c=s.name?h.member(s.context,s.name,s.computed)+"("+l.join(",")+")":a+"("+l.join(",")+")",h.assign(e,c)}),(function(){h.assign(e,"undefined")})),i(e)})));break;case Bi.AssignmentExpression:a=this.nextId(),s={},this.recurse(t.left,void 0,s,(function(){h.if_(h.notNull(s.context),(function(){h.recurse(t.right,a),c=h.member(s.context,s.name,s.computed)+t.operator+a,h.assign(e,c),i(e||c)}))}),1);break;case Bi.ArrayExpression:l=[],A(t.elements,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c="["+l.join(",")+"]",this.assign(e,c),i(e||c);break;case Bi.ObjectExpression:l=[],u=!1,A(t.properties,(function(t){t.computed&&(u=!0)})),u?(e=e||this.nextId(),this.assign(e,"{}"),A(t.properties,(function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===Bi.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)}))):(A(t.properties,(function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(h.escape(e.key.type===Bi.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),c="{"+l.join(",")+"}",this.assign(e,c)),i(e||c);break;case Bi.ThisExpression:this.assign(e,"s"),i(e||"s");break;case Bi.LocalsExpression:this.assign(e,"l"),i(e||"l");break;case Bi.NGValueParameter:this.assign(e,"v"),i(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(q(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(U(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw vi("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},zi.prototype={compile:function(t){var e,n,i=this;Ei(t,i.$filter),(e=ki(t))&&(n=this.recurse(e));var r,o=Mi(t.body);o&&(r=[],A(o,(function(t,e){var n=i.recurse(t);n.isPure=t.isPure,t.input=n,r.push(n),t.watchId=e})));var s=[];A(t.body,(function(t){s.push(i.recurse(t.expression))}));var a=0===t.body.length?I:1===t.body.length?s[0]:function(t,e){var n;return A(s,(function(i){n=i(t,e)})),n};return n&&(a.assign=function(t,e,i){return n(t,i,e)}),r&&(a.inputs=r),a},recurse:function(t,e,n){var i,r,o,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Bi.Literal:return this.value(t.value,e);case Bi.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case Bi.BinaryExpression:case Bi.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case Bi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Bi.Identifier:return s.identifier(t.name,e,n);case Bi.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n):this.nonComputedMember(i,r,e,n);case Bi.CallExpression:return o=[],A(t.arguments,(function(t){o.push(s.recurse(t))})),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,s){for(var a=[],l=0;l<o.length;++l)a.push(o[l](t,n,i,s));var c=r.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,i,s){var a,l=r(t,n,i,s);if(null!=l.value){for(var c=[],u=0;u<o.length;++u)c.push(o[u](t,n,i,s));a=l.value.apply(l.context,c)}return e?{value:a}:a};case Bi.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,s){var a=i(t,n,o,s),l=r(t,n,o,s);return a.context[a.name]=l,e?{value:l}:l};case Bi.ArrayExpression:return o=[],A(t.elements,(function(t){o.push(s.recurse(t))})),function(t,n,i,r){for(var s=[],a=0;a<o.length;++a)s.push(o[a](t,n,i,r));return e?{value:s}:s};case Bi.ObjectExpression:return o=[],A(t.properties,(function(t){t.computed?o.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):o.push({key:t.key.type===Bi.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})})),function(t,n,i,r){for(var s={},a=0;a<o.length;++a)o[a].computed?s[o[a].key(t,n,i,r)]=o[a].value(t,n,i,r):s[o[a].key]=o[a].value(t,n,i,r);return e?{value:s}:s};case Bi.ThisExpression:return function(t){return e?{value:t}:t};case Bi.LocalsExpression:return function(t,n){return e?{value:n}:n};case Bi.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=D(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=D(s)?-s:-0,e?{value:s}:s}},"unary!":function(t,e){return function(n,i,r,o){var s=!t(n,i,r,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(i,r,o,s){var a=Si(t(i,r,o,s),e(i,r,o,s));return n?{value:a}:a}},"binary-":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),l=e(i,r,o,s),c=(D(a)?a:0)-(D(l)?l:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)*e(i,r,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)/e(i,r,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)%e(i,r,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)===e(i,r,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!==e(i,r,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)==e(i,r,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!=e(i,r,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<e(i,r,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>e(i,r,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<=e(i,r,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>=e(i,r,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)&&e(i,r,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)||e(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,i){return function(r,o,s,a){var l=t(r,o,s,a)?e(r,o,s,a):n(r,o,s,a);return i?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(i,r,o,s){var a=r&&t in r?r:i;n&&1!==n&&a&&null==a[t]&&(a[t]={});var l=a?a[t]:void 0;return e?{context:a,name:t,value:l}:l}},computedMember:function(t,e,n,i){return function(r,o,s,a){var l,c,u=t(r,o,s,a);return null!=u&&(l=xi(l=e(r,o,s,a)),i&&1!==i&&u&&!u[l]&&(u[l]={}),c=u[l]),n?{context:u,name:l,value:c}:c}},nonComputedMember:function(t,e,n,i){return function(r,o,s,a){var l=t(r,o,s,a);i&&1!==i&&l&&null==l[e]&&(l[e]={});var c=null!=l?l[e]:void 0;return n?{context:l,name:e,value:c}:c}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}},Ii.prototype={constructor:Ii,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Bi.Literal||t.body[0].expression.type===Bi.ArrayExpression||t.body[0].expression.type===Bi.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Hi=r("$sce"),Yi={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=/_([a-z])/g;function Ji(t){return t.replace(Gi,Kt)}function Zi(t){var e=[];return D(t)&&A(t,(function(t){e.push(function(t){if("self"===t)return t;if(q(t)){if(t.indexOf("***")>-1)throw Hi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(G(t))return new RegExp("^"+t.source+"$");throw Hi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Xi(){this.SCE_CONTEXTS=Yi;var e=["self"],n=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=Zi(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(n=Zi(t)),n},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(i,r){var o=function(t){throw Hi("unsafe","Attempting to use an unsafe value in a safe context.")};function s(e,n){return"self"===e?mr(n,cr)||function(e){return mr(e,function(){if(t.document.baseURI)return t.document.baseURI;ar||((ar=t.document.createElement("a")).href=".",ar=ar.cloneNode(!1));return ar.href}())}(n):!!e.exec(n.href)}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}i.has("$sanitize")&&(o=i.get("$sanitize"));var l=a(),c={};return c[Yi.HTML]=a(l),c[Yi.CSS]=a(l),c[Yi.MEDIA_URL]=a(l),c[Yi.URL]=a(c[Yi.MEDIA_URL]),c[Yi.JS]=a(l),c[Yi.RESOURCE_URL]=a(c[Yi.URL]),{trustAs:function(t,e){var n=c.hasOwnProperty(t)?c[t]:null;if(!n)throw Hi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||L(e)||""===e)return e;if("string"!=typeof e)throw Hi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,i){if(null===i||L(i)||""===i)return i;var a=c.hasOwnProperty(t)?c[t]:null;if(a&&i instanceof a)return i.$$unwrapTrustedValue();if(Y(i.$$unwrapTrustedValue)&&(i=i.$$unwrapTrustedValue()),t===Yi.MEDIA_URL||t===Yi.URL)return r(i.toString(),t===Yi.MEDIA_URL);if(t===Yi.RESOURCE_URL){if(function(t){var i,r,o=hr(t.toString()),a=!1;for(i=0,r=e.length;i<r;i++)if(s(e[i],o)){a=!0;break}if(a)for(i=0,r=n.length;i<r;i++)if(s(n[i],o)){a=!1;break}return a}(i))return i;throw Hi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",i.toString())}if(t===Yi.HTML)return o(i);throw Hi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Ki(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&o<8)throw Hi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Ut(Yi);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=F),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,(function(e){return i.getTrusted(t,e)}))};var r=i.parseAs,s=i.getTrusted,a=i.trustAs;return A(Yi,(function(t,e){var n=m(e);i[Ji("parse_as_"+n)]=function(e){return r(t,e)},i[Ji("get_trusted_"+n)]=function(e){return s(t,e)},i[Ji("trust_as_"+n)]=function(e){return a(t,e)}})),i}]}function Qi(){this.$get=["$window","$document",function(t,e){var n={},i=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,r=k((/android (\d+)/.exec(m((t.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},l=a.body&&a.body.style,c=!1,u=!1;return l&&(c=!(!("transition"in l)&&!("webkitTransition"in l)),u=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!i||r<4||s),hasEvent:function(t){if("input"===t&&o)return!1;if(L(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:ct(),transitions:c,animations:u,android:r}}]}function tr(){this.$get=V((function(t){return new er(t)}))}function er(t){var e=this,n={},i=[],r=e.ALL_TASKS_TYPE="$$all$$",o=e.DEFAULT_TASK_TYPE="$$default$$";function s(){var t=i.pop();return t&&t.cb}function a(t){for(var e=i.length-1;e>=0;--e){var n=i[e];if(n.type===t)return i.splice(e,1),n.cb}}e.completeTask=function(e,i){i=i||o;try{e()}finally{!function(t){n[t=t||o]&&(n[t]--,n[r]--)}(i);var l=n[i],c=n[r];if(!c||!l)for(var u,h=c?a:s;u=h(i);)try{u()}catch(m){t.error(m)}}},e.incTaskCount=function(t){n[t=t||o]=(n[t]||0)+1,n[r]=(n[r]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){n[e=e||r]?i.push({type:e,cb:t}):t()}}var nr=r("$templateRequest");function ir(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,i,r,o){function s(a,l){s.totalPendingRequests++,q(a)&&!L(n.get(a))||(a=o.getTrustedResourceUrl(a));var c=i.defaults&&i.defaults.transformResponse;return W(c)?c=c.filter((function(t){return t!==Rn})):c===Rn&&(c=null),i.get(a,M({cache:n,transformResponse:c},t)).finally((function(){s.totalPendingRequests--})).then((function(t){return n.put(a,t.data)}),(function(t){l||(t=nr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText),e(t));return r.reject(t)}))}return s.totalPendingRequests=0,s}]}function rr(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={findBindings:function(t,e,n){var i=t.getElementsByClassName("ng-binding"),r=[];return A(i,(function(t){var i=b.element(t).data("$binding");i&&A(i,(function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)}))})),r},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return i}]}var or=r("$timeout");function sr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function s(s,a,l){Y(s)||(l=a,a=s,s=I);var c,u=mt(arguments,3),h=D(l)&&!l,m=(h?i:n).defer(),p=m.promise;return c=e.defer((function(){try{m.resolve(s.apply(null,u))}catch(e){m.reject(e),r(e)}finally{delete o[p.$$timeoutId]}h||t.$apply()}),a,"$timeout"),p.$$timeoutId=c,o[c]=m,p}return s.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw or("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,i=o[n];return qi(i.promise),i.reject("canceled"),delete o[n],e.defer.cancel(n)},s}]}var ar,lr=t.document.createElement("a"),cr=hr(t.location.href);lr.href="http://[::1]";var ur="[::1]"===lr.hostname;function hr(t){if(!q(t))return t;var e=t;o&&(lr.setAttribute("href",e),e=lr.href),lr.setAttribute("href",e);var n=lr.hostname;return!ur&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:lr.href,protocol:lr.protocol?lr.protocol.replace(/:$/,""):"",host:lr.host,search:lr.search?lr.search.replace(/^\?/,""):"",hash:lr.hash?lr.hash.replace(/^#/,""):"",hostname:n,port:lr.port,pathname:"/"===lr.pathname.charAt(0)?lr.pathname:"/"+lr.pathname}}function mr(t,e){return t=hr(t),e=hr(e),t.protocol===e.protocol&&t.host===e.host}function pr(){this.$get=V(t)}function dr(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,s,a,l,c=function(t){try{return t.cookie||""}catch(e){return""}}(e);if(c!==i)for(t=(i=c).split("; "),n={},s=0;s<t.length;s++)(a=(o=t[s]).indexOf("="))>0&&(l=r(o.substring(0,a)),L(n[l])&&(n[l]=r(o.substring(a+1))));return n}}function fr(){this.$get=dr}function yr(t){var e="Filter";function n(i,r){if(O(i)){var o={};return A(i,(function(t,e){o[e]=n(e,t)})),o}return t.factory(i+e,r)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",br),n("date",Pr),n("filter",_r),n("json",zr),n("limitTo",Vr),n("lowercase",Ir),n("number",xr),n("orderBy",Lr),n("uppercase",Fr)}function _r(){return function(t,e,n,i){if(!$(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var o,s;switch(i=i||"$",vr(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=function(t,e,n,i){var r=O(t)&&n in t;!0===e?e=lt:Y(e)||(e=function(t,e){return!L(t)&&(null===t||null===e?t===e:!(O(e)||O(t)&&!j(t))&&(t=m(""+t),e=m(""+e),-1!==t.indexOf(e)))});return function(o){return r&&!O(o)?gr(o,t[n],e,n,!1):gr(o,t,e,n,i)}}(e,n,i,s);break;default:return t}return Array.prototype.filter.call(t,o)}}function gr(t,e,n,i,r,o){var s=vr(t),a=vr(e);if("string"===a&&"!"===e.charAt(0))return!gr(t,e.substring(1),n,i,r);if(W(t))return t.some((function(t){return gr(t,e,n,i,r)}));switch(s){case"object":var l;if(r){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&gr(t[l],e,n,i,!0))return!0;return!o&&gr(t,e,n,i,!1)}if("object"===a){for(l in e){var c=e[l];if(!Y(c)&&!L(c)){var u=l===i;if(!gr(u?t:t[l],c,n,i,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function vr(t){return null===t?"null":typeof t}dr.$inject=["$document"],yr.$inject=["$provide"];function br(t){var e=t.NUMBER_FORMATS;return function(t,n,i){L(n)&&(n=e.CURRENCY_SYM),L(i)&&(i=e.PATTERNS[1].maxFrac);var r=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:$r(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(r,n)}}function xr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:$r(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function $r(t,e,n,i,r){if(!q(t)&&!U(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,l=Math.abs(t)+"",c="";if(s)c="∞";else{o=function(t){var e,n,i,r,o,s=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;"0"===t.charAt(i);i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;"0"===t.charAt(o);)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>22&&(e=e.splice(0,21),s=n-1,n=1),{d:e,e:s,i:n}}(l),function(t,e,n,i){var r=t.d,o=r.length-t.i,s=(e=L(e)?Math.min(Math.max(n,o),i):+e)+t.i,a=r[s];if(s>0){r.splice(Math.max(t.i,s));for(var l=s;l<r.length;l++)r[l]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var c=1;c<s;c++)r[c]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight((function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)}),0);h&&(r.unshift(h),t.i++)}(o,r,e.minFrac,e.maxFrac);var u=o.d,h=o.i,m=o.e,p=[];for(a=u.reduce((function(t,e){return t&&!e}),!0);h<0;)u.unshift(0),h++;h>0?p=u.splice(h,u.length):(p=u,u=[0]);var d=[];for(u.length>=e.lgSize&&d.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)d.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&d.unshift(u.join("")),c=d.join(n),p.length&&(c+=i+p.join("")),m&&(c+="e+"+m)}return t<0&&!a?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function Ar(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function wr(t,e,n,i,r){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&-12===n&&(s=12),Ar(s,e,i,r)}}function Br(t,e,n){return function(i,r){var o=i["get"+t]();return r[p((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Cr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Sr(t){return function(e){var n,i=Cr(e.getFullYear()),r=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+i;return Ar(1+Math.round(r/6048e5),t)}}function Er(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}br.$inject=["$locale"],xr.$inject=["$locale"];var Mr={yyyy:wr("FullYear",4,0,!1,!0),yy:wr("FullYear",2,0,!0,!0),y:wr("FullYear",1,0,!1,!0),MMMM:Br("Month"),MMM:Br("Month",!0),MM:wr("Month",2,1),M:wr("Month",1,1),LLLL:Br("Month",!1,!0),dd:wr("Date",2),d:wr("Date",1),HH:wr("Hours",2),H:wr("Hours",1),hh:wr("Hours",2,-12),h:wr("Hours",1,-12),mm:wr("Minutes",2),m:wr("Minutes",1),ss:wr("Seconds",2),s:wr("Seconds",1),sss:wr("Milliseconds",3),EEEE:Br("Day"),EEE:Br("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=Ar(Math[i>0?"floor":"ceil"](i/60),2)+Ar(Math.abs(i%60),2)},ww:Sr(2),w:Sr(1),G:Er,GG:Er,GGG:Er,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Tr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,kr=/^-?\d+$/;function Pr(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,s,a="",l=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,q(n)&&(n=kr.test(n)?k(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,s=n[8]?i.setUTCFullYear:i.setFullYear,a=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=k(n[9]+n[10]),o=k(n[9]+n[11])),s.call(i,k(n[1]),k(n[2])-1,k(n[3]));var l=k(n[4]||0)-r,c=k(n[5]||0)-o,u=k(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return a.call(i,l,c,u,h),i}return t}(n)),U(n)&&(n=new Date(n)),!N(n)||!isFinite(n.getTime()))return n;for(;i;)(s=Tr.exec(i))?i=(l=ht(l,s,1)).pop():(l.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=gt(r,c),n=bt(n,r,!0)),A(l,(function(e){a+=(o=Mr[e])?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),a}}function zr(){return function(t,e){return L(e)&&(e=2),ft(t,e)}}Pr.$inject=["$locale"];var Ir=V(m),Fr=V(p);function Vr(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):k(e),P(e)?t:(U(t)&&(t=t.toString()),$(t)?(n=(n=!n||isNaN(n)?0:k(n))<0?Math.max(0,t.length+n):n,e>=0?jr(t,n,n+e):0===n?jr(t,e,t.length):jr(t,Math.max(0,n+e),n)):t)}}function jr(t,e,n){return q(t)?t.slice(e,n):d.call(t,e,n)}function Lr(t){return function(i,o,s,a){if(null==i)return i;if(!$(i))throw r("orderBy")("notarray","Expected array but received: {0}",i);W(o)||(o=[o]),0===o.length&&(o=["+"]);var l=o.map((function(e){var n=1,i=F;if(Y(e))i=e;else if(q(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}})),c=s?-1:1,u=Y(a)?a:n,h=Array.prototype.map.call(i,(function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:l.map((function(i){return function(t,n){var i=typeof t;null===t?i="null":"object"===i&&(t=function(t){if(Y(t.valueOf)&&e(t=t.valueOf()))return t;if(j(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:i,index:n}}(i.get(t),n)}))}}));return h.sort((function(t,e){for(var i=0,r=l.length;i<r;i++){var o=u(t.predicateValues[i],e.predicateValues[i]);if(o)return o*l[i].descending*c}return(u(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c})),i=h.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,s=e.value;"string"===i?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===i&&(O(o)&&(o=t.index),O(s)&&(s=e.index)),o!==s&&(n=o<s?-1:1)}else n="undefined"===i?1:"undefined"===r?-1:"null"===i?1:"null"===r||i<r?-1:1;return n}}function Dr(t){return Y(t)&&(t={link:t}),t.restrict=t.restrict||"AC",V(t)}Lr.$inject=["$parse"];var Or=V({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===_.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),Rr={};A(Pe,(function(t,e){if("multiple"!==t){var n=xn("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),Rr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],(function(t){r.$set(e,!!t)}))}})),A(Ie,(function(t,e){Rr[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"===i.ngPattern.charAt(0)){var r=i.ngPattern.match(c);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],(function(t){i.$set(e,t)}))}}}})),A(["src","srcset","href"],(function(t){var e=xn("ng-"+t);Rr[e]=["$sce",function(n){return{priority:99,link:function(i,r,s){var a=t,l=t;"href"===t&&"[object SVGAnimatedString]"===_.call(r.prop("href"))&&(l="xlinkHref",s.$attr[l]="xlink:href",a=null),s.$set(e,n.getTrustedMediaUrl(s[e])),s.$observe(e,(function(e){e?(s.$set(l,e),o&&a&&r.prop(a,s[l])):"href"===t&&s.$set(l,null)}))}}}]}));var qr={$addControl:I,$getControls:V([]),$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I,$$setSubmitted:I},Ur="ng-pending",Nr="ng-submitted";function Wr(t,e,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=qr,this.$$element=t,this.$$animate=i,Jr(this)}Wr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Wr.prototype={$rollbackViewValue:function(){A(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){A(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){Lt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Ut(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],A(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),A(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),A(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),ot(this.$$controls,t),t.$$parentForm=qr},$setDirty:function(){this.$$animate.removeClass(this.$$element,Wo),this.$$animate.addClass(this.$$element,Ho),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Wo,Ho+" "+Nr),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,A(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){A(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==qr;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Nr),this.$submitted=!0,A(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Zr({clazz:Wr,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(ot(i,n),0===i.length&&delete t[e])}});var Hr=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Wr,compile:function(n,r){n.addClass(Wo).addClass(Uo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,s){var a=s[0];if(!("action"in r)){var l=function(e){t.$apply((function(){a.$commitViewValue(),a.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",l)}),0,!1)}))}(s[1]||a.$$parentForm).$addControl(a);var c=o?i(a.$name):I;o&&(c(t,a),r.$observe(o,(function(e){a.$name!==e&&(c(t,void 0),a.$$parentForm.$$renameControl(a,e),(c=i(a.$name))(t,a))}))),n.on("$destroy",(function(){a.$$parentForm.$removeControl(a),c(t,void 0),M(a,qr)}))}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||I}}]},Yr=Hr(),Gr=Hr(!0);function Jr(t){t.$$classCache={},t.$$classCache[No]=!(t.$$classCache[Uo]=t.$$element.hasClass(Uo))}function Zr(t){var e=t.clazz,n=t.set,i=t.unset;function r(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+zt(e,"-"):"",r(t,Uo+e,!0===n),r(t,No+e,!1===n)}e.prototype.$setValidity=function(t,e,s){var a;L(e)?function(t,e,i,r){t[e]||(t[e]={});n(t[e],i,r)}(this,"$pending",t,s):function(t,e,n,r){t[e]&&i(t[e],n,r);Xr(t[e])&&(t[e]=void 0)}(this,"$pending",t,s),X(e)?e?(i(this.$error,t,s),n(this.$$success,t,s)):(n(this.$error,t,s),i(this.$$success,t,s)):(i(this.$error,t,s),i(this.$$success,t,s)),this.$pending?(r(this,Ur,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(r(this,Ur,!1),this.$valid=Xr(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,a=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,a,this)}}function Xr(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Kr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,to=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,eo=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,no=/^(\d{4,})-(\d{2})-(\d{2})$/,io=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro=/^(\d{4,})-W(\d\d)$/,oo=/^(\d{4,})-(\d\d)$/,so=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ao=Ot();A("date,datetime-local,month,time,week".split(","),(function(t){ao[t]=!0}));var lo={text:function(t,e,n,i,r,o){uo(t,e,n,i,r,o),co(i)},date:mo("date",no,ho(no,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mo("datetimelocal",io,ho(io,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mo("time",so,ho(so,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mo("week",ro,(function(t,e){if(N(t))return t;if(q(t)){ro.lastIndex=0;var n=ro.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,l=0,c=Cr(i),u=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(i,0,c.getDate()+u,o,s,a,l)}}return NaN}),"yyyy-Www"),month:mo("month",oo,ho(oo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o,s,a){var l;if(po(t,e,n,i,"number"),fo(i),uo(t,e,n,i,r,o),D(n.min)||n.ngMin){var c=n.min||a(n.ngMin)(t);l=yo(c),i.$validators.min=function(t,e){return i.$isEmpty(e)||L(l)||e>=l},n.$observe("min",(function(t){t!==c&&(l=yo(t),c=t,i.$validate())}))}if(D(n.max)||n.ngMax){var u=n.max||a(n.ngMax)(t),h=yo(u);i.$validators.max=function(t,e){return i.$isEmpty(e)||L(h)||e<=h},n.$observe("max",(function(t){t!==u&&(h=yo(t),u=t,i.$validate())}))}if(D(n.step)||n.ngStep){var m=n.step||a(n.ngStep)(t),p=yo(m);i.$validators.step=function(t,e){return i.$isEmpty(e)||L(p)||vo(e,l||0,p)},n.$observe("step",(function(t){t!==m&&(p=yo(t),m=t,i.$validate())}))}},url:function(t,e,n,i,r,o){uo(t,e,n,i,r,o),co(i),i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Qr.test(n)}},email:function(t,e,n,i,r,o){uo(t,e,n,i,r,o),co(i),i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||to.test(n)}},radio:function(t,e,n,i){var r=!n.ngTrim||"false"!==tt(n.ngTrim);L(n.name)&&e.attr("name",C());e.on("change",(function(t){var o;e[0].checked&&(o=n.value,r&&(o=tt(o)),i.$setViewValue(o,t&&t.type))})),i.$render=function(){var t=n.value;r&&(t=tt(t)),e[0].checked=t===i.$viewValue},n.$observe("value",i.$render)},range:function(t,e,n,i,r,o){po(t,e,n,i,"range"),fo(i),uo(t,e,n,i,r,o);var s=i.$$hasNativeValidators&&"range"===e[0].type,a=s?0:void 0,l=s?100:void 0,c=s?1:void 0,u=e[0].validity,h=D(n.min),m=D(n.max),p=D(n.step),d=i.$render;i.$render=s&&D(u.rangeUnderflow)&&D(u.rangeOverflow)?function(){d(),i.$setViewValue(e.val())}:d,h&&(a=yo(n.min),i.$validators.min=s?function(){return!0}:function(t,e){return i.$isEmpty(e)||L(a)||e>=a},f("min",(function(t){if(a=yo(t),P(i.$modelValue))return;if(s){var n=e.val();a>n&&(n=a,e.val(n)),i.$setViewValue(n)}else i.$validate()})));m&&(l=yo(n.max),i.$validators.max=s?function(){return!0}:function(t,e){return i.$isEmpty(e)||L(l)||e<=l},f("max",(function(t){if(l=yo(t),P(i.$modelValue))return;if(s){var n=e.val();l<n&&(e.val(l),n=l<a?a:l),i.$setViewValue(n)}else i.$validate()})));p&&(c=yo(n.step),i.$validators.step=s?function(){return!u.stepMismatch}:function(t,e){return i.$isEmpty(e)||L(c)||vo(e,a||0,c)},f("step",(function(t){if(c=yo(t),P(i.$modelValue))return;s?i.$viewValue!==e.val()&&i.$setViewValue(e.val()):i.$validate()})));function f(t,i){e.attr(t,n[t]);var r=n[t];n.$observe(t,(function(t){t!==r&&(r=t,i(t))}))}},checkbox:function(t,e,n,i,r,o,s,a){var l=bo(a,t,"ngTrueValue",n.ngTrueValue,!0),c=bo(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",(function(t){i.$setViewValue(e[0].checked,t&&t.type)})),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push((function(t){return lt(t,l)})),i.$parsers.push((function(t){return t?l:c}))},hidden:I,button:I,submit:I,reset:I,file:I};function co(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function uo(t,e,n,i,r,o){var s,a=m(e[0].type);if(!r.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionupdate",(function(t){(L(t.data)||""===t.data)&&(l=!1)})),e.on("compositionend",(function(){l=!1,c()}))}var c=function(t){if(s&&(o.defer.cancel(s),s=null),!l){var r=e.val(),c=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(r=tt(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,c)}};if(r.hasEvent("input"))e.on("input",c);else{var u=function(t,e,n){s||(s=o.defer((function(){s=null,e&&e.value===n||c(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||u(t,this,this.value)})),r.hasEvent("paste")&&e.on("paste cut drop",u)}e.on("change",c),ao[a]&&i.$$hasNativeValidators&&a===n.type&&e.on("keydown wheel mousedown",(function(t){if(!s){var e=this.validity,n=e.badInput,i=e.typeMismatch;s=o.defer((function(){s=null,e.badInput===n&&e.typeMismatch===i||c(t)}))}})),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function ho(t,e){return function(n,i){var r,o;if(N(n))return n;if(q(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Kr.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n)){r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},A(r,(function(t,n){n<e.length&&(o[e[n]]=+t)}));var s=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&s.setFullYear(o.yyyy),s}}return NaN}}function mo(t,e,n,i){return function(r,o,s,a,l,c,u,h){po(r,o,s,a,t),uo(0,o,s,a,l,c);var m,p,d="time"===t||"datetimelocal"===t;if(a.$parsers.push((function(n){return a.$isEmpty(n)?null:e.test(n)?x(n,m):void(a.$$parserName=t)})),a.$formatters.push((function(t){if(t&&!N(t))throw Xo("datefmt","Expected `{0}` to be a date",t);if(v(t)){m=t;var e=a.$options.getOption("timezone");return e&&(p=e,m=bt(m,e,!0)),function(t,e){var n=i;d&&q(a.$options.getOption("timeSecondsFormat"))&&(n=i.replace("ss.sss",a.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var r=u("date")(t,n,e);d&&a.$options.getOption("timeStripZeroSeconds")&&(r=r.replace(/(?::00)?(?:\.000)?$/,""));return r}(t,e)}return m=null,p=null,""})),D(s.min)||s.ngMin){var f=s.min||h(s.ngMin)(r),y=b(f);a.$validators.min=function(t){return!v(t)||L(y)||n(t)>=y},s.$observe("min",(function(t){t!==f&&(y=b(t),f=t,a.$validate())}))}if(D(s.max)||s.ngMax){var _=s.max||h(s.ngMax)(r),g=b(_);a.$validators.max=function(t){return!v(t)||L(g)||n(t)<=g},s.$observe("max",(function(t){t!==_&&(g=b(t),_=t,a.$validate())}))}function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function b(t){return D(t)&&!N(t)?x(t)||void 0:t}function x(t,e){var i=a.$options.getOption("timezone");p&&p!==i&&(e=vt(e,gt(p)));var r=n(t,e);return!isNaN(r)&&i&&(r=bt(r,i)),r}}}function po(t,e,n,i,r){var o=e[0];(i.$$hasNativeValidators=O(o.validity))&&i.$parsers.push((function(t){var n=e.prop(u)||{};if(!n.badInput&&!n.typeMismatch)return t;i.$$parserName=r}))}function fo(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:eo.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!U(e))throw Xo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function yo(t){return D(t)&&!U(t)&&(t=parseFloat(t)),P(t)?void 0:t}function _o(t){return(0|t)===t}function go(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}return e.length-n-1}function vo(t,e,n){var i=Number(t),r=!_o(i),o=!_o(e),s=!_o(n);if(r||o||s){var a=r?go(i):0,l=o?go(e):0,c=s?go(n):0,u=Math.max(a,l,c),h=Math.pow(10,u);i*=h,e*=h,n*=h,r&&(i=Math.round(i)),o&&(e=Math.round(e)),s&&(n=Math.round(n))}return(i-e)%n==0}function bo(t,e,n,i,r){var o;if(D(i)){if(!(o=t(i)).constant)throw Xo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var xo=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(lo[m(s.type)]||lo.text)(r,o,s,a[0],e,t,n,i)}}}}],$o=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,n){if("hidden"===m(n.type))return{pre:function(e,n,i,r){var o=n[0];o.parentNode&&o.parentNode.insertBefore(o,o.nextSibling),Object.defineProperty&&Object.defineProperty(o,"value",t)}}}}},Ao=/^(true|false|\d+)$/,wo=function(){function t(t,e,n){var i=D(n)?n:9===o?"":null;t.prop("value",i),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return Ao.test(n.ngValue)?function(e,n,i){t(n,i,e.$eval(i.ngValue))}:function(e,n,i){e.$watch(i.ngValue,(function(e){t(n,i,e)}))}}}},Bo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,(function(t){n.textContent=Rt(t)}))}}}}],Co=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",(function(t){i.textContent=L(t)?"":t}))}}}}],So=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),s=e(r.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(s,(function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")}))}}}}],Eo=V({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}});function Mo(t,e){var n;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(a,l,c){var u,h=l.data("$classCounts"),m=!0;function p(t,e){var n=[];return A(t,(function(t){(e>0||h[t])&&(h[t]=(h[t]||0)+e,h[t]===+(e>0)&&n.push(t))})),n.join(" ")}h||(h=Ot(),l.data("$classCounts",h)),"ngClass"!==t&&(n||(n=s("$index",(function(t){return 1&t}))),a.$watch(n,(function(t){t===e?(n=p(r(n=u),1),c.$addClass(n)):function(t){t=p(r(t),-1),c.$removeClass(t)}(u);var n;m=t}))),a.$watch(s(c[t],o),(function(t){m===e&&function(t,e){var n=r(t),o=r(e),s=i(n,o),a=i(o,n),l=p(s,-1),u=p(a,1);c.$addClass(u),c.$removeClass(l)}(u,t);u=t}))}}}];function i(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function r(t){return t&&t.split(" ")}function o(t){if(!t)return t;var e=t;return W(t)?e=t.map(o).join(" "):O(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):q(t)||(e=t+""),e}}var To=Mo("",!0),ko=Mo("Odd",0),Po=Mo("Even",1),zo=Dr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Io=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Fo={},Vo={blur:!0,focus:!0};function jo(t,e,n,i,r,o){return{restrict:"A",compile:function(s,a){var l=t(a[i]);return function(t,i){i.on(r,(function(i){var r=function(){l(t,{$event:i})};if(e.$$phase)if(o)t.$evalAsync(r);else try{r()}catch(s){n(s)}else t.$apply(r)}))}}}}A("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=xn("ng-"+t);Fo[e]=["$parse","$rootScope","$exceptionHandler",function(n,i,r){return jo(n,i,r,e,t,Vo[t])}]}));var Lo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,l,c;n.$watch(r.ngIf,(function(n){n?l||s((function(n,o){l=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),a={clone:n},t.enter(n,i.parent(),i)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=Dt(a.clone),t.leave(c).done((function(t){!1!==t&&(c=null)})),a=null))}))}}}],Do=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,l,c,u){var h,m,p,d=0,f=function(){m&&(m.remove(),m=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).done((function(t){!1!==t&&(m=null)})),m=p,p=null)};i.$watch(o,(function(o){var l=function(t){!1===t||!D(a)||a&&!i.$eval(a)||e()},m=++d;o?(t(o,!0).then((function(t){if(!i.$$destroyed&&m===d){var e=i.$new();c.template=t;var a=u(e,(function(t){f(),n.enter(t,null,r).done(l)}));p=a,(h=e).$emit("$includeContentLoaded",o),i.$eval(s)}}),(function(){i.$$destroyed||m===d&&(f(),i.$emit("$includeContentError",o))})),i.$emit("$includeContentRequested",o)):(f(),c.template=null)}))}}}}],Oo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(_.call(i[0]).match(/SVG/))return i.empty(),void e(he(o.template,t.document).childNodes)(n,(function(t){i.append(t)}),{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],Ro=Dr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),qo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,s=o?tt(r):r;i.$parsers.push((function(t){if(!L(t)){var e=[];return t&&A(t.split(s),(function(t){t&&e.push(o?tt(t):t)})),e}})),i.$formatters.push((function(t){if(W(t))return t.join(r)})),i.$isEmpty=function(t){return!t||!t.length}}}},Uo="ng-valid",No="ng-invalid",Wo="ng-pristine",Ho="ng-dirty",Yo="ng-untouched",Go="ng-touched",Jo="ng-empty",Zo="ng-not-empty",Xo=r("ngModel");function Ko(t,e,n,i,r,o,s,a,l){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(t),this.$$parentForm=qr,this.$options=Qo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=s,this.$$parse=r,this.$$q=a,this.$$exceptionHandler=e,Jr(this),(c=this).$$scope.$watch((function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e}))}Ko.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Ko.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return Y(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){Y(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Xo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,xt(this.$$element))},$render:I,$isEmpty:function(t){return L(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Zo),this.$$animate.addClass(this.$$element,Jo)):(this.$$animate.removeClass(this.$$element,Jo),this.$$animate.addClass(this.$$element,Zo))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,Wo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Wo),this.$$animate.addClass(this.$$element,Ho),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Yo,Go)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Go,Yo)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!P(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,(function(t){r||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==i&&o.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var i,r,o=this.$$currentValidationRunId,s=this;(function(){var t=s.$$parserName;if(!L(s.$$parserValid))return s.$$parserValid||(A(s.$validators,(function(t,e){a(e,null)})),A(s.$asyncValidators,(function(t,e){a(e,null)}))),a(t,s.$$parserValid),s.$$parserValid;a(t,null);return!0})()?!function(){var n=!0;if(A(s.$validators,(function(i,r){var o=Boolean(i(t,e));n=n&&o,a(r,o)})),!n)return A(s.$asyncValidators,(function(t,e){a(e,null)})),!1;return!0}()?l(!1):(i=[],r=!0,A(s.$asyncValidators,(function(n,o){var s=n(t,e);if(!K(s))throw Xo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(o,void 0),i.push(s.then((function(){a(o,!0)}),(function(){r=!1,a(o,!1)})))})),i.length?s.$$q.all(i).then((function(){l(r)}),I):l(!0)):l(!1);function a(t,e){o===s.$$currentValidationRunId&&s.$setValidity(t,e)}function l(t){o===s.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!L(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(L(t=this.$parsers[n](t))){this.$$parserValid=!1;break}P(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==i&&e.$$writeModelToScope()}this.$$rawModelValue=t,r&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){r||(e.$modelValue=n?t:void 0,o())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),A(this.$viewChangeListeners,(function(t){try{t()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");U(e[t])?e=e[t]:U(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:U(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Zr({clazz:Ko,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Qo,ts=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ko,priority:1,compile:function(e){return e.addClass(Wo).addClass(Yo).addClass(Uo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm,s=i[2];s&&(r.$options=s.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",(function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)})),t.$on("$destroy",(function(){r.$$parentForm.$removeControl(r)}))},post:function(e,n,i,r){var o=r[0];function s(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",(function(){o.$touched||(t.$$phase?e.$evalAsync(s):e.$apply(s))}))}}}}}],es=/(\s+|^)default(\s+|$)/;function ns(t){this.$$options=t}ns.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return A(t=M({},t),(function(n,i){"$inherit"===n?"*"===i?e=!0:(t[i]=this.$$options[i],"updateOn"===i&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===i&&(t.updateOnDefault=!1,t[i]=tt(n.replace(es,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],rs(t,this.$$options)),rs(t,Qo.$$options),new ns(t)}},Qo=new ns({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var is=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Qo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function rs(t,e){A(e,(function(e,n){D(t[n])||(t[n]=e)}))}var os=Dr({terminal:!0,priority:1e3}),ss=r("ngOptions"),as=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ls=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=I},post:function(t,a,l,c){for(var u=c[0],h=c[1],m=l.multiple,p=0,d=a.children(),f=d.length;p<f;p++)if(""===d[p].value){u.hasEmptyOption=!0,u.emptyOption=d.eq(p);break}a.empty();var y,_=!!u.emptyOption;s(r.cloneNode(!1)).val("?");var g=function(t,e,n){var r=t.match(as);if(!r)throw ss("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,xt(e));var o=r[5]||r[7],s=r[6],a=/ as /.test(r[0])&&r[1],l=r[9],c=i(r[2]?r[1]:o),u=a&&i(a)||c,h=l&&i(l),m=l?function(t,e){return h(n,e)}:function(t){return De(t)},p=function(t,e){return m(t,v(t,e))},d=i(r[2]||r[1]),f=i(r[3]||""),y=i(r[4]||""),_=i(r[8]),g={},v=s?function(t,e){return g[s]=e,g[o]=t,g}:function(t){return g[o]=t,g};function b(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function x(t){var e;if(!s&&$(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:p,getWatchables:i(_,(function(t){for(var e=[],i=x(t=t||[]),o=i.length,s=0;s<o;s++){var a=t===i?s:i[s],l=t[a],c=v(l,a),u=m(l,c);if(e.push(u),r[2]||r[1]){var h=d(n,c);e.push(h)}if(r[4]){var p=y(n,c);e.push(p)}}return e})),getOptions:function(){for(var t=[],e={},i=_(n)||[],r=x(i),o=r.length,s=0;s<o;s++){var a=i===r?s:r[s],c=i[a],h=v(c,a),g=u(n,h),$=m(g,h),A=new b($,g,d(n,h),f(n,h),y(n,h));t.push(A),e[$]=A}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return l?st(t.viewValue):t.viewValue}}}}}(l.ngOptions,a,t),v=n[0].createDocumentFragment();function b(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function x(t){var e=y.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}u.generateUnknownOptionValue=function(t){return"?"},m?(u.writeValue=function(t){if(y){var e=t&&t.map(x)||[];y.items.forEach((function(t){t.element.selected&&!rt(e,t)&&(t.element.selected=!1)}))}},u.readValue=function(){var t=a.val()||[],e=[];return A(t,(function(t){var n=y.selectValueMap[t];n&&!n.disabled&&e.push(y.getViewValueFromOption(n))})),e},g.trackBy&&t.$watchCollection((function(){if(W(h.$viewValue))return h.$viewValue.map((function(t){return g.getTrackByValue(t)}))}),(function(){h.$render()}))):(u.writeValue=function(t){if(y){var e=a[0].options[a[0].selectedIndex],n=y.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(u.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):u.selectUnknownOrEmptyOption(t)}},u.readValue=function(){var t=y.selectValueMap[a.val()];return t&&!t.disabled?(u.unselectEmptyOption(),u.removeUnknownOption(),y.getViewValueFromOption(t)):null},g.trackBy&&t.$watch((function(){return g.getTrackByValue(h.$viewValue)}),(function(){h.$render()}))),_&&(e(u.emptyOption)(t),a.prepend(u.emptyOption),8===u.emptyOption[0].nodeType?(u.hasEmptyOption=!1,u.registerOption=function(t,e){""===e.val()&&(u.hasEmptyOption=!0,u.emptyOption=e,u.emptyOption.removeClass("ng-scope"),h.$render(),e.on("$destroy",(function(){var t=u.$isEmptyOptionSelected();u.hasEmptyOption=!1,u.emptyOption=void 0,t&&h.$render()})))}):u.emptyOption.removeClass("ng-scope")),t.$watchCollection(g.getWatchables,(function(){var t=y&&u.readValue();if(y)for(var e=y.items.length-1;e>=0;e--){var n=y.items[e];D(n.group)?Me(n.element.parentNode):Me(n.element)}y=g.getOptions();var i={};if(y.items.forEach((function(t){var e;D(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),v.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),b(t,e)):b(t,v)})),a[0].appendChild(v),h.$render(),!h.$isEmpty(t)){var r=u.readValue();(g.trackBy||m?lt(t,r):t===r)||(h.$setViewValue(r),h.$render())}}))}}}}],cs=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(o,s,a){var l,c=a.count,u=a.$attr.when&&s.attr(a.$attr.when),h=a.offset||0,p=o.$eval(u)||{},d={},f=e.startSymbol(),y=e.endSymbol(),_=f+c+"-"+h+y,g=b.noop;function v(t){s.text(t||"")}A(a,(function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+m(n[2]);p[i]=s.attr(a.$attr[e])}})),A(p,(function(t,n){d[n]=e(t.replace(i,_))})),o.$watch(c,(function(e){var i=parseFloat(e),r=P(i);if(r||i in p||(i=t.pluralCat(i-h)),!(i===l||r&&P(l))){g();var s=d[i];L(s)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+u),g=I,v()):g=o.$watch(s,v),l=i}}))}}}],us=r("ngRef"),hs=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var i=xn(it(e)),r=t(n.ngRef),o=r.assign||function(){throw us("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,s){var a;if(s.hasOwnProperty("ngRefRead")){if("$element"===s.ngRefRead)a=e;else if(!(a=e.data("$"+s.ngRefRead+"Controller")))throw us("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',s.ngRefRead,n.ngRef)}else a=e.data("$"+i+"Controller");o(t,a=a||e),e.on("$destroy",(function(){r(t)===a&&o(t,null)}))}}}}],ms=["$parse","$animate","$compile",function(t,e,n){var i="$$NG_REMOVED",o=r("ngRepeat"),s=function(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]},c=function(t,e,n){return De(n)},u=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,m){var p=m.ngRepeat,d=n.$$createComment("end ngRepeat",p),f=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var y=f[1],_=f[2],g=f[3],v=f[4];if(!(f=y.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",y);var b,x=f[3]||f[1],w=f[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);if(v){var B={$id:De},C=t(v);b=function(t,e,n,i){return w&&(B[w]=e),B[x]=n,B.$index=i,C(t,B)}}return function(t,n,r,m,f){var y=Ot();t.$watchCollection(_,(function(r){var m,_,v,C,S,E,M,T,k,P,z,I,F=n[0],V=Ot();if(g&&(t[g]=r),$(r))k=r,T=b||c;else for(var j in T=b||u,k=[],r)h.call(r,j)&&"$"!==j.charAt(0)&&k.push(j);for(C=k.length,z=new Array(C),m=0;m<C;m++)if(S=r===k?m:k[m],E=r[S],M=T(t,S,E,m),y[M])P=y[M],delete y[M],V[M]=P,z[m]=P;else{if(V[M])throw A(z,(function(t){t&&t.scope&&(y[t.id]=t)})),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,M,E);z[m]={id:M,scope:void 0,clone:void 0},V[M]=!0}for(var L in B&&(B[x]=void 0),y){if(I=Dt((P=y[L]).clone),e.leave(I),I[0].parentNode)for(m=0,_=I.length;m<_;m++)I[m][i]=!0;P.scope.$destroy()}for(m=0;m<C;m++)if(S=r===k?m:k[m],E=r[S],(P=z[m]).scope){v=F;do{v=v.nextSibling}while(v&&v[i]);a(P)!==v&&e.move(Dt(P.clone),null,F),F=l(P),s(P.scope,m,x,E,w,S,C)}else f((function(t,n){P.scope=n;var i=d.cloneNode(!1);t[t.length++]=i,e.enter(t,null,F),F=i,P.clone=t,V[P.id]=P,s(P.scope,m,x,E,w,S,C)}));y=V}))}}}}],ps="ng-hide",ds="ng-hide-animate",fs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,(function(e){t[e?"removeClass":"addClass"](n,ps,{tempClasses:ds})}))}}}],ys=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,(function(e){t[e?"addClass":"removeClass"](n,ps,{tempClasses:ds})}))}}}],_s=Dr((function(t,e,n){t.$watchCollection(n.ngStyle,(function(t,n){n&&t!==n&&A(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}))})),gs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var s=r.ngSwitch||r.on,a=[],l=[],c=[],u=[],h=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(s,(function(n){for(var i,r;c.length;)t.cancel(c.pop());for(i=0,r=u.length;i<r;++i){var s=Dt(l[i].clone);u[i].$destroy(),(c[i]=t.leave(s)).done(h(c,i))}l.length=0,u.length=0,(a=o.cases["!"+n]||o.cases["?"])&&A(a,(function(n){n.transclude((function(i,r){u.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:i};l.push(s),t.enter(i,o.parent(),o)}))}))}))}}}],vs=Dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){A(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t})),(function(t){i.cases["!"+t]=i.cases["!"+t]||[],i.cases["!"+t].push({transclude:r,element:e})}))}}),bs=Dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),xs=r("ngTransclude"),$s=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw xs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",xt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var s=i.ngTransclude||i.ngTranscludeSlot;function a(){n(t,(function(t){e.append(t)}))}o((function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.nodeType!==qt||i.nodeValue.trim())return!0}}(t)?e.append(t):(a(),n.$destroy())}),null,s),s&&!o.isSlotFilled(s)&&a()}}}}],As=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],ws={$setViewValue:I,$render:I};function Bs(t,e){t.prop("selected",e),t.attr("selected",e)}var Cs=["$element","$scope",function(e,n){var i=this,r=new qe;i.selectValueMap={},i.ngModelCtrl=ws,i.multiple=!1,i.unknownOption=s(t.document.createElement("option")),i.hasEmptyOption=!1,i.emptyOption=void 0,i.renderUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),e.prepend(i.unknownOption),Bs(i.unknownOption,!0),e.val(n)},i.updateUnknownOption=function(t){var n=i.generateUnknownOptionValue(t);i.unknownOption.val(n),Bs(i.unknownOption,!0),e.val(n)},i.generateUnknownOptionValue=function(t){return"? "+De(t)+" ?"},i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.selectEmptyOption=function(){i.emptyOption&&(e.val(""),Bs(i.emptyOption,!0))},i.unselectEmptyOption=function(){i.hasEmptyOption&&Bs(i.emptyOption,!1)},n.$on("$destroy",(function(){i.renderUnknownOption=I})),i.readValue=function(){var t=e.val(),n=t in i.selectValueMap?i.selectValueMap[t]:t;return i.hasOption(n)?n:null},i.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&Bs(s(n),!1),i.hasOption(t)){i.removeUnknownOption();var r=De(t);e.val(r in i.selectValueMap?r:t);var o=e[0].options[e[0].selectedIndex];Bs(s(o),!0)}else i.selectUnknownOrEmptyOption(t)},i.addOption=function(t,e){if(8!==e[0].nodeType){Lt(t,'"option value"'),""===t&&(i.hasEmptyOption=!0,i.emptyOption=e);var n=r.get(t)||0;r.set(t,n+1),a()}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.delete(t),""===t&&(i.hasEmptyOption=!1,i.emptyOption=void 0)):r.set(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.$hasEmptyOption=function(){return i.hasEmptyOption},i.$isUnknownOptionSelected=function(){return e[0].options[0]===i.unknownOption[0]},i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&e[0].options[e[0].selectedIndex]===i.emptyOption[0]},i.selectUnknownOrEmptyOption=function(t){null==t&&i.emptyOption?(i.removeUnknownOption(),i.selectEmptyOption()):i.unknownOption.parent().length?i.updateUnknownOption(t):i.renderUnknownOption(t)};var o=!1;function a(){o||(o=!0,n.$$postDigest((function(){o=!1,i.ngModelCtrl.$render()})))}var l=!1;function c(t){l||(l=!0,n.$$postDigest((function(){n.$$destroyed||(l=!1,i.ngModelCtrl.$setViewValue(i.readValue()),t&&i.ngModelCtrl.$render())})))}i.registerOption=function(t,e,n,r,o){var s,l;n.$attr.ngValue?n.$observe("value",(function(t){var n,r=e.prop("selected");D(l)&&(i.removeOption(s),delete i.selectValueMap[l],n=!0),l=De(t),s=t,i.selectValueMap[l]=t,i.addOption(t,e),e.attr("value",l),n&&r&&c()})):r?n.$observe("value",(function(t){var n;i.readValue();var r=e.prop("selected");D(s)&&(i.removeOption(s),n=!0),s=t,i.addOption(t,e),n&&r&&c()})):o?t.$watch(o,(function(t,r){n.$set("value",t);var o=e.prop("selected");r!==t&&i.removeOption(r),i.addOption(t,e),r&&o&&c()})):i.addOption(n.value,e);n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(i.multiple?c(!0):(i.ngModelCtrl.$setViewValue(null),i.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=i.readValue(),e=n.value;i.removeOption(e),a(),(i.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)}))}}],Ss=function(){return{restrict:"E",require:["select","?ngModel"],controller:Cs,priority:1,link:{pre:function(t,e,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=I);if(r.ngModelCtrl=o,e.on("change",(function(){r.removeUnknownOption(),t.$apply((function(){o.$setViewValue(r.readValue())}))})),n.multiple){r.multiple=!0,r.readValue=function(){var t=[];return A(e.find("option"),(function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in r.selectValueMap?r.selectValueMap[n]:n)}})),t},r.writeValue=function(t){A(e.find("option"),(function(e){var n=!!t&&(rt(t,e.value)||rt(t,r.selectValueMap[e.value]));n!==e.selected&&Bs(s(e),n)}))};var a,l=NaN;t.$watch((function(){l!==o.$viewValue||lt(a,o.$viewValue)||(a=Ut(o.$viewValue),o.$render()),l=o.$viewValue})),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},Es=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var i,r;return D(n.ngValue)||(D(n.value)?i=t(n.value,!0):(r=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o="$selectController",s=e.parent(),a=s.data(o)||s.parent().data(o);a&&a.registerOption(t,e,n,i,r)}}}}],Ms=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,i,r){if(r){var o=i.hasOwnProperty("required")||t(i.ngRequired)(e);i.ngRequired||(i.required=!0),r.$validators.required=function(t,e){return!o||!r.$isEmpty(e)},i.$observe("required",(function(t){o!==t&&(o=t,r.$validate())}))}}}}],Ts=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,n){var i,r;return n.ngPattern&&(i=n.ngPattern,r="/"===n.ngPattern.charAt(0)&&c.test(n.ngPattern)?function(){return n.ngPattern}:t(n.ngPattern)),function(t,e,n,o){if(o){var s=n.pattern;n.ngPattern?s=r(t):i=n.pattern;var a=zs(s,i,e);n.$observe("pattern",(function(t){var n=a;a=zs(t,i,e),(n&&n.toString())!==(a&&a.toString())&&o.$validate()})),o.$validators.pattern=function(t,e){return o.$isEmpty(e)||L(a)||a.test(e)}}}}}}],ks=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,i,r){if(r){var o=i.maxlength||t(i.ngMaxlength)(e),s=Is(o);i.$observe("maxlength",(function(t){o!==t&&(s=Is(t),o=t,r.$validate())})),r.$validators.maxlength=function(t,e){return s<0||r.$isEmpty(e)||e.length<=s}}}}}],Ps=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,i,r){if(r){var o=i.minlength||t(i.ngMinlength)(e),s=Is(o)||-1;i.$observe("minlength",(function(t){o!==t&&(s=Is(t)||-1,o=t,r.$validate())})),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=s}}}}}];function zs(t,e,n){if(t){if(q(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,xt(n));return t}}function Is(t){var e=k(t);return P(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!It){var n=ut();(a=L(n)?t.jQuery:n?t[n]:void 0)&&a.fn.on?(s=a,M(a.fn,{scope:ke.scope,isolateScope:ke.isolateScope,controller:ke.controller,injector:ke.injector,inheritedData:ke.inheritedData})):s=pe,e=s.cleanData,s.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=(s._data(i)||{}).events)&&n.$destroy&&s(i).triggerHandler("$destroy");e(t)},b.element=s,It=!0}}(),M(b,{errorHandlingConfig:n,bootstrap:Mt,copy:st,extend:M,merge:T,equals:lt,element:s,forEach:A,injector:Ke,noop:I,bind:pt,toJson:ft,fromJson:yt,identity:F,isUndefined:L,isDefined:D,isString:q,isFunction:Y,isObject:O,isNumber:U,isElement:nt,isArray:W,version:Wt,isDate:N,callbacks:{$$counter:0},getTestability:kt,reloadWithDebugInfo:Tt,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Ft,$$minErr:r,$$csp:ct,$$encodeUriSegment:wt,$$encodeUriQuery:Bt,$$lowercase:m,$$stringify:Rt,$$uppercase:p}),l=function(t){var e=r("$injector"),n=r("ng");function i(t,e,n){return t[e]||(t[e]=n())}var o=i(t,"angular",Object);return o.$$minErr=o.$$minErr||r,i(o,"module",(function(){var t={};return function(r,o,s){var a={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(r),o&&t.hasOwnProperty(r)&&(t[r]=null),i(t,r,(function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],l=[],c=h("$injector","invoke","push",i),u={_invokeQueue:t,_configBlocks:i,_runBlocks:l,info:function(t){if(D(t)){if(!O(t))throw n("aobj","Argument '{0}' must be an object","value");return a=t,this}return a},requires:o,name:r,provider:m("$provide","provider"),factory:m("$provide","factory"),service:m("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:m("$provide","decorator",i),animation:m("$animateProvider","register"),filter:m("$filterProvider","register"),controller:m("$controllerProvider","register"),directive:m("$compileProvider","directive"),component:m("$compileProvider","component"),config:c,run:function(t){return l.push(t),this}};return s&&c(s),u;function h(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),u}}function m(e,n,i){return i||(i=t),function(t,o){return o&&Y(o)&&(o.$$moduleName=r),i.push([e,n,arguments]),u}}}))}}))}(t),l("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Wi}),t.provider("$compile",_n).directive({a:Or,input:xo,textarea:xo,form:Yr,script:As,select:Ss,option:Es,ngBind:Bo,ngBindHtml:So,ngBindTemplate:Co,ngClass:To,ngClassEven:Po,ngClassOdd:ko,ngCloak:zo,ngController:Io,ngForm:Gr,ngHide:ys,ngIf:Lo,ngInclude:Do,ngInit:Ro,ngNonBindable:os,ngPluralize:cs,ngRef:hs,ngRepeat:ms,ngShow:fs,ngStyle:_s,ngSwitch:gs,ngSwitchWhen:vs,ngSwitchDefault:bs,ngOptions:ls,ngTransclude:$s,ngModel:ts,ngList:qo,ngChange:Eo,pattern:Ts,ngPattern:Ts,required:Ms,ngRequired:Ms,minlength:Ps,ngMinlength:Ps,maxlength:ks,ngMaxlength:ks,ngValue:wo,ngModelOptions:is}).directive({ngInclude:Oo,input:$o}).directive(Rr).directive(Fo),t.provider({$anchorScroll:Qe,$animate:an,$animateCss:un,$$animateJs:on,$$animateQueue:sn,$$AnimateRunner:cn,$$animateAsyncRun:ln,$browser:mn,$cacheFactory:pn,$controller:Sn,$document:En,$$isDocumentHidden:Mn,$exceptionHandler:Tn,$filter:yr,$$forceReflow:kn,$interpolate:Zn,$interval:Kn,$$intervalFactory:Qn,$http:Hn,$httpParamSerializer:Dn,$httpParamSerializerJQLike:On,$httpBackend:Gn,$xhrFactory:Yn,$jsonpCallbacks:ti,$location:_i,$log:gi,$parse:Vi,$rootScope:Ni,$q:ji,$$q:Li,$sce:Ki,$sceDelegate:Xi,$sniffer:Qi,$$taskTrackerFactory:tr,$templateCache:dn,$templateRequest:ir,$$testability:rr,$timeout:sr,$window:pr,$$rAF:Ui,$$jqLite:Le,$$Map:Ue,$$cookieReader:fr})}]).info({angularVersion:"1.8.2"}),b.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,i){var r=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,i);return 1==r&&0==o.v?e:n}})}]),s((function(){Et(t.document,Mt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));var e=angular,n={exports:{}};!function(t){n.exports=(()=>{const t="object"==typeof window?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let e=null,n=!1;const i=t.WebStreamsPolyfill||{},r=t.isSecureContext;let o=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=r||"MozAppearance"in document.documentElement.style?"iframe":"navigate",a={createWriteStream:function(i,c,u){let h={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},m=0,p=null,d=null,f=null;if(Number.isFinite(c)?([u,c]=[c,u],console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):c&&c.highWaterMark?(console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):h=c||{},!o){e||(e=r?l(a.mitm):function(e){const n="width=200,height=100",i=document.createDocumentFragment(),r={frame:t.open(e,"popup",n),loaded:!1,isIframe:!1,isPopup:!0,remove(){r.frame.close()},addEventListener(...t){i.addEventListener(...t)},dispatchEvent(...t){i.dispatchEvent(...t)},removeEventListener(...t){i.removeEventListener(...t)},postMessage(...t){r.frame.postMessage(...t)}},o=e=>{e.source===r.frame&&(r.loaded=!0,t.removeEventListener("message",o),r.dispatchEvent(new Event("load")))};return t.addEventListener("message",o),r}(a.mitm)),d=new MessageChannel,i=encodeURIComponent(i.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const o={transferringReadable:n,pathname:h.pathname||Math.random().toString().slice(-6)+"/"+i,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+i}};h.size&&(o.headers["Content-Length"]=h.size);const c=[o,"*",[d.port2]];if(n){const t="iframe"===s?void 0:{transform(t,e){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");m+=t.length,e.enqueue(t),p&&(location.href=p,p=null)},flush(){p&&(location.href=p)}};f=new a.TransformStream(t,h.writableStrategy,h.readableStrategy);const e=f.readable;d.port1.postMessage({readableStream:e},[e])}d.port1.onmessage=t=>{t.data.download&&("navigate"===s?(e.remove(),e=null,m?location.href=t.data.download:p=t.data.download):(e.isPopup&&(e.remove(),e=null,"iframe"===s&&l(a.mitm)),l(t.data.download)))},e.loaded?e.postMessage(...c):e.addEventListener("load",(()=>{e.postMessage(...c)}),{once:!0})}let y=[];return!o&&f&&f.writable||new a.WritableStream({write(t){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");o?y.push(t):(d.port1.postMessage(t),m+=t.length,p&&(location.href=p,p=null))},close(){if(o){const t=new Blob(y,{type:"application/octet-stream; charset=utf-8"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=i,e.click()}else d.port1.postMessage("end")},abort(){y=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},h.writableStrategy)},WritableStream:t.WritableStream||i.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function l(t){if(!t)throw new Error("meh");const e=document.createElement("iframe");return e.hidden=!0,e.src=t,e.loaded=!1,e.name="iframe",e.isIframe=!0,e.postMessage=(...t)=>e.contentWindow.postMessage(...t),e.addEventListener("load",(()=>{e.loaded=!0}),{once:!0}),document.body.appendChild(e),e}try{new Response(new ReadableStream),r&&!("serviceWorker"in navigator)&&(o=!0)}catch(c){o=!0}return(t=>{try{t()}catch(e){}})((()=>{const{readable:t}=new TransformStream,e=new MessageChannel;e.port1.postMessage(t,[t]),e.port1.close(),e.port2.close(),n=!0,Object.defineProperty(a,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})})),a})()}();function i(t,e,n,i){let r;n=n||0;let o=(i=i||e.length-1)<=2147483647;for(;i-n>1;)r=o?n+i>>1:v((n+i)/2),e[r]<t?n=r:i=r;return t-e[n]<=e[i]-t?n:i}function r(t,e,n,i){for(let r=1==i?e:n;r>=e&&r<=n;r+=i)if(null!=t[r])return r;return-1}const o=[0,0];function s(t,e,n,i){return o[0]=n<0?R(t,-n):t,o[1]=i<0?R(e,-i):e,o}function a(t,e,n,i){let r,o,a,l=B(t),c=10==n?C:S;return t==e&&(-1==l?(t*=n,e/=n):(t/=n,e*=n)),i?(r=v(c(t)),o=x(c(e)),a=s(w(n,r),w(n,o),r,o),t=a[0],e=a[1]):(r=v(c(g(t))),o=v(c(g(e))),a=s(w(n,r),w(n,o),r,o),t=O(t,a[0]),e=D(e,a[1])),[t,e]}function l(t,e,n,i){let r=a(t,e,n,i);return 0==t&&(r[0]=0),0==e&&(r[1]=0),r}const c={mode:3,pad:.1},u={pad:0,soft:null,mode:0},h={min:u,max:u};function m(t,e,n,i){return Z(n)?d(t,e,n):(u.pad=n,u.soft=i?0:null,u.mode=i?3:0,d(t,e,h))}function p(t,e){return null==t?e:t}function d(t,e,n){let i=n.min,r=n.max,o=p(i.pad,0),s=p(r.pad,0),a=p(i.hard,-M),l=p(r.hard,M),c=p(i.soft,M),u=p(r.soft,-M),h=p(i.mode,0),m=p(r.mode,0),d=e-t;d<1e-9&&(d=0,0!=t&&0!=e||(d=1e-9,2==h&&c!=M&&(o=0),2==m&&u!=-M&&(s=0)));let f=d||g(e)||1e3,y=C(f),_=w(10,v(y)),b=R(O(t-f*(0==d?0==t?.1:1:o),_/10),9),x=t>=c&&(1==h||3==h&&b<=c||2==h&&b>=c)?c:M,B=A(a,b<x&&t>=x?x:$(x,b)),S=R(D(e+f*(0==d?0==e?.1:1:s),_/10),9),E=e<=u&&(1==m||3==m&&S>=u||2==m&&S<=u)?u:-M,T=$(l,S>E&&e<=E?E:A(E,S));return B==T&&0==B&&(T=100),[B,T]}const f=new Intl.NumberFormat(navigator.language).format,y=Math,_=y.PI,g=y.abs,v=y.floor,b=y.round,x=y.ceil,$=y.min,A=y.max,w=y.pow,B=y.sign,C=y.log10,S=y.log2,E=(t,e=1)=>y.asinh(t/e),M=1/0;function T(t){return 1+(0|C((t^t>>31)-(t>>31)))}function k(t,e){return b(t/e)*e}function P(t,e,n){return $(A(t,e),n)}function z(t){return"function"==typeof t?t:()=>t}const I=t=>t,F=(t,e)=>e,V=t=>null,j=t=>!0,L=(t,e)=>t==e;function D(t,e){return x(t/e)*e}function O(t,e){return v(t/e)*e}function R(t,e){return b(t*(e=10**e))/e}const q=new Map;function U(t){return((""+t).split(".")[1]||"").length}function N(t,e,n,i){let r=[],o=i.map(U);for(let s=e;s<n;s++){let e=g(s),n=R(w(t,s),e);for(let t=0;t<i.length;t++){let a=i[t]*n,l=(a>=0&&s>=0?0:e)+(s>=o[t]?0:o[t]),c=R(a,l);r.push(c),q.set(c,l)}}return r}const W={},H=[],Y=[null,null],G=Array.isArray;function J(t){return"string"==typeof t}function Z(t){let e=!1;if(null!=t){let n=t.constructor;e=null==n||n==Object}return e}function X(t){return null!=t&&"object"==typeof t}function K(t,e=Z){let n;if(G(t)){let i=t.find((t=>null!=t));if(G(i)||e(i)){n=Array(t.length);for(let i=0;i<t.length;i++)n[i]=K(t[i],e)}else n=t.slice()}else if(e(t)){n={};for(let i in t)n[i]=K(t[i],e)}else n=t;return n}function Q(t){let e=arguments;for(let n=1;n<e.length;n++){let i=e[n];for(let e in i)Z(t[e])?Q(t[e],K(i[e])):t[e]=K(i[e])}return t}function tt(t,e,n){for(let i,r=0,o=-1;r<e.length;r++){let s=e[r];if(s>o){for(i=s-1;i>=0&&null==t[i];)t[i--]=null;for(i=s+1;i<n&&null==t[i];)t[o=i++]=null}}}const et="undefined"==typeof queueMicrotask?t=>Promise.resolve().then(t):queueMicrotask,nt="u-off",it=document,rt=window;let ot,st;function at(t,e){if(null!=e){let n=t.classList;!n.contains(e)&&n.add(e)}}function lt(t,e){let n=t.classList;n.contains(e)&&n.remove(e)}function ct(t,e,n){t.style[e]=n+"px"}function ut(t,e,n,i){let r=it.createElement(t);return null!=e&&at(r,e),null!=n&&n.insertBefore(r,i),r}function ht(t,e){return ut("div",t,e)}const mt=new WeakMap;function pt(t,e,n,i,r){let o="translate("+e+"px,"+n+"px)";o!=mt.get(t)&&(t.style.transform=o,mt.set(t,o),e<0||n<0||e>i||n>r?at(t,nt):lt(t,nt))}const dt=new WeakMap;function ft(t,e,n){let i=e+n;i!=dt.get(t)&&(dt.set(t,i),t.style.background=e,t.style.borderColor=n)}const yt=new WeakMap;function _t(t,e,n,i){let r=e+""+n;r!=yt.get(t)&&(yt.set(t,r),t.style.height=n+"px",t.style.width=e+"px",t.style.marginLeft=i?-e/2+"px":0,t.style.marginTop=i?-n/2+"px":0)}const gt={passive:!0},vt=Q({capture:!0},gt);function bt(t,e,n,i){e.addEventListener(t,n,i?vt:gt)}function xt(t,e,n,i){e.removeEventListener(t,n,i?vt:gt)}!function t(){let e=devicePixelRatio;ot!=e&&(ot=e,st&&xt("change",st,t),st=matchMedia(`(min-resolution: ${ot-.001}dppx) and (max-resolution: ${ot+.001}dppx)`),bt("change",st,t),rt.dispatchEvent(new CustomEvent("dppxchange")))}();const $t=["January","February","March","April","May","June","July","August","September","October","November","December"],At=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function wt(t){return t.slice(0,3)}const Bt=At.map(wt),Ct=$t.map(wt),St={MMMM:$t,MMM:Ct,WWWW:At,WWW:Bt};function Et(t){return(t<10?"0":"")+t}const Mt={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>Et(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>Et(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>Et(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return 0==e?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>Et(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>Et(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>{return((e=t.getMilliseconds())<10?"00":e<100?"0":"")+e;var e}};function Tt(t,e){e=e||St;let n,i=[],r=/\{([a-z]+)\}|[^{]+/gi;for(;n=r.exec(t);)i.push("{"==n[0][0]?Mt[n[1]]:n[0]);return t=>{let n="";for(let r=0;r<i.length;r++)n+="string"==typeof i[r]?i[r]:i[r](t,e);return n}}const kt=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const Pt=t=>t%1==0,zt=[1,2,2.5,5],It=N(10,-16,0,zt),Ft=N(10,0,16,zt),Vt=Ft.filter(Pt),jt=It.concat(Ft),Lt="{M}/{D}",Dt="\n"+Lt,Ot=Dt+"/{YY}",Rt="{h}:{mm}{aa}",qt=null;function Ut(t){let e=1e3*t,n=60*e,i=60*n,r=24*i,o=30*r,s=365*r;return[(1==t?N(10,0,3,zt).filter(Pt):N(10,-3,0,zt)).concat([e,5*e,10*e,15*e,30*e,n,5*n,10*n,15*n,30*n,i,2*i,3*i,4*i,6*i,8*i,12*i,r,2*r,3*r,4*r,5*r,6*r,7*r,8*r,9*r,10*r,15*r,o,2*o,3*o,4*o,6*o,s,2*s,5*s,10*s,25*s,50*s,100*s]),[[s,"{YYYY}",qt,qt,qt,qt,qt,qt,1],[28*r,"{MMM}","\n{YYYY}",qt,qt,qt,qt,qt,1],[r,Lt,"\n{YYYY}",qt,qt,qt,qt,qt,1],[i,"{h}{aa}",Ot,qt,Dt,qt,qt,qt,1],[n,Rt,Ot,qt,Dt,qt,qt,qt,1],[e,":{ss}",Ot+" "+Rt,qt,Dt+" "+Rt,qt,"\n{h}:{mm}{aa}",qt,1],[t,":{ss}.{fff}",Ot+" "+Rt,qt,Dt+" "+Rt,qt,"\n{h}:{mm}{aa}",qt,1]],function(e){return(a,l,c,u,h,m)=>{let p=[],d=h>=s,f=h>=o&&h<s,y=e(c),_=R(y*t,3),g=Kt(y.getFullYear(),d?0:y.getMonth(),f||d?1:y.getDate()),x=R(g*t,3);if(f||d){let n=f?h/o:0,i=d?h/s:0,r=_==x?_:R(Kt(g.getFullYear()+i,g.getMonth()+n,1)*t,3),a=new Date(b(r/t)),l=a.getFullYear(),c=a.getMonth();for(let o=0;r<=u;o++){let s=Kt(l+i*o,c+n*o,1),a=s-e(R(s*t,3));r=R((+s+a)*t,3),r<=u&&p.push(r)}}else{let o=h>=r?r:h,s=x+(v(c)-v(_))+D(_-x,o);p.push(s);let d=e(s),f=d.getHours()+d.getMinutes()/n+d.getSeconds()/i,y=h/i,g=m/a.axes[l]._space;for(;s=R(s+h,1==t?0:3),!(s>u);)if(y>1){let t=v(R(f+y,6))%24,n=e(s).getHours()-t;n>1&&(n=-1),s-=n*i,f=(f+y)%24,R((s-p[p.length-1])/h,3)*g>=.7&&p.push(s)}else p.push(s)}return p}}]}const[Nt,Wt,Ht]=Ut(1),[Yt,Gt,Jt]=Ut(.001);function Zt(t,e){return t.map((t=>t.map(((n,i)=>0==i||8==i||null==n?n:e(1==i||0==t[8]?n:t[1]+n)))))}function Xt(t,e){return(n,i,r,o,s)=>{let a,l,c,u,h,m,p=e.find((t=>s>=t[0]))||e[e.length-1];return i.map((e=>{let n=t(e),i=n.getFullYear(),r=n.getMonth(),o=n.getDate(),s=n.getHours(),d=n.getMinutes(),f=n.getSeconds(),y=i!=a&&p[2]||r!=l&&p[3]||o!=c&&p[4]||s!=u&&p[5]||d!=h&&p[6]||f!=m&&p[7]||p[1];return a=i,l=r,c=o,u=s,h=d,m=f,y(n)}))}}function Kt(t,e,n){return new Date(t,e,n)}function Qt(t,e){return e(t)}N(2,-53,53,[1]);function te(t,e){return(n,i)=>e(t(i))}const ee={show:!0,live:!0,isolate:!1,markers:{show:!0,width:2,stroke:function(t,e){let n=t.series[e];return n.width?n.stroke(t,e):n.points.width?n.points.stroke(t,e):null},fill:function(t,e){return t.series[e].fill(t,e)},dash:"solid"},idx:null,idxs:null,values:[]};const ne=[0,0];function ie(t,e,n){return t=>{0==t.button&&n(t)}}function re(t,e,n){return n}const oe={show:!0,x:!0,y:!0,lock:!1,move:function(t,e,n){return ne[0]=e,ne[1]=n,ne},points:{show:function(t,e){let n=t.cursor.points,i=ht(),r=n.size(t,e);ct(i,"width",r),ct(i,"height",r);let o=r/-2;ct(i,"marginLeft",o),ct(i,"marginTop",o);let s=n.width(t,e,r);return s&&ct(i,"borderWidth",s),i},size:function(t,e){return Ae(t.series[e].points.width,1)},width:0,stroke:function(t,e){let n=t.series[e].points;return n._stroke||n._fill},fill:function(t,e){let n=t.series[e].points;return n._fill||n._stroke}},bind:{mousedown:ie,mouseup:ie,click:ie,dblclick:ie,mousemove:re,mouseleave:re,mouseenter:re},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},left:-10,top:-10,idx:null,dataIdx:function(t,e,n){return n},idxs:null},se={show:!0,stroke:"rgba(0,0,0,0.07)",width:2,filter:F},ae=Q({},se,{size:10}),le='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',ce="bold "+le,ue={show:!0,scale:"x",stroke:"#000",space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:ce,side:2,grid:se,ticks:ae,font:le,rotate:0},he={show:!0,scale:"x",auto:!1,sorted:1,min:M,max:-M,idxs:[]};function me(t,e,n,i,r){return e.map((t=>null==t?"":f(t)))}function pe(t,e,n,i,r,o,s){let a=[],l=q.get(r)||0;for(let c=n=s?n:R(D(n,r),l);c<=i;c=R(c+r,l))a.push(Object.is(c,-0)?0:c);return a}function de(t,e,n,i,r,o,s){const a=[],l=t.scales[t.axes[e].scale].log,c=v((10==l?C:S)(n));r=w(l,c),c<0&&(r=R(r,-c));let u=n;do{a.push(u),u=R(u+r,q.get(r)),u>=r*l&&(r=u)}while(u<=i);return a}function fe(t,e,n,i,r,o,s){let a=t.scales[t.axes[e].scale].asinh,l=i>a?de(t,e,A(a,n),i,r):[a],c=i>=0&&n<=0?[0]:[];return(n<-a?de(t,e,A(a,-i),-n,r):[a]).reverse().map((t=>-t)).concat(c,l)}const ye=/./,_e=/[12357]/,ge=/[125]/,ve=/1/;function be(t,e,n,i,r){let o=t.axes[n],s=o.scale,a=t.scales[s];if(3==a.distr&&2==a.log)return e;let l=t.valToPos,c=o._space,u=l(10,s),h=l(9,s)-u>=c?ye:l(7,s)-u>=c?_e:l(5,s)-u>=c?ge:ve;return e.map((t=>4==a.distr&&0==t||h.test(t)?t:null))}function xe(t,e){return null==e?"":f(e)}const $e={show:!0,scale:"y",stroke:"#000",space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:ce,side:3,grid:se,ticks:ae,font:le,rotate:0};function Ae(t,e){return R((3+2*(t||1))*e,3)}function we(t,e,n,i){let r=t.scales[t.series[e].scale],o=t.bands&&t.bands.some((t=>t.series[0]==e));return 3==r.distr||o?r.min:0}const Be={scale:null,auto:!0,min:M,max:-M},Ce={show:!0,auto:!0,sorted:0,alpha:1,facets:[Q({},Be,{scale:"x"}),Q({},Be,{scale:"y"})]},Se={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:(t,e,n,i,r)=>r,alpha:1,points:{show:function(t,e){let{scale:n,idxs:i}=t.series[0],r=t._data[0],o=t.valToPos(r[i[0]],n,!0),s=t.valToPos(r[i[1]],n,!0),a=g(s-o)/(t.series[e].points.space*ot);return i[1]-i[0]<=a},filter:null},values:null,min:M,max:-M,idxs:[],path:null,clip:null};function Ee(t,e,n,i,r){return n/10}const Me={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Te=Q({},Me,{time:!1,ori:1}),ke={};function Pe(t,e){let n=ke[t];return n||(n={key:t,plots:[],sub(t){n.plots.push(t)},unsub(t){n.plots=n.plots.filter((e=>e!=t))},pub(t,e,i,r,o,s,a){for(let l=0;l<n.plots.length;l++)n.plots[l]!=e&&n.plots[l].pub(t,e,i,r,o,s,a)}},null!=t&&(ke[t]=n)),n}function ze(t,e,n){const i=t.series[e],r=t.scales,o=t.bbox,s=2==t.mode?r[i.facets[0].scale]:r[t.series[0].scale];let a=t._data[0],l=t._data[e],c=s,u=2==t.mode?r[i.facets[1].scale]:r[i.scale],h=o.left,m=o.top,p=o.width,d=o.height,f=t.valToPosH,y=t.valToPosV;return 0==c.ori?n(i,a,l,c,u,f,y,h,m,p,d,De,Re,Ue,We,Ye):n(i,a,l,c,u,y,f,m,h,d,p,Oe,qe,Ne,He,Ge)}function Ie(t,e,n,i,r){return ze(t,e,((t,e,o,s,a,l,c,u,h,m,p)=>{let d=t.pxRound;const f=s.dir*(0==s.ori?1:-1),y=0==s.ori?Re:qe;let _,g;1==f?(_=n,g=i):(_=i,g=n);let v=d(l(e[_],s,m,u)),b=d(c(o[_],a,p,h)),x=d(l(e[g],s,m,u)),$=d(c(a.max,a,p,h)),A=new Path2D(r);return y(A,x,$),y(A,v,$),y(A,v,b),A}))}function Fe(t,e,n,i,r,o){let s=null;if(t.length>0){s=new Path2D;const a=0==e?Ue:Ne;let l=n;for(let e=0;e<t.length;e++){let n=t[e];n[1]>n[0]&&(a(s,l,i,n[0]-l,i+o),l=n[1])}a(s,l,i,n+r-l,i+o)}return s}function Ve(t,e,n){let i=t[t.length-1];i&&i[0]==e?i[1]=n:t.push([e,n])}function je(t){return 0==t?I:1==t?b:e=>k(e,t)}function Le(t){let e=0==t?De:Oe,n=0==t?(t,e,n,i,r,o)=>{t.arcTo(e,n,i,r,o)}:(t,e,n,i,r,o)=>{t.arcTo(n,e,r,i,o)},i=0==t?(t,e,n,i,r)=>{t.rect(e,n,i,r)}:(t,e,n,i,r)=>{t.rect(n,e,r,i)};return(t,r,o,s,a,l=0)=>{0==l?i(t,r,o,s,a):(l=Math.min(l,s/2,a/2),e(t,r+l,o),n(t,r+s,o,r+s,o+a,l),n(t,r+s,o+a,r,o+a,l),n(t,r,o+a,r,o,l),n(t,r,o,r+s,o,l),t.closePath())}}const De=(t,e,n)=>{t.moveTo(e,n)},Oe=(t,e,n)=>{t.moveTo(n,e)},Re=(t,e,n)=>{t.lineTo(e,n)},qe=(t,e,n)=>{t.lineTo(n,e)},Ue=Le(0),Ne=Le(1),We=(t,e,n,i,r,o)=>{t.arc(e,n,i,r,o)},He=(t,e,n,i,r,o)=>{t.arc(n,e,i,r,o)},Ye=(t,e,n,i,r,o,s)=>{t.bezierCurveTo(e,n,i,r,o,s)},Ge=(t,e,n,i,r,o,s)=>{t.bezierCurveTo(n,e,r,i,s,o)};function Je(t){return(t,e,n,i,r)=>ze(t,e,((e,o,s,a,l,c,u,h,m,p,d)=>{let f,y,{pxRound:g,points:v}=e;0==a.ori?(f=De,y=We):(f=Oe,y=He);const b=R(v.width*ot,3);let x=(v.size-v.width)/2*ot,$=R(2*x,3),A=new Path2D,w=new Path2D,{left:B,top:C,width:S,height:E}=t.bbox;Ue(w,B-$,C-$,S+2*$,E+2*$);const M=t=>{if(null!=s[t]){let e=g(c(o[t],a,p,h)),n=g(u(s[t],l,d,m));f(A,e+x,n),y(A,e,n,x,0,2*_)}};if(r)r.forEach(M);else for(let t=n;t<=i;t++)M(t);return{stroke:b>0?A:null,fill:A,clip:w,flags:3}}))}function Ze(t){return(e,n,i,r,o,s)=>{i!=r&&(o!=i&&s!=i&&t(e,n,i),o!=r&&s!=r&&t(e,n,r),t(e,n,s))}}const Xe=Ze(Re),Ke=Ze(qe);function Qe(){return(t,e,n,i)=>ze(t,e,((o,s,a,l,c,u,h,m,p,d,f)=>{let y,_,g=o.pxRound;0==l.ori?(y=Re,_=Xe):(y=qe,_=Ke);const v=l.dir*(0==l.ori?1:-1),b={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},x=b.stroke;let w,B,C,S,E=M,T=-M,k=[],P=g(u(s[1==v?n:i],l,d,m)),z=!1,I=!1,F=r(a,n,i,1*v),V=r(a,n,i,-1*v),j=g(u(s[F],l,d,m)),L=g(u(s[V],l,d,m));j>m&&Ve(k,m,j);for(let t=1==v?n:i;t>=n&&t<=i;t+=v){let e=g(u(s[t],l,d,m));if(e==P)null!=a[t]?(B=g(h(a[t],c,f,p)),E==M&&(y(x,e,B),w=B),E=$(B,E),T=A(B,T)):null===a[t]&&(z=I=!0);else{let n=!1;E!=M?(_(x,P,E,T,w,B),C=S=P):z&&(n=!0,z=!1),null!=a[t]?(B=g(h(a[t],c,f,p)),y(x,e,B),E=T=w=B,I&&e-P>1&&(n=!0),I=!1):(E=M,T=-M,null===a[t]&&(z=!0,e-P>1&&(n=!0))),n&&Ve(k,C,e),P=e}}if(E!=M&&E!=T&&S!=P&&_(x,P,E,T,w,B),L<m+d&&Ve(k,L,m+d),null!=o.fill){let n=b.fill=new Path2D(x),i=g(h(o.fillTo(t,e,o.min,o.max),c,f,p));y(n,L,i),y(n,j,i)}return b.gaps=k=o.gaps(t,e,n,i,k),o.spanGaps||(b.clip=Fe(k,l.ori,m,p,d,f)),t.bands.length>0&&(b.band=Ie(t,e,n,i,x)),b}))}function tn(t,e,n,i,r,o){const s=t.length;if(s<2)return null;const a=new Path2D;if(n(a,t[0],e[0]),2==s)i(a,t[1],e[1]);else{let n=Array(s),i=Array(s-1),o=Array(s-1),l=Array(s-1);for(let r=0;r<s-1;r++)o[r]=e[r+1]-e[r],l[r]=t[r+1]-t[r],i[r]=o[r]/l[r];n[0]=i[0];for(let t=1;t<s-1;t++)0===i[t]||0===i[t-1]||i[t-1]>0!=i[t]>0?n[t]=0:(n[t]=3*(l[t-1]+l[t])/((2*l[t]+l[t-1])/i[t-1]+(l[t]+2*l[t-1])/i[t]),isFinite(n[t])||(n[t]=0));n[s-1]=i[s-2];for(let c=0;c<s-1;c++)r(a,t[c]+l[c]/3,e[c]+n[c]*l[c]/3,t[c+1]-l[c]/3,e[c+1]-n[c+1]*l[c]/3,t[c+1],e[c+1])}return a}const en=new Set;function nn(){en.forEach((t=>{t.syncRect(!0)}))}bt("resize",rt,nn),bt("scroll",rt,nn,!0);const rn=Qe(),on=Je();function sn(t,e,n,i){return(i?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map(((t,i)=>an(t,i,e,n)))}function an(t,e,n,i){return Q({},0==e?n:i,t)}function ln(t,e,n){return null==e?Y:[e,n]}const cn=ln;function un(t,e,n){return null==e?Y:m(e,n,.1,!0)}function hn(t,e,n,i){return null==e?Y:a(e,n,t.scales[i].log,!1)}const mn=hn;function pn(t,e,n,i){return null==e?Y:l(e,n,t.scales[i].log,!1)}const dn=pn;function fn(t){let e,n;return[t=t.replace(/(\d+)px/,((t,i)=>(e=b((n=+i)*ot))+"px")),e,n]}function yn(t){t.show&&[t.font,t.labelFont].forEach((t=>{let e=R(t[2]*ot,1);t[0]=t[0].replace(/[0-9.]+px/,e+"px"),t[1]=e}))}function _n(t,e,n){const r={mode:p(t.mode,1)},o=r.mode;function s(t,e){return((3==e.distr?C(t>0?t:e.clamp(r,t,e.min,e.max,e.key)):4==e.distr?E(t,e.asinh):t)-e._min)/(e._max-e._min)}function u(t,e,n,i){let r=s(t,e);return i+n*(-1==e.dir?1-r:r)}function h(t,e,n,i){let r=s(t,e);return i+n*(-1==e.dir?r:1-r)}function d(t,e,n,i){return 0==e.ori?u(t,e,n,i):h(t,e,n,i)}r.valToPosH=u,r.valToPosV=h;let f=!1;r.status=0;const v=r.root=ht("uplot");if(null!=t.id&&(v.id=t.id),at(v,t.class),t.title){ht("u-title",v).textContent=t.title}const B=ut("canvas"),S=r.ctx=B.getContext("2d"),I=ht("u-wrap",v),O=r.under=ht("u-under",I);I.appendChild(B);const U=r.over=ht("u-over",I),N=+p((t=K(t)).pxAlign,1),tt=je(N);(t.plugins||[]).forEach((e=>{e.opts&&(t=e.opts(r,t)||t)}));const st=t.ms||.001,mt=r.series=1==o?sn(t.series||[],he,Se,!1):(dt=t.series||[null],yt=Ce,dt.map(((t,e)=>0==e?null:Q({},yt,t))));var dt,yt;const gt=r.axes=sn(t.axes||[],ue,$e,!0),vt=r.scales={},$t=r.bands=t.bands||[];$t.forEach((t=>{t.fill=z(t.fill||null)}));const At=2==o?mt[1].facets[0].scale:mt[0].scale,wt={axes:function(){for(let t=0;t<gt.length;t++){let e=gt[t];if(!e.show||!e._show)continue;let n,i,o=e.side,s=o%2,a=e.stroke(r,t),l=0==o||3==o?-1:1;if(e.label){let t=e.labelGap*l,r=b((e._lpos+t)*ot);Ln(e.labelFont[0],a,"center",2==o?"top":"bottom"),S.save(),1==s?(n=i=0,S.translate(r,b(De+Re/2)),S.rotate((3==o?-_:_)/2)):(n=b(Le+Oe/2),i=r),S.fillText(e.label,n,i),S.restore()}let[c,u]=e._found;if(0==u)continue;let h=vt[e.scale],m=0==s?Oe:Re,p=0==s?Le:De,f=b(e.gap*ot),y=e._splits,g=2==h.distr?y.map((t=>zn[t])):y,v=2==h.distr?zn[y[1]]-zn[y[0]]:c,x=e.ticks,$=x.show?b(x.size*ot):0,A=e._rotate*-_/180,w=tt(e._pos*ot),B=w+($+f)*l;i=0==s?B:0,n=1==s?B:0;let C=e.font[0],E=1==e.align?"left":2==e.align?"right":A>0?"left":A<0?"right":0==s?"center":3==o?"right":"left";Ln(C,a,E,A||1==s?"middle":2==o?"top":"bottom");let M=1.5*e.font[1],T=y.map((t=>tt(d(t,h,m,p)))),k=e._values;for(let t=0;t<k.length;t++){let e=k[t];if(null!=e){0==s?n=T[t]:i=T[t],e=""+e;let r=-1==e.indexOf("\n")?[e]:e.split(/\n/gm);for(let t=0;t<r.length;t++){let e=r[t];A?(S.save(),S.translate(n,i+t*M),S.rotate(A),S.fillText(e,0,0),S.restore()):S.fillText(e,n,i+t*M)}}}x.show&&Hn(T,x.filter(r,g,t,u,v),s,o,w,$,R(x.width*ot,3),x.stroke(r,t),x.dash,x.cap);let P=e.grid;P.show&&Hn(T,P.filter(r,g,t,u,v),s,0==s?2:1,0==s?De:Le,0==s?Re:Oe,R(P.width*ot,3),P.stroke(r,t),P.dash,P.cap)}Wi("drawAxes")},series:function(){vn>0&&(mt.forEach(((t,n)=>{if(n>0&&t.show&&null==t._paths){let i=function(t){let e=P(bn-1,0,vn-1),n=P(xn+1,0,vn-1);for(;null==t[e]&&e>0;)e--;for(;null==t[n]&&n<vn-1;)n++;return[e,n]}(e[n]);t._paths=t.paths(r,n,i[0],i[1])}})),mt.forEach(((t,e)=>{if(e>0&&t.show){Pn!=t.alpha&&(S.globalAlpha=Pn=t.alpha),On(e,!1),t._paths&&Rn(e,!1);{On(e,!0);let n=t.points.show(r,e,bn,xn),i=t.points.filter(r,e,n,t._paths?t._paths.gaps:null);(n||i)&&(t.points._paths=t.points.paths(r,e,bn,xn,i),Rn(e,!0))}1!=Pn&&(S.globalAlpha=Pn=1),Wi("drawSeries",e)}})))}},Bt=(t.drawOrder||["axes","series"]).map((t=>wt[t]));function Ct(e){let n=vt[e];if(null==n){let i=(t.scales||W)[e]||W;if(null!=i.from)Ct(i.from),vt[e]=Q({},vt[i.from],i,{key:e});else{n=vt[e]=Q({},e==At?Me:Te,i),2==o&&(n.time=!1),n.key=e;let t=n.time,r=n.range,s=G(r);if((e!=At||2==o)&&(!s||null!=r[0]&&null!=r[1]||(r={min:null==r[0]?c:{mode:1,hard:r[0],soft:r[0]},max:null==r[1]?c:{mode:1,hard:r[1],soft:r[1]}},s=!1),!s&&Z(r))){let t=r;r=(e,n,i)=>null==n?Y:m(n,i,t)}n.range=z(r||(t?cn:e==At?3==n.distr?mn:4==n.distr?dn:ln:3==n.distr?hn:4==n.distr?pn:un)),n.auto=z(!s&&n.auto),n.clamp=z(n.clamp||Ee),n._min=n._max=null}}}Ct("x"),Ct("y"),1==o&&mt.forEach((t=>{Ct(t.scale)})),gt.forEach((t=>{Ct(t.scale)}));for(let i in t.scales)Ct(i);const St=vt[At],Et=St.distr;let Mt,kt;0==St.ori?(at(v,"u-hz"),Mt=u,kt=h):(at(v,"u-vt"),Mt=h,kt=u);const Pt={};for(let i in vt){let t=vt[i];null==t.min&&null==t.max||(Pt[i]={min:t.min,max:t.max},t.min=t.max=null)}const zt=t.tzDate||(t=>new Date(b(t/st))),It=t.fmtDate||Tt,Ft=1==st?Ht(zt):Jt(zt),Lt=Xt(zt,Zt(1==st?Wt:Gt,It)),Dt=te(zt,Qt("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",It)),Ot=[],Rt=r.legend=Q({},ee,t.legend),qt=Rt.show,Ut=Rt.markers;let Kt;Rt.idxs=Ot,Ut.width=z(Ut.width),Ut.dash=z(Ut.dash),Ut.stroke=z(Ut.stroke),Ut.fill=z(Ut.fill);let ne,ie=[],re=[],se=!1,ae={};if(Rt.live){const t=mt[1]?mt[1].values:null;se=null!=t,ne=se?t(r,1,0):{_:0};for(let e in ne)ae[e]="--"}if(qt)if(Kt=ut("table","u-legend",v),se){let t=ut("tr","u-thead",Kt);for(var le in ut("th",null,t),ne)ut("th","u-label",t).textContent=le}else at(Kt,"u-inline"),Rt.live&&at(Kt,"u-live");const ce={show:!0},ye={show:!1};const _e=new Map;function ge(t,e,n){const i=_e.get(e)||{},o=Je.bind[t](r,e,n);o&&(bt(t,e,i[t]=o),_e.set(e,i))}function ve(t,e,n){const i=_e.get(e)||{};for(let r in i)null!=t&&r!=t||(xt(r,e,i[r]),delete i[r]);null==t&&_e.delete(e)}let Be=0,ke=0,ze=0,Ie=0,Fe=0,Ve=0,Le=0,De=0,Oe=0,Re=0;r.bbox={};let qe=!1,Ue=!1,Ne=!1,We=!1,He=!1;function Ye(t,e,n){(n||t!=r.width||e!=r.height)&&Ge(t,e),Jn(!1),Ne=!0,Ue=!0,We=He=Je.left>=0,ci()}function Ge(t,e){r.width=Be=ze=t,r.height=ke=Ie=e,Fe=Ve=0,function(){let t=!1,e=!1,n=!1,i=!1;gt.forEach(((r,o)=>{if(r.show&&r._show){let{side:o,_size:s}=r,a=o%2,l=s+(null!=r.label?r.labelSize:0);l>0&&(a?(ze-=l,3==o?(Fe+=l,i=!0):n=!0):(Ie-=l,0==o?(Ve+=l,t=!0):e=!0))}})),tn[0]=t,tn[1]=n,tn[2]=e,tn[3]=i,ze-=gn[1]+gn[3],Fe+=gn[3],Ie-=gn[2]+gn[0],Ve+=gn[0]}(),function(){let t=Fe+ze,e=Ve+Ie,n=Fe,i=Ve;function r(r,o){switch(r){case 1:return t+=o,t-o;case 2:return e+=o,e-o;case 3:return n-=o,n+o;case 0:return i-=o,i+o}}gt.forEach(((t,e)=>{if(t.show&&t._show){let e=t.side;t._pos=r(e,t._size),null!=t.label&&(t._lpos=r(e,t.labelSize))}}))}();let n=r.bbox;Le=n.left=k(Fe*ot,.5),De=n.top=k(Ve*ot,.5),Oe=n.width=k(ze*ot,.5),Re=n.height=k(Ie*ot,.5)}r.setSize=function({width:t,height:e}){Ye(t,e)};const Je=r.cursor=Q({},oe,{drag:{y:2==o}},t.cursor);{Je.idxs=Ot,Je._lock=!1;let t=Je.points;t.show=z(t.show),t.size=z(t.size),t.stroke=z(t.stroke),t.width=z(t.width),t.fill=z(t.fill)}const Ze=r.focus=Q({},t.focus||{alpha:.3},Je.focus),Xe=Ze.prox>=0;let Ke=[null];function Qe(t,e){if(1==o||e>0){let e=1==o&&vt[t.scale].time,n=t.value;t.value=e?J(n)?te(zt,Qt(n,It)):n||Dt:n||xe,t.label=t.label||(e?"Time":"Value")}if(e>0){t.width=null==t.width?1:t.width,t.paths=t.paths||rn||V,t.fillTo=z(t.fillTo||we),t.pxAlign=+p(t.pxAlign,N),t.pxRound=je(t.pxAlign),t.stroke=z(t.stroke||null),t.fill=z(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let e=Ae(t.width,1),n=t.points=Q({},{size:e,width:A(1,.2*e),stroke:t.stroke,space:2*e,paths:on,_stroke:null,_fill:null},t.points);n.show=z(n.show),n.filter=z(n.filter),n.fill=z(n.fill),n.stroke=z(n.stroke),n.paths=z(n.paths),n.pxAlign=t.pxAlign}if(qt){let n=function(t,e){if(0==e&&(se||!Rt.live||2==o))return Y;let n=[],i=ut("tr","u-series",Kt,Kt.childNodes[e]);at(i,t.class),t.show||at(i,nt);let s=ut("th",null,i);if(Ut.show){let t=ht("u-marker",s);if(e>0){let n=Ut.width(r,e);n&&(t.style.border=n+"px "+Ut.dash(r,e)+" "+Ut.stroke(r,e)),t.style.background=Ut.fill(r,e)}}let a=ht("u-label",s);for(var l in a.textContent=t.label,e>0&&(Ut.show||(a.style.color=t.width>0?Ut.stroke(r,e):Ut.fill(r,e)),ge("click",s,(e=>{if(Je._lock)return;let n=mt.indexOf(t);if((e.ctrlKey||e.metaKey)!=Rt.isolate){let t=mt.some(((t,e)=>e>0&&e!=n&&t.show));mt.forEach(((e,i)=>{i>0&&bi(i,t?i==n?ce:ye:ce,!0,Hi.setSeries)}))}else bi(n,{show:!t.show},!0,Hi.setSeries)})),Xe&&ge("mouseenter",s,(e=>{Je._lock||bi(mt.indexOf(t),wi,!0,Hi.setSeries)}))),ne){let t=ut("td","u-value",i);t.textContent="--",n.push(t)}return[i,n]}(t,e);ie.splice(e,0,n[0]),re.splice(e,0,n[1]),Rt.values.push(null)}if(Je.show){Ot.splice(e,0,null);let n=function(t,e){if(e>0){let n=Je.points.show(r,e);if(n)return at(n,"u-cursor-pt"),at(n,t.class),pt(n,-10,-10,ze,Ie),U.insertBefore(n,Ke[e]),n}}(t,e);n&&Ke.splice(e,0,n)}}r.addSeries=function(t,e){t=an(t,e=null==e?mt.length:e,he,Se),mt.splice(e,0,t),Qe(mt[e],e)},r.delSeries=function(t){if(mt.splice(t,1),qt){Rt.values.splice(t,1),re.splice(t,1);let e=ie.splice(t,1)[0];ve(null,e.firstChild),e.remove()}Je.show&&(Ot.splice(t,1),Ke.length>1&&Ke.splice(t,1)[0].remove())};const tn=[!1,!1,!1,!1];function nn(t,e,n,i){let[r,o,s,a]=n,l=e%2,c=0;return 0==l&&(a||o)&&(c=0==e&&!r||2==e&&!s?b(ue.size/3):0),1==l&&(r||s)&&(c=1==e&&!o||3==e&&!a?b($e.size/2):0),c}const _n=r.padding=(t.padding||[nn,nn,nn,nn]).map((t=>z(p(t,nn)))),gn=r._padding=_n.map(((t,e)=>t(r,e,tn,0)));let vn,bn=null,xn=null;const $n=1==o?mt[0].idxs:null;let An,wn,Bn,Cn,Sn,En,Mn,Tn,kn,Pn,zn=null,In=!1;function Fn(t,n){if(2==o){vn=0;for(let t=1;t<mt.length;t++)vn+=e[t][0].length;r.data=e=t}else(e=(t||[]).slice())[0]=e[0]||[],r.data=e.slice(),zn=e[0],vn=zn.length,2==Et&&(e[0]=zn.map(((t,e)=>e)));if(r._data=e,Jn(!0),Wi("setData"),!1!==n){let t=St;t.auto(r,In)?Vn():vi(At,t.min,t.max),We=Je.left>=0,He=!0,ci()}}function Vn(){let t,n;In=!0,1==o&&(vn>0?(bn=$n[0]=0,xn=$n[1]=vn-1,t=e[0][bn],n=e[0][xn],2==Et?(t=bn,n=xn):1==vn&&(3==Et?[t,n]=a(t,t,St.log,!1):4==Et?[t,n]=l(t,t,St.log,!1):St.time?n=t+b(86400/st):[t,n]=m(t,n,.1,!0))):(bn=$n[0]=t=null,xn=$n[1]=n=null)),vi(At,t,n)}function jn(t="#0000",e,n=H,i="butt",r="#0000",o="round"){t!=An&&(S.strokeStyle=An=t),r!=wn&&(S.fillStyle=wn=r),e!=Bn&&(S.lineWidth=Bn=e),o!=Sn&&(S.lineJoin=Sn=o),i!=En&&(S.lineCap=En=i),n!=Cn&&S.setLineDash(Cn=n)}function Ln(t,e,n,i){e!=wn&&(S.fillStyle=wn=e),t!=Mn&&(S.font=Mn=t),n!=Tn&&(S.textAlign=Tn=n),i!=kn&&(S.textBaseline=kn=i)}function Dn(t,e,n,i){if(t.auto(r,In)&&(null==e||null==e.min)){let e=p(bn,0),r=p(xn,i.length-1),o=null==n.min?3==t.distr?function(t,e,n){let i=M,r=-M;for(let o=e;o<=n;o++)t[o]>0&&(i=$(i,t[o]),r=A(r,t[o]));return[i==M?1:i,r==-M?10:r]}(i,e,r):function(t,e,n,i){let r=M,o=-M;if(1==i)r=t[e],o=t[n];else if(-1==i)r=t[n],o=t[e];else for(let s=e;s<=n;s++)null!=t[s]&&(r=$(r,t[s]),o=A(o,t[s]));return[r,o]}(i,e,r):[n.min,n.max];t.min=$(t.min,n.min=o[0]),t.max=A(t.max,n.max=o[1])}}function On(t,e){let n=e?mt[t].points:mt[t];n._stroke=n.stroke(r,t),n._fill=n.fill(r,t)}function Rn(t,n){let i=n?mt[t].points:mt[t],o=i._stroke,s=i._fill,{stroke:a,fill:l,clip:c,flags:u}=i._paths,h=null,m=R(i.width*ot,3),d=m%2/2;n&&null==s&&(s=m>0?"#fff":o);let f=1==i.pxAlign;if(f&&S.translate(d,d),!n){let t=Le,e=De,n=Oe,r=Re,o=m*ot/2;0==i.min&&(r+=o),0==i.max&&(e-=o,r+=o),h=new Path2D,h.rect(t,e,n,r)}n?qn(o,m,i.dash,i.cap,s,a,l,u,c):function(t,n,i,o,s,a,l,c,u,h,m){let d=!1;$t.forEach(((f,y)=>{if(f.series[0]==t){let t,_=mt[f.series[1]],g=e[f.series[1]],v=(_._paths||W).band,b=null;_.show&&v&&function(t,e,n){for(e=p(e,0),n=p(n,t.length-1);e<=n;){if(null!=t[e])return!0;e++}return!1}(g,bn,xn)?(b=f.fill(r,y)||a,t=_._paths.clip):v=null,qn(n,i,o,s,b,l,c,u,h,m,t,v),d=!0}})),d||qn(n,i,o,s,a,l,c,u,h,m)}(t,o,m,i.dash,i.cap,s,a,l,u,h,c),f&&S.translate(-d,-d)}r.setData=Fn;function qn(t,e,n,i,r,o,s,a,l,c,u,h){jn(t,e,n,i,r),(l||c||h)&&(S.save(),l&&S.clip(l),c&&S.clip(c)),h?3==(3&a)?(S.clip(h),u&&S.clip(u),Nn(r,s),Un(t,o,e)):2&a?(Nn(r,s),S.clip(h),Un(t,o,e)):1&a&&(S.save(),S.clip(h),u&&S.clip(u),Nn(r,s),S.restore(),Un(t,o,e)):(Nn(r,s),Un(t,o,e)),(l||c||h)&&S.restore()}function Un(t,e,n){n>0&&(e instanceof Map?e.forEach(((t,e)=>{S.strokeStyle=An=e,S.stroke(t)})):null!=e&&t&&S.stroke(e))}function Nn(t,e){e instanceof Map?e.forEach(((t,e)=>{S.fillStyle=wn=e,S.fill(t)})):null!=e&&t&&S.fill(e)}function Wn(t,e,n,o){let s,a=gt[t];if(o<=0)s=[0,0];else{let l=a._space=a.space(r,t,e,n,o);s=function(t,e,n,r,o){let s=A(T(t),T(e)),a=e-t,l=i(o/r*a,n);do{let t=n[l],e=r*t/a;if(e>=o&&s+(t<5?q.get(t):0)<=17)return[t,e]}while(++l<n.length);return[0,0]}(e,n,a._incrs=a.incrs(r,t,e,n,o,l),o,l)}return a._found=s}function Hn(t,e,n,i,r,o,s,a,l,c){let u=s%2/2;1==N&&S.translate(u,u),jn(a,s,l,c,a),S.beginPath();let h,m,p,d,f=r+(0==i||3==i?-o:o);0==n?(m=r,d=f):(h=r,p=f);for(let y=0;y<t.length;y++)null!=e[y]&&(0==n?h=p=t[y]:m=d=t[y],S.moveTo(h,m),S.lineTo(p,d));S.stroke(),1==N&&S.translate(-u,-u)}function Yn(t){let e=!0;return gt.forEach(((n,i)=>{if(!n.show)return;let o=vt[n.scale];if(null==o.min)return void(n._show&&(e=!1,n._show=!1,Jn(!1)));n._show||(e=!1,n._show=!0,Jn(!1));let s=n.side,a=s%2,{min:l,max:c}=o,[u,h]=Wn(i,l,c,0==a?ze:Ie);if(0==h)return;let m=2==o.distr,p=n._splits=n.splits(r,i,l,c,u,h,m),d=2==o.distr?p.map((t=>zn[t])):p,f=2==o.distr?zn[p[1]]-zn[p[0]]:u,y=n._values=n.values(r,n.filter(r,d,i,h,f),i,h,f);n._rotate=2==s?n.rotate(r,y,i,h):0;let _=n._size;n._size=x(n.size(r,y,i,t)),null!=_&&n._size!=_&&(e=!1)})),e}function Gn(t){let e=!0;return _n.forEach(((n,i)=>{let o=n(r,i,tn,t);o!=gn[i]&&(e=!1),gn[i]=o})),e}function Jn(t){mt.forEach(((e,n)=>{n>0&&(e._paths=null,t&&(1==o?(e.min=null,e.max=null):e.facets.forEach((t=>{t.min=null,t.max=null}))))}))}let Zn,Xn,Kn,Qn,ti,ei,ni,ii,ri,oi,si,ai,li=!1;function ci(){li||(et(ui),li=!0)}function ui(){qe&&(!function(){let t=K(vt,X);for(let e in t){let n=t[e],i=Pt[e];if(null!=i&&null!=i.min)Q(n,i),e==At&&Jn(!0);else if(e!=At||2==o)if(0==vn&&null==n.from){let t=n.range(r,null,null,e);n.min=t[0],n.max=t[1]}else n.min=M,n.max=-M}if(vn>0){mt.forEach(((n,s)=>{if(1==o){let o=n.scale,a=t[o],l=Pt[o];if(0==s){let t=a.range(r,a.min,a.max,o);a.min=t[0],a.max=t[1],bn=i(a.min,e[0]),xn=i(a.max,e[0]),e[0][bn]<a.min&&bn++,e[0][xn]>a.max&&xn--,n.min=zn[bn],n.max=zn[xn]}else n.show&&n.auto&&Dn(a,l,n,e[s]);n.idxs[0]=bn,n.idxs[1]=xn}else if(s>0&&n.show&&n.auto){let[i,r]=n.facets,o=i.scale,a=r.scale,[l,c]=e[s];Dn(t[o],Pt[o],i,l),Dn(t[a],Pt[a],r,c),n.min=r.min,n.max=r.max}}));for(let e in t){let n=t[e],i=Pt[e];if(null==n.from&&(null==i||null==i.min)){let t=n.range(r,n.min==M?null:n.min,n.max==-M?null:n.max,e);n.min=t[0],n.max=t[1]}}}for(let e in t){let n=t[e];if(null!=n.from){let i=t[n.from];if(null==i.min)n.min=n.max=null;else{let t=n.range(r,i.min,i.max,e);n.min=t[0],n.max=t[1]}}}let n={},s=!1;for(let e in t){let i=t[e],r=vt[e];if(r.min!=i.min||r.max!=i.max){r.min=i.min,r.max=i.max;let t=r.distr;r._min=3==t?C(r.min):4==t?E(r.min,r.asinh):r.min,r._max=3==t?C(r.max):4==t?E(r.max,r.asinh):r.max,n[e]=s=!0}}if(s){mt.forEach(((t,e)=>{2==o?e>0&&n.y&&(t._paths=null):n[t.scale]&&(t._paths=null)}));for(let t in n)Ne=!0,Wi("setScale",t);Je.show&&(We=He=Je.left>=0)}for(let e in Pt)Pt[e]=null}(),qe=!1),Ne&&(!function(){let t=!1,e=0;for(;!t;){e++;let n=Yn(e),i=Gn(e);t=3==e||n&&i,t||(Ge(r.width,r.height),Ue=!0)}}(),Ne=!1),Ue&&(ct(O,"left",Fe),ct(O,"top",Ve),ct(O,"width",ze),ct(O,"height",Ie),ct(U,"left",Fe),ct(U,"top",Ve),ct(U,"width",ze),ct(U,"height",Ie),ct(I,"width",Be),ct(I,"height",ke),B.width=b(Be*ot),B.height=b(ke*ot),gt.forEach((t=>{let{_show:e,_el:n,_size:i,_pos:r,side:o}=t;if(e){let t=o%2==1;ct(n,t?"left":"top",r-(3===o||0===o?i:0)),ct(n,t?"width":"height",i),ct(n,t?"top":"left",t?Ve:Fe),ct(n,t?"height":"width",t?Ie:ze),n&&lt(n,nt)}else n&&at(n,nt)})),An=wn=Bn=Sn=En=Mn=Tn=kn=Cn=null,Pn=1,Fi(!1),Wi("setSize"),Ue=!1),Be>0&&ke>0&&(S.clearRect(0,0,B.width,B.height),Wi("drawClear"),Bt.forEach((t=>t())),Wi("draw")),Je.show&&We&&(zi(null,!0,!1),We=!1),f||(f=!0,r.status=1,Wi("ready")),In=!1,li=!1}function hi(t,n){let o=vt[t];if(null==o.from){if(0==vn){let e=o.range(r,n.min,n.max,t);n.min=e[0],n.max=e[1]}if(n.min>n.max){let t=n.min;n.min=n.max,n.max=t}if(vn>1&&null!=n.min&&null!=n.max&&n.max-n.min<1e-16)return;t==At&&2==o.distr&&vn>0&&(n.min=i(n.min,e[0]),n.max=i(n.max,e[0])),Pt[t]=n,qe=!0,ci()}}r.redraw=(t,e)=>{Ne=e||!1,!1!==t?vi(At,St.min,St.max):ci()},r.setScale=hi;let mi=!1;const pi=Je.drag;let di=pi.x,fi=pi.y;Je.show&&(Je.x&&(Zn=ht("u-cursor-x",U)),Je.y&&(Xn=ht("u-cursor-y",U)),0==St.ori?(Kn=Zn,Qn=Xn):(Kn=Xn,Qn=Zn),si=Je.left,ai=Je.top);const yi=r.select=Q({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),_i=yi.show?ht("u-select",yi.over?U:O):null;function gi(t,e){if(yi.show){for(let e in t)ct(_i,e,yi[e]=t[e]);!1!==e&&Wi("setSelect")}}function vi(t,e,n){hi(t,{min:e,max:n})}function bi(t,e,n,i){let s=mt[t];null!=e.focus&&function(t){if(t!=Ai){let e=null==t,n=1!=Ze.alpha;mt.forEach(((i,r)=>{let o=e||0==r||r==t;i._focus=e?null:o,n&&function(t,e){mt[t].alpha=e,Je.show&&Ke[t]&&(Ke[t].style.opacity=e);qt&&ie[t]&&(ie[t].style.opacity=e)}(r,o?1:Ze.alpha)})),Ai=t,n&&ci()}}(t),null!=e.show&&(s.show=e.show,function(t,e){let n=mt[t],i=qt?ie[t]:null;n.show?i&&lt(i,nt):(i&&at(i,nt),Ke.length>1&&pt(Ke[t],-10,-10,ze,Ie))}(t,e.show),vi(2==o?s.facets[1].scale:s.scale,null,null),ci()),!1!==n&&Wi("setSeries",t,e),i&&Ji("setSeries",r,t,e)}let xi,$i,Ai;r.setSelect=gi,r.setSeries=bi,r.addBand=function(t,e){t.fill=z(t.fill||null),e=null==e?$t.length:e,$t.splice(e,0,t)},r.setBand=function(t,e){Q($t[t],e)},r.delBand=function(t){null==t?$t.length=0:$t.splice(t,1)};const wi={focus:!0},Bi={focus:!1};function Ci(t,e,n){let i=vt[e];n&&(t=t/ot-(1==i.ori?Ve:Fe));let r=ze;1==i.ori&&(r=Ie,t=r-t),-1==i.dir&&(t=r-t);let o=i._min,s=o+(i._max-o)*(t/r),a=i.distr;return 3==a?w(10,s):4==a?((t,e=1)=>y.sinh(t)*e)(s,i.asinh):s}function Si(t,e){ct(_i,"left",yi.left=t),ct(_i,"width",yi.width=e)}function Ei(t,e){ct(_i,"top",yi.top=t),ct(_i,"height",yi.height=e)}qt&&Xe&&bt("mouseleave",Kt,(t=>{Je._lock||(bi(null,Bi,!0,Hi.setSeries),zi(null,!0,!1))})),r.valToIdx=t=>i(t,e[0]),r.posToIdx=function(t,n){return i(Ci(t,At,n),e[0],bn,xn)},r.posToVal=Ci,r.valToPos=(t,e,n)=>0==vt[e].ori?u(t,vt[e],n?Oe:ze,n?Le:0):h(t,vt[e],n?Re:Ie,n?De:0),r.batch=function(t){t(r),ci()},r.setCursor=(t,e,n)=>{si=t.left,ai=t.top,zi(null,e,n)};let Mi=0==St.ori?Si:Ei,Ti=1==St.ori?Si:Ei;function ki(t,e){if(null!=t){let e=t.idx;Rt.idx=e,mt.forEach(((t,n)=>{(n>0||!se)&&Pi(n,e)}))}qt&&Rt.live&&function(){if(qt&&Rt.live)for(let t=2==o?1:0;t<mt.length;t++){if(0==t&&se)continue;let e=Rt.values[t],n=0;for(let i in e)re[t][n++].firstChild.nodeValue=e[i]}}(),He=!1,!1!==e&&Wi("setLegend")}function Pi(t,n){let i;if(null==n)i=ae;else{let o=mt[t],s=0==t&&2==Et?zn:e[t];i=se?o.values(r,t,n):{_:o.value(r,s[n],t,n)}}Rt.values[t]=i}function zi(t,n,s){let a;ri=si,oi=ai,[si,ai]=Je.move(r,si,ai),Je.show&&(Kn&&pt(Kn,b(si),0,ze,Ie),Qn&&pt(Qn,0,b(ai),ze,Ie));let l=bn>xn;xi=M;let c=0==St.ori?ze:Ie,u=1==St.ori?ze:Ie;if(si<0||0==vn||l){a=null;for(let t=0;t<mt.length;t++)t>0&&Ke.length>1&&pt(Ke[t],-10,-10,ze,Ie);if(Xe&&bi(null,wi,!0,null==t&&Hi.setSeries),Rt.live){Ot.fill(null),He=!0;for(let t=0;t<mt.length;t++)Rt.values[t]=ae}}else{let t,n,s;1==o&&(t=0==St.ori?si:ai,n=Ci(t,At),a=i(n,e[0],bn,xn),s=D(Mt(e[0][a],St,c,0),.5));for(let i=2==o?1:0;i<mt.length;i++){let t=mt[i],l=Ot[i],h=1==o?e[i][l]:e[i][1][l],m=Je.dataIdx(r,i,a,n),p=1==o?e[i][m]:e[i][1][m];He=He||p!=h||m!=l,Ot[i]=m;let d=m==a?s:D(Mt(1==o?e[0][m]:e[i][0][m],St,c,0),.5);if(i>0&&t.show){let e,n,s=null==p?-10:D(kt(p,1==o?vt[t.scale]:vt[t.facets[1].scale],u,0),.5);if(s>0&&1==o){let t=g(s-ai);t<=xi&&(xi=t,$i=i)}if(0==St.ori?(e=d,n=s):(e=s,n=d),He&&Ke.length>1){ft(Ke[i],Je.points.fill(r,i),Je.points.stroke(r,i));let t,o,s,a,l=!0,c=Je.points.bbox;if(null!=c){l=!1;let e=c(r,i);s=e.left,a=e.top,t=e.width,o=e.height}else s=e,a=n,t=o=Je.points.size(r,i);_t(Ke[i],t,o,l),pt(Ke[i],s,a,ze,Ie)}}if(Rt.live){if(!He||0==i&&se)continue;Pi(i,m)}}}if(Je.idx=a,Je.left=si,Je.top=ai,He&&(Rt.idx=a,ki()),yi.show&&mi)if(null!=t){let[e,n]=Hi.scales,[i,r]=Hi.match,[o,s]=t.cursor.sync.scales,a=t.cursor.drag;di=a._x,fi=a._y;let l,h,m,p,d,{left:f,top:y,width:_,height:v}=t.select,b=t.scales[e].ori,x=t.posToVal,A=null!=e&&i(e,o),w=null!=n&&r(n,s);A&&(0==b?(l=f,h=_):(l=y,h=v),di?(m=vt[e],p=Mt(x(l,o),m,c,0),d=Mt(x(l+h,o),m,c,0),Mi($(p,d),g(d-p))):Mi(0,c),w||Ti(0,u)),w&&(1==b?(l=f,h=_):(l=y,h=v),fi?(m=vt[n],p=kt(x(l,s),m,u,0),d=kt(x(l+h,s),m,u,0),Ti($(p,d),g(d-p))):Ti(0,u),A||Mi(0,c))}else{let t=g(ri-ti),e=g(oi-ei);if(1==St.ori){let n=t;t=e,e=n}di=pi.x&&t>=pi.dist,fi=pi.y&&e>=pi.dist;let n,i,r=pi.uni;null!=r?di&&fi&&(di=t>=r,fi=e>=r,di||fi||(e>t?fi=!0:di=!0)):pi.x&&pi.y&&(di||fi)&&(di=fi=!0),di&&(0==St.ori?(n=ni,i=si):(n=ii,i=ai),Mi($(n,i),g(i-n)),fi||Ti(0,u)),fi&&(1==St.ori?(n=ni,i=si):(n=ii,i=ai),Ti($(n,i),g(i-n)),di||Mi(0,c)),di||fi||(Mi(0,0),Ti(0,0))}if(pi._x=di,pi._y=fi,null==t){if(s){if(null!=Yi){let[t,e]=Hi.scales;Hi.values[0]=null!=t?Ci(0==St.ori?si:ai,t):null,Hi.values[1]=null!=e?Ci(1==St.ori?si:ai,e):null}Ji("mousemove",r,si,ai,ze,Ie,a)}if(Xe){let t=s&&Hi.setSeries,e=Ze.prox;null==Ai?xi<=e&&bi($i,wi,!0,t):xi>e?bi(null,wi,!0,t):$i!=Ai&&bi($i,wi,!0,t)}}f&&!1!==n&&Wi("setCursor")}r.setLegend=ki;let Ii=null;function Fi(t){!0===t?Ii=null:(Ii=U.getBoundingClientRect(),Wi("syncRect",Ii))}function Vi(t,e,n,i,r,o,s){Je._lock||(ji(t,e,n,i,r,o,s,!1,null!=t),null!=t?zi(null,!0,!0):zi(e,!0,!1))}function ji(t,e,n,i,o,s,a,l,c){if(null==Ii&&Fi(!1),null!=t)n=t.clientX-Ii.left,i=t.clientY-Ii.top;else{if(n<0||i<0)return si=-10,void(ai=-10);let[t,r]=Hi.scales,a=e.cursor.sync,[l,c]=a.values,[u,h]=a.scales,[m,p]=Hi.match,f=1==e.scales[u].ori,y=0==St.ori?ze:Ie,_=1==St.ori?ze:Ie,g=f?s:o,v=f?o:s,b=f?i:n,x=f?n:i;if(n=null!=u?m(t,u)?d(l,vt[t],y,0):-10:y*(b/g),i=null!=h?p(r,h)?d(c,vt[r],_,0):-10:_*(x/v),1==St.ori){let t=n;n=i,i=t}}c&&((n<=1||n>=ze-1)&&(n=k(n,ze)),(i<=1||i>=Ie-1)&&(i=k(i,Ie))),l?(ti=n,ei=i,[ni,ii]=Je.move(r,n,i)):(si=n,ai=i)}function Li(){gi({width:0,height:0},!1)}function Di(t,e,n,i,o,s,a){mi=!0,di=fi=pi._x=pi._y=!1,ji(t,e,n,i,o,s,0,!0,!1),null!=t&&(ge("mouseup",it,Oi),Ji("mousedown",r,ni,ii,ze,Ie,null))}function Oi(t,e,n,i,o,s,a){mi=pi._x=pi._y=!1,ji(t,e,n,i,o,s,0,!1,!0);let{left:l,top:c,width:u,height:h}=yi,m=u>0||h>0;if(m&&gi(yi),pi.setScale&&m){let t=l,e=u,n=c,i=h;if(1==St.ori&&(t=c,e=h,n=l,i=u),di&&vi(At,Ci(t,At),Ci(t+e,At)),fi)for(let r in vt){let t=vt[r];r!=At&&null==t.from&&t.min!=M&&vi(r,Ci(n+i,r),Ci(n,r))}Li()}else Je.lock&&(Je._lock=!Je._lock,Je._lock||zi(null,!0,!1));null!=t&&(ve("mouseup",it),Ji("mouseup",r,si,ai,ze,Ie,null))}function Ri(t,e,n,i,o,s,a){Vn(),Li(),null!=t&&Ji("dblclick",r,si,ai,ze,Ie,null)}function qi(){gt.forEach(yn),Ye(r.width,r.height,!0)}bt("dppxchange",rt,qi);const Ui={};Ui.mousedown=Di,Ui.mousemove=Vi,Ui.mouseup=Oi,Ui.dblclick=Ri,Ui.setSeries=(t,e,n,i)=>{bi(n,i,!0,!1)},Je.show&&(ge("mousedown",U,Di),ge("mousemove",U,Vi),ge("mouseenter",U,Fi),ge("mouseleave",U,(function(t,e,n,i,r,o,s){if(!Je._lock){let t=mi;if(mi){let t,e,n=!0,i=!0,r=10;0==St.ori?(t=di,e=fi):(t=fi,e=di),t&&e&&(n=si<=r||si>=ze-r,i=ai<=r||ai>=Ie-r),t&&n&&(si=si<ni?0:ze),e&&i&&(ai=ai<ii?0:Ie),zi(null,!0,!0),mi=!1}si=-10,ai=-10,zi(null,!0,!0),t&&(mi=t)}})),ge("dblclick",U,Ri),en.add(r),r.syncRect=Fi);const Ni=r.hooks=t.hooks||{};function Wi(t,e,n){t in Ni&&Ni[t].forEach((t=>{t.call(null,r,e,n)}))}(t.plugins||[]).forEach((t=>{for(let e in t.hooks)Ni[e]=(Ni[e]||[]).concat(t.hooks[e])}));const Hi=Q({key:null,setSeries:!1,filters:{pub:j,sub:j},scales:[At,mt[1]?mt[1].scale:null],match:[L,L],values:[null,null]},Je.sync);Je.sync=Hi;const Yi=Hi.key,Gi=Pe(Yi);function Ji(t,e,n,i,r,o,s){Hi.filters.pub(t,e,n,i,r,o,s)&&Gi.pub(t,e,n,i,r,o,s)}function Zi(){Wi("init",t,e),Fn(e||t.data,!1),Pt[At]?hi(At,Pt[At]):Vn(),Ye(t.width,t.height),zi(null,!0,!1),gi(yi,!1)}return Gi.sub(r),r.pub=function(t,e,n,i,r,o,s){Hi.filters.sub(t,e,n,i,r,o,s)&&Ui[t](null,e,n,i,r,o,s)},r.destroy=function(){Gi.unsub(r),en.delete(r),_e.clear(),xt("dppxchange",rt,qi),v.remove(),Wi("destroy")},mt.forEach(Qe),gt.forEach((function(t,e){if(t._show=t.show,t.show){let n=t.side%2,i=vt[t.scale];null==i&&(t.scale=n?mt[1].scale:At,i=vt[t.scale]);let o=i.time;t.size=z(t.size),t.space=z(t.space),t.rotate=z(t.rotate),t.incrs=z(t.incrs||(2==i.distr?Vt:o?1==st?Nt:Yt:jt)),t.splits=z(t.splits||(o&&1==i.distr?Ft:3==i.distr?de:4==i.distr?fe:pe)),t.stroke=z(t.stroke),t.grid.stroke=z(t.grid.stroke),t.ticks.stroke=z(t.ticks.stroke);let s=t.values;t.values=G(s)&&!G(s[0])?z(s):o?G(s)?Xt(zt,Zt(s,It)):J(s)?function(t,e){let n=Tt(e);return(e,i,r,o,s)=>i.map((e=>n(t(e))))}(zt,s):s||Lt:s||me,t.filter=z(t.filter||(i.distr>=3?be:F)),t.font=fn(t.font),t.labelFont=fn(t.labelFont),t._size=t.size(r,null,e,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(tn[e]=!0),t._el=ht("u-axis",I)}})),n?n instanceof HTMLElement?(n.appendChild(v),Zi()):n(r,Zi):Zi(),r}_n.assign=Q,_n.fmtNum=f,_n.rangeNum=m,_n.rangeLog=a,_n.rangeAsinh=l,_n.orient=ze,_n.join=function(t,e){let n=new Set;for(let s=0;s<t.length;s++){let e=t[s][0],i=e.length;for(let t=0;t<i;t++)n.add(e[t])}let i=[Array.from(n).sort(((t,e)=>t-e))],r=i[0].length,o=new Map;for(let s=0;s<r;s++)o.set(i[0][s],s);for(let s=0;s<t.length;s++){let n=t[s],a=n[0];for(let t=1;t<n.length;t++){let l=n[t],c=Array(r).fill(void 0),u=e?e[s][t]:1,h=[];for(let t=0;t<l.length;t++){let e=l[t],n=o.get(a[t]);null===e?0!=u&&(c[n]=e,2==u&&h.push(n)):c[n]=e}tt(c,h,r),i.push(c)}}return i},_n.fmtDate=Tt,_n.tzDate=function(t,e){let n;return"UTC"==e||"Etc/UTC"==e?n=new Date(+t+6e4*t.getTimezoneOffset()):e==kt?n=t:(n=new Date(t.toLocaleString("en-US",{timeZone:e})),n.setMilliseconds(t.getMilliseconds())),n},_n.sync=Pe;{_n.addGap=Ve,_n.clipGaps=Fe;let t=_n.paths={points:Je};t.linear=Qe,t.stepped=function(t){const e=p(t.align,1),n=p(t.ascDesc,!1);return(t,i,o,s)=>ze(t,i,((a,l,c,u,h,m,p,d,f,y,_)=>{let g=a.pxRound,v=0==u.ori?Re:qe;const b={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},x=b.stroke,$=1*u.dir*(0==u.ori?1:-1);o=r(c,o,s,1),s=r(c,o,s,-1);let A=[],w=!1,B=g(p(c[1==$?o:s],h,_,f)),C=g(m(l[1==$?o:s],u,y,d)),S=C;v(x,C,B);for(let t=1==$?o:s;t>=o&&t<=s;t+=$){let i=c[t],r=g(m(l[t],u,y,d));if(null==i){null===i&&(Ve(A,S,r),w=!0);continue}let o=g(p(i,h,_,f));if(w){if(Ve(A,S,r),B!=o){let t=a.width*ot/2,i=A[A.length-1];i[0]+=n||1==e?t:-t,i[1]-=n||-1==e?t:-t}w=!1}1==e?v(x,r,B):v(x,S,o),v(x,r,o),B=o,S=r}if(null!=a.fill){let e=b.fill=new Path2D(x),n=g(p(a.fillTo(t,i,a.min,a.max),h,_,f));v(e,S,n),v(e,C,n)}return b.gaps=A=a.gaps(t,i,o,s,A),a.spanGaps||(b.clip=Fe(A,u.ori,d,f,y,_)),t.bands.length>0&&(b.band=Ie(t,i,o,s,x)),b}))},t.bars=function(t){const e=p((t=t||W).size,[.6,M,1]),n=t.align||0,i=(t.gap||0)*ot,r=p(t.radius,0)*ot,o=1-e[0],s=p(e[1],M)*ot,a=p(e[2],1)*ot,l=t.disp,c=p(t.each,(t=>{}));return(t,e,u,h)=>ze(t,e,((m,p,d,f,y,_,v,b,x,w,B)=>{let C=m.pxRound;const S=f.dir*(0==f.ori?1:-1),E=y.dir*(1==y.ori?1:-1);let M,T,k=0==f.ori?Ue:Ne,P=0==f.ori?c:(t,e,n,i,r,o,s)=>{c(t,e,n,r,i,s,o)},z=v(m.fillTo(t,e,m.min,m.max),y,B,x),I=C(m.width*ot),F=!1,V=null,j=null,L=null,D=null;if(null!=l){null!=l.fill&&null!=l.stroke&&(F=!0,V=l.fill.values(t,e,u,h),j=new Map,new Set(V).forEach((t=>{null!=t&&j.set(t,new Path2D)})),L=l.stroke.values(t,e,u,h),D=new Map,new Set(L).forEach((t=>{null!=t&&D.set(t,new Path2D)}))),p=l.x0.values(t,e,u,h),2==l.x0.unit&&(p=p.map((e=>t.posToVal(b+e*w,f.key,!0))));let n=l.size.values(t,e,u,h);T=2==l.size.unit?n[0]*w:_(n[0],f,w,b)-_(0,f,w,b),T=C(T-I),M=1==S?-I/2:T+I/2}else{let t=w;if(p.length>1){let e=null;for(let n=0,i=1/0;n<p.length;n++)if(void 0!==d[n]){if(null!=e){let r=g(p[n]-p[e]);r<i&&(i=r,t=g(_(p[n],f,w,b)-_(p[e],f,w,b)))}e=n}}T=C($(s,A(a,t-t*o))-I-i),M=(0==n?T/2:n==S?0:T)-n*S*i/2}const O={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:3},R=t.bands.length>0;let q;R&&(O.band=new Path2D,q=C(v(y.max,y,B,x)));const U=F?null:new Path2D,N=O.band;for(let n=1==S?u:h;n>=u&&n<=h;n+=S){let i=d[n],o=_(2!=f.distr||null!=l?p[n]:n,f,w,b),s=v(i,y,B,x),a=C(o-M),c=C(A(s,z)),u=C($(s,z)),h=c-u;null!=d[n]&&(F?(I>0&&null!=L[n]&&k(D.get(L[n]),a,u,T,h,r*T),null!=V[n]&&k(j.get(V[n]),a,u,T,h,r*T)):k(U,a,u,T,h,r*T),P(t,e,n,a-I/2,u-I/2,T+I,h+I)),R&&(1==E?(c=u,u=q):(u=c,c=q),h=c-u,k(N,a-I/2,u+I/2,T+I,h-I,0))}return I>0&&(O.stroke=F?D:U),O.fill=F?j:U,O}))},t.spline=function(t){return e=tn,(t,n,i,o)=>ze(t,n,((s,a,l,c,u,h,m,p,d,f,y)=>{let _,g,v,b=s.pxRound;0==c.ori?(_=De,v=Re,g=Ye):(_=Oe,v=qe,g=Ge);const x=1*c.dir*(0==c.ori?1:-1);i=r(l,i,o,1),o=r(l,i,o,-1);let $=[],A=!1,w=b(h(a[1==x?i:o],c,f,p)),B=w,C=[],S=[];for(let t=1==x?i:o;t>=i&&t<=o;t+=x){let e=l[t],n=h(a[t],c,f,p);null!=e?(A&&(Ve($,B,n),A=!1),C.push(B=n),S.push(m(l[t],u,y,d))):null===e&&(Ve($,B,n),A=!0)}const E={stroke:e(C,S,_,v,g,b),fill:null,clip:null,band:null,gaps:null,flags:1},M=E.stroke;if(null!=s.fill&&null!=M){let e=E.fill=new Path2D(M),i=b(m(s.fillTo(t,n,s.min,s.max),u,y,d));v(e,B,i),v(e,w,i)}return E.gaps=$=s.gaps(t,n,i,o,$),s.spanGaps||(E.clip=Fe($,c.ori,p,d,f,y)),t.bands.length>0&&(E.band=Ie(t,n,i,o,M)),E}));var e}}var gn={exports:{}};!function(t){function e(n){if(!(this instanceof e)||this===t.exports)return new e(n);if(!Array.isArray(n)||4!==n.length)throw new TypeError("seed must be an array with 4 numbers");this._state0U=0|n[0],this._state0L=0|n[1],this._state1U=0|n[2],this._state1L=0|n[3]}function n(){return Math.random()*Math.pow(2,32)}e.prototype.randomint=function(){var t=this._state0U,e=this._state0L,n=this._state1U,i=this._state1L,r=(i>>>0)+(e>>>0),o=n+t+(r/2>>>31)>>>0,s=r>>>0;this._state0U=n,this._state0L=i;var a=0,l=0;a=(t^=a=t<<23|(-512&e)>>>9)^n,l=(e^=l=e<<23)^i;a^=t>>>18,l^=e>>>18|(262143&t)<<14;return a^=n>>>5,l^=i>>>5|(31&n)<<27,this._state1U=a,this._state1L=l,[o,s]},e.prototype.random=function(){var t=this.randomint();return 2.3283064365386963e-10*t[0]+2220446049250313e-31*(t[1]>>>12)},t.exports=new e([n(),n(),n(),n()]),t.exports.XorShift=e}(gn);var vn={},bn={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var xn=function(t,e){null==t&&(t={});var n=Object.assign({},t);for(var i in e)e.hasOwnProperty(i)&&void 0===t[i]&&(n[i]=e[i]);if("function"==typeof Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++){var s=r[o];e.propertyIsEnumerable(s)&&void 0===t[i]&&(n[s]=e[s])}return n},$n={},An="undefined"!=typeof DEBUG&&DEBUG,wn="undefined"!=typeof ASSERT&&ASSERT;$n.debug=function(){An&&console.log.apply(console,arguments)},$n.assert=function(t,e,n){if(wn&&!t)throw n&&console.log(n),new Error(e)};var Bn={exports:{}},Cn="undefined"!=typeof DEBUG&&DEBUG,Sn="undefined"!=typeof ASSERT&&ASSERT,En=$n,Mn=Math,Tn=Bn.exports=Object.create(Mn);Tn.EPSILON=1e-9,Tn.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},Tn.assert=function(t){if(Sn&&!Tn.isFinite(t))throw Cn&&En.debug(t),new Error("Invalid Number!")},Tn.invSqrt=function(t){return 1/Mn.sqrt(t)},Tn.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},Tn.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},Tn.mod=function(t,e,n){return void 0===e?(n=1,e=0):void 0===n&&(n=e,e=0),n>e?(t=(t-e)%(n-e))+(t<0?n:e):(t=(t-n)%(e-n))+(t<=0?e:n)},Tn.clamp=function(t,e,n){return t<e?e:t>n?n:t},Tn.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:Mn.random()*(e-t)+t};var kn="undefined"!=typeof DEBUG&&DEBUG,Pn="undefined"!=typeof ASSERT&&ASSERT,zn=Vn,In=$n,Fn=Bn.exports;function Vn(t,e){if(!(this instanceof Vn))return new Vn(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),Pn&&Vn.assert(this)}Vn.prototype._serialize=function(){return{x:this.x,y:this.y}},Vn._deserialize=function(t){var e=Object.create(Vn.prototype);return e.x=t.x,e.y=t.y,e},Vn.zero=function(){var t=Object.create(Vn.prototype);return t.x=0,t.y=0,t},Vn.neo=function(t,e){var n=Object.create(Vn.prototype);return n.x=t,n.y=e,n},Vn.clone=function(t){return Pn&&Vn.assert(t),Vn.neo(t.x,t.y)},Vn.prototype.toString=function(){return JSON.stringify(this)},Vn.isValid=function(t){return t&&Fn.isFinite(t.x)&&Fn.isFinite(t.y)},Vn.assert=function(t){if(Pn&&!Vn.isValid(t))throw kn&&In.debug(t),new Error("Invalid Vec2!")},Vn.prototype.clone=function(){return Vn.clone(this)},Vn.prototype.setZero=function(){return this.x=0,this.y=0,this},Vn.prototype.set=function(t,e){return"object"==typeof t?(Pn&&Vn.assert(t),this.x=t.x,this.y=t.y):(Pn&&Fn.assert(t),Pn&&Fn.assert(e),this.x=t,this.y=e),this},Vn.prototype.wSet=function(t,e,n,i){return void 0!==n||void 0!==i?this.setCombine(t,e,n,i):this.setMul(t,e)},Vn.prototype.setCombine=function(t,e,n,i){Pn&&Fn.assert(t),Pn&&Vn.assert(e),Pn&&Fn.assert(n),Pn&&Vn.assert(i);var r=t*e.x+n*i.x,o=t*e.y+n*i.y;return this.x=r,this.y=o,this},Vn.prototype.setMul=function(t,e){Pn&&Fn.assert(t),Pn&&Vn.assert(e);var n=t*e.x,i=t*e.y;return this.x=n,this.y=i,this},Vn.prototype.add=function(t){return Pn&&Vn.assert(t),this.x+=t.x,this.y+=t.y,this},Vn.prototype.wAdd=function(t,e,n,i){return void 0!==n||void 0!==i?this.addCombine(t,e,n,i):this.addMul(t,e)},Vn.prototype.addCombine=function(t,e,n,i){Pn&&Fn.assert(t),Pn&&Vn.assert(e),Pn&&Fn.assert(n),Pn&&Vn.assert(i);var r=t*e.x+n*i.x,o=t*e.y+n*i.y;return this.x+=r,this.y+=o,this},Vn.prototype.addMul=function(t,e){Pn&&Fn.assert(t),Pn&&Vn.assert(e);var n=t*e.x,i=t*e.y;return this.x+=n,this.y+=i,this},Vn.prototype.wSub=function(t,e,n,i){return void 0!==n||void 0!==i?this.subCombine(t,e,n,i):this.subMul(t,e)},Vn.prototype.subCombine=function(t,e,n,i){Pn&&Fn.assert(t),Pn&&Vn.assert(e),Pn&&Fn.assert(n),Pn&&Vn.assert(i);var r=t*e.x+n*i.x,o=t*e.y+n*i.y;return this.x-=r,this.y-=o,this},Vn.prototype.subMul=function(t,e){Pn&&Fn.assert(t),Pn&&Vn.assert(e);var n=t*e.x,i=t*e.y;return this.x-=n,this.y-=i,this},Vn.prototype.sub=function(t){return Pn&&Vn.assert(t),this.x-=t.x,this.y-=t.y,this},Vn.prototype.mul=function(t){return Pn&&Fn.assert(t),this.x*=t,this.y*=t,this},Vn.prototype.length=function(){return Vn.lengthOf(this)},Vn.prototype.lengthSquared=function(){return Vn.lengthSquared(this)},Vn.prototype.normalize=function(){var t=this.length();if(t<Fn.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},Vn.lengthOf=function(t){return Pn&&Vn.assert(t),Fn.sqrt(t.x*t.x+t.y*t.y)},Vn.lengthSquared=function(t){return Pn&&Vn.assert(t),t.x*t.x+t.y*t.y},Vn.distance=function(t,e){Pn&&Vn.assert(t),Pn&&Vn.assert(e);var n=t.x-e.x,i=t.y-e.y;return Fn.sqrt(n*n+i*i)},Vn.distanceSquared=function(t,e){Pn&&Vn.assert(t),Pn&&Vn.assert(e);var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},Vn.areEqual=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},Vn.skew=function(t){return Pn&&Vn.assert(t),Vn.neo(-t.y,t.x)},Vn.dot=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),t.x*e.x+t.y*e.y},Vn.cross=function(t,e){return"number"==typeof e?(Pn&&Vn.assert(t),Pn&&Fn.assert(e),Vn.neo(e*t.y,-e*t.x)):"number"==typeof t?(Pn&&Fn.assert(t),Pn&&Vn.assert(e),Vn.neo(-t*e.y,t*e.x)):(Pn&&Vn.assert(t),Pn&&Vn.assert(e),t.x*e.y-t.y*e.x)},Vn.addCross=function(t,e,n){return"number"==typeof n?(Pn&&Vn.assert(e),Pn&&Fn.assert(n),Vn.neo(n*e.y+t.x,-n*e.x+t.y)):"number"==typeof e?(Pn&&Fn.assert(e),Pn&&Vn.assert(n),Vn.neo(-e*n.y+t.x,e*n.x+t.y)):void(Pn&&In.assert(!1))},Vn.add=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),Vn.neo(t.x+e.x,t.y+e.y)},Vn.wAdd=function(t,e,n,i){return void 0!==n||void 0!==i?Vn.combine(t,e,n,i):Vn.mul(t,e)},Vn.combine=function(t,e,n,i){return Vn.zero().setCombine(t,e,n,i)},Vn.sub=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),Vn.neo(t.x-e.x,t.y-e.y)},Vn.mul=function(t,e){return"object"==typeof t?(Pn&&Vn.assert(t),Pn&&Fn.assert(e),Vn.neo(t.x*e,t.y*e)):"object"==typeof e?(Pn&&Fn.assert(t),Pn&&Vn.assert(e),Vn.neo(t*e.x,t*e.y)):void 0},Vn.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},Vn.neg=function(t){return Pn&&Vn.assert(t),Vn.neo(-t.x,-t.y)},Vn.abs=function(t){return Pn&&Vn.assert(t),Vn.neo(Fn.abs(t.x),Fn.abs(t.y))},Vn.mid=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),Vn.neo(.5*(t.x+e.x),.5*(t.y+e.y))},Vn.upper=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),Vn.neo(Fn.max(t.x,e.x),Fn.max(t.y,e.y))},Vn.lower=function(t,e){return Pn&&Vn.assert(t),Pn&&Vn.assert(e),Vn.neo(Fn.min(t.x,e.x),Fn.min(t.y,e.y))},Vn.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var n=Fn.invSqrt(e);this.x*=n*t,this.y*=n*t}return this},Vn.clamp=function(t,e){return(t=Vn.neo(t.x,t.y)).clamp(e),t},Vn.scaleFn=function(t,e){return function(n){return Vn.neo(n.x*t,n.y*e)}},Vn.translateFn=function(t,e){return function(n){return Vn.neo(n.x+t,n.y+e)}};var jn={};!function(t){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var e=jn;e.maxManifoldPoints=2,e.maxPolygonVertices=12,e.aabbExtension=.1,e.aabbMultiplier=2,e.linearSlop=.005,e.linearSlopSquared=e.linearSlop*e.linearSlop,e.angularSlop=2/180*Math.PI,e.polygonRadius=2*e.linearSlop,e.maxSubSteps=8,e.maxTOIContacts=32,e.maxTOIIterations=20,e.maxDistnceIterations=20,e.velocityThreshold=1,e.maxLinearCorrection=.2,e.maxAngularCorrection=8/180*Math.PI,e.maxTranslation=2,e.maxTranslationSquared=e.maxTranslation*e.maxTranslation,e.maxRotation=.5*Math.PI,e.maxRotationSquared=e.maxRotation*e.maxRotation,e.baumgarte=.2,e.toiBaugarte=.75,e.timeToSleep=.5,e.linearSleepTolerance=.01,e.linearSleepToleranceSqr=Math.pow(e.linearSleepTolerance,2),e.angularSleepTolerance=2/180*Math.PI,e.angularSleepToleranceSqr=Math.pow(e.angularSleepTolerance,2)}();var Ln="undefined"!=typeof DEBUG&&DEBUG,Dn="undefined"!=typeof ASSERT&&ASSERT,On=$n,Rn=Bn.exports,qn=zn,Un=Nn;function Nn(t,e){if(!(this instanceof Nn))return new Nn(t,e);this.lowerBound=qn.zero(),this.upperBound=qn.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e?this.upperBound.set(e):"object"==typeof t&&this.upperBound.set(t)}Nn.prototype.isValid=function(){return Nn.isValid(this)},Nn.isValid=function(t){var e=qn.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&qn.isValid(t.lowerBound)&&qn.isValid(t.upperBound)},Nn.assert=function(t){if(Dn&&!Nn.isValid(t))throw Ln&&On.debug(t),new Error("Invalid AABB!")},Nn.prototype.getCenter=function(){return qn.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},Nn.prototype.getExtents=function(){return qn.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},Nn.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},Nn.prototype.combine=function(t,e){e=e||this;var n=t.lowerBound,i=t.upperBound,r=e.lowerBound,o=e.upperBound,s=Rn.min(n.x,r.x),a=Rn.min(n.y,r.y),l=Rn.max(o.x,i.x),c=Rn.max(o.y,i.y);this.lowerBound.set(s,a),this.upperBound.set(l,c)},Nn.prototype.combinePoints=function(t,e){this.lowerBound.set(Rn.min(t.x,e.x),Rn.min(t.y,e.y)),this.upperBound.set(Rn.max(t.x,e.x),Rn.max(t.y,e.y))},Nn.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},Nn.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},Nn.prototype.extend=function(t){return Nn.extend(this,t),this},Nn.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},Nn.testOverlap=function(t,e){var n=e.lowerBound.x-t.upperBound.x,i=t.lowerBound.x-e.upperBound.x,r=e.lowerBound.y-t.upperBound.y,o=t.lowerBound.y-e.upperBound.y;return!(n>0||r>0||i>0||o>0)},Nn.areEqual=function(t,e){return qn.areEqual(t.lowerBound,e.lowerBound)&&qn.areEqual(t.upperBound,e.upperBound)},Nn.diff=function(t,e){var n=Rn.max(0,Rn.min(t.upperBound.x,e.upperBound.x)-Rn.max(e.lowerBound.x,t.lowerBound.x)),i=Rn.max(0,Rn.min(t.upperBound.y,e.upperBound.y)-Rn.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-n*i},Nn.prototype.rayCast=function(t,e){for(var n=-1/0,i=1/0,r=e.p1,o=qn.sub(e.p2,e.p1),s=qn.abs(o),a=qn.zero(),l="x";null!==l;l="x"===l?"y":null)if(s.x<Rn.EPSILON){if(r[l]<this.lowerBound[l]||this.upperBound[l]<r[l])return!1}else{var c=1/o[l],u=(this.lowerBound[l]-r[l])*c,h=(this.upperBound[l]-r[l])*c,m=-1;if(u>h){var p=u;u=h,h=p,m=1}if(u>n&&(a.setZero(),a[l]=m,n=u),n>(i=Rn.min(i,h)))return!1}return!(n<0||e.maxFraction<n)&&(t.fraction=n,t.normal=a,!0)},Nn.prototype.toString=function(){return JSON.stringify(this)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,"undefined"!=typeof DEBUG&&DEBUG;var Wn="undefined"!=typeof ASSERT&&ASSERT,Hn=jn,Yn=$n,Gn=function(t){var e=[],n=t.max||1/0,i=t.create,r=t.allocate,o=t.release,s=t.discard,a=0,l=0,c=0,u=0;this.max=function(t){return"number"==typeof t?(n=t,this):n},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof i?i():{}),l++,"function"==typeof r&&r(t),t},this.release=function(t){e.length<n?(c++,"function"==typeof o&&o(t),e.push(t)):(u++,"function"==typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+l+" <"+c+" -"+u+" ="+e.length+"/"+n}},Jn=zn,Zn=Bn.exports,Xn=Un,Kn=ti;function Qn(t){this.id=t,this.aabb=new Xn,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function ti(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new Gn({create:function(){return new Qn}})}Qn.prototype.isLeaf=function(){return null==this.child1},ti.prototype.getUserData=function(t){var e=this.m_nodes[t];return Wn&&Yn.assert(!!e),e.userData},ti.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return Wn&&Yn.assert(!!e),e.aabb},ti.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},ti.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},ti.prototype.createProxy=function(t,e){Wn&&Yn.assert(Xn.isValid(t));var n=this.allocateNode();return n.aabb.set(t),Xn.extend(n.aabb,Hn.aabbExtension),n.userData=e,n.height=0,this.insertLeaf(n),n.id},ti.prototype.destroyProxy=function(t){var e=this.m_nodes[t];Wn&&Yn.assert(!!e),Wn&&Yn.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},ti.prototype.moveProxy=function(t,e,n){Wn&&Yn.assert(Xn.isValid(e)),Wn&&Yn.assert(!n||Jn.isValid(n));var i=this.m_nodes[t];return Wn&&Yn.assert(!!i),Wn&&Yn.assert(i.isLeaf()),!i.aabb.contains(e)&&(this.removeLeaf(i),i.aabb.set(e),e=i.aabb,Xn.extend(e,Hn.aabbExtension),n.x<0?e.lowerBound.x+=n.x*Hn.aabbMultiplier:e.upperBound.x+=n.x*Hn.aabbMultiplier,n.y<0?e.lowerBound.y+=n.y*Hn.aabbMultiplier:e.upperBound.y+=n.y*Hn.aabbMultiplier,this.insertLeaf(i),!0)},ti.prototype.insertLeaf=function(t){if(Wn&&Yn.assert(Xn.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,n=this.m_root;0==n.isLeaf();){var i=n.child1,r=n.child2,o=n.aabb.getPerimeter(),s=new Xn;s.combine(n.aabb,e);var a,l,c=s.getPerimeter(),u=2*c,h=2*(c-o);if(i.isLeaf()){(p=new Xn).combine(e,i.aabb),a=p.getPerimeter()+h}else{(p=new Xn).combine(e,i.aabb);var m=i.aabb.getPerimeter();a=p.getPerimeter()-m+h}if(r.isLeaf()){(p=new Xn).combine(e,r.aabb),l=p.getPerimeter()+h}else{var p;(p=new Xn).combine(e,r.aabb);m=r.aabb.getPerimeter();l=p.getPerimeter()-m+h}if(u<a&&u<l)break;n=a<l?i:r}var d=n,f=d.parent,y=this.allocateNode();for(y.parent=f,y.userData=null,y.aabb.combine(e,d.aabb),y.height=d.height+1,null!=f?(f.child1==d?f.child1=y:f.child2=y,y.child1=d,y.child2=t,d.parent=y,t.parent=y):(y.child1=d,y.child2=t,d.parent=y,t.parent=y,this.m_root=y),n=t.parent;null!=n;){i=(n=this.balance(n)).child1,r=n.child2;Wn&&Yn.assert(null!=i),Wn&&Yn.assert(null!=r),n.height=1+Zn.max(i.height,r.height),n.aabb.combine(i.aabb,r.aabb),n=n.parent}},ti.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,n=t.parent,i=n.parent;if(e=n.child1==t?n.child2:n.child1,null!=i){i.child1==n?i.child1=e:i.child2=e,e.parent=i,this.freeNode(n);for(var r=i;null!=r;){var o=(r=this.balance(r)).child1,s=r.child2;r.aabb.combine(o.aabb,s.aabb),r.height=1+Zn.max(o.height,s.height),r=r.parent}}else this.m_root=e,e.parent=null,this.freeNode(n)}else this.m_root=null},ti.prototype.balance=function(t){Wn&&Yn.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var n=e.child1,i=e.child2,r=i.height-n.height;if(r>1){var o=i.child1,s=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==t?i.parent.child1=i:i.parent.child2=i:this.m_root=i,o.height>s.height?(i.child2=o,e.child2=s,s.parent=e,e.aabb.combine(n.aabb,s.aabb),i.aabb.combine(e.aabb,o.aabb),e.height=1+Zn.max(n.height,s.height),i.height=1+Zn.max(e.height,o.height)):(i.child2=s,e.child2=o,o.parent=e,e.aabb.combine(n.aabb,o.aabb),i.aabb.combine(e.aabb,s.aabb),e.height=1+Zn.max(n.height,o.height),i.height=1+Zn.max(e.height,s.height)),i}if(r<-1){var a=n.child1,l=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==e?n.parent.child1=n:n.parent.child2=n:this.m_root=n,a.height>l.height?(n.child2=a,e.child1=l,l.parent=e,e.aabb.combine(i.aabb,l.aabb),n.aabb.combine(e.aabb,a.aabb),e.height=1+Zn.max(i.height,l.height),n.height=1+Zn.max(e.height,a.height)):(n.child2=l,e.child1=a,a.parent=e,e.aabb.combine(i.aabb,a.aabb),n.aabb.combine(e.aabb,l.aabb),e.height=1+Zn.max(i.height,a.height),n.height=1+Zn.max(e.height,l.height)),n}return e},ti.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},ti.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),n=0,i=ii.allocate().preorder(this.m_root);t=i.next();)t.height<0||(n+=t.aabb.getPerimeter());return ii.release(i),n/e},ti.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var n=this.computeHeight(e.child1.id),i=this.computeHeight(e.child2.id);return 1+Zn.max(n,i)},ti.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&Wn&&Yn.assert(null==t.parent);var e=t.child1,n=t.child2;if(t.isLeaf())return Wn&&Yn.assert(null==e),Wn&&Yn.assert(null==n),void(Wn&&Yn.assert(0==t.height));Wn&&Yn.assert(e.parent==t),Wn&&Yn.assert(n.parent==t),this.validateStructure(e),this.validateStructure(n)}},ti.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,n=t.child2;if(t.isLeaf())return Wn&&Yn.assert(null==e),Wn&&Yn.assert(null==n),void(Wn&&Yn.assert(0==t.height));var i=e.height,r=n.height,o=1+Zn.max(i,r);Wn&&Yn.assert(t.height==o);var s=new Xn;s.combine(e.aabb,n.aabb),Wn&&Yn.assert(Xn.areEqual(s,t.aabb)),this.validateMetrics(e),this.validateMetrics(n)}},ti.prototype.validate=function(){this.validateStructure(this.m_root),this.validateMetrics(this.m_root),Wn&&Yn.assert(this.getHeight()==this.computeHeight())},ti.prototype.getMaxBalance=function(){for(var t,e=0,n=ii.allocate().preorder(this.m_root);t=n.next();)if(!(t.height<=1)){Wn&&Yn.assert(0==t.isLeaf());var i=Zn.abs(t.child2.height-t.child1.height);e=Zn.max(e,i)}return ii.release(n),e},ti.prototype.rebuildBottomUp=function(){for(var t,e=[],n=0,i=ii.allocate().preorder(this.m_root);t=i.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[n]=t,++n):this.freeNode(t));for(ii.release(i);n>1;){for(var r=1/0,o=-1,s=-1,a=0;a<n;++a)for(var l=e[a].aabb,c=a+1;c<n;++c){var u=e[c].aabb,h=new Xn;h.combine(l,u);var m=h.getPerimeter();m<r&&(o=a,s=c,r=m)}var p=e[o],d=e[s],f=this.allocateNode();f.child1=p,f.child2=d,f.height=1+Zn.max(p.height,d.height),f.aabb.combine(p.aabb,d.aabb),f.parent=null,p.parent=f,d.parent=f,e[s]=e[n-1],e[o]=f,--n}this.m_root=e[0],this.validate()},ti.prototype.shiftOrigin=function(t){for(var e,n=ii.allocate().preorder(this.m_root);e=n.next();){var i=e.aabb;i.lowerBound.x-=t.x,i.lowerBound.y-=t.y,i.upperBound.x-=t.x,i.upperBound.y-=t.y}ii.release(n)},ti.prototype.query=function(t,e){Wn&&Yn.assert("function"==typeof e);var n=ni.allocate();for(n.push(this.m_root);n.length>0;){var i=n.pop();if(null!=i)if(Xn.testOverlap(i.aabb,t))if(i.isLeaf()){if(0==e(i.id))return}else n.push(i.child1),n.push(i.child2)}ni.release(n)},ti.prototype.rayCast=function(t,e){Wn&&Yn.assert("function"==typeof e);var n=t.p1,i=t.p2,r=Jn.sub(i,n);Wn&&Yn.assert(r.lengthSquared()>0),r.normalize();var o=Jn.cross(1,r),s=Jn.abs(o),a=t.maxFraction,l=new Xn,c=Jn.combine(1-a,n,a,i);l.combinePoints(n,c);var u=ni.allocate(),h=ei.allocate();for(u.push(this.m_root);u.length>0;){var m=u.pop();if(null!=m&&0!=Xn.testOverlap(m.aabb,l)){var p=m.aabb.getCenter(),d=m.aabb.getExtents();if(!(Zn.abs(Jn.dot(o,Jn.sub(n,p)))-Jn.dot(s,d)>0))if(m.isLeaf()){h.p1=Jn.clone(t.p1),h.p2=Jn.clone(t.p2),h.maxFraction=a;var f=e(h,m.id);if(0==f)return;f>0&&(a=f,c=Jn.combine(1-a,n,a,i),l.combinePoints(n,c))}else u.push(m.child1),u.push(m.child2)}}ni.release(u),ei.release(h)};var ei=new Gn({create:function(){return{}},release:function(t){}}),ni=new Gn({create:function(){return[]},release:function(t){t.length=0}}),ii=new Gn({create:function(){return new ri},release:function(t){t.close()}});function ri(){var t=[],e=[];return{preorder:function(n){return t.length=0,t.push(n),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var n=t.length-1,i=t[n];if(0===e[n])return e[n]=1,i;if(1===e[n]&&(e[n]=2,i.child1))return t.push(i.child1),e.push(1),i.child1;if(2===e[n]&&(e[n]=3,i.child2))return t.push(i.child2),e.push(1),i.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}"undefined"!=typeof DEBUG&&DEBUG;var oi="undefined"!=typeof ASSERT&&ASSERT,si=$n,ai=Bn.exports,li=Un,ci=Kn,ui=hi;function hi(){this.m_tree=new ci,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}hi.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},hi.prototype.testOverlap=function(t,e){var n=this.m_tree.getFatAABB(t),i=this.m_tree.getFatAABB(e);return li.testOverlap(n,i)},hi.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},hi.prototype.getProxyCount=function(){return this.m_proxyCount},hi.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},hi.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},hi.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},hi.prototype.query=function(t,e){this.m_tree.query(t,e)},hi.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},hi.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},hi.prototype.createProxy=function(t,e){oi&&si.assert(li.isValid(t));var n=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(n),n},hi.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},hi.prototype.moveProxy=function(t,e,n){oi&&si.assert(li.isValid(e)),this.m_tree.moveProxy(t,e,n)&&this.bufferMove(t)},hi.prototype.touchProxy=function(t){this.bufferMove(t)},hi.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},hi.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},hi.prototype.updatePairs=function(t){for(oi&&si.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},hi.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=ai.min(t,this.m_queryProxyId),n=ai.max(t,this.m_queryProxyId),i=this.m_tree.getUserData(e),r=this.m_tree.getUserData(n);return this.m_callback(i,r),!0};var mi={exports:{}},pi="undefined"!=typeof DEBUG&&DEBUG,di="undefined"!=typeof ASSERT&&ASSERT,fi=vi,yi=$n,_i=zn,gi=Bn.exports;function vi(t){if(!(this instanceof vi))return new vi(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}vi.neo=function(t){var e=Object.create(vi.prototype);return e.setAngle(t),e},vi.clone=function(t){di&&vi.assert(t);var e=Object.create(vi.prototype);return e.s=t.s,e.c=t.c,e},vi.identity=function(){var t=Object.create(vi.prototype);return t.s=0,t.c=1,t},vi.isValid=function(t){return t&&gi.isFinite(t.s)&&gi.isFinite(t.c)},vi.assert=function(t){if(di&&!vi.isValid(t))throw pi&&yi.debug(t),new Error("Invalid Rot!")},vi.prototype.setIdentity=function(){this.s=0,this.c=1},vi.prototype.set=function(t){"object"==typeof t?(di&&vi.assert(t),this.s=t.s,this.c=t.c):(di&&gi.assert(t),this.s=gi.sin(t),this.c=gi.cos(t))},vi.prototype.setAngle=function(t){di&&gi.assert(t),this.s=gi.sin(t),this.c=gi.cos(t)},vi.prototype.getAngle=function(){return gi.atan2(this.s,this.c)},vi.prototype.getXAxis=function(){return _i.neo(this.c,this.s)},vi.prototype.getYAxis=function(){return _i.neo(-this.s,this.c)},vi.mul=function(t,e){if(di&&vi.assert(t),"c"in e&&"s"in e){di&&vi.assert(e);var n=vi.identity();return n.s=t.s*e.c+t.c*e.s,n.c=t.c*e.c-t.s*e.s,n}if("x"in e&&"y"in e)return di&&_i.assert(e),_i.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},vi.mulRot=function(t,e){di&&vi.assert(t),di&&vi.assert(e);var n=vi.identity();return n.s=t.s*e.c+t.c*e.s,n.c=t.c*e.c-t.s*e.s,n},vi.mulVec2=function(t,e){return di&&vi.assert(t),di&&_i.assert(e),_i.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},vi.mulSub=function(t,e,n){var i=t.c*(e.x-n.x)-t.s*(e.y-n.y),r=t.s*(e.x-n.x)+t.c*(e.y-n.y);return _i.neo(i,r)},vi.mulT=function(t,e){if("c"in e&&"s"in e){di&&vi.assert(e);var n=vi.identity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n}if("x"in e&&"y"in e)return di&&_i.assert(e),_i.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},vi.mulTRot=function(t,e){di&&vi.assert(e);var n=vi.identity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n},vi.mulTVec2=function(t,e){return di&&_i.assert(e),_i.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)};var bi="undefined"!=typeof DEBUG&&DEBUG,xi="undefined"!=typeof ASSERT&&ASSERT,$i=Ci,Ai=$n,wi=zn,Bi=fi;function Ci(t,e){if(!(this instanceof Ci))return new Ci(t,e);this.p=wi.zero(),this.q=Bi.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}Ci.clone=function(t){var e=Object.create(Ci.prototype);return e.p=wi.clone(t.p),e.q=Bi.clone(t.q),e},Ci.neo=function(t,e){var n=Object.create(Ci.prototype);return n.p=wi.clone(t),n.q=Bi.clone(e),n},Ci.identity=function(){var t=Object.create(Ci.prototype);return t.p=wi.zero(),t.q=Bi.identity(),t},Ci.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},Ci.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},Ci.isValid=function(t){return t&&wi.isValid(t.p)&&Bi.isValid(t.q)},Ci.assert=function(t){if(xi&&!Ci.isValid(t))throw bi&&Ai.debug(t),new Error("Invalid Transform!")},Ci.mul=function(t,e){if(xi&&Ci.assert(t),Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)n[i]=Ci.mul(t,e[i]);return n}if("x"in e&&"y"in e){xi&&wi.assert(e);var r=t.q.c*e.x-t.q.s*e.y+t.p.x,o=t.q.s*e.x+t.q.c*e.y+t.p.y;return wi.neo(r,o)}if("p"in e&&"q"in e){xi&&Ci.assert(e);var s=Ci.identity();return s.q=Bi.mulRot(t.q,e.q),s.p=wi.add(Bi.mulVec2(t.q,e.p),t.p),s}},Ci.mulAll=function(t,e){xi&&Ci.assert(t);for(var n=[],i=0;i<e.length;i++)n[i]=Ci.mul(t,e[i]);return n},Ci.mulFn=function(t){return xi&&Ci.assert(t),function(e){return Ci.mul(t,e)}},Ci.mulVec2=function(t,e){xi&&Ci.assert(t),xi&&wi.assert(e);var n=t.q.c*e.x-t.q.s*e.y+t.p.x,i=t.q.s*e.x+t.q.c*e.y+t.p.y;return wi.neo(n,i)},Ci.mulXf=function(t,e){xi&&Ci.assert(t),xi&&Ci.assert(e);var n=Ci.identity();return n.q=Bi.mulRot(t.q,e.q),n.p=wi.add(Bi.mulVec2(t.q,e.p),t.p),n},Ci.mulT=function(t,e){if(xi&&Ci.assert(t),"x"in e&&"y"in e){xi&&wi.assert(e);var n=e.x-t.p.x,i=e.y-t.p.y,r=t.q.c*n+t.q.s*i,o=-t.q.s*n+t.q.c*i;return wi.neo(r,o)}if("p"in e&&"q"in e){xi&&Ci.assert(e);var s=Ci.identity();return s.q.set(Bi.mulTRot(t.q,e.q)),s.p.set(Bi.mulTVec2(t.q,wi.sub(e.p,t.p))),s}},Ci.mulTVec2=function(t,e){xi&&Ci.assert(t),xi&&wi.assert(e);var n=e.x-t.p.x,i=e.y-t.p.y,r=t.q.c*n+t.q.s*i,o=-t.q.s*n+t.q.c*i;return wi.neo(r,o)},Ci.mulTXf=function(t,e){xi&&Ci.assert(t),xi&&Ci.assert(e);var n=Ci.identity();return n.q.set(Bi.mulTRot(t.q,e.q)),n.p.set(Bi.mulTVec2(t.q,wi.sub(e.p,t.p))),n},"undefined"!=typeof DEBUG&&DEBUG;var Si="undefined"!=typeof ASSERT&&ASSERT,Ei=Ii,Mi=$n,Ti=Bn.exports,ki=zn,Pi=fi,zi=$i;function Ii(t,e){Si&&Mi.assert(void 0===t),Si&&Mi.assert(void 0===e),this.localCenter=ki.zero(),this.c=ki.zero(),this.a=0,this.alpha0=0,this.c0=ki.zero(),this.a0=0}Ii.prototype.setTransform=function(t){var e=zi.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},Ii.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var n=zi.mulVec2(e,this.localCenter);this.c.set(n),this.c0.set(n)},Ii.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(Pi.mulVec2(t.q,this.localCenter))},Ii.prototype.advance=function(t){Si&&Mi.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},Ii.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},Ii.prototype.normalize=function(){var t=Ti.mod(this.a0,-Ti.PI,+Ti.PI);this.a-=this.a0-t,this.a0=t},Ii.prototype.clone=function(){var t=new Ii;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},Ii.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Fi=function(){this.v=Vi.zero(),this.w=0},Vi=zn;"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ji=Oi,Li=zn,Di=fi;function Oi(){this.c=Li.zero(),this.a=0}Oi.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(Li.sub(this.c,Di.mulVec2(t.q,e))),t},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Ri=qi;function qi(){this.m_type,this.m_radius}qi.prototype._reset=function(){},qi.prototype._serialize=function(){return{}},qi.TYPES={},qi._deserialize=function(t,e,n){var i=qi.TYPES[t.type];return i&&n(i,t)},qi.isValid=function(t){return!!t},qi.prototype.getRadius=function(){return this.m_radius},qi.prototype.getType=function(){return this.m_type},qi.prototype._clone=function(){},qi.prototype.getChildCount=function(){},qi.prototype.testPoint=function(t,e){},qi.prototype.rayCast=function(t,e,n,i){},qi.prototype.computeAABB=function(t,e,n){},qi.prototype.computeMass=function(t,e){},qi.prototype.computeDistanceProxy=function(t){},"undefined"!=typeof DEBUG&&DEBUG;var Ui="undefined"!=typeof ASSERT&&ASSERT,Ni=Qi,Wi=$n,Hi=xn,Yi=Bn.exports,Gi=zn,Ji=Un,Zi=Ri,Xi={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function Ki(t,e){this.aabb=new Ji,this.fixture=t,this.childIndex=e,this.proxyId}function Qi(t,e,n){e.shape?(n=e,e=e.shape):"number"==typeof n&&(n={density:n}),n=Hi(n,Xi),this.m_body=t,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_density=n.density,this.m_isSensor=n.isSensor,this.m_filterGroupIndex=n.filterGroupIndex,this.m_filterCategoryBits=n.filterCategoryBits,this.m_filterMaskBits=n.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var i=this.m_shape.getChildCount(),r=0;r<i;++r)this.m_proxies[r]=new Ki(this,r);this.m_userData=n.userData}Qi.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var n=this.m_shape.getChildCount(),i=0;i<n;++i)this.m_proxies[i]=new Ki(this,i);this.createProxies(e,t.m_xf),t.resetMassData()},Qi.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},Qi._deserialize=function(t,e,n){var i=n(Zi,t.shape);return i&&new Qi(e,i,t)},Qi.prototype.getType=function(){return this.m_shape.getType()},Qi.prototype.getShape=function(){return this.m_shape},Qi.prototype.isSensor=function(){return this.m_isSensor},Qi.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},Qi.prototype.getUserData=function(){return this.m_userData},Qi.prototype.setUserData=function(t){this.m_userData=t},Qi.prototype.getBody=function(){return this.m_body},Qi.prototype.getNext=function(){return this.m_next},Qi.prototype.getDensity=function(){return this.m_density},Qi.prototype.setDensity=function(t){Ui&&Wi.assert(Yi.isFinite(t)&&t>=0),this.m_density=t},Qi.prototype.getFriction=function(){return this.m_friction},Qi.prototype.setFriction=function(t){this.m_friction=t},Qi.prototype.getRestitution=function(){return this.m_restitution},Qi.prototype.setRestitution=function(t){this.m_restitution=t},Qi.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},Qi.prototype.rayCast=function(t,e,n){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),n)},Qi.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},Qi.prototype.getAABB=function(t){return Ui&&Wi.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},Qi.prototype.createProxies=function(t,e){Ui&&Wi.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var n=0;n<this.m_proxyCount;++n){var i=this.m_proxies[n];this.m_shape.computeAABB(i.aabb,e,n),i.proxyId=t.createProxy(i.aabb,i)}},Qi.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var n=this.m_proxies[e];t.destroyProxy(n.proxyId),n.proxyId=null}this.m_proxyCount=0},Qi.prototype.synchronize=function(t,e,n){for(var i=0;i<this.m_proxyCount;++i){var r=this.m_proxies[i],o=new Ji,s=new Ji;this.m_shape.computeAABB(o,e,r.childIndex),this.m_shape.computeAABB(s,n,r.childIndex),r.aabb.combine(o,s);var a=Gi.sub(n.p,e.p);t.moveProxy(r.proxyId,r.aabb,a)}},Qi.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},Qi.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},Qi.prototype.setFilterGroupIndex=function(t){return this.m_filterGroupIndex=t},Qi.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},Qi.prototype.setFilterCategoryBits=function(t){this.m_filterCategoryBits=t},Qi.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},Qi.prototype.setFilterMaskBits=function(t){this.m_filterMaskBits=t},Qi.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,n=e.getFixtureA(),i=e.getFixtureB();n!=this&&i!=this||e.flagForFiltering(),t=t.next}var r=this.m_body.getWorld();if(null!=r)for(var o=r.m_broadPhase,s=0;s<this.m_proxyCount;++s)o.touchProxy(this.m_proxies[s].proxyId)}},Qi.prototype.shouldCollide=function(t){if(t.m_filterGroupIndex===this.m_filterGroupIndex&&0!==t.m_filterGroupIndex)return t.m_filterGroupIndex>0;var e=0!=(t.m_filterMaskBits&this.m_filterCategoryBits),n=0!=(t.m_filterCategoryBits&this.m_filterMaskBits);return e&&n},"undefined"!=typeof DEBUG&&DEBUG;var tr="undefined"!=typeof ASSERT&&ASSERT,er=yr,nr=$n,ir=xn,rr=zn,or=fi,sr=Bn.exports,ar=Ei,lr=$i,cr=Fi,ur=ji,hr=Ni,mr=yr.STATIC="static",pr=yr.KINEMATIC="kinematic",dr=yr.DYNAMIC="dynamic",fr={type:mr,position:rr.zero(),angle:0,linearVelocity:rr.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function yr(t,e){e=ir(e,fr),tr&&nr.assert(rr.isValid(e.position)),tr&&nr.assert(rr.isValid(e.linearVelocity)),tr&&nr.assert(sr.isFinite(e.angle)),tr&&nr.assert(sr.isFinite(e.angularVelocity)),tr&&nr.assert(sr.isFinite(e.angularDamping)&&e.angularDamping>=0),tr&&nr.assert(sr.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==dr?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=lr.identity(),this.m_xf.p=rr.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new ar,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new cr,this.c_position=new ur,this.m_force=rr.zero(),this.m_torque=0,this.m_linearVelocity=rr.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function _r(){this.mass=0,this.center=rr.zero(),this.I=0}yr.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},yr._deserialize=function(t,e,n){var i=new yr(e,t);if(t.fixtures)for(var r=t.fixtures.length-1;r>=0;r--){var o=n(hr,t.fixtures[r],i);i._addFixture(o)}return i},yr.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},yr.prototype.getWorld=function(){return this.m_world},yr.prototype.getNext=function(){return this.m_next},yr.prototype.setUserData=function(t){this.m_userData=t},yr.prototype.getUserData=function(){return this.m_userData},yr.prototype.getFixtureList=function(){return this.m_fixtureList},yr.prototype.getJointList=function(){return this.m_jointList},yr.prototype.getContactList=function(){return this.m_contactList},yr.prototype.isStatic=function(){return this.m_type==mr},yr.prototype.isDynamic=function(){return this.m_type==dr},yr.prototype.isKinematic=function(){return this.m_type==pr},yr.prototype.setStatic=function(){return this.setType(mr),this},yr.prototype.setDynamic=function(){return this.setType(dr),this},yr.prototype.setKinematic=function(){return this.setType(pr),this},yr.prototype.getType=function(){return this.m_type},yr.prototype.setType=function(t){if(tr&&nr.assert(t===mr||t===pr||t===dr),tr&&nr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==mr&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var n=e;e=e.next,this.m_world.destroyContact(n.contact)}this.m_contactList=null;for(var i=this.m_world.m_broadPhase,r=this.m_fixtureList;r;r=r.m_next)for(var o=r.m_proxyCount,s=0;s<o;++s)i.touchProxy(r.m_proxies[s].proxyId)}},yr.prototype.isBullet=function(){return this.m_bulletFlag},yr.prototype.setBullet=function(t){this.m_bulletFlag=!!t},yr.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},yr.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},yr.prototype.isAwake=function(){return this.m_awakeFlag},yr.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},yr.prototype.isActive=function(){return this.m_activeFlag},yr.prototype.setActive=function(t){if(tr&&nr.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.destroyProxies(e);for(var i=this.m_contactList;i;){var r=i;i=i.next,this.m_world.destroyContact(r.contact)}this.m_contactList=null}},yr.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},yr.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},yr.prototype.getTransform=function(){return this.m_xf},yr.prototype.setTransform=function(t,e){if(tr&&nr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var n=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(n,this.m_xf,this.m_xf)}},yr.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},yr.prototype.synchronizeFixtures=function(){var t=lr.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.synchronize(e,t,this.m_xf)},yr.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},yr.prototype.getPosition=function(){return this.m_xf.p},yr.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},yr.prototype.getAngle=function(){return this.m_sweep.a},yr.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},yr.prototype.getWorldCenter=function(){return this.m_sweep.c},yr.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},yr.prototype.getLinearVelocity=function(){return this.m_linearVelocity},yr.prototype.getLinearVelocityFromWorldPoint=function(t){var e=rr.sub(t,this.m_sweep.c);return rr.add(this.m_linearVelocity,rr.cross(this.m_angularVelocity,e))},yr.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},yr.prototype.setLinearVelocity=function(t){this.m_type!=mr&&(rr.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},yr.prototype.getAngularVelocity=function(){return this.m_angularVelocity},yr.prototype.setAngularVelocity=function(t){this.m_type!=mr&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},yr.prototype.getLinearDamping=function(){return this.m_linearDamping},yr.prototype.setLinearDamping=function(t){this.m_linearDamping=t},yr.prototype.getAngularDamping=function(){return this.m_angularDamping},yr.prototype.setAngularDamping=function(t){this.m_angularDamping=t},yr.prototype.getGravityScale=function(){return this.m_gravityScale},yr.prototype.setGravityScale=function(t){this.m_gravityScale=t},yr.prototype.getMass=function(){return this.m_mass},yr.prototype.getInertia=function(){return this.m_I+this.m_mass*rr.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},yr.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},yr.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);tr&&nr.assert(this.isDynamic());for(var t=rr.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var n=new _r;e.getMassData(n),this.m_mass+=n.mass,t.addMul(n.mass,n.center),this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*rr.dot(t,t),tr&&nr.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var i=rr.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(rr.cross(this.m_angularVelocity,rr.sub(this.m_sweep.c,i)))},yr.prototype.setMassData=function(t){if(tr&&nr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==dr){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*rr.dot(t.center,t.center),tr&&nr.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=rr.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(rr.cross(this.m_angularVelocity,rr.sub(this.m_sweep.c,e)))}},yr.prototype.applyForce=function(t,e,n){this.m_type==dr&&(n&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=rr.cross(rr.sub(e,this.m_sweep.c),t)))},yr.prototype.applyForceToCenter=function(t,e){this.m_type==dr&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},yr.prototype.applyTorque=function(t,e){this.m_type==dr&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},yr.prototype.applyLinearImpulse=function(t,e,n){this.m_type==dr&&(n&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*rr.cross(rr.sub(e,this.m_sweep.c),t)))},yr.prototype.applyAngularImpulse=function(t,e){this.m_type==dr&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},yr.prototype.shouldCollide=function(t){if(this.m_type!=dr&&t.m_type!=dr)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},yr.prototype._addFixture=function(t){if(tr&&nr.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},yr.prototype.createFixture=function(t,e){if(tr&&nr.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var n=new hr(this,t,e);return this._addFixture(n),n},yr.prototype.destroyFixture=function(t){if(tr&&nr.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){tr&&nr.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var n=this.m_fixtureList;null!=n;){if(n.m_next===t){n.m_next=t.m_next,e=!0;break}n=n.m_next}tr&&nr.assert(e);for(var i=this.m_contactList;i;){var r=i.contact;i=i.next;var o=r.getFixtureA(),s=r.getFixtureB();t!=o&&t!=s||this.m_world.destroyContact(r)}if(this.m_activeFlag){var a=this.m_world.m_broadPhase;t.destroyProxies(a)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},yr.prototype.getWorldPoint=function(t){return lr.mulVec2(this.m_xf,t)},yr.prototype.getWorldVector=function(t){return or.mulVec2(this.m_xf.q,t)},yr.prototype.getLocalPoint=function(t){return lr.mulTVec2(this.m_xf,t)},yr.prototype.getLocalVector=function(t){return or.mulTVec2(this.m_xf.q,t)};var gr="undefined"!=typeof DEBUG&&DEBUG,vr="undefined"!=typeof ASSERT&&ASSERT,br=Ar,xr=$n,$r=zn;function Ar(t,e,n,i){"object"==typeof t&&null!==t?(this.ex=$r.clone(t),this.ey=$r.clone(e)):"number"==typeof t?(this.ex=$r.neo(t,n),this.ey=$r.neo(e,i)):(this.ex=$r.zero(),this.ey=$r.zero())}Ar.prototype.toString=function(){return JSON.stringify(this)},Ar.isValid=function(t){return t&&$r.isValid(t.ex)&&$r.isValid(t.ey)},Ar.assert=function(t){if(vr&&!Ar.isValid(t))throw gr&&xr.debug(t),new Error("Invalid Mat22!")},Ar.prototype.set=function(t,e,n,i){"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof i?(this.ex.set(t,n),this.ey.set(e,i)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(vr&&Ar.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):vr&&xr.assert(!1)},Ar.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},Ar.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},Ar.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,n=this.ex.y,i=this.ey.y,r=t*i-e*n;0!=r&&(r=1/r);var o=new Ar;return o.ex.x=r*i,o.ey.x=-r*e,o.ex.y=-r*n,o.ey.y=r*t,o},Ar.prototype.solve=function(t){vr&&$r.assert(t);var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o);var s=$r.zero();return s.x=o*(r*t.x-n*t.y),s.y=o*(e*t.y-i*t.x),s},Ar.mul=function(t,e){if(e&&"x"in e&&"y"in e){vr&&$r.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return $r.neo(n,i)}if(e&&"ex"in e&&"ey"in e)return vr&&Ar.assert(e),new Ar(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y);vr&&xr.assert(!1)},Ar.mulVec2=function(t,e){vr&&$r.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return $r.neo(n,i)},Ar.mulMat22=function(t,e){return vr&&Ar.assert(e),new Ar(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y)},Ar.mulT=function(t,e){return e&&"x"in e&&"y"in e?(vr&&$r.assert(e),$r.neo($r.dot(e,t.ex),$r.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(vr&&Ar.assert(e),new Ar($r.neo($r.dot(t.ex,e.ex),$r.dot(t.ey,e.ex)),$r.neo($r.dot(t.ex,e.ey),$r.dot(t.ey,e.ey)))):void(vr&&xr.assert(!1))},Ar.mulTVec2=function(t,e){return vr&&Ar.assert(t),vr&&$r.assert(e),$r.neo($r.dot(e,t.ex),$r.dot(e,t.ey))},Ar.mulTMat22=function(t,e){return vr&&Ar.assert(t),vr&&Ar.assert(e),new Ar($r.neo($r.dot(t.ex,e.ex),$r.dot(t.ey,e.ex)),$r.neo($r.dot(t.ex,e.ey),$r.dot(t.ey,e.ey)))},Ar.abs=function(t){return vr&&Ar.assert(t),new Ar($r.abs(t.ex),$r.abs(t.ey))},Ar.add=function(t,e){return vr&&Ar.assert(t),vr&&Ar.assert(e),new Ar($r.add(t.ex,e.ex),$r.add(t.ey,e.ey))};var wr={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Br=zn,Cr=$i,Sr=Bn.exports,Er=fi;function Mr(){this.type,this.localNormal=Br.zero(),this.localPoint=Br.zero(),this.points=[new Tr,new Tr],this.pointCount=0}function Tr(){this.localPoint=Br.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new kr}function kr(){this.cf=new Pr}function Pr(){this.indexA,this.indexB,this.typeA,this.typeB}function zr(){this.normal,this.points=[],this.separations=[]}wr.exports=Mr,wr.exports.clipSegmentToLine=function(t,e,n,i,r){var o=0,s=Br.dot(n,e[0].v)-i,a=Br.dot(n,e[1].v)-i;s<=0&&t[o++].set(e[0]);a<=0&&t[o++].set(e[1]);if(s*a<0){var l=s/(s-a);t[o].v.setCombine(1-l,e[0].v,l,e[1].v),t[o].id.cf.indexA=r,t[o].id.cf.indexB=e[0].id.cf.indexB,t[o].id.cf.typeA=Mr.e_vertex,t[o].id.cf.typeB=Mr.e_face,++o}return o},wr.exports.clipVertex=Fr,wr.exports.getPointStates=function(t,e,n,i){for(var r=0;r<n.pointCount;++r){var o=n.points[r].id;t[r]=Ir.removeState;for(var s=0;s<i.pointCount;++s)if(i.points[s].id.key==o.key){t[r]=Ir.persistState;break}}for(r=0;r<i.pointCount;++r){o=i.points[r].id;e[r]=Ir.addState;for(s=0;s<n.pointCount;++s)if(n.points[s].id.key==o.key){e[r]=Ir.persistState;break}}},wr.exports.PointState=Ir,Mr.e_circles=0,Mr.e_faceA=1,Mr.e_faceB=2,Mr.e_vertex=0,Mr.e_face=1,Object.defineProperty(kr.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),kr.prototype.set=function(t){this.cf.set(t.cf)},Pr.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},Mr.prototype.getWorldManifold=function(t,e,n,i,r){if(0!=this.pointCount){var o=(t=t||new zr).normal,s=t.points,a=t.separations;switch(this.type){case Mr.e_circles:o=Br.neo(1,0);var l=Cr.mulVec2(e,this.localPoint),c=Cr.mulVec2(i,this.points[0].localPoint),u=Br.sub(c,l);Br.lengthSquared(u)>Sr.EPSILON*Sr.EPSILON&&(o.set(u),o.normalize());var h=l.clone().addMul(n,o),m=c.clone().addMul(-r,o);s[0]=Br.mid(h,m),a[0]=Br.dot(Br.sub(m,h),o),s.length=1,a.length=1;break;case Mr.e_faceA:o=Er.mulVec2(e.q,this.localNormal);for(var p=Cr.mulVec2(e,this.localPoint),d=0;d<this.pointCount;++d){var f=Cr.mulVec2(i,this.points[d].localPoint);h=Br.clone(f).addMul(n-Br.dot(Br.sub(f,p),o),o),m=Br.clone(f).subMul(r,o);s[d]=Br.mid(h,m),a[d]=Br.dot(Br.sub(m,h),o)}s.length=this.pointCount,a.length=this.pointCount;break;case Mr.e_faceB:o=Er.mulVec2(i.q,this.localNormal);for(p=Cr.mulVec2(i,this.localPoint),d=0;d<this.pointCount;++d){f=Cr.mulVec2(e,this.points[d].localPoint),m=Br.combine(1,f,r-Br.dot(Br.sub(f,p),o),o),h=Br.combine(1,f,-n,o);s[d]=Br.mid(h,m),a[d]=Br.dot(Br.sub(h,m),o)}s.length=this.pointCount,a.length=this.pointCount,o.mul(-1)}return t.normal=o,t.points=s,t.separations=a,t}};var Ir={nullState:0,addState:1,persistState:2,removeState:3};function Fr(){this.v=Br.zero(),this.id=new kr}Fr.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)};var Vr={exports:{}},jr={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,jr.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var n in this)"function"!=typeof this[n]&&"object"!=typeof this[n]&&(e+=n+": "+this[n]+t);return e};var Lr="undefined"!=typeof DEBUG&&DEBUG,Dr="undefined"!=typeof ASSERT&&ASSERT,Or=Ur,Rr=$n,qr=Bn.exports;function Ur(t,e,n){if(!(this instanceof Ur))return new Ur(t,e,n);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=n),Dr&&Ur.assert(this)}Ur.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},Ur._deserialize=function(t){var e=Object.create(Ur.prototype);return e.x=t.x,e.y=t.y,e.z=t.z,e},Ur.neo=function(t,e,n){var i=Object.create(Ur.prototype);return i.x=t,i.y=e,i.z=n,i},Ur.clone=function(t){return Dr&&Ur.assert(t),Ur.neo(t.x,t.y,t.z)},Ur.prototype.toString=function(){return JSON.stringify(this)},Ur.isValid=function(t){return t&&qr.isFinite(t.x)&&qr.isFinite(t.y)&&qr.isFinite(t.z)},Ur.assert=function(t){if(Dr&&!Ur.isValid(t))throw Lr&&Rr.debug(t),new Error("Invalid Vec3!")},Ur.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},Ur.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},Ur.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Ur.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Ur.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Ur.areEqual=function(t,e){return Dr&&Ur.assert(t),Dr&&Ur.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},Ur.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},Ur.cross=function(t,e){return new Ur(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},Ur.add=function(t,e){return new Ur(t.x+e.x,t.y+e.y,t.z+e.z)},Ur.sub=function(t,e){return new Ur(t.x-e.x,t.y-e.y,t.z-e.z)},Ur.mul=function(t,e){return new Ur(e*t.x,e*t.y,e*t.z)},Ur.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},Ur.neg=function(t){return new Ur(-t.x,-t.y,-t.z)};var Nr="undefined"!=typeof DEBUG&&DEBUG,Wr="undefined"!=typeof ASSERT&&ASSERT,Hr=Zr,Yr=$n,Gr=zn,Jr=Or;function Zr(t,e,n){"object"==typeof t&&null!==t?(this.ex=Jr.clone(t),this.ey=Jr.clone(e),this.ez=Jr.clone(n)):(this.ex=Jr(),this.ey=Jr(),this.ez=Jr())}Zr.prototype.toString=function(){return JSON.stringify(this)},Zr.isValid=function(t){return t&&Jr.isValid(t.ex)&&Jr.isValid(t.ey)&&Jr.isValid(t.ez)},Zr.assert=function(t){if(Wr&&!Zr.isValid(t))throw Nr&&Yr.debug(t),new Error("Invalid Mat33!")},Zr.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},Zr.prototype.solve33=function(t){var e=Jr.dot(this.ex,Jr.cross(this.ey,this.ez));0!=e&&(e=1/e);var n=new Jr;return n.x=e*Jr.dot(t,Jr.cross(this.ey,this.ez)),n.y=e*Jr.dot(this.ex,Jr.cross(t,this.ez)),n.z=e*Jr.dot(this.ex,Jr.cross(this.ey,t)),n},Zr.prototype.solve22=function(t){var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o);var s=Gr.zero();return s.x=o*(r*t.x-n*t.y),s.y=o*(e*t.y-i*t.x),s},Zr.prototype.getInverse22=function(t){var e=this.ex.x,n=this.ey.x,i=this.ex.y,r=this.ey.y,o=e*r-n*i;0!=o&&(o=1/o),t.ex.x=o*r,t.ey.x=-o*n,t.ex.z=0,t.ex.y=-o*i,t.ey.y=o*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},Zr.prototype.getSymInverse33=function(t){var e=Jr.dot(this.ex,Jr.cross(this.ey,this.ez));0!=e&&(e=1/e);var n=this.ex.x,i=this.ey.x,r=this.ez.x,o=this.ey.y,s=this.ez.y,a=this.ez.z;t.ex.x=e*(o*a-s*s),t.ex.y=e*(r*s-i*a),t.ex.z=e*(i*s-r*o),t.ey.x=t.ex.y,t.ey.y=e*(n*a-r*r),t.ey.z=e*(r*i-n*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(n*o-i*i)},Zr.mul=function(t,e){if(Wr&&Zr.assert(t),e&&"z"in e&&"y"in e&&"x"in e){Wr&&Jr.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,i=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,r=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new Jr(n,i,r)}if(e&&"y"in e&&"x"in e){Wr&&Gr.assert(e);n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return Gr.neo(n,i)}Wr&&Yr.assert(!1)},Zr.mulVec3=function(t,e){Wr&&Zr.assert(t),Wr&&Jr.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,i=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,r=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new Jr(n,i,r)},Zr.mulVec2=function(t,e){Wr&&Zr.assert(t),Wr&&Gr.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,i=t.ex.y*e.x+t.ey.y*e.y;return Gr.neo(n,i)},Zr.add=function(t,e){return Wr&&Zr.assert(t),Wr&&Zr.assert(e),new Zr(Jr.add(t.ex,e.ex),Jr.add(t.ey,e.ey),Jr.add(t.ez,e.ez))},"undefined"!=typeof DEBUG&&DEBUG;var Xr="undefined"!=typeof ASSERT&&ASSERT;Vr.exports=lo,Vr.exports.Input=oo,Vr.exports.Output=so,Vr.exports.Proxy=co,Vr.exports.Cache=ao;var Kr=jn,Qr=$n,to=jr,eo=Bn.exports,no=zn,io=fi,ro=$i;function oo(){this.proxyA=new co,this.proxyB=new co,this.transformA=null,this.transformB=null,this.useRadii=!1}function so(){this.pointA=no.zero(),this.pointB=no.zero(),this.distance,this.iterations}function ao(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function lo(t,e,n){++to.gjkCalls;var i=n.proxyA,r=n.proxyB,o=n.transformA,s=n.transformB,a=new ho;a.readCache(e,i,o,r,s);for(var l=a.m_v,c=Kr.maxDistnceIterations,u=[],h=[],m=0,p=0;p<c;){m=a.m_count;for(var d=0;d<m;++d)u[d]=l[d].indexA,h[d]=l[d].indexB;if(a.solve(),3==a.m_count)break;(x=a.getClosestPoint()).lengthSquared();var f=a.getSearchDirection();if(f.lengthSquared()<eo.EPSILON*eo.EPSILON)break;var y=l[a.m_count];y.indexA=i.getSupport(io.mulTVec2(o.q,no.neg(f))),y.wA=ro.mulVec2(o,i.getVertex(y.indexA)),y.indexB=r.getSupport(io.mulTVec2(s.q,f)),y.wB=ro.mulVec2(s,r.getVertex(y.indexB)),y.w=no.sub(y.wB,y.wA),++p,++to.gjkIters;var _=!1;for(d=0;d<m;++d)if(y.indexA==u[d]&&y.indexB==h[d]){_=!0;break}if(_)break;++a.m_count}if(to.gjkMaxIters=eo.max(to.gjkMaxIters,p),a.getWitnessPoints(t.pointA,t.pointB),t.distance=no.distance(t.pointA,t.pointB),t.iterations=p,a.writeCache(e),n.useRadii){var g=i.m_radius,v=r.m_radius;if(t.distance>g+v&&t.distance>eo.EPSILON){t.distance-=g+v;var b=no.sub(t.pointB,t.pointA);b.normalize(),t.pointA.addMul(g,b),t.pointB.subMul(v,b)}else{var x=no.mid(t.pointA,t.pointB);t.pointA.set(x),t.pointB.set(x),t.distance=0}}}function co(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function uo(){this.indexA,this.indexB,this.wA=no.zero(),this.wB=no.zero(),this.w=no.zero(),this.a}function ho(){this.m_v1=new uo,this.m_v2=new uo,this.m_v3=new uo,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}to.gjkCalls=0,to.gjkIters=0,to.gjkMaxIters=0,co.prototype.getVertexCount=function(){return this.m_count},co.prototype.getVertex=function(t){return Xr&&Qr.assert(0<=t&&t<this.m_count),this.m_vertices[t]},co.prototype.getSupport=function(t){for(var e=0,n=no.dot(this.m_vertices[0],t),i=0;i<this.m_count;++i){var r=no.dot(this.m_vertices[i],t);r>n&&(e=i,n=r)}return e},co.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},co.prototype.set=function(t,e){Xr&&Qr.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},uo.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=no.clone(t.wA),this.wB=no.clone(t.wB),this.w=no.clone(t.w),this.a=t.a},ho.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},ho.prototype.readCache=function(t,e,n,i,r){Xr&&Qr.assert(t.count<=3),this.m_count=t.count;for(var o=0;o<this.m_count;++o){(u=this.m_v[o]).indexA=t.indexA[o],u.indexB=t.indexB[o];var s=e.getVertex(u.indexA),a=i.getVertex(u.indexB);u.wA=ro.mulVec2(n,s),u.wB=ro.mulVec2(r,a),u.w=no.sub(u.wB,u.wA),u.a=0}if(this.m_count>1){var l=t.metric,c=this.getMetric();(c<.5*l||2*l<c||c<eo.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var u;(u=this.m_v[0]).indexA=0,u.indexB=0;s=e.getVertex(0),a=i.getVertex(0);u.wA=ro.mulVec2(n,s),u.wB=ro.mulVec2(r,a),u.w=no.sub(u.wB,u.wA),u.a=1,this.m_count=1}},ho.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},ho.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return no.neg(this.m_v1.w);case 2:var t=no.sub(this.m_v2.w,this.m_v1.w);return no.cross(t,no.neg(this.m_v1.w))>0?no.cross(1,t):no.cross(t,1);default:return Xr&&Qr.assert(!1),no.zero()}},ho.prototype.getClosestPoint=function(){switch(this.m_count){default:return Xr&&Qr.assert(!1),no.zero();case 1:return no.clone(this.m_v1.w);case 2:return no.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return no.zero()}},ho.prototype.getWitnessPoints=function(t,e){switch(this.m_count){default:Xr&&Qr.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t)}},ho.prototype.getMetric=function(){switch(this.m_count){default:return Xr&&Qr.assert(!1),0;case 1:return 0;case 2:return no.distance(this.m_v1.w,this.m_v2.w);case 3:return no.cross(no.sub(this.m_v2.w,this.m_v1.w),no.sub(this.m_v3.w,this.m_v1.w))}},ho.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:Xr&&Qr.assert(!1)}},ho.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,n=no.sub(e,t),i=-no.dot(t,n);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);var r=no.dot(e,n);if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var o=1/(r+i);this.m_v1.a=r*o,this.m_v2.a=i*o,this.m_count=2},ho.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,n=this.m_v3.w,i=no.sub(e,t),r=no.dot(t,i),o=no.dot(e,i),s=-r,a=no.sub(n,t),l=no.dot(t,a),c=no.dot(n,a),u=-l,h=no.sub(n,e),m=no.dot(e,h),p=no.dot(n,h),d=-m,f=no.cross(i,a),y=f*no.cross(e,n),_=f*no.cross(n,t),g=f*no.cross(t,e);if(s<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&s>0&&g<=0){var v=1/(o+s);return this.m_v1.a=o*v,this.m_v2.a=s*v,void(this.m_count=2)}if(c>0&&u>0&&_<=0){var b=1/(c+u);return this.m_v1.a=c*b,this.m_v3.a=u*b,this.m_count=2,void this.m_v2.set(this.m_v3)}if(o<=0&&d<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(c<=0&&p<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(p>0&&d>0&&y<=0){var x=1/(p+d);return this.m_v2.a=p*x,this.m_v3.a=d*x,this.m_count=2,void this.m_v1.set(this.m_v3)}var $=1/(y+_+g);this.m_v1.a=y*$,this.m_v2.a=_*$,this.m_v3.a=g*$,this.m_count=3},lo.testOverlap=function(t,e,n,i,r,o){var s=new oo;s.proxyA.set(t,e),s.proxyB.set(n,i),s.transformA=r,s.transformB=o,s.useRadii=!0;var a=new ao,l=new so;return lo(l,a,s),l.distance<10*eo.EPSILON},"undefined"!=typeof DEBUG&&DEBUG;var mo="undefined"!=typeof ASSERT&&ASSERT,po=$n,fo=Bn.exports,yo=zn,_o=$i,go=br,vo=fi,bo=jn,xo=wr.exports,$o=Vr.exports,Ao=Bo;function wo(t){this.contact=t,this.prev,this.next,this.other}function Bo(t,e,n,i,r){this.m_nodeA=new wo(this),this.m_nodeB=new wo(this),this.m_fixtureA=t,this.m_fixtureB=n,this.m_indexA=e,this.m_indexB=i,this.m_evaluateFcn=r,this.m_manifold=new xo,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=So(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=Eo(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=yo.zero(),this.v_normalMass=new go,this.v_K=new go,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=yo.zero(),this.p_localPoint=yo.zero(),this.p_localCenterA=yo.zero(),this.p_localCenterB=yo.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function Co(){this.rA=yo.zero(),this.rB=yo.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function So(t,e){return fo.sqrt(t*e)}function Eo(t,e){return t>e?t:e}Bo.prototype.initConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getShape(),r=n.getShape(),o=e.getBody(),s=n.getBody(),a=this.getManifold(),l=a.pointCount;mo&&po.assert(l>0),this.v_invMassA=o.m_invMass,this.v_invMassB=s.m_invMass,this.v_invIA=o.m_invI,this.v_invIB=s.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=o.m_invMass,this.p_invMassB=s.m_invMass,this.p_invIA=o.m_invI,this.p_invIB=s.m_invI,this.p_localCenterA=yo.clone(o.m_sweep.localCenter),this.p_localCenterB=yo.clone(s.m_sweep.localCenter),this.p_radiusA=i.m_radius,this.p_radiusB=r.m_radius,this.p_type=a.type,this.p_localNormal=yo.clone(a.localNormal),this.p_localPoint=yo.clone(a.localPoint),this.p_pointCount=l;for(var c=0;c<l;++c){var u=a.points[c],h=this.v_points[c]=new Co;t.warmStarting?(h.normalImpulse=t.dtRatio*u.normalImpulse,h.tangentImpulse=t.dtRatio*u.tangentImpulse):(h.normalImpulse=0,h.tangentImpulse=0),h.rA.setZero(),h.rB.setZero(),h.normalMass=0,h.tangentMass=0,h.velocityBias=0,this.p_localPoints[c]=yo.clone(u.localPoint)}},Bo.prototype.getManifold=function(){return this.m_manifold},Bo.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),n=this.m_fixtureB.getBody(),i=this.m_fixtureA.getShape(),r=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),i.m_radius,n.getTransform(),r.m_radius)},Bo.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},Bo.prototype.isEnabled=function(){return this.m_enabledFlag},Bo.prototype.isTouching=function(){return this.m_touchingFlag},Bo.prototype.getNext=function(){return this.m_next},Bo.prototype.getFixtureA=function(){return this.m_fixtureA},Bo.prototype.getFixtureB=function(){return this.m_fixtureB},Bo.prototype.getChildIndexA=function(){return this.m_indexA},Bo.prototype.getChildIndexB=function(){return this.m_indexB},Bo.prototype.flagForFiltering=function(){this.m_filterFlag=!0},Bo.prototype.setFriction=function(t){this.m_friction=t},Bo.prototype.getFriction=function(){return this.m_friction},Bo.prototype.resetFriction=function(){this.m_friction=So(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},Bo.prototype.setRestitution=function(t){this.m_restitution=t},Bo.prototype.getRestitution=function(){return this.m_restitution},Bo.prototype.resetRestitution=function(){this.m_restitution=Eo(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},Bo.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},Bo.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},Bo.prototype.evaluate=function(t,e,n){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,n,this.m_fixtureB,this.m_indexB)},Bo.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,n=this.m_touchingFlag,i=this.m_fixtureA.isSensor(),r=this.m_fixtureB.isSensor(),o=i||r,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),l=s.getTransform(),c=a.getTransform();if(o){var u=this.m_fixtureA.getShape(),h=this.m_fixtureB.getShape();e=$o.testOverlap(u,this.m_indexA,h,this.m_indexB,l,c),this.m_manifold.pointCount=0}else{var m=this.m_manifold;this.m_manifold=new xo,this.evaluate(this.m_manifold,l,c),e=this.m_manifold.pointCount>0;for(var p=0;p<this.m_manifold.pointCount;++p){var d=this.m_manifold.points[p];d.normalImpulse=0,d.tangentImpulse=0;for(var f=0;f<m.pointCount;++f){var y=m.points[f];if(y.id.key==d.id.key){d.normalImpulse=y.normalImpulse,d.tangentImpulse=y.tangentImpulse;break}}}e!=n&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==n&&1==e&&t&&t.beginContact(this),1==n&&0==e&&t&&t.endContact(this),0==o&&e&&t&&t.preSolve(this,m)},Bo.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},Bo.prototype.solvePositionConstraintTOI=function(t,e,n){return this._solvePositionConstraint(t,!0,e,n)},Bo.prototype._solvePositionConstraint=function(t,e,n,i){var r=this.m_fixtureA,o=this.m_fixtureB,s=r.getBody(),a=o.getBody();s.c_velocity,a.c_velocity;var l=s.c_position,c=a.c_position,u=yo.clone(this.p_localCenterA),h=yo.clone(this.p_localCenterB),m=0,p=0;e&&s!=n&&s!=i||(m=this.p_invMassA,p=this.p_invIA);var d=0,f=0;e&&a!=n&&a!=i||(d=this.p_invMassB,f=this.p_invIB);for(var y=yo.clone(l.c),_=l.a,g=yo.clone(c.c),v=c.a,b=0,x=0;x<this.p_pointCount;++x){var $,A,w,B=_o.identity(),C=_o.identity();switch(B.q.set(_),C.q.set(v),B.p=yo.sub(y,vo.mulVec2(B.q,u)),C.p=yo.sub(g,vo.mulVec2(C.q,h)),this.p_type){case xo.e_circles:var S=_o.mulVec2(B,this.p_localPoint),E=_o.mulVec2(C,this.p_localPoints[0]);($=yo.sub(E,S)).normalize(),A=yo.combine(.5,S,.5,E),w=yo.dot(yo.sub(E,S),$)-this.p_radiusA-this.p_radiusB;break;case xo.e_faceA:$=vo.mulVec2(B.q,this.p_localNormal);var M=_o.mulVec2(B,this.p_localPoint),T=_o.mulVec2(C,this.p_localPoints[x]);w=yo.dot(yo.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T;break;case xo.e_faceB:$=vo.mulVec2(C.q,this.p_localNormal);M=_o.mulVec2(C,this.p_localPoint),T=_o.mulVec2(B,this.p_localPoints[x]);w=yo.dot(yo.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T,$.mul(-1)}var k=yo.sub(A,y),P=yo.sub(A,g);b=fo.min(b,w);var z=e?bo.toiBaugarte:bo.baumgarte,I=bo.linearSlop,F=bo.maxLinearCorrection,V=fo.clamp(z*(w+I),-F,0),j=yo.cross(k,$),L=yo.cross(P,$),D=m+d+p*j*j+f*L*L,O=D>0?-V/D:0,R=yo.mul(O,$);y.subMul(m,R),_-=p*yo.cross(k,R),g.addMul(d,R),v+=f*yo.cross(P,R)}return l.c.set(y),l.a=_,c.c.set(g),c.a=v,b},Bo.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getBody(),r=n.getBody(),o=i.c_velocity,s=r.c_velocity,a=i.c_position,l=r.c_position,c=this.p_radiusA,u=this.p_radiusB,h=this.getManifold(),m=this.v_invMassA,p=this.v_invMassB,d=this.v_invIA,f=this.v_invIB,y=yo.clone(this.p_localCenterA),_=yo.clone(this.p_localCenterB),g=yo.clone(a.c),v=a.a,b=yo.clone(o.v),x=o.w,$=yo.clone(l.c),A=l.a,w=yo.clone(s.v),B=s.w;mo&&po.assert(h.pointCount>0);var C=_o.identity(),S=_o.identity();C.q.set(v),S.q.set(A),C.p.setCombine(1,g,-1,vo.mulVec2(C.q,y)),S.p.setCombine(1,$,-1,vo.mulVec2(S.q,_));var E=h.getWorldManifold(null,C,c,S,u);this.v_normal.set(E.normal);for(var M=0;M<this.v_pointCount;++M){var T=this.v_points[M];T.rA.set(yo.sub(E.points[M],g)),T.rB.set(yo.sub(E.points[M],$));var k=yo.cross(T.rA,this.v_normal),P=yo.cross(T.rB,this.v_normal),z=m+p+d*k*k+f*P*P;T.normalMass=z>0?1/z:0;var I=yo.cross(this.v_normal,1),F=yo.cross(T.rA,I),V=yo.cross(T.rB,I),j=m+p+d*F*F+f*V*V;T.tangentMass=j>0?1/j:0,T.velocityBias=0;var L=yo.dot(this.v_normal,w)+yo.dot(this.v_normal,yo.cross(B,T.rB))-yo.dot(this.v_normal,b)-yo.dot(this.v_normal,yo.cross(x,T.rA));L<-bo.velocityThreshold&&(T.velocityBias=-this.v_restitution*L)}if(2==this.v_pointCount&&t.blockSolve){var D=this.v_points[0],O=this.v_points[1],R=yo.cross(D.rA,this.v_normal),q=yo.cross(D.rB,this.v_normal),U=yo.cross(O.rA,this.v_normal),N=yo.cross(O.rB,this.v_normal),W=m+p+d*R*R+f*q*q,H=m+p+d*U*U+f*N*N,Y=m+p+d*R*U+f*q*N;W*W<1e3*(W*H-Y*Y)?(this.v_K.ex.set(W,Y),this.v_K.ey.set(Y,H),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}a.c.set(g),a.a=v,o.v.set(b),o.w=x,l.c.set($),l.a=A,s.v.set(w),s.w=B},Bo.prototype.warmStartConstraint=function(t){var e=this.m_fixtureA,n=this.m_fixtureB,i=e.getBody(),r=n.getBody(),o=i.c_velocity,s=r.c_velocity;i.c_position,r.c_position;for(var a=this.v_invMassA,l=this.v_invIA,c=this.v_invMassB,u=this.v_invIB,h=yo.clone(o.v),m=o.w,p=yo.clone(s.v),d=s.w,f=this.v_normal,y=yo.cross(f,1),_=0;_<this.v_pointCount;++_){var g=this.v_points[_],v=yo.combine(g.normalImpulse,f,g.tangentImpulse,y);m-=l*yo.cross(g.rA,v),h.subMul(a,v),d+=u*yo.cross(g.rB,v),p.addMul(c,v)}o.v.set(h),o.w=m,s.v.set(p),s.w=d},Bo.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,n=0;n<this.v_pointCount;++n)e.points[n].normalImpulse=this.v_points[n].normalImpulse,e.points[n].tangentImpulse=this.v_points[n].tangentImpulse},Bo.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body,i=e.c_velocity;e.c_position;var r=n.c_velocity;n.c_position;var o=this.v_invMassA,s=this.v_invIA,a=this.v_invMassB,l=this.v_invIB,c=yo.clone(i.v),u=i.w,h=yo.clone(r.v),m=r.w,p=this.v_normal,d=yo.cross(p,1),f=this.v_friction;mo&&po.assert(1==this.v_pointCount||2==this.v_pointCount);for(var y=0;y<this.v_pointCount;++y){var _=this.v_points[y];(A=yo.zero()).addCombine(1,h,1,yo.cross(m,_.rB)),A.subCombine(1,c,1,yo.cross(u,_.rA));var g=yo.dot(A,d)-this.v_tangentSpeed,v=_.tangentMass*-g,b=f*_.normalImpulse;v=(w=fo.clamp(_.tangentImpulse+v,-b,b))-_.tangentImpulse,_.tangentImpulse=w;var x=yo.mul(v,d);c.subMul(o,x),u-=s*yo.cross(_.rA,x),h.addMul(a,x),m+=l*yo.cross(_.rB,x)}if(1==this.v_pointCount||0==t.blockSolve)for(var $=0;$<this.v_pointCount;++$){var A;_=this.v_points[$];(A=yo.zero()).addCombine(1,h,1,yo.cross(m,_.rB)),A.subCombine(1,c,1,yo.cross(u,_.rA));var w,B=yo.dot(A,p);v=-_.normalMass*(B-_.velocityBias);v=(w=fo.max(_.normalImpulse+v,0))-_.normalImpulse,_.normalImpulse=w;x=yo.mul(v,p);c.subMul(o,x),u-=s*yo.cross(_.rA,x),h.addMul(a,x),m+=l*yo.cross(_.rB,x)}else{var C=this.v_points[0],S=this.v_points[1],E=yo.neo(C.normalImpulse,S.normalImpulse);mo&&po.assert(E.x>=0&&E.y>=0);var M=yo.zero().add(h).add(yo.cross(m,C.rB)).sub(c).sub(yo.cross(u,C.rA)),T=yo.zero().add(h).add(yo.cross(m,S.rB)).sub(c).sub(yo.cross(u,S.rA)),k=yo.dot(M,p),P=yo.dot(T,p),z=yo.neo(k-C.velocityBias,P-S.velocityBias);for(z.sub(go.mulVec2(this.v_K,E));;){var I=go.mulVec2(this.v_normalMass,z).neg();if(I.x>=0&&I.y>=0){var F=yo.sub(I,E),V=yo.mul(F.x,p),j=yo.mul(F.y,p);c.subCombine(o,V,o,j),u-=s*(yo.cross(C.rA,V)+yo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(yo.cross(C.rB,V)+yo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=-C.normalMass*z.x,I.y=0,k=0,P=this.v_K.ex.y*I.x+z.y,I.x>=0&&P>=0){F=yo.sub(I,E),V=yo.mul(F.x,p),j=yo.mul(F.y,p);c.subCombine(o,V,o,j),u-=s*(yo.cross(C.rA,V)+yo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(yo.cross(C.rB,V)+yo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=-S.normalMass*z.y,k=this.v_K.ey.x*I.y+z.x,P=0,I.y>=0&&k>=0){F=yo.sub(I,E),V=yo.mul(F.x,p),j=yo.mul(F.y,p);c.subCombine(o,V,o,j),u-=s*(yo.cross(C.rA,V)+yo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(yo.cross(C.rB,V)+yo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=0,k=z.x,P=z.y,k>=0&&P>=0){F=yo.sub(I,E),V=yo.mul(F.x,p),j=yo.mul(F.y,p);c.subCombine(o,V,o,j),u-=s*(yo.cross(C.rA,V)+yo.cross(S.rA,j)),h.addCombine(a,V,a,j),m+=l*(yo.cross(C.rB,V)+yo.cross(S.rB,j)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}break}}i.v.set(c),i.w=u,r.v.set(h),r.w=m};var Mo=[];Bo.addType=function(t,e,n){Mo[t]=Mo[t]||{},Mo[t][e]=n},Bo.create=function(t,e,n,i){var r,o,s=t.getType(),a=n.getType();if(o=Mo[s]&&Mo[s][a])r=new Bo(t,e,n,i,o);else{if(!(o=Mo[a]&&Mo[a][s]))return null;r=new Bo(n,i,t,e,o)}t=r.getFixtureA(),n=r.getFixtureB(),e=r.getChildIndexA(),i=r.getChildIndexB();var l=t.getBody(),c=n.getBody();return r.m_nodeA.contact=r,r.m_nodeA.other=c,r.m_nodeA.prev=null,r.m_nodeA.next=l.m_contactList,null!=l.m_contactList&&(l.m_contactList.prev=r.m_nodeA),l.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=l,r.m_nodeB.prev=null,r.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=r.m_nodeB),c.m_contactList=r.m_nodeB,0==t.isSensor()&&0==n.isSensor()&&(l.setAwake(!0),c.setAwake(!0)),r},Bo.destroy=function(t,e){var n=t.m_fixtureA,i=t.m_fixtureB,r=n.getBody(),o=i.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==r.m_contactList&&(r.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==n.isSensor()&&0==i.isSensor()&&(r.setAwake(!0),o.setAwake(!0));var s=n.getType(),a=i.getType(),l=Mo[s][a].destroyFcn;"function"==typeof l&&l(t)},"undefined"!=typeof DEBUG&&DEBUG;var To="undefined"!=typeof ASSERT&&ASSERT,ko=Io,Po=$n;function zo(){this.other=null,this.joint=null,this.prev=null,this.next=null}function Io(t,e,n){e=t.bodyA||e,n=t.bodyB||n,To&&Po.assert(e),To&&Po.assert(n),To&&Po.assert(e!=n),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=n,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new zo,this.m_edgeB=new zo,this.m_islandFlag=!1,this.m_userData=t.userData}Io.TYPES={},Io._deserialize=function(t,e,n){var i=Io.TYPES[t.type];return i&&n(i,t)},Io.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},Io.prototype.getType=function(){return this.m_type},Io.prototype.getBodyA=function(){return this.m_bodyA},Io.prototype.getBodyB=function(){return this.m_bodyB},Io.prototype.getNext=function(){return this.m_next},Io.prototype.getUserData=function(){return this.m_userData},Io.prototype.setUserData=function(t){this.m_userData=t},Io.prototype.getCollideConnected=function(){return this.m_collideConnected},Io.prototype.getAnchorA=function(){},Io.prototype.getAnchorB=function(){},Io.prototype.getReactionForce=function(t){},Io.prototype.getReactionTorque=function(t){},Io.prototype.shiftOrigin=function(t){},Io.prototype.initVelocityConstraints=function(t){},Io.prototype.solveVelocityConstraints=function(t){},Io.prototype.solvePositionConstraints=function(t){};var Fo={exports:{}},Vo={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,Vo.now=function(){return Date.now()},Vo.diff=function(t){return Date.now()-t},"undefined"!=typeof DEBUG&&DEBUG;var jo="undefined"!=typeof ASSERT&&ASSERT;Fo.exports=function(t,e){var n=Oo.now();++Ro.toiCalls,t.state=Ko.e_unknown,t.t=e.tMax;var i=e.proxyA,r=e.proxyB,o=e.sweepA,s=e.sweepB;o.normalize(),s.normalize();var a=e.tMax,l=i.m_radius+r.m_radius,c=qo.max(Lo.linearSlop,l-3*Lo.linearSlop),u=.25*Lo.linearSlop;jo&&Do.assert(c>u);var h=0,m=Lo.maxTOIIterations,p=0,d=new Xo,f=new Go;for(f.proxyA=e.proxyA,f.proxyB=e.proxyB,f.useRadii=!1;;){var y=Ho.identity(),_=Ho.identity();o.getTransform(y,h),s.getTransform(_,h),f.transformA=y,f.transformB=_;var g=new Jo;if(Yo(g,d,f),g.distance<=0){t.state=Ko.e_overlapped,t.t=0;break}if(g.distance<c+u){t.state=Ko.e_touching,t.t=h;break}var v=new Qo;v.initialize(d,i,o,r,s,h);for(var b=!1,x=a,$=0;;){var A=v.findMinSeparation(x);if(v.indexA,v.indexB,A>c+u){t.state=Ko.e_separated,t.t=a,b=!0;break}if(A>c-u){h=x;break}var w=v.evaluate(h);if(v.indexA,v.indexB,w<c-u){t.state=Ko.e_failed,t.t=h,b=!0;break}if(w<=c+u){t.state=Ko.e_touching,t.t=h,b=!0;break}for(var B=0,C=h,S=x;;){var E;E=1&B?C+(c-w)*(S-C)/(A-w):.5*(C+S),++B,++Ro.toiRootIters;var M=v.evaluate(E);if(v.indexA,v.indexB,qo.abs(M-c)<u){x=E;break}if(M>c?(C=E,w=M):(S=E,A=M),50==B)break}if(Ro.toiMaxRootIters=qo.max(Ro.toiMaxRootIters,B),++$==Lo.maxPolygonVertices)break}if(++p,++Ro.toiIters,b)break;if(p==m){t.state=Ko.e_failed,t.t=h;break}}Ro.toiMaxIters=qo.max(Ro.toiMaxIters,p);var T=Oo.diff(n);Ro.toiMaxTime=qo.max(Ro.toiMaxTime,T),Ro.toiTime+=T},Fo.exports.Input=function(){this.proxyA=new Zo,this.proxyB=new Zo,this.sweepA=new Wo,this.sweepB=new Wo,this.tMax},Fo.exports.Output=Ko;var Lo=jn,Do=$n,Oo=Vo,Ro=jr,qo=Bn.exports,Uo=zn,No=fi,Wo=Ei,Ho=$i,Yo=Vr.exports,Go=Yo.Input,Jo=Yo.Output,Zo=Yo.Proxy,Xo=Yo.Cache;function Ko(){this.state,this.t}Ko.e_unknown=0,Ko.e_failed=1,Ko.e_overlapped=2,Ko.e_touching=3,Ko.e_separated=4,Ro.toiTime=0,Ro.toiMaxTime=0,Ro.toiCalls=0,Ro.toiIters=0,Ro.toiMaxIters=0,Ro.toiRootIters=0,Ro.toiMaxRootIters=0;function Qo(){this.m_proxyA=new Zo,this.m_proxyB=new Zo,this.m_sweepA,this.m_sweepB,this.indexA,this.indexB,this.m_type,this.m_localPoint=Uo.zero(),this.m_axis=Uo.zero()}Qo.prototype.initialize=function(t,e,n,i,r,o){this.m_proxyA=e,this.m_proxyB=i;var s=t.count;jo&&Do.assert(0<s&&s<3),this.m_sweepA=n,this.m_sweepB=r;var a=Ho.identity(),l=Ho.identity();if(this.m_sweepA.getTransform(a,o),this.m_sweepB.getTransform(l,o),1==s){this.m_type=1;var c=this.m_proxyA.getVertex(t.indexA[0]),u=this.m_proxyB.getVertex(t.indexB[0]),h=Ho.mulVec2(a,c),m=Ho.mulVec2(l,u);return this.m_axis.setCombine(1,m,-1,h),g=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var p=i.getVertex(t.indexB[0]),d=i.getVertex(t.indexB[1]);this.m_axis=Uo.cross(Uo.sub(d,p),1),this.m_axis.normalize();var f=No.mulVec2(l.q,this.m_axis);this.m_localPoint=Uo.mid(p,d);m=Ho.mulVec2(l,this.m_localPoint),c=e.getVertex(t.indexA[0]),h=Ho.mulVec2(a,c);return(g=Uo.dot(h,f)-Uo.dot(m,f))<0&&(this.m_axis=Uo.neg(this.m_axis),g=-g),g}this.m_type=2;var y=this.m_proxyA.getVertex(t.indexA[0]),_=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=Uo.cross(Uo.sub(_,y),1),this.m_axis.normalize();f=No.mulVec2(a.q,this.m_axis);this.m_localPoint=Uo.mid(y,_);var g;h=Ho.mulVec2(a,this.m_localPoint),u=this.m_proxyB.getVertex(t.indexB[0]),m=Ho.mulVec2(l,u);return(g=Uo.dot(m,f)-Uo.dot(h,f))<0&&(this.m_axis=Uo.neg(this.m_axis),g=-g),g},Qo.prototype.compute=function(t,e){var n=Ho.identity(),i=Ho.identity();switch(this.m_sweepA.getTransform(n,e),this.m_sweepB.getTransform(i,e),this.m_type){case 1:if(t){var r=No.mulTVec2(n.q,this.m_axis),o=No.mulTVec2(i.q,Uo.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(r),this.indexB=this.m_proxyB.getSupport(o)}var s=this.m_proxyA.getVertex(this.indexA),a=this.m_proxyB.getVertex(this.indexB),l=Ho.mulVec2(n,s),c=Ho.mulVec2(i,a);return Uo.dot(c,this.m_axis)-Uo.dot(l,this.m_axis);case 2:var u=No.mulVec2(n.q,this.m_axis);l=Ho.mulVec2(n,this.m_localPoint);if(t){o=No.mulTVec2(i.q,Uo.neg(u));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(o)}a=this.m_proxyB.getVertex(this.indexB),c=Ho.mulVec2(i,a);return Uo.dot(c,u)-Uo.dot(l,u);case 3:u=No.mulVec2(i.q,this.m_axis),c=Ho.mulVec2(i,this.m_localPoint);if(t){r=No.mulTVec2(n.q,Uo.neg(u));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(r)}s=this.m_proxyA.getVertex(this.indexA),l=Ho.mulVec2(n,s);return Uo.dot(l,u)-Uo.dot(c,u);default:return jo&&Do.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},Qo.prototype.findMinSeparation=function(t){return this.compute(!0,t)},Qo.prototype.evaluate=function(t){return this.compute(!1,t)};var ts="undefined"!=typeof DEBUG&&DEBUG,es="undefined"!=typeof ASSERT&&ASSERT;mi.exports=ds,mi.exports.TimeStep=ps;var ns=jn,is=$n,rs=zn,os=Bn.exports,ss=er,as=Ao,ls=ko,cs=Fo.exports,us=cs.Input,hs=cs.Output,ms=Vr.exports;function ps(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function ds(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}ms.Input,ms.Output,ms.Proxy,ms.Cache,ps.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},ds.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},ds.prototype.addBody=function(t){es&&is.assert(t instanceof ss,"Not a Body!",t),this.m_bodies.push(t)},ds.prototype.addContact=function(t){es&&is.assert(t instanceof as,"Not a Contact!",t),this.m_contacts.push(t)},ds.prototype.addJoint=function(t){es&&is.assert(t instanceof ls,"Not a Joint!",t),this.m_joints.push(t)},ds.prototype.solveWorld=function(t){for(var e=this.m_world,n=e.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1;for(var i=e.m_contactList;i;i=i.m_next)i.m_islandFlag=!1;for(var r=e.m_jointList;r;r=r.m_next)r.m_islandFlag=!1;for(var o=this.m_stack,s=e.m_bodyList;s;s=s.m_next)if(!s.m_islandFlag&&0!=s.isAwake()&&0!=s.isActive()&&!s.isStatic()){for(this.clear(),o.push(s),s.m_islandFlag=!0;o.length>0;){n=o.pop();if(es&&is.assert(1==n.isActive()),this.addBody(n),n.setAwake(!0),!n.isStatic()){for(var a=n.m_contactList;a;a=a.next){var l=a.contact;if(!l.m_islandFlag&&(0!=l.isEnabled()&&0!=l.isTouching())){var c=l.m_fixtureA.m_isSensor,u=l.m_fixtureB.m_isSensor;if(!c&&!u)this.addContact(l),l.m_islandFlag=!0,(m=a.other).m_islandFlag||(o.push(m),m.m_islandFlag=!0)}}for(var h=n.m_jointList;h;h=h.next){var m;if(1!=h.joint.m_islandFlag)0!=(m=h.other).isActive()&&(this.addJoint(h.joint),h.joint.m_islandFlag=!0,m.m_islandFlag||(o.push(m),m.m_islandFlag=!0))}}}this.solveIsland(t);for(var p=0;p<this.m_bodies.length;++p){(n=this.m_bodies[p]).isStatic()&&(n.m_islandFlag=!1)}}},ds.prototype.solveIsland=function(t){for(var e=this.m_world,n=e.m_gravity,i=e.m_allowSleep,r=t.dt,o=0;o<this.m_bodies.length;++o){var s=this.m_bodies[o],a=rs.clone(s.m_sweep.c),l=s.m_sweep.a,c=rs.clone(s.m_linearVelocity),u=s.m_angularVelocity;s.m_sweep.c0.set(s.m_sweep.c),s.m_sweep.a0=s.m_sweep.a,s.isDynamic()&&(c.addMul(r*s.m_gravityScale,n),c.addMul(r*s.m_invMass,s.m_force),u+=r*s.m_invI*s.m_torque,c.mul(1/(1+r*s.m_linearDamping)),u*=1/(1+r*s.m_angularDamping)),s.c_position.c=a,s.c_position.a=l,s.c_velocity.v=c,s.c_velocity.w=u}for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].initConstraint(t)}ts&&this.printBodies("M: ");for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].initVelocityConstraint(t)}if(ts&&this.printBodies("R: "),t.warmStarting)for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].warmStartConstraint(t)}ts&&this.printBodies("Q: ");for(o=0;o<this.m_joints.length;++o){this.m_joints[o].initVelocityConstraints(t)}ts&&this.printBodies("E: ");for(o=0;o<t.velocityIterations;++o){for(var h=0;h<this.m_joints.length;++h){this.m_joints[h].solveVelocityConstraints(t)}for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].solveVelocityConstraint(t)}}ts&&this.printBodies("D: ");for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].storeConstraintImpulses(t)}ts&&this.printBodies("C: ");for(o=0;o<this.m_bodies.length;++o){s=this.m_bodies[o],a=rs.clone(s.c_position.c),l=s.c_position.a,c=rs.clone(s.c_velocity.v),u=s.c_velocity.w;var m=rs.mul(r,c);if(rs.lengthSquared(m)>ns.maxTranslationSquared){var p=ns.maxTranslation/m.length();c.mul(p)}var d=r*u;if(d*d>ns.maxRotationSquared)u*=p=ns.maxRotation/os.abs(d);a.addMul(r,c),l+=r*u,s.c_position.c.set(a),s.c_position.a=l,s.c_velocity.v.set(c),s.c_velocity.w=u}ts&&this.printBodies("B: ");var f=!1;for(o=0;o<t.positionIterations;++o){var y=0;for(h=0;h<this.m_contacts.length;++h){var _=this.m_contacts[h].solvePositionConstraint(t);y=os.min(y,_)}var g=y>=-3*ns.linearSlop,v=!0;for(h=0;h<this.m_joints.length;++h){var b=this.m_joints[h].solvePositionConstraints(t);v=v&&b}if(g&&v){f=!0;break}}ts&&this.printBodies("L: ");for(o=0;o<this.m_bodies.length;++o){(s=this.m_bodies[o]).m_sweep.c.set(s.c_position.c),s.m_sweep.a=s.c_position.a,s.m_linearVelocity.set(s.c_velocity.v),s.m_angularVelocity=s.c_velocity.w,s.synchronizeTransform()}if(this.postSolveIsland(),i){var x=1/0,$=ns.linearSleepToleranceSqr,A=ns.angularSleepToleranceSqr;for(o=0;o<this.m_bodies.length;++o){(s=this.m_bodies[o]).isStatic()||(0==s.m_autoSleepFlag||s.m_angularVelocity*s.m_angularVelocity>A||rs.lengthSquared(s.m_linearVelocity)>$?(s.m_sleepTime=0,x=0):(s.m_sleepTime+=r,x=os.min(x,s.m_sleepTime)))}if(x>=ns.timeToSleep&&f)for(o=0;o<this.m_bodies.length;++o){(s=this.m_bodies[o]).setAwake(!1)}}},ds.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var n=this.m_bodies[e];is.debug(t,n.c_position.a,n.c_position.c.x,n.c_position.c.y,n.c_velocity.w,n.c_velocity.v.x,n.c_velocity.v.y)}};var fs=new ps;function ys(){this.normalImpulses=[],this.tangentImpulses=[]}ds.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var n=e.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1,n.m_sweep.alpha0=0;for(var i=e.m_contactList;i;i=i.m_next)i.m_toiFlag=!1,i.m_islandFlag=!1,i.m_toiCount=0,i.m_toi=1}for(;;){var r=null,o=1;for(i=e.m_contactList;i;i=i.m_next)if(0!=i.isEnabled()&&!(i.m_toiCount>ns.maxSubSteps)){var s=1;if(i.m_toiFlag)s=i.m_toi;else{var a=i.getFixtureA(),l=i.getFixtureB();if(a.isSensor()||l.isSensor())continue;var c=a.getBody(),u=l.getBody();es&&is.assert(c.isDynamic()||u.isDynamic());var h=c.isAwake()&&!c.isStatic(),m=u.isAwake()&&!u.isStatic();if(0==h&&0==m)continue;var p=c.isBullet()||!c.isDynamic(),d=u.isBullet()||!u.isDynamic();if(0==p&&0==d)continue;var f=c.m_sweep.alpha0;c.m_sweep.alpha0<u.m_sweep.alpha0?(f=u.m_sweep.alpha0,c.m_sweep.advance(f)):u.m_sweep.alpha0<c.m_sweep.alpha0&&(f=c.m_sweep.alpha0,u.m_sweep.advance(f)),es&&is.assert(f<1);var y=i.getChildIndexA(),_=i.getChildIndexB();c.m_sweep,u.m_sweep;var g=new us;g.proxyA.set(a.getShape(),y),g.proxyB.set(l.getShape(),_),g.sweepA.set(c.m_sweep),g.sweepB.set(u.m_sweep),g.tMax=1;var v=new hs;cs(v,g);var b=v.t;s=v.state==hs.e_touching?os.min(f+(1-f)*b,1):1,i.m_toi=s,i.m_toiFlag=!0}s<o&&(r=i,o=s)}if(null==r||1-10*os.EPSILON<o){e.m_stepComplete=!0;break}a=r.getFixtureA(),l=r.getFixtureB(),c=a.getBody(),u=l.getBody();var x=c.m_sweep.clone(),$=u.m_sweep.clone();if(c.advance(o),u.advance(o),r.update(e),r.m_toiFlag=!1,++r.m_toiCount,0!=r.isEnabled()&&0!=r.isTouching()){c.setAwake(!0),u.setAwake(!0),this.clear(),this.addBody(c),this.addBody(u),this.addContact(r),c.m_islandFlag=!0,u.m_islandFlag=!0,r.m_islandFlag=!0;for(var A=[c,u],w=0;w<A.length;++w){if((k=A[w]).isDynamic())for(var B=k.m_contactList;B;B=B.next){var C=B.contact;if(!C.m_islandFlag){var S=B.other;if(!S.isDynamic()||k.isBullet()||S.isBullet()){var E=C.m_fixtureA.m_isSensor,M=C.m_fixtureB.m_isSensor;if(!E&&!M){var T=S.m_sweep.clone();0==S.m_islandFlag&&S.advance(o),C.update(e),0!=C.isEnabled()&&0!=C.isTouching()?(C.m_islandFlag=!0,this.addContact(C),S.m_islandFlag||(S.m_islandFlag=!0,S.isStatic()||S.setAwake(!0),this.addBody(S))):(S.m_sweep.set(T),S.synchronizeTransform())}}}}}fs.reset((1-o)*t.dt),fs.dtRatio=1,fs.positionIterations=20,fs.velocityIterations=t.velocityIterations,fs.warmStarting=!1,this.solveIslandTOI(fs,c,u);for(w=0;w<this.m_bodies.length;++w){var k;if((k=this.m_bodies[w]).m_islandFlag=!1,k.isDynamic()){k.synchronizeFixtures();for(B=k.m_contactList;B;B=B.next)B.contact.m_toiFlag=!1,B.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else r.setEnabled(!1),c.m_sweep.set(x),u.m_sweep.set($),c.synchronizeTransform(),u.synchronizeTransform()}if(ts)for(n=e.m_bodyList;n;n=n.m_next){i=n.m_sweep.c;n.m_sweep.a,n.m_linearVelocity,n.m_angularVelocity}},ds.prototype.solveIslandTOI=function(t,e,n){this.m_world;for(var i=0;i<this.m_bodies.length;++i){(l=this.m_bodies[i]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity}for(i=0;i<this.m_contacts.length;++i){this.m_contacts[i].initConstraint(t)}for(i=0;i<t.positionIterations;++i){for(var r=0,o=0;o<this.m_contacts.length;++o){var s=this.m_contacts[o].solvePositionConstraintTOI(t,e,n);r=os.min(r,s)}if(r>=-1.5*ns.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,n.m_sweep.c0.set(n.c_position.c),n.m_sweep.a0=n.c_position.a;for(i=0;i<this.m_contacts.length;++i){this.m_contacts[i].initVelocityConstraint(t)}for(i=0;i<t.velocityIterations;++i)for(o=0;o<this.m_contacts.length;++o){this.m_contacts[o].solveVelocityConstraint(t)}var a=t.dt;for(i=0;i<this.m_bodies.length;++i){var l=this.m_bodies[i],c=rs.clone(l.c_position.c),u=l.c_position.a,h=rs.clone(l.c_velocity.v),m=l.c_velocity.w,p=rs.mul(a,h);if(rs.dot(p,p)>ns.maxTranslationSquared){var d=ns.maxTranslation/p.length();h.mul(d)}var f=a*m;if(f*f>ns.maxRotationSquared)m*=d=ns.maxRotation/os.abs(f);c.addMul(a,h),u+=a*m,l.c_position.c=c,l.c_position.a=u,l.c_velocity.v=h,l.c_velocity.w=m,l.m_sweep.c=c,l.m_sweep.a=u,l.m_linearVelocity=h,l.m_angularVelocity=m,l.synchronizeTransform()}this.postSolveIsland()},ds.prototype.postSolveIsland=function(){for(var t=new ys,e=0;e<this.m_contacts.length;++e){for(var n=this.m_contacts[e],i=0;i<n.v_points.length;++i)t.normalImpulses.push(n.v_points[i].normalImpulse),t.tangentImpulses.push(n.v_points[i].tangentImpulse);this.m_world.postSolve(n,t)}},"undefined"!=typeof DEBUG&&DEBUG;var _s="undefined"!=typeof ASSERT&&ASSERT,gs=Es,vs=xn,bs=$n,xs=zn,$s=ui,As=mi.exports,ws=er,Bs=ko,Cs=Ao,Ss={gravity:xs.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function Es(t){if(!(this instanceof Es))return new Es(t);t&&xs.isValid(t)&&(t={gravity:t}),t=vs(t,Ss),this.m_solver=new As(this),this.m_broadPhase=new $s,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=xs.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.addPair=this.createContact.bind(this)}Es.prototype._serialize=function(){for(var t=[],e=[],n=this.getBodyList();n;n=n.getNext())t.push(n);for(var i=this.getJointList();i;i=i.getNext())"function"==typeof i._serialize&&e.push(i);return{gravity:this.m_gravity,bodies:t,joints:e}},Es._deserialize=function(t,e,n){if(!t)return new Es;var i=new Es(t.gravity);if(t.bodies)for(var r=t.bodies.length-1;r>=0;r-=1)i._addBody(n(ws,t.bodies[r],i));if(t.joints)for(r=t.joints.length-1;r>=0;r--)i.createJoint(n(Bs,t.joints[r],i));return i},Es.prototype.getBodyList=function(){return this.m_bodyList},Es.prototype.getJointList=function(){return this.m_jointList},Es.prototype.getContactList=function(){return this.m_contactList},Es.prototype.getBodyCount=function(){return this.m_bodyCount},Es.prototype.getJointCount=function(){return this.m_jointCount},Es.prototype.getContactCount=function(){return this.m_contactCount},Es.prototype.setGravity=function(t){this.m_gravity=t},Es.prototype.getGravity=function(){return this.m_gravity},Es.prototype.isLocked=function(){return this.m_locked},Es.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},Es.prototype.getAllowSleeping=function(){return this.m_allowSleep},Es.prototype.setWarmStarting=function(t){this.m_warmStarting=t},Es.prototype.getWarmStarting=function(){return this.m_warmStarting},Es.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},Es.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},Es.prototype.setSubStepping=function(t){this.m_subStepping=t},Es.prototype.getSubStepping=function(){return this.m_subStepping},Es.prototype.setAutoClearForces=function(t){this.m_clearForces=t},Es.prototype.getAutoClearForces=function(){return this.m_clearForces},Es.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},Es.prototype.queryAABB=function(t,e){_s&&bs.assert("function"==typeof e);var n=this.m_broadPhase;this.m_broadPhase.query(t,(function(t){var i=n.getUserData(t);return e(i.fixture)}))},Es.prototype.rayCast=function(t,e,n){_s&&bs.assert("function"==typeof n);var i=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},(function(t,e){var r=i.getUserData(e),o=r.fixture,s=r.childIndex,a={};if(o.rayCast(a,t,s)){var l=a.fraction,c=xs.add(xs.mul(1-l,t.p1),xs.mul(l,t.p2));return n(o,c,a.normal,l)}return t.maxFraction}))},Es.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},Es.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},Es.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},Es.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},Es.prototype.shiftOrigin=function(t){if(_s&&bs.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var n=this.m_jointList;n;n=n.m_next)n.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},Es.prototype._addBody=function(t){_s&&bs.assert(!1===this.isLocked()),this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},Es.prototype.createBody=function(t,e){if(_s&&bs.assert(0==this.isLocked()),this.isLocked())return null;t&&xs.isValid(t)&&(t={position:t,angle:e});var n=new ws(this,t);return this._addBody(n),n},Es.prototype.createDynamicBody=function(t,e){return t?xs.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},Es.prototype.createKinematicBody=function(t,e){return t?xs.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},Es.prototype.destroyBody=function(t){if(_s&&bs.assert(this.m_bodyCount>0),_s&&bs.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var n=e;e=e.next,this.publish("remove-joint",n.joint),this.destroyJoint(n.joint),t.m_jointList=e}t.m_jointList=null;for(var i=t.m_contactList;i;){var r=i;i=i.next,this.destroyContact(r.contact),t.m_contactList=i}t.m_contactList=null;for(var o=t.m_fixtureList;o;){var s=o;o=o.m_next,this.publish("remove-fixture",s),s.destroyProxies(this.m_broadPhase),t.m_fixtureList=o}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},Es.prototype.createJoint=function(t){if(_s&&bs.assert(!!t.m_bodyA),_s&&bs.assert(!!t.m_bodyB),_s&&bs.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},Es.prototype.destroyJoint=function(t){if(_s&&bs.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,n=t.m_bodyB;if(e.setAwake(!0),n.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,_s&&bs.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var i=n.getContactList();i;)i.other==e&&i.contact.flagForFiltering(),i=i.next;this.publish("remove-joint",t)}};var Ms=new As.TimeStep;Es.prototype.step=function(t,e,n){if(this.publish("pre-step",t),(0|e)!==e&&(e=0),e=e||this.m_velocityIterations,n=n||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,Ms.reset(t),Ms.velocityIterations=e,Ms.positionIterations=n,Ms.warmStarting=this.m_warmStarting,Ms.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(Ms);for(var i=this.m_bodyList;i;i=i.getNext())0!=i.m_islandFlag&&(i.isStatic()||i.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(Ms),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",t)},Es.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},Es.prototype.createContact=function(t,e){var n=t.fixture,i=e.fixture,r=t.childIndex,o=e.childIndex,s=n.getBody(),a=i.getBody();if(s!=a){for(var l=a.getContactList();l;){if(l.other==s){var c=l.contact.getFixtureA(),u=l.contact.getFixtureB(),h=l.contact.getChildIndexA(),m=l.contact.getChildIndexB();if(c==n&&u==i&&h==r&&m==o)return;if(c==i&&u==n&&h==o&&m==r)return}l=l.next}if(0!=a.shouldCollide(s)&&0!=i.shouldCollide(n)){var p=Cs.create(n,r,i,o);null!=p&&(p.m_prev=null,null!=this.m_contactList&&(p.m_next=this.m_contactList,this.m_contactList.m_prev=p),this.m_contactList=p,++this.m_contactCount)}}},Es.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var n=t.getFixtureA(),i=t.getFixtureB(),r=t.getChildIndexA(),o=t.getChildIndexB(),s=n.getBody(),a=i.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==i.shouldCollide(n)){this.destroyContact(t);continue}t.m_filterFlag=!1}var l=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=l||0!=c){var u=n.m_proxies[r].proxyId,h=i.m_proxies[o].proxyId;0!=this.m_broadPhase.testOverlap(u,h)?t.update(this):this.destroyContact(t)}}},Es.prototype.destroyContact=function(t){Cs.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},Es.prototype._listeners=null,Es.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e||(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this},Es.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var n=this._listeners&&this._listeners[t];if(!n||!n.length)return this;var i=n.indexOf(e);return i>=0&&n.splice(i,1),this},Es.prototype.publish=function(t,e,n,i){var r=this._listeners&&this._listeners[t];if(!r||!r.length)return 0;for(var o=0;o<r.length;o++)r[o].call(this,e,n,i);return r.length},Es.prototype.beginContact=function(t){this.publish("begin-contact",t)},Es.prototype.endContact=function(t){this.publish("end-contact",t)},Es.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},Es.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)};var Ts=gs,ks=er,Ps=ko,zs=Ni,Is=Ri,Fs=zn,Vs=Or,js=0;function Ls(t){var e=(t=t||{}).rootClass||Ts,n=t.preSerialize||function(t){return t},i=t.postSerialize||function(t,e){return t},r=t.preDeserialize||function(t){return t},o=t.postDeserialize||function(t,e){return t},s={World:Ts,Body:ks,Joint:Ps,Fixture:zs,Shape:Is},a=Object.assign({Vec2:Fs,Vec3:Vs},s);this.toJson=function(t){var e=[],r=[t],o={};function a(t,n){if(t.__sid=t.__sid||++js,!o[t.__sid]){r.push(t);var i={refIndex:e.length+r.length,refType:n};o[t.__sid]=i}return o[t.__sid]}function l(t,e){if("object"!=typeof t||null===t)return t;if("function"==typeof t._serialize){if(t!==e)for(var r in s)if(t instanceof s[r])return a(t,r);c=(o=n(o=t))._serialize(),t=i(c,o)}var o,c;if(Array.isArray(t)){for(var u=[],h=0;h<t.length;h++)u[h]=l(t[h]);t=u}else{u={};for(var h in t)t.hasOwnProperty(h)&&(u[h]=l(t[h]));t=u}return t}for(;r.length;){var c=r.shift(),u=l(c,c);e.push(u)}return e},this.fromJson=function(t){var n={};function i(t,e,n){e=r(e);var i=t._deserialize(e,n,s);return i=o(i,e)}function s(e,r,o){if(!r.refIndex)return e&&e._deserialize&&i(e,r,o);e=a[r.refType]||e;var s=r.refIndex;if(!n[s]){var l=i(e,t[s],o);n[s]=l}return n[s]}return e._deserialize(t[0],null,s)}}bn.exports=Ls;var Ds=new Ls,Os=bn.exports.toJson=Ds.toJson,Rs=bn.exports.fromJson=Ds.fromJson;"undefined"!=typeof DEBUG&&DEBUG;var qs="undefined"!=typeof ASSERT&&ASSERT,Us=Js,Ns=$n,Ws=Bn.exports,Hs=fi,Ys=zn,Gs=Ri;function Js(t,e){if(!(this instanceof Js))return new Js(t,e);Js._super.call(this),this.m_type=Js.TYPE,this.m_p=Ys.zero(),this.m_radius=1,"object"==typeof t&&Ys.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}Js._super=Gs,Js.prototype=Object.create(Js._super.prototype),Js.TYPE="circle",Gs.TYPES[Js.TYPE]=Js,Js.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},Js._deserialize=function(t){return new Js(t.p,t.radius)},Js.prototype.getRadius=function(){return this.m_radius},Js.prototype.getCenter=function(){return this.m_p},Js.prototype.getVertex=function(t){return qs&&Ns.assert(0==t),this.m_p},Js.prototype.getVertexCount=function(t){return 1},Js.prototype._clone=function(){var t=new Js;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},Js.prototype.getChildCount=function(){return 1},Js.prototype.testPoint=function(t,e){var n=Ys.add(t.p,Hs.mulVec2(t.q,this.m_p)),i=Ys.sub(e,n);return Ys.dot(i,i)<=this.m_radius*this.m_radius},Js.prototype.rayCast=function(t,e,n,i){var r=Ys.add(n.p,Hs.mulVec2(n.q,this.m_p)),o=Ys.sub(e.p1,r),s=Ys.dot(o,o)-this.m_radius*this.m_radius,a=Ys.sub(e.p2,e.p1),l=Ys.dot(o,a),c=Ys.dot(a,a),u=l*l-c*s;if(u<0||c<Ws.EPSILON)return!1;var h=-(l+Ws.sqrt(u));return 0<=h&&h<=e.maxFraction*c&&(h/=c,t.fraction=h,t.normal=Ys.add(o,Ys.mul(h,a)),t.normal.normalize(),!0)},Js.prototype.computeAABB=function(t,e,n){var i=Ys.add(e.p,Hs.mulVec2(e.q,this.m_p));t.lowerBound.set(i.x-this.m_radius,i.y-this.m_radius),t.upperBound.set(i.x+this.m_radius,i.y+this.m_radius)},Js.prototype.computeMass=function(t,e){t.mass=e*Ws.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+Ys.dot(this.m_p,this.m_p))},Js.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Zs=na,Xs=jn,Ks=Ri,Qs=$i,ta=fi,ea=zn;function na(t,e){if(!(this instanceof na))return new na(t,e);na._super.call(this),this.m_type=na.TYPE,this.m_radius=Xs.polygonRadius,this.m_vertex1=t?ea.clone(t):ea.zero(),this.m_vertex2=e?ea.clone(e):ea.zero(),this.m_vertex0=ea.zero(),this.m_vertex3=ea.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}na._super=Ks,na.prototype=Object.create(na._super.prototype),na.TYPE="edge",Ks.TYPES[na.TYPE]=na,na.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},na._deserialize=function(t){var e=new na(t.vertex1,t.vertex2);return e.hasVertex0&&e.setPrev(t.vertex0),e.hasVertex3&&e.setNext(t.vertex3),e},na.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},na.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},na.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},na.prototype._clone=function(){var t=new na;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},na.prototype.getChildCount=function(){return 1},na.prototype.testPoint=function(t,e){return!1},na.prototype.rayCast=function(t,e,n,i){var r=ta.mulTVec2(n.q,ea.sub(e.p1,n.p)),o=ta.mulTVec2(n.q,ea.sub(e.p2,n.p)),s=ea.sub(o,r),a=this.m_vertex1,l=this.m_vertex2,c=ea.sub(l,a),u=ea.neo(c.y,-c.x);u.normalize();var h=ea.dot(u,ea.sub(a,r)),m=ea.dot(u,s);if(0==m)return!1;var p=h/m;if(p<0||e.maxFraction<p)return!1;var d=ea.add(r,ea.mul(p,s)),f=ea.sub(l,a),y=ea.dot(f,f);if(0==y)return!1;var _=ea.dot(ea.sub(d,a),f)/y;return!(_<0||1<_)&&(t.fraction=p,t.normal=h>0?ta.mulVec2(n.q,u).neg():ta.mulVec2(n.q,u),!0)},na.prototype.computeAABB=function(t,e,n){var i=Qs.mulVec2(e,this.m_vertex1),r=Qs.mulVec2(e,this.m_vertex2);t.combinePoints(i,r),t.extend(this.m_radius)},na.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},na.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var ia="undefined"!=typeof ASSERT&&ASSERT,ra=ma,oa=$n,sa=Bn.exports,aa=$i,la=fi,ca=zn,ua=jn,ha=Ri;function ma(t){if(!(this instanceof ma))return new ma(t);ma._super.call(this),this.m_type=ma.TYPE,this.m_radius=ua.polygonRadius,this.m_centroid=ca.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}ma._super=ha,ma.prototype=Object.create(ma._super.prototype),ma.TYPE="polygon",ha.TYPES[ma.TYPE]=ma,ma.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},ma._deserialize=function(t,e,n){var i=[];if(t.vertices)for(var r=0;r<t.vertices.length;r++)i.push(n(ca,t.vertices[r]));return new ma(i)},ma.prototype.getVertex=function(t){return ia&&oa.assert(0<=t&&t<this.m_count),this.m_vertices[t]},ma.prototype._clone=function(){var t=new ma;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},ma.prototype.getChildCount=function(){return 1},ma.prototype._reset=function(){this._set(this.m_vertices)},ma.prototype._set=function(t){if(ia&&oa.assert(3<=t.length&&t.length<=ua.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=sa.min(t.length,ua.maxPolygonVertices),n=[],i=0;i<e;++i){for(var r=t[i],o=!0,s=0;s<n.length;++s)if(ca.distanceSquared(r,n[s])<.25*ua.linearSlopSquared){o=!1;break}o&&n.push(r)}if((e=n.length)<3)return ia&&oa.assert(!1),void this._setAsBox(1,1);var a=0,l=n[0].x;for(i=1;i<e;++i){var c=n[i].x;(c>l||c===l&&n[i].y<n[a].y)&&(a=i,l=c)}for(var u=[],h=0,m=a;;){u[h]=m;var p=0;for(s=1;s<e;++s)if(p!==m){var d=ca.sub(n[p],n[u[h]]),f=(r=ca.sub(n[s],n[u[h]]),ca.cross(d,r));f<0&&(p=s),0===f&&r.lengthSquared()>d.lengthSquared()&&(p=s)}else p=s;if(++h,m=p,p===a)break}if(h<3)return ia&&oa.assert(!1),void this._setAsBox(1,1);this.m_count=h,this.m_vertices=[];for(i=0;i<h;++i)this.m_vertices[i]=n[u[i]];for(i=0;i<h;++i){var y=i,_=i+1<h?i+1:0,g=ca.sub(this.m_vertices[_],this.m_vertices[y]);ia&&oa.assert(g.lengthSquared()>sa.EPSILON*sa.EPSILON),this.m_normals[i]=ca.cross(g,1),this.m_normals[i].normalize()}this.m_centroid=function(t,e){ia&&oa.assert(e>=3);for(var n=ca.zero(),i=0,r=ca.zero(),o=1/3,s=0;s<e;++s){var a=r,l=t[s],c=s+1<e?t[s+1]:t[0],u=ca.sub(l,a),h=ca.sub(c,a),m=.5*ca.cross(u,h);i+=m,n.addMul(m*o,a),n.addMul(m*o,l),n.addMul(m*o,c)}return ia&&oa.assert(i>sa.EPSILON),n.mul(1/i),n}(this.m_vertices,h)}},ma.prototype._setAsBox=function(t,e,n,i){if(this.m_vertices[0]=ca.neo(t,-e),this.m_vertices[1]=ca.neo(t,e),this.m_vertices[2]=ca.neo(-t,e),this.m_vertices[3]=ca.neo(-t,-e),this.m_normals[0]=ca.neo(1,0),this.m_normals[1]=ca.neo(0,1),this.m_normals[2]=ca.neo(-1,0),this.m_normals[3]=ca.neo(0,-1),this.m_count=4,ca.isValid(n)){i=i||0,this.m_centroid.set(n);var r=aa.identity();r.p.set(n),r.q.set(i);for(var o=0;o<this.m_count;++o)this.m_vertices[o]=aa.mulVec2(r,this.m_vertices[o]),this.m_normals[o]=la.mulVec2(r.q,this.m_normals[o])}},ma.prototype.testPoint=function(t,e){for(var n=la.mulTVec2(t.q,ca.sub(e,t.p)),i=0;i<this.m_count;++i){if(ca.dot(this.m_normals[i],ca.sub(n,this.m_vertices[i]))>0)return!1}return!0},ma.prototype.rayCast=function(t,e,n,i){for(var r=la.mulTVec2(n.q,ca.sub(e.p1,n.p)),o=la.mulTVec2(n.q,ca.sub(e.p2,n.p)),s=ca.sub(o,r),a=0,l=e.maxFraction,c=-1,u=0;u<this.m_count;++u){var h=ca.dot(this.m_normals[u],ca.sub(this.m_vertices[u],r)),m=ca.dot(this.m_normals[u],s);if(0==m){if(h<0)return!1}else m<0&&h<a*m?(a=h/m,c=u):m>0&&h<l*m&&(l=h/m);if(l<a)return!1}return ia&&oa.assert(0<=a&&a<=e.maxFraction),c>=0&&(t.fraction=a,t.normal=la.mulVec2(n.q,this.m_normals[c]),!0)},ma.prototype.computeAABB=function(t,e,n){for(var i=1/0,r=1/0,o=-1/0,s=-1/0,a=0;a<this.m_count;++a){var l=aa.mulVec2(e,this.m_vertices[a]);i=sa.min(i,l.x),o=sa.max(o,l.x),r=sa.min(r,l.y),s=sa.max(s,l.y)}t.lowerBound.set(i,r),t.upperBound.set(o,s),t.extend(this.m_radius)},ma.prototype.computeMass=function(t,e){ia&&oa.assert(this.m_count>=3);for(var n=ca.zero(),i=0,r=0,o=ca.zero(),s=0;s<this.m_count;++s)o.add(this.m_vertices[s]);o.mul(1/this.m_count);var a=1/3;for(s=0;s<this.m_count;++s){var l=ca.sub(this.m_vertices[s],o),c=s+1<this.m_count?ca.sub(this.m_vertices[s+1],o):ca.sub(this.m_vertices[0],o),u=ca.cross(l,c),h=.5*u;i+=h,n.addCombine(h*a,l,h*a,c);var m=l.x,p=l.y,d=c.x,f=c.y;r+=.25*a*u*(m*m+d*m+d*d+(p*p+f*p+f*f))}t.mass=e*i,ia&&oa.assert(i>sa.EPSILON),n.mul(1/i),t.center.setCombine(1,n,1,o),t.I=e*r,t.I+=t.mass*(ca.dot(t.center,t.center)-ca.dot(n,n))},ma.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,n=t<this.m_count-1?e+1:0,i=this.m_vertices[e],r=ca.sub(this.m_vertices[n],i),o=0;o<this.m_count;++o)if(o!=e&&o!=n){var s=ca.sub(this.m_vertices[o],i);if(ca.cross(r,s)<0)return!1}return!0},ma.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var pa="undefined"!=typeof ASSERT&&ASSERT,da=xa,fa=$n,ya=$i,_a=zn,ga=jn,va=Ri,ba=Zs;function xa(t,e){if(!(this instanceof xa))return new xa(t,e);xa._super.call(this),this.m_type=xa.TYPE,this.m_radius=ga.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_isLoop=e,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}xa._super=va,xa.prototype=Object.create(xa._super.prototype),xa.TYPE="chain",va.TYPES[xa.TYPE]=xa,xa.prototype._serialize=function(){const t={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex};return this.m_prevVertex&&(t.prevVertex=this.m_prevVertex),this.m_nextVertex&&(t.nextVertex=this.m_nextVertex),t},xa._deserialize=function(t,e,n){var i=[];if(t.vertices)for(var r=0;r<t.vertices.length;r++)i.push(n(_a,t.vertices[r]));var o=new xa(i,t.isLoop);return t.prevVertex&&o.setPrevVertex(t.prevVertex),t.nextVertex&&o.setNextVertex(t.nextVertex),o},xa.prototype._createLoop=function(t){pa&&fa.assert(0==this.m_vertices.length&&0==this.m_count),pa&&fa.assert(t.length>=3);for(var e=1;e<t.length;++e){var n=t[e-1],i=t[e];pa&&fa.assert(_a.distanceSquared(n,i)>ga.linearSlopSquared)}this.m_vertices=[],this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=_a.clone(t[e]);return this.m_vertices[t.length]=_a.clone(t[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},xa.prototype._createChain=function(t){pa&&fa.assert(0==this.m_vertices.length&&0==this.m_count),pa&&fa.assert(t.length>=2);for(var e=1;e<t.length;++e){var n=t[e-1],i=t[e];pa&&fa.assert(_a.distanceSquared(n,i)>ga.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=_a.clone(t[e]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},xa.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},xa.prototype.setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},xa.prototype.setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},xa.prototype._clone=function(){var t=new xa;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},xa.prototype.getChildCount=function(){return this.m_count-1},xa.prototype.getChildEdge=function(t,e){pa&&fa.assert(0<=e&&e<this.m_count-1),t.m_type=ba.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},xa.prototype.getVertex=function(t){return pa&&fa.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},xa.prototype.testPoint=function(t,e){return!1},xa.prototype.rayCast=function(t,e,n,i){return pa&&fa.assert(0<=i&&i<this.m_count),new ba(this.getVertex(i),this.getVertex(i+1)).rayCast(t,e,n,0)},xa.prototype.computeAABB=function(t,e,n){pa&&fa.assert(0<=n&&n<this.m_count);var i=ya.mulVec2(e,this.getVertex(n)),r=ya.mulVec2(e,this.getVertex(n+1));t.combinePoints(i,r)},xa.prototype.computeMass=function(t,e){t.mass=0,t.center=_a.neo(),t.I=0},xa.prototype.computeDistanceProxy=function(t,e){pa&&fa.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var $a=wa,Aa=ra;function wa(t,e,n,i){if(!(this instanceof wa))return new wa(t,e,n,i);wa._super.call(this),this._setAsBox(t,e,n,i)}wa._super=Aa,wa.prototype=Object.create(wa._super.prototype),wa.TYPE="polygon","undefined"!=typeof DEBUG&&DEBUG;var Ba="undefined"!=typeof ASSERT&&ASSERT,Ca=$n,Sa=$i,Ea=zn,Ma=Ao,Ta=wr.exports,ka=Us;Ma.addType(ka.TYPE,ka.TYPE,(function(t,e,n,i,r,o,s){Ba&&Ca.assert(n.getType()==ka.TYPE),Ba&&Ca.assert(o.getType()==ka.TYPE),function(t,e,n,i,r){t.pointCount=0;var o=Sa.mulVec2(n,e.m_p),s=Sa.mulVec2(r,i.m_p),a=Ea.distanceSquared(s,o),l=e.m_radius,c=i.m_radius,u=l+c;if(a>u*u)return;t.type=Ta.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=Ta.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=Ta.e_vertex}(t,n.getShape(),e,o.getShape(),r)})),"undefined"!=typeof DEBUG&&DEBUG;var Pa="undefined"!=typeof ASSERT&&ASSERT,za=$n,Ia=$i,Fa=zn,Va=Ao,ja=wr.exports,La=Zs,Da=da,Oa=Us;function Ra(t,e,n,i,r){t.pointCount=0;var o=Ia.mulTVec2(n,Ia.mulVec2(r,i.m_p)),s=e.m_vertex1,a=e.m_vertex2,l=Fa.sub(a,s),c=Fa.dot(l,Fa.sub(a,o)),u=Fa.dot(l,Fa.sub(o,s)),h=e.m_radius+i.m_radius;if(u<=0){var m=Fa.clone(s),p=Fa.sub(o,m);if(Fa.dot(p,p)>h*h)return;if(e.m_hasVertex0){var d=e.m_vertex0,f=s,y=Fa.sub(f,d);if(Fa.dot(y,Fa.sub(f,o))>0)return}return t.type=ja.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=ja.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=ja.e_vertex)}if(c<=0){m=Fa.clone(a),p=Fa.sub(o,m);if(Fa.dot(p,p)>h*h)return;if(e.m_hasVertex3){var _=e.m_vertex3,g=a,v=Fa.sub(_,g);if(Fa.dot(v,Fa.sub(o,g))>0)return}return t.type=ja.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=ja.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=ja.e_vertex)}var b=Fa.dot(l,l);Pa&&za.assert(b>0);m=Fa.combine(c/b,s,u/b,a),p=Fa.sub(o,m);if(!(Fa.dot(p,p)>h*h)){var x=Fa.neo(-l.y,l.x);Fa.dot(x,Fa.sub(o,s))<0&&x.set(-x.x,-x.y),x.normalize(),t.type=ja.e_faceA,t.localNormal=x,t.localPoint.set(s),t.pointCount=1,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=ja.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=ja.e_vertex}}Va.addType(La.TYPE,Oa.TYPE,(function(t,e,n,i,r,o,s){Pa&&za.assert(n.getType()==La.TYPE),Pa&&za.assert(o.getType()==Oa.TYPE);var a=n.getShape(),l=o.getShape();Ra(t,a,e,l,r)})),Va.addType(Da.TYPE,Oa.TYPE,(function(t,e,n,i,r,o,s){Pa&&za.assert(n.getType()==Da.TYPE),Pa&&za.assert(o.getType()==Oa.TYPE);var a=n.getShape(),l=new La;a.getChildEdge(l,i);var c=l,u=o.getShape();Ra(t,c,e,u,r)})),"undefined"!=typeof DEBUG&&DEBUG;var qa="undefined"!=typeof ASSERT&&ASSERT,Ua=$n,Na=$i,Wa=fi,Ha=zn,Ya=jn,Ga=wr.exports,Ja=ra,Za=Ka;function Xa(t,e,n,i){for(var r=t.m_count,o=n.m_count,s=t.m_normals,a=t.m_vertices,l=n.m_vertices,c=Na.mulTXf(i,e),u=0,h=-1/0,m=0;m<r;++m){for(var p=Wa.mulVec2(c.q,s[m]),d=Na.mulVec2(c,a[m]),f=1/0,y=0;y<o;++y){var _=Ha.dot(p,l[y])-Ha.dot(p,d);_<f&&(f=_)}f>h&&(h=f,u=m)}Xa._maxSeparation=h,Xa._bestIndex=u}function Ka(t,e,n,i,r){t.pointCount=0;var o=e.m_radius+i.m_radius;Xa(e,n,i,r);var s=Xa._bestIndex,a=Xa._maxSeparation;if(!(a>o)){Xa(i,r,e,n);var l=Xa._bestIndex,c=Xa._maxSeparation;if(!(c>o)){var u,h,m,p,d,f;c>a+.1*Ya.linearSlop?(u=i,h=e,m=r,p=n,d=l,t.type=Ga.e_faceB,f=1):(u=e,h=i,m=n,p=r,d=s,t.type=Ga.e_faceA,f=0);var y=[new Ga.clipVertex,new Ga.clipVertex];!function(t,e,n,i,r,o){var s=e.m_normals,a=r.m_count,l=r.m_vertices,c=r.m_normals;qa&&Ua.assert(0<=i&&i<e.m_count);for(var u=Wa.mulT(o.q,Wa.mulVec2(n.q,s[i])),h=0,m=1/0,p=0;p<a;++p){var d=Ha.dot(u,c[p]);d<m&&(m=d,h=p)}var f=h,y=f+1<a?f+1:0;t[0].v=Na.mulVec2(o,l[f]),t[0].id.cf.indexA=i,t[0].id.cf.indexB=f,t[0].id.cf.typeA=Ga.e_face,t[0].id.cf.typeB=Ga.e_vertex,t[1].v=Na.mulVec2(o,l[y]),t[1].id.cf.indexA=i,t[1].id.cf.indexB=y,t[1].id.cf.typeA=Ga.e_face,t[1].id.cf.typeB=Ga.e_vertex}(y,u,m,d,h,p);var _=u.m_count,g=u.m_vertices,v=d,b=d+1<_?d+1:0,x=g[v],$=g[b],A=Ha.sub($,x);A.normalize();var w=Ha.cross(A,1),B=Ha.combine(.5,x,.5,$),C=Wa.mulVec2(m.q,A),S=Ha.cross(C,1);x=Na.mulVec2(m,x),$=Na.mulVec2(m,$);var E=Ha.dot(S,x),M=-Ha.dot(C,x)+o,T=Ha.dot(C,$)+o,k=[new Ga.clipVertex,new Ga.clipVertex],P=[new Ga.clipVertex,new Ga.clipVertex];if(!(Ga.clipSegmentToLine(k,y,Ha.neg(C),M,v)<2||Ga.clipSegmentToLine(P,k,C,T,b)<2)){t.localNormal=w,t.localPoint=B;for(var z=0,I=0;I<P.length;++I){if(Ha.dot(S,P[I].v)-E<=o){var F=t.points[z];if(F.localPoint.set(Na.mulTVec2(p,P[I].v)),F.id=P[I].id,f){var V=F.id.cf,j=V.indexA,L=V.indexB,D=V.typeA,O=V.typeB;V.indexA=L,V.indexB=j,V.typeA=O,V.typeB=D}++z}}t.pointCount=z}}}}Ao.addType(Ja.TYPE,Ja.TYPE,(function(t,e,n,i,r,o,s){qa&&Ua.assert(n.getType()==Ja.TYPE),qa&&Ua.assert(o.getType()==Ja.TYPE),Ka(t,n.getShape(),e,o.getShape(),r)})),"undefined"!=typeof DEBUG&&DEBUG;var Qa="undefined"!=typeof ASSERT&&ASSERT,tl=$n,el=Bn.exports,nl=$i,il=zn,rl=wr.exports,ol=Us,sl=ra;Ao.addType(sl.TYPE,ol.TYPE,(function(t,e,n,i,r,o,s){Qa&&tl.assert(n.getType()==sl.TYPE),Qa&&tl.assert(o.getType()==ol.TYPE),function(t,e,n,i,r){t.pointCount=0;for(var o=nl.mulVec2(r,i.m_p),s=nl.mulTVec2(n,o),a=0,l=-1/0,c=e.m_radius+i.m_radius,u=e.m_count,h=e.m_vertices,m=e.m_normals,p=0;p<u;++p){var d=il.dot(m[p],il.sub(s,h[p]));if(d>c)return;d>l&&(l=d,a=p)}var f=a,y=f+1<u?f+1:0,_=h[f],g=h[y];if(l<el.EPSILON)return t.pointCount=1,t.type=rl.e_faceA,t.localNormal.set(m[a]),t.localPoint.setCombine(.5,_,.5,g),t.points[0].localPoint=i.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=rl.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=rl.e_vertex);var v=il.dot(il.sub(s,_),il.sub(g,_)),b=il.dot(il.sub(s,g),il.sub(_,g));if(v<=0){if(il.distanceSquared(s,_)>c*c)return;t.pointCount=1,t.type=rl.e_faceA,t.localNormal.setCombine(1,s,-1,_),t.localNormal.normalize(),t.localPoint=_,t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=rl.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=rl.e_vertex}else if(b<=0){if(il.distanceSquared(s,g)>c*c)return;t.pointCount=1,t.type=rl.e_faceA,t.localNormal.setCombine(1,s,-1,g),t.localNormal.normalize(),t.localPoint.set(g),t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=rl.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=rl.e_vertex}else{var x=il.mid(_,g);if((l=il.dot(s,m[f])-il.dot(x,m[f]))>c)return;t.pointCount=1,t.type=rl.e_faceA,t.localNormal.set(m[f]),t.localPoint.set(x),t.points[0].localPoint.set(i.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=rl.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=rl.e_vertex}}(t,n.getShape(),e,o.getShape(),r)})),"undefined"!=typeof DEBUG&&DEBUG;var al="undefined"!=typeof ASSERT&&ASSERT,ll=$n,cl=Bn.exports,ul=$i,hl=zn,ml=fi,pl=jn,dl=Ao,fl=wr.exports,yl=Zs,_l=da,gl=ra;dl.addType(yl.TYPE,gl.TYPE,(function(t,e,n,i,r,o,s){al&&ll.assert(n.getType()==yl.TYPE),al&&ll.assert(o.getType()==gl.TYPE),wl(t,n.getShape(),e,o.getShape(),r)})),dl.addType(_l.TYPE,gl.TYPE,(function(t,e,n,i,r,o,s){al&&ll.assert(n.getType()==_l.TYPE),al&&ll.assert(o.getType()==gl.TYPE);var a=n.getShape(),l=new yl;a.getChildEdge(l,i),wl(t,l,e,o.getShape(),r)}));function vl(){this.type,this.index,this.separation}var bl=new vl,xl=new vl,$l=new function(){this.vertices=[],this.normals=[],this.count=0},Al=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=hl.zero(),this.sideNormal1=hl.zero(),this.sideOffset1,this.sideNormal2=hl.zero(),this.sideOffset2};function wl(t,e,n,i,r){var o=ul.mulTXf(n,r),s=ul.mulVec2(o,i.m_centroid),a=e.m_vertex0,l=e.m_vertex1,c=e.m_vertex2,u=e.m_vertex3,h=e.m_hasVertex0,m=e.m_hasVertex3,p=hl.sub(c,l);p.normalize();var d,f=hl.neo(p.y,-p.x),y=hl.dot(f,hl.sub(s,l)),_=0,g=0,v=!1,b=!1;if(h){var x=hl.sub(l,a);x.normalize();var $=hl.neo(x.y,-x.x);v=hl.cross(x,p)>=0,_=hl.dot($,s)-hl.dot($,a)}if(m){var A=hl.sub(u,c);A.normalize();var w=hl.neo(A.y,-A.x);b=hl.cross(p,A)>0,g=hl.dot(w,s)-hl.dot(w,c)}var B=hl.zero(),C=hl.zero(),S=hl.zero();h&&m?v&&b?(d=_>=0||y>=0||g>=0)?(B.set(f),C.set($),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,f)):v?(d=_>=0||y>=0&&g>=0)?(B.set(f),C.set($),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,f)):b?(d=g>=0||_>=0&&y>=0)?(B.set(f),C.set(f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,$)):(d=_>=0&&y>=0&&g>=0)?(B.set(f),C.set(f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,$)):h?v?(d=_>=0||y>=0)?(B.set(f),C.set($),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,f)):(d=_>=0&&y>=0)?(B.set(f),C.set(f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,$)):m?b?(d=y>=0||g>=0)?(B.set(f),C.setMul(-1,f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.set(f)):(d=y>=0&&g>=0)?(B.set(f),C.setMul(-1,f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.set(f)):(d=y>=0)?(B.set(f),C.setMul(-1,f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.set(f)),$l.count=i.m_count;for(var E=0;E<i.m_count;++E)$l.vertices[E]=ul.mulVec2(o,i.m_vertices[E]),$l.normals[E]=ml.mulVec2(o.q,i.m_normals[E]);var M=2*pl.polygonRadius;t.pointCount=0,bl.type=1,bl.index=d?0:1,bl.separation=1/0;for(E=0;E<$l.count;++E){(k=hl.dot(B,hl.sub($l.vertices[E],l)))<bl.separation&&(bl.separation=k)}if(-1!=bl.type&&!(bl.separation>M)){xl.type=-1,xl.index=-1,xl.separation=-1/0;var T=hl.neo(-B.y,B.x);for(E=0;E<$l.count;++E){var k,P=hl.neg($l.normals[E]),z=hl.dot(P,hl.sub($l.vertices[E],l)),I=hl.dot(P,hl.sub($l.vertices[E],c));if((k=cl.min(z,I))>M){xl.type=2,xl.index=E,xl.separation=k;break}if(hl.dot(P,T)>=0){if(hl.dot(hl.sub(P,S),B)<-pl.angularSlop)continue}else if(hl.dot(hl.sub(P,C),B)<-pl.angularSlop)continue;k>xl.separation&&(xl.type=2,xl.index=E,xl.separation=k)}if(!(-1!=xl.type&&xl.separation>M)){var F;F=-1==xl.type?bl:xl.separation>.98*bl.separation+.001?xl:bl;var V=[new fl.clipVertex,new fl.clipVertex];if(1==F.type){t.type=fl.e_faceA;var j=0,L=hl.dot(B,$l.normals[0]);for(E=1;E<$l.count;++E){var D=hl.dot(B,$l.normals[E]);D<L&&(L=D,j=E)}var O=j,R=O+1<$l.count?O+1:0;V[0].v=$l.vertices[O],V[0].id.cf.indexA=0,V[0].id.cf.indexB=O,V[0].id.cf.typeA=fl.e_face,V[0].id.cf.typeB=fl.e_vertex,V[1].v=$l.vertices[R],V[1].id.cf.indexA=0,V[1].id.cf.indexB=R,V[1].id.cf.typeA=fl.e_face,V[1].id.cf.typeB=fl.e_vertex,d?(Al.i1=0,Al.i2=1,Al.v1=l,Al.v2=c,Al.normal.set(f)):(Al.i1=1,Al.i2=0,Al.v1=c,Al.v2=l,Al.normal.setMul(-1,f))}else t.type=fl.e_faceB,V[0].v=l,V[0].id.cf.indexA=0,V[0].id.cf.indexB=F.index,V[0].id.cf.typeA=fl.e_vertex,V[0].id.cf.typeB=fl.e_face,V[1].v=c,V[1].id.cf.indexA=0,V[1].id.cf.indexB=F.index,V[1].id.cf.typeA=fl.e_vertex,V[1].id.cf.typeB=fl.e_face,Al.i1=F.index,Al.i2=Al.i1+1<$l.count?Al.i1+1:0,Al.v1=$l.vertices[Al.i1],Al.v2=$l.vertices[Al.i2],Al.normal.set($l.normals[Al.i1]);Al.sideNormal1.set(Al.normal.y,-Al.normal.x),Al.sideNormal2.setMul(-1,Al.sideNormal1),Al.sideOffset1=hl.dot(Al.sideNormal1,Al.v1),Al.sideOffset2=hl.dot(Al.sideNormal2,Al.v2);var q=[new fl.clipVertex,new fl.clipVertex],U=[new fl.clipVertex,new fl.clipVertex];if(!(fl.clipSegmentToLine(q,V,Al.sideNormal1,Al.sideOffset1,Al.i1)<pl.maxManifoldPoints||fl.clipSegmentToLine(U,q,Al.sideNormal2,Al.sideOffset2,Al.i2)<pl.maxManifoldPoints)){1==F.type?(t.localNormal=hl.clone(Al.normal),t.localPoint=hl.clone(Al.v1)):(t.localNormal=hl.clone(i.m_normals[Al.i1]),t.localPoint=hl.clone(i.m_vertices[Al.i1]));var N=0;for(E=0;E<pl.maxManifoldPoints;++E){if(hl.dot(Al.normal,hl.sub(U[E].v,Al.v1))<=M){var W=t.points[N];1==F.type?(W.localPoint=ul.mulT(o,U[E].v),W.id=U[E].id):(W.localPoint=U[E].v,W.id.cf.typeA=U[E].id.cf.typeB,W.id.cf.typeB=U[E].id.cf.typeA,W.id.cf.indexA=U[E].id.cf.indexB,W.id.cf.indexB=U[E].id.cf.indexA),++N}}t.pointCount=N}}}}"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Bl=Il,Cl=xn,Sl=jn,El=Bn.exports,Ml=zn,Tl=fi,kl=ko,Pl=er;Il.TYPE="distance-joint",kl.TYPES[Il.TYPE]=Il,Il._super=kl,Il.prototype=Object.create(Il._super.prototype);var zl={frequencyHz:0,dampingRatio:0};function Il(t,e,n,i,r){if(!(this instanceof Il))return new Il(t,e,n,i,r);if(n&&i&&"m_type"in i&&"x"in n&&"y"in n){var o=n;n=i,i=o}t=Cl(t,zl),kl.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Il.TYPE,this.m_localAnchorA=Ml.clone(i?e.getLocalPoint(i):t.localAnchorA||Ml.zero()),this.m_localAnchorB=Ml.clone(r?n.getLocalPoint(r):t.localAnchorB||Ml.zero()),this.m_length=El.isFinite(t.length)?t.length:Ml.distance(e.getWorldPoint(this.m_localAnchorA),n.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}Il.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},Il._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Pl,t.bodyA,e),t.bodyB=n(Pl,t.bodyB,e),new Il(t)},Il.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.length>0?this.m_length=+t.length:t.length<0||(t.anchorA||t.anchorA||t.anchorA||t.anchorA)&&(this.m_length=Ml.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB)))},Il.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Il.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Il.prototype.setLength=function(t){this.m_length=t},Il.prototype.getLength=function(){return this.m_length},Il.prototype.setFrequency=function(t){this.m_frequencyHz=t},Il.prototype.getFrequency=function(){return this.m_frequencyHz},Il.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Il.prototype.getDampingRatio=function(){return this.m_dampingRatio},Il.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Il.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Il.prototype.getReactionForce=function(t){return Ml.mul(this.m_impulse,this.m_u).mul(t)},Il.prototype.getReactionTorque=function(t){return 0},Il.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Tl.neo(n),u=Tl.neo(s);this.m_rA=Tl.mulVec2(c,Ml.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Tl.mulVec2(u,Ml.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=Ml.sub(Ml.add(o,this.m_rB),Ml.add(e,this.m_rA));var h=this.m_u.length();h>Sl.linearSlop?this.m_u.mul(1/h):this.m_u.set(0,0);var m=Ml.cross(this.m_rA,this.m_u),p=Ml.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,this.m_frequencyHz>0){var f=h-this.m_length,y=2*El.PI*this.m_frequencyHz,_=2*this.m_mass*this.m_dampingRatio*y,g=this.m_mass*y*y,v=t.dt;this.m_gamma=v*(_+v*g),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=f*v*g*this.m_gamma,d+=this.m_gamma,this.m_mass=0!=d?1/d:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var b=Ml.mul(this.m_impulse,this.m_u);i.subMul(this.m_invMassA,b),r-=this.m_invIA*Ml.cross(this.m_rA,b),a.addMul(this.m_invMassB,b),l+=this.m_invIB*Ml.cross(this.m_rB,b)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Il.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=Ml.add(e,Ml.cross(n,this.m_rA)),s=Ml.add(i,Ml.cross(r,this.m_rB)),a=Ml.dot(this.m_u,s)-Ml.dot(this.m_u,o),l=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=l;var c=Ml.mul(l,this.m_u);e.subMul(this.m_invMassA,c),n-=this.m_invIA*Ml.cross(this.m_rA,c),i.addMul(this.m_invMassB,c),r+=this.m_invIB*Ml.cross(this.m_rB,c),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(i),this.m_bodyB.c_velocity.w=r},Il.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=Tl.neo(n),s=Tl.neo(r),a=Tl.mulSub(o,this.m_localAnchorA,this.m_localCenterA),l=Tl.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=Ml.sub(Ml.add(i,l),Ml.add(e,a)),u=c.normalize()-this.m_length;u=El.clamp(u,-Sl.maxLinearCorrection,Sl.maxLinearCorrection);var h=-this.m_mass*u,m=Ml.mul(h,c);return e.subMul(this.m_invMassA,m),n-=this.m_invIA*Ml.cross(a,m),i.addMul(this.m_invMassB,m),r+=this.m_invIB*Ml.cross(l,m),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,El.abs(u)<Sl.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var Fl="undefined"!=typeof ASSERT&&ASSERT,Vl=Hl,jl=$n,Ll=xn,Dl=Bn.exports,Ol=zn,Rl=br,ql=fi,Ul=ko,Nl=er;Hl.TYPE="friction-joint",Ul.TYPES[Hl.TYPE]=Hl,Hl._super=Ul,Hl.prototype=Object.create(Hl._super.prototype);var Wl={maxForce:0,maxTorque:0};function Hl(t,e,n,i){if(!(this instanceof Hl))return new Hl(t,e,n,i);t=Ll(t,Wl),Ul.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Hl.TYPE,this.m_localAnchorA=Ol.clone(i?e.getLocalPoint(i):t.localAnchorA||Ol.zero()),this.m_localAnchorB=Ol.clone(i?n.getLocalPoint(i):t.localAnchorB||Ol.zero()),this.m_linearImpulse=Ol.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}Hl.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},Hl._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Nl,t.bodyA,e),t.bodyB=n(Nl,t.bodyB,e),new Hl(t)},Hl.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Hl.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Hl.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Hl.prototype.setMaxForce=function(t){Fl&&jl.assert(Dl.isFinite(t)&&t>=0),this.m_maxForce=t},Hl.prototype.getMaxForce=function(){return this.m_maxForce},Hl.prototype.setMaxTorque=function(t){Fl&&jl.assert(Dl.isFinite(t)&&t>=0),this.m_maxTorque=t},Hl.prototype.getMaxTorque=function(){return this.m_maxTorque},Hl.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Hl.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Hl.prototype.getReactionForce=function(t){return Ol.mul(t,this.m_linearImpulse)},Hl.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},Hl.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=ql.neo(e),l=ql.neo(r);this.m_rA=ql.mulVec2(a,Ol.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=ql.mulVec2(l,Ol.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new Rl;if(p.ex.x=c+u+h*this.m_rA.y*this.m_rA.y+m*this.m_rB.y*this.m_rB.y,p.ex.y=-h*this.m_rA.x*this.m_rA.y-m*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=c+u+h*this.m_rA.x*this.m_rA.x+m*this.m_rB.x*this.m_rB.x,this.m_linearMass=p.getInverse(),this.m_angularMass=h+m,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var d=Ol.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.subMul(c,d),i-=h*(Ol.cross(this.m_rA,d)+this.m_angularImpulse),o.addMul(u,d),s+=m*(Ol.cross(this.m_rB,d)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},Hl.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=r-n,h=-this.m_angularMass*u,m=this.m_angularImpulse,p=c*this.m_maxTorque;this.m_angularImpulse=Dl.clamp(this.m_angularImpulse+h,-p,p),n-=a*(h=this.m_angularImpulse-m),r+=l*h;u=Ol.sub(Ol.add(i,Ol.cross(r,this.m_rB)),Ol.add(e,Ol.cross(n,this.m_rA))),h=Ol.neg(Rl.mulVec2(this.m_linearMass,u)),m=this.m_linearImpulse;this.m_linearImpulse.add(h);p=c*this.m_maxForce;this.m_linearImpulse.lengthSquared()>p*p&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(p)),h=Ol.sub(this.m_linearImpulse,m),e.subMul(o,h),n-=a*Ol.cross(this.m_rA,h),i.addMul(s,h),r+=l*Ol.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Hl.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Yl="undefined"!=typeof ASSERT&&ASSERT,Gl=ac,Jl=$n,Zl=xn,Xl=jn,Kl=Bn.exports,Ql=zn,tc=Or,ec=br,nc=Hr,ic=fi,rc=ko,oc=er;ac.TYPE="revolute-joint",rc.TYPES[ac.TYPE]=ac,ac._super=rc,ac.prototype=Object.create(ac._super.prototype);var sc={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function ac(t,e,n,i){if(!(this instanceof ac))return new ac(t,e,n,i);t=Zl(t,sc),rc.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=ac.TYPE,this.m_localAnchorA=Ql.clone(i?e.getLocalPoint(i):t.localAnchorA||Ql.zero()),this.m_localAnchorB=Ql.clone(i?n.getLocalPoint(i):t.localAnchorB||Ql.zero()),this.m_referenceAngle=Kl.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_impulse=tc(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new nc,this.m_motorMass,this.m_limitState=0}ac.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},ac._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(oc,t.bodyA,e),t.bodyB=n(oc,t.bodyB,e),new ac(t)},ac.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},ac.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},ac.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},ac.prototype.getReferenceAngle=function(){return this.m_referenceAngle},ac.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},ac.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},ac.prototype.isMotorEnabled=function(){return this.m_enableMotor},ac.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},ac.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},ac.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},ac.prototype.getMotorSpeed=function(){return this.m_motorSpeed},ac.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},ac.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},ac.prototype.isLimitEnabled=function(){return this.m_enableLimit},ac.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},ac.prototype.getLowerLimit=function(){return this.m_lowerAngle},ac.prototype.getUpperLimit=function(){return this.m_upperAngle},ac.prototype.setLimits=function(t,e){Yl&&Jl.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},ac.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},ac.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},ac.prototype.getReactionForce=function(t){return Ql.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},ac.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},ac.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=ic.neo(e),l=ic.neo(r);this.m_rA=ic.mulVec2(a,Ql.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=ic.mulVec2(l,Ql.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=h+m===0;if(this.m_mass.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,this.m_mass.ez.x=-this.m_rA.y*h-this.m_rB.y*m,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,this.m_mass.ez.y=this.m_rA.x*h+this.m_rB.x*m,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=h+m,this.m_motorMass=h+m,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||p)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==p){var d=r-e-this.m_referenceAngle;Kl.abs(this.m_upperAngle-this.m_lowerAngle)<2*Xl.angularSlop?this.m_limitState=3:d<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):d>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var f=Ql.neo(this.m_impulse.x,this.m_impulse.y);n.subMul(c,f),i-=h*(Ql.cross(this.m_rA,f)+this.m_motorImpulse+this.m_impulse.z),o.addMul(u,f),s+=m*(Ql.cross(this.m_rB,f)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},ac.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=a+l===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==c){var u=r-n-this.m_motorSpeed,h=-this.m_motorMass*u,m=this.m_motorImpulse,p=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=Kl.clamp(this.m_motorImpulse+h,-p,p),n-=a*(h=this.m_motorImpulse-m),r+=l*h}if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var d=Ql.zero();d.addCombine(1,i,1,Ql.cross(r,this.m_rB)),d.subCombine(1,e,1,Ql.cross(n,this.m_rA));var f=r-n;u=tc(d.x,d.y,f),h=tc.neg(this.m_mass.solve33(u));if(3==this.m_limitState)this.m_impulse.add(h);else if(1==this.m_limitState){if(this.m_impulse.z+h.z<0){var y=Ql.combine(-1,d,this.m_impulse.z,Ql.neo(this.m_mass.ez.x,this.m_mass.ez.y)),_=this.m_mass.solve22(y);h.x=_.x,h.y=_.y,h.z=-this.m_impulse.z,this.m_impulse.x+=_.x,this.m_impulse.y+=_.y,this.m_impulse.z=0}else this.m_impulse.add(h)}else if(2==this.m_limitState){if(this.m_impulse.z+h.z>0){y=Ql.combine(-1,d,this.m_impulse.z,Ql.neo(this.m_mass.ez.x,this.m_mass.ez.y)),_=this.m_mass.solve22(y);h.x=_.x,h.y=_.y,h.z=-this.m_impulse.z,this.m_impulse.x+=_.x,this.m_impulse.y+=_.y,this.m_impulse.z=0}else this.m_impulse.add(h)}var g=Ql.neo(h.x,h.y);e.subMul(o,g),n-=a*(Ql.cross(this.m_rA,g)+h.z),i.addMul(s,g),r+=l*(Ql.cross(this.m_rB,g)+h.z)}else{(u=Ql.zero()).addCombine(1,i,1,Ql.cross(r,this.m_rB)),u.subCombine(1,e,1,Ql.cross(n,this.m_rA));h=this.m_mass.solve22(Ql.neg(u));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y,e.subMul(o,h),n-=a*Ql.cross(this.m_rA,h),i.addMul(s,h),r+=l*Ql.cross(this.m_rB,h)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},ac.prototype.solvePositionConstraints=function(t){var e,n=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,s=ic.neo(i),a=ic.neo(o),l=0,c=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var u=o-i-this.m_referenceAngle,h=0;if(3==this.m_limitState){var m=Kl.clamp(u-this.m_lowerAngle,-Xl.maxAngularCorrection,Xl.maxAngularCorrection);h=-this.m_motorMass*m,l=Kl.abs(m)}else if(1==this.m_limitState){l=-(m=u-this.m_lowerAngle),m=Kl.clamp(m+Xl.angularSlop,-Xl.maxAngularCorrection,0),h=-this.m_motorMass*m}else if(2==this.m_limitState){l=m=u-this.m_upperAngle,m=Kl.clamp(m-Xl.angularSlop,0,Xl.maxAngularCorrection),h=-this.m_motorMass*m}i-=this.m_invIA*h,o+=this.m_invIB*h}s.set(i),a.set(o);var p=ic.mulVec2(s,Ql.sub(this.m_localAnchorA,this.m_localCenterA)),d=ic.mulVec2(a,Ql.sub(this.m_localAnchorB,this.m_localCenterB));(m=Ql.zero()).addCombine(1,r,1,d),m.subCombine(1,n,1,p),e=m.length();var f=this.m_invMassA,y=this.m_invMassB,_=this.m_invIA,g=this.m_invIB,v=new ec;v.ex.x=f+y+_*p.y*p.y+g*d.y*d.y,v.ex.y=-_*p.x*p.y-g*d.x*d.y,v.ey.x=v.ex.y,v.ey.y=f+y+_*p.x*p.x+g*d.x*d.x;var b=Ql.neg(v.solve(m));return n.subMul(f,b),i-=_*Ql.cross(p,b),r.addMul(y,b),o+=g*Ql.cross(d,b),this.m_bodyA.c_position.c.set(n),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=o,e<=Xl.linearSlop&&l<=Xl.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var lc="undefined"!=typeof ASSERT&&ASSERT,cc=$c,uc=$n,hc=xn,mc=jn,pc=Bn.exports,dc=zn,fc=Or,yc=br,_c=Hr,gc=fi,vc=ko,bc=er;$c.TYPE="prismatic-joint",vc.TYPES[$c.TYPE]=$c,$c._super=vc,$c.prototype=Object.create($c._super.prototype);var xc={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function $c(t,e,n,i,r){if(!(this instanceof $c))return new $c(t,e,n,i,r);t=hc(t,xc),vc.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=$c.TYPE,this.m_localAnchorA=dc.clone(i?e.getLocalPoint(i):t.localAnchorA||dc.zero()),this.m_localAnchorB=dc.clone(i?n.getLocalPoint(i):t.localAnchorB||dc.zero()),this.m_localXAxisA=dc.clone(r?e.getLocalVector(r):t.localAxisA||dc.neo(1,0)),this.m_localXAxisA.normalize(),this.m_localYAxisA=dc.cross(1,this.m_localXAxisA),this.m_referenceAngle=pc.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_impulse=fc(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=0,this.m_axis=dc.zero(),this.m_perp=dc.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new _c,this.m_motorMass}$c.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},$c._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(bc,t.bodyA,e),t.bodyB=n(bc,t.bodyB,e),t.localAxisA=dc(t.localAxisA),new $c(t)},$c.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(dc.cross(1,t.localAxisA)))},$c.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},$c.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},$c.prototype.getLocalAxisA=function(){return this.m_localXAxisA},$c.prototype.getReferenceAngle=function(){return this.m_referenceAngle},$c.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),n=dc.sub(e,t),i=this.m_bodyA.getWorldVector(this.m_localXAxisA);return dc.dot(n,i)},$c.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,n=gc.mulVec2(t.m_xf.q,dc.sub(this.m_localAnchorA,t.m_sweep.localCenter)),i=gc.mulVec2(e.m_xf.q,dc.sub(this.m_localAnchorB,e.m_sweep.localCenter)),r=dc.add(t.m_sweep.c,n),o=dc.add(e.m_sweep.c,i),s=dc.sub(o,r),a=gc.mulVec2(t.m_xf.q,this.m_localXAxisA),l=t.m_linearVelocity,c=e.m_linearVelocity,u=t.m_angularVelocity,h=e.m_angularVelocity;return dc.dot(s,dc.cross(u,a))+dc.dot(a,dc.sub(dc.addCross(c,h,i),dc.addCross(l,u,n)))},$c.prototype.isLimitEnabled=function(){return this.m_enableLimit},$c.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},$c.prototype.getLowerLimit=function(){return this.m_lowerTranslation},$c.prototype.getUpperLimit=function(){return this.m_upperTranslation},$c.prototype.setLimits=function(t,e){lc&&uc.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},$c.prototype.isMotorEnabled=function(){return this.m_enableMotor},$c.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},$c.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},$c.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},$c.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},$c.prototype.getMotorSpeed=function(){return this.m_motorSpeed},$c.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},$c.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},$c.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},$c.prototype.getReactionForce=function(t){return dc.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},$c.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},$c.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=gc.neo(n),u=gc.neo(s),h=gc.mulVec2(c,dc.sub(this.m_localAnchorA,this.m_localCenterA)),m=gc.mulVec2(u,dc.sub(this.m_localAnchorB,this.m_localCenterB)),p=dc.zero();p.addCombine(1,o,1,m),p.subCombine(1,e,1,h);var d=this.m_invMassA,f=this.m_invMassB,y=this.m_invIA,_=this.m_invIB;this.m_axis=gc.mulVec2(c,this.m_localXAxisA),this.m_a1=dc.cross(dc.add(p,h),this.m_axis),this.m_a2=dc.cross(m,this.m_axis),this.m_motorMass=d+f+y*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=gc.mulVec2(c,this.m_localYAxisA),this.m_s1=dc.cross(dc.add(p,h),this.m_perp),this.m_s2=dc.cross(m,this.m_perp),dc.cross(h,this.m_perp);var g=d+f+y*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,v=y*this.m_s1+_*this.m_s2,b=y*this.m_s1*this.m_a1+_*this.m_s2*this.m_a2,x=y+_;0==x&&(x=1);var $=y*this.m_a1+_*this.m_a2,A=d+f+y*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2;if(this.m_K.ex.set(g,v,b),this.m_K.ey.set(v,x,$),this.m_K.ez.set(b,$,A),this.m_enableLimit){var w=dc.dot(this.m_axis,p);pc.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*mc.linearSlop?this.m_limitState=3:w<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):w>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var B=dc.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,S=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;i.subMul(d,B),r-=y*C,a.addMul(f,B),l+=_*S}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},$c.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var c=dc.dot(this.m_axis,dc.sub(i,e))+this.m_a2*r-this.m_a1*n,u=this.m_motorMass*(this.m_motorSpeed-c),h=this.m_motorImpulse,m=t.dt*this.m_maxMotorForce;this.m_motorImpulse=pc.clamp(this.m_motorImpulse+u,-m,m),u=this.m_motorImpulse-h;var p=dc.mul(u,this.m_axis),d=u*this.m_a1,f=u*this.m_a2;e.subMul(o,p),n-=a*d,i.addMul(s,p),r+=l*f}var y=dc.zero();if(y.x+=dc.dot(this.m_perp,i)+this.m_s2*r,y.x-=dc.dot(this.m_perp,e)+this.m_s1*n,y.y=r-n,this.m_enableLimit&&0!=this.m_limitState){var _=0;_+=dc.dot(this.m_axis,i)+this.m_a2*r,_-=dc.dot(this.m_axis,e)+this.m_a1*n;c=fc(y.x,y.y,_);var g=fc(this.m_impulse),v=this.m_K.solve33(fc.neg(c));this.m_impulse.add(v),1==this.m_limitState?this.m_impulse.z=pc.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=pc.min(this.m_impulse.z,0));var b=dc.combine(-1,y,-(this.m_impulse.z-g.z),dc.neo(this.m_K.ez.x,this.m_K.ez.y)),x=dc.add(this.m_K.solve22(b),dc.neo(g.x,g.y));this.m_impulse.x=x.x,this.m_impulse.y=x.y,v=fc.sub(this.m_impulse,g);p=dc.combine(v.x,this.m_perp,v.z,this.m_axis),d=v.x*this.m_s1+v.y+v.z*this.m_a1,f=v.x*this.m_s2+v.y+v.z*this.m_a2;e.subMul(o,p),n-=a*d,i.addMul(s,p),r+=l*f}else{v=this.m_K.solve22(dc.neg(y));this.m_impulse.x+=v.x,this.m_impulse.y+=v.y;p=dc.mul(v.x,this.m_perp),d=v.x*this.m_s1+v.y,f=v.x*this.m_s2+v.y;e.subMul(o,p),n-=a*d,i.addMul(s,p),r+=l*f}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},$c.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=gc.neo(n),s=gc.neo(r),a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,h=gc.mulVec2(o,dc.sub(this.m_localAnchorA,this.m_localCenterA)),m=gc.mulVec2(s,dc.sub(this.m_localAnchorB,this.m_localCenterB)),p=dc.sub(dc.add(i,m),dc.add(e,h)),d=gc.mulVec2(o,this.m_localXAxisA),f=dc.cross(dc.add(p,h),d),y=dc.cross(m,d),_=gc.mulVec2(o,this.m_localYAxisA),g=dc.cross(dc.add(p,h),_),v=dc.cross(m,_),b=fc(),x=dc.zero();x.x=dc.dot(_,p),x.y=r-n-this.m_referenceAngle;var $=pc.abs(x.x),A=pc.abs(x.y),w=mc.linearSlop,B=mc.maxLinearCorrection,C=!1,S=0;if(this.m_enableLimit){var E=dc.dot(d,p);pc.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*w?(S=pc.clamp(E,-B,B),$=pc.max($,pc.abs(E)),C=!0):E<=this.m_lowerTranslation?(S=pc.clamp(E-this.m_lowerTranslation+w,-B,0),$=pc.max($,this.m_lowerTranslation-E),C=!0):E>=this.m_upperTranslation&&(S=pc.clamp(E-this.m_upperTranslation-w,0,B),$=pc.max($,E-this.m_upperTranslation),C=!0)}if(C){var M=a+l+c*g*g+u*v*v,T=c*g+u*v,k=c*g*f+u*v*y;0==(F=c+u)&&(F=1);var P=c*f+u*y,z=a+l+c*f*f+u*y*y;(V=new _c).ex.set(M,T,k),V.ey.set(T,F,P),V.ez.set(k,P,z);var I=fc();I.x=x.x,I.y=x.y,I.z=S,b=V.solve33(fc.neg(I))}else{var F,V;M=a+l+c*g*g+u*v*v,T=c*g+u*v;0==(F=c+u)&&(F=1),(V=new yc).ex.set(M,T),V.ey.set(T,F);var j=V.solve(dc.neg(x));b.x=j.x,b.y=j.y,b.z=0}var L=dc.combine(b.x,_,b.z,d),D=b.x*g+b.y+b.z*f,O=b.x*v+b.y+b.z*y;return e.subMul(a,L),n-=c*D,i.addMul(l,L),r+=u*O,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=i,this.m_bodyB.c_position.a=r,$<=mc.linearSlop&&A<=mc.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var Ac="undefined"!=typeof ASSERT&&ASSERT,wc=Vc,Bc=$n,Cc=xn,Sc=jn,Ec=Bn.exports,Mc=zn,Tc=fi,kc=ko,Pc=er,zc=Gl,Ic=cc;Vc.TYPE="gear-joint",kc.TYPES[Vc.TYPE]=Vc,Vc._super=kc,Vc.prototype=Object.create(Vc._super.prototype);var Fc={ratio:1};function Vc(t,e,n,i,r,o){if(!(this instanceof Vc))return new Vc(t,e,n,i,r,o);var s,a;t=Cc(t,Fc),kc.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Vc.TYPE,Ac&&Bc.assert(i.m_type===zc.TYPE||i.m_type===Ic.TYPE),Ac&&Bc.assert(r.m_type===zc.TYPE||r.m_type===Ic.TYPE),this.m_joint1=i||t.joint1,this.m_joint2=r||t.joint2,this.m_ratio=Ec.isFinite(o)?o:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var l=this.m_bodyA.m_xf,c=this.m_bodyA.m_sweep.a,u=this.m_bodyC.m_xf,h=this.m_bodyC.m_sweep.a;if(this.m_type1===zc.TYPE){var m=this.m_joint1;this.m_localAnchorC=m.m_localAnchorA,this.m_localAnchorA=m.m_localAnchorB,this.m_referenceAngleA=m.m_referenceAngle,this.m_localAxisC=Mc.zero(),s=c-h-this.m_referenceAngleA}else{var p=this.m_joint1;this.m_localAnchorC=p.m_localAnchorA,this.m_localAnchorA=p.m_localAnchorB,this.m_referenceAngleA=p.m_referenceAngle,this.m_localAxisC=p.m_localXAxisA;var d=this.m_localAnchorC,f=Tc.mulTVec2(u.q,Mc.add(Tc.mul(l.q,this.m_localAnchorA),Mc.sub(l.p,u.p)));s=Mc.dot(f,this.m_localAxisC)-Mc.dot(d,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var y=this.m_bodyB.m_xf,_=this.m_bodyB.m_sweep.a,g=this.m_bodyD.m_xf,v=this.m_bodyD.m_sweep.a;if(this.m_type2===zc.TYPE){m=this.m_joint2;this.m_localAnchorD=m.m_localAnchorA,this.m_localAnchorB=m.m_localAnchorB,this.m_referenceAngleB=m.m_referenceAngle,this.m_localAxisD=Mc.zero(),a=_-v-this.m_referenceAngleB}else{p=this.m_joint2;this.m_localAnchorD=p.m_localAnchorA,this.m_localAnchorB=p.m_localAnchorB,this.m_referenceAngleB=p.m_referenceAngle,this.m_localAxisD=p.m_localXAxisA;var b=this.m_localAnchorD,x=Tc.mulTVec2(g.q,Mc.add(Tc.mul(y.q,this.m_localAnchorB),Mc.sub(y.p,g.p)));a=Mc.dot(x,this.m_localAxisD)-Mc.dot(b,this.m_localAxisD)}this.m_constant=s+this.m_ratio*a,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}Vc.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},Vc._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Pc,t.bodyA,e),t.bodyB=n(Pc,t.bodyB,e),t.joint1=n(kc,t.joint1,e),t.joint2=n(kc,t.joint2,e),new Vc(t)},Vc.prototype.getJoint1=function(){return this.m_joint1},Vc.prototype.getJoint2=function(){return this.m_joint2},Vc.prototype.setRatio=function(t){Ac&&Bc.assert(Ec.isFinite(t)),this.m_ratio=t},Vc.prototype.getRatio=function(){return this.m_ratio},Vc.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Vc.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Vc.prototype.getReactionForce=function(t){return Mc.mul(this.m_impulse,this.m_JvAC).mul(t)},Vc.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},Vc.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,l=this.m_bodyC.c_velocity.v,c=this.m_bodyC.c_velocity.w,u=this.m_bodyD.c_position.a,h=this.m_bodyD.c_velocity.v,m=this.m_bodyD.c_velocity.w,p=Tc.neo(e),d=Tc.neo(r),f=Tc.neo(a),y=Tc.neo(u);if(this.m_mass=0,this.m_type1==zc.TYPE)this.m_JvAC=Mc.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var _=Tc.mulVec2(f,this.m_localAxisC),g=Tc.mulSub(f,this.m_localAnchorC,this.m_lcC),v=Tc.mulSub(p,this.m_localAnchorA,this.m_lcA);this.m_JvAC=_,this.m_JwC=Mc.cross(g,_),this.m_JwA=Mc.cross(v,_),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==zc.TYPE)this.m_JvBD=Mc.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{_=Tc.mulVec2(y,this.m_localAxisD);var b=Tc.mulSub(y,this.m_localAnchorD,this.m_lcD),x=Tc.mulSub(d,this.m_localAnchorB,this.m_lcB);this.m_JvBD=Mc.mul(this.m_ratio,_),this.m_JwD=this.m_ratio*Mc.cross(b,_),this.m_JwB=this.m_ratio*Mc.cross(x,_),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(n.addMul(this.m_mA*this.m_impulse,this.m_JvAC),i+=this.m_iA*this.m_impulse*this.m_JwA,o.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,l.subMul(this.m_mC*this.m_impulse,this.m_JvAC),c-=this.m_iC*this.m_impulse*this.m_JwC,h.subMul(this.m_mD*this.m_impulse,this.m_JvBD),m-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(o),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(l),this.m_bodyC.c_velocity.w=c,this.m_bodyD.c_velocity.v.set(h),this.m_bodyD.c_velocity.w=m},Vc.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,l=this.m_bodyD.c_velocity.w,c=Mc.dot(this.m_JvAC,e)-Mc.dot(this.m_JvAC,o)+Mc.dot(this.m_JvBD,i)-Mc.dot(this.m_JvBD,a);c+=this.m_JwA*n-this.m_JwC*s+(this.m_JwB*r-this.m_JwD*l);var u=-this.m_mass*c;this.m_impulse+=u,e.addMul(this.m_mA*u,this.m_JvAC),n+=this.m_iA*u*this.m_JwA,i.addMul(this.m_mB*u,this.m_JvBD),r+=this.m_iB*u*this.m_JwB,o.subMul(this.m_mC*u,this.m_JvAC),s-=this.m_iC*u*this.m_JwC,a.subMul(this.m_mD*u,this.m_JvBD),l-=this.m_iD*u*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(i),this.m_bodyB.c_velocity.w=r,this.m_bodyC.c_velocity.v.set(o),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=l},Vc.prototype.solvePositionConstraints=function(t){var e,n,i,r,o,s,a,l,c=this.m_bodyA.c_position.c,u=this.m_bodyA.c_position.a,h=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,p=this.m_bodyC.c_position.c,d=this.m_bodyC.c_position.a,f=this.m_bodyD.c_position.c,y=this.m_bodyD.c_position.a,_=Tc.neo(u),g=Tc.neo(m),v=Tc.neo(d),b=Tc.neo(y),x=0;if(this.m_type1==zc.TYPE)i=Mc.zero(),o=1,a=1,x+=this.m_iA+this.m_iC,e=u-d-this.m_referenceAngleA;else{var $=Tc.mulVec2(v,this.m_localAxisC),A=Tc.mulSub(v,this.m_localAnchorC,this.m_lcC),w=Tc.mulSub(_,this.m_localAnchorA,this.m_lcA);i=$,a=Mc.cross(A,$),o=Mc.cross(w,$),x+=this.m_mC+this.m_mA+this.m_iC*a*a+this.m_iA*o*o;var B=Mc.sub(this.m_localAnchorC,this.m_lcC),C=Tc.mulTVec2(v,Mc.add(w,Mc.sub(c,p)));e=Mc.dot(Mc.sub(C,B),this.m_localAxisC)}if(this.m_type2==zc.TYPE)r=Mc.zero(),s=this.m_ratio,l=this.m_ratio,x+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),n=m-y-this.m_referenceAngleB;else{$=Tc.mulVec2(b,this.m_localAxisD);var S=Tc.mulSub(b,this.m_localAnchorD,this.m_lcD),E=Tc.mulSub(g,this.m_localAnchorB,this.m_lcB);r=Mc.mul(this.m_ratio,$),l=this.m_ratio*Mc.cross(S,$),s=this.m_ratio*Mc.cross(E,$),x+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var M=Mc.sub(this.m_localAnchorD,this.m_lcD),T=Tc.mulTVec2(b,Mc.add(E,Mc.sub(h,f)));n=Mc.dot(T,this.m_localAxisD)-Mc.dot(M,this.m_localAxisD)}var k=e+this.m_ratio*n-this.m_constant,P=0;return x>0&&(P=-k/x),c.addMul(this.m_mA*P,i),u+=this.m_iA*P*o,h.addMul(this.m_mB*P,r),m+=this.m_iB*P*s,p.subMul(this.m_mC*P,i),d-=this.m_iC*P*a,f.subMul(this.m_mD*P,r),y-=this.m_iD*P*l,this.m_bodyA.c_position.c.set(c),this.m_bodyA.c_position.a=u,this.m_bodyB.c_position.c.set(h),this.m_bodyB.c_position.a=m,this.m_bodyC.c_position.c.set(p),this.m_bodyC.c_position.a=d,this.m_bodyD.c_position.c.set(f),this.m_bodyD.c_position.a=y,0<Sc.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var jc="undefined"!=typeof ASSERT&&ASSERT,Lc=Gc,Dc=$n,Oc=xn,Rc=Bn.exports,qc=zn,Uc=br,Nc=fi,Wc=ko,Hc=er;Gc.TYPE="motor-joint",Wc.TYPES[Gc.TYPE]=Gc,Gc._super=Wc,Gc.prototype=Object.create(Gc._super.prototype);var Yc={maxForce:1,maxTorque:1,correctionFactor:.3};function Gc(t,e,n){if(!(this instanceof Gc))return new Gc(t,e,n);t=Oc(t,Yc),Wc.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Gc.TYPE,this.m_linearOffset=Rc.isFinite(t.linearOffset)?t.linearOffset:e.getLocalPoint(n.getPosition()),this.m_angularOffset=Rc.isFinite(t.angularOffset)?t.angularOffset:n.getAngle()-e.getAngle(),this.m_linearImpulse=qc.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}Gc.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},Gc._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Hc,t.bodyA,e),t.bodyB=n(Hc,t.bodyB,e),new Gc(t)},Gc.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Gc.prototype.setMaxForce=function(t){jc&&Dc.assert(Rc.isFinite(t)&&t>=0),this.m_maxForce=t},Gc.prototype.getMaxForce=function(){return this.m_maxForce},Gc.prototype.setMaxTorque=function(t){jc&&Dc.assert(Rc.isFinite(t)&&t>=0),this.m_maxTorque=t},Gc.prototype.getMaxTorque=function(){return this.m_maxTorque},Gc.prototype.setCorrectionFactor=function(t){jc&&Dc.assert(Rc.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},Gc.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},Gc.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},Gc.prototype.getLinearOffset=function(){return this.m_linearOffset},Gc.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},Gc.prototype.getAngularOffset=function(){return this.m_angularOffset},Gc.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},Gc.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},Gc.prototype.getReactionForce=function(t){return qc.mul(t,this.m_linearImpulse)},Gc.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},Gc.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Nc.neo(n),u=Nc.neo(s);this.m_rA=Nc.mulVec2(c,qc.neg(this.m_localCenterA)),this.m_rB=Nc.mulVec2(u,qc.neg(this.m_localCenterB));var h=this.m_invMassA,m=this.m_invMassB,p=this.m_invIA,d=this.m_invIB,f=new Uc;if(f.ex.x=h+m+p*this.m_rA.y*this.m_rA.y+d*this.m_rB.y*this.m_rB.y,f.ex.y=-p*this.m_rA.x*this.m_rA.y-d*this.m_rB.x*this.m_rB.y,f.ey.x=f.ex.y,f.ey.y=h+m+p*this.m_rA.x*this.m_rA.x+d*this.m_rB.x*this.m_rB.x,this.m_linearMass=f.getInverse(),this.m_angularMass=p+d,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=qc.zero(),this.m_linearError.addCombine(1,o,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(Nc.mulVec2(c,this.m_linearOffset)),this.m_angularError=s-n-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var y=qc.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(h,y),r-=p*(qc.cross(this.m_rA,y)+this.m_angularImpulse),a.addMul(m,y),l+=d*(qc.cross(this.m_rB,y)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},Gc.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=t.inv_dt,h=r-n+u*this.m_correctionFactor*this.m_angularError,m=-this.m_angularMass*h,p=this.m_angularImpulse,d=c*this.m_maxTorque;this.m_angularImpulse=Rc.clamp(this.m_angularImpulse+m,-d,d),n-=a*(m=this.m_angularImpulse-p),r+=l*m,(h=qc.zero()).addCombine(1,i,1,qc.cross(r,this.m_rB)),h.subCombine(1,e,1,qc.cross(n,this.m_rA)),h.addMul(u*this.m_correctionFactor,this.m_linearError);m=qc.neg(Uc.mulVec2(this.m_linearMass,h)),p=qc.clone(this.m_linearImpulse);this.m_linearImpulse.add(m);d=c*this.m_maxForce;this.m_linearImpulse.clamp(d),m=qc.sub(this.m_linearImpulse,p),e.subMul(o,m),n-=a*qc.cross(this.m_rA,m),i.addMul(s,m),r+=l*qc.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Gc.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Jc="undefined"!=typeof ASSERT&&ASSERT,Zc=au,Xc=$n,Kc=xn,Qc=Bn.exports,tu=zn,eu=br,nu=fi,iu=$i,ru=ko,ou=er;au.TYPE="mouse-joint",ru.TYPES[au.TYPE]=au,au._super=ru,au.prototype=Object.create(au._super.prototype);var su={maxForce:0,frequencyHz:5,dampingRatio:.7};function au(t,e,n,i){if(!(this instanceof au))return new au(t,e,n,i);t=Kc(t,su),ru.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=au.TYPE,Jc&&Xc.assert(Qc.isFinite(t.maxForce)&&t.maxForce>=0),Jc&&Xc.assert(Qc.isFinite(t.frequencyHz)&&t.frequencyHz>=0),Jc&&Xc.assert(Qc.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=i?tu.clone(i):t.target||tu.zero(),this.m_localAnchorB=iu.mulTVec2(n.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=tu.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=tu.zero(),this.m_localCenterB=tu.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new eu,this.m_C=tu.zero()}au.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},au._deserialize=function(t,e,n){(t=Object.assign({},t)).bodyA=n(ou,t.bodyA,e),t.bodyB=n(ou,t.bodyB,e),t.target=tu(t.target);var i=new au(t);return t._localAnchorB&&(i.m_localAnchorB=t._localAnchorB),i},au.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=tu.clone(t)},au.prototype.getTarget=function(){return this.m_targetA},au.prototype.setMaxForce=function(t){this.m_maxForce=t},au.getMaxForce=function(){return this.m_maxForce},au.prototype.setFrequency=function(t){this.m_frequencyHz=t},au.prototype.getFrequency=function(){return this.m_frequencyHz},au.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},au.prototype.getDampingRatio=function(){return this.m_dampingRatio},au.prototype.getAnchorA=function(){return tu.clone(this.m_targetA)},au.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},au.prototype.getReactionForce=function(t){return tu.mul(t,this.m_impulse)},au.prototype.getReactionTorque=function(t){return 0*t},au.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},au.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,n=this.m_bodyB.c_velocity,i=e.c,r=e.a,o=n.v,s=n.w,a=nu.neo(r),l=this.m_bodyB.getMass(),c=2*Qc.PI*this.m_frequencyHz,u=2*l*this.m_dampingRatio*c,h=l*(c*c),m=t.dt;Jc&&Xc.assert(u+m*h>Qc.EPSILON),this.m_gamma=m*(u+m*h),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=m*h*this.m_gamma,this.m_rB=nu.mulVec2(a,tu.sub(this.m_localAnchorB,this.m_localCenterB));var p=new eu;p.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,p.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=p.getInverse(),this.m_C.set(i),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),s*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),o.addMul(this.m_invMassB,this.m_impulse),s+=this.m_invIB*tu.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),n.v.set(o),n.w=s},au.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,n=tu.clone(e.v),i=e.w,r=tu.cross(i,this.m_rB);r.add(n),r.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),r.neg();var o=eu.mulVec2(this.m_mass,r),s=tu.clone(this.m_impulse);this.m_impulse.add(o);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),o=tu.sub(this.m_impulse,s),n.addMul(this.m_invMassB,o),i+=this.m_invIB*tu.cross(this.m_rB,o),e.v.set(n),e.w=i},au.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var lu="undefined"!=typeof ASSERT&&ASSERT,cu=vu,uu=$n,hu=xn,mu=jn,pu=Bn.exports,du=zn,fu=fi,yu=ko,_u=er;vu.TYPE="pulley-joint",vu.MIN_PULLEY_LENGTH=2,yu.TYPES[vu.TYPE]=vu,vu._super=yu,vu.prototype=Object.create(vu._super.prototype);var gu={collideConnected:!0};function vu(t,e,n,i,r,o,s,a){if(!(this instanceof vu))return new vu(t,e,n,i,r,o,s,a);t=hu(t,gu),yu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=vu.TYPE,this.m_groundAnchorA=i||(t.groundAnchorA||du.neo(-1,1)),this.m_groundAnchorB=r||(t.groundAnchorB||du.neo(1,1)),this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||du.neo(-1,0),this.m_localAnchorB=s?n.getLocalPoint(s):t.localAnchorB||du.neo(1,0),this.m_lengthA=pu.isFinite(t.lengthA)?t.lengthA:du.distance(o,i),this.m_lengthB=pu.isFinite(t.lengthB)?t.lengthB:du.distance(s,r),this.m_ratio=pu.isFinite(a)?a:t.ratio,lu&&uu.assert(a>pu.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}vu.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},vu._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(_u,t.bodyA,e),t.bodyB=n(_u,t.bodyB,e),new vu(t)},vu.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},vu.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},vu.prototype.getLengthA=function(){return this.m_lengthA},vu.prototype.getLengthB=function(){return this.m_lengthB},vu.prototype.getRatio=function(){return this.m_ratio},vu.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return du.distance(t,e)},vu.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return du.distance(t,e)},vu.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},vu.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},vu.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},vu.prototype.getReactionForce=function(t){return du.mul(this.m_impulse,this.m_uB).mul(t)},vu.prototype.getReactionTorque=function(t){return 0},vu.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=fu.neo(n),u=fu.neo(s);this.m_rA=fu.mulVec2(c,du.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=fu.mulVec2(u,du.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=du.sub(du.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=du.sub(du.add(o,this.m_rB),this.m_groundAnchorB);var h=this.m_uA.length(),m=this.m_uB.length();h>10*mu.linearSlop?this.m_uA.mul(1/h):this.m_uA.setZero(),m>10*mu.linearSlop?this.m_uB.mul(1/m):this.m_uB.setZero();var p=du.cross(this.m_rA,this.m_uA),d=du.cross(this.m_rB,this.m_uB),f=this.m_invMassA+this.m_invIA*p*p,y=this.m_invMassB+this.m_invIB*d*d;if(this.m_mass=f+this.m_ratio*this.m_ratio*y,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var _=du.mul(-this.m_impulse,this.m_uA),g=du.mul(-this.m_ratio*this.m_impulse,this.m_uB);i.addMul(this.m_invMassA,_),r+=this.m_invIA*du.cross(this.m_rA,_),a.addMul(this.m_invMassB,g),l+=this.m_invIB*du.cross(this.m_rB,g)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},vu.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=du.add(e,du.cross(n,this.m_rA)),s=du.add(i,du.cross(r,this.m_rB)),a=-du.dot(this.m_uA,o)-this.m_ratio*du.dot(this.m_uB,s),l=-this.m_mass*a;this.m_impulse+=l;var c=du.mul(-l,this.m_uA),u=du.mul(-this.m_ratio*l,this.m_uB);e.addMul(this.m_invMassA,c),n+=this.m_invIA*du.cross(this.m_rA,c),i.addMul(this.m_invMassB,u),r+=this.m_invIB*du.cross(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},vu.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=fu.neo(n),s=fu.neo(r),a=fu.mulVec2(o,du.sub(this.m_localAnchorA,this.m_localCenterA)),l=fu.mulVec2(s,du.sub(this.m_localAnchorB,this.m_localCenterB)),c=du.sub(du.add(e,this.m_rA),this.m_groundAnchorA),u=du.sub(du.add(i,this.m_rB),this.m_groundAnchorB),h=c.length(),m=u.length();h>10*mu.linearSlop?c.mul(1/h):c.setZero(),m>10*mu.linearSlop?u.mul(1/m):u.setZero();var p=du.cross(a,c),d=du.cross(l,u),f=this.m_invMassA+this.m_invIA*p*p,y=this.m_invMassB+this.m_invIB*d*d,_=f+this.m_ratio*this.m_ratio*y;_>0&&(_=1/_);var g=this.m_constant-h-this.m_ratio*m,v=pu.abs(g),b=-_*g,x=du.mul(-b,c),$=du.mul(-this.m_ratio*b,u);return e.addMul(this.m_invMassA,x),n+=this.m_invIA*du.cross(a,x),i.addMul(this.m_invMassB,$),r+=this.m_invIB*du.cross(l,$),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=i,this.m_bodyB.c_position.a=r,v<mu.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var bu=Mu,xu=xn,$u=jn,Au=Bn.exports,wu=zn,Bu=fi,Cu=ko,Su=er;Mu.TYPE="rope-joint",Cu.TYPES[Mu.TYPE]=Mu,Mu._super=Cu,Mu.prototype=Object.create(Mu._super.prototype);var Eu={maxLength:0};function Mu(t,e,n,i){if(!(this instanceof Mu))return new Mu(t,e,n,i);t=xu(t,Eu),Cu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Mu.TYPE,this.m_localAnchorA=i?e.getLocalPoint(i):t.localAnchorA||wu.neo(-1,0),this.m_localAnchorB=i?n.getLocalPoint(i):t.localAnchorB||wu.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}Mu.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},Mu._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Su,t.bodyA,e),t.bodyB=n(Su,t.bodyB,e),new Mu(t)},Mu.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Mu.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Mu.prototype.setMaxLength=function(t){this.m_maxLength=t},Mu.prototype.getMaxLength=function(){return this.m_maxLength},Mu.prototype.getLimitState=function(){return this.m_state},Mu.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Mu.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Mu.prototype.getReactionForce=function(t){return wu.mul(this.m_impulse,this.m_u).mul(t)},Mu.prototype.getReactionTorque=function(t){return 0},Mu.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Bu.neo(n),u=Bu.neo(s);this.m_rA=Bu.mulSub(c,this.m_localAnchorA,this.m_localCenterA),this.m_rB=Bu.mulSub(u,this.m_localAnchorB,this.m_localCenterB),this.m_u=wu.zero(),this.m_u.addCombine(1,o,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var h=this.m_length-this.m_maxLength;if(this.m_state=h>0?2:0,!(this.m_length>$u.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var m=wu.cross(this.m_rA,this.m_u),p=wu.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,t.warmStarting){this.m_impulse*=t.dtRatio;var f=wu.mul(this.m_impulse,this.m_u);i.subMul(this.m_invMassA,f),r-=this.m_invIA*wu.cross(this.m_rA,f),a.addMul(this.m_invMassB,f),l+=this.m_invIB*wu.cross(this.m_rB,f)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Mu.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=wu.addCross(e,n,this.m_rA),s=wu.addCross(i,r,this.m_rB),a=this.m_length-this.m_maxLength,l=wu.dot(this.m_u,wu.sub(s,o));a<0&&(l+=t.inv_dt*a);var c=-this.m_mass*l,u=this.m_impulse;this.m_impulse=Au.min(0,this.m_impulse+c),c=this.m_impulse-u;var h=wu.mul(c,this.m_u);e.subMul(this.m_invMassA,h),n-=this.m_invIA*wu.cross(this.m_rA,h),i.addMul(this.m_invMassB,h),r+=this.m_invIB*wu.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Mu.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=Bu.neo(n),s=Bu.neo(r),a=Bu.mulSub(o,this.m_localAnchorA,this.m_localCenterA),l=Bu.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=wu.zero();c.addCombine(1,i,1,l),c.subCombine(1,e,1,a);var u=c.normalize(),h=u-this.m_maxLength;h=Au.clamp(h,0,$u.maxLinearCorrection);var m=-this.m_mass*h,p=wu.mul(m,c);return e.subMul(this.m_invMassA,p),n-=this.m_invIA*wu.cross(a,p),i.addMul(this.m_invMassB,p),r+=this.m_invIB*wu.cross(l,p),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,u-this.m_maxLength<$u.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Tu=Ru,ku=xn,Pu=jn,zu=Bn.exports,Iu=zn,Fu=Or,Vu=Hr,ju=fi,Lu=ko,Du=er;Ru.TYPE="weld-joint",Lu.TYPES[Ru.TYPE]=Ru,Ru._super=Lu,Ru.prototype=Object.create(Ru._super.prototype);var Ou={frequencyHz:0,dampingRatio:0};function Ru(t,e,n,i){if(!(this instanceof Ru))return new Ru(t,e,n,i);t=ku(t,Ou),Lu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Ru.TYPE,this.m_localAnchorA=Iu.clone(i?e.getLocalPoint(i):t.localAnchorA||Iu.zero()),this.m_localAnchorB=Iu.clone(i?n.getLocalPoint(i):t.localAnchorB||Iu.zero()),this.m_referenceAngle=zu.isFinite(t.referenceAngle)?t.referenceAngle:n.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=Fu(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new Vu}Ru.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},Ru._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Du,t.bodyA,e),t.bodyB=n(Du,t.bodyB,e),new Ru(t)},Ru.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Ru.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Ru.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Ru.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Ru.prototype.setFrequency=function(t){this.m_frequencyHz=t},Ru.prototype.getFrequency=function(){return this.m_frequencyHz},Ru.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Ru.prototype.getDampingRatio=function(){return this.m_dampingRatio},Ru.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Ru.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Ru.prototype.getReactionForce=function(t){return Iu.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},Ru.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},Ru.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=ju.neo(e),l=ju.neo(r);this.m_rA=ju.mulVec2(a,Iu.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=ju.mulVec2(l,Iu.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new Vu;if(p.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,p.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,p.ez.x=-this.m_rA.y*h-this.m_rB.y*m,p.ex.y=p.ey.x,p.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,p.ez.y=this.m_rA.x*h+this.m_rB.x*m,p.ex.z=p.ez.x,p.ey.z=p.ez.y,p.ez.z=h+m,this.m_frequencyHz>0){p.getInverse22(this.m_mass);var d=h+m,f=d>0?1/d:0,y=r-e-this.m_referenceAngle,_=2*zu.PI*this.m_frequencyHz,g=2*f*this.m_dampingRatio*_,v=f*_*_,b=t.dt;this.m_gamma=b*(g+b*v),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=y*b*v*this.m_gamma,d+=this.m_gamma,this.m_mass.ez.z=0!=d?1/d:0}else 0==p.ez.z?(p.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(p.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var x=Iu.neo(this.m_impulse.x,this.m_impulse.y);n.subMul(c,x),i-=h*(Iu.cross(this.m_rA,x)+this.m_impulse.z),o.addMul(u,x),s+=m*(Iu.cross(this.m_rB,x)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},Ru.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,i=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var c=r-n,u=-this.m_mass.ez.z*(c+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,n-=a*u,r+=l*u,(p=Iu.zero()).addCombine(1,i,1,Iu.cross(r,this.m_rB)),p.subCombine(1,e,1,Iu.cross(n,this.m_rA));var h=Iu.neg(Vu.mulVec2(this.m_mass,p));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y;var m=Iu.clone(h);e.subMul(o,m),n-=a*Iu.cross(this.m_rA,m),i.addMul(s,m),r+=l*Iu.cross(this.m_rB,m)}else{var p;(p=Iu.zero()).addCombine(1,i,1,Iu.cross(r,this.m_rB)),p.subCombine(1,e,1,Iu.cross(n,this.m_rA));c=r-n;var d=Fu(p.x,p.y,c),f=Fu.neg(Vu.mulVec3(this.m_mass,d));this.m_impulse.add(f);m=Iu.neo(f.x,f.y);e.subMul(o,m),n-=a*(Iu.cross(this.m_rA,m)+f.z),i.addMul(s,m),r+=l*(Iu.cross(this.m_rB,m)+f.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=i,this.m_bodyB.c_velocity.w=r},Ru.prototype.solvePositionConstraints=function(t){var e,n,i=this.m_bodyA.c_position.c,r=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=ju.neo(r),l=ju.neo(s),c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=ju.mulVec2(a,Iu.sub(this.m_localAnchorA,this.m_localCenterA)),d=ju.mulVec2(l,Iu.sub(this.m_localAnchorB,this.m_localCenterB)),f=new Vu;if(f.ex.x=c+u+p.y*p.y*h+d.y*d.y*m,f.ey.x=-p.y*p.x*h-d.y*d.x*m,f.ez.x=-p.y*h-d.y*m,f.ex.y=f.ey.x,f.ey.y=c+u+p.x*p.x*h+d.x*d.x*m,f.ez.y=p.x*h+d.x*m,f.ex.z=f.ez.x,f.ey.z=f.ez.y,f.ez.z=h+m,this.m_frequencyHz>0){(_=Iu.zero()).addCombine(1,o,1,d),_.subCombine(1,i,1,p),e=_.length(),n=0;var y=Iu.neg(f.solve22(_));i.subMul(c,y),r-=h*Iu.cross(p,y),o.addMul(u,y),s+=m*Iu.cross(d,y)}else{var _;(_=Iu.zero()).addCombine(1,o,1,d),_.subCombine(1,i,1,p);var g=s-r-this.m_referenceAngle;e=_.length(),n=zu.abs(g);var v=Fu(_.x,_.y,g),b=Fu();if(f.ez.z>0)b=Fu.neg(f.solve33(v));else{var x=Iu.neg(f.solve22(_));b.set(x.x,x.y,0)}y=Iu.neo(b.x,b.y);i.subMul(c,y),r-=h*(Iu.cross(p,y)+b.z),o.addMul(u,y),s+=m*(Iu.cross(d,y)+b.z)}return this.m_bodyA.c_position.c=i,this.m_bodyA.c_position.a=r,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=s,e<=Pu.linearSlop&&n<=Pu.angularSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var qu=Ku,Uu=xn,Nu=jn,Wu=Bn.exports,Hu=zn,Yu=fi,Gu=ko,Ju=er;Ku.TYPE="wheel-joint",Gu.TYPES[Ku.TYPE]=Ku,Ku._super=Gu,Ku.prototype=Object.create(Ku._super.prototype);var Zu,Xu={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function Ku(t,e,n,i,r){if(!(this instanceof Ku))return new Ku(t,e,n,i,r);t=Uu(t,Xu),Gu.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=Ku.TYPE,this.m_localAnchorA=Hu.clone(i?e.getLocalPoint(i):t.localAnchorA||Hu.zero()),this.m_localAnchorB=Hu.clone(i?n.getLocalPoint(i):t.localAnchorB||Hu.zero()),this.m_localXAxisA=Hu.clone(r?e.getLocalVector(r):t.localAxisA||t.localAxis||Hu.neo(1,0)),this.m_localYAxisA=Hu.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=Hu.zero(),this.m_ay=Hu.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}let Qu,th,eh;Ku.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},Ku._deserialize=function(t,e,n){return(t=Object.assign({},t)).bodyA=n(Ju,t.bodyA,e),t.bodyB=n(Ju,t.bodyB,e),new Ku(t)},Ku.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(Hu.cross(1,t.localAxisA)))},Ku.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Ku.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Ku.prototype.getLocalAxisA=function(){return this.m_localXAxisA},Ku.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.getWorldPoint(this.m_localAnchorA),i=e.getWorldPoint(this.m_localAnchorB),r=Hu.sub(i,n),o=t.getWorldVector(this.m_localXAxisA);return Hu.dot(r,o)},Ku.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},Ku.prototype.isMotorEnabled=function(){return this.m_enableMotor},Ku.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},Ku.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},Ku.prototype.getMotorSpeed=function(){return this.m_motorSpeed},Ku.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},Ku.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},Ku.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},Ku.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},Ku.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},Ku.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},Ku.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},Ku.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Ku.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Ku.prototype.getReactionForce=function(t){return Hu.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},Ku.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},Ku.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,n=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,a=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,u=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,p=Yu.neo(s),d=Yu.neo(u),f=Yu.mulVec2(p,Hu.sub(this.m_localAnchorA,this.m_localCenterA)),y=Yu.mulVec2(d,Hu.sub(this.m_localAnchorB,this.m_localCenterB));if((b=Hu.zero()).addCombine(1,c,1,y),b.subCombine(1,o,1,f),this.m_ay=Yu.mulVec2(p,this.m_localYAxisA),this.m_sAy=Hu.cross(Hu.add(b,f),this.m_ay),this.m_sBy=Hu.cross(y,this.m_ay),this.m_mass=e+n+i*this.m_sAy*this.m_sAy+r*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=Yu.mulVec2(p,this.m_localXAxisA),this.m_sAx=Hu.cross(Hu.add(b,f),this.m_ax),this.m_sBx=Hu.cross(y,this.m_ax);var _=e+n+i*this.m_sAx*this.m_sAx+r*this.m_sBx*this.m_sBx;if(_>0){this.m_springMass=1/_;var g=Hu.dot(b,this.m_ax),v=2*Wu.PI*this.m_frequencyHz,b=2*this.m_springMass*this.m_dampingRatio*v,x=this.m_springMass*v*v,$=t.dt;this.m_gamma=$*(b+$*x),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=g*$*x*this.m_gamma,this.m_springMass=_+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=i+r,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var A=Hu.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),w=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,B=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;a.subMul(this.m_invMassA,A),l-=this.m_invIA*w,h.addMul(this.m_invMassB,A),m+=this.m_invIB*B}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=m},Ku.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,n=this.m_invMassB,i=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Hu.dot(this.m_ax,a)-Hu.dot(this.m_ax,o)+this.m_sBx*l-this.m_sAx*s,u=-this.m_springMass*(c+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;var h=Hu.mul(u,this.m_ax),m=u*this.m_sAx,p=u*this.m_sBx;o.subMul(e,h),s-=i*m,a.addMul(n,h);c=(l+=r*p)-s-this.m_motorSpeed,u=-this.m_motorMass*c;var d=this.m_motorImpulse,f=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=Wu.clamp(this.m_motorImpulse+u,-f,f),s-=i*(u=this.m_motorImpulse-d),l+=r*u;c=Hu.dot(this.m_ay,a)-Hu.dot(this.m_ay,o)+this.m_sBy*l-this.m_sAy*s,u=-this.m_mass*c;this.m_impulse+=u;h=Hu.mul(u,this.m_ay),m=u*this.m_sAy,p=u*this.m_sBy;o.subMul(e,h),s-=i*m,a.addMul(n,h),l+=r*p,this.m_bodyA.c_velocity.v.set(o),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Ku.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,i=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=Yu.neo(n),s=Yu.neo(r),a=Yu.mulVec2(o,Hu.sub(this.m_localAnchorA,this.m_localCenterA)),l=Yu.mulVec2(s,Hu.sub(this.m_localAnchorB,this.m_localCenterB)),c=Hu.zero();c.addCombine(1,i,1,l),c.subCombine(1,e,1,a);var u,h=Yu.mulVec2(o,this.m_localYAxisA),m=Hu.cross(Hu.add(c,a),h),p=Hu.cross(l,h),d=Hu.dot(c,h),f=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;u=0!=f?-d/f:0;var y=Hu.mul(u,h),_=u*m,g=u*p;return e.subMul(this.m_invMassA,y),n-=this.m_invIA*_,i.addMul(this.m_invMassB,y),r+=this.m_invIB*g,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(i),this.m_bodyB.c_position.a=r,Wu.abs(d)<=Nu.linearSlop},(Zu=vn).internal={},Zu.Serializer=bn.exports,Zu.Math=Bn.exports,Zu.Vec2=zn,Zu.Vec3=Or,Zu.Mat22=br,Zu.Mat33=Hr,Zu.Transform=$i,Zu.Rot=fi,Zu.AABB=Un,Zu.Shape=Ri,Zu.Fixture=Ni,Zu.Body=er,Zu.Contact=Ao,Zu.Joint=ko,Zu.World=gs,Zu.Circle=Us,Zu.Edge=Zs,Zu.Polygon=ra,Zu.Chain=da,Zu.Box=$a,Zu.internal.CollidePolygons=Za,Zu.DistanceJoint=Bl,Zu.FrictionJoint=Vl,Zu.GearJoint=wc,Zu.MotorJoint=Lc,Zu.MouseJoint=Zc,Zu.PrismaticJoint=cc,Zu.PulleyJoint=cu,Zu.RevoluteJoint=Gl,Zu.RopeJoint=bu,Zu.WeldJoint=Tu,Zu.WheelJoint=qu,Zu.Settings=jn,Zu.internal.Sweep=Ei,Zu.internal.stats=jr,Zu.internal.Manifold=wr.exports,Zu.internal.Distance=Vr.exports,Zu.internal.TimeOfImpact=Fo.exports,Zu.internal.DynamicTree=Kn,Zu.internal.Settings=Zu.Settings;try{Qu=new TextDecoder}catch(gp){}let nh=0;const ih={};let rh,oh,sh,ah,lh,ch,uh={},hh=0,mh=0,ph=[],dh=[],fh={useRecords:!1,mapsAsObjects:!0},yh=!1;class _h{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.getStructures&&!t.structures&&((t.structures=[]).uninitialized=!0)),Object.assign(this,t)}decode(t,e){if(th)return jh((()=>(Lh(),this?this.decode(t,e):_h.prototype.decode.call(fh,t,e))));eh=e>-1?e:t.length,nh=0,mh=0,oh=null,th=t;try{lh=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(gp){if(th=null,t instanceof Uint8Array)throw gp;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof _h){if(uh=this,ah=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return rh=this.structures,gh();(!rh||rh.length>0)&&(rh=[])}else uh=fh,(!rh||rh.length>0)&&(rh=[]),ah=null;return gh()}decodeMultiple(t,e){let n,i=0;try{let r=t.length;yh=!0;let o=this?this.decode(t,r):Oh.decode(t,r);if(!e){for(n=[o];nh<r;)i=nh,n.push(gh());return n}if(!1===e(o))return;for(;nh<r;)if(i=nh,!1===e(gh()))return}catch(gp){throw gp.lastPosition=i,gp.values=n,gp}finally{yh=!1,Lh()}}}function gh(){try{let t=vh();if(nh==eh)rh=null,th=null,sh&&(sh=null);else{if(nh>eh){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}if(!yh)throw new Error("Data read, but end of buffer not reached")}return t}catch(gp){throw Lh(),(gp instanceof RangeError||gp.message.startsWith("Unexpected end of buffer"))&&(gp.incomplete=!0),gp}}function vh(){let t=th[nh++],e=t>>5;if(t&=31,t>23)switch(t){case 24:t=th[nh++];break;case 25:if(7==e)return function(){let t,e=th[nh++],n=th[nh++],i=(e<<8)+n,r=i>>10&31,o=1023&i;t=0==r?Math.exp(o,-24):31!=r?Math.exp(o+1024,r-25):0==o?1/0:NaN;return 32768&i?-t:t}();t=lh.getUint16(nh),nh+=2;break;case 26:if(7==e){let t=lh.getFloat32(nh);if(uh.useFloat32>2){let e=Dh[(127&th[nh])<<1|th[nh+1]>>7];return nh+=4,(e*t+(t>0?.5:-.5)>>0)/e}return nh+=4,t}t=lh.getUint32(nh),nh+=4;break;case 27:if(7==e){let t=lh.getFloat64(nh);return nh+=8,t}uh.int64AsNumber?(t=4294967296*lh.getUint32(nh),t+=lh.getUint32(nh+4)):t=lh.getBigUint64(nh),nh+=8;break;case 31:switch(e){case 2:case 3:case 4:let t,n=[],i=0;for(;(t=vh())!=ih;)n[i++]=t;return 4==e?n:3==e?n.join(""):Buffer.concat(n);case 5:let r;if(uh.mapsAsObjects){let t={};for(;(r=Eh())!=ih;)t[r]=vh();return t}{ch&&(uh.mapsAsObjects=!0,ch=!1);let t=new Map;for(;(r=vh())!=ih;)t.set(r,vh());return t}case 7:return ih;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return n=t,uh.copyBuffers?Uint8Array.prototype.slice.call(th,nh,nh+=n):th.subarray(nh,nh+=n);case 3:if(mh>=nh)return oh.slice(nh-hh,(nh+=t)-hh);if(0==mh&&eh<140&&t<32){let e=t<16?Ch(t):Bh(t);if(null!=e)return e}return Ah(t);case 4:let e=new Array(t);for(let n=0;n<t;n++)e[n]=vh();return e;case 5:if(uh.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[Eh()]=vh();return e}{ch&&(uh.mapsAsObjects=!0,ch=!1);let e=new Map;for(let n=0;n<t;n++)e.set(vh(),vh());return e}case 6:if(t>>8==105){let e=rh[255&t];if(e)return e.read||(e.read=xh(e)),e.read();if(uh.getStructures){let n=jh((()=>(th=null,uh.getStructures())));return!0===rh?uh.structures=rh=n:rh.splice.apply(rh,[0,n.length].concat(n)),e=rh[255&t],e?(e.read||(e.read=xh(e)),e.read()):t}return t}{let e=ph[t];if(e)return e.handlesRead?e(vh):e(vh());{let e=vh();for(let n=0;n<dh.length;n++){let i=dh[n](t,e);if(void 0!==i)return i}return new Mh(e)}}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let e=ah[t];if(void 0!==e)return e;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}throw new Error("Unknown CBOR token "+t)}var n}const bh=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function xh(t){let e=t.length;function n(){if(n.count++>2)return this.read=new Function("a","r","return function(){a();return {"+t.map((t=>bh.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"}}")($h,vh),this.read();$h();let i={};for(let n=0;n<e;n++){i[t[n]]=vh()}return i}return n.count=0,n}function $h(t){let e=th[nh++];if(e&=31,e>23)switch(e){case 24:nh++;break;case 25:nh+=2;break;case 26:nh+=4}}let Ah=function(t){let e;if(t<16&&(e=Ch(t)))return e;if(t>64&&Qu)return Qu.decode(th.subarray(nh,nh+=t));const n=nh+t,i=[];e="";for(;nh<n;){const t=th[nh++];if(0==(128&t))i.push(t);else if(192==(224&t)){const e=63&th[nh++];i.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&th[nh++],n=63&th[nh++];i.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){const e=63&th[nh++],n=63&th[nh++],r=63&th[nh++];let o=(7&t)<<18|e<<12|n<<6|r;o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o)}else i.push(t);i.length>=4096&&(e+=wh.apply(String,i),i.length=0)}i.length>0&&(e+=wh.apply(String,i));return e};let wh=String.fromCharCode;function Bh(t){let e=nh,n=new Array(t);for(let i=0;i<t;i++){const t=th[nh++];if((128&t)>0)return void(nh=e);n[i]=t}return wh.apply(String,n)}function Ch(t){if(t<4){if(t<2){if(0===t)return"";{let t=th[nh++];return(128&t)>1?void(nh-=1):wh(t)}}{let e=th[nh++],n=th[nh++];if((128&e)>0||(128&n)>0)return void(nh-=2);if(t<3)return wh(e,n);let i=th[nh++];return(128&i)>0?void(nh-=3):wh(e,n,i)}}{let e=th[nh++],n=th[nh++],i=th[nh++],r=th[nh++];if((128&e)>0||(128&n)>0||(128&i)>0||(128&r)>0)return void(nh-=4);if(t<6){if(4===t)return wh(e,n,i,r);{let t=th[nh++];return(128&t)>0?void(nh-=5):wh(e,n,i,r,t)}}if(t<8){let o=th[nh++],s=th[nh++];if((128&o)>0||(128&s)>0)return void(nh-=6);if(t<7)return wh(e,n,i,r,o,s);let a=th[nh++];return(128&a)>0?void(nh-=7):wh(e,n,i,r,o,s,a)}{let o=th[nh++],s=th[nh++],a=th[nh++],l=th[nh++];if((128&o)>0||(128&s)>0||(128&a)>0||(128&l)>0)return void(nh-=8);if(t<10){if(8===t)return wh(e,n,i,r,o,s,a,l);{let t=th[nh++];return(128&t)>0?void(nh-=9):wh(e,n,i,r,o,s,a,l,t)}}if(t<12){let c=th[nh++],u=th[nh++];if((128&c)>0||(128&u)>0)return void(nh-=10);if(t<11)return wh(e,n,i,r,o,s,a,l,c,u);let h=th[nh++];return(128&h)>0?void(nh-=11):wh(e,n,i,r,o,s,a,l,c,u,h)}{let c=th[nh++],u=th[nh++],h=th[nh++],m=th[nh++];if((128&c)>0||(128&u)>0||(128&h)>0||(128&m)>0)return void(nh-=12);if(t<14){if(12===t)return wh(e,n,i,r,o,s,a,l,c,u,h,m);{let t=th[nh++];return(128&t)>0?void(nh-=13):wh(e,n,i,r,o,s,a,l,c,u,h,m,t)}}{let p=th[nh++],d=th[nh++];if((128&p)>0||(128&d)>0)return void(nh-=14);if(t<15)return wh(e,n,i,r,o,s,a,l,c,u,h,m,p,d);let f=th[nh++];return(128&f)>0?void(nh-=15):wh(e,n,i,r,o,s,a,l,c,u,h,m,p,d,f)}}}}}let Sh=new Array(4096);function Eh(){let t=th[nh++];if(!(t>=96&&t<120))return nh--,vh();if(t-=96,mh>=nh)return oh.slice(nh-hh,(nh+=t)-hh);if(!(0==mh&&eh<180))return Ah(t);let e,n=4095&(t<<5^(t>1?lh.getUint16(nh):t>0?th[nh]:0)),i=Sh[n],r=nh,o=nh+t-3,s=0;if(i&&i.bytes==t){for(;r<o;){if(e=lh.getUint32(r),e!=i[s++]){r=1879048192;break}r+=4}for(o+=3;r<o;)if(e=th[r++],e!=i[s++]){r=1879048192;break}if(r===o)return nh=r,i.string;o-=3,r=nh}for(i=[],Sh[n]=i,i.bytes=t;r<o;)e=lh.getUint32(r),i.push(e),r+=4;for(o+=3;r<o;)e=th[r++],i.push(e);let a=t<16?Ch(t):Bh(t);return i.string=null!=a?a:Ah(t)}class Mh{constructor(t){this.value=t}}let Th="object"==typeof window?window:global;ph[0]=t=>new Date(t),ph[1]=t=>new Date(1e3*t),ph[2]=t=>new DataView(t.buffer,t.byteOffset,t.byteLength).getBigUint64(0),ph[3]=t=>BigInt(-1)-new DataView(t.buffer,t.byteOffset,t.byteLength).getBigUint64(0);const kh=()=>{let t=vh(),e=t[0],n=t[1];rh[255&n]=e,e.read=xh(e);let i={};for(let r=2,o=t.length;r<o;r++){i[e[r-2]]=t[r]}return i};kh.handlesRead=!0,ph[105]=kh,ph[27]=t=>(Th[t[0]]||Error)(t[1],t[2]);const Ph=t=>{if(132!=th[nh++])throw new Error("Packed values structure must be followed by 4 element array");let e=t();return ah=ah?e.concat(ah.slice(e.length)):e,ah.prefixes=t(),ah.suffixes=t(),t()};function zh(t,e){return"string"==typeof t?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}Ph.handlesRead=!0,ph[51]=Ph,ph[6]=t=>{if("number"==typeof t)return ah[16+(t>=0?2*t:-2*t-1)];throw new Error("No support for non-integer packed references yet")},ph[40009]=t=>{let e;sh||(sh=new Map),e=th[nh]>>5==4?[]:{};let n={target:e};sh.set(t,n);let i=vh();return n.used?Object.assign(e,i):(n.target=i,i)},ph[40010]=t=>{let e=sh.get(t);return e.used=!0,e.target},ph[258]=t=>new Set(t),(ph[259]=t=>(uh.mapsAsObjects&&(uh.mapsAsObjects=!1,ch=!0),t())).handlesRead=!0,dh.push(((t,e)=>t>=225&&t<=255?zh(Ph.prefixes[t-224],e):t>=28704&&t<=32767?zh(Ph.prefixes[t-28672],e):t>=1879052288&&t<=2147483647?zh(Ph.prefixes[t-1879048192],e):t>=216&&t<=223?zh(e,Ph.suffixes[t-216]):t>=27647&&t<=28671?zh(e,Ph.suffixes[t-27639]):t>=1811940352&&t<=1879048191?zh(e,Ph.suffixes[t-1811939328]):void 0));const Ih=["Uint8","Uint8Clamped","Uint16","Uint32","BigUint64","Int8","Int16","Int32","BigInt64","Float32","Float64"].map((t=>t+"Array")),Fh=[64,68,69,70,71,72,77,78,79,81,82];for(let vp=0;vp<Ih.length;vp++)Vh(Ih[vp],Fh[vp]);function Vh(t,e){ph[e]=e=>{if(!t)throw new Error("Could not find typed array for code "+typeCode);return new Th[t](Uint8Array.prototype.slice.call(e,0).buffer)}}function jh(t){let e=eh,n=nh,i=hh,r=mh,o=oh,s=sh,a=new Uint8Array(th.slice(0,eh)),l=rh,c=uh,u=yh,h=t();return eh=e,nh=n,hh=i,mh=r,oh=o,sh=s,th=a,yh=u,rh=l,uh=c,lh=new DataView(th.buffer,th.byteOffset,th.byteLength),h}function Lh(){th=null,sh=null,rh=null}const Dh=new Array(147);for(let vp=0;vp<256;vp++)Dh[vp]=+("1e"+Math.floor(45.15-.30103*vp));let Oh=new _h({useRecords:!1});const Rh=Oh.decode;Oh.decodeMultiple;let qh,Uh,Nh,Wh=new Float32Array(1);new Uint8Array(Wh.buffer,0,4);try{qh=new TextEncoder}catch(gp){}const Hh="undefined"!=typeof Buffer,Yh=Hh?Buffer.allocUnsafeSlow:Uint8Array,Gh=Hh?Buffer:Uint8Array,Jh=Hh?4294967296:2144337920;let Zh,Xh,Kh,Qh=0;const tm=Symbol("record-id");function em(t){t<24?Zh[Qh++]=128|t:t<256?(Zh[Qh++]=152,Zh[Qh++]=t):t<65536?(Zh[Qh++]=153,Zh[Qh++]=t>>8,Zh[Qh++]=255&t):(Zh[Qh++]=154,Xh.setUint32(Qh,t),Qh+=4)}function nm(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let n=e.get(t);if(n)2==++n.count&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let n=e.samplingPackedValues.get(t);n?n.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let n=0,i=t.length;n<i;n++)nm(t[n],e);else{let i=!e.encoder.useRecords;for(var n in t)t.hasOwnProperty(n)&&(i&&nm(n,e),nm(t[n],e))}break;case"function":console.log(t)}}function im(t){return{tag:t,encode:function(t,e){let n=t.byteLength,i=t.byteOffset||0,r=t.buffer||t;e(Hh?Buffer.from(r,i,n):new Uint8Array(r,i,n))}}}function rm(t,e){let n=t.byteLength;n<24?Zh[Qh++]=64+n:n<256?(Zh[Qh++]=88,Zh[Qh++]=n):n<65536?(Zh[Qh++]=89,Zh[Qh++]=n>>8,Zh[Qh++]=255&n):(Zh[Qh++]=90,Xh.setUint32(Qh,n),Qh+=4),Qh+n>=Zh.length&&e(Qh+n),Zh.set(t,Qh),Qh+=n}Nh=[Date,Set,Error,RegExp,ArrayBuffer,Gh,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array],Uh=[{tag:1,encode(t,e){let n=t.getTime()/1e3;(this.useTimestamp32||0===t.getMilliseconds())&&n>=0&&n<4294967296?(Zh[Qh++]=26,Xh.setUint32(Qh,n),Qh+=4):(Zh[Qh++]=251,Xh.setFloat64(Qh,n),Qh+=8)}},{tag:258,encode(t,e){e(Array.from(t))}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{encode(t,e,n){rm(t,n)}},{encode(t,e,n){rm(t,n)}},im(64),im(68),im(69),im(70),im(71),im(72),im(77),im(78),im(79),im(81),im(82)];const om=new class extends _h{constructor(t){let e,n,i,r,o;super(t),this.offset=0,t=t||{};let s=0,a=Gh.prototype.utf8Write?function(t,e,n){return Zh.utf8Write(t,e,n)}:!(!qh||!qh.encodeInto)&&function(t,e){return qh.encodeInto(t,Zh.subarray(e)).written},l=this,c=64,u=t.sequential;u&&(c=0,this.structures=[]);let h,m,p,d=t.sharedValues;if(d){p=Object.create(null);for(let t=0,e=d.length;t<e;t++)p[d[t]]=t}let f=[],y=0,_=0;this.encode=function(a,v){if(Zh||(Zh=new Yh(8192),Xh=new DataView(Zh.buffer,0,8192),Qh=0),Kh=Zh.length-10,Kh-Qh<2048?(Zh=new Yh(Zh.length),Xh=new DataView(Zh.buffer,0,Zh.length),Kh=Zh.length-10,Qh=0):v===sm&&(Qh=Qh+7&2147483640),e=Qh,o=l.structuredClone?new Map:null,n=l.structures,n){n.uninitialized&&(l.structures=n=l.getStructures());let t=n.length;if(t>c&&!u&&(t=c),!n.transitions){n.transitions=Object.create(null);for(let e=0;e<t;e++){let t=n[e];if(!t)continue;let i,r=n.transitions;for(let e=0,n=t.length;e<n;e++){let n=t[e];i=r[n],i||(i=r[n]=Object.create(null)),r=i}r[tm]=e}s=n.length}u||(n.nextId=t)}if(i&&(i=!1),r=n||[],m=p,t.pack){let e=new Map;if(e.values=[],e.encoder=l,e.maxValues=t.maxPrivatePackedValues||(p?16:1/0),e.objectMap=p||!1,e.samplingPackedValues=h,nm(a,e),e.values.length>0){Zh[Qh++]=216,Zh[Qh++]=51,em(4);let t=e.values;g(t),em(0),em(0),m=Object.create(p||null);for(let e=0,n=t.length;e<n;e++)m[t[e]]=e}}try{if(g(a),l.offset=Qh,o&&o.idsToInsert){Qh+=8*o.idsToInsert.length,Qh>Kh&&b(Qh),l.offset=Qh;let t=function(t,e){let n,i=8*e.length,r=t.length-i;e.sort(((t,e)=>t.offset>e.offset?1:-1));for(;n=e.pop();){let e=n.offset,o=n.id;t.copyWithin(e+i,e,r),i-=8;let s=e+i;t[s++]=217,t[s++]=156,t[s++]=73,t[s++]=26,t[s++]=o>>24,t[s++]=o>>16&255,t[s++]=o>>8&255,t[s++]=255&o,r=e}return t}(Zh.subarray(e,Qh),o.idsToInsert);return o=null,t}return v===sm?(Zh.start=e,Zh.end=Qh,Zh):Zh.subarray(e,Qh)}finally{if(n){if(_<10&&_++,y>1e4)n.transitions=null,_=0,y=0,f.length>0&&(f=[]);else if(f.length>0&&!u){for(let t=0,e=f.length;t<e;t++)f[t][tm]=void 0;f=[]}if(i&&l.saveStructures){l.structures.length>c&&(l.structures=l.structures.slice(0,c));let t=Zh.subarray(e,Qh),n=l.structures||[];return d&&(n=n.concat(d)),!1===l.saveStructures(l.structures,s)?(l.structures=l.getStructures()||[],l.encode(a)):(s=n.length,t)}}}},this.findCommonStringsToPack=()=>(h=new Map,p||(p=Object.create(null)),({threshold:e})=>{e=e||4;let n=this.pack?t.maxPrivatePackedValues||16:0;d||(d=this.sharedValues=[]);for(let[t,r]of h)r.count>e&&(p[t]=n++,d.push(t),i=!0);h=null});const g=n=>{Qh>Kh&&(Zh=b(Qh));var i,r=typeof n;if("string"===r){if(m){let e=m[n];if(e>=0)return void(e<16?Zh[Qh++]=e+224:(Zh[Qh++]=198,g(1&e?15-e>>1:e-16>>1)));if(h&&!t.pack){let t=h.get(n);t?t.count++:h.set(n,{count:1})}}let e,r=n.length;e=r<32?1:r<256?2:r<65536?3:5;let o=3*r;if(Qh+o>Kh&&(Zh=b(Qh+o)),r<64||!a){let t,o,s,a=Qh+e;for(t=0;t<r;t++)o=n.charCodeAt(t),o<128?Zh[a++]=o:o<2048?(Zh[a++]=o>>6|192,Zh[a++]=63&o|128):55296==(64512&o)&&56320==(64512&(s=n.charCodeAt(t+1)))?(o=65536+((1023&o)<<10)+(1023&s),t++,Zh[a++]=o>>18|240,Zh[a++]=o>>12&63|128,Zh[a++]=o>>6&63|128,Zh[a++]=63&o|128):(Zh[a++]=o>>12|224,Zh[a++]=o>>6&63|128,Zh[a++]=63&o|128);i=a-Qh-e}else i=a(n,Qh+e,o);i<24?Zh[Qh++]=96|i:i<256?(e<2&&Zh.copyWithin(Qh+2,Qh+1,Qh+1+i),Zh[Qh++]=120,Zh[Qh++]=i):i<65536?(e<3&&Zh.copyWithin(Qh+3,Qh+2,Qh+2+i),Zh[Qh++]=121,Zh[Qh++]=i>>8,Zh[Qh++]=255&i):(e<5&&Zh.copyWithin(Qh+5,Qh+3,Qh+3+i),Zh[Qh++]=122,Xh.setUint32(Qh,i),Qh+=4),Qh+=i}else if("number"===r)if(n>>>0===n)n<24?Zh[Qh++]=n:n<256?(Zh[Qh++]=24,Zh[Qh++]=n):n<65536?(Zh[Qh++]=25,Zh[Qh++]=n>>8,Zh[Qh++]=255&n):(Zh[Qh++]=26,Xh.setUint32(Qh,n),Qh+=4);else if(n>>0===n)n>=-24?Zh[Qh++]=31-n:n>=-256?(Zh[Qh++]=56,Zh[Qh++]=~n):n>=-65536?(Zh[Qh++]=57,Xh.setUint16(Qh,~n),Qh+=2):(Zh[Qh++]=58,Xh.setUint32(Qh,~n),Qh+=4);else{let t;if((t=this.useFloat32)>0&&n<4294967296&&n>=-2147483648){let e;if(Zh[Qh++]=250,Xh.setFloat32(Qh,n),t<4||(e=n*Dh[(127&Zh[Qh])<<1|Zh[Qh+1]>>7])>>0===e)return void(Qh+=4);Qh--}Zh[Qh++]=251,Xh.setFloat64(Qh,n),Qh+=8}else if("object"===r)if(n){if(o){let t=o.get(n);if(t){if(!t.id){let e=o.idsToInsert||(o.idsToInsert=[]);t.id=e.push(t)}return Zh[Qh++]=217,Zh[Qh++]=156,Zh[Qh++]=74,Zh[Qh++]=26,Xh.setUint32(Qh,t.id),void(Qh+=4)}o.set(n,{offset:Qh-e})}let t=n.constructor;if(t===Object)v(n,!0);else if(t===Array){(i=n.length)<24?Zh[Qh++]=128|i:em(i);for(let t=0;t<i;t++)g(n[t])}else if(t===Map){(this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(Zh[Qh++]=217,Zh[Qh++]=1,Zh[Qh++]=3),(i=n.size)<24?Zh[Qh++]=160|i:i<256?(Zh[Qh++]=184,Zh[Qh++]=i):i<65536?(Zh[Qh++]=185,Zh[Qh++]=i>>8,Zh[Qh++]=255&i):(Zh[Qh++]=186,Xh.setUint32(Qh,i),Qh+=4);for(let[t,e]of n)g(t),g(e)}else{for(let t=0,e=Uh.length;t<e;t++){if(n instanceof Nh[t]){let e=Uh[t],i=e.tag;return i<24?Zh[Qh++]=192|i:i<256?(Zh[Qh++]=216,Zh[Qh++]=i):i<65536?(Zh[Qh++]=217,Zh[Qh++]=i>>8,Zh[Qh++]=255&i):i>-1&&(Zh[Qh++]=218,Xh.setUint32(Qh,i),Qh+=4),void e.encode.call(this,n,g,b)}}if(n[Symbol.iterator]){Zh[Qh++]=159;for(let t of n)g(t);return void(Zh[Qh++]=255)}v(n,!n.hasOwnProperty)}}else Zh[Qh++]=246;else if("boolean"===r)Zh[Qh++]=n?245:244;else if("bigint"===r){if(n<BigInt(1)<<BigInt(64)&&n>=0)Zh[Qh++]=27,Xh.setBigUint64(Qh,n);else if(n>-(BigInt(1)<<BigInt(64))&&n<0)Zh[Qh++]=59,Xh.setBigUint64(Qh,-n-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(n+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");Zh[Qh++]=251,Xh.setFloat64(Qh,Number(n))}Qh+=8}else{if("undefined"!==r)throw new Error("Unknown type: "+r);Zh[Qh++]=247}},v=!1===this.useRecords?this.variableMapSize?t=>{let e,n=Object.keys(t),i=n.length;i<24?Zh[Qh++]=160|i:i<256?(Zh[Qh++]=184,Zh[Qh++]=i):i<65536?(Zh[Qh++]=185,Zh[Qh++]=i>>8,Zh[Qh++]=255&i):(Zh[Qh++]=186,Xh.setUint32(Qh,i),Qh+=4);for(let r=0;r<i;r++)g(e=n[r]),g(t[e])}:(t,n)=>{Zh[Qh++]=185;let i=Qh-e;Qh+=2;let r=0;for(let e in t)(n||t.hasOwnProperty(e))&&(g(e),g(t[e]),r++);Zh[i+++e]=r>>8,Zh[i+e]=255&r}:t=>{let e,o=Object.keys(t),s=r.transitions||(r.transitions=Object.create(null)),a=0,l=o.length;for(let n=0;n<l;n++){let t=o[n];e=s[t],e||(e=s[t]=Object.create(null),a++),s=e}let u=s[tm];if(void 0!==u)Zh[Qh++]=217,Zh[Qh++]=105,Zh[Qh++]=u;else{if(u=r.nextId++,u||(u=0,r.nextId=1),u>=256&&(r.nextId=(u=c)+1),s[tm]=u,r[u]=o,!(n&&n.length<=c)){Zh[Qh++]=216,Zh[Qh++]=105,a&&(y+=_*a),f.length>=256-c&&(f.shift()[tm]=void 0),f.push(s),em(l+2),g(o),Zh[Qh++]=25,Zh[Qh++]=105,Zh[Qh++]=u;for(let e=0;e<l;e++)g(t[o[e]]);return}Zh[Qh++]=217,Zh[Qh++]=105,Zh[Qh++]=u,i=!0}l<24?Zh[Qh++]=128|l:em(l);for(let n=0;n<l;n++)g(t[o[n]])},b=t=>{let n;if(t>16777216){if(t-e>Jh)throw new Error("Encoded buffer would be larger than maximum buffer size");n=Math.min(Jh,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(t-e<<2,Zh.length-1)>>12)<<12;let i=new Yh(n);return Xh=new DataView(i.buffer,0,n),Zh.copy?Zh.copy(i,0,e,t):i.set(Zh.slice(e,t)),Qh-=e,e=0,Kh=i.length-10,Zh=i}}useBuffer(t){Zh=t,Xh=new DataView(Zh.buffer,Zh.byteOffset,Zh.byteLength),Qh=0}}({useRecords:!1}).encode,sm=1e3;var am,lm,cm;try{am=new TextDecoder}catch(gp){}var um,hm,mm,pm,dm=0,fm={},ym=0,_m=0,gm=[],vm={useRecords:!1,mapsAsObjects:!0};class bm{}const xm=new bm;xm.name="MessagePack 0xC1";var $m=!1;class Am{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(lm)return Gm((()=>(Jm(),this?this.unpack(t,e):Am.prototype.unpack.call(vm,t,e))));cm=e>-1?e:t.length,dm=0,_m=0,hm=null,lm=t;try{pm=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(gp){if(lm=null,t instanceof Uint8Array)throw gp;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof Am){if(fm=this,this.structures)return um=this.structures,wm();(!um||um.length>0)&&(um=[])}else fm=vm,(!um||um.length>0)&&(um=[]);return wm()}unpackMultiple(t,e){let n,i=0;try{$m=!0;let r=t.length,o=this?this.unpack(t,r):Xm.unpack(t,r);if(!e){for(n=[o];dm<r;)i=dm,n.push(wm());return n}for(e(o);dm<r;)if(i=dm,!1===e(wm()))return}catch(gp){throw gp.lastPosition=i,gp.values=n,gp}finally{$m=!1,Jm()}}_mergeStructures(t,e){for(let n=0,i=(t=t||[]).length;n<i;n++){let e=t[n];e&&(e.isShared=!0,n>=32&&(e.highByte=n-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let i=t[n],r=e[n];r&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[n]=i),t[n]=r)}return this.structures=t}decode(t,e){return this.unpack(t,e)}}function wm(){try{if(!fm.trusted&&!$m){let t=um.sharedLength||0;t<um.length&&(um.length=t)}let t=Cm();if(dm==cm)um.restoreStructures&&Bm(),um=null,lm=null,mm&&(mm=null);else{if(dm>cm){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}if(!$m)throw new Error("Data read, but end of buffer not reached")}return t}catch(gp){throw um.restoreStructures&&Bm(),Jm(),(gp instanceof RangeError||gp.message.startsWith("Unexpected end of buffer"))&&(gp.incomplete=!0),gp}}function Bm(){for(let t in um.restoreStructures)um[t]=um.restoreStructures[t];um.restoreStructures=null}function Cm(){let t=lm[dm++];if(t<160){if(t<128){if(t<64)return t;{let e=um[63&t]||fm.getStructures&&Tm()[63&t];return e?(e.read||(e.read=Em(e,63&t)),e.read()):t}}if(t<144){if(t-=128,fm.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[Nm()]=Cm();return e}{let e=new Map;for(let n=0;n<t;n++)e.set(Cm(),Cm());return e}}{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Cm();return e}}if(t<192){let e=t-160;if(_m>=dm)return hm.slice(dm-ym,(dm+=e)-ym);if(0==_m&&cm<140){let t=e<16?Om(e):Dm(e);if(null!=t)return t}return km(e)}{let e;switch(t){case 192:return null;case 193:return xm;case 194:return!1;case 195:return!0;case 196:return Rm(lm[dm++]);case 197:return e=pm.getUint16(dm),dm+=2,Rm(e);case 198:return e=pm.getUint32(dm),dm+=4,Rm(e);case 199:return qm(lm[dm++]);case 200:return e=pm.getUint16(dm),dm+=2,qm(e);case 201:return e=pm.getUint32(dm),dm+=4,qm(e);case 202:if(e=pm.getFloat32(dm),fm.useFloat32>2){let t=Zm[(127&lm[dm])<<1|lm[dm+1]>>7];return dm+=4,(t*e+(e>0?.5:-.5)>>0)/t}return dm+=4,e;case 203:return e=pm.getFloat64(dm),dm+=8,e;case 204:return lm[dm++];case 205:return e=pm.getUint16(dm),dm+=2,e;case 206:return e=pm.getUint32(dm),dm+=4,e;case 207:return fm.int64AsNumber?(e=4294967296*pm.getUint32(dm),e+=pm.getUint32(dm+4)):e=pm.getBigUint64(dm),dm+=8,e;case 208:return pm.getInt8(dm++);case 209:return e=pm.getInt16(dm),dm+=2,e;case 210:return e=pm.getInt32(dm),dm+=4,e;case 211:return fm.int64AsNumber?(e=4294967296*pm.getInt32(dm),e+=pm.getUint32(dm+4)):e=pm.getBigInt64(dm),dm+=8,e;case 212:if(e=lm[dm++],114==e)return Wm(63&lm[dm++]);{let t=gm[e];if(t)return t.read?(dm++,t.read(Cm())):t.noBuffer?(dm++,t()):t(lm.subarray(dm,++dm));throw new Error("Unknown extension "+e)}case 213:return e=lm[dm],114==e?(dm++,Wm(63&lm[dm++],lm[dm++])):qm(2);case 214:return qm(4);case 215:return qm(8);case 216:return qm(16);case 217:return e=lm[dm++],_m>=dm?hm.slice(dm-ym,(dm+=e)-ym):Pm(e);case 218:return e=pm.getUint16(dm),_m>=(dm+=2)?hm.slice(dm-ym,(dm+=e)-ym):zm(e);case 219:return e=pm.getUint32(dm),_m>=(dm+=4)?hm.slice(dm-ym,(dm+=e)-ym):Im(e);case 220:return e=pm.getUint16(dm),dm+=2,Vm(e);case 221:return e=pm.getUint32(dm),dm+=4,Vm(e);case 222:return e=pm.getUint16(dm),dm+=2,jm(e);case 223:return e=pm.getUint32(dm),dm+=4,jm(e);default:if(t>=224)return t-256;if(void 0===t){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+t)}}}const Sm=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Em(t,e){function n(){if(n.count++>2){let n=t.read=new Function("r","return function(){return {"+t.map((t=>Sm.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"}}")(Cm);return 0===t.highByte&&(t.read=Mm(e,t.read)),n()}let i={};for(let e=0,n=t.length;e<n;e++){i[t[e]]=Cm()}return i}return n.count=0,0===t.highByte?Mm(e,n):n}const Mm=(t,e)=>function(){let n=lm[dm++];if(0===n)return e();let i=t<32?-(t+(n<<5)):t+(n<<5),r=um[i]||Tm()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=Em(r,t)),r.read()};function Tm(){let t=Gm((()=>(lm=null,fm.getStructures())));return um=fm._mergeStructures(t,um)}var km=Fm,Pm=Fm,zm=Fm,Im=Fm;function Fm(t){let e;if(t<16&&(e=Om(t)))return e;if(t>64&&am)return am.decode(lm.subarray(dm,dm+=t));const n=dm+t,i=[];for(e="";dm<n;){const t=lm[dm++];if(0==(128&t))i.push(t);else if(192==(224&t)){const e=63&lm[dm++];i.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&lm[dm++],n=63&lm[dm++];i.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){let e=(7&t)<<18|(63&lm[dm++])<<12|(63&lm[dm++])<<6|63&lm[dm++];e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e)}else i.push(t);i.length>=4096&&(e+=Lm.apply(String,i),i.length=0)}return i.length>0&&(e+=Lm.apply(String,i)),e}function Vm(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Cm();return e}function jm(t){if(fm.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[Nm()]=Cm();return e}{let e=new Map;for(let n=0;n<t;n++)e.set(Cm(),Cm());return e}}var Lm=String.fromCharCode;function Dm(t){let e=dm,n=new Array(t);for(let i=0;i<t;i++){const t=lm[dm++];if((128&t)>0)return void(dm=e);n[i]=t}return Lm.apply(String,n)}function Om(t){if(t<4){if(t<2){if(0===t)return"";{let t=lm[dm++];return(128&t)>1?void(dm-=1):Lm(t)}}{let e=lm[dm++],n=lm[dm++];if((128&e)>0||(128&n)>0)return void(dm-=2);if(t<3)return Lm(e,n);let i=lm[dm++];return(128&i)>0?void(dm-=3):Lm(e,n,i)}}{let e=lm[dm++],n=lm[dm++],i=lm[dm++],r=lm[dm++];if((128&e)>0||(128&n)>0||(128&i)>0||(128&r)>0)return void(dm-=4);if(t<6){if(4===t)return Lm(e,n,i,r);{let t=lm[dm++];return(128&t)>0?void(dm-=5):Lm(e,n,i,r,t)}}if(t<8){let o=lm[dm++],s=lm[dm++];if((128&o)>0||(128&s)>0)return void(dm-=6);if(t<7)return Lm(e,n,i,r,o,s);let a=lm[dm++];return(128&a)>0?void(dm-=7):Lm(e,n,i,r,o,s,a)}{let o=lm[dm++],s=lm[dm++],a=lm[dm++],l=lm[dm++];if((128&o)>0||(128&s)>0||(128&a)>0||(128&l)>0)return void(dm-=8);if(t<10){if(8===t)return Lm(e,n,i,r,o,s,a,l);{let t=lm[dm++];return(128&t)>0?void(dm-=9):Lm(e,n,i,r,o,s,a,l,t)}}if(t<12){let c=lm[dm++],u=lm[dm++];if((128&c)>0||(128&u)>0)return void(dm-=10);if(t<11)return Lm(e,n,i,r,o,s,a,l,c,u);let h=lm[dm++];return(128&h)>0?void(dm-=11):Lm(e,n,i,r,o,s,a,l,c,u,h)}{let c=lm[dm++],u=lm[dm++],h=lm[dm++],m=lm[dm++];if((128&c)>0||(128&u)>0||(128&h)>0||(128&m)>0)return void(dm-=12);if(t<14){if(12===t)return Lm(e,n,i,r,o,s,a,l,c,u,h,m);{let t=lm[dm++];return(128&t)>0?void(dm-=13):Lm(e,n,i,r,o,s,a,l,c,u,h,m,t)}}{let p=lm[dm++],d=lm[dm++];if((128&p)>0||(128&d)>0)return void(dm-=14);if(t<15)return Lm(e,n,i,r,o,s,a,l,c,u,h,m,p,d);let f=lm[dm++];return(128&f)>0?void(dm-=15):Lm(e,n,i,r,o,s,a,l,c,u,h,m,p,d,f)}}}}}function Rm(t){return fm.copyBuffers?Uint8Array.prototype.slice.call(lm,dm,dm+=t):lm.subarray(dm,dm+=t)}function qm(t){let e=lm[dm++];if(gm[e])return gm[e](lm.subarray(dm,dm+=t));throw new Error("Unknown extension type "+e)}var Um=new Array(4096);function Nm(){let t=lm[dm++];if(!(t>=160&&t<192))return dm--,Cm();if(t-=160,_m>=dm)return hm.slice(dm-ym,(dm+=t)-ym);if(!(0==_m&&cm<180))return km(t);let e,n=4095&(t<<5^(t>1?pm.getUint16(dm):t>0?lm[dm]:0)),i=Um[n],r=dm,o=dm+t-3,s=0;if(i&&i.bytes==t){for(;r<o;){if(e=pm.getUint32(r),e!=i[s++]){r=1879048192;break}r+=4}for(o+=3;r<o;)if(e=lm[r++],e!=i[s++]){r=1879048192;break}if(r===o)return dm=r,i.string;o-=3,r=dm}for(i=[],Um[n]=i,i.bytes=t;r<o;)e=pm.getUint32(r),i.push(e),r+=4;for(o+=3;r<o;)e=lm[r++],i.push(e);let a=t<16?Om(t):Dm(t);return i.string=null!=a?a:km(t)}const Wm=(t,e)=>{var n=Cm();let i=t;void 0!==e&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let r=um[t];return r&&r.isShared&&((um.restoreStructures||(um.restoreStructures=[]))[t]=r),um[t]=n,n.read=Em(n,i),n.read()};var Hm="object"==typeof self?self:global;gm[0]=()=>{},gm[0].noBuffer=!0,gm[101]=()=>{let t=Cm();return(Hm[t[0]]||Error)(t[1])},gm[105]=t=>{let e=pm.getUint32(dm-4);mm||(mm=new Map);let n,i=lm[dm];n=i>=144&&i<160||220==i||221==i?[]:{};let r={target:n};mm.set(e,r);let o=Cm();return r.used?Object.assign(n,o):(r.target=o,o)},gm[112]=t=>{let e=pm.getUint32(dm-4),n=mm.get(e);return n.used=!0,n.target},gm[115]=()=>new Set(Cm());const Ym=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((t=>t+"Array"));function Gm(t){let e=cm,n=dm,i=ym,r=_m,o=hm,s=mm,a=new Uint8Array(lm.slice(0,cm)),l=um,c=um.slice(0,um.length),u=fm,h=$m,m=t();return cm=e,dm=n,ym=i,_m=r,hm=o,mm=s,lm=a,$m=h,(um=l).splice(0,um.length,...c),fm=u,pm=new DataView(lm.buffer,lm.byteOffset,lm.byteLength),m}function Jm(){lm=null,mm=null,um=null}gm[116]=t=>{let e=t[0],n=Ym[e];if(!n)throw new Error("Could not find typed array for code "+e);return new Hm[n](Uint8Array.prototype.slice.call(t,1).buffer)},gm[120]=()=>{let t=Cm();return new RegExp(t[0],t[1])},gm[255]=t=>4==t.length?new Date(1e3*(16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3])):8==t.length?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+1e3*(4294967296*(3&t[3])+16777216*t[4]+(t[5]<<16)+(t[6]<<8)+t[7])):12==t.length?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+1e3*((128&t[4]?-281474976710656:0)+1099511627776*t[6]+4294967296*t[7]+16777216*t[8]+(t[9]<<16)+(t[10]<<8)+t[11])):new Date("invalid");const Zm=new Array(147);for(let vp=0;vp<256;vp++)Zm[vp]=+("1e"+Math.floor(45.15-.30103*vp));var Xm=new Am({useRecords:!1});const Km=Xm.unpack;Xm.unpackMultiple,Xm.unpack;let Qm,tp,ep,np=new Float32Array(1);new Uint8Array(np.buffer,0,4);try{Qm=new TextEncoder}catch(gp){}const ip="undefined"!=typeof Buffer,rp=ip?Buffer.allocUnsafeSlow:Uint8Array,op=ip?Buffer:Uint8Array,sp=ip?4294967296:2144337920;let ap,lp,cp,up=0;const hp=Symbol("record-id");function mp(t,e,n,i){let r=t.byteLength;if(r+1<256){var{target:o,position:s}=n(4+r);o[s++]=199,o[s++]=r+1}else if(r+1<65536){var{target:o,position:s}=n(5+r);o[s++]=200,o[s++]=r+1>>8,o[s++]=r+1&255}else{var{target:o,position:s,targetView:a}=n(7+r);o[s++]=201,a.setUint32(s,r+1),s+=4}o[s++]=116,o[s++]=e,o.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s)}function pp(t,e){let n=t.byteLength;var i,r;if(n<256){var{target:i,position:r}=e(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=e(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=255&n}else{var{target:i,position:r,targetView:o}=e(n+5);i[r++]=198,o.setUint32(r,n),r+=4}i.set(t,r)}function dp(t,e,n,i){let r=t.length;switch(r){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:r<256?(e[n++]=199,e[n++]=r):r<65536?(e[n++]=200,e[n++]=r>>8,e[n++]=255&r):(e[n++]=201,e[n++]=r>>24,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=255&r)}return e[n++]=i,e.set(t,n),n+=r}ep=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,bm],tp=[{pack(t,e,n){let i=t.getTime()/1e3;if((this.useTimestamp32||0===t.getMilliseconds())&&i>=0&&i<4294967296){let{target:t,targetView:n,position:r}=e(6);t[r++]=214,t[r++]=255,n.setUint32(r,i)}else if(i>0&&i<17179869184){let{target:n,targetView:r,position:o}=e(10);n[o++]=215,n[o++]=255,r.setUint32(o,4e6*t.getMilliseconds()+(i/1e3/4294967296>>0)),r.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return n(this.onInvalidDate());let{target:t,targetView:i,position:r}=e(3);t[r++]=212,t[r++]=255,t[r++]=255}else{let{target:n,targetView:r,position:o}=e(15);n[o++]=199,n[o++]=12,n[o++]=255,r.setUint32(o,1e6*t.getMilliseconds()),r.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(t,e,n){let i=Array.from(t),{target:r,position:o}=e(this.structuredClone?3:0);this.structuredClone&&(r[o++]=212,r[o++]=115,r[o++]=0),n(i)}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?mp(t,16,e):pp(ip?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==op&&this.structuredClone?mp(t,Ym.indexOf(n.name),e):pp(t,e)}},{pack(t,e){let{target:n,position:i}=e(1);n[i]=193}}];let fp=new class extends Am{constructor(t){let e,n,i,r,o;super(t),this.offset=0;let s=0,a=op.prototype.utf8Write?function(t,e,n){return ap.utf8Write(t,e,n)}:!(!Qm||!Qm.encodeInto)&&function(t,e){return Qm.encodeInto(t,ap.subarray(e)).written},l=this;t||(t={});let c=t&&t.sequential,u=t.structures||t.saveStructures,h=t.maxSharedStructures;if(null==h&&(h=u?32:0),h>8160)throw new Error("Maximum maxSharedStructure is 8160");let m=t.maxOwnStructures;null==m&&(m=u?32:64),c&&!t.saveStructures&&(this.structures=[]);let p=h>32||m+h>64,d=h+64,f=h+m+64;if(f>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let y=[],_=0,g=0;this.pack=this.encode=function(t,a){if(ap||(ap=new rp(8192),lp=new DataView(ap.buffer,0,8192),up=0),cp=ap.length-10,cp-up<2048?(ap=new rp(ap.length),lp=new DataView(ap.buffer,0,ap.length),cp=ap.length-10,up=0):up=up+7&2147483640,e=up,o=l.structuredClone?new Map:null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let t=n.sharedLength||0;if(t>h)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let e=0;e<t;e++){let t=n[e];if(!t)continue;let i,r=n.transitions;for(let e=0,n=t.length;e<n;e++){let n=t[e];i=r[n],i||(i=r[n]=Object.create(null)),r=i}r[hp]=e+64}s=t}c||(n.nextId=t+64)}i&&(i=!1),r=n||[];try{if(v(t),l.offset=up,o&&o.idsToInsert){up+=6*o.idsToInsert.length,up>cp&&x(up),l.offset=up;let t=function(t,e){let n,i=6*e.length,r=t.length-i;e.sort(((t,e)=>t.offset>e.offset?1:-1));for(;n=e.pop();){let e=n.offset,o=n.id;t.copyWithin(e+i,e,r),i-=6;let s=e+i;t[s++]=214,t[s++]=105,t[s++]=o>>24,t[s++]=o>>16&255,t[s++]=o>>8&255,t[s++]=255&o,r=e}return t}(ap.subarray(e,up),o.idsToInsert);return o=null,t}return a===_p?(ap.start=e,ap.end=up,ap):ap.subarray(e,up)}finally{if(n){if(g<10&&g++,_>1e4)n.transitions=null,g=0,_=0,y.length>0&&(y=[]);else if(y.length>0&&!c){for(let t=0,e=y.length;t<e;t++)y[t][hp]=0;y=[]}if(i&&l.saveStructures){let i=n.sharedLength||h;n.length>i&&(n=n.slice(0,i));let r=ap.subarray(e,up);return!1===l.saveStructures(n,s)?(l._mergeStructures(l.getStructures()),l.pack(t)):(s=i,r)}}}};const v=t=>{up>cp&&(ap=x(up));var n,i=typeof t;if("string"===i){let e,i=t.length;e=i<32?1:i<256?2:i<65536?3:5;let r=3*i;if(up+r>cp&&(ap=x(up+r)),i<64||!a){let r,o,s,a=up+e;for(r=0;r<i;r++)o=t.charCodeAt(r),o<128?ap[a++]=o:o<2048?(ap[a++]=o>>6|192,ap[a++]=63&o|128):55296==(64512&o)&&56320==(64512&(s=t.charCodeAt(r+1)))?(o=65536+((1023&o)<<10)+(1023&s),r++,ap[a++]=o>>18|240,ap[a++]=o>>12&63|128,ap[a++]=o>>6&63|128,ap[a++]=63&o|128):(ap[a++]=o>>12|224,ap[a++]=o>>6&63|128,ap[a++]=63&o|128);n=a-up-e}else n=a(t,up+e,r);n<32?ap[up++]=160|n:n<256?(e<2&&ap.copyWithin(up+2,up+1,up+1+n),ap[up++]=217,ap[up++]=n):n<65536?(e<3&&ap.copyWithin(up+3,up+2,up+2+n),ap[up++]=218,ap[up++]=n>>8,ap[up++]=255&n):(e<5&&ap.copyWithin(up+5,up+3,up+3+n),ap[up++]=219,lp.setUint32(up,n),up+=4),up+=n}else if("number"===i)if(t>>>0===t)t<64?ap[up++]=t:t<256?(ap[up++]=204,ap[up++]=t):t<65536?(ap[up++]=205,ap[up++]=t>>8,ap[up++]=255&t):(ap[up++]=206,lp.setUint32(up,t),up+=4);else if(t>>0===t)t>=-32?ap[up++]=256+t:t>=-128?(ap[up++]=208,ap[up++]=t+256):t>=-32768?(ap[up++]=209,lp.setInt16(up,t),up+=2):(ap[up++]=210,lp.setInt32(up,t),up+=4);else{let e;if((e=this.useFloat32)>0&&t<4294967296&&t>=-2147483648){let n;if(ap[up++]=202,lp.setFloat32(up,t),e<4||(n=t*Zm[(127&ap[up])<<1|ap[up+1]>>7])>>0===n)return void(up+=4);up--}ap[up++]=203,lp.setFloat64(up,t),up+=8}else if("object"===i)if(t){if(o){let n=o.get(t);if(n){if(!n.id){let t=o.idsToInsert||(o.idsToInsert=[]);n.id=t.push(n)}return ap[up++]=214,ap[up++]=112,lp.setUint32(up,n.id),void(up+=4)}o.set(t,{offset:up-e})}let i=t.constructor;if(i===Object)b(t,!0);else if(i===Array){(n=t.length)<16?ap[up++]=144|n:n<65536?(ap[up++]=220,ap[up++]=n>>8,ap[up++]=255&n):(ap[up++]=221,lp.setUint32(up,n),up+=4);for(let e=0;e<n;e++)v(t[e])}else if(i===Map){(n=t.size)<16?ap[up++]=128|n:n<65536?(ap[up++]=222,ap[up++]=n>>8,ap[up++]=255&n):(ap[up++]=223,lp.setUint32(up,n),up+=4);for(let[e,n]of t)v(e),v(n)}else{for(let e=0,n=tp.length;e<n;e++){if(t instanceof ep[e]){let n=tp[e];if(n.write)return n.type&&(ap[up++]=212,ap[up++]=n.type,ap[up++]=0),void v(n.write.call(this,t));let i,r=ap,o=lp,s=up;ap=null;try{i=n.pack.call(this,t,(t=>(ap=r,r=null,up+=t,up>cp&&x(up),{target:ap,targetView:lp,position:up-t})),v)}finally{r&&(ap=r,lp=o,up=s,cp=ap.length-10)}return void(i&&(i.length+up>cp&&x(i.length+up),up=dp(i,ap,up,n.type)))}}b(t,!t.hasOwnProperty)}}else ap[up++]=192;else if("boolean"===i)ap[up++]=t?195:194;else if("bigint"===i){if(t<BigInt(1)<<BigInt(63)&&t>=-(BigInt(1)<<BigInt(63)))ap[up++]=211,lp.setBigInt64(up,t);else if(t<BigInt(1)<<BigInt(64)&&t>0)ap[up++]=207,lp.setBigUint64(up,t);else{if(!this.largeBigIntToFloat)throw new RangeError(t+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ap[up++]=203,lp.setFloat64(up,Number(t))}up+=8}else if("undefined"===i)this.encodeUndefinedAsNil?ap[up++]=192:(ap[up++]=212,ap[up++]=0,ap[up++]=0);else{if("function"!==i)throw new Error("Unknown type: "+i);v(this.writeFunction&&this.writeFunction())}},b=!1===this.useRecords?this.variableMapSize?t=>{let e,n=Object.keys(t),i=n.length;i<16?ap[up++]=128|i:i<65536?(ap[up++]=222,ap[up++]=i>>8,ap[up++]=255&i):(ap[up++]=223,lp.setUint32(up,i),up+=4);for(let r=0;r<i;r++)v(e=n[r]),v(t[e])}:(t,n)=>{ap[up++]=222;let i=up-e;up+=2;let r=0;for(let e in t)(n||t.hasOwnProperty(e))&&(v(e),v(t[e]),r++);ap[i+++e]=r>>8,ap[i+e]=255&r}:t=>{let e,n=Object.keys(t),o=r.transitions||(r.transitions=Object.create(null)),s=0;for(let i=0,r=n.length;i<r;i++){let t=n[i];e=o[t],e||(e=o[t]=Object.create(null),s++),o=e}let a=o[hp];if(a)a>=96&&p?(ap[up++]=96+(31&(a-=96)),ap[up++]=a>>5):ap[up++]=a;else{a=r.nextId,a||(a=64),a<d&&this.shouldShareStructure&&!this.shouldShareStructure(n)?(a=r.nextOwnId,a<f||(a=d),r.nextOwnId=a+1):(a>=f&&(a=d),r.nextId=a+1);let t=n.highByte=a>=96&&p?a-96>>5:-1;o[hp]=a,r[a-64]=n,a<d?(n.isShared=!0,r.sharedLength=a-63,i=!0,t>=0?(ap[up++]=96+(31&a),ap[up++]=t):ap[up++]=a):(t>=0?(ap[up++]=213,ap[up++]=114,ap[up++]=96+(31&a),ap[up++]=t):(ap[up++]=212,ap[up++]=114,ap[up++]=a),s&&(_+=g*s),y.length>=m&&(y.shift()[hp]=0),y.push(o),v(n))}for(let i=0,r=n.length;i<r;i++)v(t[n[i]])},x=t=>{let n;if(t>16777216){if(t-e>sp)throw new Error("Packed buffer would be larger than maximum buffer size");n=Math.min(sp,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(t-e<<2,ap.length-1)>>12)<<12;let i=new rp(n);return lp=new DataView(i.buffer,0,n),ap.copy?ap.copy(i,0,e,t):i.set(ap.slice(e,t)),up-=e,e=0,cp=i.length-10,ap=i}}useBuffer(t){ap=t,lp=new DataView(ap.buffer,ap.byteOffset,ap.byteLength),up=0}}({useRecords:!1});const yp=fp.pack;fp.pack;const _p=1e3;export{n as S,e as a,_n as b,Rh as d,om as e,Rs as f,t as j,vn as l,yp as p,Os as t,Km as u,gn as x};
