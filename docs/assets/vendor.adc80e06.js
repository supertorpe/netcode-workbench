let t={version:"4.12.0",date:"2021-07-09 09:15",ajaxAlwaysCallbacks:[],autopositionSpacing:4,closeOnEscape:void document.addEventListener("keydown",(e=>{"Escape"!==e.key&&"Escape"!==e.code&&"Esc"!==e.key||t.getPanels((t=>t.classList.contains("jsPanel"))).some((t=>!!t.options.closeOnEscape&&("function"==typeof t.options.closeOnEscape?t.options.closeOnEscape.call(t,t):(t.close(null,!0),!0))))}),!1),defaults:{boxShadow:3,container:"window",contentSize:{width:"400px",height:"200px"},dragit:{cursor:"move",handles:".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",opacity:.8,disableOnMaximized:!0},header:!0,headerTitle:"jsPanel",headerControls:{size:"md"},iconfont:void 0,maximizedMargin:0,minimizeTo:"default",paneltype:"standard",position:{my:"center",at:"center"},resizeit:{handles:"n, e, s, w, ne, se, sw, nw",minWidth:128,minHeight:38},theme:"default"},defaultAutocloseConfig:{time:"8s",progressbar:!0},defaultSnapConfig:{sensitivity:70,trigger:"panel",active:"both"},extensions:{},globalCallbacks:!1,icons:{close:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M13.7,11l6.1-6.1c0.4-0.4,0.4-0.9,0-1.3l-1.4-1.4c-0.4-0.4-0.9-0.4-1.3,0L11,8.3L4.9,2.3C4.6,1.9,4,1.9,3.7,2.3L2.3,3.7 C1.9,4,1.9,4.6,2.3,4.9L8.3,11l-6.1,6.1c-0.4,0.4-0.4,0.9,0,1.3l1.4,1.4c0.4,0.4,0.9,0.4,1.3,0l6.1-6.1l6.1,6.1 c0.4,0.4,0.9,0.4,1.3,0l1.4-1.4c0.4-0.4,0.4-0.9,0-1.3L13.7,11z"/></svg>',maximize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H3.7C2.8,2,2,2.9,2,3.9v14.1C2,19.1,2.8,20,3.7,20h14.6c0.9,0,1.7-0.9,1.7-1.9V3.9C20,2.9,19.2,2,18.3,2z M18.3,17.8 c0,0.1-0.1,0.2-0.2,0.2H3.9c-0.1,0-0.2-0.1-0.2-0.2V8.4h14.6V17.8z"/></svg>',normalize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H7.1C6.1,2,5.4,2.8,5.4,3.7v1.7H3.7C2.8,5.4,2,6.1,2,7.1v11.3C2,19.2,2.8,20,3.7,20h11.3c0.9,0,1.7-0.8,1.7-1.7v-1.7 h1.7c0.9,0,1.7-0.8,1.7-1.7V3.7C20,2.8,19.2,2,18.3,2z M14.9,18.3H3.7V11h11.3V18.3z M18.3,14.9h-1.7V7.1c0-0.9-0.8-1.7-1.7-1.7H7.1 V3.7h11.3V14.9z"/></svg>',minimize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.9,19.8H3.1c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h15.8c0.6,0,1.1,0.5,1.1,1.1S19.5,19.8,18.9,19.8z"/></svg>',smallify:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M2.1,15.2L2.9,16c0.2,0.2,0.5,0.2,0.7,0L11,8.7l7.4,7.3c0.2,0.2,0.5,0.2,0.7,0l0.8-0.8c0.2-0.2,0.2-0.5,0-0.7L11.3,6 c-0.2-0.2-0.5-0.2-0.7,0l-8.5,8.5C2,14.7,2,15,2.1,15.2z"/></svg>'},idCounter:0,isIE:navigator.appVersion.match(/Trident/),pointerdown:"ontouchend"in window?["touchstart","mousedown"]:["mousedown"],pointermove:"ontouchend"in window?["touchmove","mousemove"]:["mousemove"],pointerup:"ontouchend"in window?["touchend","mouseup"]:["mouseup"],polyfills:(Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==t)throw new TypeError("Cannot convert first argument to object");let e=Object(t);for(let i=1;i<arguments.length;i++){let t=arguments[i];if(null==t)continue;t=Object(t);let n=Object.keys(Object(t));for(let i=0,o=n.length;i<o;i++){let o=n[i],r=Object.getOwnPropertyDescriptor(t,o);void 0!==r&&r.enumerable&&(e[o]=t[o])}}return e}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(let i=0;i<this.length;i++)t.call(e,this[i],i,this)}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){t.append=t.append||function(){let t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){let i=t instanceof Node;e.appendChild(i?t:document.createTextNode(String(t)))})),this.appendChild(e)}})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let e,i=(this.document||this.ownerDocument).querySelectorAll(t),n=this;do{for(e=i.length;--e>=0&&i.item(e)!==n;);}while(e<0&&(n=n.parentElement));return n}),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};let i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.Event.prototype,window.CustomEvent=t}(),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return e<this.length?e|=0:e=this.length,this.substr(e-t.length,t.length)===t}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},void(Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');let i=Object(this),n=i.length>>>0;if(0===n)return!1;let o=0|e,r=Math.max(o>=0?o:n-Math.abs(o),0);for(;r<n;){if((s=i[r])===(a=t)||"number"==typeof s&&"number"==typeof a&&isNaN(s)&&isNaN(a))return!0;r++}var s,a;return!1}}))),themes:["default","primary","secondary","info","success","warning","danger","light","dark"],ziBase:100,colorFilledLight:.81,colorFilledDark:.08,colorFilled:0,colorBrightnessThreshold:.55,colorNames:{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32",grey50:"fafafa",grey100:"f5f5f5",grey200:"eee",grey300:"e0e0e0",grey400:"bdbdbd",grey500:"9e9e9e",grey600:"757575",grey700:"616161",grey800:"424242",grey900:"212121",gray50:"fafafa",gray100:"f5f5f5",gray200:"eee",gray300:"e0e0e0",gray400:"bdbdbd",gray500:"9e9e9e",gray600:"757575",gray700:"616161",gray800:"424242",gray900:"212121",bluegrey50:"eceff1",bluegrey100:"CFD8DC",bluegrey200:"B0BEC5",bluegrey300:"90A4AE",bluegrey400:"78909C",bluegrey500:"607D8B",bluegrey600:"546E7A",bluegrey700:"455A64",bluegrey800:"37474F",bluegrey900:"263238",bluegray50:"eceff1",bluegray100:"CFD8DC",bluegray200:"B0BEC5",bluegray300:"90A4AE",bluegray400:"78909C",bluegray500:"607D8B",bluegray600:"546E7A",bluegray700:"455A64",bluegray800:"37474F",bluegray900:"263238",red50:"FFEBEE",red100:"FFCDD2",red200:"EF9A9A",red300:"E57373",red400:"EF5350",red500:"F44336",red600:"E53935",red700:"D32F2F",red800:"C62828",red900:"B71C1C",reda100:"FF8A80",reda200:"FF5252",reda400:"FF1744",reda700:"D50000",pink50:"FCE4EC",pink100:"F8BBD0",pink200:"F48FB1",pink300:"F06292",pink400:"EC407A",pink500:"E91E63",pink600:"D81B60",pink700:"C2185B",pink800:"AD1457",pink900:"880E4F",pinka100:"FF80AB",pinka200:"FF4081",pinka400:"F50057",pinka700:"C51162",purple50:"F3E5F5",purple100:"E1BEE7",purple200:"CE93D8",purple300:"BA68C8",purple400:"AB47BC",purple500:"9C27B0",purple600:"8E24AA",purple700:"7B1FA2",purple800:"6A1B9A",purple900:"4A148C",purplea100:"EA80FC",purplea200:"E040FB",purplea400:"D500F9",purplea700:"AA00FF",deeppurple50:"EDE7F6",deeppurple100:"D1C4E9",deeppurple200:"B39DDB",deeppurple300:"9575CD",deeppurple400:"7E57C2",deeppurple500:"673AB7",deeppurple600:"5E35B1",deeppurple700:"512DA8",deeppurple800:"4527A0",deeppurple900:"311B92",deeppurplea100:"B388FF",deeppurplea200:"7C4DFF",deeppurplea400:"651FFF",deeppurplea700:"6200EA",indigo50:"E8EAF6",indigo100:"C5CAE9",indigo200:"9FA8DA",indigo300:"7986CB",indigo400:"5C6BC0",indigo500:"3F51B5",indigo600:"3949AB",indigo700:"303F9F",indigo800:"283593",indigo900:"1A237E",indigoa100:"8C9EFF",indigoa200:"536DFE",indigoa400:"3D5AFE",indigoa700:"304FFE",blue50:"E3F2FD",blue100:"BBDEFB",blue200:"90CAF9",blue300:"64B5F6",blue400:"42A5F5",blue500:"2196F3",blue600:"1E88E5",blue700:"1976D2",blue800:"1565C0",blue900:"0D47A1",bluea100:"82B1FF",bluea200:"448AFF",bluea400:"2979FF",bluea700:"2962FF",lightblue50:"E1F5FE",lightblue100:"B3E5FC",lightblue200:"81D4FA",lightblue300:"4FC3F7",lightblue400:"29B6F6",lightblue500:"03A9F4",lightblue600:"039BE5",lightblue700:"0288D1",lightblue800:"0277BD",lightblue900:"01579B",lightbluea100:"80D8FF",lightbluea200:"40C4FF",lightbluea400:"00B0FF",lightbluea700:"0091EA",cyan50:"E0F7FA",cyan100:"B2EBF2",cyan200:"80DEEA",cyan300:"4DD0E1",cyan400:"26C6DA",cyan500:"00BCD4",cyan600:"00ACC1",cyan700:"0097A7",cyan800:"00838F",cyan900:"006064",cyana100:"84FFFF",cyana200:"18FFFF",cyana400:"00E5FF",cyana700:"00B8D4",teal50:"E0F2F1",teal100:"B2DFDB",teal200:"80CBC4",teal300:"4DB6AC",teal400:"26A69A",teal500:"009688",teal600:"00897B",teal700:"00796B",teal800:"00695C",teal900:"004D40",teala100:"A7FFEB",teala200:"64FFDA",teala400:"1DE9B6",teala700:"00BFA5",green50:"E8F5E9",green100:"C8E6C9",green200:"A5D6A7",green300:"81C784",green400:"66BB6A",green500:"4CAF50",green600:"43A047",green700:"388E3C",green800:"2E7D32",green900:"1B5E20",greena100:"B9F6CA",greena200:"69F0AE",greena400:"00E676",greena700:"00C853",lightgreen50:"F1F8E9",lightgreen100:"DCEDC8",lightgreen200:"C5E1A5",lightgreen300:"AED581",lightgreen400:"9CCC65",lightgreen500:"8BC34A",lightgreen600:"7CB342",lightgreen700:"689F38",lightgreen800:"558B2F",lightgreen900:"33691E",lightgreena100:"CCFF90",lightgreena200:"B2FF59",lightgreena400:"76FF03",lightgreena700:"64DD17",lime50:"F9FBE7",lime100:"F0F4C3",lime200:"E6EE9C",lime300:"DCE775",lime400:"D4E157",lime500:"CDDC39",lime600:"C0CA33",lime700:"AFB42B",lime800:"9E9D24",lime900:"827717",limea100:"F4FF81",limea200:"EEFF41",limea400:"C6FF00",limea700:"AEEA00",yellow50:"FFFDE7",yellow100:"FFF9C4",yellow200:"FFF59D",yellow300:"FFF176",yellow400:"FFEE58",yellow500:"FFEB3B",yellow600:"FDD835",yellow700:"FBC02D",yellow800:"F9A825",yellow900:"F57F17",yellowa100:"FFFF8D",yellowa200:"FFFF00",yellowa400:"FFEA00",yellowa700:"FFD600",amber50:"FFF8E1",amber100:"FFECB3",amber200:"FFE082",amber300:"FFD54F",amber400:"FFCA28",amber500:"FFC107",amber600:"FFB300",amber700:"FFA000",amber800:"FF8F00",amber900:"FF6F00",ambera100:"FFE57F",ambera200:"FFD740",ambera400:"FFC400",ambera700:"FFAB00",orange50:"FFF3E0",orange100:"FFE0B2",orange200:"FFCC80",orange300:"FFB74D",orange400:"FFA726",orange500:"FF9800",orange600:"FB8C00",orange700:"F57C00",orange800:"EF6C00",orange900:"E65100",orangea100:"FFD180",orangea200:"FFAB40",orangea400:"FF9100",orangea700:"FF6D00",deeporange50:"FBE9E7",deeporange100:"FFCCBC",deeporange200:"FFAB91",deeporange300:"FF8A65",deeporange400:"FF7043",deeporange500:"FF5722",deeporange600:"F4511E",deeporange700:"E64A19",deeporange800:"D84315",deeporange900:"BF360C",deeporangea100:"FF9E80",deeporangea200:"FF6E40",deeporangea400:"FF3D00",deeporangea700:"DD2C00",brown50:"EFEBE9",brown100:"D7CCC8",brown200:"BCAAA4",brown300:"A1887F",brown400:"8D6E63",brown500:"795548",brown600:"6D4C41",brown700:"5D4037",brown800:"4E342E",brown900:"3E2723"},errorReporting:1,modifier:!1,helper:(document.addEventListener("keydown",(e=>{t.modifier=e})),void document.addEventListener("keyup",(()=>{t.modifier=!1}))),color(t){let e,i,n,o,r,s,a,l,c,u=t.toLowerCase(),h={};const m=/^rgba?\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3}),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,p=/^hsla?\(([0-9]{1,3}),([0-9]{1,3}%),([0-9]{1,3}%),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,d=this.colorNames;return d[u]&&(u=d[u]),null!==u.match(/^#?([0-9a-f]{3}|[0-9a-f]{6})$/gi)?((u=u.replace("#","")).length%2==1?(e=String(u.substr(0,1))+u.substr(0,1),i=String(u.substr(1,1))+u.substr(1,1),n=String(u.substr(2,1))+u.substr(2,1),h.rgb={r:parseInt(e,16),g:parseInt(i,16),b:parseInt(n,16)},h.hex=`#${e}${i}${n}`):(h.rgb={r:parseInt(u.substr(0,2),16),g:parseInt(u.substr(2,2),16),b:parseInt(u.substr(4,2),16)},h.hex=`#${u}`),c=this.rgbToHsl(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl=c,h.rgb.css=`rgb(${h.rgb.r},${h.rgb.g},${h.rgb.b})`):u.match(m)?(a=m.exec(u),h.rgb={css:u,r:a[1],g:a[2],b:a[3]},h.hex=this.rgbToHex(a[1],a[2],a[3]),c=this.rgbToHsl(a[1],a[2],a[3]),h.hsl=c):u.match(p)?(o=(a=p.exec(u))[1]/360,r=a[2].substr(0,a[2].length-1)/100,s=a[3].substr(0,a[3].length-1)/100,l=this.hslToRgb(o,r,s),h.rgb={css:`rgb(${l[0]},${l[1]},${l[2]})`,r:l[0],g:l[1],b:l[2]},h.hex=this.rgbToHex(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl={css:`hsl(${a[1]},${a[2]},${a[3]})`,h:a[1],s:a[2],l:a[3]}):(h.hex="#f5f5f5",h.rgb={css:"rgb(245,245,245)",r:245,g:245,b:245},h.hsl={css:"hsl(0,0%,96%)",h:0,s:"0%",l:"96%"}),h},calcColors(t){const e=this.colorBrightnessThreshold,i=this.color(t),n=this.lighten(t,this.colorFilledLight),o=this.darken(t,this.colorFilled),r=this.perceivedBrightness(t)<=e?"#ffffff":"#000000",s=this.perceivedBrightness(n)<=e?"#ffffff":"#000000",a=this.perceivedBrightness(o)<=e?"#ffffff":"#000000",l=this.lighten(t,this.colorFilledDark),c=this.perceivedBrightness(l)<=e?"#ffffff":"#000000";return[i.hsl.css,n,o,r,s,a,l,c]},darken(t,e){const i=this.color(t).hsl,n=parseFloat(i.l),o=Math.round(n-n*e)+"%";return`hsl(${i.h},${i.s},${o})`},lighten(t,e){const i=this.color(t).hsl,n=parseFloat(i.l),o=Math.round(n+(100-n)*e)+"%";return`hsl(${i.h},${i.s},${o})`},hslToRgb(t,e,i){let n,o,r;if(0===e)n=o=r=i;else{let s=(t,e,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t),a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;n=s(l,a,t+1/3),o=s(l,a,t),r=s(l,a,t-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*r)]},rgbToHsl(t,e,i){t/=255,e/=255,i/=255;let n,o,r=Math.max(t,e,i),s=Math.min(t,e,i),a=(r+s)/2;if(r===s)n=o=0;else{let l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{css:"hsl("+(n=Math.round(360*n))+","+(o=Math.round(100*o)+"%")+","+(a=Math.round(100*a)+"%")+")",h:n,s:o,l:a}},rgbToHex(t,e,i){let n=Number(t).toString(16),o=Number(e).toString(16),r=Number(i).toString(16);return 1===n.length&&(n=`0${n}`),1===o.length&&(o=`0${o}`),1===r.length&&(r=`0${r}`),`#${n}${o}${r}`},perceivedBrightness(t){const e=this.color(t).rgb;return e.r/255*.2126+e.g/255*.7152+e.b/255*.0722},pOposition(t){let e={},i=t.trim().split(/\s+/),n=i.filter((t=>t.match(/^(down|right|up|left)$/i)));n.length&&(e.autoposition=n[0],i.splice(i.indexOf(n[0]),1));let o=i.filter((t=>t.match(/^(left-|right-)(top|center|bottom)$|(^center-)(top|bottom)$|(^center$)/i)));o.length?(e.my=o[0],e.at=o[1]||o[0],i.splice(i.indexOf(o[0]),1),o[1]&&i.splice(i.indexOf(o[1]),1)):(e.my="center",e.at="center");let r=i.filter((t=>t.match(/^[+-]?\d*\.?\d+[a-z%]*$/i)));return r.length&&(e.offsetX=r[0].match(/^[+-]?\d*\.?\d+$/i)?`${r[0]}px`:r[0],r[1]?e.offsetY=r[1].match(/^[+-]?\d*\.?\d+$/i)?`${r[1]}px`:r[1]:e.offsetY=e.offsetX,i.splice(i.indexOf(r[0]),1),r[1]&&i.splice(i.indexOf(r[1]),1)),i.length&&(e.of=i.join(" ")),e},position(t,e){if(!e)return t.style.opacity=1,t;e="string"==typeof e?Object.assign({},this.defaults.position,this.pOposition(e)):Object.assign({},this.defaults.position,e),["my","at","of"].forEach((i=>{"function"==typeof e[i]&&(e[i]=e[i].call(t,t))})),"window"===t.options.container&&(t.style.position="fixed"),"string"==typeof t?t=document.querySelector(t):Object.getPrototypeOf(t).jquery&&(t=t[0]);const i="window"===t.options.container?"window":t.parentElement,n=t.getBoundingClientRect(),o=t.parentElement.getBoundingClientRect(),r="window"===i?{left:0,top:0,width:document.documentElement.clientWidth,height:window.innerHeight}:{width:o.width,height:o.height,left:o.left,top:o.top},s="window"===i?{x:1,y:1}:{x:r.width/i.offsetWidth,y:r.height/i.offsetHeight},a="window"===i?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:window.getComputedStyle(i);let l;r.width-=(parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth))*s.x,r.height-=(parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth))*s.y,l=e.of?"string"==typeof e.of?"window"===e.of?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:document.querySelector(e.of).getBoundingClientRect():Object.getPrototypeOf(e.of).jquery?e.of[0].getBoundingClientRect():e.of.getBoundingClientRect():r;let c=this.getScrollbarWidth(document.body),u=this.getScrollbarWidth(t.parentElement),h="0px";e.my.startsWith("left-")?e.at.startsWith("left-")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+"px":"0px":e.at.startsWith("center")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+l.width/2+"px":r.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+l.width+"px":r.width+"px"):e.my.startsWith("center")?e.at.startsWith("left-")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-n.width/2+"px":-n.width/2+"px":e.at.startsWith("center")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-(n.width-l.width)/2+"px":r.width/2-n.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+(l.width-n.width/2)+"px":r.width-n.width/2+"px"):e.my.startsWith("right-")&&(e.at.startsWith("left-")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-n.width+"px":-n.width+"px":e.at.startsWith("center")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-n.width+l.width/2+"px":r.width/2-n.width+"px":e.at.startsWith("right-")&&(h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+l.width-n.width+"px":r.width-n.width+"px","window"!==i&&(h=parseFloat(h)-u.y+"px")));let m="0px";e.my.endsWith("-top")?e.at.endsWith("-top")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)+"px":"0px":e.at.endsWith("center")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)+l.height/2+"px":r.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)+l.height+"px":r.height+"px"):e.my.endsWith("center")?e.at.endsWith("-top")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height/2+"px":-n.height/2+"px":e.at.endsWith("center")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height/2+l.height/2+"px":r.height/2-n.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height/2+l.height+"px":r.height-n.height/2+"px"):e.my.endsWith("-bottom")&&(e.at.endsWith("-top")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height+"px":-n.height+"px":e.at.endsWith("center")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height+l.height/2+"px":r.height/2-n.height+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height+l.height+"px":r.height-n.height+"px",m="window"!==i?parseFloat(m)-u.x+"px":parseFloat(m)-c.x+"px")),t.style.left=1===s.x?h:parseFloat(h)/s.x+"px",t.style.top=1===s.y?m:parseFloat(m)/s.y+"px";let p=getComputedStyle(t),d={left:p.left,top:p.top};return e.autoposition&&e.my===e.at&&["left-top","center-top","right-top","left-bottom","center-bottom","right-bottom"].indexOf(e.my)>=0&&(d=this.applyPositionAutopos(t,d,e)),(e.offsetX||e.offsetY)&&(d=this.applyPositionOffset(t,d,e)),(e.minLeft||e.minTop||e.maxLeft||e.maxTop)&&(d=this.applyPositionMinMax(t,d,e)),e.modify&&(d=this.applyPositionModify(t,d,e)),"number"==typeof t.options.opacity?t.style.opacity=t.options.opacity:t.style.opacity=1,t},applyPositionAutopos(e,i,n){const o=`${n.my}-${n.autoposition.toLowerCase()}`;e.classList.add(o);const r=Array.prototype.slice.call(document.querySelectorAll(`.${o}`)),s=r.indexOf(e);if(r.length>1){switch(n.autoposition){case"down":r.forEach(((e,n)=>{n>0&&n<=s&&(i.top=parseFloat(i.top)+r[--n].getBoundingClientRect().height+t.autopositionSpacing+"px")}));break;case"up":r.forEach(((e,n)=>{n>0&&n<=s&&(i.top=parseFloat(i.top)-r[--n].getBoundingClientRect().height-t.autopositionSpacing+"px")}));break;case"right":r.forEach(((e,n)=>{n>0&&n<=s&&(i.left=parseFloat(i.left)+r[--n].getBoundingClientRect().width+t.autopositionSpacing+"px")}));break;case"left":r.forEach(((e,n)=>{n>0&&n<=s&&(i.left=parseFloat(i.left)-r[--n].getBoundingClientRect().width-t.autopositionSpacing+"px")}))}e.style.left=i.left,e.style.top=i.top}return{left:i.left,top:i.top}},applyPositionOffset(t,e,i){["offsetX","offsetY"].forEach((t=>{i[t]?("function"==typeof i[t]&&(i[t]=i[t].call(e,e,i)),!1===isNaN(i[t])&&(i[t]=`${i[t]}px`)):i[t]="0px"})),t.style.left=`calc(${t.style.left} + ${i.offsetX})`,t.style.top=`calc(${t.style.top} + ${i.offsetY})`;const n=getComputedStyle(t);return{left:n.left,top:n.top}},applyPositionMinMax(t,e,i){if(["minLeft","minTop","maxLeft","maxTop"].forEach((t=>{i[t]&&("function"==typeof i[t]&&(i[t]=i[t].call(e,e,i)),(Number.isInteger(i[t])||i[t].match(/^\d+$/))&&(i[t]=`${i[t]}px`))})),i.minLeft){t.style.left=i.minLeft;let n=getComputedStyle(t).left;parseFloat(n)<parseFloat(e.left)?t.style.left=e.left:e.left=n}if(i.minTop){t.style.top=i.minTop;let n=getComputedStyle(t).top;parseFloat(n)<parseFloat(e.top)?t.style.top=e.top:e.top=n}if(i.maxLeft){t.style.left=i.maxLeft;let n=getComputedStyle(t).left;parseFloat(n)>parseFloat(e.left)?t.style.left=e.left:e.left=n}if(i.maxTop){t.style.top=i.maxTop;let n=getComputedStyle(t).top;parseFloat(n)>parseFloat(e.top)?t.style.top=e.top:e.top=n}const n=getComputedStyle(t);return{left:n.left,top:n.top}},applyPositionModify(t,e,i){if(i.modify&&"function"==typeof i.modify){const n=i.modify.call(e,e,i);t.style.left=Number.isInteger(n.left)||n.left.match(/^\d+$/)?`${n.left}px`:n.left,t.style.top=Number.isInteger(n.top)||n.top.match(/^\d+$/)?`${n.top}px`:n.top}const n=getComputedStyle(t);return{left:n.left,top:n.top}},autopositionRemaining(t){let e,i=t.options.container;["left-top-down","left-top-right","center-top-down","right-top-down","right-top-left","left-bottom-up","left-bottom-right","center-bottom-up","right-bottom-up","right-bottom-left"].forEach((i=>{t.classList.contains(i)&&(e=i)})),e&&("window"===i?document.body:"string"==typeof i?document.querySelector(i):i).querySelectorAll(`.${e}`).forEach((t=>{t.reposition()}))},addScript(t,e="application/javascript",i){if(!document.querySelector(`script[src="${t}"]`)){const n=document.createElement("script");i&&(n.onload=i),n.src=t,n.type=e,document.head.appendChild(n)}},ajax(e,i){let n,o,r=new XMLHttpRequest;const s={method:"GET",async:!0,user:"",pwd:"",done:function(){if(i){let e=t.strToHtml(this.responseText);n.urlSelector&&(e=e.querySelector(n.urlSelector)),i.contentRemove(),i.content.append(e)}},autoresize:!0,autoreposition:!0};if(i&&"string"==typeof e)n=Object.assign({},s,{url:e});else{if("object"!=typeof e||!e.url){if(this.errorReporting){let e="XMLHttpRequest seems to miss the <mark>url</mark> parameter!";t.errorpanel(e)}return}(n=Object.assign({},s,e)).url=e.url,!1===n.async&&(n.timeout=0,n.withCredentials&&(n.withCredentials=void 0),n.responseType&&(n.responseType=void 0))}o=n.url.trim().split(/\s+/),n.url=encodeURI(o[0]),o.length>1&&(o.shift(),n.urlSelector=o.join(" ")),r.onreadystatechange=()=>{4===r.readyState&&(200===r.status?i?n.done.call(r,r,i):n.done.call(r,r):n.fail&&(i?n.fail.call(r,r,i):n.fail.call(r,r)),n.always&&(i?n.always.call(r,r,i):n.always.call(r,r)),i&&(n.autoresize||n.autoreposition)&&t.ajaxAutoresizeAutoreposition(i,n),t.ajaxAlwaysCallbacks.length&&t.ajaxAlwaysCallbacks.forEach((t=>{i?t.call(r,r,i):t.call(r,r)})))},r.open(n.method,n.url,n.async,n.user,n.pwd),r.timeout=n.timeout||0,n.withCredentials&&(r.withCredentials=n.withCredentials),n.responseType&&(r.responseType=n.responseType),n.beforeSend&&(i?n.beforeSend.call(r,r,i):n.beforeSend.call(r,r)),n.data?r.send(n.data):r.send(null)},ajaxAutoresizeAutoreposition(t,e){const i=t.options.contentSize;if("string"==typeof i&&i.match(/auto/i)){const n=i.split(" "),o=Object.assign({},{width:n[0],height:n[1]});e.autoresize&&t.resize(o),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}else if("object"==typeof i&&("auto"===i.width||"auto"===i.height)){const n=Object.assign({},i);e.autoresize&&t.resize(n),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}},createPanelTemplate(t=!0){const e=document.createElement("div");return e.className="jsPanel",e.style.left="0",e.style.top="0",t&&["close","maximize","normalize","minimize","smallify"].forEach((t=>{e.setAttribute(`data-btn${t}`,"enabled")})),e.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-smallify"  aria-label="Smallify">${this.icons.smallify}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-minimize"  aria-label="Minimize">${this.icons.minimize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                                <div class="jsPanel-hdr-toolbar"></div>\n                            </div>\n                            <div class="jsPanel-progressbar">\n                                <div class="jsPanel-progressbar-slider"></div>\n                            </div>\n                            <div class="jsPanel-content"></div>\n                            <div class="jsPanel-minimized-box"></div>\n                            <div class="jsPanel-ftr"></div>`,e},createMinimizedTemplate(){const t=document.createElement("div");return t.className="jsPanel-replacement",t.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                            </div>`,t},createSnapArea(t,e,i){const n=document.createElement("div"),o=t.parentElement;n.className=`jsPanel-snap-area jsPanel-snap-area-${e}`,"lt"===e||"rt"===e||"rb"===e||"lb"===e?(n.style.width=i+"px",n.style.height=i+"px"):"ct"===e||"cb"===e?n.style.height=i+"px":"lc"!==e&&"rc"!==e||(n.style.width=i+"px"),o!==document.body&&(n.style.position="absolute"),document.querySelector(`.jsPanel-snap-area.jsPanel-snap-area-${e}`)||t.parentElement.appendChild(n)},emptyNode(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},extend(t){if("[object Object]"===Object.prototype.toString.call(t))for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this.extensions[e]=t[e])},fetch(e,i){let n;const o={bodyMethod:"text",autoresize:!0,autoreposition:!0,done:function(e,i){if(i){let n=t.strToHtml(e);i.contentRemove(),i.content.append(n)}}};if(i&&"string"==typeof e)n=Object.assign({},o,{resource:encodeURI(e)});else{if("object"!=typeof e||!e.resource){if(this.errorReporting){let e="Fetch Request seems to miss the <mark>resource</mark> parameter!";t.errorpanel(e)}return}(n=Object.assign({},o,e)).resource=encodeURI(e.resource)}const r=n.fetchInit||{};n.beforeSend&&(i?n.beforeSend.call(e,e,i):n.beforeSend.call(e,e)),fetch(n.resource,r).then((t=>{if(t.ok)return t[n.bodyMethod]()})).then((e=>{i?n.done.call(e,e,i):n.done.call(e,e),i&&(n.autoresize||n.autoreposition)&&t.ajaxAutoresizeAutoreposition(i,n)}))},getPanels:(t=function(){return this.classList.contains("jsPanel-standard")})=>Array.prototype.slice.call(document.querySelectorAll(".jsPanel")).filter((e=>t.call(e,e))).sort(((t,e)=>e.style.zIndex-t.style.zIndex)),pOcontainer(t){if("window"===t)return document.body;if("string"==typeof t){let e=document.querySelectorAll(t);return!!(e.length&&e.length>0)&&e}return 1===t.nodeType?t:!!t.length&&t[0]},pOcontainment(t){let e=t;if("function"==typeof t&&(e=t()),"number"==typeof e)return[e,e,e,e];if(Array.isArray(e)){if(1===e.length)return[e[0],e[0],e[0],e[0]];if(2===e.length)return e.concat(e);3===e.length&&(e[3]=e[1])}return e},pOsize(t,e){let i=e||this.defaults.contentSize;const n=t.parentElement;if("string"==typeof i){const t=i.trim().split(" ");(i={}).width=t[0],2===t.length?i.height=t[1]:i.height=t[0]}else i.width&&!i.height?i.height=i.width:i.height&&!i.width&&(i.width=i.height);if(String(i.width).match(/^[0-9.]+$/gi))i.width+="px";else if("string"==typeof i.width&&i.width.endsWith("%"))if(n===document.body)i.width=window.innerWidth*(parseFloat(i.width)/100)+"px";else{const t=window.getComputedStyle(n),e=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);i.width=(parseFloat(t.width)-e)*(parseFloat(i.width)/100)+"px"}else"function"==typeof i.width&&(i.width=i.width.call(t,t),("number"==typeof i.width||"string"==typeof i.width&&i.width.match(/^[0-9.]+$/gi))&&(i.width+="px"));if(String(i.height).match(/^[0-9.]+$/gi))i.height+="px";else if("string"==typeof i.height&&i.height.endsWith("%"))if(n===document.body)i.height=window.innerHeight*(parseFloat(i.height)/100)+"px";else{const t=window.getComputedStyle(n),e=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);i.height=(parseFloat(t.height)-e)*(parseFloat(i.height)/100)+"px"}else"function"==typeof i.height&&(i.height=i.height.call(t,t),("number"==typeof i.height||"string"==typeof i.height&&i.height.match(/^[0-9.]+$/gi))&&(i.height+="px"));return i},pOborder(t){t=t.trim();const e=new Array(3),i=t.match(/\s*(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s*/gi),n=t.match(/\s*(thin|medium|thick)|(\d*\.?\d+[a-zA-Z]{2,4})\s*/gi);return i?(e[1]=i[0].trim(),t=t.replace(e[1],"")):e[1]="solid",n?(e[0]=n[0].trim(),t=t.replace(e[0],"")):e[0]="medium",e[2]=t.trim(),e},pOheaderControls(t){if("string"==typeof t){let e={},i=t.toLowerCase(),n=i.match(/xl|lg|md|sm|xs/),o=i.match(/closeonly|none/);return n&&(e.size=n[0]),o&&(e=Object.assign({},e,{maximize:"remove",normalize:"remove",minimize:"remove",smallify:"remove"}),"none"===o[0]&&(e.close="remove")),Object.assign({},this.defaults.headerControls,e)}return Object.assign({},this.defaults.headerControls,t)},processCallbacks(t,e,i="some",n,o){if("function"==typeof e&&(e=[e]),i)return e[i]((e=>e.call(t,t,n,o)));e.forEach((e=>{e.call(t,t,n,o)}))},removeSnapAreas(){document.querySelectorAll(".jsPanel-snap-area").forEach((t=>{t.parentElement.removeChild(t)}))},resetZi(){this.zi=((e=t.ziBase)=>{let i=e;return{next:()=>i++}})(),Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).sort(((t,e)=>t.style.zIndex-e.style.zIndex)).forEach((e=>{e.style.zIndex=t.zi.next()}))},getScrollbarWidth(t=document.body){if(t===document.body)return{y:window.innerWidth-document.documentElement.clientWidth,x:window.innerHeight-document.documentElement.clientHeight};{let e=getComputedStyle(t);return{y:t.offsetWidth-t.clientWidth-parseFloat(e.borderRightWidth)-parseFloat(e.borderLeftWidth),x:t.offsetHeight-t.clientHeight-parseFloat(e.borderBottomWidth)-parseFloat(e.borderTopWidth)}}},remClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.remove(e))),t),setClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.add(e))),t),setStyles(t,e){for(let i in e)i in t.style?t.style[i]=e[i]:t.style.setProperty(i,e[i]);return t},setStyle(t,e){return this.setStyles.call(t,t,e)},strToHtml:t=>document.createRange().createContextualFragment(t),toggleClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)})),t),errorpanel(t){this.create({paneltype:"error",dragit:!1,resizeit:!1,theme:{bgPanel:"white",bgContent:"white",colorHeader:"rebeccapurple",colorContent:"#333",border:"2px solid rebeccapurple"},borderRadius:".33rem",headerControls:"closeonly xs",headerTitle:"&#9888; jsPanel Error",contentSize:{width:"50%",height:"auto"},position:"center-top 0 5 down",animateIn:"jsPanelFadeIn",content:`<div class="jsPanel-error-content-separator"></div><p>${t}</p>`})},create(e={},i){t.zi||(t.zi=((e=t.ziBase)=>{let i=e;return{next:()=>i++}})()),e.config?delete(e=Object.assign({},this.defaults,e.config,e)).config:e=Object.assign({},this.defaults,e),e.id?"function"==typeof e.id&&(e.id=e.id()):e.id=`jsPanel-${t.idCounter+=1}`;const n=document.getElementById(e.id);if(null!==n){if(n.classList.contains("jsPanel")&&n.front(),this.errorReporting){let i=`&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>An element with the ID <mark>${e.id}</mark> already exists in the document.`;t.errorpanel(i)}return!1}let o=this.pOcontainer(e.container);if("object"==typeof o&&o.length&&o.length>0&&(o=o[0]),!o){if(this.errorReporting){let e="&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>The container to append the panel to does not exist";t.errorpanel(e)}return!1}["onbeforeclose","onbeforemaximize","onbeforeminimize","onbeforenormalize","onbeforesmallify","onbeforeunsmallify","onclosed","onfronted","onmaximized","onminimized","onnormalized","onsmallified","onstatuschange","onunsmallified"].forEach((t=>{e[t]?"function"==typeof e[t]&&(e[t]=[e[t]]):e[t]=[]}));const r=e.template?e.template:this.createPanelTemplate();r.options=e,r.closetimer=void 0,r.status="initialized",r.currentData={},r.header=r.querySelector(".jsPanel-hdr"),r.headerbar=r.header.querySelector(".jsPanel-headerbar"),r.titlebar=r.header.querySelector(".jsPanel-titlebar"),r.headerlogo=r.headerbar.querySelector(".jsPanel-headerlogo"),r.headertitle=r.headerbar.querySelector(".jsPanel-title"),r.controlbar=r.headerbar.querySelector(".jsPanel-controlbar"),r.headertoolbar=r.header.querySelector(".jsPanel-hdr-toolbar"),r.content=r.querySelector(".jsPanel-content"),r.footer=r.querySelector(".jsPanel-ftr"),r.snappableTo=!1,r.snapped=!1,r.droppableTo=!1,r.progressbar=r.autocloseProgressbar=r.querySelector(".jsPanel-progressbar");const s=new CustomEvent("jspanelloaded",{detail:e.id,cancelable:!0}),a=new CustomEvent("jspanelstatuschange",{detail:e.id,cancelable:!0}),l=new CustomEvent("jspanelbeforenormalize",{detail:e.id,cancelable:!0}),c=new CustomEvent("jspanelnormalized",{detail:e.id,cancelable:!0}),u=new CustomEvent("jspanelbeforemaximize",{detail:e.id,cancelable:!0}),h=new CustomEvent("jspanelmaximized",{detail:e.id,cancelable:!0}),m=new CustomEvent("jspanelbeforeminimize",{detail:e.id,cancelable:!0}),p=new CustomEvent("jspanelminimized",{detail:e.id,cancelable:!0}),d=new CustomEvent("jspanelbeforesmallify",{detail:e.id,cancelable:!0}),f=new CustomEvent("jspanelsmallified",{detail:e.id,cancelable:!0}),_=new CustomEvent("jspanelsmallifiedmax",{detail:e.id,cancelable:!0}),y=new CustomEvent("jspanelbeforeunsmallify",{detail:e.id,cancelable:!0}),v=new CustomEvent("jspanelfronted",{detail:e.id,cancelable:!0}),g=new CustomEvent("jspanelbeforeclose",{detail:e.id,cancelable:!0}),b=new CustomEvent("jspanelclosed",{detail:e.id,cancelable:!0}),x=new CustomEvent("jspanelcloseduser",{detail:e.id,cancelable:!0});[s,a,l,c,u,h,m,p,d,f,_,y,v,g].forEach((t=>{t.panel=r}));const $=r.querySelector(".jsPanel-btn-close"),A=r.querySelector(".jsPanel-btn-maximize"),w=r.querySelector(".jsPanel-btn-normalize"),B=r.querySelector(".jsPanel-btn-smallify"),C=r.querySelector(".jsPanel-btn-minimize");$&&t.pointerup.forEach((t=>{$.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.close(null,!0)}))})),A&&t.pointerup.forEach((t=>{A.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.maximize()}))})),w&&t.pointerup.forEach((t=>{w.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.normalize()}))})),B&&t.pointerup.forEach((t=>{B.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;"normalized"===r.status||"maximized"===r.status?r.smallify():"smallified"!==r.status&&"smallifiedmax"!==r.status||r.unsmallify()}))})),C&&t.pointerup.forEach((t=>{C.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.minimize()}))}));let S=t.extensions;for(let t in S)Object.prototype.hasOwnProperty.call(S,t)&&(r[t]=S[t]);if(r.clearTheme=e=>(t.themes.forEach((t=>{["panel",`jsPanel-theme-${t}`,`panel-${t}`,`${t}-color`].forEach((t=>{r.classList.remove(t)})),r.header.classList.remove(`jsPanel-theme-${t}`)})),r.content.classList.remove("jsPanel-content-filled","jsPanel-content-filledlight"),r.header.classList.remove("jsPanel-hdr-light"),r.header.classList.remove("jsPanel-hdr-dark"),r.style.backgroundColor="",t.setStyle(r.headertoolbar,{boxShadow:"",width:"",marginLeft:"",borderTopColor:"transparent"}),t.setStyle(r.content,{background:"",borderTopColor:"transparent"}),r.header.style.background="",Array.prototype.slice.call(r.controlbar.querySelectorAll(".jsPanel-icon")).concat([r.headerlogo,r.headertitle,r.headertoolbar,r.content]).forEach((t=>{t.style.color=""})),e&&e.call(r,r),r),r.getThemeDetails=e=>{const i=e.toLowerCase(),n={color:!1,colors:!1,filling:!1},o=i.split("fill");if(n.color=o[0].trim().replace(/\s*/g,""),2===o.length)if(o[1].startsWith("edlight"))n.filling="filledlight";else if(o[1].startsWith("eddark"))n.filling="filleddark";else if(o[1].startsWith("ed"))n.filling="filled";else if(o[1].startsWith("color")){let e=o[1].split("color"),i=e[e.length-1].trim().replace(/\s*/g,"");t.colorNames[i]&&(i=t.colorNames[i]),i.match(/^([0-9a-f]{3}|[0-9a-f]{6})$/gi)&&(i="#"+i),n.filling=i}if(t.themes.some((t=>t===n.color.split(/\s/i)[0]))){let t=n.color.split(/\s/i)[0],e=document.createElement("button");e.className=t+"-bg",document.body.appendChild(e),n.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(n.color.startsWith("bootstrap-")){let t=n.color.indexOf("-"),e=document.createElement("button");e.className="btn btn"+n.color.slice(t),document.body.appendChild(e),n.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(n.color.startsWith("mdb-")){let t,e=n.color.indexOf("-")+1,i=document.createElement("span");t=n.color.endsWith("-dark")?(t=n.color.slice(e)).replace("-dark","-color-dark"):n.color.slice(e)+"-color",i.className=t,document.body.appendChild(i),n.color=getComputedStyle(i).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(i),i=void 0}return n.colors=t.calcColors(n.color),n},r.applyColorTheme=e=>{if(r.style.backgroundColor=e.colors[0],r.header.style.backgroundColor=e.colors[0],r.header.style.color=e.colors[3],[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((t=>{r.querySelector(t).style.color=e.colors[3]})),r.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{t.style.color=e.colors[3]})),"string"==typeof r.options.theme&&"filled"===e.filling&&(r.content.style.borderTop="#000000"===e.colors[3]?"1px solid rgba(0,0,0,0.15)":"1px solid rgba(255,255,255,0.15)"),"#000000"===e.colors[3]?r.header.classList.add("jsPanel-hdr-light"):r.header.classList.add("jsPanel-hdr-dark"),e.filling)switch(e.filling){case"filled":t.setStyle(r.content,{backgroundColor:e.colors[2],color:e.colors[3]});break;case"filledlight":r.content.style.backgroundColor=e.colors[1];break;case"filleddark":t.setStyle(r.content,{backgroundColor:e.colors[6],color:e.colors[7]});break;default:r.content.style.backgroundColor=e.filling,r.content.style.color=t.perceivedBrightness(e.filling)<=t.colorBrightnessThreshold?"#fff":"#000"}return r},r.applyCustomTheme=e=>{let i,n={bgPanel:"#fff",bgContent:"#fff",colorHeader:"#000",colorContent:"#000"},o=(i="object"==typeof e?Object.assign(n,e):n).bgPanel,s=i.bgContent,a=i.colorHeader,l=i.colorContent;if(t.colorNames[o]?r.style.background="#"+t.colorNames[o]:r.style.background=o,t.colorNames[a]&&(a="#"+t.colorNames[a]),[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((t=>{r.querySelector(t).style.color=a})),r.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{t.style.color=a})),t.colorNames[s]?r.content.style.background="#"+t.colorNames[s]:r.content.style.background=s,t.colorNames[l]?r.content.style.color="#"+t.colorNames[l]:r.content.style.color=l,t.perceivedBrightness(a)>t.colorBrightnessThreshold?r.header.classList.add("jsPanel-hdr-dark"):r.header.classList.add("jsPanel-hdr-light"),t.perceivedBrightness(l)>t.colorBrightnessThreshold?r.content.style.borderTop="1px solid rgba(255,255,255,0.15)":r.content.style.borderTop="1px solid rgba(0,0,0,0.15)",i.border){let e=i.border,n=e.lastIndexOf(" "),o=e.slice(++n);t.colorNames[o]&&(e=e.replace(o,"#"+t.colorNames[o])),r.style.border=e}return r},r.setBorder=e=>{let i=t.pOborder(e);return i[2].length?t.colorNames[i[2]]&&(i[2]="#"+t.colorNames[i[2]]):i[2]=r.style.backgroundColor,i=i.join(" "),r.style.border=i,r.options.border=i,r},r.setBorderRadius=t=>{"number"==typeof t&&(t+="px"),r.style.borderRadius=t;const e=getComputedStyle(r);return r.options.header?(r.header.style.borderTopLeftRadius=e.borderTopLeftRadius,r.header.style.borderTopRightRadius=e.borderTopRightRadius):(r.content.style.borderTopLeftRadius=e.borderTopLeftRadius,r.content.style.borderTopRightRadius=e.borderTopRightRadius),r.options.footerToolbar?(r.footer.style.borderBottomRightRadius=e.borderBottomRightRadius,r.footer.style.borderBottomLeftRadius=e.borderBottomLeftRadius):(r.content.style.borderBottomRightRadius=e.borderBottomRightRadius,r.content.style.borderBottomLeftRadius=e.borderBottomLeftRadius),r},r.setTheme=(t=e.theme,i)=>{let n;if("minimized"===r.status&&(n=!0,r.normalize()),r.clearTheme(),"object"==typeof t)e.border=void 0,r.applyCustomTheme(t);else{"none"===t&&(t="white");let e=r.getThemeDetails(t);r.applyColorTheme(e)}return n&&r.minimize(),i&&i.call(r,r),r},r.remove=(e,i,n)=>{r.parentElement.removeChild(r),document.getElementById(e)?n&&n.call(r,e,r):(r.removeMinimizedReplacement(),r.status="closed",i&&document.dispatchEvent(x),document.dispatchEvent(b),r.options.onclosed&&t.processCallbacks(r,r.options.onclosed,"every",i),t.autopositionRemaining(r),n&&n.call(e,e)),window.removeEventListener("resize",r.windowResizeHandler),document.removeEventListener("jspanelresize",r.parentResizeHandler)},r.close=(e,i)=>{if(r.closetimer&&window.clearInterval(r.closetimer),document.dispatchEvent(g),r.statusBefore=r.status,r.options.onbeforeclose&&r.options.onbeforeclose.length>0&&!t.processCallbacks(r,r.options.onbeforeclose,"some",r.status,i))return r;r.options.animateOut?(r.options.animateIn&&t.remClass(r,r.options.animateIn),t.setClass(r,r.options.animateOut),r.addEventListener("animationend",(t=>{t.stopPropagation(),r.remove(r.id,i,e)}))):r.remove(r.id,i,e)},r.maximize=(i,n)=>{if(r.statusBefore=r.status,e.onbeforemaximize&&e.onbeforemaximize.length>0&&!t.processCallbacks(r,e.onbeforemaximize,"some",r.statusBefore))return r;document.dispatchEvent(u);const o=r.parentElement,s=t.pOcontainment(e.maximizedMargin);return o===document.body?(r.style.width=document.documentElement.clientWidth-s[1]-s[3]+"px",r.style.height=document.documentElement.clientHeight-s[0]-s[2]+"px",r.style.left=s[3]+"px",r.style.top=s[0]+"px"):(r.style.width=o.clientWidth-s[1]-s[3]+"px",r.style.height=o.clientHeight-s[0]-s[2]+"px",r.style.left=s[3]+"px",r.style.top=s[0]+"px"),B.style.transform="unset",r.removeMinimizedReplacement(),r.status="maximized",r.setControls([".jsPanel-btn-maximize"]),n||r.front(),document.dispatchEvent(h),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every",r.statusBefore),i&&i.call(r,r,r.statusBefore),e.onmaximized&&t.processCallbacks(r,e.onmaximized,"every",r.statusBefore),r},r.minimize=i=>{if("minimized"===r.status)return r;if(r.statusBefore=r.status,e.onbeforeminimize&&e.onbeforeminimize.length>0&&!t.processCallbacks(r,e.onbeforeminimize,"some",r.statusBefore))return r;if(document.dispatchEvent(m),!document.getElementById("jsPanel-replacement-container")){const t=document.createElement("div");t.id="jsPanel-replacement-container",document.body.append(t)}if(r.style.left="-9999px",r.status="minimized",document.dispatchEvent(p),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every",r.statusBefore),e.minimizeTo){let t,i,n,o=r.createMinimizedReplacement();switch(e.minimizeTo){case"default":document.getElementById("jsPanel-replacement-container").append(o);break;case"parentpanel":(t=(n=(i=r.closest(".jsPanel-content").parentElement).querySelectorAll(".jsPanel-minimized-box"))[n.length-1]).append(o);break;case"parent":(t=(i=r.parentElement).querySelector(".jsPanel-minimized-container"))||((t=document.createElement("div")).className="jsPanel-minimized-container",i.append(t)),t.append(o);break;default:document.querySelector(e.minimizeTo).append(o)}}return i&&i.call(r,r,r.statusBefore),e.onminimized&&t.processCallbacks(r,e.onminimized,"every",r.statusBefore),r},r.normalize=i=>("normalized"===r.status||(r.statusBefore=r.status,e.onbeforenormalize&&e.onbeforenormalize.length>0&&!t.processCallbacks(r,e.onbeforenormalize,"some",r.statusBefore)||(document.dispatchEvent(l),r.style.width=r.currentData.width,r.style.height=r.currentData.height,r.snapped?r.snap(r.snapped,!0):(r.style.left=r.currentData.left,r.style.top=r.currentData.top),B.style.transform="unset",r.removeMinimizedReplacement(),r.status="normalized",r.setControls([".jsPanel-btn-normalize"]),r.front(),document.dispatchEvent(c),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every",r.statusBefore),i&&i.call(r,r,r.statusBefore),e.onnormalized&&t.processCallbacks(r,e.onnormalized,"every",r.statusBefore))),r),r.smallify=i=>{if("smallified"===r.status||"smallifiedmax"===r.status)return r;if(r.statusBefore=r.status,e.onbeforesmallify&&e.onbeforesmallify.length>0&&!t.processCallbacks(r,e.onbeforesmallify,"some",r.statusBefore))return r;document.dispatchEvent(d),r.style.overflow="hidden";const n=window.getComputedStyle(r),o=parseFloat(window.getComputedStyle(r.headerbar).height);r.style.height=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)+o+"px",B.style.transform="rotate(180deg)","normalized"===r.status?(r.setControls([".jsPanel-btn-normalize"]),r.status="smallified",document.dispatchEvent(f),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every",r.statusBefore)):"maximized"===r.status&&(r.setControls([".jsPanel-btn-maximize"]),r.status="smallifiedmax",document.dispatchEvent(_),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every",r.statusBefore));const s=r.querySelectorAll(".jsPanel-minimized-box");return s[s.length-1].style.display="none",i&&i.call(r,r,r.statusBefore),e.onsmallified&&t.processCallbacks(r,e.onsmallified,"every",r.statusBefore),r},r.unsmallify=i=>{if(r.statusBefore=r.status,"smallified"===r.status||"smallifiedmax"===r.status){if(e.onbeforeunsmallify&&e.onbeforeunsmallify.length>0&&!t.processCallbacks(r,e.onbeforeunsmallify,"some",r.statusBefore))return r;document.dispatchEvent(y),r.style.overflow="visible",r.front(),"smallified"===r.status?(r.style.height=r.currentData.height,r.setControls([".jsPanel-btn-normalize"]),r.status="normalized",document.dispatchEvent(c),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every",r.statusBefore)):"smallifiedmax"===r.status?r.maximize():"minimized"===r.status&&r.normalize(),B.style.transform="rotate(0deg)";const n=r.querySelectorAll(".jsPanel-minimized-box");n[n.length-1].style.display="flex",i&&i.call(r,r,r.statusBefore),e.onunsmallified&&t.processCallbacks(r,e.onunsmallified,"every",r.statusBefore)}return r},r.front=(i,n=!0)=>{if("minimized"===r.status)"maximized"===r.statusBefore?r.maximize():r.normalize();else{const e=Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).map((t=>t.style.zIndex));Math.max(...e)>r.style.zIndex&&(r.style.zIndex=t.zi.next()),t.resetZi()}return document.dispatchEvent(v),i&&i.call(r,r),e.onfronted&&n&&t.processCallbacks(r,e.onfronted,"every",r.status),r},r.snap=(e,i=!1)=>{if(i||(r.currentData.beforeSnap={width:r.currentData.width,height:r.currentData.height}),e&&"function"==typeof e&&!i)e.call(r,r,r.snappableTo);else if(!1!==e){let e=[0,0];if(r.options.dragit.snap.containment&&r.options.dragit.containment){const i=t.pOcontainment(r.options.dragit.containment),n=r.snappableTo;n.startsWith("left")?e[0]=i[3]:n.startsWith("right")&&(e[0]=-i[1]),n.endsWith("top")?e[1]=i[0]:n.endsWith("bottom")&&(e[1]=-i[2])}r.reposition(`${r.snappableTo} ${e[0]} ${e[1]}`)}i||(r.snapped=r.snappableTo)},r.move=(t,e)=>{let i=r.overlaps(t,"paddingbox"),n=r.parentElement;return t.appendChild(r),r.options.container=t,r.style.left=i.left+"px",r.style.top=i.top+"px",r.saveCurrentDimensions(),r.saveCurrentPosition(),r.calcSizeFactors(),e&&e.call(r,r,t,n),r},r.closeChildpanels=t=>(r.getChildpanels().forEach((t=>t.close())),t&&t.call(r,r),r),r.getChildpanels=t=>{const e=r.content.querySelectorAll(".jsPanel");return t&&e.forEach(((e,i,n)=>{t.call(e,e,i,n)})),e},r.isChildpanel=t=>{const e=r.closest(".jsPanel-content"),i=e?e.parentElement:null;return t&&t.call(r,r,i),!!e&&i},r.contentRemove=e=>(t.emptyNode(r.content),e&&e.call(r,r),r),r.createMinimizedReplacement=()=>{const i=t.createMinimizedTemplate(),n=window.getComputedStyle(r.headertitle).color,o=window.getComputedStyle(r),s=e.iconfont,a=i.querySelector(".jsPanel-controlbar");return"auto-show-hide"!==r.options.header?t.setStyle(i,{backgroundColor:o.backgroundColor,backgroundPositionX:o.backgroundPositionX,backgroundPositionY:o.backgroundPositionY,backgroundRepeat:o.backgroundRepeat,backgroundAttachment:o.backgroundAttachment,backgroundImage:o.backgroundImage,backgroundSize:o.backgroundSize,backgroundOrigin:o.backgroundOrigin,backgroundClip:o.backgroundClip}):i.style.backgroundColor=window.getComputedStyle(r.header).backgroundColor,i.id=r.id+"-min",i.querySelector(".jsPanel-headerbar").replaceChild(r.headerlogo.cloneNode(!0),i.querySelector(".jsPanel-headerlogo")),i.querySelector(".jsPanel-titlebar").replaceChild(r.headertitle.cloneNode(!0),i.querySelector(".jsPanel-title")),i.querySelector(".jsPanel-titlebar").setAttribute("title",r.headertitle.textContent),i.querySelector(".jsPanel-title").style.color=n,a.style.color=n,a.querySelectorAll("button").forEach((t=>{t.style.color=n})),["jsPanel-hdr-dark","jsPanel-hdr-light"].forEach((t=>{r.header.classList.contains(t)&&i.querySelector(".jsPanel-hdr").classList.add(t)})),r.setIconfont(s,i),"enabled"===r.dataset.btnnormalize?t.pointerup.forEach((t=>{i.querySelector(".jsPanel-btn-normalize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.normalize()}))})):a.querySelector(".jsPanel-btn-normalize").style.display="none","enabled"===r.dataset.btnmaximize?t.pointerup.forEach((t=>{i.querySelector(".jsPanel-btn-maximize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.maximize()}))})):a.querySelector(".jsPanel-btn-maximize").style.display="none","enabled"===r.dataset.btnclose?t.pointerup.forEach((t=>{i.querySelector(".jsPanel-btn-close").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.close(null,!0)}))})):a.querySelector(".jsPanel-btn-close").style.display="none",i},r.removeMinimizedReplacement=()=>{const t=document.getElementById(`${r.id}-min`);t&&t.parentElement.removeChild(t)},r.drag=(e={})=>{let i,n,o;const s=new CustomEvent("jspaneldragstart",{detail:r.id}),a=new CustomEvent("jspaneldrag",{detail:r.id}),l=new CustomEvent("jspaneldragstop",{detail:r.id});[s,a,l].forEach((t=>{t.panel=r}));const c=t=>{let e=t.split("-");return e.forEach(((t,i)=>{e[i]=t.charAt(0).toUpperCase()+t.slice(1)})),"snap"+e.join("")};function u(e){null===e.relatedTarget&&t.pointermove.forEach((t=>{document.removeEventListener(t,n,!1),r.style.opacity=1}))}let h=e.handles||t.defaults.dragit.handles,m=e.cursor||t.defaults.dragit.cursor;function p(e){if(t.pointermove.forEach((t=>{document.removeEventListener(t,n)})),t.removeSnapAreas(),i){if(r.style.opacity=1,i=void 0,o.snap){switch(r.snappableTo){case"left-top":r.snap(o.snap.snapLeftTop);break;case"center-top":r.snap(o.snap.snapCenterTop);break;case"right-top":r.snap(o.snap.snapRightTop);break;case"right-center":r.snap(o.snap.snapRightCenter);break;case"right-bottom":r.snap(o.snap.snapRightBottom);break;case"center-bottom":r.snap(o.snap.snapCenterBottom);break;case"left-bottom":r.snap(o.snap.snapLeftBottom);break;case"left-center":r.snap(o.snap.snapLeftCenter)}o.snap.callback&&r.snappableTo&&"function"==typeof o.snap.callback&&(o.snap.callback.call(r,r),o.snap.repositionOnSnap&&!1!==o.snap[c(r.snappableTo)]&&r.repositionOnSnap(r.snappableTo)),r.snappableTo&&o.snap.repositionOnSnap&&o.snap[c(r.snappableTo)]&&r.repositionOnSnap(r.snappableTo)}if(r.droppableTo&&r.droppableTo){let t=r.parentElement;r.move(r.droppableTo),o.drop.callback&&o.drop.callback.call(r,r,r.droppableTo,t)}if(document.dispatchEvent(l),o.stop.length){let i=window.getComputedStyle(r),n={left:parseFloat(i.left),top:parseFloat(i.top),width:parseFloat(i.width),height:parseFloat(i.height)};t.processCallbacks(r,o.stop,!1,n,e)}r.saveCurrentPosition(),r.calcSizeFactors()}r.controlbar.style.pointerEvents="inherit",r.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),document.removeEventListener(e,p)}return r.querySelectorAll(h).forEach((l=>{l.style.touchAction="none",l.style.cursor=m,t.pointerdown.forEach((c=>{l.addEventListener(c,(l=>{if(l.button&&l.button>0)return!1;if((o=Object.assign({},t.defaults.dragit,e)).disableOnMaximized&&"maximized"===r.status)return!1;if((o.containment||0===o.containment)&&(o.containment=t.pOcontainment(o.containment)),o.grid&&Array.isArray(o.grid)&&1===o.grid.length&&(o.grid[1]=o.grid[0]),o.snap&&("object"==typeof o.snap?o.snap=Object.assign({},t.defaultSnapConfig,o.snap):o.snap=t.defaultSnapConfig),l.target.closest(".jsPanel-ftr-btn"))return;r.controlbar.style.pointerEvents="none",r.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));let c=window.getComputedStyle(r),h=parseFloat(c.left),m=parseFloat(c.top),p=parseFloat(c.width),d=parseFloat(c.height),f=l.touches?l.touches[0].clientX:l.clientX,_=l.touches?l.touches[0].clientY:l.clientY,y=r.parentElement,v=y.getBoundingClientRect(),g=window.getComputedStyle(y),b=r.getScaleFactor(),x=0,$=t.getScrollbarWidth(y);n=e=>{if(e.preventDefault(),!i){if(document.dispatchEvent(s),r.style.opacity=o.opacity,r.snapped&&o.snap.resizeToPreSnap&&r.currentData.beforeSnap){r.resize(r.currentData.beforeSnap.width+" "+r.currentData.beforeSnap.height),r.setControls([".jsPanel-btn-normalize"]);let t=r.getBoundingClientRect(),e=f-(t.left+t.width),i=t.width/2;e>-i&&(x=e+i)}if(r.front(),r.snapped=!1,"maximized"===r.status&&(r.setControls([".jsPanel-btn-normalize"]),r.status="normalized"),o.drop&&o.drop.dropZones){let e=o.drop.dropZones.map((e=>t.pOcontainer(e))),i=[];e.forEach((function(t){t.length?t.forEach((function(t){i.push(t)})):i.push(t)})),i=i.filter((function(t,e,i){return i.indexOf(t)===e})),o.drop.dropZones=i}o.start.length&&t.processCallbacks(r,o.start,!1,{left:h,top:m,width:p,height:d},e)}let n,l,c,u,A,w,B,C,S,E;i=1;let M,T=e.touches?e.touches[0].clientX:e.clientX,P=e.touches?e.touches[0].clientY:e.clientY,z=window.getComputedStyle(r);if(y===document.body){let t=r.getBoundingClientRect();S=window.innerWidth-parseInt(g.borderLeftWidth,10)-parseInt(g.borderRightWidth,10)-(t.left+t.width),E=window.innerHeight-parseInt(g.borderTopWidth,10)-parseInt(g.borderBottomWidth,10)-(t.top+t.height)}else S=parseInt(g.width,10)-parseInt(g.borderLeftWidth,10)-parseInt(g.borderRightWidth,10)-(parseInt(z.left,10)+parseInt(z.width,10)),E=parseInt(g.height,10)-parseInt(g.borderTopWidth,10)-parseInt(g.borderBottomWidth,10)-(parseInt(z.top,10)+parseInt(z.height,10));n=parseFloat(z.left),c=parseFloat(z.top),A=S,B=E,o.snap&&("panel"===o.snap.trigger?(l=n**2,u=c**2,w=A**2,C=B**2):"pointer"===o.snap.trigger&&("window"===r.options.container?(n=T,l=T**2,u=(c=P)**2,w=(A=window.innerWidth-T)**2,C=(B=window.innerHeight-P)**2):(n=(M=r.overlaps(y,"paddingbox",e)).pointer.left,c=M.pointer.top,A=M.pointer.right,B=M.pointer.bottom,l=M.pointer.left**2,u=M.pointer.top**2,w=M.pointer.right**2,C=M.pointer.bottom**2)));let F=Math.sqrt(l+u),I=Math.sqrt(l+C),k=Math.sqrt(w+u),V=Math.sqrt(w+C),L=Math.abs(n-A)/2,j=Math.abs(c-B)/2,R=Math.sqrt(l+j**2),D=Math.sqrt(u+L**2),O=Math.sqrt(w+j**2),q=Math.sqrt(C+L**2);if(window.getSelection().removeAllRanges(),document.dispatchEvent(a),o.axis&&"x"!==o.axis||(r.style.left=h+(T-f)/b.x+x+"px"),o.axis&&"y"!==o.axis||(r.style.top=m+(P-_)/b.y+"px"),o.grid){let t=o.grid,e=o.axis,i=t[0]*Math.round((h+(T-f))/t[0]),n=t[1]*Math.round((m+(P-_))/t[1]);e&&"x"!==e||(r.style.left=`${i}px`),e&&"y"!==e||(r.style.top=`${n}px`)}if(o.containment||0===o.containment){let t,e,i=o.containment;if("window"===r.options.container)t=window.innerWidth-parseFloat(z.width)-i[1]-$.y,e=window.innerHeight-parseFloat(z.height)-i[2]-$.x;else{let n=parseFloat(g.borderLeftWidth)+parseFloat(g.borderRightWidth),o=parseFloat(g.borderTopWidth)+parseFloat(g.borderBottomWidth);t=v.width/b.x-parseFloat(z.width)-i[1]-n-$.y,e=v.height/b.y-parseFloat(z.height)-i[2]-o-$.x}parseFloat(r.style.left)<=i[3]&&(r.style.left=i[3]+"px"),parseFloat(r.style.top)<=i[0]&&(r.style.top=i[0]+"px"),parseFloat(r.style.left)>=t&&(r.style.left=t+"px"),parseFloat(r.style.top)>=e&&(r.style.top=e+"px")}if(o.drag.length){let i={left:n,top:c,right:A,bottom:B,width:parseFloat(z.width),height:parseFloat(z.height)};t.processCallbacks(r,o.drag,!1,i,e)}if(o.snap){let e=o.snap.sensitivity,i=y===document.body?window.innerWidth/8:v.width/8,s=y===document.body?window.innerHeight/8:v.height/8;r.snappableTo=!1,t.removeSnapAreas(),F<e?!1!==o.snap.snapLeftTop&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.left>0&&M.pointer.top>0?(r.snappableTo="left-top",t.createSnapArea(r,"lt",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="left-top",t.createSnapArea(r,"lt",e))):I<e?!1!==o.snap.snapLeftBottom&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.left>0&&M.pointer.bottom>0?(r.snappableTo="left-bottom",t.createSnapArea(r,"lb",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="left-bottom",t.createSnapArea(r,"lb",e))):k<e?!1!==o.snap.snapRightTop&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.right>0&&M.pointer.top>0?(r.snappableTo="right-top",t.createSnapArea(r,"rt",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="right-top",t.createSnapArea(r,"rt",e))):V<e?!1!==o.snap.snapRightBottom&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.right>0&&M.pointer.bottom>0?(r.snappableTo="right-bottom",t.createSnapArea(r,"rb",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="right-bottom",t.createSnapArea(r,"rb",e))):c<e&&D<i?!1!==o.snap.snapCenterTop&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.top>0?(r.snappableTo="center-top",t.createSnapArea(r,"ct",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="center-top",t.createSnapArea(r,"ct",e))):n<e&&R<s?!1!==o.snap.snapLeftCenter&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.left>0?(r.snappableTo="left-center",t.createSnapArea(r,"lc",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="left-center",t.createSnapArea(r,"lc",e))):A<e&&O<s?!1!==o.snap.snapRightCenter&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.right>0?(r.snappableTo="right-center",t.createSnapArea(r,"rc",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="right-center",t.createSnapArea(r,"rc",e))):B<e&&q<i&&!1!==o.snap.snapCenterBottom&&(o.snap.active&&"both"!==o.snap.active?"pointer"===o.snap.trigger&&o.snap.active&&"inside"===o.snap.active&&(M.pointer.bottom>0?(r.snappableTo="center-bottom",t.createSnapArea(r,"cb",e)):(r.snappableTo=!1,t.removeSnapAreas())):(r.snappableTo="center-bottom",t.createSnapArea(r,"cb",e)))}if(o.drop&&o.drop.dropZones){let i=t.isIE?"msElementsFromPoint":"elementsFromPoint",n=document[i](e.clientX,e.clientY);Array.isArray(n)||(n=Array.prototype.slice.call(n)),o.drop.dropZones.forEach((t=>{n.includes(t)&&(r.droppableTo=t)})),n.includes(r.droppableTo)||(r.droppableTo=!1)}},t.pointermove.forEach((t=>{document.addEventListener(t,n)})),window.addEventListener("mouseout",u,!1)}))})),t.pointerup.forEach((t=>{document.addEventListener(t,p),window.removeEventListener("mouseout",u)})),e.disable&&(l.style.pointerEvents="none")})),r},r.dragit=i=>{const n=Object.assign({},t.defaults.dragit,e.dragit),o=r.querySelectorAll(n.handles);return"disable"===i?o.forEach((t=>{t.style.pointerEvents="none"})):o.forEach((t=>{t.style.pointerEvents="auto"})),r},r.sizeit=(e={})=>{const i=new CustomEvent("jspanelresizestart",{detail:r.id}),n=new CustomEvent("jspanelresize",{detail:r.id}),o=new CustomEvent("jspanelresizestop",{detail:r.id});[i,n,o].forEach((t=>{t.panel=r}));let s,a,l,c,u,h,m={};m.handles=e.handles||t.defaults.resizeit.handles,m.handles.split(",").forEach((t=>{const e=document.createElement("DIV");e.className=`jsPanel-resizeit-handle jsPanel-resizeit-${t.trim()}`,r.append(e)}));let p=!!e.aspectRatio&&e.aspectRatio;function d(e){null===e.relatedTarget&&t.pointermove.forEach((t=>{document.removeEventListener(t,s,!1)}))}function f(e){if(t.pointermove.forEach((t=>{document.removeEventListener(t,s,!1)})),e.target.classList&&e.target.classList.contains("jsPanel-resizeit-handle")){let t,i,n=e.target.className;if(n.match(/jsPanel-resizeit-nw|jsPanel-resizeit-w|jsPanel-resizeit-sw/i)&&(t=!0),n.match(/jsPanel-resizeit-nw|jsPanel-resizeit-n|jsPanel-resizeit-ne/i)&&(i=!0),m.grid&&Array.isArray(m.grid)){1===m.grid.length&&(m.grid[1]=m.grid[0]);const e=parseFloat(r.style.width),n=parseFloat(r.style.height),o=e%m.grid[0],s=n%m.grid[1],a=parseFloat(r.style.left),l=parseFloat(r.style.top),c=a%m.grid[0],u=l%m.grid[1];o<m.grid[0]/2?r.style.width=e-o+"px":r.style.width=e+(m.grid[0]-o)+"px",s<m.grid[1]/2?r.style.height=n-s+"px":r.style.height=n+(m.grid[1]-s)+"px",t&&(c<m.grid[0]/2?r.style.left=a-c+"px":r.style.left=a+(m.grid[0]-c)+"px"),i&&(u<m.grid[1]/2?r.style.top=l-u+"px":r.style.top=l+(m.grid[1]-u)+"px")}}if(a){r.content.style.pointerEvents="inherit",a=void 0,r.saveCurrentDimensions(),r.saveCurrentPosition(),r.calcSizeFactors();let i=r.controlbar.querySelector(".jsPanel-btn-smallify"),n=r.getBoundingClientRect();if(i&&n.height>h+5&&(i.style.transform="rotate(0deg)"),document.dispatchEvent(o),m.stop.length){let i=window.getComputedStyle(r),n={left:parseFloat(i.left),top:parseFloat(i.top),width:parseFloat(i.width),height:parseFloat(i.height)};t.processCallbacks(r,m.stop,!1,n,e)}}r.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),m.aspectRatio=p,document.removeEventListener(e,f)}return r.querySelectorAll(".jsPanel-resizeit-handle").forEach((o=>{o.style.touchAction="none",t.pointerdown.forEach((p=>{o.addEventListener(p,(o=>{if(o.preventDefault(),o.stopPropagation(),o.button&&o.button>0)return!1;let p=1;if(((m=Object.assign({},t.defaults.resizeit,e)).containment||0===m.containment)&&(m.containment=t.pOcontainment(m.containment)),m.aspectRatio&&!0===m.aspectRatio&&(m.aspectRatio="panel"),t.modifier){let e=t.modifier;e.altKey?m.aspectRatio="content":e.ctrlKey?m.aspectRatio="panel":e.shiftKey&&(m.aspectRatio=!1,p=2)}let f="function"==typeof m.maxWidth?m.maxWidth():m.maxWidth||1e4,_="function"==typeof m.maxHeight?m.maxHeight():m.maxHeight||1e4,y="function"==typeof m.minWidth?m.minWidth():m.minWidth,v="function"==typeof m.minHeight?m.minHeight():m.minHeight;r.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));const g=r.parentElement,b=g.tagName.toLowerCase(),x=r.getBoundingClientRect(),$=g.getBoundingClientRect(),A=window.getComputedStyle(g,null),w=parseInt(A.borderLeftWidth,10),B=parseInt(A.borderTopWidth,10),C=A.getPropertyValue("position"),S=o.clientX||0===o.clientX||o.touches[0].clientX,E=o.clientY||0===o.clientY||o.touches[0].clientY,M=S/E,T=o.target.classList,P=r.getScaleFactor(),z=x.width/x.height,F=r.content.getBoundingClientRect(),I=F.width/F.height,k=r.header.getBoundingClientRect().height,V=r.footer.getBoundingClientRect().height||0;let L=x.left,j=x.top,R=1e4,D=1e4,O=1e4,q=1e4;u=x.width,h=x.height,"body"!==b&&(L=x.left-$.left+g.scrollLeft,j=x.top-$.top+g.scrollTop),"body"===b&&m.containment?(R=document.documentElement.clientWidth-x.left,O=document.documentElement.clientHeight-x.top,D=x.width+x.left,q=x.height+x.top):m.containment&&("static"===C?(R=$.width-x.left+w,O=$.height+$.top-x.top+B,D=x.width+(x.left-$.left)-w,q=x.height+(x.top-$.top)-B):(R=g.clientWidth-(x.left-$.left)/P.x+w,O=g.clientHeight-(x.top-$.top)/P.y+B,D=(x.width+x.left-$.left)/P.x-w,q=r.clientHeight+(x.top-$.top)/P.y-B)),m.containment&&(D-=m.containment[3],q-=m.containment[0],R-=m.containment[1],O-=m.containment[2]);const N=window.getComputedStyle(r),U=parseFloat(N.width)-x.width,W=parseFloat(N.height)-x.height;let H=parseFloat(N.left)-x.left,G=parseFloat(N.top)-x.top;g!==document.body&&(H+=$.left,G+=$.top);let Y=parseInt(N.borderTopWidth,10),J=parseInt(N.borderRightWidth,10),Z=parseInt(N.borderBottomWidth,10),X=parseInt(N.borderLeftWidth,10);s=e=>{e.preventDefault(),a||(document.dispatchEvent(i),m.start.length&&t.processCallbacks(r,m.start,!1,{width:u,height:h,left:L,top:j},e),r.front(),x.height>h+5&&(r.status="normalized",r.setControls([".jsPanel-btn-normalize"]))),a=1,document.dispatchEvent(n);let o=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;T.contains("jsPanel-resizeit-e")?((l=u+(o-S)*p/P.x+U)>=R&&(l=R),l>=f&&(l=f),l<=y&&(l=y),r.style.width=l+"px",2===p&&(r.style.left=L-(o-S)+"px"),"content"===m.aspectRatio?(r.style.height=(l-J-X)/I+k+V+Y+Z+"px",m.containment&&r.overlaps(g).bottom<=m.containment[2]&&(r.style.height=O+"px",r.style.width=O*I+"px")):"panel"===m.aspectRatio&&(r.style.height=l/z+"px",m.containment&&r.overlaps(g).bottom<=m.containment[2]&&(r.style.height=O+"px",r.style.width=O*z+"px"))):T.contains("jsPanel-resizeit-s")?((c=h+(s-E)*p/P.y+W)>=O&&(c=O),c>=_&&(c=_),c<=v&&(c=v),r.style.height=c+"px",2===p&&(r.style.top=j-(s-E)+"px"),"content"===m.aspectRatio?(r.style.width=(c-k-V-Y-Z)*I+Y+Z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/I+"px")):"panel"===m.aspectRatio&&(r.style.width=c*z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/z+"px"))):T.contains("jsPanel-resizeit-w")?((l=u+(S-o)*p/P.x+U)<=f&&l>=y&&l<=D&&(r.style.left=L+(o-S)/P.x+H+"px"),l>=D&&(l=D),l>=f&&(l=f),l<=y&&(l=y),r.style.width=l+"px","content"===m.aspectRatio?(r.style.height=(l-J-X)/I+k+V+Y+Z+"px",m.containment&&r.overlaps(g).bottom<=m.containment[2]&&(r.style.height=O+"px",r.style.width=O*I+"px")):"panel"===m.aspectRatio&&(r.style.height=l/z+"px",m.containment&&r.overlaps(g).bottom<=m.containment[2]&&(r.style.height=O+"px",r.style.width=O*z+"px"))):T.contains("jsPanel-resizeit-n")?((c=h+(E-s)*p/P.y+W)<=_&&c>=v&&c<=q&&(r.style.top=j+(s-E)/P.y+G+"px"),c>=q&&(c=q),c>=_&&(c=_),c<=v&&(c=v),r.style.height=c+"px","content"===m.aspectRatio?(r.style.width=(c-k-V-Y-Z)*I+Y+Z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/I+"px")):"panel"===m.aspectRatio&&(r.style.width=c*z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/z+"px"))):T.contains("jsPanel-resizeit-se")?((l=u+(o-S)*p/P.x+U)>=R&&(l=R),l>=f&&(l=f),l<=y&&(l=y),r.style.width=l+"px",2===p&&(r.style.left=L-(o-S)+"px"),m.aspectRatio&&(r.style.height=l/z+"px"),(c=h+(s-E)*p/P.y+W)>=O&&(c=O),c>=_&&(c=_),c<=v&&(c=v),r.style.height=c+"px",2===p&&(r.style.top=j-(s-E)+"px"),"content"===m.aspectRatio?(r.style.width=(c-k-V-Y-Z)*I+Y+Z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/I+"px")):"panel"===m.aspectRatio&&(r.style.width=c*z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/z+"px"))):T.contains("jsPanel-resizeit-sw")?((c=h+(s-E)*p/P.y+W)>=O&&(c=O),c>=_&&(c=_),c<=v&&(c=v),r.style.height=c+"px",2===p&&(r.style.top=j-(s-E)+"px"),m.aspectRatio&&(r.style.width=c*z+"px"),(l=u+(S-o)*p/P.x+U)<=f&&l>=y&&l<=D&&(r.style.left=L+(o-S)/P.x+H+"px"),l>=D&&(l=D),l>=f&&(l=f),l<=y&&(l=y),r.style.width=l+"px","content"===m.aspectRatio?(r.style.height=(l-J-X)/I+k+V+Y+Z+"px",m.containment&&r.overlaps(g).bottom<=m.containment[2]&&(r.style.height=O+"px",r.style.width=O*I+"px")):"panel"===m.aspectRatio&&(r.style.height=l/z+"px",m.containment&&r.overlaps(g).bottom<=m.containment[2]&&(r.style.height=O+"px",r.style.width=O*z+"px"))):T.contains("jsPanel-resizeit-ne")?((l=u+(o-S)*p/P.x+U)>=R&&(l=R),l>=f&&(l=f),l<=y&&(l=y),r.style.width=l+"px",2===p&&(r.style.left=L-(o-S)+"px"),m.aspectRatio&&(r.style.height=l/z+"px"),(c=h+(E-s)*p/P.y+W)<=_&&c>=v&&c<=q&&(r.style.top=j+(s-E)/P.y+G+"px"),c>=q&&(c=q),c>=_&&(c=_),c<=v&&(c=v),r.style.height=c+"px","content"===m.aspectRatio?(r.style.width=(c-k-V-Y-Z)*I+Y+Z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/I+"px")):"panel"===m.aspectRatio&&(r.style.width=c*z+"px",m.containment&&r.overlaps(g).right<=m.containment[1]&&(r.style.width=R+"px",r.style.height=R/z+"px"))):T.contains("jsPanel-resizeit-nw")&&(m.aspectRatio&&T.contains("jsPanel-resizeit-nw")&&(s=(o=s*M)/M),(l=u+(S-o)*p/P.x+U)<=f&&l>=y&&l<=D&&(r.style.left=L+(o-S)/P.x+H+"px"),l>=D&&(l=D),l>=f&&(l=f),l<=y&&(l=y),r.style.width=l+"px",m.aspectRatio&&(r.style.height=l/z+"px"),(c=h+(E-s)*p/P.y+W)<=_&&c>=v&&c<=q&&(r.style.top=j+(s-E)/P.y+G+"px"),c>=q&&(c=q),c>=_&&(c=_),c<=v&&(c=v),r.style.height=c+"px","content"===m.aspectRatio?r.style.width=(c-k-V-Y-Z)*I+Y+Z+"px":"panel"===m.aspectRatio&&(r.style.width=c*z+"px")),window.getSelection().removeAllRanges();const d=window.getComputedStyle(r),b={left:parseFloat(d.left),top:parseFloat(d.top),right:parseFloat(d.right),bottom:parseFloat(d.bottom),width:parseFloat(d.width),height:parseFloat(d.height)};m.resize.length&&t.processCallbacks(r,m.resize,!1,b,e)},t.pointermove.forEach((t=>{document.addEventListener(t,s,!1)})),window.addEventListener("mouseout",d,!1)}))})),t.pointerup.forEach((function(t){document.addEventListener(t,f),window.removeEventListener("mouseout",d)})),e.disable&&(o.style.pointerEvents="none")})),r},r.resizeit=t=>{const e=r.querySelectorAll(".jsPanel-resizeit-handle");return"disable"===t?e.forEach((t=>{t.style.pointerEvents="none"})):e.forEach((t=>{t.style.pointerEvents="auto"})),r},r.getScaleFactor=()=>{const t=r.getBoundingClientRect();return{x:t.width/r.offsetWidth,y:t.height/r.offsetHeight}},r.calcSizeFactors=()=>{const t=window.getComputedStyle(r);if("window"===e.container)r.hf=parseFloat(t.left)/(window.innerWidth-parseFloat(t.width)),r.vf=parseFloat(t.top)/(window.innerHeight-parseFloat(t.height));else if(r.parentElement){let e=r.parentElement.getBoundingClientRect();r.hf=parseFloat(t.left)/(e.width-parseFloat(t.width)),r.vf=parseFloat(t.top)/(e.height-parseFloat(t.height))}},r.saveCurrentDimensions=(t=!1)=>{const e=window.getComputedStyle(r);r.currentData.width=e.width,"normalized"===r.status&&(r.currentData.height=e.height),t&&(r.style.height=e.height)},r.saveCurrentPosition=()=>{const t=window.getComputedStyle(r);r.currentData.left=t.left,r.currentData.top=t.top},r.reposition=(...i)=>{let n,o=e.position,s=!0;return i.forEach((t=>{"string"==typeof t||"object"==typeof t?o=t:"boolean"==typeof t?s=t:"function"==typeof t&&(n=t)})),t.position(r,o),r.slaves&&r.slaves.size>0&&r.slaves.forEach((t=>{t.reposition()})),s&&r.saveCurrentPosition(),n&&n.call(r,r),r},r.repositionOnSnap=i=>{let n="0",o="0",s=t.pOcontainment(e.dragit.containment);if(e.dragit.snap.containment)switch(i){case"left-top":n=s[3],o=s[0];break;case"right-top":n=-s[1],o=s[0];break;case"right-bottom":n=-s[1],o=-s[2];break;case"left-bottom":n=s[3],o=-s[2];break;case"center-top":n=s[3]/2-s[1]/2,o=s[0];break;case"center-bottom":n=s[3]/2-s[1]/2,o=-s[2];break;case"left-center":n=s[3],o=s[0]/2-s[2]/2;break;case"right-center":n=-s[1],o=s[0]/2-s[2]/2}t.position(r,i),t.setStyle(r,{left:`calc(${r.style.left} + ${n}px)`,top:`calc(${r.style.top} + ${o}px)`})},r.overlaps=(t,e,i)=>{let n,o=r.getBoundingClientRect(),s=getComputedStyle(r.parentElement),a=r.getScaleFactor(),l={top:0,right:0,bottom:0,left:0},c=0,u=0,h=0,m=0;"window"!==r.options.container&&"paddingbox"===e&&(l.top=parseInt(s.borderTopWidth,10)*a.y,l.right=parseInt(s.borderRightWidth,10)*a.x,l.bottom=parseInt(s.borderBottomWidth,10)*a.y,l.left=parseInt(s.borderLeftWidth,10)*a.x),n="string"==typeof t?"window"===t?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:"parent"===t?r.parentElement.getBoundingClientRect():document.querySelector(t).getBoundingClientRect():t.getBoundingClientRect(),i&&(c=i.touches?i.touches[0].clientX:i.clientX,u=i.touches?i.touches[0].clientY:i.clientY,h=c-n.left,m=u-n.top);let p=o.left<n.right&&o.right>n.left,d=o.top<n.bottom&&o.bottom>n.top;return{overlaps:p&&d,top:o.top-n.top-l.top,right:n.right-o.right-l.right,bottom:n.bottom-o.bottom-l.bottom,left:o.left-n.left-l.left,parentBorderWidth:l,panelRect:o,referenceRect:n,pointer:{clientX:c,clientY:u,left:h-l.left,top:m-l.top,right:n.width-h-l.right,bottom:n.height-m-l.bottom}}},r.setSize=()=>{if(e.panelSize){const i=t.pOsize(r,e.panelSize);r.style.width=i.width,r.style.height=i.height}else if(e.contentSize){const i=t.pOsize(r,e.contentSize);r.content.style.width=i.width,r.content.style.height=i.height,r.style.width=i.width,r.content.style.width="100%"}return r},r.resize=(...e)=>{let i,n=window.getComputedStyle(r),o={width:n.width,height:n.height},s=!0;e.forEach((t=>{"string"==typeof t?o=t:"object"==typeof t?o=Object.assign(o,t):"boolean"==typeof t?s=t:"function"==typeof t&&(i=t)}));let a=t.pOsize(r,o);r.style.width=a.width,r.style.height=a.height,r.slaves&&r.slaves.size>0&&r.slaves.forEach((t=>{t.reposition()})),s&&r.saveCurrentDimensions(),r.status="normalized";let l=r.controlbar.querySelector(".jsPanel-btn-smallify");return l&&(l.style.transform="rotate(0deg)"),i&&i.call(r,r),r.calcSizeFactors(),r},r.windowResizeHandler=t=>{if(t.target===window){let i,n,o=r.status,s=e.onwindowresize;"maximized"===o&&s?r.maximize(!1,!0):r.snapped&&"minimized"!==o?r.snap(r.snapped,!0):"normalized"===o||"smallified"===o||"maximized"===o?"function"==typeof s?s.call(r,t,r):(i=(window.innerWidth-r.offsetWidth)*r.hf,r.style.left=i<=0?0:i+"px",n=(window.innerHeight-r.offsetHeight)*r.vf,r.style.top=n<=0?0:n+"px"):"smallifiedmax"===o&&s&&r.maximize(!1,!0).smallify(),r.slaves&&r.slaves.size>0&&r.slaves.forEach((t=>{t.reposition()}))}},r.setControls=(t,e)=>(r.header.querySelectorAll(".jsPanel-btn").forEach((t=>{const e=t.className.split("-"),i=e[e.length-1];"hidden"!==r.getAttribute(`data-btn${i}`)&&(t.style.display="block")})),t.forEach((t=>{const e=r.controlbar.querySelector(t);e&&(e.style.display="none")})),e&&e.call(r,r),r),r.setControlStatus=(t,e="enable",i)=>{const n=r.controlbar.querySelector(`.jsPanel-btn-${t}`);switch(e){case"disable":"removed"!==r.getAttribute(`data-btn${t}`)&&(r.setAttribute(`data-btn${t}`,"disabled"),n.style.pointerEvents="none",n.style.opacity=.4,n.style.cursor="default");break;case"hide":"removed"!==r.getAttribute(`data-btn${t}`)&&(r.setAttribute(`data-btn${t}`,"hidden"),n.style.display="none");break;case"show":"removed"!==r.getAttribute(`data-btn${t}`)&&(r.setAttribute(`data-btn${t}`,"enabled"),n.style.display="block",n.style.pointerEvents="auto",n.style.opacity=1,n.style.cursor="pointer");break;case"enable":"removed"!==r.getAttribute(`data-btn${t}`)&&("hidden"===r.getAttribute(`data-btn${t}`)&&(n.style.display="block"),r.setAttribute(`data-btn${t}`,"enabled"),n.style.pointerEvents="auto",n.style.opacity=1,n.style.cursor="pointer");break;case"remove":r.controlbar.removeChild(n),r.setAttribute(`data-btn${t}`,"removed")}return i&&i.call(r,r),r},r.setControlSize=t=>{const e=t.toLowerCase();r.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{["jsPanel-btn-xl","jsPanel-btn-lg","jsPanel-btn-md","jsPanel-btn-sm","jsPanel-btn-xs"].forEach((e=>{t.classList.remove(e)})),t.classList.add(`jsPanel-btn-${e}`)})),"xl"===e?r.titlebar.style.fontSize="1.5rem":"lg"===e?r.titlebar.style.fontSize="1.25rem":"md"===e?r.titlebar.style.fontSize="1.05rem":"sm"===e?r.titlebar.style.fontSize=".9rem":"xs"===e&&(r.titlebar.style.fontSize=".8rem")},r.setHeaderControls=i=>{if(r.options.headerControls.add){let t=r.options.headerControls.add;Array.isArray(t)||(t=[t]),t.forEach((t=>{r.addControl(t)}))}let n=[];r.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{let e=t.className.match(/jsPanel-btn-[a-z0-9]{3,}/i)[0].substring(12);n.push(e)}));const o=t.pOheaderControls(e.headerControls);return e.headerControls=o,n.forEach((t=>{o[t]&&r.setControlStatus(t,o[t])})),r.setControlSize(o.size),i&&i.call(r,r),r},r.setHeaderLogo=(e,i)=>{let n=[r.headerlogo],o=document.querySelector("#"+r.id+"-min");return o&&n.push(o.querySelector(".jsPanel-headerlogo")),"string"==typeof e?"<"!==e.substr(0,1)?n.forEach((i=>{t.emptyNode(i);let n=document.createElement("img");n.src=e,i.append(n)})):n.forEach((t=>{t.innerHTML=e})):n.forEach((i=>{t.emptyNode(i),i.append(e)})),r.headerlogo.childNodes.forEach((t=>{t.nodeName&&"IMG"===t.nodeName&&t.setAttribute("draggable","false")})),i&&i.call(r,r),r},r.setHeaderRemove=t=>(r.removeChild(r.header),r.content.classList.add("jsPanel-content-noheader"),["close","maximize","normalize","minimize","smallify"].forEach((t=>{r.setAttribute(`data-btn${t}`,"removed")})),t&&t.call(r,r),r),r.setHeaderTitle=(e,i)=>{let n=[r.headertitle],o=document.querySelector("#"+r.id+"-min");return o&&n.push(o.querySelector(".jsPanel-title")),"string"==typeof e?n.forEach((t=>{t.innerHTML=e})):"function"==typeof e?n.forEach((i=>{t.emptyNode(i),i.innerHTML=e()})):n.forEach((i=>{t.emptyNode(i),i.append(e)})),i&&i.call(r,r),r},r.setIconfont=(e,i=r,n)=>{if(e){let n,o;if("fa"===e||"far"===e||"fal"===e||"fas"===e||"fad"===e)n=[`${e} fa-window-close`,`${e} fa-window-maximize`,`${e} fa-window-restore`,`${e} fa-window-minimize`,`${e} fa-chevron-up`];else if("material-icons"===e)n=[e,e,e,e,e,e],o=["close","fullscreen","fullscreen_exit","call_received","expand_less"];else if(Array.isArray(e))n=[`custom-control-icon ${e[4]}`,`custom-control-icon ${e[3]}`,`custom-control-icon ${e[2]}`,`custom-control-icon ${e[1]}`,`custom-control-icon ${e[0]}`];else{if("bootstrap"!==e&&"glyphicon"!==e)return i;n=["glyphicon glyphicon-remove","glyphicon glyphicon-fullscreen","glyphicon glyphicon-resize-full","glyphicon glyphicon-minus","glyphicon glyphicon-chevron-up"]}i.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((e=>{t.emptyNode(e).innerHTML="<span></span>"})),Array.prototype.slice.call(i.querySelectorAll(".jsPanel-controlbar .jsPanel-btn > span")).reverse().forEach(((t,i)=>{t.className=n[i],"material-icons"===e&&(t.textContent=o[i])}))}return n&&n.call(i,i),i},r.addToolbar=(t,e,i)=>{if("header"===t?t=r.headertoolbar:"footer"===t&&(t=r.footer),"string"==typeof e)t.innerHTML=e;else if(Array.isArray(e))e.forEach((e=>{"string"==typeof e?t.innerHTML+=e:t.append(e)}));else if("function"==typeof e){let i=e.call(r,r);"string"==typeof i?t.innerHTML=i:t.append(i)}else t.append(e);return t.classList.add("active"),i&&i.call(r,r),r},r.addCloseControl=()=>{let e=document.createElement("button"),i=r.content.style.color;return e.classList.add("jsPanel-addCloseCtrl"),e.innerHTML=t.icons.close,e.style.color=i,r.options.rtl&&e.classList.add("rtl"),r.appendChild(e),t.pointerup.forEach((t=>{e.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;r.close(null,!0)}))})),t.pointerdown.forEach((t=>{e.addEventListener(t,(t=>{t.preventDefault()}))})),r},r.addControl=i=>{if(!i.html)return r;i.position||(i.position=1);const n=r.controlbar.querySelectorAll(".jsPanel-btn").length;let o=document.createElement("button");o.innerHTML=i.html,o.className=`jsPanel-btn jsPanel-btn-${i.name} jsPanel-btn-${e.headerControls.size}`,o.style.color=r.header.style.color,i.position>n?r.controlbar.append(o):r.controlbar.insertBefore(o,r.querySelector(`.jsPanel-controlbar .jsPanel-btn:nth-child(${i.position})`));const s=i.ariaLabel||i.name;return s&&o.setAttribute("aria-label",s),t.pointerup.forEach((t=>{o.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;i.handler.call(r,r,o)}))})),i.afterInsert&&i.afterInsert.call(o,o),r},r.setRtl=()=>{[r.header,r.content,r.footer].forEach((t=>{t.dir="rtl",e.rtl.lang&&(t.lang=e.rtl.lang)}))},r.id=e.id,r.classList.add("jsPanel-"+e.paneltype),"standard"===e.paneltype&&(r.style.zIndex=this.zi.next()),o.append(r),r.front(!1,!1),r.setTheme(e.theme),e.boxShadow&&r.classList.add(`jsPanel-depth-${e.boxShadow}`),e.header){if(e.headerLogo&&r.setHeaderLogo(e.headerLogo),r.setIconfont(e.iconfont),r.setHeaderTitle(e.headerTitle),r.setHeaderControls(),t.isIE){let t=[r.headerbar,r.controlbar];switch(r.options.headerControls.size){case"md":t.forEach((t=>{t.style.height="34px"}));break;case"xs":t.forEach((t=>{t.style.height="26px"}));break;case"sm":t.forEach((t=>{t.style.height="30px"}));break;case"lg":t.forEach((t=>{t.style.height="38px"}));break;case"xl":t.forEach((t=>{t.style.height="42px"}))}}if("auto-show-hide"===e.header){let i="jsPanel-depth-"+e.boxShadow;r.header.style.opacity=0,r.style.backgroundColor="transparent",this.remClass(r,i),this.setClass(r.content,i),r.header.addEventListener("mouseenter",(()=>{r.header.style.opacity=1,t.setClass(r,i),t.remClass(r.content,i)})),r.header.addEventListener("mouseleave",(()=>{r.header.style.opacity=0,t.remClass(r,i),t.setClass(r.content,i)}))}}else r.setHeaderRemove(),e.addCloseControl&&r.addCloseControl();if(e.headerToolbar&&r.addToolbar(r.headertoolbar,e.headerToolbar),e.footerToolbar&&r.addToolbar(r.footer,e.footerToolbar),e.border&&r.setBorder(e.border),e.borderRadius&&r.setBorderRadius(e.borderRadius),e.content&&("function"==typeof e.content?e.content.call(r,r):"string"==typeof e.content?r.content.innerHTML=e.content:r.content.append(e.content)),e.contentAjax&&this.ajax(e.contentAjax,r),e.contentFetch&&this.fetch(e.contentFetch,r),e.contentOverflow){const t=e.contentOverflow.split(" ");1===t.length?r.content.style.overflow=t[0]:2===t.length&&(r.content.style.overflowX=t[0],r.content.style.overflowY=t[1])}if(e.autoclose){"number"==typeof e.autoclose?e.autoclose={time:e.autoclose+"ms"}:"string"==typeof e.autoclose&&(e.autoclose={time:e.autoclose});let i=Object.assign({},t.defaultAutocloseConfig,e.autoclose);i.time&&"number"==typeof i.time&&(i.time+="ms");let n=r.progressbar.querySelector("div");n.addEventListener("animationend",(t=>{t.stopPropagation(),r.progressbar.classList.remove("active"),r.close()})),i.progressbar&&(r.progressbar.classList.add("active"),i.background?t.themes.indexOf(i.background)>-1?r.progressbar.classList.add(i.background+"-bg"):t.colorNames[i.background]?r.progressbar.style.background="#"+t.colorNames[i.background]:r.progressbar.style.background=i.background:r.progressbar.classList.add("success-bg")),n.style.animation=`${i.time} progressbar`}if(e.rtl&&r.setRtl(),r.setSize(),r.status="normalized",e.position?this.position(r,e.position):r.style.opacity=1,document.dispatchEvent(c),r.calcSizeFactors(),e.animateIn&&(r.addEventListener("animationend",(()=>{this.remClass(r,e.animateIn)})),this.setClass(r,e.animateIn)),e.syncMargins){let i=this.pOcontainment(e.maximizedMargin);e.dragit&&(e.dragit.containment=i,!0===e.dragit.snap?(e.dragit.snap=t.defaultSnapConfig,e.dragit.snap.containment=!0):e.dragit.snap&&(e.dragit.snap.containment=!0)),e.resizeit&&(e.resizeit.containment=i)}if(e.dragit?(["start","drag","stop"].forEach((t=>{e.dragit[t]?"function"==typeof e.dragit[t]&&(e.dragit[t]=[e.dragit[t]]):e.dragit[t]=[]})),r.drag(e.dragit),r.addEventListener("jspaneldragstop",(t=>{t.panel===r&&r.calcSizeFactors()}),!1)):r.titlebar.style.cursor="default",e.resizeit){let i;["start","resize","stop"].forEach((t=>{e.resizeit[t]?"function"==typeof e.resizeit[t]&&(e.resizeit[t]=[e.resizeit[t]]):e.resizeit[t]=[]})),r.sizeit(e.resizeit),r.addEventListener("jspanelresizestart",(t=>{t.panel===r&&(i=r.status)}),!1),r.addEventListener("jspanelresizestop",(n=>{n.panel===r&&("smallified"===i||"smallifiedmax"===i||"maximized"===i)&&parseFloat(r.style.height)>parseFloat(window.getComputedStyle(r.header).height)&&(r.setControls([".jsPanel-btn-normalize"]),r.status="normalized",document.dispatchEvent(c),document.dispatchEvent(a),e.onstatuschange&&t.processCallbacks(r,e.onstatuschange,"every"),r.calcSizeFactors())}),!1)}if(r.saveCurrentDimensions(!0),r.saveCurrentPosition(),e.setStatus&&("smallifiedmax"===e.setStatus?r.maximize().smallify():"smallified"===e.setStatus?r.smallify():r[e.setStatus.substr(0,e.setStatus.length-1)]()),this.pointerdown.forEach((t=>{r.addEventListener(t,(t=>{t.target.closest(".jsPanel-btn-close")||t.target.closest(".jsPanel-btn-minimize")||"standard"!==e.paneltype||r.front()}),!1)})),e.onwindowresize&&"window"===r.options.container&&window.addEventListener("resize",r.windowResizeHandler,!1),e.onparentresize){let t=e.onparentresize,i=r.isChildpanel();if(i){const e=i.content;let n=[];r.parentResizeHandler=o=>{if(o.panel===i){n[0]=e.offsetWidth,n[1]=e.offsetHeight;let i,o,s=r.status;"maximized"===s&&t?r.maximize():r.snapped&&"minimized"!==s?r.snap(r.snapped,!0):"normalized"===s||"smallified"===s||"maximized"===s?"function"==typeof t?t.call(r,r,{width:n[0],height:n[1]}):(i=(n[0]-r.offsetWidth)*r.hf,r.style.left=i<=0?0:i+"px",o=(n[1]-r.offsetHeight)*r.vf,r.style.top=o<=0?0:o+"px"):"smallifiedmax"===s&&t&&r.maximize().smallify()}},document.addEventListener("jspanelresize",r.parentResizeHandler,!1)}}return this.globalCallbacks&&(Array.isArray(this.globalCallbacks)?this.globalCallbacks.forEach((t=>{t.call(r,r)})):this.globalCallbacks.call(r,r)),e.callback&&(Array.isArray(e.callback)?e.callback.forEach((t=>{t.call(r,r)})):e.callback.call(r,r)),i&&i.call(r,r),document.dispatchEvent(s),r}};
/**
 * @license AngularJS v1.8.2
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */!function(t){var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function i(t){if(!D(t))return e;R(t.objectMaxDepth)&&(e.objectMaxDepth=n(t.objectMaxDepth)?t.objectMaxDepth:NaN),R(t.urlErrorParamsEnabled)&&X(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function n(t){return N(t)&&t>0}function o(t,i){i=i||Error;var n="https://errors.angularjs.org/1.8.2/",o=n.replace(".","\\.")+"[\\s\\S]*",r=new RegExp(o,"g");return function(){var o,s,a=arguments[0],l=arguments[1],c="["+(t?t+":":"")+a+"] ",u=mt(arguments,2).map((function(t){return Ut(t,e.objectMaxDepth)}));if(c+=l.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<u.length?u[e].replace(r,""):t})),c+="\n"+n+(t?t+"/":"")+a,e.urlErrorParamsEnabled)for(s=0,o="?";s<u.length;s++,o="&")c+=o+"p"+s+"="+encodeURIComponent(u[s]);return new i(c)}}var r,s,a,l,c=/^\/(.+)\/([a-z]*)$/,u="validity",h=Object.prototype.hasOwnProperty,m=function(t){return q(t)?t.toLowerCase():t},p=function(t){return q(t)?t.toUpperCase():t},d=[].slice,f=[].splice,_=[].push,y=Object.prototype.toString,v=Object.getPrototypeOf,g=o("ng"),b=t.angular||(t.angular={}),x=0;function $(t){if(null==t||J(t))return!1;if(W(t)||q(t)||s&&t instanceof s)return!0;var e="length"in Object(t)&&t.length;return N(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function A(t,e,i){var n,o;if(t)if(G(t))for(n in t)"prototype"!==n&&"length"!==n&&"name"!==n&&t.hasOwnProperty(n)&&e.call(i,t[n],n,t);else if(W(t)||$(t)){var r="object"!=typeof t;for(n=0,o=t.length;n<o;n++)(r||n in t)&&e.call(i,t[n],n,t)}else if(t.forEach&&t.forEach!==A)t.forEach(e,i,t);else if(O(t))for(n in t)e.call(i,t[n],n,t);else if("function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t);else for(n in t)h.call(t,n)&&e.call(i,t[n],n,t);return t}function w(t,e,i){for(var n=Object.keys(t).sort(),o=0;o<n.length;o++)e.call(i,t[n[o]],n[o]);return n}function B(t){return function(e,i){t(i,e)}}function C(){return++x}function S(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,i){for(var n=t.$$hashKey,o=0,r=e.length;o<r;++o){var s=e[o];if(D(s)||G(s))for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l],h=s[u];i&&D(h)?U(h)?t[u]=new Date(h.valueOf()):Y(h)?t[u]=new RegExp(h):h.nodeName?t[u]=h.cloneNode(!0):it(h)?t[u]=h.clone():"__proto__"!==u&&(D(t[u])||(t[u]=W(h)?[]:{}),E(t[u],[h],!0)):t[u]=h}}return S(t,n),t}function M(t){return E(t,d.call(arguments,1),!1)}function T(t){return E(t,d.call(arguments,1),!0)}function P(t){return parseInt(t,10)}r=t.document.documentMode;var z=Number.isNaN||function(t){return t!=t};function F(t,e){return M(Object.create(t),e)}function I(){}function k(t){return t}function V(t){return function(){return t}}function L(t){return G(t.toString)&&t.toString!==y}function j(t){return void 0===t}function R(t){return void 0!==t}function D(t){return null!==t&&"object"==typeof t}function O(t){return null!==t&&"object"==typeof t&&!v(t)}function q(t){return"string"==typeof t}function N(t){return"number"==typeof t}function U(t){return"[object Date]"===y.call(t)}function W(t){return Array.isArray(t)||t instanceof Array}function H(t){switch(y.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function Y(t){return"[object RegExp]"===y.call(t)}function J(t){return t&&t.window===t}function Z(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function K(t){return t&&G(t.then)}I.$inject=[],k.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return q(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function it(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function nt(t){return m(t.nodeName||t[0]&&t[0].nodeName)}function ot(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function rt(t,e){var i=t.indexOf(e);return i>=0&&t.splice(i,1),i}function st(t,e,i){var o,r,s=[],a=[];if(i=n(i)?i:NaN,e){if((r=e)&&N(r.length)&&Q.test(y.call(r))||(o=e,"[object ArrayBuffer]"===y.call(o)))throw g("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw g("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:A(e,(function(t,i){"$$hashKey"!==i&&delete e[i]})),s.push(t),a.push(e),l(t,e,i)}return c(t,i);function l(t,e,i){if(--i<0)return"...";var n,o=e.$$hashKey;if(W(t))for(var r=0,s=t.length;r<s;r++)e.push(c(t[r],i));else if(O(t))for(n in t)e[n]=c(t[n],i);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=c(t[n],i));else for(n in t)h.call(t,n)&&(e[n]=c(t[n],i));return S(e,o),e}function c(t,e){if(!D(t))return t;var i=s.indexOf(t);if(-1!==i)return a[i];if(J(t)||Z(t))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,o=function(t){switch(y.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(c(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var i=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return i.lastIndex=t.lastIndex,i;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===o&&(o=W(t)?[]:Object.create(v(t)),n=!0),s.push(t),a.push(o),n?l(t,o,e):o}}function at(t,e){return t===e||t!=t&&e!=e}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var i,n,o,r=typeof t;if(r===typeof e&&"object"===r){if(!W(t)){if(U(t))return!!U(e)&&at(t.getTime(),e.getTime());if(Y(t))return!!Y(e)&&t.toString()===e.toString();if(Z(t)||Z(e)||J(t)||J(e)||W(e)||U(e)||Y(e))return!1;for(n in o=Dt(),t)if("$"!==n.charAt(0)&&!G(t[n])){if(!lt(t[n],e[n]))return!1;o[n]=!0}for(n in e)if(!(n in o)&&"$"!==n.charAt(0)&&R(e[n])&&!G(e[n]))return!1;return!0}if(!W(e))return!1;if((i=t.length)===e.length){for(n=0;n<i;n++)if(!lt(t[n],e[n]))return!1;return!0}}return!1}var ct=function(){if(!R(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var i=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!i||-1!==i.indexOf("no-unsafe-eval"),noInlineStyle:!i||-1!==i.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},ut=function(){if(R(ut.name_))return ut.name_;var e,i,n,o,r=Ct.length;for(i=0;i<r;++i)if(n=Ct[i],e=t.document.querySelector("["+n.replace(":","\\:")+"jq]")){o=e.getAttribute(n+"jq");break}return ut.name_=o};function ht(t,e,i){return t.concat(d.call(e,i))}function mt(t,e){return d.call(t,e||0)}function pt(t,e){var i=arguments.length>2?mt(arguments,2):[];return!G(e)||e instanceof RegExp?e:i.length?function(){return arguments.length?e.apply(t,ht(i,arguments,0)):e.apply(t,i)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,i){var n=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:J(i)?n="$WINDOW":i&&t.document===i?n="$DOCUMENT":Z(i)&&(n="$SCOPE"),n}function ft(t,e){if(!j(t))return N(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function _t(t){return q(t)?JSON.parse(t):t}var yt=/:/g;function vt(t,e){t=t.replace(yt,"");var i=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return z(i)?e:i}function gt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,i){i=i?-1:1;var n=t.getTimezoneOffset();return gt(t,i*(vt(e,n)-n))}function xt(t){t=s(t).clone().empty();var e=s("<div></div>").append(t).html();try{return t[0].nodeType===qt?m(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+m(e)}))}catch(i){return m(e)}}function $t(t){try{return decodeURIComponent(t)}catch(e){}}function At(t){var e={};return A((t||"").split("&"),(function(t){var i,n,o;t&&(n=t=t.replace(/\+/g,"%20"),-1!==(i=t.indexOf("="))&&(n=t.substring(0,i),o=t.substring(i+1)),R(n=$t(n))&&(o=!R(o)||$t(o),h.call(e,n)?W(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o))})),e}function wt(t){return Bt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Bt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Ct=["ng-","data-ng-","ng:","x-ng-"];var St=function(e){var i=e.currentScript;if(!i)return!0;if(!(i instanceof t.HTMLScriptElement||i instanceof t.SVGScriptElement))return!1;var n=i.attributes;return[n.getNamedItem("src"),n.getNamedItem("href"),n.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var i=e.createElement("a");if(i.href=t.value,e.location.origin===i.origin)return!0;switch(i.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Et(e,i){var n,o,r={};if(A(Ct,(function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,o=e.getAttribute(i))})),A(Ct,(function(t){var i,r=t+"app";!n&&(i=e.querySelector("["+r.replace(":","\\:")+"]"))&&(n=i,o=i.getAttribute(r))})),n){if(!St)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");r.strictDi=null!==function(t,e){var i,n,o=Ct.length;for(n=0;n<o;++n)if(i=Ct[n]+e,q(i=t.getAttribute(i)))return i;return null}(n,"strict-di"),i(n,o?[o]:[],r)}}function Mt(e,i,n){D(n)||(n={});n=M({strictDi:!1},n);var o=function(){if((e=s(e)).injector()){var o=e[0]===t.document?"document":xt(e);throw g("btstrpd","App already bootstrapped with this element '{0}'",o.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),n.debugInfoEnabled&&i.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),i.unshift("ng");var r=Ke(i,n.strictDi);return r.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,i,n){t.$apply((function(){e.data("$injector",n),i(e)(t)}))}]),r},r=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&r.test(t.name)&&(n.debugInfoEnabled=!0,t.name=t.name.replace(r,"")),t&&!a.test(t.name))return o();t.name=t.name.replace(a,""),b.resumeBootstrap=function(t){return A(t,(function(t){i.push(t)})),o()},G(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Tt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Pt(t){var e=b.element(t).injector();if(!e)throw g("test","no injector found for element argument to getTestability");return e.get("$$testability")}var zt=/[A-Z]/g;function Ft(t,e){return e=e||"_",t.replace(zt,(function(t,i){return(i?e:"")+t.toLowerCase()}))}var It=!1;function kt(){pe.legacyXHTMLReplacement=!0}function Vt(t,e,i){if(!t)throw g("areq","Argument '{0}' is {1}",e||"?",i||"required");return t}function Lt(t,e,i){return i&&W(t)&&(t=t[t.length-1]),Vt(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function jt(t,e){if("hasOwnProperty"===t)throw g("badname","hasOwnProperty is not a valid {0} name",e)}function Rt(t){for(var e,i=t[0],n=t[t.length-1],o=1;i!==n&&(i=i.nextSibling);o++)(e||t[o]!==i)&&(e||(e=s(d.call(t,0,o))),e.push(i));return e||t}function Dt(){return Object.create(null)}function Ot(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!L(t)||W(t)||U(t)?ft(t):t.toString()}return t}var qt=3;function Nt(t,e){if(W(t)){e=e||[];for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}else if(D(t))for(var o in e=e||{},t)"$"===o.charAt(0)&&"$"===o.charAt(1)||(e[o]=t[o]);return e||t}function Ut(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):j(t)?"undefined":"string"!=typeof t?function(t,e){var i=[];return n(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(D(e=dt(t,e))){if(i.indexOf(e)>=0)return"...";i.push(e)}return e}))}(t,e):t}var Wt={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};pe.expando="ng339";var Ht=pe.cache={},Gt=1;pe._data=function(t){return this.cache[t[this.expando]]||{}};var Yt=/-([a-z])/g,Jt=/^-ms-/,Zt={mouseleave:"mouseout",mouseenter:"mouseover"},Xt=o("jqLite");function Kt(t,e){return e.toUpperCase()}function Qt(t){return t.replace(Yt,Kt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ie=/<([\w:-]+)/,ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,oe={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};oe.tbody=oe.tfoot=oe.colgroup=oe.caption=oe.thead,oe.th=oe.td;var re={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var se in oe){var ae=oe[se],le=ae.slice().reverse();re[se]=[le.length,"<"+le.join("><")+">","</"+ae.join("></")+">"]}function ce(t){return!ee.test(t)}function ue(t){var e=t.nodeType;return 1===e||!e||9===e}function he(e,i){var n,o,s,a,l,c=i.createDocumentFragment(),u=[];if(ce(e))u.push(i.createTextNode(e));else{if(n=c.appendChild(i.createElement("div")),o=(ie.exec(e)||["",""])[1].toLowerCase(),a=pe.legacyXHTMLReplacement?e.replace(ne,"<$1></$2>"):e,r<10)for(s=re[o]||re._default,n.innerHTML=s[1]+a+s[2],l=s[0];l--;)n=n.firstChild;else{for(l=(s=oe[o]||[]).length;--l>-1;)n.appendChild(t.document.createElement(s[l])),n=n.firstChild;n.innerHTML=a}u=ht(u,n.childNodes),(n=c.firstChild).textContent=""}return c.textContent="",c.innerHTML="",A(u,(function(t){c.appendChild(t)})),c}re.optgroup=re.option;var me=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function pe(e){if(e instanceof pe)return e;var i,n,o,r;if(q(e)&&(e=tt(e),i=!0),!(this instanceof pe)){if(i&&"<"!==e.charAt(0))throw Xt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pe(e)}i?Be(this,(n=e,o=o||t.document,(r=te.exec(n))?[o.createElement(r[1])]:(r=he(n,o))?r.childNodes:[])):G(e)?Te(e):Be(this,e)}function de(t){return t.cloneNode(!0)}function fe(t,e){!e&&ue(t)&&s.cleanData([t]),t.querySelectorAll&&s.cleanData(t.querySelectorAll("*"))}function _e(t){var e;for(e in t)return!1;return!0}function ye(t){var e=t.ng339,i=e&&Ht[e],n=i&&i.events,o=i&&i.data;o&&!_e(o)||n&&!_e(n)||(delete Ht[e],t.ng339=void 0)}function ve(t,e,i,n){if(R(n))throw Xt("offargs","jqLite#off() does not support the `selector` argument");var o=be(t),r=o&&o.events,s=o&&o.handle;if(s){if(e){var a=function(e){var n=r[e];R(i)&&rt(n||[],i),R(i)&&n&&n.length>0||(t.removeEventListener(e,s),delete r[e])};A(e.split(" "),(function(t){a(t),Zt[t]&&a(Zt[t])}))}else for(e in r)"$destroy"!==e&&t.removeEventListener(e,s),delete r[e];ye(t)}}function ge(t,e){var i=t.ng339,n=i&&Ht[i];n&&(e?delete n.data[e]:n.data={},ye(t))}function be(t,e){var i=t.ng339,n=i&&Ht[i];return e&&!n&&(t.ng339=i=++Gt,n=Ht[i]={events:{},data:{},handle:void 0}),n}function xe(t,e,i){if(ue(t)){var n,o=R(i),r=!o&&e&&!D(e),s=!e,a=be(t,!r),l=a&&a.data;if(o)l[Qt(e)]=i;else{if(s)return l;if(r)return l&&l[Qt(e)];for(n in e)l[Qt(n)]=e[n]}}}function $e(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Ae(t,e){if(e&&t.setAttribute){var i=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),n=i;A(e.split(" "),(function(t){t=tt(t),n=n.replace(" "+t+" "," ")})),n!==i&&t.setAttribute("class",tt(n))}}function we(t,e){if(e&&t.setAttribute){var i=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),n=i;A(e.split(" "),(function(t){t=tt(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")})),n!==i&&t.setAttribute("class",tt(n))}}function Be(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var i=e.length;if("number"==typeof i&&e.window!==e){if(i)for(var n=0;n<i;n++)t[t.length++]=e[n]}else t[t.length++]=e}}function Ce(t,e){return Se(t,"$"+(e||"ngController")+"Controller")}function Se(t,e,i){9===t.nodeType&&(t=t.documentElement);for(var n=W(e)?e:[e];t;){for(var o=0,r=n.length;o<r;o++)if(R(i=s.data(t,n[o])))return i;t=t.parentNode||11===t.nodeType&&t.host}}function Ee(t){for(fe(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Me(t,e){e||fe(t);var i=t.parentNode;i&&i.removeChild(t)}function Te(e){function i(){t.document.removeEventListener("DOMContentLoaded",i),t.removeEventListener("load",i),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",i),t.addEventListener("load",i))}var Pe=pe.prototype={ready:Te,toString:function(){var t=[];return A(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return s(t>=0?this[t]:this[this.length+t])},length:0,push:_,sort:[].sort,splice:[].splice},ze={};A("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){ze[m(t)]=t}));var Fe={};A("input,select,option,textarea,button,form,details".split(","),(function(t){Fe[t]=!0}));var Ie={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function ke(t,e){var i=ze[e.toLowerCase()];return i&&Fe[nt(t)]&&i}function Ve(t,e,i){i.call(t,e)}function Le(t,e,i){var n=e.relatedTarget;n&&(n===t||me.call(t,n))||i.call(t,e)}function je(){this.$get=function(){return M(pe,{hasClass:function(t,e){return t.attr&&(t=t[0]),$e(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Ae(t,e)}})}}function Re(t,e){var i=t&&t.$$hashKey;if(i)return"function"==typeof i&&(i=t.$$hashKey()),i;var n=typeof t;return i="function"===n||"object"===n&&null!==t?t.$$hashKey=n+":"+(e||C)():n+":"+t}A({data:xe,removeData:ge,hasData:function(t){for(var e in Ht[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,i=t.length;e<i;e++)ge(t[e]),ve(t[e])}},(function(t,e){pe[e]=t})),A({data:xe,inheritedData:Se,scope:function(t){return s.data(t,"$scope")||Se(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return s.data(t,"$isolateScope")||s.data(t,"$isolateScopeNoTemplate")},controller:Ce,injector:function(t){return Se(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:$e,css:function(t,e,i){if(e=function(t){return Qt(t.replace(Jt,"ms-"))}(e),!R(i))return t.style[e];t.style[e]=i},attr:function(t,e,i){var n,o=t.nodeType;if(o!==qt&&2!==o&&8!==o&&t.getAttribute){var r=m(e),s=ze[r];if(!R(i))return n=t.getAttribute(e),s&&null!==n&&(n=r),null===n?void 0:n;null===i||!1===i&&s?t.removeAttribute(e):t.setAttribute(e,s?r:i)}},prop:function(t,e,i){if(!R(i))return t[e];t[e]=i},text:function(){return t.$dv="",t;function t(t,e){if(j(e)){var i=t.nodeType;return 1===i||i===qt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(j(e)){if(t.multiple&&"select"===nt(t)){var i=[];return A(t.options,(function(t){t.selected&&i.push(t.value||t.text)})),i}return t.value}t.value=e},html:function(t,e){if(j(e))return t.innerHTML;fe(t,!0),t.innerHTML=e},empty:Ee},(function(t,e){pe.prototype[e]=function(e,i){var n,o,r=this.length;if(t!==Ee&&j(2===t.length&&t!==$e&&t!==Ce?e:i)){if(D(e)){for(n=0;n<r;n++)if(t===xe)t(this[n],e);else for(o in e)t(this[n],o,e[o]);return this}for(var s=t.$dv,a=j(s)?Math.min(r,1):r,l=0;l<a;l++){var c=t(this[l],e,i);s=s?s+c:c}return s}for(n=0;n<r;n++)t(this[n],e,i);return this}})),A({removeData:ge,on:function(t,e,i,n){if(R(n))throw Xt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ue(t)){var o=be(t,!0),r=o.events,s=o.handle;s||(s=o.handle=function(t,e){var i=function(i,n){i.isDefaultPrevented=function(){return i.defaultPrevented};var o=e[n||i.type],r=o?o.length:0;if(r){if(j(i.immediatePropagationStopped)){var s=i.stopImmediatePropagation;i.stopImmediatePropagation=function(){i.immediatePropagationStopped=!0,i.stopPropagation&&i.stopPropagation(),s&&s.call(i)}}i.isImmediatePropagationStopped=function(){return!0===i.immediatePropagationStopped};var a=o.specialHandlerWrapper||Ve;r>1&&(o=Nt(o));for(var l=0;l<r;l++)i.isImmediatePropagationStopped()||a(t,i,o[l])}};return i.elem=t,i}(t,r));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],l=a.length,c=function(e,n,o){var a=r[e];a||((a=r[e]=[]).specialHandlerWrapper=n,"$destroy"===e||o||t.addEventListener(e,s)),a.push(i)};l--;)e=a[l],Zt[e]?(c(Zt[e],Le),c(e,void 0,!0)):c(e)}},off:ve,one:function(t,e,i){(t=s(t)).on(e,(function n(){t.off(e,i),t.off(e,n)})),t.on(e,i)},replaceWith:function(t,e){var i,n=t.parentNode;fe(t),A(new pe(e),(function(e){i?n.insertBefore(e,i.nextSibling):n.replaceChild(e,t),i=e}))},children:function(t){var e=[];return A(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var i=t.nodeType;if(1===i||11===i)for(var n=0,o=(e=new pe(e)).length;n<o;n++){var r=e[n];t.appendChild(r)}},prepend:function(t,e){if(1===t.nodeType){var i=t.firstChild;A(new pe(e),(function(e){t.insertBefore(e,i)}))}},wrap:function(t,e){var i,n,o;i=t,n=s(e).eq(0).clone()[0],(o=i.parentNode)&&o.replaceChild(n,i),n.appendChild(i)},remove:Me,detach:function(t){Me(t,!0)},after:function(t,e){var i=t,n=t.parentNode;if(n)for(var o=0,r=(e=new pe(e)).length;o<r;o++){var s=e[o];n.insertBefore(s,i.nextSibling),i=s}},addClass:we,removeClass:Ae,toggleClass:function(t,e,i){e&&A(e.split(" "),(function(e){var n=i;j(n)&&(n=!$e(t,e)),(n?we:Ae)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,i){var n,o,r,s=e.type||e,a=be(t),l=a&&a.events,c=l&&l[s];c&&(n={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:s,target:t},e.type&&(n=M(n,e)),o=Nt(c),r=i?[n].concat(i):[n],A(o,(function(e){n.isImmediatePropagationStopped()||e.apply(t,r)})))}},(function(t,e){pe.prototype[e]=function(e,i,n){for(var o,r=0,a=this.length;r<a;r++)j(o)?R(o=t(this[r],e,i,n))&&(o=s(o)):Be(o,t(this[r],e,i,n));return R(o)?o:this}})),pe.prototype.bind=pe.prototype.on,pe.prototype.unbind=pe.prototype.off;var De=Object.create(null);function Oe(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Oe.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return z(t)?De:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var i=this._idx(t);-1===i&&(i=this._lastIndex=this._keys.length),this._keys[i]=t,this._values[i]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var qe=Oe,Ne=[function(){this.$get=[function(){return qe}]}],Ue=/^([^(]+?)=>/,We=/^[^(]*\(\s*([^)]*)\)/m,He=/,/,Ge=/^\s*(_?)(\S+?)\1\s*$/,Ye=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Je=o("$injector");function Ze(t){return Function.prototype.toString.call(t)}function Xe(t){var e=Ze(t).replace(Ye,"");return e.match(Ue)||e.match(We)}function Ke(t,e){e=!0===e;var i={},n="Provider",o=[],s=new qe,a={$provide:{provider:d(f),factory:d(y),service:d((function(t,e){return y(t,["$injector",function(t){return t.instantiate(e)}])})),value:d((function(t,e){return y(t,V(e),!1)})),constant:d((function(t,e){jt(t,"constant"),a[t]=e,u[t]=e})),decorator:function(t,e){var i=c.get(t+n),o=i.$get;i.$get=function(){var t=m.invoke(o,i);return m.invoke(e,null,{$delegate:t})}}}},c=a.$injector=g(a,(function(t,e){throw b.isString(e)&&o.push(e),Je("unpr","Unknown provider: {0}",o.join(" <- "))})),u={},h=g(u,(function(t,e){var i=c.get(t+n,e);return m.invoke(i.$get,i,void 0,t)})),m=h;a.$injectorProvider={$get:V(h)},m.modules=c.modules=Dt();var p=v(t);return(m=h.get("$injector")).strictDi=e,A(p,(function(t){t&&m.invoke(t)})),m.loadNewModules=function(t){A(v(t),(function(t){t&&m.invoke(t)}))},m;function d(t){return function(e,i){if(!D(e))return t(e,i);A(e,B(t))}}function f(t,e){if(jt(t,"service"),(G(e)||W(e))&&(e=c.instantiate(e)),!e.$get)throw Je("pget","Provider '{0}' must define $get factory method.",t);return a[t+n]=e}function _(t,e){return function(){var i=m.invoke(e,this);if(j(i))throw Je("undef","Provider '{0}' must return a value from $get factory method.",t);return i}}function y(t,e,i){return f(t,{$get:!1!==i?_(t,e):e})}function v(t){Vt(j(t)||W(t),"modulesToLoad","not an array");var e,i=[];return A(t,(function(t){if(!s.get(t)){s.set(t,!0);try{q(t)?(e=l(t),m.modules[t]=e,i=i.concat(v(e.requires)).concat(e._runBlocks),n(e._invokeQueue),n(e._configBlocks)):G(t)||W(t)?i.push(c.invoke(t)):Lt(t,"module")}catch(o){throw W(t)&&(t=t[t.length-1]),o.message&&o.stack&&-1===o.stack.indexOf(o.message)&&(o=o.message+"\n"+o.stack),Je("modulerr","Failed to instantiate module {0} due to:\n{1}",t,o.stack||o.message||o)}}function n(t){var e,i;for(e=0,i=t.length;e<i;e++){var n=t[e],o=c.get(n[0]);o[n[1]].apply(o,n[2])}}})),i}function g(t,s){function l(e,n){if(t.hasOwnProperty(e)){if(t[e]===i)throw Je("cdep","Circular dependency found: {0}",e+" <- "+o.join(" <- "));return t[e]}try{return o.unshift(e),t[e]=i,t[e]=s(e,n),t[e]}catch(r){throw t[e]===i&&delete t[e],r}finally{o.shift()}}function c(t,i,n){for(var o=[],r=Ke.$$annotate(t,e,n),s=0,a=r.length;s<a;s++){var c=r[s];if("string"!=typeof c)throw Je("itkn","Incorrect injection token! Expected service name as string, got {0}",c);o.push(i&&i.hasOwnProperty(c)?i[c]:l(c,n))}return o}return{invoke:function(t,e,i,n){"string"==typeof i&&(n=i,i=null);var o=c(t,i,n);return W(t)&&(t=t[t.length-1]),function(t){if(r||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^class\b/.test(Ze(t))),e}(t)?(o.unshift(null),new(Function.prototype.bind.apply(t,o))):t.apply(e,o)},instantiate:function(t,e,i){var n=W(t)?t[t.length-1]:t,o=c(t,e,i);return o.unshift(null),new(Function.prototype.bind.apply(n,o))},get:l,annotate:Ke.$$annotate,has:function(e){return a.hasOwnProperty(e+n)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(i,n,o){var r=i.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(G(t))t=t();else if(it(t)){var e=t[0];t="fixed"!==i.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else N(t)||(t=0);return t}();if(e){var n=t.getBoundingClientRect().top;i.scrollBy(0,n-e)}}else i.scrollTo(0,0)}function l(t){var e,i,o;(t=q(t)?t:N(t)?t.toString():n.hash())?(e=r.getElementById(t))?a(e):(i=r.getElementsByName(t),o=null,Array.prototype.some.call(i,(function(t){if("a"===nt(t))return o=t,!0})),(e=o)?a(e):"top"===t&&a(null)):a(null)}return e&&o.$watch((function(){return n.hash()}),(function(e,i){var n,r;e===i&&""===e||(n=function(){o.$evalAsync(l)},"complete"===(r=r||t).document.readyState?r.setTimeout(n):s(r).on("load",n))})),l}]}Ke.$$annotate=function(t,e,i){var n,o;if("function"==typeof t){if(!(n=t.$inject)){if(n=[],t.length){if(e)throw q(i)&&i||(i=t.name||function(t){var e=Xe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Je("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",i);A(Xe(t)[1].split(He),(function(t){t.replace(Ge,(function(t,e,i){n.push(i)}))}))}t.$inject=n}}else W(t)?(Lt(t[o=t.length-1],"fn"),n=t.slice(0,o)):Lt(t,"fn",!0);return n};var ti=o("$animate"),ei="ng-animate";function ii(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function ni(t){return D(t)?t:{}}var oi=function(){this.$get=I},ri=function(){var t=new qe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(i,n){return{enabled:I,on:I,off:I,pin:I,push:function(s,a,l,c){c&&c(),(l=l||{}).from&&s.css(l.from),l.to&&s.css(l.to),(l.addClass||l.removeClass)&&function(i,s,a){var l=t.get(i)||{},c=o(l,s,!0),u=o(l,a,!1);(c||u)&&(t.set(i,l),e.push(i),1===e.length&&n.$$postDigest(r))}(s,l.addClass,l.removeClass);var u=new i;return u.complete(),u}};function o(t,e,i){var n=!1;return e&&A(e=q(e)?e.split(" "):W(e)?e:[],(function(e){e&&(n=!0,t[e]=i)})),n}function r(){A(e,(function(e){var i=t.get(e);if(i){var n=function(t){q(t)&&(t=t.split(" "));var e=Dt();return A(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),o="",r="";A(i,(function(t,e){t!==!!n[e]&&(t?o+=(o.length?" ":"")+e:r+=(r.length?" ":"")+e)})),A(e,(function(t){o&&we(t,o),r&&Ae(t,r)})),t.delete(e)}})),e.length=0}}]},si=["$provide",function(t){var e=this,i=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(i,n){if(i&&"."!==i.charAt(0))throw ti("notcsel","Expecting class selector starting with '.' got '{0}'.",i);var o=i+"-animation";e.$$registeredAnimations[i.substr(1)]=o,t.factory(o,n)},this.customFilter=function(t){return 1===arguments.length&&(n=G(t)?t:null),n},this.classNameFilter=function(t){if(1===arguments.length&&(i=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(i.toString()))throw i=null,ti("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ei)}return i},this.$get=["$$animateQueue",function(t){function e(t,e,i){if(i){var n=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(1===i.nodeType)return i}}(i);!n||n.parentNode||n.previousElementSibling||(i=null)}i?i.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(i,n,o,r){return n=n&&s(n),o=o&&s(o),e(i,n=n||o.parent(),o),t.push(i,"enter",ni(r))},move:function(i,n,o,r){return n=n&&s(n),o=o&&s(o),e(i,n=n||o.parent(),o),t.push(i,"move",ni(r))},leave:function(e,i){return t.push(e,"leave",ni(i),(function(){e.remove()}))},addClass:function(e,i,n){return(n=ni(n)).addClass=ii(n.addclass,i),t.push(e,"addClass",n)},removeClass:function(e,i,n){return(n=ni(n)).removeClass=ii(n.removeClass,i),t.push(e,"removeClass",n)},setClass:function(e,i,n,o){return(o=ni(o)).addClass=ii(o.addClass,i),o.removeClass=ii(o.removeClass,n),t.push(e,"setClass",o)},animate:function(e,i,n,o,r){return(r=ni(r)).from=r.from?M(r.from,i):i,r.to=r.to?M(r.to,n):n,o=o||"ng-inline-animate",r.tempClasses=ii(r.tempClasses,o),t.push(e,"animate",r)}}}]}],ai=function(){this.$get=["$$rAF",function(t){var e=[];function i(i){e.push(i),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return i((function(){t=!0})),function(e){t?e():i(e)}}}]},li=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,i,n,o){function r(t){this.setHost(t);var e=i();this._doneCallbacks=[],this._tick=function(t){n()?function(t){o(t,0,!1)}(t):e(t)},this._state=0}return r.chain=function(t,e){var i=0;!function n(){if(i===t.length)return void e(!0);t[i]((function(t){!1!==t?(i++,n()):e(!1)}))}()},r.all=function(t,e){var i=0,n=!0;function o(o){n=n&&o,++i===t.length&&e(n)}A(t,(function(t){t.done(o)}))},r.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,i){e.done((function(e){!1===e?i():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(A(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},r}]},ci=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,i){return function(e,n){var o=n||{};o.$$prepared||(o=st(o)),o.cleanupStyles&&(o.from=o.to=null),o.from&&(e.css(o.from),o.from=null);var r,s=new i;return{start:a,end:a};function a(){return t((function(){!function(){o.addClass&&(e.addClass(o.addClass),o.addClass=null);o.removeClass&&(e.removeClass(o.removeClass),o.removeClass=null);o.to&&(e.css(o.to),o.to=null)}(),r||s.complete(),r=!0})),s}}}]};function ui(t,e,i,n,o){var r=this,a=t.location,l=t.history,c=t.setTimeout,u=t.clearTimeout,h={},m=o(i);r.isMock=!1,r.$$completeOutstandingRequest=m.completeTask,r.$$incOutstandingRequestCount=m.incTaskCount,r.notifyWhenNoOutstandingRequests=m.notifyWhenNoPendingTasks;var p,d,f=a.href,_=e.find("base"),y=null,v=n.history?function(){try{return l.state}catch(t){}}:I;w(),r.url=function(e,i,o){if(j(o)&&(o=null),a!==t.location&&(a=t.location),l!==t.history&&(l=t.history),e){var s=d===o;if(e=ho(e).href,f===e&&(!n.history||s))return r;var c=f&&un(f)===un(e);return f=e,d=o,!n.history||c&&s?(c||(y=e),i?a.replace(e):c?a.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):a.href=e,a.href!==e&&(y=e)):(l[i?"replaceState":"pushState"](o,"",e),w()),y&&(y=e),r}return function(t){return t.replace(/#$/,"")}(y||a.href)},r.state=function(){return p};var g=[],b=!1;function x(){y=null,B()}var $=null;function w(){lt(p=j(p=v())?null:p,$)&&(p=$),$=p,d=p}function B(){var t=d;w(),f===r.url()&&t===p||(f=r.url(),d=p,A(g,(function(t){t(r.url(),p)})))}r.onUrlChange=function(e){return b||(n.history&&s(t).on("popstate",x),s(t).on("hashchange",x),b=!0),g.push(e),e},r.$$applicationDestroyed=function(){s(t).off("hashchange popstate",x)},r.$$checkUrlChange=B,r.baseHref=function(){var t=_.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},r.defer=function(t,e,i){var n;return e=e||0,i=i||m.DEFAULT_TASK_TYPE,m.incTaskCount(i),n=c((function(){delete h[n],m.completeTask(t,i)}),e),h[n]=i,n},r.defer.cancel=function(t){if(h.hasOwnProperty(t)){var e=h[t];return delete h[t],u(t),m.completeTask(I,e),!0}return!1}}function hi(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,i,n,o){return new ui(t,n,e,i,o)}]}function mi(){this.$get=function(){var t={};function e(e,i){if(e in t)throw o("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,r=M({},i,{id:e}),s=Dt(),a=i&&i.capacity||Number.MAX_VALUE,l=Dt(),c=null,u=null;return t[e]={put:function(t,e){if(!j(e)){if(a<Number.MAX_VALUE)h(l[t]||(l[t]={key:t}));return t in s||n++,s[t]=e,n>a&&this.remove(u.key),e}},get:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;h(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;e===c&&(c=e.p),e===u&&(u=e.n),m(e.n,e.p),delete l[t]}t in s&&(delete s[t],n--)},removeAll:function(){s=Dt(),n=0,l=Dt(),c=u=null},destroy:function(){s=null,r=null,l=null,delete t[e]},info:function(){return M({},r,{size:n})}};function h(t){t!==c&&(u?u===t&&(u=t.n):u=t,m(t.n,t.p),m(t,c),(c=t).n=null)}function m(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return A(t,(function(t,i){e[i]=t.info()})),e},e.get=function(e){return t[e]},e}}function pi(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var di=o("$compile");var fi=new function(){};function _i(e,i){var n={},o="Directive",a=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,i={},n=t.split(",");for(e=0;e<n.length;e++)i[n[e]]=!0;return i}("ngSrc,ngSrcset,src,srcset"),u=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,d=Dt();function f(t,e,i){var n=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,o=Dt();return A(t,(function(t,r){if((t=t.trim())in d)o[r]=d[t];else{var s=t.match(n);if(!s)throw di("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,r,t,i?"controller bindings definition":"isolate scope definition");o[r]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||r},s[4]&&(d[t]=o[r])}})),o}function _(t,e){var i={isolateScope:null,bindToController:null};if(D(t.scope)&&(!0===t.bindToController?(i.bindToController=f(t.scope,e,!0),i.isolateScope={}):i.isolateScope=f(t.scope,e,!1)),D(t.bindToController)&&(i.bindToController=f(t.bindToController,e,!0)),i.bindToController&&!t.controller)throw di("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return i}this.directive=function t(i,r){return Vt(i,"name"),jt(i,"directive"),q(i)?(!function(t){var e=t.charAt(0);if(!e||e!==m(e))throw di("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw di("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(i),Vt(r,"directiveFactory"),n.hasOwnProperty(i)||(n[i]=[],e.factory(i+o,["$injector","$exceptionHandler",function(t,e){var o=[];return A(n[i],(function(n,r){try{var s=t.invoke(n);G(s)?s={compile:V(s)}:!s.compile&&s.link&&(s.compile=V(s.link)),s.priority=s.priority||0,s.index=r,s.name=s.name||i,s.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&D(e)&&A(e,(function(t,i){var n=t.match(u);t.substring(n[0].length)||(e[i]=n[0]+i)})),e}(s),s.restrict=function(t,e){if(t&&(!q(t)||!/[EACM]/.test(t)))throw di("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(s.restrict,i),s.$$moduleName=n.$$moduleName,o.push(s)}catch(a){e(a)}})),o}])),n[i].push(r)):A(i,B(t)),this},this.component=function t(e,i){if(!q(e))return A(e,B(pt(this,t))),this;var n=i.controller||function(){};function o(t){function e(e){return G(e)||W(e)?function(i,n){return t.invoke(e,this,{$element:i,$attrs:n})}:e}var o=i.template||i.templateUrl?i.template:"",r={controller:n,controllerAs:Bi(i.controller)||i.controllerAs||"$ctrl",template:e(o),templateUrl:e(i.templateUrl),transclude:i.transclude,scope:{},bindToController:i.bindings||{},restrict:"E",require:i.require};return A(i,(function(t,e){"$"===e.charAt(0)&&(r[e]=t)})),r}return A(i,(function(t,e){"$"===e.charAt(0)&&(o[e]=t,G(n)&&(n[e]=t))})),o.$inject=["$injector"],this.directive(e,o)},this.aHrefSanitizationTrustedUrlList=function(t){return R(t)?(i.aHrefSanitizationTrustedUrlList(t),this):i.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return R(t)?(i.imgSrcSanitizationTrustedUrlList(t),this):i.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var v=!0;this.debugInfoEnabled=function(t){return R(t)?(v=t,this):v};var g=!1;this.strictComponentBindingsEnabled=function(t){return R(t)?(g=t,this):g};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var $=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?($=t,this):$};var w=Dt();this.addPropertySecurityContext=function(t,e,i){var n=t.toLowerCase()+"|"+e.toLowerCase();if(n in w&&w[n]!==i)throw di("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,w[n],i);return w[n]=i,this},function(){function t(t,e){A(e,(function(e){w[e.toLowerCase()]=t}))}t(Gn.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Gn.CSS,["*|style"]),t(Gn.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Gn.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Gn.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,i,d,f,B,C,S,E,T){var P,z=/^\w/,V=t.document.createElement("div"),L=x,R=$,O=b;function N(){try{if(!--O)throw P=void 0,di("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);S.$apply((function(){for(var t=0,e=P.length;t<e;++t)try{P[t]()}catch(i){d(i)}P=void 0}))}finally{O++}}function U(t,e){if(!t)return t;if(!q(t))throw di("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var i="",n=tt(t),o=/\s/.test(n)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,r=n.split(o),s=Math.floor(r.length/2),a=0;a<s;a++){var l=2*a;i+=E.getTrustedMediaUrl(tt(r[l])),i+=" "+tt(r[l+1])}var c=tt(r[2*a]).split(/\s/);return i+=E.getTrustedMediaUrl(tt(c[0])),2===c.length&&(i+=" "+tt(c[1])),i}function Y(t,e){if(e){var i,n,o,r=Object.keys(e);for(i=0,n=r.length;i<n;i++)this[o=r[i]]=e[o]}else this.$attr={};this.$$element=t}function J(t,e){try{t.addClass(e)}catch(i){}}Y.prototype={$normalize:bi,$addClass:function(t){t&&t.length>0&&T.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&T.removeClass(this.$$element,t)},$updateClass:function(t,e){var i=xi(t,e);i&&i.length&&T.addClass(this.$$element,i);var n=xi(e,t);n&&n.length&&T.removeClass(this.$$element,n)},$set:function(t,e,i,n){var o=ke(this.$$element[0],t),r=Ie[t],s=t;o?(this.$$element.prop(t,e),n=o):r&&(this[r]=e,s=r),this[t]=e,n?this.$attr[t]=n:(n=this.$attr[t])||(this.$attr[t]=n=Ft(t,"-")),"img"===nt(this.$$element)&&"srcset"===t&&(this[t]=e=U(e,"$set('srcset', value)")),!1!==i&&(null===e||j(e)?this.$$element.removeAttr(n):z.test(n)?o&&!1===e?this.$$element.removeAttr(n):this.$$element.attr(n,e):function(t,e,i){V.innerHTML="<span "+e+">";var n=V.firstChild.attributes,o=n[0];n.removeNamedItem(o.name),o.value=i,t.attributes.setNamedItem(o)}(this.$$element[0],n,e));var a=this.$$observers;a&&A(a[s],(function(t){try{t(e)}catch(i){d(i)}}))},$observe:function(t,e){var i=this,n=i.$$observers||(i.$$observers=Dt()),o=n[t]||(n[t]=[]);return o.push(e),S.$evalAsync((function(){o.$$inter||!i.hasOwnProperty(t)||j(i[t])||e(i[t])})),function(){rt(o,e)}}};var K=i.startSymbol(),Q=i.endSymbol(),et="{{"===K&&"}}"===Q?k:function(t){return t.replace(/\{\{/g,K).replace(/}}/g,Q)},it=/^ng(Attr|Prop|On)([A-Z].*)$/,ot=/^(.+)Start$/;return st.$$addBindingInfo=v?function(t,e){var i=t.data("$binding")||[];W(e)?i=i.concat(e):i.push(e),t.data("$binding",i)}:I,st.$$addBindingClass=v?function(t){J(t,"ng-binding")}:I,st.$$addScopeInfo=v?function(t,e,i,n){var o=i?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(o,e)}:I,st.$$addScopeClass=v?function(t,e){J(t,e?"ng-isolate-scope":"ng-scope")}:I,st.$$createComment=function(e,i){var n="";return v&&(n=" "+(e||"")+": ",i&&(n+=i+" ")),t.document.createComment(n)},st;function st(t,e,i,n,o){t instanceof s||(t=s(t));var r=ct(t,e,t,i,n,o);st.$$addScopeClass(t);var a=null;return function(e,i,n){if(!t)throw di("multilink","This element has already been linked.");Vt(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new());var l,c,u,h=(n=n||{}).parentBoundTranscludeFn,m=n.transcludeControllers,p=n.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),a||(c=(l=p)&&l[0],a=c&&"foreignobject"!==nt(c)&&y.call(c).match(/SVG/)?"svg":"html"),u="html"!==a?s(Et(a,s("<div></div>").append(t).html())):i?Pe.clone.call(t):t,m)for(var d in m)u.data("$"+d+"Controller",m[d].instance);return st.$$addScopeInfo(u,e),i&&i(u,e),r&&r(e,u,u,h),i||(t=r=null),u}}function ct(t,e,i,n,o,a){for(var l,c,u,h,m,p,d,f=[],_=W(t)||t instanceof s,y=0;y<t.length;y++)l=new Y,11===r&&ut(t,y,_),(u=(c=dt(t[y],[],l,0===y?n:void 0,o)).length?vt(c,t[y],l,e,i,null,[],[],a):null)&&u.scope&&st.$$addScopeClass(l.$$element),m=u&&u.terminal||!(h=t[y].childNodes)||!h.length?null:ct(h,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||m)&&(f.push(y,u,m),p=!0,d=d||u),a=null;return p?function(t,i,n,o){var r,a,l,c,u,h,m,p,_;if(d){var y=i.length;for(_=new Array(y),u=0;u<f.length;u+=3)m=f[u],_[m]=i[m]}else _=i;for(u=0,h=f.length;u<h;)l=_[f[u++]],r=f[u++],a=f[u++],r?(r.scope?(c=t.$new(),st.$$addScopeInfo(s(l),c)):c=t,p=r.transcludeOnThisElement?ht(t,r.transclude,o):!r.templateOnThisElement&&o?o:!o&&e?ht(t,e):null,r(a,c,l,n,p)):a&&a(t,l.childNodes,void 0,o)}:null}function ut(t,e,i){var n,o=t[e],r=o.parentNode;if(o.nodeType===qt)for(;(n=r?o.nextSibling:t[e+1])&&n.nodeType===qt;)o.nodeValue=o.nodeValue+n.nodeValue,n.parentNode&&n.parentNode.removeChild(n),i&&n===t[e+1]&&t.splice(e+1,1)}function ht(t,e,i){function n(n,o,r,s,a){return n||((n=t.$new(!1,a)).$$transcluded=!0),e(n,o,{parentBoundTranscludeFn:i,transcludeControllers:r,futureParentElement:s})}var o=n.$$slots=Dt();for(var r in e.$$slots)e.$$slots[r]?o[r]=ht(t,e.$$slots[r],i):o[r]=null;return n}function dt(t,e,n,o,r){var s,c,u,h=t.nodeType,m=n.$attr;switch(h){case 1:$t(e,bi(c=nt(t)),"E",o,r);for(var p,d,f,_,y,v=t.attributes,g=0,b=v&&v.length;g<b;g++){var x,$=!1,A=!1,w=!1,B=!1,C=!1;d=(p=v[g]).name,_=p.value,(y=(f=bi(d.toLowerCase())).match(it))?(w="Attr"===y[1],B="Prop"===y[1],C="On"===y[1],d=d.replace(vi,"").toLowerCase().substr(4+y[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(x=f.match(ot))&&At(x[1])&&($=d,A=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),B||C?(n[f]=_,m[f]=p.name,B?Tt(t,e,f,d):Pt(e,f,d)):(m[f=bi(d.toLowerCase())]=d,!w&&n.hasOwnProperty(f)||(n[f]=_,ke(t,f)&&(n[f]=!0)),zt(t,e,_,f,w),$t(e,f,"A",o,r,$,A))}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!R)break;if(D(u=t.className)&&(u=u.animVal),q(u)&&""!==u)for(;s=l.exec(u);)$t(e,f=bi(s[2]),"C",o,r)&&(n[f]=tt(s[3])),u=u.substr(s.index+s[0].length);break;case qt:!function(t,e){var n=i(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),i=!!e.length;return i&&st.$$addBindingClass(e),function(t,e){var o=e.parent();i||st.$$addBindingClass(o),st.$$addBindingInfo(o,n.expressions),t.$watch(n,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!L)break;!function(t,e,i,n,o){try{var r=a.exec(t.nodeValue);if(r){var s=bi(r[1]);$t(e,s,"M",n,o)&&(i[s]=tt(r[2]))}}catch(l){}}(t,e,n,o,r)}return e.sort(Ct),e}function ft(t,e,i){var n=[],o=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw di("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,i);1===t.nodeType&&(t.hasAttribute(e)&&o++,t.hasAttribute(i)&&o--),n.push(t),t=t.nextSibling}while(o>0);else n.push(t);return s(n)}function _t(t,e,i){return function(n,o,r,s,a){return o=ft(o[0],e,i),t(n,o,r,s,a)}}function yt(t,e,i,n,o,r){var s;return t?st(e,i,n,o,r):function(){return s||(s=st(e,i,n,o,r),e=i=r=null),s.apply(this,arguments)}}function vt(e,i,n,o,r,a,l,c,u){u=u||{};for(var h,m,p,f,_,y=-Number.MAX_VALUE,v=u.newScopeDirective,g=u.controllerDirectives,b=u.newIsolateScopeDirective,x=u.templateDirective,$=u.nonTlbTranscludeDirective,w=!1,B=!1,S=u.hasElementTranscludeDirective,E=n.$$element=s(i),T=a,P=o,z=!1,F=!1,I=0,k=e.length;I<k;I++){var V=(h=e[I]).$$start,L=h.$$end;if(V&&(E=ft(i,V,L)),p=void 0,y>h.priority)break;if((_=h.scope)&&(h.templateUrl||(D(_)?(St("new/isolated scope",b||v,h,E),b=h):St("new/isolated scope",b,h,E)),v=v||h),m=h.name,!z&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var R,O=I+1;R=e[O++];)if(R.transclude&&!R.$$tlb||R.replace&&(R.templateUrl||R.template)){F=!0;break}z=!0}if(!h.templateUrl&&h.controller&&(g=g||Dt(),St("'"+m+"' controller",g[m],h,E),g[m]=h),_=h.transclude)if(w=!0,h.$$tlb||(St("transclusion",$,h,E),$=h),"element"===_)S=!0,y=h.priority,p=E,E=n.$$element=s(st.$$createComment(m,n[m])),i=E[0],It(r,mt(p),i),P=yt(F,p,o,y,T&&T.name,{nonTlbTranscludeDirective:$});else{var q=Dt();if(D(_)){p=t.document.createDocumentFragment();var N=Dt(),U=Dt();for(var H in A(_,(function(t,e){var i="?"===t.charAt(0);t=i?t.substring(1):t,N[t]=e,q[e]=null,U[e]=i})),A(E.contents(),(function(e){var i=N[bi(nt(e))];i?(U[i]=!0,q[i]=q[i]||t.document.createDocumentFragment(),q[i].appendChild(e)):p.appendChild(e)})),A(U,(function(t,e){if(!t)throw di("reqslot","Required transclusion slot `{0}` was not filled.",e)})),q)if(q[H]){var J=s(q[H].childNodes);q[H]=yt(F,J,o)}p=s(p.childNodes)}else p=s(de(i)).contents();E.empty(),(P=yt(F,p,o,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=q}if(h.template)if(B=!0,St("template",x,h,E),x=h,_=G(h.template)?h.template(E,n):h.template,_=et(_),h.replace){if(T=h,p=ce(_)?[]:$i(Et(h.templateNamespace,tt(_))),i=p[0],1!==p.length||1!==i.nodeType)throw di("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");It(r,E,i);var X={$attr:{}},K=dt(i,[],X),Q=e.splice(I+1,e.length-(I+1));(b||v)&&bt(K,b,v),e=e.concat(K).concat(Q),wt(n,X),k=e.length}else E.html(_);if(h.templateUrl)B=!0,St("template",x,h,E),x=h,h.replace&&(T=h),rt=Bt(e.splice(I,e.length-I),E,n,r,w&&P,l,c,{controllerDirectives:g,newScopeDirective:v!==h&&v,newIsolateScopeDirective:b,templateDirective:x,nonTlbTranscludeDirective:$}),k=e.length;else if(h.compile)try{f=h.compile(E,n,P);var it=h.$$originalDirective||h;G(f)?ot(null,pt(it,f),V,L):f&&ot(pt(it,f.pre),pt(it,f.post),V,L)}catch(at){d(at,xt(E))}h.terminal&&(rt.terminal=!0,y=Math.max(y,h.priority))}return rt.scope=v&&!0===v.scope,rt.transcludeOnThisElement=w,rt.templateOnThisElement=B,rt.transclude=P,u.hasElementTranscludeDirective=S,rt;function ot(t,e,i,n){t&&(i&&(t=_t(t,i,n)),t.require=h.require,t.directiveName=m,(b===h||h.$$isolateScope)&&(t=kt(t,{isolateScope:!0})),l.push(t)),e&&(i&&(e=_t(e,i,n)),e.require=h.require,e.directiveName=m,(b===h||h.$$isolateScope)&&(e=kt(e,{isolateScope:!0})),c.push(e))}function rt(t,e,o,r,a){var u,h,m,p,f,_,y,$,w,B;for(var E in i===o?(w=n,$=n.$$element):w=new Y($=s(o),n),f=e,b?p=e.$new(!0):v&&(f=e.$parent),a&&((y=function(t,e,i,n){var o;Z(t)||(n=i,i=e,e=t,t=void 0);S&&(o=_);i||(i=S?$.parent():$);if(!n)return a(t,e,o,i,F);var r=a.$$slots[n];if(r)return r(t,e,o,i,F);if(j(r))throw di("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',n,xt($))}).$$boundTransclude=a,y.isSlotFilled=function(t){return!!a.$$slots[t]}),g&&(_=function(t,e,i,n,o,r,s){var a=Dt();for(var l in n){var c=n[l],u={$scope:c===s||c.$$isolateScope?o:r,$element:t,$attrs:e,$transclude:i},h=c.controller;"@"===h&&(h=e[c.name]);var m=C(h,u,!0,c.controllerAs);a[c.name]=m,t.data("$"+c.name+"Controller",m.instance)}return a}($,w,y,g,p,e,b)),b&&(st.$$addScopeInfo($,p,!0,!(x&&(x===b||x===b.$$originalDirective))),st.$$addScopeClass($,!0),p.$$isolateBindings=b.$$isolateBindings,(B=Rt(e,w,p,p.$$isolateBindings,b)).removeWatches&&p.$on("$destroy",B.removeWatches)),_){var T=g[E],P=_[E],z=T.$$bindings.bindToController;P.instance=P(),$.data("$"+T.name+"Controller",P.instance),P.bindingInfo=Rt(f,w,P.instance,z,T)}for(A(g,(function(t,e){var i=t.require;t.bindToController&&!W(i)&&D(i)&&M(_[e].instance,gt(e,i,$,_))})),A(_,(function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(at){d(at)}if(G(e.$onInit))try{e.$onInit()}catch(at){d(at)}G(e.$doCheck)&&(f.$watch((function(){e.$doCheck()})),e.$doCheck()),G(e.$onDestroy)&&f.$on("$destroy",(function(){e.$onDestroy()}))})),u=0,h=l.length;u<h;u++)Lt(m=l[u],m.isolateScope?p:e,$,w,m.require&&gt(m.directiveName,m.require,$,_),y);var F=e;for(b&&(b.template||null===b.templateUrl)&&(F=p),t&&t(F,o.childNodes,void 0,a),u=c.length-1;u>=0;u--)Lt(m=c[u],m.isolateScope?p:e,$,w,m.require&&gt(m.directiveName,m.require,$,_),y);A(_,(function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()}))}}function gt(t,e,i,n){var o;if(q(e)){var r=e.match(u),s=e.substring(r[0].length),a=r[1]||r[3],l="?"===r[2];if("^^"===a?i=i.parent():o=(o=n&&n[s])&&o.instance,!o){var c="$"+s+"Controller";o="^^"===a&&i[0]&&9===i[0].nodeType?null:a?i.inheritedData(c):i.data(c)}if(!o&&!l)throw di("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(W(e)){o=[];for(var h=0,m=e.length;h<m;h++)o[h]=gt(t,e[h],i,n)}else D(e)&&(o={},A(e,(function(e,r){o[r]=gt(t,e,i,n)})));return o||null}function bt(t,e,i){for(var n=0,o=t.length;n<o;n++)t[n]=F(t[n],{$$isolateScope:e,$$newScope:i})}function $t(t,i,r,s,a,l,c){if(i===a)return null;var u=null;if(n.hasOwnProperty(i))for(var h,m=e.get(i+o),p=0,d=m.length;p<d;p++)if(h=m[p],(j(s)||s>h.priority)&&-1!==h.restrict.indexOf(r)){if(l&&(h=F(h,{$$start:l,$$end:c})),!h.$$bindings){var f=h.$$bindings=_(h,h.name);D(f.isolateScope)&&(h.$$isolateBindings=f.isolateScope)}t.push(h),u=h}return u}function At(t){if(n.hasOwnProperty(t))for(var i=e.get(t+o),r=0,s=i.length;r<s;r++)if(i[r].multiElement)return!0;return!1}function wt(t,e){var i=e.$attr,n=t.$attr;A(t,(function(n,o){"$"!==o.charAt(0)&&(e[o]&&e[o]!==n&&(n.length?n+=("style"===o?";":" ")+e[o]:n=e[o]),t.$set(o,n,!0,i[o]))})),A(e,(function(e,o){t.hasOwnProperty(o)||"$"===o.charAt(0)||(t[o]=e,"class"!==o&&"style"!==o&&(n[o]=i[o]))}))}function Bt(t,e,i,n,o,r,a,l){var c,u,h=[],m=e[0],p=t.shift(),_=F(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),y=G(p.templateUrl)?p.templateUrl(e,i):p.templateUrl,v=p.templateNamespace;return e.empty(),f(y).then((function(d){var f,g,b,x;if(d=et(d),p.replace){if(b=ce(d)?[]:$i(Et(v,tt(d))),f=b[0],1!==b.length||1!==f.nodeType)throw di("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,y);g={$attr:{}},It(n,e,f);var $=dt(f,[],g);D(p.scope)&&bt($,!0),t=$.concat(t),wt(i,g)}else f=m,e.html(d);for(t.unshift(_),c=vt(t,f,i,o,e,p,r,a,l),A(n,(function(t,i){t===f&&(n[i]=e[0])})),u=ct(e[0].childNodes,o);h.length;){var w=h.shift(),B=h.shift(),C=h.shift(),S=h.shift(),E=e[0];if(!w.$$destroyed){if(B!==m){var M=B.className;l.hasElementTranscludeDirective&&p.replace||(E=de(f)),It(C,s(B),E),J(s(E),M)}x=c.transcludeOnThisElement?ht(w,c.transclude,S):S,c(u,w,E,n,x)}}h=null})).catch((function(t){H(t)&&d(t)})),function(t,e,i,n,o){var r=o;e.$$destroyed||(h?h.push(e,i,n,r):(c.transcludeOnThisElement&&(r=ht(e,c.transclude,o)),c(u,e,i,n,r)))}}function Ct(t,e){var i=e.priority-t.priority;return 0!==i?i:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function St(t,e,i,n){function o(t){return t?" (module: "+t+")":""}if(e)throw di("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,o(e.$$moduleName),i.name,o(i.$$moduleName),t,xt(n))}function Et(e,i){switch(e=m(e||"html")){case"svg":case"math":var n=t.document.createElement("div");return n.innerHTML="<"+e+">"+i+"</"+e+">",n.childNodes[0].childNodes;default:return i}}function Mt(t){return U(E.valueOf(t),"ng-prop-srcset")}function Tt(t,e,i,n){if(p.test(n))throw di("nodomevents","Property bindings for HTML DOM event properties are disallowed");var o=nt(t),r=function(t,e){var i=e.toLowerCase();return w[t+"|"+i]||w["*|"+i]}(o,n),s=k;"srcset"!==n||"img"!==o&&"source"!==o?r&&(s=E.getTrusted.bind(E,r)):s=Mt,e.push({priority:100,compile:function(t,e){var o=B(e[i]),r=B(e[i],(function(t){return E.valueOf(t)}));return{pre:function(t,e){function i(){var i=o(t);e[0][n]=s(i)}i(),t.$watch(r,i)}}}})}function Pt(t,e,i){t.push(Lr(B,S,d,e,i,!1))}function zt(t,e,n,o,r){var s=nt(t),a=function(t,e){return"srcdoc"===e?E.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?E.RESOURCE_URL:E.MEDIA_URL:"xlinkHref"===e?"image"===t?E.MEDIA_URL:"a"===t?E.URL:E.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?E.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:E.URL}(s,o),l=!r,u=c[o]||r,h=i(n,l,a,u);if(h){if("multiple"===o&&"select"===s)throw di("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",xt(t));if(p.test(o))throw di("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,r){var s=r.$$observers||(r.$$observers=Dt()),l=r[o];l!==n&&(h=l&&i(l,!0,a,u),n=l),h&&(r[o]=h(t),(s[o]||(s[o]=[])).$$inter=!0,(r.$$observers&&r.$$observers[o].$$scope||t).$watch(h,(function(t,e){"class"===o&&t!==e?r.$updateClass(t,e):r.$set(o,t)})))}}}})}}function It(e,i,n){var o,r,a=i[0],l=i.length,c=a.parentNode;if(e)for(o=0,r=e.length;o<r;o++)if(e[o]===a){e[o++]=n;for(var u=o,h=u+l-1,m=e.length;u<m;u++,h++)h<m?e[u]=e[h]:delete e[u];e.length-=l-1,e.context===a&&(e.context=n);break}c&&c.replaceChild(n,a);var p=t.document.createDocumentFragment();for(o=0;o<l;o++)p.appendChild(i[o]);for(s.hasData(a)&&(s.data(n,s.data(a)),s(a).off("$destroy")),s.cleanData(p.querySelectorAll("*")),o=1;o<l;o++)delete i[o];i[0]=n,i.length=1}function kt(t,e){return M((function(){return t.apply(null,arguments)}),t,e)}function Lt(t,e,i,n,o,r){try{t(e,i,n,o,r)}catch(s){d(s,xt(i))}}function jt(t,e){if(g)throw di("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Rt(t,e,n,o,r){var s,a=[],l={};function c(e,i,o){G(n.$onChanges)&&!at(i,o)&&(P||(t.$$postDigest(N),P=[]),s||(s={},P.push(u)),s[e]&&(o=s[e].previousValue),s[e]=new yi(o,i))}function u(){n.$onChanges(s),s=void 0}return A(o,(function(o,s){var u,m,p,d,f,_=o.attrName,y=o.optional;switch(o.mode){case"@":y||h.call(e,_)||(jt(_,r.name),n[s]=e[_]=void 0),f=e.$observe(_,(function(t){if(q(t)||X(t)){var e=n[s];c(s,t,e),n[s]=t}})),e.$$observers[_].$$scope=t,q(u=e[_])?n[s]=i(u)(t):X(u)&&(n[s]=u),l[s]=new yi(fi,n[s]),a.push(f);break;case"=":if(!h.call(e,_)){if(y)break;jt(_,r.name),e[_]=void 0}if(y&&!e[_])break;m=B(e[_]),d=m.literal?lt:at,p=m.assign||function(){throw u=n[s]=m(t),di("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[_],_,r.name)},u=n[s]=m(t);var v=function(e){return d(e,n[s])||(d(e,u)?p(t,e=n[s]):n[s]=e),u=e};v.$stateful=!0,f=o.collection?t.$watchCollection(e[_],v):t.$watch(B(e[_],v),null,m.literal),a.push(f);break;case"<":if(!h.call(e,_)){if(y)break;jt(_,r.name),e[_]=void 0}if(y&&!e[_])break;var g=(m=B(e[_])).literal,b=n[s]=m(t);l[s]=new yi(fi,n[s]),f=t[o.collection?"$watchCollection":"$watch"](m,(function(t,e){if(e===t){if(e===b||g&&lt(e,b))return;e=b}c(s,t,e),n[s]=t})),a.push(f);break;case"&":if(y||h.call(e,_)||jt(_,r.name),(m=e.hasOwnProperty(_)?B(e[_]):I)===I&&y)break;n[s]=function(e){return m(t,e)}}})),{initialChanges:l,removeWatches:a.length&&function(){for(var t=0,e=a.length;t<e;++t)a[t]()}}}}]}function yi(t,e){this.previousValue=t,this.currentValue=e}_i.$inject=["$provide","$$sanitizeUriProvider"],yi.prototype.isFirstChange=function(){return this.previousValue===fi};var vi=/^((?:x|data)[:\-_])/i,gi=/[:\-_]+(.)/g;function bi(t){return t.replace(vi,"").replace(gi,(function(t,e,i){return i?e.toUpperCase():e}))}function xi(t,e){var i="",n=t.split(/\s+/),o=e.split(/\s+/);t:for(var r=0;r<n.length;r++){for(var s=n[r],a=0;a<o.length;a++)if(s===o[a])continue t;i+=(i.length>0?" ":"")+s}return i}function $i(t){var e=(t=s(t)).length;if(e<=1)return t;for(;e--;){var i=t[e];(8===i.nodeType||i.nodeType===qt&&""===i.nodeValue.trim())&&f.call(t,e,1)}return t}var Ai=o("$controller"),wi=/^(\S+)(\s+as\s+([\w$]+))?$/;function Bi(t,e){if(e&&q(e))return e;if(q(t)){var i=wi.exec(t);if(i)return i[3]}}function Ci(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,i){jt(e,"controller"),D(e)?M(t,e):t[e]=i},this.$get=["$injector",function(e){return function(n,o,r,s){var a,l,c,u;if(r=!0===r,s&&q(s)&&(u=s),q(n)){if(!(l=n.match(wi)))throw Ai("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",n);if(c=l[1],u=u||l[3],!(n=t.hasOwnProperty(c)?t[c]:function(t,e,i){if(!e)return t;for(var n,o=e.split("."),r=t,s=o.length,a=0;a<s;a++)n=o[a],t&&(t=(r=t)[n]);return!i&&G(t)?pt(r,t):t}(o.$scope,c,!0)))throw Ai("ctrlreg","The controller with the name '{0}' is not registered.",c);Lt(n,c,!0)}if(r){var h=(W(n)?n[n.length-1]:n).prototype;return a=Object.create(h||null),u&&i(o,u,a,c||n.name),M((function(){var t=e.invoke(n,a,o,c);return t!==a&&(D(t)||G(t))&&(a=t,u&&i(o,u,a,c||n.name)),a}),{instance:a,identifier:u})}return a=e.instantiate(n,o,c),u&&i(o,u,a,c||n.name),a};function i(t,e,i,n){if(!t||!D(t.$scope))throw o("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",n,e);t.$scope[e]=i}}]}function Si(){this.$get=["$window",function(t){return s(t.document)}]}function Ei(){this.$get=["$document","$rootScope",function(t,e){var i=t[0],n=i&&i.hidden;function o(){n=i.hidden}return t.on("visibilitychange",o),e.$on("$destroy",(function(){t.off("visibilitychange",o)})),function(){return n}}]}function Mi(){this.$get=["$log",function(t){return function(e,i){t.error.apply(t,arguments)}}]}var Ti=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof s&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Pi="application/json",zi={"Content-Type":"application/json;charset=utf-8"},Fi=/^\[|^\{(?!\{)/,Ii={"[":/]$/,"{":/}$/},ki=/^\)]\}',?\n/,Vi=o("$http");function Li(t){return D(t)?U(t)?t.toISOString():ft(t):t}function ji(){this.$get=function(){return function(t){if(!t)return"";var e=[];return w(t,(function(t,i){null===t||j(t)||G(t)||(W(t)?A(t,(function(t){e.push(Bt(i)+"="+Bt(Li(t)))})):e.push(Bt(i)+"="+Bt(Li(t))))})),e.join("&")}}}function Ri(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(i,n,o){W(i)?A(i,(function(e,i){t(e,n+"["+(D(e)?i:"")+"]")})):D(i)&&!U(i)?w(i,(function(e,i){t(e,n+(o?"":"[")+i+(o?"":"]"))})):(G(i)&&(i=i()),e.push(Bt(n)+"="+(null==i?"":Bt(Li(i)))))}(t,"",!0),e.join("&")}}}function Di(t,e){if(q(t)){var i=t.replace(ki,"").trim();if(i){var n=e("Content-Type"),o=n&&0===n.indexOf(Pi);if(o||(s=(r=i).match(Fi))&&Ii[s[0]].test(r))try{t=_t(i)}catch(a){if(!o)return t;throw Vi("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,a)}}}var r,s;return t}function Oi(t){var e,i=Dt();function n(t,e){t&&(i[t]=i[t]?i[t]+", "+e:e)}return q(t)?A(t.split("\n"),(function(t){e=t.indexOf(":"),n(m(tt(t.substr(0,e))),tt(t.substr(e+1)))})):D(t)&&A(t,(function(t,e){n(m(e),tt(t))})),i}function qi(t){var e;return function(i){if(e||(e=Oi(t)),i){var n=e[m(i)];return void 0===n&&(n=null),n}return e}}function Ni(t,e,i,n){return G(n)?n(t,e,i):(A(n,(function(n){t=n(t,e,i)})),t)}function Ui(t){return 200<=t&&t<300}function Wi(){var t=this.defaults={transformResponse:[Di],transformRequest:[function(t){return!D(t)||(e=t,"[object File]"===y.call(e))||function(t){return"[object Blob]"===y.call(t)}(t)||function(t){return"[object FormData]"===y.call(t)}(t)?t:ft(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Nt(zi),put:Nt(zi),patch:Nt(zi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return R(t)?(e=!!t,this):e};var i=this.interceptors=[],n=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,s,a,l,c,u,h,d){var f=l("$http");t.paramSerializer=q(t.paramSerializer)?h.get(t.paramSerializer):t.paramSerializer;var _=[];A(i,(function(t){_.unshift(q(t)?h.get(t):h.invoke(t))}));var y,v=(y=[co].concat(n.map(ho)),function(t){var e=ho(t);return y.some(mo.bind(null,e))});function g(i){if(!D(i))throw o("$http")("badreq","Http request configuration must be an object.  Received: {0}",i);if(!q(d.valueOf(i.url)))throw o("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",i.url);var n=M({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},i);n.headers=function(e){var i,n,o,r=t.headers,s=M({},e.headers);r=M({},r.common,r[m(e.method)]);t:for(i in r){for(o in n=m(i),s)if(m(o)===n)continue t;s[i]=r[i]}return function(t,e){var i,n={};return A(t,(function(t,o){G(t)?null!=(i=t(e))&&(n[o]=i):n[o]=t})),n}(s,Nt(e))}(i),n.method=p(n.method),n.paramSerializer=q(n.paramSerializer)?h.get(n.paramSerializer):n.paramSerializer,r.$$incOutstandingRequestCount("$http");var l=[],y=[],b=u.resolve(n);return A(_,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&y.push(t.response,t.responseError)})),b=(b=x(b,l)).then((function(i){var n=i.headers,o=Ni(i.data,qi(n),void 0,i.transformRequest);j(o)&&A(n,(function(t,e){"content-type"===m(e)&&delete n[e]}));j(i.withCredentials)&&!j(t.withCredentials)&&(i.withCredentials=t.withCredentials);return function(i,n){var o,r,l=u.defer(),h=l.promise,p=i.headers,_="jsonp"===m(i.method),y=i.url;_?y=d.getTrustedResourceUrl(y):q(y)||(y=d.valueOf(y));y=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(y,i.paramSerializer(i.params)),_&&(y=function(t,e){var i=t.split("?");if(i.length>2)throw Vi("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return A(At(i[1]),(function(i,n){if("JSON_CALLBACK"===i)throw Vi("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(n===e)throw Vi("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(y,i.jsonpCallbackParam));g.pendingRequests.push(i),h.then(C,C),!i.cache&&!t.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(o=D(i.cache)?i.cache:D(t.cache)?t.cache:f);o&&(R(r=o.get(y))?K(r)?r.then(B,B):W(r)?w(r[1],r[0],Nt(r[2]),r[3],r[4]):w(r,200,{},"OK","complete"):o.put(y,h));if(j(r)){var b=v(i.url)?a()[i.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(p[i.xsrfHeaderName||t.xsrfHeaderName]=b),s(i.method,y,n,$,p,i.timeout,i.withCredentials,i.responseType,x(i.eventHandlers),x(i.uploadEventHandlers))}return h;function x(t){if(t){var i={};return A(t,(function(t,n){i[n]=function(i){function n(){t(i)}e?c.$applyAsync(n):c.$$phase?n():c.$apply(n)}})),i}}function $(t,i,n,r,s){function a(){w(i,t,n,r,s)}o&&(Ui(t)?o.put(y,[t,i,Oi(n),r,s]):o.remove(y)),e?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function w(t,e,n,o,r){(Ui(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:qi(n),config:i,statusText:o,xhrStatus:r})}function B(t){w(t.data,t.status,Nt(t.headers()),t.statusText,t.xhrStatus)}function C(){var t=g.pendingRequests.indexOf(i);-1!==t&&g.pendingRequests.splice(t,1)}}(i,o).then($,$)})),b=(b=x(b,y)).finally((function(){r.$$completeOutstandingRequest(I,"$http")}));function x(t,e){for(var i=0,n=e.length;i<n;){var o=e[i++],r=e[i++];t=t.then(o,r)}return e.length=0,t}function $(t){var e=M({},t);return e.data=Ni(t.data,t.headers,t.status,n.transformResponse),Ui(t.status)?e:u.reject(e)}}return g.pendingRequests=[],function(t){A(arguments,(function(t){g[t]=function(e,i){return g(M({},i||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){A(arguments,(function(t){g[t]=function(e,i,n){return g(M({},n||{},{method:t,url:e,data:i}))}}))}("post","put","patch"),g.defaults=t,g}]}function Hi(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Gi(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,i,n){return function(t,e,i,n,o){return function(o,s,a,l,c,u,h,p,d,f){if(s=s||t.url(),"jsonp"===m(o))var _=n.createCallback(s),y=r(s,_,(function(t,e){var i=200===t&&n.getResponse(_);C(l,t,i,"",e,"complete"),n.removeCallback(_)}));else{var v=e(o,s),g=!1;v.open(o,s,!0),A(c,(function(t,e){R(t)&&v.setRequestHeader(e,t)})),v.onload=function(){var t=v.statusText||"",e="response"in v?v.response:v.responseText,i=1223===v.status?204:v.status;0===i&&(i=e?200:"file"===ho(s).protocol?404:0),C(l,i,e,v.getAllResponseHeaders(),t,"complete")};var b=function(){C(l,-1,null,null,"","error")},x=function(){C(l,-1,null,null,"",g?"timeout":"abort")},$=function(){C(l,-1,null,null,"","timeout")};if(v.onerror=b,v.ontimeout=$,v.onabort=x,A(d,(function(t,e){v.addEventListener(e,t)})),A(f,(function(t,e){v.upload.addEventListener(e,t)})),h&&(v.withCredentials=!0),p)try{v.responseType=p}catch(S){if("json"!==p)throw S}v.send(j(a)?null:a)}if(u>0)var w=i((function(){B("timeout")}),u);else K(u)&&u.then((function(){B(R(u.$$timeoutId)?"timeout":"abort")}));function B(t){g="timeout"===t,y&&y(),v&&v.abort()}function C(t,e,n,o,r,s){R(w)&&i.cancel(w),y=v=null,t(e,n,o,r,s)}};function r(t,e,i){t=t.replace("JSON_CALLBACK",e);var r=o.createElement("script"),s=null;return r.type="text/javascript",r.src=t,r.async=!0,s=function(t){r.removeEventListener("load",s),r.removeEventListener("error",s),o.body.removeChild(r),r=null;var a=-1,l="unknown";t&&("load"!==t.type||n.wasCalled(e)||(t={type:"error"}),l=t.type,a="error"===t.type?404:200),i&&i(a,l)},r.addEventListener("load",s),r.addEventListener("error",s),o.body.appendChild(r),s}}(t,n,t.defer,e,i[0])}]}var Yi=b.$interpolateMinErr=o("$interpolate");function Ji(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(i,n,o){var r=t.length,s=e.length,a=new RegExp(t.replace(/./g,c),"g"),l=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function u(i){return i.replace(a,t).replace(l,e)}function h(t,e,i,n){var o=t.$watch((function(t){return o(),n(t)}),e,i);return o}function m(a,l,c,m){var p=c===o.URL||c===o.MEDIA_URL;if(!a.length||-1===a.indexOf(t)){if(l)return;var d=u(a);p&&(d=o.getTrusted(c,d));var f=V(d);return f.exp=a,f.expressions=[],f.$$watchDelegate=h,f}m=!!m;for(var _,y,v,g,b,x=0,$=[],A=a.length,w=[],B=[];x<A;){if(-1===(_=a.indexOf(t,x))||-1===(y=a.indexOf(e,_+r))){x!==A&&w.push(u(a.substring(x)));break}x!==_&&w.push(u(a.substring(x,_))),g=a.substring(_+r,y),$.push(g),x=y+s,B.push(w.length),w.push("")}b=1===w.length&&1===B.length;var C=p&&b?void 0:function(t){try{return t=c&&!p?o.getTrusted(c,t):o.valueOf(t),m&&!R(t)?t:Ot(t)}catch(e){n(Yi.interr(a,e))}};if(v=$.map((function(t){return i(t,C)})),!l||$.length){var S=function(t){for(var e=0,i=$.length;e<i;e++){if(m&&j(t[e]))return;w[B[e]]=t[e]}return p?o.getTrusted(c,b?w[0]:w.join("")):(c&&w.length>1&&Yi.throwNoconcat(a),w.join(""))};return M((function(t){var e=0,i=$.length,o=new Array(i);try{for(;e<i;e++)o[e]=v[e](t);return S(o)}catch(r){n(Yi.interr(a,r))}}),{exp:a,expressions:$,$$watchDelegate:function(t,e){var i;return t.$watchGroup(v,(function(n,o){var r=S(n);e.call(this,r,n!==o?i:r,t),i=r}))}})}}return m.startSymbol=function(){return t},m.endSymbol=function(){return e},m}]}Yi.throwNoconcat=function(t){throw Yi("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Yi.interr=function(t,e){return Yi("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Zi=o("$interval");function Xi(){this.$get=["$$intervalFactory","$window",function(t,e){var i={},n=function(t){e.clearInterval(t),delete i[t]},o=t((function(t,n,o){var r=e.setInterval(t,n);return i[r]=o,r}),n);return o.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Zi("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!i.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,o=i[e];return qn(o.promise),o.reject("canceled"),n(e),!0},o}]}function Ki(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,i,n){return function(o,r){return function(s,a,l,c){var u=arguments.length>4,h=u?mt(arguments,4):[],m=0,p=R(c)&&!c,d=(p?i:e).defer(),f=d.promise;function _(){u?s.apply(null,h):s(m)}function y(){p?t.defer(_):n.$evalAsync(_),d.notify(m++),l>0&&m>=l&&(d.resolve(m),r(f.$$intervalId)),p||n.$apply()}return l=R(l)?l:0,f.$$intervalId=o(y,a,d,p),f}}}]}var Qi=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(i){var n="_"+(t.$$counter++).toString(36),o="angular.callbacks."+n,r=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(n);return e[o]=t[n]=r,o},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(i){var n=e[i];delete t[n.id],delete e[i]}}}},tn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,en={http:80,https:443,ftp:21},nn=o("$location");function on(t,e,i){var n,o=(n=[],A(e,(function(t,e){W(t)?A(t,(function(t){n.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})):n.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})),n.length?n.join("&"):""),r=i?"#"+wt(i):"";return function(t){for(var e=t.split("/"),i=e.length;i--;)e[i]=wt(e[i].replace(/%2F/g,"/"));return e.join("/")}(t)+(o?"?"+o:"")+r}function rn(t,e){var i=ho(t);e.$$protocol=i.protocol,e.$$host=i.hostname,e.$$port=P(i.port)||en[i.protocol]||null}var sn=/^\s*[\\/]{2,}/;function an(t,e,i){if(sn.test(t))throw nn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var o=ho(t),r=n&&"/"===o.pathname.charAt(0)?o.pathname.substring(1):o.pathname;e.$$path=function(t,e){for(var i=t.split("/"),n=i.length;n--;)i[n]=decodeURIComponent(i[n]),e&&(i[n]=i[n].replace(/\//g,"%2F"));return i.join("/")}(r,i),e.$$search=At(o.search),e.$$hash=decodeURIComponent(o.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ln(t,e){return t.slice(0,e.length)===e}function cn(t,e){if(ln(e,t))return e.substr(t.length)}function un(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function hn(t,e,i){this.$$html5=!0,i=i||"",rn(t,this),this.$$parse=function(t){var i=cn(e,t);if(!q(i))throw nn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);an(i,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(n,o){return o&&"#"===o[0]?(this.hash(o.slice(1)),!0):(R(r=cn(t,n))?(s=r,a=i&&R(r=cn(i,r))?e+(cn("/",r)||r):t+s):R(r=cn(e,n))?a=e+r:e===n+"/"&&(a=e),a&&this.$$parse(a),!!a);var r,s,a}}function mn(t,e,i){rn(t,this),this.$$parse=function(n){var o,r=cn(t,n)||cn(e,n);j(r)||"#"!==r.charAt(0)?this.$$html5?o=r:(o="",j(r)&&(t=n,this.replace())):j(o=cn(i,r))&&(o=r),an(o,this,!1),this.$$path=function(t,e,i){var n,o=/^\/[A-Z]:(\/.*)/;ln(e,i)&&(e=e.replace(i,""));if(o.exec(e))return t;return(n=o.exec(t))?n[1]:t}(this.$$path,o,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?i+e:"")},this.$$parseLinkUrl=function(e,i){return un(t)===un(e)&&(this.$$parse(e),!0)}}function pn(t,e,i){this.$$html5=!0,mn.apply(this,arguments),this.$$parseLinkUrl=function(n,o){return o&&"#"===o[0]?(this.hash(o.slice(1)),!0):(t===un(n)?r=n:(s=cn(e,n))?r=t+i+s:e===n+"/"&&(r=e),r&&this.$$parse(r),!!r);var r,s},this.$$normalizeUrl=function(e){return t+i+e}}var dn={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=on(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:fn("$$absUrl"),url:function(t){if(j(t))return this.$$url;var e=tn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:fn("$$protocol"),host:fn("$$host"),port:fn("$$port"),path:_n("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(q(t)||N(t))t=t.toString(),this.$$search=At(t);else{if(!D(t))throw nn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");A(t=st(t,{}),(function(e,i){null==e&&delete t[i]})),this.$$search=t}break;default:j(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:_n("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function fn(t){return function(){return this[t]}}function _n(t,e){return function(i){return j(i)?this[t]:(this[t]=e(i),this.$$compose(),this)}}function yn(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return R(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):D(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||q(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(i,n,o,r,a){var l,c,u,h,m=n.baseHref(),p=n.url();if(e.enabled){if(!m&&e.requireBase)throw nn("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(h=p).substring(0,h.indexOf("/",h.indexOf("//")+2))+(m||"/"),c=o.history?hn:pn}else u=un(p),c=mn;var d=function(t){return t.substr(0,un(t).lastIndexOf("/")+1)}(u);(l=new c(u,d,"#"+t)).$$parseLinkUrl(p,p),l.$$state=n.state();var f=/^\s*(javascript|mailto):/i;function _(t,e,i){var o=l.url(),r=l.$$state;try{n.url(t,e,i),l.$$state=n.state()}catch(s){throw l.url(o),l.$$state=r,s}}r.on("click",(function(t){var o=e.rewriteLinks;if(o&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var a=s(t.target);"a"!==nt(a[0]);)if(a[0]===r[0]||!(a=a.parent())[0])return;if(!q(o)||!j(a.attr(o))){var c=a.prop("href"),u=a.attr("href")||a.attr("xlink:href");D(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ho(c.animVal).href),f.test(c)||!c||a.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(c,u)&&(t.preventDefault(),l.absUrl()!==n.url()&&i.$apply())}}})),l.absUrl()!==p&&n.url(l.absUrl(),!0);var y=!0;return n.onUrlChange((function(t,e){ln(t,d)?(i.$evalAsync((function(){var n,o=l.absUrl(),r=l.$$state;l.$$parse(t),l.$$state=e,n=i.$broadcast("$locationChangeStart",t,o,e,r).defaultPrevented,l.absUrl()===t&&(n?(l.$$parse(o),l.$$state=r,_(o,!1,r)):(y=!1,v(o,r)))})),i.$$phase||i.$digest()):a.location.href=t})),i.$watch((function(){if(y||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=n.url(),e=l.absUrl(),r=n.state(),s=l.$$replace,a=!((c=t)===(u=e)||ho(c).href===ho(u).href)||l.$$html5&&o.history&&r!==l.$$state;(y||a)&&(y=!1,i.$evalAsync((function(){var e=l.absUrl(),n=i.$broadcast("$locationChangeStart",e,t,l.$$state,r).defaultPrevented;l.absUrl()===e&&(n?(l.$$parse(t),l.$$state=r):(a&&_(e,s,r===l.$$state?null:l.$$state),v(t,r)))})))}var c,u;l.$$replace=!1})),l;function v(t,e){i.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function vn(){var t=!0,e=this;this.debugEnabled=function(e){return R(e)?(t=e,this):t},this.$get=["$window",function(i){var n,o=r||/\bEdge\//.test(i.navigator&&i.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(n=a("debug"),function(){t&&n.apply(e,arguments)})};function s(t){return H(t)&&(t.stack&&o?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function a(t){var e=i.console||{},n=e[t]||e.log||I;return function(){var t=[];return A(arguments,(function(e){t.push(s(e))})),Function.prototype.apply.call(n,e,t)}}}]}A([pn,mn,hn],(function(t){t.prototype=Object.create(dn),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==hn||!this.$$html5)throw nn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=j(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var gn=o("$parse"),bn={}.constructor.prototype.valueOf;function xn(t){return t+""}var $n=Dt();A("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){$n[t]=!0}));var An={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wn=function(t){this.options=t};wn.prototype={constructor:wn,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var i=e+this.peek(),n=i+this.peek(2),o=$n[e],r=$n[i],s=$n[n];if(o||r||s){var a=s?n:r?i:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var i=t.charCodeAt(0),n=e.charCodeAt(0);return i>=55296&&i<=56319&&n>=56320&&n<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,i){i=i||this.index;var n=R(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,i)+"]":" "+i;throw gn("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var i=m(this.text.charAt(this.index));if("."===i||this.isNumber(i))t+=i;else{var n=this.peek();if("e"===i&&this.isExpOperator(n))t+=i;else if(this.isExpOperator(i)&&n&&this.isNumber(n)&&"e"===t.charAt(t.length-1))t+=i;else{if(!this.isExpOperator(i)||n&&this.isNumber(n)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var i="",n=t,o=!1;this.index<this.text.length;){var r=this.text.charAt(this.index);if(n+=r,o){if("u"===r){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,i+=String.fromCharCode(parseInt(s,16))}else{i+=An[r]||r}o=!1}else if("\\"===r)o=!0;else{if(r===t)return this.index++,void this.tokens.push({index:e,text:n,constant:!0,value:i});i+=r}this.index++}this.throwError("Unterminated quote",e)}};var Bn=function(t,e){this.lexer=t,this.options=e};function Cn(t,e){return void 0!==t?t:e}function Sn(t,e){return void 0===t?e:void 0===e?t:t+e}Bn.Program="Program",Bn.ExpressionStatement="ExpressionStatement",Bn.AssignmentExpression="AssignmentExpression",Bn.ConditionalExpression="ConditionalExpression",Bn.LogicalExpression="LogicalExpression",Bn.BinaryExpression="BinaryExpression",Bn.UnaryExpression="UnaryExpression",Bn.CallExpression="CallExpression",Bn.MemberExpression="MemberExpression",Bn.Identifier="Identifier",Bn.Literal="Literal",Bn.ArrayExpression="ArrayExpression",Bn.Property="Property",Bn.ObjectExpression="ObjectExpression",Bn.ThisExpression="ThisExpression",Bn.LocalsExpression="LocalsExpression",Bn.NGValueParameter="NGValueParameter",Bn.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Bn.Program,body:t}},expressionStatement:function(){return{type:Bn.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Tn(t))throw gn("lval","Trying to assign a value to a non l-value");t={type:Bn.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,i=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Bn.ConditionalExpression,test:i,alternate:t,consequent:e}):i},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Bn.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Bn.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Bn.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=st(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Bn.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Bn.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Bn.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Bn.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],i={type:Bn.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return i},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Bn.Identifier,name:t.text}},constant:function(){return{type:Bn.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Bn.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Bn.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Bn.ObjectExpression,properties:e}},throwError:function(t,e){throw gn("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw gn("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw gn("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,i,n){return this.peekAhead(0,t,e,i,n)},peekAhead:function(t,e,i,n,o){if(this.tokens.length>t){var r=this.tokens[t],s=r.text;if(s===e||s===i||s===n||s===o||!e&&!i&&!n&&!o)return r}return!1},expect:function(t,e,i,n){var o=this.peek(t,e,i,n);return!!o&&(this.tokens.shift(),o)},selfReferential:{this:{type:Bn.ThisExpression},$locals:{type:Bn.LocalsExpression}}};function En(t,e,i){var n,o,r,s=t.isPure=function(t,e){switch(t.type){case Bn.MemberExpression:if(t.computed)return!1;break;case Bn.UnaryExpression:return 1;case Bn.BinaryExpression:return"+"!==t.operator&&1;case Bn.CallExpression:return!1}return void 0===e?2:e}(t,i);switch(t.type){case Bn.Program:n=!0,A(t.body,(function(t){En(t.expression,e,s),n=n&&t.expression.constant})),t.constant=n;break;case Bn.Literal:t.constant=!0,t.toWatch=[];break;case Bn.UnaryExpression:En(t.argument,e,s),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Bn.BinaryExpression:En(t.left,e,s),En(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Bn.LogicalExpression:En(t.left,e,s),En(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Bn.ConditionalExpression:En(t.test,e,s),En(t.alternate,e,s),En(t.consequent,e,s),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Bn.Identifier:t.constant=!1,t.toWatch=[t];break;case Bn.MemberExpression:En(t.object,e,s),t.computed&&En(t.property,e,s),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Bn.CallExpression:r=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),n=r,o=[],A(t.arguments,(function(t){En(t,e,s),n=n&&t.constant,o.push.apply(o,t.toWatch)})),t.constant=n,t.toWatch=r?o:[t];break;case Bn.AssignmentExpression:En(t.left,e,s),En(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Bn.ArrayExpression:n=!0,o=[],A(t.elements,(function(t){En(t,e,s),n=n&&t.constant,o.push.apply(o,t.toWatch)})),t.constant=n,t.toWatch=o;break;case Bn.ObjectExpression:n=!0,o=[],A(t.properties,(function(t){En(t.value,e,s),n=n&&t.value.constant,o.push.apply(o,t.value.toWatch),t.computed&&(En(t.key,e,!1),n=n&&t.key.constant,o.push.apply(o,t.key.toWatch))})),t.constant=n,t.toWatch=o;break;case Bn.ThisExpression:case Bn.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Mn(t){if(1===t.length){var e=t[0].expression,i=e.toWatch;return 1!==i.length||i[0]!==e?i:void 0}}function Tn(t){return t.type===Bn.Identifier||t.type===Bn.MemberExpression}function Pn(t){if(1===t.body.length&&Tn(t.body[0].expression))return{type:Bn.AssignmentExpression,left:t.body[0].expression,right:{type:Bn.NGValueParameter},operator:"="}}function zn(t){this.$filter=t}function Fn(t){this.$filter=t}function In(t,e,i){this.ast=new Bn(t,i),this.astCompiler=i.csp?new Fn(e):new zn(e)}function kn(t){return G(t.valueOf)?t.valueOf():bn.call(t)}function Vn(){var t,e,i=Dt(),n={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){n[t]=e},this.setIdentifierFns=function(i,n){return t=i,e=n,this},this.$get=["$filter",function(o){var r={csp:ct().noUnsafeEval,literals:st(n),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return s.$$getAst=function(t){return new In(new wn(r),o,r).getAst(t).ast},s;function s(t,e){var n,s;switch(typeof t){case"string":if(t=t.trim(),!(n=i[s=t]))n=new In(new wn(r),o,r).parse(t),i[s]=m(n);return p(n,e);case"function":return p(t,e);default:return p(I,e)}}function a(t,e,i){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=kn(t))&&!i)&&(t===e||t!=t&&e!=e)}function l(t,e,i,n,o){var r,s=n.inputs;if(1===s.length){var l=a;return s=s[0],t.$watch((function(t){var e=s(t);return a(e,l,s.isPure)||(r=n(t,void 0,void 0,[e]),l=e&&kn(e)),r}),e,i,o)}for(var c=[],u=[],h=0,m=s.length;h<m;h++)c[h]=a,u[h]=null;return t.$watch((function(t){for(var e=!1,i=0,o=s.length;i<o;i++){var l=s[i](t);(e||(e=!a(l,c[i],s[i].isPure)))&&(u[i]=l,c[i]=l&&kn(l))}return e&&(r=n(t,void 0,void 0,u)),r}),e,i,o)}function c(t,e,i,n,o){var r,s,a=n.literal?u:R,l=n.$$intercepted||n,c=n.$$interceptor||k,h=n.inputs&&!l.inputs;return d.literal=n.literal,d.constant=n.constant,d.inputs=n.inputs,m(d),r=t.$watch(d,e,i,o);function p(){a(s)&&r()}function d(t,e,i,n){return s=h&&n?n[0]:l(t,e,i,n),a(s)&&t.$$postDigest(p),c(s)}}function u(t){var e=!0;return A(t,(function(t){R(t)||(e=!1)})),e}function h(t,e,i,n){var o=t.$watch((function(t){return o(),n(t)}),e,i);return o}function m(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=l),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function i(i){return e(t(i))}return i.$stateful=t.$stateful||e.$stateful,i.$$pure=t.$$pure&&e.$$pure,i}(t.$$interceptor,e),t=t.$$intercepted);var i=!1,n=function(n,o,r,s){var a=i&&s?s[0]:t(n,o,r,s);return e(a)};return n.$$intercepted=t,n.$$interceptor=e,n.literal=t.literal,n.oneTime=t.oneTime,n.constant=t.constant,e.$stateful||(i=!t.inputs,n.inputs=t.inputs?t.inputs:[t],e.$$pure||(n.inputs=n.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),m(n)}}]}function Ln(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,i){return Rn((function(t){e.$evalAsync(t)}),i,t)}],this.errorOnUnhandledRejections=function(e){return R(e)?(t=e,this):t}}function jn(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,i){return Rn((function(t){e.defer(t)}),i,t)}],this.errorOnUnhandledRejections=function(e){return R(e)?(t=e,this):t}}function Rn(t,e,i){var n=o("$q",TypeError),r=0,s=[];function a(){return new l}function l(){var t=this.promise=new c;this.resolve=function(e){m(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){_(t,e)}}function c(){this.$$state={status:0}}function u(){for(;!r&&s.length;){var t=s.shift();if(!Dn(t)){On(t);var i="Possibly unhandled rejection: "+Ut(t.value);H(t.value)?e(t.value,i):e(i)}}}function h(n){!i||n.pending||2!==n.status||Dn(n)||(0===r&&0===s.length&&t(u),s.push(n)),!n.processScheduled&&n.pending&&(n.processScheduled=!0,++r,t((function(){!function(n){var o,s,a;a=n.pending,n.processScheduled=!1,n.pending=void 0;try{for(var l=0,c=a.length;l<c;++l){On(n),s=a[l][0],o=a[l][n.status];try{G(o)?m(s,o(n.value)):1===n.status?m(s,n.value):d(s,n.value)}catch(h){d(s,h),h&&!0===h.$$passToExceptionHandler&&e(h)}}}finally{--r,i&&0===r&&t(u)}}(n)})))}function m(t,e){t.$$state.status||(e===t?f(t,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):p(t,e))}function p(t,e){var i,n=!1;try{(D(e)||G(e))&&(i=e.then),G(i)?(t.$$state.status=-1,i.call(e,(function(e){if(n)return;n=!0,p(t,e)}),o,(function(e){_(t,e)}))):(t.$$state.value=e,t.$$state.status=1,h(t.$$state))}catch(r){o(r)}function o(e){n||(n=!0,f(t,e))}}function d(t,e){t.$$state.status||f(t,e)}function f(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function _(i,n){var o=i.$$state.pending;i.$$state.status<=0&&o&&o.length&&t((function(){for(var t,i,r=0,s=o.length;r<s;r++){i=o[r][0],t=o[r][3];try{_(i,G(t)?t(n):n)}catch(a){e(a)}}}))}function y(t){var e=new c;return d(e,t),e}function v(t,e,i){var n=null;try{G(i)&&(n=i())}catch(o){return y(o)}return K(n)?n.then((function(){return e(t)}),y):e(t)}function g(t,e,i,n){var o=new c;return m(o,t),o.then(e,i,n)}M(c.prototype,{then:function(t,e,i){if(j(t)&&j(e)&&j(i))return this;var n=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,t,e,i]),this.$$state.status>0&&h(this.$$state),n},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return v(e,b,t)}),(function(e){return v(e,y,t)}),e)}});var b=g;function x(t){if(!G(t))throw n("norslvr","Expected resolverFn, got '{0}'",t);var e=new c;return t((function(t){m(e,t)}),(function(t){d(e,t)})),e}return x.prototype=c.prototype,x.defer=a,x.reject=y,x.when=g,x.resolve=b,x.all=function(t){var e=new c,i=0,n=W(t)?[]:{};return A(t,(function(t,o){i++,g(t).then((function(t){n[o]=t,--i||m(e,n)}),(function(t){d(e,t)}))})),0===i&&m(e,n),e},x.race=function(t){var e=a();return A(t,(function(t){g(t).then(e.resolve,e.reject)})),e.promise},x}function Dn(t){return!!t.pur}function On(t){t.pur=!0}function qn(t){t.$$state&&On(t.$$state)}function Nn(){this.$get=["$window","$timeout",function(t,e){var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,o=!!i,r=o?function(t){var e=i(t);return function(){n(e)}}:function(t){var i=e(t,16.66,!1);return function(){e.cancel(i)}};return r.supported=o,r}]}function Un(){var t=10,e=o("$rootScope"),i=null,n=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(o,s,a){function l(t){t.currentScope.$$destroyed=!0}function c(t){9===r&&(t.$$childHead&&c(t.$$childHead),t.$$nextSibling&&c(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function u(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var i;return e=e||this,t?(i=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),i=new this.$$ChildScope),i.$parent=e,i.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=i,e.$$childTail=i):e.$$childHead=e.$$childTail=i,(t||e!==this)&&i.$on("$destroy",l),i},$watch:function(t,e,n,o){var r=s(t),a=G(e)?e:I;if(r.$$watchDelegate)return r.$$watchDelegate(this,a,n,r,t);var l=this,c=l.$$watchers,u={fn:a,last:x,get:r,exp:o||t,eq:!!n};return i=null,c||((c=l.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(u),c.$$digestWatchIndex++,g(this,1),function(){var t=rt(c,u);t>=0&&(g(l,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),i=null}},$watchGroup:function(t,e){var i=new Array(t.length),n=new Array(t.length),o=[],r=this,s=!1,a=!0;if(!t.length){var l=!0;return r.$evalAsync((function(){l&&e(n,n,r)})),function(){l=!1}}if(1===t.length)return this.$watch(t[0],(function(t,o,r){n[0]=t,i[0]=o,e(n,t===o?n:i,r)}));function c(){s=!1;try{a?(a=!1,e(n,n,r)):e(n,i,r)}finally{for(var o=0;o<t.length;o++)i[o]=n[o]}}return A(t,(function(t,e){var i=r.$watch(t,(function(t){n[e]=t,s||(s=!0,r.$evalAsync(c))}));o.push(i)})),function(){for(;o.length;)o.shift()()}},$watchCollection:function(t,e){f.$$pure=s(t).literal,f.$stateful=!f.$$pure;var i,n,o,r=this,a=e.length>1,l=0,c=s(t,f),u=[],m={},p=!0,d=0;function f(t){var e,o,r,s;if(!j(i=t)){if(D(i))if($(i)){n!==u&&(d=(n=u).length=0,l++),e=i.length,d!==e&&(l++,n.length=d=e);for(var a=0;a<e;a++)s=n[a],r=i[a],s!=s&&r!=r||s===r||(l++,n[a]=r)}else{for(o in n!==m&&(n=m={},d=0,l++),e=0,i)h.call(i,o)&&(e++,r=i[o],s=n[o],o in n?s!=s&&r!=r||s===r||(l++,n[o]=r):(d++,n[o]=r,l++));if(d>e)for(o in l++,n)h.call(i,o)||(d--,delete n[o])}else n!==i&&(n=i,l++);return l}}return this.$watch(c,(function(){if(p?(p=!1,e(i,i,r)):e(i,o,r),a)if(D(i))if($(i)){o=new Array(i.length);for(var t=0;t<i.length;t++)o[t]=i[t]}else for(var n in o={},i)h.call(i,n)&&(o[n]=i[n]);else o=i}))},$digest:function(){var r,s,l,c,u,h,f,g,b,$=t,A=p.length?m:this,B=[];y("$digest"),a.$$checkUrlChange(),this===m&&null!==n&&(a.defer.cancel(n),w()),i=null;do{u=!1,f=A;for(var C=0;C<p.length;C++){try{(0,(b=p[C]).fn)(b.scope,b.locals)}catch(S){o(S)}i=null}p.length=0;t:do{if(c=!f.$$suspended&&f.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(r=c[c.$$digestWatchIndex])if((s=(0,r.get)(f))===(l=r.last)||(r.eq?lt(s,l):z(s)&&z(l))){if(r===i){u=!1;break t}}else u=!0,i=r,r.last=r.eq?st(s,null):s,(0,r.fn)(s,l===x?s:l,f),$<5&&(B[g=4-$]||(B[g]=[]),B[g].push({msg:G(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:s,oldVal:l}))}catch(S){o(S)}if(!(h=!f.$$suspended&&f.$$watchersCount&&f.$$childHead||f!==A&&f.$$nextSibling))for(;f!==A&&!(h=f.$$nextSibling);)f=f.$parent}while(f=h);if((u||p.length)&&!$--)throw v(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,B)}while(u||p.length);for(v();_<d.length;)try{d[_++]()}catch(S){o(S)}d.length=_=0,a.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&a.$$applicationDestroyed(),g(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,c(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){m.$$phase||p.length||a.defer((function(){p.length&&m.$digest()}),null,"$evalAsync"),p.push({scope:this,fn:s(t),locals:e})},$$postDigest:function(t){d.push(t)},$apply:function(t){try{y("$apply");try{return this.$eval(t)}finally{v()}}catch(e){o(e)}finally{try{m.$digest()}catch(e){throw o(e),e}}},$applyAsync:function(t){var e=this;t&&f.push((function(){e.$eval(t)})),t=s(t),null===n&&(n=a.defer((function(){m.$apply(w)}),null,"$applyAsync"))},$on:function(t,e){var i=this.$$listeners[t];i||(this.$$listeners[t]=i=[]),i.push(e);var n=this;do{n.$$listenerCount[t]||(n.$$listenerCount[t]=0),n.$$listenerCount[t]++}while(n=n.$parent);var o=this;return function(){var n=i.indexOf(e);-1!==n&&(delete i[n],b(o,1,t))}},$emit:function(t,e){var i,n,r,s=[],a=this,l=!1,c={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ht([c],arguments,1);do{for(i=a.$$listeners[t]||s,c.currentScope=a,n=0,r=i.length;n<r;n++)if(i[n])try{i[n].apply(null,u)}catch(h){o(h)}else i.splice(n,1),n--,r--;if(l)break;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var i=this,n=i,r=i,s={name:t,targetScope:i,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!i.$$listenerCount[t])return s;for(var a,l,c,u=ht([s],arguments,1);n=r;){for(s.currentScope=n,l=0,c=(a=n.$$listeners[t]||[]).length;l<c;l++)if(a[l])try{a[l].apply(null,u)}catch(h){o(h)}else a.splice(l,1),l--,c--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==i&&n.$$nextSibling))for(;n!==i&&!(r=n.$$nextSibling);)n=n.$parent}return s.currentScope=null,s}};var m=new u,p=m.$$asyncQueue=[],d=m.$$postDigestQueue=[],f=m.$$applyAsyncQueue=[],_=0;return m;function y(t){if(m.$$phase)throw e("inprog","{0} already in progress",m.$$phase);m.$$phase=t}function v(){m.$$phase=null}function g(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function b(t,e,i){do{t.$$listenerCount[i]-=e,0===t.$$listenerCount[i]&&delete t.$$listenerCount[i]}while(t=t.$parent)}function x(){}function w(){for(;f.length;)try{f.shift()()}catch(t){o(t)}n=null}}]}function Wn(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return R(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return R(t)?(e=t,this):e},this.$get=function(){return function(i,n){var o=n?e:t,r=ho(i&&i.trim()).href;return""===r||r.match(o)?i:"unsafe:"+r}}}zn.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},En(t,e.$filter);var i,n="";if(this.stage="assign",i=Pn(t)){this.state.computing="assign";var o=this.nextId();this.recurse(i,o),this.return_(o),n="fn.assign="+this.generateFunction("assign","s,v,l")}var r=Mn(t.body);e.stage="inputs",A(r,(function(t,i){var n="fn"+i;e.state[n]={vars:[],body:[],own:{}},e.state.computing=n;var o=e.nextId();e.recurse(t,o),e.return_(o),e.state.inputs.push({name:n,isPure:t.isPure}),t.watchId=i})),this.state.computing="fn",this.stage="main",this.recurse(t);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,xn,Cn,Sn);return this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,i=this;return A(e,(function(e){t.push("var "+e.name+"="+i.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return A(this.state.filters,(function(i,n){t.push(i+"=$filter("+e.escape(n)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,i,n,o,r){var s,a,l,c,u,h=this;if(n=n||I,!r&&R(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,i,n,o,!0));switch(t.type){case Bn.Program:A(t.body,(function(e,i){h.recurse(e.expression,void 0,void 0,(function(t){a=t})),i!==t.body.length-1?h.current().body.push(a,";"):h.return_(a)}));break;case Bn.Literal:c=this.escape(t.value),this.assign(e,c),n(e||c);break;case Bn.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){a=t})),c=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,c),n(c);break;case Bn.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){s=t})),this.recurse(t.right,void 0,void 0,(function(t){a=t})),c="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,c),n(c);break;case Bn.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),n(e);break;case Bn.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),n(e);break;case Bn.Identifier:e=e||this.nextId(),i&&(i.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),i.computed=!1,i.name=t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),(function(){h.if_("inputs"===h.stage||"s",(function(){o&&1!==o&&h.if_(h.isNull(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))}))}),e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),n(e);break;case Bn.MemberExpression:s=i&&(i.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,s,void 0,(function(){h.if_(h.notNull(s),(function(){t.computed?(a=h.nextId(),h.recurse(t.property,a),h.getStringValue(a),o&&1!==o&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),c=h.computedMember(s,a),h.assign(e,c),i&&(i.computed=!0,i.name=a)):(o&&1!==o&&h.if_(h.isNull(h.nonComputedMember(s,t.property.name)),h.lazyAssign(h.nonComputedMember(s,t.property.name),"{}")),c=h.nonComputedMember(s,t.property.name),h.assign(e,c),i&&(i.computed=!1,i.name=t.property.name))}),(function(){h.assign(e,"undefined")})),n(e)}),!!o);break;case Bn.CallExpression:e=e||this.nextId(),t.filter?(a=h.filter(t.callee.name),l=[],A(t.arguments,(function(t){var e=h.nextId();h.recurse(t,e),l.push(e)})),c=a+"("+l.join(",")+")",h.assign(e,c),n(e)):(a=h.nextId(),s={},l=[],h.recurse(t.callee,a,s,(function(){h.if_(h.notNull(a),(function(){A(t.arguments,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c=s.name?h.member(s.context,s.name,s.computed)+"("+l.join(",")+")":a+"("+l.join(",")+")",h.assign(e,c)}),(function(){h.assign(e,"undefined")})),n(e)})));break;case Bn.AssignmentExpression:a=this.nextId(),s={},this.recurse(t.left,void 0,s,(function(){h.if_(h.notNull(s.context),(function(){h.recurse(t.right,a),c=h.member(s.context,s.name,s.computed)+t.operator+a,h.assign(e,c),n(e||c)}))}),1);break;case Bn.ArrayExpression:l=[],A(t.elements,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c="["+l.join(",")+"]",this.assign(e,c),n(e||c);break;case Bn.ObjectExpression:l=[],u=!1,A(t.properties,(function(t){t.computed&&(u=!0)})),u?(e=e||this.nextId(),this.assign(e,"{}"),A(t.properties,(function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===Bn.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)}))):(A(t.properties,(function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(h.escape(e.key.type===Bn.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),c="{"+l.join(",")+"}",this.assign(e,c)),n(e||c);break;case Bn.ThisExpression:this.assign(e,"s"),n(e||"s");break;case Bn.LocalsExpression:this.assign(e,"l"),n(e||"l");break;case Bn.NGValueParameter:this.assign(e,"v"),n(e||"v")}},getHasOwnProperty:function(t,e){var i=t+"."+e,n=this.current().own;return n.hasOwnProperty(i)||(n[i]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[i]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,i){if(!0===t)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),i&&(n.push("else{"),i(),n.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,i){return i?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,i,n,o,r){var s=this;return function(){s.recurse(t,e,i,n,o,r)}},lazyAssign:function(t,e){var i=this;return function(){i.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(q(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(N(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw gn("esc","IMPOSSIBLE")},nextId:function(t,e){var i="v"+this.state.nextId++;return t||this.current().vars.push(i+(e?"="+e:"")),i},current:function(){return this.state[this.state.computing]}},Fn.prototype={compile:function(t){var e,i,n=this;En(t,n.$filter),(e=Pn(t))&&(i=this.recurse(e));var o,r=Mn(t.body);r&&(o=[],A(r,(function(t,e){var i=n.recurse(t);i.isPure=t.isPure,t.input=i,o.push(i),t.watchId=e})));var s=[];A(t.body,(function(t){s.push(n.recurse(t.expression))}));var a=0===t.body.length?I:1===t.body.length?s[0]:function(t,e){var i;return A(s,(function(n){i=n(t,e)})),i};return i&&(a.assign=function(t,e,n){return i(t,n,e)}),o&&(a.inputs=o),a},recurse:function(t,e,i){var n,o,r,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Bn.Literal:return this.value(t.value,e);case Bn.UnaryExpression:return o=this.recurse(t.argument),this["unary"+t.operator](o,e);case Bn.BinaryExpression:case Bn.LogicalExpression:return n=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](n,o,e);case Bn.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Bn.Identifier:return s.identifier(t.name,e,i);case Bn.MemberExpression:return n=this.recurse(t.object,!1,!!i),t.computed||(o=t.property.name),t.computed&&(o=this.recurse(t.property)),t.computed?this.computedMember(n,o,e,i):this.nonComputedMember(n,o,e,i);case Bn.CallExpression:return r=[],A(t.arguments,(function(t){r.push(s.recurse(t))})),t.filter&&(o=this.$filter(t.callee.name)),t.filter||(o=this.recurse(t.callee,!0)),t.filter?function(t,i,n,s){for(var a=[],l=0;l<r.length;++l)a.push(r[l](t,i,n,s));var c=o.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:c}:c}:function(t,i,n,s){var a,l=o(t,i,n,s);if(null!=l.value){for(var c=[],u=0;u<r.length;++u)c.push(r[u](t,i,n,s));a=l.value.apply(l.context,c)}return e?{value:a}:a};case Bn.AssignmentExpression:return n=this.recurse(t.left,!0,1),o=this.recurse(t.right),function(t,i,r,s){var a=n(t,i,r,s),l=o(t,i,r,s);return a.context[a.name]=l,e?{value:l}:l};case Bn.ArrayExpression:return r=[],A(t.elements,(function(t){r.push(s.recurse(t))})),function(t,i,n,o){for(var s=[],a=0;a<r.length;++a)s.push(r[a](t,i,n,o));return e?{value:s}:s};case Bn.ObjectExpression:return r=[],A(t.properties,(function(t){t.computed?r.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):r.push({key:t.key.type===Bn.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})})),function(t,i,n,o){for(var s={},a=0;a<r.length;++a)r[a].computed?s[r[a].key(t,i,n,o)]=r[a].value(t,i,n,o):s[r[a].key]=r[a].value(t,i,n,o);return e?{value:s}:s};case Bn.ThisExpression:return function(t){return e?{value:t}:t};case Bn.LocalsExpression:return function(t,i){return e?{value:i}:i};case Bn.NGValueParameter:return function(t,i,n){return e?{value:n}:n}}},"unary+":function(t,e){return function(i,n,o,r){var s=t(i,n,o,r);return s=R(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(i,n,o,r){var s=t(i,n,o,r);return s=R(s)?-s:-0,e?{value:s}:s}},"unary!":function(t,e){return function(i,n,o,r){var s=!t(i,n,o,r);return e?{value:s}:s}},"binary+":function(t,e,i){return function(n,o,r,s){var a=Sn(t(n,o,r,s),e(n,o,r,s));return i?{value:a}:a}},"binary-":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s),l=e(n,o,r,s),c=(R(a)?a:0)-(R(l)?l:0);return i?{value:c}:c}},"binary*":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)*e(n,o,r,s);return i?{value:a}:a}},"binary/":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)/e(n,o,r,s);return i?{value:a}:a}},"binary%":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)%e(n,o,r,s);return i?{value:a}:a}},"binary===":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)===e(n,o,r,s);return i?{value:a}:a}},"binary!==":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)!==e(n,o,r,s);return i?{value:a}:a}},"binary==":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)==e(n,o,r,s);return i?{value:a}:a}},"binary!=":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)!=e(n,o,r,s);return i?{value:a}:a}},"binary<":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)<e(n,o,r,s);return i?{value:a}:a}},"binary>":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)>e(n,o,r,s);return i?{value:a}:a}},"binary<=":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)<=e(n,o,r,s);return i?{value:a}:a}},"binary>=":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)>=e(n,o,r,s);return i?{value:a}:a}},"binary&&":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)&&e(n,o,r,s);return i?{value:a}:a}},"binary||":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)||e(n,o,r,s);return i?{value:a}:a}},"ternary?:":function(t,e,i,n){return function(o,r,s,a){var l=t(o,r,s,a)?e(o,r,s,a):i(o,r,s,a);return n?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,i){return function(n,o,r,s){var a=o&&t in o?o:n;i&&1!==i&&a&&null==a[t]&&(a[t]={});var l=a?a[t]:void 0;return e?{context:a,name:t,value:l}:l}},computedMember:function(t,e,i,n){return function(o,r,s,a){var l,c,u=t(o,r,s,a);return null!=u&&(l=xn(l=e(o,r,s,a)),n&&1!==n&&u&&!u[l]&&(u[l]={}),c=u[l]),i?{context:u,name:l,value:c}:c}},nonComputedMember:function(t,e,i,n){return function(o,r,s,a){var l=t(o,r,s,a);n&&1!==n&&l&&null==l[e]&&(l[e]={});var c=null!=l?l[e]:void 0;return i?{context:l,name:e,value:c}:c}},inputs:function(t,e){return function(i,n,o,r){return r?r[e]:t(i,n,o)}}},In.prototype={constructor:In,parse:function(t){var e=this.getAst(t),i=this.astCompiler.compile(e.ast);return i.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Bn.Literal||t.body[0].expression.type===Bn.ArrayExpression||t.body[0].expression.type===Bn.ObjectExpression)}(e.ast),i.constant=function(t){return t.constant}(e.ast),i.oneTime=e.oneTime,i},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Hn=o("$sce"),Gn={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Yn=/_([a-z])/g;function Jn(t){return t.replace(Yn,Kt)}function Zn(t){var e=[];return R(t)&&A(t,(function(t){e.push(function(t){if("self"===t)return t;if(q(t)){if(t.indexOf("***")>-1)throw Hn("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(Y(t))return new RegExp("^"+t.source+"$");throw Hn("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Xn(){this.SCE_CONTEXTS=Gn;var e=["self"],i=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=Zn(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(i=Zn(t)),i},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(n,o){var r=function(t){throw Hn("unsafe","Attempting to use an unsafe value in a safe context.")};function s(e,i){return"self"===e?mo(i,co)||function(e){return mo(e,function(){if(t.document.baseURI)return t.document.baseURI;ao||((ao=t.document.createElement("a")).href=".",ao=ao.cloneNode(!1));return ao.href}())}(i):!!e.exec(i.href)}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(r=n.get("$sanitize"));var l=a(),c={};return c[Gn.HTML]=a(l),c[Gn.CSS]=a(l),c[Gn.MEDIA_URL]=a(l),c[Gn.URL]=a(c[Gn.MEDIA_URL]),c[Gn.JS]=a(l),c[Gn.RESOURCE_URL]=a(c[Gn.URL]),{trustAs:function(t,e){var i=c.hasOwnProperty(t)?c[t]:null;if(!i)throw Hn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||j(e)||""===e)return e;if("string"!=typeof e)throw Hn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new i(e)},getTrusted:function(t,n){if(null===n||j(n)||""===n)return n;var a=c.hasOwnProperty(t)?c[t]:null;if(a&&n instanceof a)return n.$$unwrapTrustedValue();if(G(n.$$unwrapTrustedValue)&&(n=n.$$unwrapTrustedValue()),t===Gn.MEDIA_URL||t===Gn.URL)return o(n.toString(),t===Gn.MEDIA_URL);if(t===Gn.RESOURCE_URL){if(function(t){var n,o,r=ho(t.toString()),a=!1;for(n=0,o=e.length;n<o;n++)if(s(e[n],r)){a=!0;break}if(a)for(n=0,o=i.length;n<o;n++)if(s(i[n],r)){a=!1;break}return a}(n))return n;throw Hn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",n.toString())}if(t===Gn.HTML)return r(n);throw Hn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Kn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,i){if(t&&r<8)throw Hn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var n=Nt(Gn);n.isEnabled=function(){return t},n.trustAs=i.trustAs,n.getTrusted=i.getTrusted,n.valueOf=i.valueOf,t||(n.trustAs=n.getTrusted=function(t,e){return e},n.valueOf=k),n.parseAs=function(t,i){var o=e(i);return o.literal&&o.constant?o:e(i,(function(e){return n.getTrusted(t,e)}))};var o=n.parseAs,s=n.getTrusted,a=n.trustAs;return A(Gn,(function(t,e){var i=m(e);n[Jn("parse_as_"+i)]=function(e){return o(t,e)},n[Jn("get_trusted_"+i)]=function(e){return s(t,e)},n[Jn("trust_as_"+i)]=function(e){return a(t,e)}})),n}]}function Qn(){this.$get=["$window","$document",function(t,e){var i={},n=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,o=P((/android (\d+)/.exec(m((t.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},l=a.body&&a.body.style,c=!1,u=!1;return l&&(c=!(!("transition"in l)&&!("webkitTransition"in l)),u=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!n||o<4||s),hasEvent:function(t){if("input"===t&&r)return!1;if(j(i[t])){var e=a.createElement("div");i[t]="on"+t in e}return i[t]},csp:ct(),transitions:c,animations:u,android:o}}]}function to(){this.$get=V((function(t){return new eo(t)}))}function eo(t){var e=this,i={},n=[],o=e.ALL_TASKS_TYPE="$$all$$",r=e.DEFAULT_TASK_TYPE="$$default$$";function s(){var t=n.pop();return t&&t.cb}function a(t){for(var e=n.length-1;e>=0;--e){var i=n[e];if(i.type===t)return n.splice(e,1),i.cb}}e.completeTask=function(e,n){n=n||r;try{e()}finally{!function(t){i[t=t||r]&&(i[t]--,i[o]--)}(n);var l=i[n],c=i[o];if(!c||!l)for(var u,h=c?a:s;u=h(n);)try{u()}catch(m){t.error(m)}}},e.incTaskCount=function(t){i[t=t||r]=(i[t]||0)+1,i[o]=(i[o]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){i[e=e||o]?n.push({type:e,cb:t}):t()}}var io=o("$templateRequest");function no(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,i,n,o,r){function s(a,l){s.totalPendingRequests++,q(a)&&!j(i.get(a))||(a=r.getTrustedResourceUrl(a));var c=n.defaults&&n.defaults.transformResponse;return W(c)?c=c.filter((function(t){return t!==Di})):c===Di&&(c=null),n.get(a,M({cache:i,transformResponse:c},t)).finally((function(){s.totalPendingRequests--})).then((function(t){return i.put(a,t.data)}),(function(t){l||(t=io("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText),e(t));return o.reject(t)}))}return s.totalPendingRequests=0,s}]}function oo(){this.$get=["$rootScope","$browser","$location",function(t,e,i){var n={findBindings:function(t,e,i){var n=t.getElementsByClassName("ng-binding"),o=[];return A(n,(function(t){var n=b.element(t).data("$binding");n&&A(n,(function(n){i?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(n)&&o.push(t):-1!==n.indexOf(e)&&o.push(t)}))})),o},findModels:function(t,e,i){for(var n=["ng-","data-ng-","ng\\:"],o=0;o<n.length;++o){var r="["+n[o]+"model"+(i?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(r);if(s.length)return s}},getLocation:function(){return i.url()},setLocation:function(e){e!==i.url()&&(i.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return n}]}var ro=o("$timeout");function so(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,i,n,o){var r={};function s(s,a,l){G(s)||(l=a,a=s,s=I);var c,u=mt(arguments,3),h=R(l)&&!l,m=(h?n:i).defer(),p=m.promise;return c=e.defer((function(){try{m.resolve(s.apply(null,u))}catch(e){m.reject(e),o(e)}finally{delete r[p.$$timeoutId]}h||t.$apply()}),a,"$timeout"),p.$$timeoutId=c,r[c]=m,p}return s.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ro("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!r.hasOwnProperty(t.$$timeoutId))return!1;var i=t.$$timeoutId,n=r[i];return qn(n.promise),n.reject("canceled"),delete r[i],e.defer.cancel(i)},s}]}var ao,lo=t.document.createElement("a"),co=ho(t.location.href);lo.href="http://[::1]";var uo="[::1]"===lo.hostname;function ho(t){if(!q(t))return t;var e=t;r&&(lo.setAttribute("href",e),e=lo.href),lo.setAttribute("href",e);var i=lo.hostname;return!uo&&i.indexOf(":")>-1&&(i="["+i+"]"),{href:lo.href,protocol:lo.protocol?lo.protocol.replace(/:$/,""):"",host:lo.host,search:lo.search?lo.search.replace(/^\?/,""):"",hash:lo.hash?lo.hash.replace(/^#/,""):"",hostname:i,port:lo.port,pathname:"/"===lo.pathname.charAt(0)?lo.pathname:"/"+lo.pathname}}function mo(t,e){return t=ho(t),e=ho(e),t.protocol===e.protocol&&t.host===e.host}function po(){this.$get=V(t)}function fo(t){var e=t[0]||{},i={},n="";function o(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,r,s,a,l,c=function(t){try{return t.cookie||""}catch(e){return""}}(e);if(c!==n)for(t=(n=c).split("; "),i={},s=0;s<t.length;s++)(a=(r=t[s]).indexOf("="))>0&&(l=o(r.substring(0,a)),j(i[l])&&(i[l]=o(r.substring(a+1))));return i}}function _o(){this.$get=fo}function yo(t){var e="Filter";function i(n,o){if(D(n)){var r={};return A(n,(function(t,e){r[e]=i(e,t)})),r}return t.factory(n+e,o)}this.register=i,this.$get=["$injector",function(t){return function(i){return t.get(i+e)}}],i("currency",xo),i("date",Fo),i("filter",vo),i("json",Io),i("limitTo",Lo),i("lowercase",ko),i("number",$o),i("orderBy",Ro),i("uppercase",Vo)}function vo(){return function(t,e,i,n){if(!$(t)){if(null==t)return t;throw o("filter")("notarray","Expected array but received: {0}",t)}var r,s;switch(n=n||"$",bo(e)){case"function":r=e;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":r=function(t,e,i,n){var o=D(t)&&i in t;!0===e?e=lt:G(e)||(e=function(t,e){return!j(t)&&(null===t||null===e?t===e:!(D(e)||D(t)&&!L(t))&&(t=m(""+t),e=m(""+e),-1!==t.indexOf(e)))});return function(r){return o&&!D(r)?go(r,t[i],e,i,!1):go(r,t,e,i,n)}}(e,i,n,s);break;default:return t}return Array.prototype.filter.call(t,r)}}function go(t,e,i,n,o,r){var s=bo(t),a=bo(e);if("string"===a&&"!"===e.charAt(0))return!go(t,e.substring(1),i,n,o);if(W(t))return t.some((function(t){return go(t,e,i,n,o)}));switch(s){case"object":var l;if(o){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&go(t[l],e,i,n,!0))return!0;return!r&&go(t,e,i,n,!1)}if("object"===a){for(l in e){var c=e[l];if(!G(c)&&!j(c)){var u=l===n;if(!go(u?t:t[l],c,i,n,u,u))return!1}}return!0}return i(t,e);case"function":return!1;default:return i(t,e)}}function bo(t){return null===t?"null":typeof t}fo.$inject=["$document"],yo.$inject=["$provide"];function xo(t){var e=t.NUMBER_FORMATS;return function(t,i,n){j(i)&&(i=e.CURRENCY_SYM),j(n)&&(n=e.PATTERNS[1].maxFrac);var o=i?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:Ao(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,n).replace(o,i)}}function $o(t){var e=t.NUMBER_FORMATS;return function(t,i){return null==t?t:Ao(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,i)}}function Ao(t,e,i,n,o){if(!q(t)&&!N(t)||isNaN(t))return"";var r,s=!isFinite(t),a=!1,l=Math.abs(t)+"",c="";if(s)c="∞";else{r=function(t){var e,i,n,o,r,s=0;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;"0"===t.charAt(n);n++);if(n===(r=t.length))e=[0],i=1;else{for(r--;"0"===t.charAt(r);)r--;for(i-=n,e=[],o=0;n<=r;n++,o++)e[o]=+t.charAt(n)}return i>22&&(e=e.splice(0,21),s=i-1,i=1),{d:e,e:s,i:i}}(l),function(t,e,i,n){var o=t.d,r=o.length-t.i,s=(e=j(e)?Math.min(Math.max(i,r),n):+e)+t.i,a=o[s];if(s>0){o.splice(Math.max(t.i,s));for(var l=s;l<o.length;l++)o[l]=0}else{r=Math.max(0,r),t.i=1,o.length=Math.max(1,s=e+1),o[0]=0;for(var c=1;c<s;c++)o[c]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)o.unshift(0),t.i++;o.unshift(1),t.i++}else o[s-1]++;for(;r<Math.max(0,e);r++)o.push(0);var h=o.reduceRight((function(t,e,i,n){return e+=t,n[i]=e%10,Math.floor(e/10)}),0);h&&(o.unshift(h),t.i++)}(r,o,e.minFrac,e.maxFrac);var u=r.d,h=r.i,m=r.e,p=[];for(a=u.reduce((function(t,e){return t&&!e}),!0);h<0;)u.unshift(0),h++;h>0?p=u.splice(h,u.length):(p=u,u=[0]);var d=[];for(u.length>=e.lgSize&&d.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)d.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&d.unshift(u.join("")),c=d.join(i),p.length&&(c+=n+p.join("")),m&&(c+="e+"+m)}return t<0&&!a?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function wo(t,e,i,n){var o="";for((t<0||n&&t<=0)&&(n?t=1-t:(t=-t,o="-")),t=""+t;t.length<e;)t="0"+t;return i&&(t=t.substr(t.length-e)),o+t}function Bo(t,e,i,n,o){return i=i||0,function(r){var s=r["get"+t]();return(i>0||s>-i)&&(s+=i),0===s&&-12===i&&(s=12),wo(s,e,n,o)}}function Co(t,e,i){return function(n,o){var r=n["get"+t]();return o[p((i?"STANDALONE":"")+(e?"SHORT":"")+t)][r]}}function So(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Eo(t){return function(e){var i,n=So(e.getFullYear()),o=+(i=e,new Date(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay())))-+n;return wo(1+Math.round(o/6048e5),t)}}function Mo(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}xo.$inject=["$locale"],$o.$inject=["$locale"];var To={yyyy:Bo("FullYear",4,0,!1,!0),yy:Bo("FullYear",2,0,!0,!0),y:Bo("FullYear",1,0,!1,!0),MMMM:Co("Month"),MMM:Co("Month",!0),MM:Bo("Month",2,1),M:Bo("Month",1,1),LLLL:Co("Month",!1,!0),dd:Bo("Date",2),d:Bo("Date",1),HH:Bo("Hours",2),H:Bo("Hours",1),hh:Bo("Hours",2,-12),h:Bo("Hours",1,-12),mm:Bo("Minutes",2),m:Bo("Minutes",1),ss:Bo("Seconds",2),s:Bo("Seconds",1),sss:Bo("Milliseconds",3),EEEE:Co("Day"),EEE:Co("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,i){var n=-1*i,o=n>=0?"+":"";return o+=wo(Math[n>0?"floor":"ceil"](n/60),2)+wo(Math.abs(n%60),2)},ww:Eo(2),w:Eo(1),G:Mo,GG:Mo,GGG:Mo,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Po=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,zo=/^-?\d+$/;function Fo(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(i,n,o){var r,s,a="",l=[];if(n=n||"mediumDate",n=t.DATETIME_FORMATS[n]||n,q(i)&&(i=zo.test(i)?P(i):function(t){var i;if(i=t.match(e)){var n=new Date(0),o=0,r=0,s=i[8]?n.setUTCFullYear:n.setFullYear,a=i[8]?n.setUTCHours:n.setHours;i[9]&&(o=P(i[9]+i[10]),r=P(i[9]+i[11])),s.call(n,P(i[1]),P(i[2])-1,P(i[3]));var l=P(i[4]||0)-o,c=P(i[5]||0)-r,u=P(i[6]||0),h=Math.round(1e3*parseFloat("0."+(i[7]||0)));return a.call(n,l,c,u,h),n}return t}(i)),N(i)&&(i=new Date(i)),!U(i)||!isFinite(i.getTime()))return i;for(;n;)(s=Po.exec(n))?n=(l=ht(l,s,1)).pop():(l.push(n),n=null);var c=i.getTimezoneOffset();return o&&(c=vt(o,c),i=bt(i,o,!0)),A(l,(function(e){a+=(r=To[e])?r(i,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),a}}function Io(){return function(t,e){return j(e)&&(e=2),ft(t,e)}}Fo.$inject=["$locale"];var ko=V(m),Vo=V(p);function Lo(){return function(t,e,i){return e=Math.abs(Number(e))===1/0?Number(e):P(e),z(e)?t:(N(t)&&(t=t.toString()),$(t)?(i=(i=!i||isNaN(i)?0:P(i))<0?Math.max(0,t.length+i):i,e>=0?jo(t,i,i+e):0===i?jo(t,e,t.length):jo(t,Math.max(0,i+e),i)):t)}}function jo(t,e,i){return q(t)?t.slice(e,i):d.call(t,e,i)}function Ro(t){return function(n,r,s,a){if(null==n)return n;if(!$(n))throw o("orderBy")("notarray","Expected array but received: {0}",n);W(r)||(r=[r]),0===r.length&&(r=["+"]);var l=r.map((function(e){var i=1,n=k;if(G(e))n=e;else if(q(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(i="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=t(e)).constant)){var o=n();n=function(t){return t[o]}}return{get:n,descending:i}})),c=s?-1:1,u=G(a)?a:i,h=Array.prototype.map.call(n,(function(t,i){return{value:t,tieBreaker:{value:i,type:"number",index:i},predicateValues:l.map((function(n){return function(t,i){var n=typeof t;null===t?n="null":"object"===n&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(L(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:n,index:i}}(n.get(t),i)}))}}));return h.sort((function(t,e){for(var n=0,o=l.length;n<o;n++){var r=u(t.predicateValues[n],e.predicateValues[n]);if(r)return r*l[n].descending*c}return(u(t.tieBreaker,e.tieBreaker)||i(t.tieBreaker,e.tieBreaker))*c})),n=h.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){var i=0,n=t.type,o=e.type;if(n===o){var r=t.value,s=e.value;"string"===n?(r=r.toLowerCase(),s=s.toLowerCase()):"object"===n&&(D(r)&&(r=t.index),D(s)&&(s=e.index)),r!==s&&(i=r<s?-1:1)}else i="undefined"===n?1:"undefined"===o?-1:"null"===n?1:"null"===o||n<o?-1:1;return i}}function Do(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",V(t)}Ro.$inject=["$parse"];var Oo=V({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var i="[object SVGAnimatedString]"===y.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(i)||t.preventDefault()}))}}}}),qo={};A(ze,(function(t,e){if("multiple"!==t){var i=bi("ng-"+e),n=o;"checked"===t&&(n=function(t,e,n){n.ngModel!==n[i]&&o(t,0,n)}),qo[i]=function(){return{restrict:"A",priority:100,link:n}}}function o(t,n,o){t.$watch(o[i],(function(t){o.$set(e,!!t)}))}})),A(Ie,(function(t,e){qo[e]=function(){return{priority:100,link:function(t,i,n){if("ngPattern"===e&&"/"===n.ngPattern.charAt(0)){var o=n.ngPattern.match(c);if(o)return void n.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(n[e],(function(t){n.$set(e,t)}))}}}})),A(["src","srcset","href"],(function(t){var e=bi("ng-"+t);qo[e]=["$sce",function(i){return{priority:99,link:function(n,o,s){var a=t,l=t;"href"===t&&"[object SVGAnimatedString]"===y.call(o.prop("href"))&&(l="xlinkHref",s.$attr[l]="xlink:href",a=null),s.$set(e,i.getTrustedMediaUrl(s[e])),s.$observe(e,(function(e){e?(s.$set(l,e),r&&a&&o.prop(a,s[l])):"href"===t&&s.$set(l,null)}))}}}]}));var No={$addControl:I,$getControls:V([]),$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I,$$setSubmitted:I},Uo="ng-pending",Wo="ng-submitted";function Ho(t,e,i,n,o){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=o(e.name||e.ngForm||"")(i),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=No,this.$$element=t,this.$$animate=n,Zo(this)}Ho.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Ho.prototype={$rollbackViewValue:function(){A(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){A(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){jt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Nt(this.$$controls)},$$renameControl:function(t,e){var i=t.$name;this[i]===t&&delete this[i],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],A(this.$pending,(function(e,i){this.$setValidity(i,null,t)}),this),A(this.$error,(function(e,i){this.$setValidity(i,null,t)}),this),A(this.$$success,(function(e,i){this.$setValidity(i,null,t)}),this),rt(this.$$controls,t),t.$$parentForm=No},$setDirty:function(){this.$$animate.removeClass(this.$$element,Wr),this.$$animate.addClass(this.$$element,Hr),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Wr,Hr+" "+Wo),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,A(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){A(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==No;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Wo),this.$submitted=!0,A(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Xo({clazz:Ho,set:function(t,e,i){var n=t[e];n?-1===n.indexOf(i)&&n.push(i):t[e]=[i]},unset:function(t,e,i){var n=t[e];n&&(rt(n,i),0===n.length&&delete t[e])}});var Go=function(t){return["$timeout","$parse",function(e,i){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Ho,compile:function(i,o){i.addClass(Wr).addClass(Nr);var r=o.name?"name":!(!t||!o.ngForm)&&"ngForm";return{pre:function(t,i,o,s){var a=s[0];if(!("action"in o)){var l=function(e){t.$apply((function(){a.$commitViewValue(),a.$setSubmitted()})),e.preventDefault()};i[0].addEventListener("submit",l),i.on("$destroy",(function(){e((function(){i[0].removeEventListener("submit",l)}),0,!1)}))}(s[1]||a.$$parentForm).$addControl(a);var c=r?n(a.$name):I;r&&(c(t,a),o.$observe(r,(function(e){a.$name!==e&&(c(t,void 0),a.$$parentForm.$$renameControl(a,e),(c=n(a.$name))(t,a))}))),i.on("$destroy",(function(){a.$$parentForm.$removeControl(a),c(t,void 0),M(a,No)}))}}}};function n(t){return""===t?i('this[""]').assign:i(t).assign||I}}]},Yo=Go(),Jo=Go(!0);function Zo(t){t.$$classCache={},t.$$classCache[Ur]=!(t.$$classCache[Nr]=t.$$element.hasClass(Nr))}function Xo(t){var e=t.clazz,i=t.set,n=t.unset;function o(t,e,i){i&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!i&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function r(t,e,i){e=e?"-"+Ft(e,"-"):"",o(t,Nr+e,!0===i),o(t,Ur+e,!1===i)}e.prototype.$setValidity=function(t,e,s){var a;j(e)?function(t,e,n,o){t[e]||(t[e]={});i(t[e],n,o)}(this,"$pending",t,s):function(t,e,i,o){t[e]&&n(t[e],i,o);Ko(t[e])&&(t[e]=void 0)}(this,"$pending",t,s),X(e)?e?(n(this.$error,t,s),i(this.$$success,t,s)):(i(this.$error,t,s),n(this.$$success,t,s)):(n(this.$error,t,s),n(this.$$success,t,s)),this.$pending?(o(this,Uo,!0),this.$valid=this.$invalid=void 0,r(this,"",null)):(o(this,Uo,!1),this.$valid=Ko(this.$error),this.$invalid=!this.$valid,r(this,"",this.$valid)),r(this,t,a=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,a,this)}}function Ko(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Qo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,tr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,er=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ir=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,nr=/^(\d{4,})-(\d{2})-(\d{2})$/,or=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,rr=/^(\d{4,})-W(\d\d)$/,sr=/^(\d{4,})-(\d\d)$/,ar=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,lr=Dt();A("date,datetime-local,month,time,week".split(","),(function(t){lr[t]=!0}));var cr={text:function(t,e,i,n,o,r){hr(t,e,i,n,o,r),ur(n)},date:pr("date",nr,mr(nr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":pr("datetimelocal",or,mr(or,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:pr("time",ar,mr(ar,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:pr("week",rr,(function(t,e){if(U(t))return t;if(q(t)){rr.lastIndex=0;var i=rr.exec(t);if(i){var n=+i[1],o=+i[2],r=0,s=0,a=0,l=0,c=So(n),u=7*(o-1);return e&&(r=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(n,0,c.getDate()+u,r,s,a,l)}}return NaN}),"yyyy-Www"),month:pr("month",sr,mr(sr,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,i,n,o,r,s,a){var l;if(dr(t,e,i,n,"number"),fr(n),hr(t,e,i,n,o,r),R(i.min)||i.ngMin){var c=i.min||a(i.ngMin)(t);l=_r(c),n.$validators.min=function(t,e){return n.$isEmpty(e)||j(l)||e>=l},i.$observe("min",(function(t){t!==c&&(l=_r(t),c=t,n.$validate())}))}if(R(i.max)||i.ngMax){var u=i.max||a(i.ngMax)(t),h=_r(u);n.$validators.max=function(t,e){return n.$isEmpty(e)||j(h)||e<=h},i.$observe("max",(function(t){t!==u&&(h=_r(t),u=t,n.$validate())}))}if(R(i.step)||i.ngStep){var m=i.step||a(i.ngStep)(t),p=_r(m);n.$validators.step=function(t,e){return n.$isEmpty(e)||j(p)||gr(e,l||0,p)},i.$observe("step",(function(t){t!==m&&(p=_r(t),m=t,n.$validate())}))}},url:function(t,e,i,n,o,r){hr(t,e,i,n,o,r),ur(n),n.$validators.url=function(t,e){var i=t||e;return n.$isEmpty(i)||tr.test(i)}},email:function(t,e,i,n,o,r){hr(t,e,i,n,o,r),ur(n),n.$validators.email=function(t,e){var i=t||e;return n.$isEmpty(i)||er.test(i)}},radio:function(t,e,i,n){var o=!i.ngTrim||"false"!==tt(i.ngTrim);j(i.name)&&e.attr("name",C());e.on("change",(function(t){var r;e[0].checked&&(r=i.value,o&&(r=tt(r)),n.$setViewValue(r,t&&t.type))})),n.$render=function(){var t=i.value;o&&(t=tt(t)),e[0].checked=t===n.$viewValue},i.$observe("value",n.$render)},range:function(t,e,i,n,o,r){dr(t,e,i,n,"range"),fr(n),hr(t,e,i,n,o,r);var s=n.$$hasNativeValidators&&"range"===e[0].type,a=s?0:void 0,l=s?100:void 0,c=s?1:void 0,u=e[0].validity,h=R(i.min),m=R(i.max),p=R(i.step),d=n.$render;n.$render=s&&R(u.rangeUnderflow)&&R(u.rangeOverflow)?function(){d(),n.$setViewValue(e.val())}:d,h&&(a=_r(i.min),n.$validators.min=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||j(a)||e>=a},f("min",(function(t){if(a=_r(t),z(n.$modelValue))return;if(s){var i=e.val();a>i&&(i=a,e.val(i)),n.$setViewValue(i)}else n.$validate()})));m&&(l=_r(i.max),n.$validators.max=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||j(l)||e<=l},f("max",(function(t){if(l=_r(t),z(n.$modelValue))return;if(s){var i=e.val();l<i&&(e.val(l),i=l<a?a:l),n.$setViewValue(i)}else n.$validate()})));p&&(c=_r(i.step),n.$validators.step=s?function(){return!u.stepMismatch}:function(t,e){return n.$isEmpty(e)||j(c)||gr(e,a||0,c)},f("step",(function(t){if(c=_r(t),z(n.$modelValue))return;s?n.$viewValue!==e.val()&&n.$setViewValue(e.val()):n.$validate()})));function f(t,n){e.attr(t,i[t]);var o=i[t];i.$observe(t,(function(t){t!==o&&(o=t,n(t))}))}},checkbox:function(t,e,i,n,o,r,s,a){var l=br(a,t,"ngTrueValue",i.ngTrueValue,!0),c=br(a,t,"ngFalseValue",i.ngFalseValue,!1);e.on("change",(function(t){n.$setViewValue(e[0].checked,t&&t.type)})),n.$render=function(){e[0].checked=n.$viewValue},n.$isEmpty=function(t){return!1===t},n.$formatters.push((function(t){return lt(t,l)})),n.$parsers.push((function(t){return t?l:c}))},hidden:I,button:I,submit:I,reset:I,file:I};function ur(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function hr(t,e,i,n,o,r){var s,a=m(e[0].type);if(!o.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionupdate",(function(t){(j(t.data)||""===t.data)&&(l=!1)})),e.on("compositionend",(function(){l=!1,c()}))}var c=function(t){if(s&&(r.defer.cancel(s),s=null),!l){var o=e.val(),c=t&&t.type;"password"===a||i.ngTrim&&"false"===i.ngTrim||(o=tt(o)),(n.$viewValue!==o||""===o&&n.$$hasNativeValidators)&&n.$setViewValue(o,c)}};if(o.hasEvent("input"))e.on("input",c);else{var u=function(t,e,i){s||(s=r.defer((function(){s=null,e&&e.value===i||c(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||u(t,this,this.value)})),o.hasEvent("paste")&&e.on("paste cut drop",u)}e.on("change",c),lr[a]&&n.$$hasNativeValidators&&a===i.type&&e.on("keydown wheel mousedown",(function(t){if(!s){var e=this.validity,i=e.badInput,n=e.typeMismatch;s=r.defer((function(){s=null,e.badInput===i&&e.typeMismatch===n||c(t)}))}})),n.$render=function(){var t=n.$isEmpty(n.$viewValue)?"":n.$viewValue;e.val()!==t&&e.val(t)}}function mr(t,e){return function(i,n){var o,r;if(U(i))return i;if(q(i)){if('"'===i.charAt(0)&&'"'===i.charAt(i.length-1)&&(i=i.substring(1,i.length-1)),Qo.test(i))return new Date(i);if(t.lastIndex=0,o=t.exec(i)){o.shift(),r=n?{yyyy:n.getFullYear(),MM:n.getMonth()+1,dd:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds(),sss:n.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},A(o,(function(t,i){i<e.length&&(r[e[i]]=+t)}));var s=new Date(r.yyyy,r.MM-1,r.dd,r.HH,r.mm,r.ss||0,1e3*r.sss||0);return r.yyyy<100&&s.setFullYear(r.yyyy),s}}return NaN}}function pr(t,e,i,n){return function(o,r,s,a,l,c,u,h){dr(o,r,s,a,t),hr(0,r,s,a,l,c);var m,p,d="time"===t||"datetimelocal"===t;if(a.$parsers.push((function(i){return a.$isEmpty(i)?null:e.test(i)?x(i,m):void(a.$$parserName=t)})),a.$formatters.push((function(t){if(t&&!U(t))throw Xr("datefmt","Expected `{0}` to be a date",t);if(g(t)){m=t;var e=a.$options.getOption("timezone");return e&&(p=e,m=bt(m,e,!0)),function(t,e){var i=n;d&&q(a.$options.getOption("timeSecondsFormat"))&&(i=n.replace("ss.sss",a.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var o=u("date")(t,i,e);d&&a.$options.getOption("timeStripZeroSeconds")&&(o=o.replace(/(?::00)?(?:\.000)?$/,""));return o}(t,e)}return m=null,p=null,""})),R(s.min)||s.ngMin){var f=s.min||h(s.ngMin)(o),_=b(f);a.$validators.min=function(t){return!g(t)||j(_)||i(t)>=_},s.$observe("min",(function(t){t!==f&&(_=b(t),f=t,a.$validate())}))}if(R(s.max)||s.ngMax){var y=s.max||h(s.ngMax)(o),v=b(y);a.$validators.max=function(t){return!g(t)||j(v)||i(t)<=v},s.$observe("max",(function(t){t!==y&&(v=b(t),y=t,a.$validate())}))}function g(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function b(t){return R(t)&&!U(t)?x(t)||void 0:t}function x(t,e){var n=a.$options.getOption("timezone");p&&p!==n&&(e=gt(e,vt(p)));var o=i(t,e);return!isNaN(o)&&n&&(o=bt(o,n)),o}}}function dr(t,e,i,n,o){var r=e[0];(n.$$hasNativeValidators=D(r.validity))&&n.$parsers.push((function(t){var i=e.prop(u)||{};if(!i.badInput&&!i.typeMismatch)return t;n.$$parserName=o}))}function fr(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:ir.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!N(e))throw Xr("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function _r(t){return R(t)&&!N(t)&&(t=parseFloat(t)),z(t)?void 0:t}function yr(t){return(0|t)===t}function vr(t){var e=t.toString(),i=e.indexOf(".");if(-1===i){if(-1<t&&t<1){var n=/e-(\d+)$/.exec(e);if(n)return Number(n[1])}return 0}return e.length-i-1}function gr(t,e,i){var n=Number(t),o=!yr(n),r=!yr(e),s=!yr(i);if(o||r||s){var a=o?vr(n):0,l=r?vr(e):0,c=s?vr(i):0,u=Math.max(a,l,c),h=Math.pow(10,u);n*=h,e*=h,i*=h,o&&(n=Math.round(n)),r&&(e=Math.round(e)),s&&(i=Math.round(i))}return(n-e)%i==0}function br(t,e,i,n,o){var r;if(R(n)){if(!(r=t(n)).constant)throw Xr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",i,n);return r(e)}return o}var xr=["$browser","$sniffer","$filter","$parse",function(t,e,i,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(o,r,s,a){a[0]&&(cr[m(s.type)]||cr.text)(o,r,s,a[0],e,t,i,n)}}}}],$r=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,i){if("hidden"===m(i.type))return{pre:function(e,i,n,o){var r=i[0];r.parentNode&&r.parentNode.insertBefore(r,r.nextSibling),Object.defineProperty&&Object.defineProperty(r,"value",t)}}}}},Ar=/^(true|false|\d+)$/,wr=function(){function t(t,e,i){var n=R(i)?i:9===r?"":null;t.prop("value",n),e.$set("value",i)}return{restrict:"A",priority:100,compile:function(e,i){return Ar.test(i.ngValue)?function(e,i,n){t(i,n,e.$eval(n.ngValue))}:function(e,i,n){e.$watch(n.ngValue,(function(e){t(i,n,e)}))}}}},Br=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,i,n){t.$$addBindingInfo(i,n.ngBind),i=i[0],e.$watch(n.ngBind,(function(t){i.textContent=Ot(t)}))}}}}],Cr=["$interpolate","$compile",function(t,e){return{compile:function(i){return e.$$addBindingClass(i),function(i,n,o){var r=t(n.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(n,r.expressions),n=n[0],o.$observe("ngBindTemplate",(function(t){n.textContent=j(t)?"":t}))}}}}],Sr=["$sce","$parse","$compile",function(t,e,i){return{restrict:"A",compile:function(n,o){var r=e(o.ngBindHtml),s=e(o.ngBindHtml,(function(e){return t.valueOf(e)}));return i.$$addBindingClass(n),function(e,n,o){i.$$addBindingInfo(n,o.ngBindHtml),e.$watch(s,(function(){var i=r(e);n.html(t.getTrustedHtml(i)||"")}))}}}}],Er=V({restrict:"A",require:"ngModel",link:function(t,e,i,n){n.$viewChangeListeners.push((function(){t.$eval(i.ngChange)}))}});function Mr(t,e){var i;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(a,l,c){var u,h=l.data("$classCounts"),m=!0;function p(t,e){var i=[];return A(t,(function(t){(e>0||h[t])&&(h[t]=(h[t]||0)+e,h[t]===+(e>0)&&i.push(t))})),i.join(" ")}h||(h=Dt(),l.data("$classCounts",h)),"ngClass"!==t&&(i||(i=s("$index",(function(t){return 1&t}))),a.$watch(i,(function(t){t===e?(i=p(o(i=u),1),c.$addClass(i)):function(t){t=p(o(t),-1),c.$removeClass(t)}(u);var i;m=t}))),a.$watch(s(c[t],r),(function(t){m===e&&function(t,e){var i=o(t),r=o(e),s=n(i,r),a=n(r,i),l=p(s,-1),u=p(a,1);c.$addClass(u),c.$removeClass(l)}(u,t);u=t}))}}}];function n(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var i=[];t:for(var n=0;n<t.length;n++){for(var o=t[n],r=0;r<e.length;r++)if(o===e[r])continue t;i.push(o)}return i}function o(t){return t&&t.split(" ")}function r(t){if(!t)return t;var e=t;return W(t)?e=t.map(r).join(" "):D(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):q(t)||(e=t+""),e}}var Tr=Mr("",!0),Pr=Mr("Odd",0),zr=Mr("Even",1),Fr=Do({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Ir=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],kr={},Vr={blur:!0,focus:!0};function Lr(t,e,i,n,o,r){return{restrict:"A",compile:function(s,a){var l=t(a[n]);return function(t,n){n.on(o,(function(n){var o=function(){l(t,{$event:n})};if(e.$$phase)if(r)t.$evalAsync(o);else try{o()}catch(s){i(s)}else t.$apply(o)}))}}}}A("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=bi("ng-"+t);kr[e]=["$parse","$rootScope","$exceptionHandler",function(i,n,o){return Lr(i,n,o,e,t,Vr[t])}]}));var jr=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,n,o,r,s){var a,l,c;i.$watch(o.ngIf,(function(i){i?l||s((function(i,r){l=r,i[i.length++]=e.$$createComment("end ngIf",o.ngIf),a={clone:i},t.enter(i,n.parent(),n)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=Rt(a.clone),t.leave(c).done((function(t){!1!==t&&(c=null)})),a=null))}))}}}],Rr=["$templateRequest","$anchorScroll","$animate",function(t,e,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(n,o){var r=o.ngInclude||o.src,s=o.onload||"",a=o.autoscroll;return function(n,o,l,c,u){var h,m,p,d=0,f=function(){m&&(m.remove(),m=null),h&&(h.$destroy(),h=null),p&&(i.leave(p).done((function(t){!1!==t&&(m=null)})),m=p,p=null)};n.$watch(r,(function(r){var l=function(t){!1===t||!R(a)||a&&!n.$eval(a)||e()},m=++d;r?(t(r,!0).then((function(t){if(!n.$$destroyed&&m===d){var e=n.$new();c.template=t;var a=u(e,(function(t){f(),i.enter(t,null,o).done(l)}));p=a,(h=e).$emit("$includeContentLoaded",r),n.$eval(s)}}),(function(){n.$$destroyed||m===d&&(f(),n.$emit("$includeContentError",r))})),n.$emit("$includeContentRequested",r)):(f(),c.template=null)}))}}}}],Dr=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(i,n,o,r){if(y.call(n[0]).match(/SVG/))return n.empty(),void e(he(r.template,t.document).childNodes)(i,(function(t){n.append(t)}),{futureParentElement:n});n.html(r.template),e(n.contents())(i)}}}],Or=Do({priority:450,compile:function(){return{pre:function(t,e,i){t.$eval(i.ngInit)}}}}),qr=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,i,n){var o=i.ngList||", ",r="false"!==i.ngTrim,s=r?tt(o):o;n.$parsers.push((function(t){if(!j(t)){var e=[];return t&&A(t.split(s),(function(t){t&&e.push(r?tt(t):t)})),e}})),n.$formatters.push((function(t){if(W(t))return t.join(o)})),n.$isEmpty=function(t){return!t||!t.length}}}},Nr="ng-valid",Ur="ng-invalid",Wr="ng-pristine",Hr="ng-dirty",Gr="ng-untouched",Yr="ng-touched",Jr="ng-empty",Zr="ng-not-empty",Xr=o("ngModel");function Kr(t,e,i,n,o,r,s,a,l){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(i.name||"",!1)(t),this.$$parentForm=No,this.$options=Qr,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=o(i.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=i,this.$$element=n,this.$$animate=r,this.$$timeout=s,this.$$parse=o,this.$$q=a,this.$$exceptionHandler=e,Zo(this),(c=this).$$scope.$watch((function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e}))}Kr.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Kr.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var i=this.$$parsedNgModel(e);return G(i)&&(i=t(e)),i},this.$$ngModelSet=function(t,i){G(this.$$parsedNgModel(t))?e(t,{$$$p:i}):this.$$parsedNgModelAssign(t,i)}}else if(!this.$$parsedNgModel.assign)throw Xr("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,xt(this.$$element))},$render:I,$isEmpty:function(t){return j(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Zr),this.$$animate.addClass(this.$$element,Jr)):(this.$$animate.removeClass(this.$$element,Jr),this.$$animate.addClass(this.$$element,Zr))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Hr),this.$$animate.addClass(this.$$element,Wr)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Wr),this.$$animate.addClass(this.$$element,Hr),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Gr,Yr)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Yr,Gr)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!z(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,i=this.$valid,n=this.$modelValue,o=this.$options.getOption("allowInvalid"),r=this;this.$$runValidators(e,t,(function(t){o||i===t||(r.$modelValue=t?e:void 0,r.$modelValue!==n&&r.$$writeModelToScope())}))}},$$runValidators:function(t,e,i){this.$$currentValidationRunId++;var n,o,r=this.$$currentValidationRunId,s=this;(function(){var t=s.$$parserName;if(!j(s.$$parserValid))return s.$$parserValid||(A(s.$validators,(function(t,e){a(e,null)})),A(s.$asyncValidators,(function(t,e){a(e,null)}))),a(t,s.$$parserValid),s.$$parserValid;a(t,null);return!0})()?!function(){var i=!0;if(A(s.$validators,(function(n,o){var r=Boolean(n(t,e));i=i&&r,a(o,r)})),!i)return A(s.$asyncValidators,(function(t,e){a(e,null)})),!1;return!0}()?l(!1):(n=[],o=!0,A(s.$asyncValidators,(function(i,r){var s=i(t,e);if(!K(s))throw Xr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(r,void 0),n.push(s.then((function(){a(r,!0)}),(function(){o=!1,a(r,!1)})))})),n.length?s.$$q.all(n).then((function(){l(o)}),I):l(!0)):l(!1);function a(t,e){r===s.$$currentValidationRunId&&s.$setValidity(t,e)}function l(t){r===s.$$currentValidationRunId&&i(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!j(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(j(t=this.$parsers[i](t))){this.$$parserValid=!1;break}z(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var n=this.$modelValue,o=this.$options.getOption("allowInvalid");function r(){e.$modelValue!==n&&e.$$writeModelToScope()}this.$$rawModelValue=t,o&&(this.$modelValue=t,r()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(i){o||(e.$modelValue=i?t:void 0,r())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),A(this.$viewChangeListeners,(function(t){try{t()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");N(e[t])?e=e[t]:N(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:N(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var i=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){i.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){i.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,i=this.$modelValue;e--;)i=t[e](i);return i},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Xo({clazz:Kr,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Qr,ts=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Kr,priority:1,compile:function(e){return e.addClass(Wr).addClass(Gr).addClass(Nr),{pre:function(t,e,i,n){var o=n[0],r=n[1]||o.$$parentForm,s=n[2];s&&(o.$options=s.$options),o.$$initGetterSetters(),r.$addControl(o),i.$observe("name",(function(t){o.$name!==t&&o.$$parentForm.$$renameControl(o,t)})),t.$on("$destroy",(function(){o.$$parentForm.$removeControl(o)}))},post:function(e,i,n,o){var r=o[0];function s(){r.$setTouched()}r.$$setUpdateOnEvents(),i.on("blur",(function(){r.$touched||(t.$$phase?e.$evalAsync(s):e.$apply(s))}))}}}}}],es=/(\s+|^)default(\s+|$)/;function is(t){this.$$options=t}is.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return A(t=M({},t),(function(i,n){"$inherit"===i?"*"===n?e=!0:(t[n]=this.$$options[n],"updateOn"===n&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===n&&(t.updateOnDefault=!1,t[n]=tt(i.replace(es,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],os(t,this.$$options)),os(t,Qr.$$options),new is(t)}},Qr=new is({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ns=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Qr,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function os(t,e){A(e,(function(e,i){R(t[i])||(t[i]=e)}))}var rs=Do({terminal:!0,priority:1e3}),ss=o("ngOptions"),as=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ls=["$compile","$document","$parse",function(e,i,n){var o=t.document.createElement("option"),r=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,i,n){n[0].registerOption=I},post:function(t,a,l,c){for(var u=c[0],h=c[1],m=l.multiple,p=0,d=a.children(),f=d.length;p<f;p++)if(""===d[p].value){u.hasEmptyOption=!0,u.emptyOption=d.eq(p);break}a.empty();var _,y=!!u.emptyOption;s(o.cloneNode(!1)).val("?");var v=function(t,e,i){var o=t.match(as);if(!o)throw ss("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,xt(e));var r=o[5]||o[7],s=o[6],a=/ as /.test(o[0])&&o[1],l=o[9],c=n(o[2]?o[1]:r),u=a&&n(a)||c,h=l&&n(l),m=l?function(t,e){return h(i,e)}:function(t){return Re(t)},p=function(t,e){return m(t,g(t,e))},d=n(o[2]||o[1]),f=n(o[3]||""),_=n(o[4]||""),y=n(o[8]),v={},g=s?function(t,e){return v[s]=e,v[r]=t,v}:function(t){return v[r]=t,v};function b(t,e,i,n,o){this.selectValue=t,this.viewValue=e,this.label=i,this.group=n,this.disabled=o}function x(t){var e;if(!s&&$(t))e=t;else for(var i in e=[],t)t.hasOwnProperty(i)&&"$"!==i.charAt(0)&&e.push(i);return e}return{trackBy:l,getTrackByValue:p,getWatchables:n(y,(function(t){for(var e=[],n=x(t=t||[]),r=n.length,s=0;s<r;s++){var a=t===n?s:n[s],l=t[a],c=g(l,a),u=m(l,c);if(e.push(u),o[2]||o[1]){var h=d(i,c);e.push(h)}if(o[4]){var p=_(i,c);e.push(p)}}return e})),getOptions:function(){for(var t=[],e={},n=y(i)||[],o=x(n),r=o.length,s=0;s<r;s++){var a=n===o?s:o[s],c=n[a],h=g(c,a),v=u(i,h),$=m(v,h),A=new b($,v,d(i,h),f(i,h),_(i,h));t.push(A),e[$]=A}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return l?st(t.viewValue):t.viewValue}}}}}(l.ngOptions,a,t),g=i[0].createDocumentFragment();function b(t,e){var i=o.cloneNode(!1);e.appendChild(i),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,i)}function x(t){var e=_.getOptionFromViewValue(t),i=e&&e.element;return i&&!i.selected&&(i.selected=!0),e}u.generateUnknownOptionValue=function(t){return"?"},m?(u.writeValue=function(t){if(_){var e=t&&t.map(x)||[];_.items.forEach((function(t){t.element.selected&&!ot(e,t)&&(t.element.selected=!1)}))}},u.readValue=function(){var t=a.val()||[],e=[];return A(t,(function(t){var i=_.selectValueMap[t];i&&!i.disabled&&e.push(_.getViewValueFromOption(i))})),e},v.trackBy&&t.$watchCollection((function(){if(W(h.$viewValue))return h.$viewValue.map((function(t){return v.getTrackByValue(t)}))}),(function(){h.$render()}))):(u.writeValue=function(t){if(_){var e=a[0].options[a[0].selectedIndex],i=_.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),i?(a[0].value!==i.selectValue&&(u.removeUnknownOption(),a[0].value=i.selectValue,i.element.selected=!0),i.element.setAttribute("selected","selected")):u.selectUnknownOrEmptyOption(t)}},u.readValue=function(){var t=_.selectValueMap[a.val()];return t&&!t.disabled?(u.unselectEmptyOption(),u.removeUnknownOption(),_.getViewValueFromOption(t)):null},v.trackBy&&t.$watch((function(){return v.getTrackByValue(h.$viewValue)}),(function(){h.$render()}))),y&&(e(u.emptyOption)(t),a.prepend(u.emptyOption),8===u.emptyOption[0].nodeType?(u.hasEmptyOption=!1,u.registerOption=function(t,e){""===e.val()&&(u.hasEmptyOption=!0,u.emptyOption=e,u.emptyOption.removeClass("ng-scope"),h.$render(),e.on("$destroy",(function(){var t=u.$isEmptyOptionSelected();u.hasEmptyOption=!1,u.emptyOption=void 0,t&&h.$render()})))}):u.emptyOption.removeClass("ng-scope")),t.$watchCollection(v.getWatchables,(function(){var t=_&&u.readValue();if(_)for(var e=_.items.length-1;e>=0;e--){var i=_.items[e];R(i.group)?Me(i.element.parentNode):Me(i.element)}_=v.getOptions();var n={};if(_.items.forEach((function(t){var e;R(t.group)?((e=n[t.group])||(e=r.cloneNode(!1),g.appendChild(e),e.label=null===t.group?"null":t.group,n[t.group]=e),b(t,e)):b(t,g)})),a[0].appendChild(g),h.$render(),!h.$isEmpty(t)){var o=u.readValue();(v.trackBy||m?lt(t,o):t===o)||(h.$setViewValue(o),h.$render())}}))}}}}],cs=["$locale","$interpolate","$log",function(t,e,i){var n=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(r,s,a){var l,c=a.count,u=a.$attr.when&&s.attr(a.$attr.when),h=a.offset||0,p=r.$eval(u)||{},d={},f=e.startSymbol(),_=e.endSymbol(),y=f+c+"-"+h+_,v=b.noop;function g(t){s.text(t||"")}A(a,(function(t,e){var i=o.exec(e);if(i){var n=(i[1]?"-":"")+m(i[2]);p[n]=s.attr(a.$attr[e])}})),A(p,(function(t,i){d[i]=e(t.replace(n,y))})),r.$watch(c,(function(e){var n=parseFloat(e),o=z(n);if(o||n in p||(n=t.pluralCat(n-h)),!(n===l||o&&z(l))){v();var s=d[n];j(s)?(null!=e&&i.debug("ngPluralize: no rule defined for '"+n+"' in "+u),v=I,g()):v=r.$watch(s,g),l=n}}))}}}],us=o("ngRef"),hs=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,i){var n=bi(nt(e)),o=t(i.ngRef),r=o.assign||function(){throw us("nonassign",'Expression in ngRef="{0}" is non-assignable!',i.ngRef)};return function(t,e,s){var a;if(s.hasOwnProperty("ngRefRead")){if("$element"===s.ngRefRead)a=e;else if(!(a=e.data("$"+s.ngRefRead+"Controller")))throw us("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',s.ngRefRead,i.ngRef)}else a=e.data("$"+n+"Controller");r(t,a=a||e),e.on("$destroy",(function(){o(t)===a&&r(t,null)}))}}}}],ms=["$parse","$animate","$compile",function(t,e,i){var n="$$NG_REMOVED",r=o("ngRepeat"),s=function(t,e,i,n,o,r,s){t[i]=n,o&&(t[o]=r),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]},c=function(t,e,i){return Re(i)},u=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(o,m){var p=m.ngRepeat,d=i.$$createComment("end ngRepeat",p),f=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var _=f[1],y=f[2],v=f[3],g=f[4];if(!(f=_.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",_);var b,x=f[3]||f[1],w=f[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);if(g){var B={$id:Re},C=t(g);b=function(t,e,i,n){return w&&(B[w]=e),B[x]=i,B.$index=n,C(t,B)}}return function(t,i,o,m,f){var _=Dt();t.$watchCollection(y,(function(o){var m,y,g,C,S,E,M,T,P,z,F,I,k=i[0],V=Dt();if(v&&(t[v]=o),$(o))P=o,T=b||c;else for(var L in T=b||u,P=[],o)h.call(o,L)&&"$"!==L.charAt(0)&&P.push(L);for(C=P.length,F=new Array(C),m=0;m<C;m++)if(S=o===P?m:P[m],E=o[S],M=T(t,S,E,m),_[M])z=_[M],delete _[M],V[M]=z,F[m]=z;else{if(V[M])throw A(F,(function(t){t&&t.scope&&(_[t.id]=t)})),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,M,E);F[m]={id:M,scope:void 0,clone:void 0},V[M]=!0}for(var j in B&&(B[x]=void 0),_){if(I=Rt((z=_[j]).clone),e.leave(I),I[0].parentNode)for(m=0,y=I.length;m<y;m++)I[m][n]=!0;z.scope.$destroy()}for(m=0;m<C;m++)if(S=o===P?m:P[m],E=o[S],(z=F[m]).scope){g=k;do{g=g.nextSibling}while(g&&g[n]);a(z)!==g&&e.move(Rt(z.clone),null,k),k=l(z),s(z.scope,m,x,E,w,S,C)}else f((function(t,i){z.scope=i;var n=d.cloneNode(!1);t[t.length++]=n,e.enter(t,null,k),k=n,z.clone=t,V[z.id]=z,s(z.scope,m,x,E,w,S,C)}));_=V}))}}}}],ps="ng-hide",ds="ng-hide-animate",fs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,i,n){e.$watch(n.ngShow,(function(e){t[e?"removeClass":"addClass"](i,ps,{tempClasses:ds})}))}}}],_s=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,i,n){e.$watch(n.ngHide,(function(e){t[e?"addClass":"removeClass"](i,ps,{tempClasses:ds})}))}}}],ys=Do((function(t,e,i){t.$watchCollection(i.ngStyle,(function(t,i){i&&t!==i&&A(i,(function(t,i){e.css(i,"")})),t&&e.css(t)}))})),vs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,n,o,r){var s=o.ngSwitch||o.on,a=[],l=[],c=[],u=[],h=function(t,e){return function(i){!1!==i&&t.splice(e,1)}};i.$watch(s,(function(i){for(var n,o;c.length;)t.cancel(c.pop());for(n=0,o=u.length;n<o;++n){var s=Rt(l[n].clone);u[n].$destroy(),(c[n]=t.leave(s)).done(h(c,n))}l.length=0,u.length=0,(a=r.cases["!"+i]||r.cases["?"])&&A(a,(function(i){i.transclude((function(n,o){u.push(o);var r=i.element;n[n.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:n};l.push(s),t.enter(n,r.parent(),r)}))}))}))}}}],gs=Do({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,i,n,o){A(i.ngSwitchWhen.split(i.ngSwitchWhenSeparator).sort().filter((function(t,e,i){return i[e-1]!==t})),(function(t){n.cases["!"+t]=n.cases["!"+t]||[],n.cases["!"+t].push({transclude:o,element:e})}))}}),bs=Do({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,i,n,o){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:o,element:e})}}),xs=o("ngTransclude"),$s=["$compile",function(t){return{restrict:"EAC",compile:function(e){var i=t(e.contents());return e.empty(),function(t,e,n,o,r){if(!r)throw xs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",xt(e));n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude="");var s=n.ngTransclude||n.ngTranscludeSlot;function a(){i(t,(function(t){e.append(t)}))}r((function(t,i){t.length&&function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n.nodeType!==qt||n.nodeValue.trim())return!0}}(t)?e.append(t):(a(),i.$destroy())}),null,s),s&&!r.isSlotFilled(s)&&a()}}}}],As=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,i){if("text/ng-template"===i.type){var n=i.id,o=e[0].text;t.put(n,o)}}}}],ws={$setViewValue:I,$render:I};function Bs(t,e){t.prop("selected",e),t.attr("selected",e)}var Cs=["$element","$scope",function(e,i){var n=this,o=new qe;n.selectValueMap={},n.ngModelCtrl=ws,n.multiple=!1,n.unknownOption=s(t.document.createElement("option")),n.hasEmptyOption=!1,n.emptyOption=void 0,n.renderUnknownOption=function(t){var i=n.generateUnknownOptionValue(t);n.unknownOption.val(i),e.prepend(n.unknownOption),Bs(n.unknownOption,!0),e.val(i)},n.updateUnknownOption=function(t){var i=n.generateUnknownOptionValue(t);n.unknownOption.val(i),Bs(n.unknownOption,!0),e.val(i)},n.generateUnknownOptionValue=function(t){return"? "+Re(t)+" ?"},n.removeUnknownOption=function(){n.unknownOption.parent()&&n.unknownOption.remove()},n.selectEmptyOption=function(){n.emptyOption&&(e.val(""),Bs(n.emptyOption,!0))},n.unselectEmptyOption=function(){n.hasEmptyOption&&Bs(n.emptyOption,!1)},i.$on("$destroy",(function(){n.renderUnknownOption=I})),n.readValue=function(){var t=e.val(),i=t in n.selectValueMap?n.selectValueMap[t]:t;return n.hasOption(i)?i:null},n.writeValue=function(t){var i=e[0].options[e[0].selectedIndex];if(i&&Bs(s(i),!1),n.hasOption(t)){n.removeUnknownOption();var o=Re(t);e.val(o in n.selectValueMap?o:t);var r=e[0].options[e[0].selectedIndex];Bs(s(r),!0)}else n.selectUnknownOrEmptyOption(t)},n.addOption=function(t,e){if(8!==e[0].nodeType){jt(t,'"option value"'),""===t&&(n.hasEmptyOption=!0,n.emptyOption=e);var i=o.get(t)||0;o.set(t,i+1),a()}},n.removeOption=function(t){var e=o.get(t);e&&(1===e?(o.delete(t),""===t&&(n.hasEmptyOption=!1,n.emptyOption=void 0)):o.set(t,e-1))},n.hasOption=function(t){return!!o.get(t)},n.$hasEmptyOption=function(){return n.hasEmptyOption},n.$isUnknownOptionSelected=function(){return e[0].options[0]===n.unknownOption[0]},n.$isEmptyOptionSelected=function(){return n.hasEmptyOption&&e[0].options[e[0].selectedIndex]===n.emptyOption[0]},n.selectUnknownOrEmptyOption=function(t){null==t&&n.emptyOption?(n.removeUnknownOption(),n.selectEmptyOption()):n.unknownOption.parent().length?n.updateUnknownOption(t):n.renderUnknownOption(t)};var r=!1;function a(){r||(r=!0,i.$$postDigest((function(){r=!1,n.ngModelCtrl.$render()})))}var l=!1;function c(t){l||(l=!0,i.$$postDigest((function(){i.$$destroyed||(l=!1,n.ngModelCtrl.$setViewValue(n.readValue()),t&&n.ngModelCtrl.$render())})))}n.registerOption=function(t,e,i,o,r){var s,l;i.$attr.ngValue?i.$observe("value",(function(t){var i,o=e.prop("selected");R(l)&&(n.removeOption(s),delete n.selectValueMap[l],i=!0),l=Re(t),s=t,n.selectValueMap[l]=t,n.addOption(t,e),e.attr("value",l),i&&o&&c()})):o?i.$observe("value",(function(t){var i;n.readValue();var o=e.prop("selected");R(s)&&(n.removeOption(s),i=!0),s=t,n.addOption(t,e),i&&o&&c()})):r?t.$watch(r,(function(t,o){i.$set("value",t);var r=e.prop("selected");o!==t&&n.removeOption(o),n.addOption(t,e),o&&r&&c()})):n.addOption(i.value,e);i.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(n.multiple?c(!0):(n.ngModelCtrl.$setViewValue(null),n.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=n.readValue(),e=i.value;n.removeOption(e),a(),(n.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)}))}}],Ss=function(){return{restrict:"E",require:["select","?ngModel"],controller:Cs,priority:1,link:{pre:function(t,e,i,n){var o=n[0],r=n[1];if(!r)return void(o.registerOption=I);if(o.ngModelCtrl=r,e.on("change",(function(){o.removeUnknownOption(),t.$apply((function(){r.$setViewValue(o.readValue())}))})),i.multiple){o.multiple=!0,o.readValue=function(){var t=[];return A(e.find("option"),(function(e){if(e.selected&&!e.disabled){var i=e.value;t.push(i in o.selectValueMap?o.selectValueMap[i]:i)}})),t},o.writeValue=function(t){A(e.find("option"),(function(e){var i=!!t&&(ot(t,e.value)||ot(t,o.selectValueMap[e.value]));i!==e.selected&&Bs(s(e),i)}))};var a,l=NaN;t.$watch((function(){l!==r.$viewValue||lt(a,r.$viewValue)||(a=Nt(r.$viewValue),r.$render()),l=r.$viewValue})),r.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,i,n){var o=n[1];if(!o)return;var r=n[0];o.$render=function(){r.writeValue(o.$viewValue)}}}}},Es=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,i){var n,o;return R(i.ngValue)||(R(i.value)?n=t(i.value,!0):(o=t(e.text(),!0))||i.$set("value",e.text())),function(t,e,i){var r="$selectController",s=e.parent(),a=s.data(r)||s.parent().data(r);a&&a.registerOption(t,e,i,n,o)}}}}],Ms=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,o){if(o){var r=n.hasOwnProperty("required")||t(n.ngRequired)(e);n.ngRequired||(n.required=!0),o.$validators.required=function(t,e){return!r||!o.$isEmpty(e)},n.$observe("required",(function(t){r!==t&&(r=t,o.$validate())}))}}}}],Ts=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,i){var n,o;return i.ngPattern&&(n=i.ngPattern,o="/"===i.ngPattern.charAt(0)&&c.test(i.ngPattern)?function(){return i.ngPattern}:t(i.ngPattern)),function(t,e,i,r){if(r){var s=i.pattern;i.ngPattern?s=o(t):n=i.pattern;var a=Fs(s,n,e);i.$observe("pattern",(function(t){var i=a;a=Fs(t,n,e),(i&&i.toString())!==(a&&a.toString())&&r.$validate()})),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||j(a)||a.test(e)}}}}}}],Ps=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,o){if(o){var r=n.maxlength||t(n.ngMaxlength)(e),s=Is(r);n.$observe("maxlength",(function(t){r!==t&&(s=Is(t),r=t,o.$validate())})),o.$validators.maxlength=function(t,e){return s<0||o.$isEmpty(e)||e.length<=s}}}}}],zs=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,o){if(o){var r=n.minlength||t(n.ngMinlength)(e),s=Is(r)||-1;n.$observe("minlength",(function(t){r!==t&&(s=Is(t)||-1,r=t,o.$validate())})),o.$validators.minlength=function(t,e){return o.$isEmpty(e)||e.length>=s}}}}}];function Fs(t,e,i){if(t){if(q(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw o("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,xt(i));return t}}function Is(t){var e=P(t);return z(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!It){var i=ut();(a=j(i)?t.jQuery:i?t[i]:void 0)&&a.fn.on?(s=a,M(a.fn,{scope:Pe.scope,isolateScope:Pe.isolateScope,controller:Pe.controller,injector:Pe.injector,inheritedData:Pe.inheritedData})):s=pe,e=s.cleanData,s.cleanData=function(t){for(var i,n,o=0;null!=(n=t[o]);o++)(i=(s._data(n)||{}).events)&&i.$destroy&&s(n).triggerHandler("$destroy");e(t)},b.element=s,It=!0}}(),M(b,{errorHandlingConfig:i,bootstrap:Mt,copy:st,extend:M,merge:T,equals:lt,element:s,forEach:A,injector:Ke,noop:I,bind:pt,toJson:ft,fromJson:_t,identity:k,isUndefined:j,isDefined:R,isString:q,isFunction:G,isObject:D,isNumber:N,isElement:it,isArray:W,version:Wt,isDate:U,callbacks:{$$counter:0},getTestability:Pt,reloadWithDebugInfo:Tt,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:kt,$$minErr:o,$$csp:ct,$$encodeUriSegment:wt,$$encodeUriQuery:Bt,$$lowercase:m,$$stringify:Ot,$$uppercase:p}),l=function(t){var e=o("$injector"),i=o("ng");function n(t,e,i){return t[e]||(t[e]=i())}var r=n(t,"angular",Object);return r.$$minErr=r.$$minErr||o,n(r,"module",(function(){var t={};return function(o,r,s){var a={};return function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name","module")}(o),r&&t.hasOwnProperty(o)&&(t[o]=null),n(t,o,(function(){if(!r)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var t=[],n=[],l=[],c=h("$injector","invoke","push",n),u={_invokeQueue:t,_configBlocks:n,_runBlocks:l,info:function(t){if(R(t)){if(!D(t))throw i("aobj","Argument '{0}' must be an object","value");return a=t,this}return a},requires:r,name:o,provider:m("$provide","provider"),factory:m("$provide","factory"),service:m("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:m("$provide","decorator",n),animation:m("$animateProvider","register"),filter:m("$filterProvider","register"),controller:m("$controllerProvider","register"),directive:m("$compileProvider","directive"),component:m("$compileProvider","component"),config:c,run:function(t){return l.push(t),this}};return s&&c(s),u;function h(e,i,n,o){return o||(o=t),function(){return o[n||"push"]([e,i,arguments]),u}}function m(e,i,n){return n||(n=t),function(t,r){return r&&G(r)&&(r.$$moduleName=o),n.push([e,i,arguments]),u}}}))}}))}(t),l("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Wn}),t.provider("$compile",_i).directive({a:Oo,input:xr,textarea:xr,form:Yo,script:As,select:Ss,option:Es,ngBind:Br,ngBindHtml:Sr,ngBindTemplate:Cr,ngClass:Tr,ngClassEven:zr,ngClassOdd:Pr,ngCloak:Fr,ngController:Ir,ngForm:Jo,ngHide:_s,ngIf:jr,ngInclude:Rr,ngInit:Or,ngNonBindable:rs,ngPluralize:cs,ngRef:hs,ngRepeat:ms,ngShow:fs,ngStyle:ys,ngSwitch:vs,ngSwitchWhen:gs,ngSwitchDefault:bs,ngOptions:ls,ngTransclude:$s,ngModel:ts,ngList:qr,ngChange:Er,pattern:Ts,ngPattern:Ts,required:Ms,ngRequired:Ms,minlength:zs,ngMinlength:zs,maxlength:Ps,ngMaxlength:Ps,ngValue:wr,ngModelOptions:ns}).directive({ngInclude:Dr,input:$r}).directive(qo).directive(kr),t.provider({$anchorScroll:Qe,$animate:si,$animateCss:ci,$$animateJs:oi,$$animateQueue:ri,$$AnimateRunner:li,$$animateAsyncRun:ai,$browser:hi,$cacheFactory:mi,$controller:Ci,$document:Si,$$isDocumentHidden:Ei,$exceptionHandler:Mi,$filter:yo,$$forceReflow:Ti,$interpolate:Ji,$interval:Xi,$$intervalFactory:Ki,$http:Wi,$httpParamSerializer:ji,$httpParamSerializerJQLike:Ri,$httpBackend:Gi,$xhrFactory:Hi,$jsonpCallbacks:Qi,$location:yn,$log:vn,$parse:Vn,$rootScope:Un,$q:Ln,$$q:jn,$sce:Kn,$sceDelegate:Xn,$sniffer:Qn,$$taskTrackerFactory:to,$templateCache:pi,$templateRequest:no,$$testability:oo,$timeout:so,$window:po,$$rAF:Nn,$$jqLite:je,$$Map:Ne,$$cookieReader:_o})}]).info({angularVersion:"1.8.2"}),b.module("ngLocale",[],["$provide",function(t){var e="one",i="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,n){var o=0|t,r=function(t,e){var i=e;void 0===i&&(i=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var n=Math.pow(10,i);return{v:i,f:(t*n|0)%n}}(t,n);return 1==o&&0==r.v?e:i}})}]),s((function(){Et(t.document,Mt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));var e=angular,i={exports:{}};!function(t){i.exports=(()=>{const t="object"==typeof window?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let e=null,i=!1;const n=t.WebStreamsPolyfill||{},o=t.isSecureContext;let r=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=o||"MozAppearance"in document.documentElement.style?"iframe":"navigate",a={createWriteStream:function(n,c,u){let h={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},m=0,p=null,d=null,f=null;if(Number.isFinite(c)?([u,c]=[c,u],console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):c&&c.highWaterMark?(console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):h=c||{},!r){e||(e=o?l(a.mitm):function(e){const i="width=200,height=100",n=document.createDocumentFragment(),o={frame:t.open(e,"popup",i),loaded:!1,isIframe:!1,isPopup:!0,remove(){o.frame.close()},addEventListener(...t){n.addEventListener(...t)},dispatchEvent(...t){n.dispatchEvent(...t)},removeEventListener(...t){n.removeEventListener(...t)},postMessage(...t){o.frame.postMessage(...t)}},r=e=>{e.source===o.frame&&(o.loaded=!0,t.removeEventListener("message",r),o.dispatchEvent(new Event("load")))};return t.addEventListener("message",r),o}(a.mitm)),d=new MessageChannel,n=encodeURIComponent(n.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const r={transferringReadable:i,pathname:h.pathname||Math.random().toString().slice(-6)+"/"+n,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+n}};h.size&&(r.headers["Content-Length"]=h.size);const c=[r,"*",[d.port2]];if(i){const t="iframe"===s?void 0:{transform(t,e){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");m+=t.length,e.enqueue(t),p&&(location.href=p,p=null)},flush(){p&&(location.href=p)}};f=new a.TransformStream(t,h.writableStrategy,h.readableStrategy);const e=f.readable;d.port1.postMessage({readableStream:e},[e])}d.port1.onmessage=t=>{t.data.download&&("navigate"===s?(e.remove(),e=null,m?location.href=t.data.download:p=t.data.download):(e.isPopup&&(e.remove(),e=null,"iframe"===s&&l(a.mitm)),l(t.data.download)))},e.loaded?e.postMessage(...c):e.addEventListener("load",(()=>{e.postMessage(...c)}),{once:!0})}let _=[];return!r&&f&&f.writable||new a.WritableStream({write(t){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");r?_.push(t):(d.port1.postMessage(t),m+=t.length,p&&(location.href=p,p=null))},close(){if(r){const t=new Blob(_,{type:"application/octet-stream; charset=utf-8"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=n,e.click()}else d.port1.postMessage("end")},abort(){_=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},h.writableStrategy)},WritableStream:t.WritableStream||n.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function l(t){if(!t)throw new Error("meh");const e=document.createElement("iframe");return e.hidden=!0,e.src=t,e.loaded=!1,e.name="iframe",e.isIframe=!0,e.postMessage=(...t)=>e.contentWindow.postMessage(...t),e.addEventListener("load",(()=>{e.loaded=!0}),{once:!0}),document.body.appendChild(e),e}try{new Response(new ReadableStream),o&&!("serviceWorker"in navigator)&&(r=!0)}catch(c){r=!0}return(t=>{try{t()}catch(e){}})((()=>{const{readable:t}=new TransformStream,e=new MessageChannel;e.port1.postMessage(t,[t]),e.port1.close(),e.port2.close(),i=!0,Object.defineProperty(a,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})})),a})()}();var n={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var o=function(t,e){null==t&&(t={});var i=Object.assign({},t);for(var n in e)e.hasOwnProperty(n)&&void 0===t[n]&&(i[n]=e[n]);if("function"==typeof Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),r=0;r<o.length;r++){var s=o[r];e.propertyIsEnumerable(s)&&void 0===t[n]&&(i[s]=e[s])}return i},r={},s="undefined"!=typeof DEBUG&&DEBUG,a="undefined"!=typeof ASSERT&&ASSERT;r.debug=function(){s&&console.log.apply(console,arguments)},r.assert=function(t,e,i){if(a&&!t)throw i&&console.log(i),new Error(e)};var l={exports:{}},c="undefined"!=typeof DEBUG&&DEBUG,u="undefined"!=typeof ASSERT&&ASSERT,h=r,m=Math,p=l.exports=Object.create(m);p.EPSILON=1e-9,p.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},p.assert=function(t){if(u&&!p.isFinite(t))throw c&&h.debug(t),new Error("Invalid Number!")},p.invSqrt=function(t){return 1/m.sqrt(t)},p.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},p.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},p.mod=function(t,e,i){return void 0===e?(i=1,e=0):void 0===i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)},p.clamp=function(t,e,i){return t<e?e:t>i?i:t},p.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:m.random()*(e-t)+t};var d="undefined"!=typeof DEBUG&&DEBUG,f="undefined"!=typeof ASSERT&&ASSERT,_=g,y=r,v=l.exports;function g(t,e){if(!(this instanceof g))return new g(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),f&&g.assert(this)}g.prototype._serialize=function(){return{x:this.x,y:this.y}},g._deserialize=function(t){var e=Object.create(g.prototype);return e.x=t.x,e.y=t.y,e},g.zero=function(){var t=Object.create(g.prototype);return t.x=0,t.y=0,t},g.neo=function(t,e){var i=Object.create(g.prototype);return i.x=t,i.y=e,i},g.clone=function(t){return f&&g.assert(t),g.neo(t.x,t.y)},g.prototype.toString=function(){return JSON.stringify(this)},g.isValid=function(t){return t&&v.isFinite(t.x)&&v.isFinite(t.y)},g.assert=function(t){if(f&&!g.isValid(t))throw d&&y.debug(t),new Error("Invalid Vec2!")},g.prototype.clone=function(){return g.clone(this)},g.prototype.setZero=function(){return this.x=0,this.y=0,this},g.prototype.set=function(t,e){return"object"==typeof t?(f&&g.assert(t),this.x=t.x,this.y=t.y):(f&&v.assert(t),f&&v.assert(e),this.x=t,this.y=e),this},g.prototype.wSet=function(t,e,i,n){return void 0!==i||void 0!==n?this.setCombine(t,e,i,n):this.setMul(t,e)},g.prototype.setCombine=function(t,e,i,n){f&&v.assert(t),f&&g.assert(e),f&&v.assert(i),f&&g.assert(n);var o=t*e.x+i*n.x,r=t*e.y+i*n.y;return this.x=o,this.y=r,this},g.prototype.setMul=function(t,e){f&&v.assert(t),f&&g.assert(e);var i=t*e.x,n=t*e.y;return this.x=i,this.y=n,this},g.prototype.add=function(t){return f&&g.assert(t),this.x+=t.x,this.y+=t.y,this},g.prototype.wAdd=function(t,e,i,n){return void 0!==i||void 0!==n?this.addCombine(t,e,i,n):this.addMul(t,e)},g.prototype.addCombine=function(t,e,i,n){f&&v.assert(t),f&&g.assert(e),f&&v.assert(i),f&&g.assert(n);var o=t*e.x+i*n.x,r=t*e.y+i*n.y;return this.x+=o,this.y+=r,this},g.prototype.addMul=function(t,e){f&&v.assert(t),f&&g.assert(e);var i=t*e.x,n=t*e.y;return this.x+=i,this.y+=n,this},g.prototype.wSub=function(t,e,i,n){return void 0!==i||void 0!==n?this.subCombine(t,e,i,n):this.subMul(t,e)},g.prototype.subCombine=function(t,e,i,n){f&&v.assert(t),f&&g.assert(e),f&&v.assert(i),f&&g.assert(n);var o=t*e.x+i*n.x,r=t*e.y+i*n.y;return this.x-=o,this.y-=r,this},g.prototype.subMul=function(t,e){f&&v.assert(t),f&&g.assert(e);var i=t*e.x,n=t*e.y;return this.x-=i,this.y-=n,this},g.prototype.sub=function(t){return f&&g.assert(t),this.x-=t.x,this.y-=t.y,this},g.prototype.mul=function(t){return f&&v.assert(t),this.x*=t,this.y*=t,this},g.prototype.length=function(){return g.lengthOf(this)},g.prototype.lengthSquared=function(){return g.lengthSquared(this)},g.prototype.normalize=function(){var t=this.length();if(t<v.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},g.lengthOf=function(t){return f&&g.assert(t),v.sqrt(t.x*t.x+t.y*t.y)},g.lengthSquared=function(t){return f&&g.assert(t),t.x*t.x+t.y*t.y},g.distance=function(t,e){f&&g.assert(t),f&&g.assert(e);var i=t.x-e.x,n=t.y-e.y;return v.sqrt(i*i+n*n)},g.distanceSquared=function(t,e){f&&g.assert(t),f&&g.assert(e);var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},g.areEqual=function(t,e){return f&&g.assert(t),f&&g.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},g.skew=function(t){return f&&g.assert(t),g.neo(-t.y,t.x)},g.dot=function(t,e){return f&&g.assert(t),f&&g.assert(e),t.x*e.x+t.y*e.y},g.cross=function(t,e){return"number"==typeof e?(f&&g.assert(t),f&&v.assert(e),g.neo(e*t.y,-e*t.x)):"number"==typeof t?(f&&v.assert(t),f&&g.assert(e),g.neo(-t*e.y,t*e.x)):(f&&g.assert(t),f&&g.assert(e),t.x*e.y-t.y*e.x)},g.addCross=function(t,e,i){return"number"==typeof i?(f&&g.assert(e),f&&v.assert(i),g.neo(i*e.y+t.x,-i*e.x+t.y)):"number"==typeof e?(f&&v.assert(e),f&&g.assert(i),g.neo(-e*i.y+t.x,e*i.x+t.y)):void(f&&y.assert(!1))},g.add=function(t,e){return f&&g.assert(t),f&&g.assert(e),g.neo(t.x+e.x,t.y+e.y)},g.wAdd=function(t,e,i,n){return void 0!==i||void 0!==n?g.combine(t,e,i,n):g.mul(t,e)},g.combine=function(t,e,i,n){return g.zero().setCombine(t,e,i,n)},g.sub=function(t,e){return f&&g.assert(t),f&&g.assert(e),g.neo(t.x-e.x,t.y-e.y)},g.mul=function(t,e){return"object"==typeof t?(f&&g.assert(t),f&&v.assert(e),g.neo(t.x*e,t.y*e)):"object"==typeof e?(f&&v.assert(t),f&&g.assert(e),g.neo(t*e.x,t*e.y)):void 0},g.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},g.neg=function(t){return f&&g.assert(t),g.neo(-t.x,-t.y)},g.abs=function(t){return f&&g.assert(t),g.neo(v.abs(t.x),v.abs(t.y))},g.mid=function(t,e){return f&&g.assert(t),f&&g.assert(e),g.neo(.5*(t.x+e.x),.5*(t.y+e.y))},g.upper=function(t,e){return f&&g.assert(t),f&&g.assert(e),g.neo(v.max(t.x,e.x),v.max(t.y,e.y))},g.lower=function(t,e){return f&&g.assert(t),f&&g.assert(e),g.neo(v.min(t.x,e.x),v.min(t.y,e.y))},g.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=v.invSqrt(e);this.x*=i*t,this.y*=i*t}return this},g.clamp=function(t,e){return(t=g.neo(t.x,t.y)).clamp(e),t},g.scaleFn=function(t,e){return function(i){return g.neo(i.x*t,i.y*e)}},g.translateFn=function(t,e){return function(i){return g.neo(i.x+t,i.y+e)}};var b={};!function(t){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var e=b;e.maxManifoldPoints=2,e.maxPolygonVertices=12,e.aabbExtension=.1,e.aabbMultiplier=2,e.linearSlop=.005,e.linearSlopSquared=e.linearSlop*e.linearSlop,e.angularSlop=2/180*Math.PI,e.polygonRadius=2*e.linearSlop,e.maxSubSteps=8,e.maxTOIContacts=32,e.maxTOIIterations=20,e.maxDistnceIterations=20,e.velocityThreshold=1,e.maxLinearCorrection=.2,e.maxAngularCorrection=8/180*Math.PI,e.maxTranslation=2,e.maxTranslationSquared=e.maxTranslation*e.maxTranslation,e.maxRotation=.5*Math.PI,e.maxRotationSquared=e.maxRotation*e.maxRotation,e.baumgarte=.2,e.toiBaugarte=.75,e.timeToSleep=.5,e.linearSleepTolerance=.01,e.linearSleepToleranceSqr=Math.pow(e.linearSleepTolerance,2),e.angularSleepTolerance=2/180*Math.PI,e.angularSleepToleranceSqr=Math.pow(e.angularSleepTolerance,2)}();var x="undefined"!=typeof DEBUG&&DEBUG,$="undefined"!=typeof ASSERT&&ASSERT,A=r,w=l.exports,B=_,C=S;function S(t,e){if(!(this instanceof S))return new S(t,e);this.lowerBound=B.zero(),this.upperBound=B.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e?this.upperBound.set(e):"object"==typeof t&&this.upperBound.set(t)}S.prototype.isValid=function(){return S.isValid(this)},S.isValid=function(t){var e=B.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&B.isValid(t.lowerBound)&&B.isValid(t.upperBound)},S.assert=function(t){if($&&!S.isValid(t))throw x&&A.debug(t),new Error("Invalid AABB!")},S.prototype.getCenter=function(){return B.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},S.prototype.getExtents=function(){return B.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},S.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},S.prototype.combine=function(t,e){e=e||this;var i=t.lowerBound,n=t.upperBound,o=e.lowerBound,r=e.upperBound,s=w.min(i.x,o.x),a=w.min(i.y,o.y),l=w.max(r.x,n.x),c=w.max(r.y,n.y);this.lowerBound.set(s,a),this.upperBound.set(l,c)},S.prototype.combinePoints=function(t,e){this.lowerBound.set(w.min(t.x,e.x),w.min(t.y,e.y)),this.upperBound.set(w.max(t.x,e.x),w.max(t.y,e.y))},S.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},S.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},S.prototype.extend=function(t){return S.extend(this,t),this},S.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},S.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,n=t.lowerBound.x-e.upperBound.x,o=e.lowerBound.y-t.upperBound.y,r=t.lowerBound.y-e.upperBound.y;return!(i>0||o>0||n>0||r>0)},S.areEqual=function(t,e){return B.areEqual(t.lowerBound,e.lowerBound)&&B.areEqual(t.upperBound,e.upperBound)},S.diff=function(t,e){var i=w.max(0,w.min(t.upperBound.x,e.upperBound.x)-w.max(e.lowerBound.x,t.lowerBound.x)),n=w.max(0,w.min(t.upperBound.y,e.upperBound.y)-w.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*n},S.prototype.rayCast=function(t,e){for(var i=-1/0,n=1/0,o=e.p1,r=B.sub(e.p2,e.p1),s=B.abs(r),a=B.zero(),l="x";null!==l;l="x"===l?"y":null)if(s.x<w.EPSILON){if(o[l]<this.lowerBound[l]||this.upperBound[l]<o[l])return!1}else{var c=1/r[l],u=(this.lowerBound[l]-o[l])*c,h=(this.upperBound[l]-o[l])*c,m=-1;if(u>h){var p=u;u=h,h=p,m=1}if(u>i&&(a.setZero(),a[l]=m,i=u),i>(n=w.min(n,h)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=a,!0)},S.prototype.toString=function(){return JSON.stringify(this)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,"undefined"!=typeof DEBUG&&DEBUG;var E="undefined"!=typeof ASSERT&&ASSERT,M=b,T=r,P=function(t){var e=[],i=t.max||1/0,n=t.create,o=t.allocate,r=t.release,s=t.discard,a=0,l=0,c=0,u=0;this.max=function(t){return"number"==typeof t?(i=t,this):i},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof n?n():{}),l++,"function"==typeof o&&o(t),t},this.release=function(t){e.length<i?(c++,"function"==typeof r&&r(t),e.push(t)):(u++,"function"==typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+l+" <"+c+" -"+u+" ="+e.length+"/"+i}},z=_,F=l.exports,I=C,k=L;function V(t){this.id=t,this.aabb=new I,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function L(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new P({create:function(){return new V}})}V.prototype.isLeaf=function(){return null==this.child1},L.prototype.getUserData=function(t){var e=this.m_nodes[t];return E&&T.assert(!!e),e.userData},L.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return E&&T.assert(!!e),e.aabb},L.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},L.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},L.prototype.createProxy=function(t,e){E&&T.assert(I.isValid(t));var i=this.allocateNode();return i.aabb.set(t),I.extend(i.aabb,M.aabbExtension),i.userData=e,i.height=0,this.insertLeaf(i),i.id},L.prototype.destroyProxy=function(t){var e=this.m_nodes[t];E&&T.assert(!!e),E&&T.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},L.prototype.moveProxy=function(t,e,i){E&&T.assert(I.isValid(e)),E&&T.assert(!i||z.isValid(i));var n=this.m_nodes[t];return E&&T.assert(!!n),E&&T.assert(n.isLeaf()),!n.aabb.contains(e)&&(this.removeLeaf(n),n.aabb.set(e),e=n.aabb,I.extend(e,M.aabbExtension),i.x<0?e.lowerBound.x+=i.x*M.aabbMultiplier:e.upperBound.x+=i.x*M.aabbMultiplier,i.y<0?e.lowerBound.y+=i.y*M.aabbMultiplier:e.upperBound.y+=i.y*M.aabbMultiplier,this.insertLeaf(n),!0)},L.prototype.insertLeaf=function(t){if(E&&T.assert(I.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,i=this.m_root;0==i.isLeaf();){var n=i.child1,o=i.child2,r=i.aabb.getPerimeter(),s=new I;s.combine(i.aabb,e);var a,l,c=s.getPerimeter(),u=2*c,h=2*(c-r);if(n.isLeaf()){(p=new I).combine(e,n.aabb),a=p.getPerimeter()+h}else{(p=new I).combine(e,n.aabb);var m=n.aabb.getPerimeter();a=p.getPerimeter()-m+h}if(o.isLeaf()){(p=new I).combine(e,o.aabb),l=p.getPerimeter()+h}else{var p;(p=new I).combine(e,o.aabb);m=o.aabb.getPerimeter();l=p.getPerimeter()-m+h}if(u<a&&u<l)break;i=a<l?n:o}var d=i,f=d.parent,_=this.allocateNode();for(_.parent=f,_.userData=null,_.aabb.combine(e,d.aabb),_.height=d.height+1,null!=f?(f.child1==d?f.child1=_:f.child2=_,_.child1=d,_.child2=t,d.parent=_,t.parent=_):(_.child1=d,_.child2=t,d.parent=_,t.parent=_,this.m_root=_),i=t.parent;null!=i;){n=(i=this.balance(i)).child1,o=i.child2;E&&T.assert(null!=n),E&&T.assert(null!=o),i.height=1+F.max(n.height,o.height),i.aabb.combine(n.aabb,o.aabb),i=i.parent}},L.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=n){n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.freeNode(i);for(var o=n;null!=o;){var r=(o=this.balance(o)).child1,s=o.child2;o.aabb.combine(r.aabb,s.aabb),o.height=1+F.max(r.height,s.height),o=o.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},L.prototype.balance=function(t){E&&T.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var i=e.child1,n=e.child2,o=n.height-i.height;if(o>1){var r=n.child1,s=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==t?n.parent.child1=n:n.parent.child2=n:this.m_root=n,r.height>s.height?(n.child2=r,e.child2=s,s.parent=e,e.aabb.combine(i.aabb,s.aabb),n.aabb.combine(e.aabb,r.aabb),e.height=1+F.max(i.height,s.height),n.height=1+F.max(e.height,r.height)):(n.child2=s,e.child2=r,r.parent=e,e.aabb.combine(i.aabb,r.aabb),n.aabb.combine(e.aabb,s.aabb),e.height=1+F.max(i.height,r.height),n.height=1+F.max(e.height,s.height)),n}if(o<-1){var a=i.child1,l=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.m_root=i,a.height>l.height?(i.child2=a,e.child1=l,l.parent=e,e.aabb.combine(n.aabb,l.aabb),i.aabb.combine(e.aabb,a.aabb),e.height=1+F.max(n.height,l.height),i.height=1+F.max(e.height,a.height)):(i.child2=l,e.child1=a,a.parent=e,e.aabb.combine(n.aabb,a.aabb),i.aabb.combine(e.aabb,l.aabb),e.height=1+F.max(n.height,a.height),i.height=1+F.max(e.height,l.height)),i}return e},L.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},L.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,n=D.allocate().preorder(this.m_root);t=n.next();)t.height<0||(i+=t.aabb.getPerimeter());return D.release(n),i/e},L.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=this.computeHeight(e.child1.id),n=this.computeHeight(e.child2.id);return 1+F.max(i,n)},L.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&E&&T.assert(null==t.parent);var e=t.child1,i=t.child2;if(t.isLeaf())return E&&T.assert(null==e),E&&T.assert(null==i),void(E&&T.assert(0==t.height));E&&T.assert(e.parent==t),E&&T.assert(i.parent==t),this.validateStructure(e),this.validateStructure(i)}},L.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,i=t.child2;if(t.isLeaf())return E&&T.assert(null==e),E&&T.assert(null==i),void(E&&T.assert(0==t.height));var n=e.height,o=i.height,r=1+F.max(n,o);E&&T.assert(t.height==r);var s=new I;s.combine(e.aabb,i.aabb),E&&T.assert(I.areEqual(s,t.aabb)),this.validateMetrics(e),this.validateMetrics(i)}},L.prototype.validate=function(){this.validateStructure(this.m_root),this.validateMetrics(this.m_root),E&&T.assert(this.getHeight()==this.computeHeight())},L.prototype.getMaxBalance=function(){for(var t,e=0,i=D.allocate().preorder(this.m_root);t=i.next();)if(!(t.height<=1)){E&&T.assert(0==t.isLeaf());var n=F.abs(t.child2.height-t.child1.height);e=F.max(e,n)}return D.release(i),e},L.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,n=D.allocate().preorder(this.m_root);t=n.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(D.release(n);i>1;){for(var o=1/0,r=-1,s=-1,a=0;a<i;++a)for(var l=e[a].aabb,c=a+1;c<i;++c){var u=e[c].aabb,h=new I;h.combine(l,u);var m=h.getPerimeter();m<o&&(r=a,s=c,o=m)}var p=e[r],d=e[s],f=this.allocateNode();f.child1=p,f.child2=d,f.height=1+F.max(p.height,d.height),f.aabb.combine(p.aabb,d.aabb),f.parent=null,p.parent=f,d.parent=f,e[s]=e[i-1],e[r]=f,--i}this.m_root=e[0],this.validate()},L.prototype.shiftOrigin=function(t){for(var e,i=D.allocate().preorder(this.m_root);e=i.next();){var n=e.aabb;n.lowerBound.x-=t.x,n.lowerBound.y-=t.y,n.upperBound.x-=t.x,n.upperBound.y-=t.y}D.release(i)},L.prototype.query=function(t,e){E&&T.assert("function"==typeof e);var i=R.allocate();for(i.push(this.m_root);i.length>0;){var n=i.pop();if(null!=n)if(I.testOverlap(n.aabb,t))if(n.isLeaf()){if(0==e(n.id))return}else i.push(n.child1),i.push(n.child2)}R.release(i)},L.prototype.rayCast=function(t,e){E&&T.assert("function"==typeof e);var i=t.p1,n=t.p2,o=z.sub(n,i);E&&T.assert(o.lengthSquared()>0),o.normalize();var r=z.cross(1,o),s=z.abs(r),a=t.maxFraction,l=new I,c=z.combine(1-a,i,a,n);l.combinePoints(i,c);var u=R.allocate(),h=j.allocate();for(u.push(this.m_root);u.length>0;){var m=u.pop();if(null!=m&&0!=I.testOverlap(m.aabb,l)){var p=m.aabb.getCenter(),d=m.aabb.getExtents();if(!(F.abs(z.dot(r,z.sub(i,p)))-z.dot(s,d)>0))if(m.isLeaf()){h.p1=z.clone(t.p1),h.p2=z.clone(t.p2),h.maxFraction=a;var f=e(h,m.id);if(0==f)return;f>0&&(a=f,c=z.combine(1-a,i,a,n),l.combinePoints(i,c))}else u.push(m.child1),u.push(m.child2)}}R.release(u),j.release(h)};var j=new P({create:function(){return{}},release:function(t){}}),R=new P({create:function(){return[]},release:function(t){t.length=0}}),D=new P({create:function(){return new O},release:function(t){t.close()}});function O(){var t=[],e=[];return{preorder:function(i){return t.length=0,t.push(i),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var i=t.length-1,n=t[i];if(0===e[i])return e[i]=1,n;if(1===e[i]&&(e[i]=2,n.child1))return t.push(n.child1),e.push(1),n.child1;if(2===e[i]&&(e[i]=3,n.child2))return t.push(n.child2),e.push(1),n.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}"undefined"!=typeof DEBUG&&DEBUG;var q="undefined"!=typeof ASSERT&&ASSERT,N=r,U=l.exports,W=C,H=k,G=Y;function Y(){this.m_tree=new H,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}Y.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},Y.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),n=this.m_tree.getFatAABB(e);return W.testOverlap(i,n)},Y.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},Y.prototype.getProxyCount=function(){return this.m_proxyCount},Y.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},Y.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},Y.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},Y.prototype.query=function(t,e){this.m_tree.query(t,e)},Y.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},Y.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},Y.prototype.createProxy=function(t,e){q&&N.assert(W.isValid(t));var i=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(i),i},Y.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},Y.prototype.moveProxy=function(t,e,i){q&&N.assert(W.isValid(e)),this.m_tree.moveProxy(t,e,i)&&this.bufferMove(t)},Y.prototype.touchProxy=function(t){this.bufferMove(t)},Y.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},Y.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},Y.prototype.updatePairs=function(t){for(q&&N.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},Y.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=U.min(t,this.m_queryProxyId),i=U.max(t,this.m_queryProxyId),n=this.m_tree.getUserData(e),o=this.m_tree.getUserData(i);return this.m_callback(n,o),!0};var J={exports:{}},Z="undefined"!=typeof DEBUG&&DEBUG,X="undefined"!=typeof ASSERT&&ASSERT,K=it,Q=r,tt=_,et=l.exports;function it(t){if(!(this instanceof it))return new it(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}it.neo=function(t){var e=Object.create(it.prototype);return e.setAngle(t),e},it.clone=function(t){X&&it.assert(t);var e=Object.create(it.prototype);return e.s=t.s,e.c=t.c,e},it.identity=function(){var t=Object.create(it.prototype);return t.s=0,t.c=1,t},it.isValid=function(t){return t&&et.isFinite(t.s)&&et.isFinite(t.c)},it.assert=function(t){if(X&&!it.isValid(t))throw Z&&Q.debug(t),new Error("Invalid Rot!")},it.prototype.setIdentity=function(){this.s=0,this.c=1},it.prototype.set=function(t){"object"==typeof t?(X&&it.assert(t),this.s=t.s,this.c=t.c):(X&&et.assert(t),this.s=et.sin(t),this.c=et.cos(t))},it.prototype.setAngle=function(t){X&&et.assert(t),this.s=et.sin(t),this.c=et.cos(t)},it.prototype.getAngle=function(){return et.atan2(this.s,this.c)},it.prototype.getXAxis=function(){return tt.neo(this.c,this.s)},it.prototype.getYAxis=function(){return tt.neo(-this.s,this.c)},it.mul=function(t,e){if(X&&it.assert(t),"c"in e&&"s"in e){X&&it.assert(e);var i=it.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i}if("x"in e&&"y"in e)return X&&tt.assert(e),tt.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},it.mulRot=function(t,e){X&&it.assert(t),X&&it.assert(e);var i=it.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i},it.mulVec2=function(t,e){return X&&it.assert(t),X&&tt.assert(e),tt.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},it.mulSub=function(t,e,i){var n=t.c*(e.x-i.x)-t.s*(e.y-i.y),o=t.s*(e.x-i.x)+t.c*(e.y-i.y);return tt.neo(n,o)},it.mulT=function(t,e){if("c"in e&&"s"in e){X&&it.assert(e);var i=it.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i}if("x"in e&&"y"in e)return X&&tt.assert(e),tt.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},it.mulTRot=function(t,e){X&&it.assert(e);var i=it.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i},it.mulTVec2=function(t,e){return X&&tt.assert(e),tt.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)};var nt="undefined"!=typeof DEBUG&&DEBUG,ot="undefined"!=typeof ASSERT&&ASSERT,rt=ct,st=r,at=_,lt=K;function ct(t,e){if(!(this instanceof ct))return new ct(t,e);this.p=at.zero(),this.q=lt.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}ct.clone=function(t){var e=Object.create(ct.prototype);return e.p=at.clone(t.p),e.q=lt.clone(t.q),e},ct.neo=function(t,e){var i=Object.create(ct.prototype);return i.p=at.clone(t),i.q=lt.clone(e),i},ct.identity=function(){var t=Object.create(ct.prototype);return t.p=at.zero(),t.q=lt.identity(),t},ct.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},ct.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},ct.isValid=function(t){return t&&at.isValid(t.p)&&lt.isValid(t.q)},ct.assert=function(t){if(ot&&!ct.isValid(t))throw nt&&st.debug(t),new Error("Invalid Transform!")},ct.mul=function(t,e){if(ot&&ct.assert(t),Array.isArray(e)){for(var i=[],n=0;n<e.length;n++)i[n]=ct.mul(t,e[n]);return i}if("x"in e&&"y"in e){ot&&at.assert(e);var o=t.q.c*e.x-t.q.s*e.y+t.p.x,r=t.q.s*e.x+t.q.c*e.y+t.p.y;return at.neo(o,r)}if("p"in e&&"q"in e){ot&&ct.assert(e);var s=ct.identity();return s.q=lt.mulRot(t.q,e.q),s.p=at.add(lt.mulVec2(t.q,e.p),t.p),s}},ct.mulAll=function(t,e){ot&&ct.assert(t);for(var i=[],n=0;n<e.length;n++)i[n]=ct.mul(t,e[n]);return i},ct.mulFn=function(t){return ot&&ct.assert(t),function(e){return ct.mul(t,e)}},ct.mulVec2=function(t,e){ot&&ct.assert(t),ot&&at.assert(e);var i=t.q.c*e.x-t.q.s*e.y+t.p.x,n=t.q.s*e.x+t.q.c*e.y+t.p.y;return at.neo(i,n)},ct.mulXf=function(t,e){ot&&ct.assert(t),ot&&ct.assert(e);var i=ct.identity();return i.q=lt.mulRot(t.q,e.q),i.p=at.add(lt.mulVec2(t.q,e.p),t.p),i},ct.mulT=function(t,e){if(ot&&ct.assert(t),"x"in e&&"y"in e){ot&&at.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,o=t.q.c*i+t.q.s*n,r=-t.q.s*i+t.q.c*n;return at.neo(o,r)}if("p"in e&&"q"in e){ot&&ct.assert(e);var s=ct.identity();return s.q.set(lt.mulTRot(t.q,e.q)),s.p.set(lt.mulTVec2(t.q,at.sub(e.p,t.p))),s}},ct.mulTVec2=function(t,e){ot&&ct.assert(t),ot&&at.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,o=t.q.c*i+t.q.s*n,r=-t.q.s*i+t.q.c*n;return at.neo(o,r)},ct.mulTXf=function(t,e){ot&&ct.assert(t),ot&&ct.assert(e);var i=ct.identity();return i.q.set(lt.mulTRot(t.q,e.q)),i.p.set(lt.mulTVec2(t.q,at.sub(e.p,t.p))),i},"undefined"!=typeof DEBUG&&DEBUG;var ut="undefined"!=typeof ASSERT&&ASSERT,ht=yt,mt=r,pt=l.exports,dt=_,ft=K,_t=rt;function yt(t,e){ut&&mt.assert(void 0===t),ut&&mt.assert(void 0===e),this.localCenter=dt.zero(),this.c=dt.zero(),this.a=0,this.alpha0=0,this.c0=dt.zero(),this.a0=0}yt.prototype.setTransform=function(t){var e=_t.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},yt.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var i=_t.mulVec2(e,this.localCenter);this.c.set(i),this.c0.set(i)},yt.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(ft.mulVec2(t.q,this.localCenter))},yt.prototype.advance=function(t){ut&&mt.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},yt.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},yt.prototype.normalize=function(){var t=pt.mod(this.a0,-pt.PI,+pt.PI);this.a-=this.a0-t,this.a0=t},yt.prototype.clone=function(){var t=new yt;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},yt.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var vt=function(){this.v=gt.zero(),this.w=0},gt=_;"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var bt=At,xt=_,$t=K;function At(){this.c=xt.zero(),this.a=0}At.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(xt.sub(this.c,$t.mulVec2(t.q,e))),t},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var wt=Bt;function Bt(){this.m_type,this.m_radius}Bt.prototype._reset=function(){},Bt.prototype._serialize=function(){return{}},Bt.TYPES={},Bt._deserialize=function(t,e,i){var n=Bt.TYPES[t.type];return n&&i(n,t)},Bt.isValid=function(t){return!!t},Bt.prototype.getRadius=function(){return this.m_radius},Bt.prototype.getType=function(){return this.m_type},Bt.prototype._clone=function(){},Bt.prototype.getChildCount=function(){},Bt.prototype.testPoint=function(t,e){},Bt.prototype.rayCast=function(t,e,i,n){},Bt.prototype.computeAABB=function(t,e,i){},Bt.prototype.computeMass=function(t,e){},Bt.prototype.computeDistanceProxy=function(t){},"undefined"!=typeof DEBUG&&DEBUG;var Ct="undefined"!=typeof ASSERT&&ASSERT,St=Vt,Et=r,Mt=o,Tt=l.exports,Pt=_,zt=C,Ft=wt,It={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function kt(t,e){this.aabb=new zt,this.fixture=t,this.childIndex=e,this.proxyId}function Vt(t,e,i){e.shape?(i=e,e=e.shape):"number"==typeof i&&(i={density:i}),i=Mt(i,It),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var n=this.m_shape.getChildCount(),o=0;o<n;++o)this.m_proxies[o]=new kt(this,o);this.m_userData=i.userData}Vt.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var i=this.m_shape.getChildCount(),n=0;n<i;++n)this.m_proxies[n]=new kt(this,n);this.createProxies(e,t.m_xf),t.resetMassData()},Vt.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},Vt._deserialize=function(t,e,i){var n=i(Ft,t.shape);return n&&new Vt(e,n,t)},Vt.prototype.getType=function(){return this.m_shape.getType()},Vt.prototype.getShape=function(){return this.m_shape},Vt.prototype.isSensor=function(){return this.m_isSensor},Vt.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},Vt.prototype.getUserData=function(){return this.m_userData},Vt.prototype.setUserData=function(t){this.m_userData=t},Vt.prototype.getBody=function(){return this.m_body},Vt.prototype.getNext=function(){return this.m_next},Vt.prototype.getDensity=function(){return this.m_density},Vt.prototype.setDensity=function(t){Ct&&Et.assert(Tt.isFinite(t)&&t>=0),this.m_density=t},Vt.prototype.getFriction=function(){return this.m_friction},Vt.prototype.setFriction=function(t){this.m_friction=t},Vt.prototype.getRestitution=function(){return this.m_restitution},Vt.prototype.setRestitution=function(t){this.m_restitution=t},Vt.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},Vt.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},Vt.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},Vt.prototype.getAABB=function(t){return Ct&&Et.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},Vt.prototype.createProxies=function(t,e){Ct&&Et.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var i=0;i<this.m_proxyCount;++i){var n=this.m_proxies[i];this.m_shape.computeAABB(n.aabb,e,i),n.proxyId=t.createProxy(n.aabb,n)}},Vt.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},Vt.prototype.synchronize=function(t,e,i){for(var n=0;n<this.m_proxyCount;++n){var o=this.m_proxies[n],r=new zt,s=new zt;this.m_shape.computeAABB(r,e,o.childIndex),this.m_shape.computeAABB(s,i,o.childIndex),o.aabb.combine(r,s);var a=Pt.sub(i.p,e.p);t.moveProxy(o.proxyId,o.aabb,a)}},Vt.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},Vt.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},Vt.prototype.setFilterGroupIndex=function(t){return this.m_filterGroupIndex=t},Vt.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},Vt.prototype.setFilterCategoryBits=function(t){this.m_filterCategoryBits=t},Vt.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},Vt.prototype.setFilterMaskBits=function(t){this.m_filterMaskBits=t},Vt.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),n=e.getFixtureB();i!=this&&n!=this||e.flagForFiltering(),t=t.next}var o=this.m_body.getWorld();if(null!=o)for(var r=o.m_broadPhase,s=0;s<this.m_proxyCount;++s)r.touchProxy(this.m_proxies[s].proxyId)}},Vt.prototype.shouldCollide=function(t){if(t.m_filterGroupIndex===this.m_filterGroupIndex&&0!==t.m_filterGroupIndex)return t.m_filterGroupIndex>0;var e=0!=(t.m_filterMaskBits&this.m_filterCategoryBits),i=0!=(t.m_filterCategoryBits&this.m_filterMaskBits);return e&&i},"undefined"!=typeof DEBUG&&DEBUG;var Lt="undefined"!=typeof ASSERT&&ASSERT,jt=Qt,Rt=r,Dt=o,Ot=_,qt=K,Nt=l.exports,Ut=ht,Wt=rt,Ht=vt,Gt=bt,Yt=St,Jt=Qt.STATIC="static",Zt=Qt.KINEMATIC="kinematic",Xt=Qt.DYNAMIC="dynamic",Kt={type:Jt,position:Ot.zero(),angle:0,linearVelocity:Ot.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function Qt(t,e){e=Dt(e,Kt),Lt&&Rt.assert(Ot.isValid(e.position)),Lt&&Rt.assert(Ot.isValid(e.linearVelocity)),Lt&&Rt.assert(Nt.isFinite(e.angle)),Lt&&Rt.assert(Nt.isFinite(e.angularVelocity)),Lt&&Rt.assert(Nt.isFinite(e.angularDamping)&&e.angularDamping>=0),Lt&&Rt.assert(Nt.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==Xt?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=Wt.identity(),this.m_xf.p=Ot.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new Ut,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new Ht,this.c_position=new Gt,this.m_force=Ot.zero(),this.m_torque=0,this.m_linearVelocity=Ot.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function te(){this.mass=0,this.center=Ot.zero(),this.I=0}Qt.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},Qt._deserialize=function(t,e,i){var n=new Qt(e,t);if(t.fixtures)for(var o=t.fixtures.length-1;o>=0;o--){var r=i(Yt,t.fixtures[o],n);n._addFixture(r)}return n},Qt.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},Qt.prototype.getWorld=function(){return this.m_world},Qt.prototype.getNext=function(){return this.m_next},Qt.prototype.setUserData=function(t){this.m_userData=t},Qt.prototype.getUserData=function(){return this.m_userData},Qt.prototype.getFixtureList=function(){return this.m_fixtureList},Qt.prototype.getJointList=function(){return this.m_jointList},Qt.prototype.getContactList=function(){return this.m_contactList},Qt.prototype.isStatic=function(){return this.m_type==Jt},Qt.prototype.isDynamic=function(){return this.m_type==Xt},Qt.prototype.isKinematic=function(){return this.m_type==Zt},Qt.prototype.setStatic=function(){return this.setType(Jt),this},Qt.prototype.setDynamic=function(){return this.setType(Xt),this},Qt.prototype.setKinematic=function(){return this.setType(Zt),this},Qt.prototype.getType=function(){return this.m_type},Qt.prototype.setType=function(t){if(Lt&&Rt.assert(t===Jt||t===Zt||t===Xt),Lt&&Rt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==Jt&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e;e=e.next,this.m_world.destroyContact(i.contact)}this.m_contactList=null;for(var n=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)for(var r=o.m_proxyCount,s=0;s<r;++s)n.touchProxy(o.m_proxies[s].proxyId)}},Qt.prototype.isBullet=function(){return this.m_bulletFlag},Qt.prototype.setBullet=function(t){this.m_bulletFlag=!!t},Qt.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},Qt.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},Qt.prototype.isAwake=function(){return this.m_awakeFlag},Qt.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},Qt.prototype.isActive=function(){return this.m_activeFlag},Qt.prototype.setActive=function(t){if(Lt&&Rt.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.destroyProxies(e);for(var n=this.m_contactList;n;){var o=n;n=n.next,this.m_world.destroyContact(o.contact)}this.m_contactList=null}},Qt.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},Qt.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},Qt.prototype.getTransform=function(){return this.m_xf},Qt.prototype.setTransform=function(t,e){if(Lt&&Rt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var i=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.synchronize(i,this.m_xf,this.m_xf)}},Qt.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},Qt.prototype.synchronizeFixtures=function(){var t=Wt.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,t,this.m_xf)},Qt.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},Qt.prototype.getPosition=function(){return this.m_xf.p},Qt.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},Qt.prototype.getAngle=function(){return this.m_sweep.a},Qt.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},Qt.prototype.getWorldCenter=function(){return this.m_sweep.c},Qt.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},Qt.prototype.getLinearVelocity=function(){return this.m_linearVelocity},Qt.prototype.getLinearVelocityFromWorldPoint=function(t){var e=Ot.sub(t,this.m_sweep.c);return Ot.add(this.m_linearVelocity,Ot.cross(this.m_angularVelocity,e))},Qt.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},Qt.prototype.setLinearVelocity=function(t){this.m_type!=Jt&&(Ot.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},Qt.prototype.getAngularVelocity=function(){return this.m_angularVelocity},Qt.prototype.setAngularVelocity=function(t){this.m_type!=Jt&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},Qt.prototype.getLinearDamping=function(){return this.m_linearDamping},Qt.prototype.setLinearDamping=function(t){this.m_linearDamping=t},Qt.prototype.getAngularDamping=function(){return this.m_angularDamping},Qt.prototype.setAngularDamping=function(t){this.m_angularDamping=t},Qt.prototype.getGravityScale=function(){return this.m_gravityScale},Qt.prototype.setGravityScale=function(t){this.m_gravityScale=t},Qt.prototype.getMass=function(){return this.m_mass},Qt.prototype.getInertia=function(){return this.m_I+this.m_mass*Ot.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},Qt.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},Qt.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);Lt&&Rt.assert(this.isDynamic());for(var t=Ot.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var i=new te;e.getMassData(i),this.m_mass+=i.mass,t.addMul(i.mass,i.center),this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*Ot.dot(t,t),Lt&&Rt.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var n=Ot.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(Ot.cross(this.m_angularVelocity,Ot.sub(this.m_sweep.c,n)))},Qt.prototype.setMassData=function(t){if(Lt&&Rt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==Xt){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*Ot.dot(t.center,t.center),Lt&&Rt.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=Ot.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(Ot.cross(this.m_angularVelocity,Ot.sub(this.m_sweep.c,e)))}},Qt.prototype.applyForce=function(t,e,i){this.m_type==Xt&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=Ot.cross(Ot.sub(e,this.m_sweep.c),t)))},Qt.prototype.applyForceToCenter=function(t,e){this.m_type==Xt&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},Qt.prototype.applyTorque=function(t,e){this.m_type==Xt&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},Qt.prototype.applyLinearImpulse=function(t,e,i){this.m_type==Xt&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*Ot.cross(Ot.sub(e,this.m_sweep.c),t)))},Qt.prototype.applyAngularImpulse=function(t,e){this.m_type==Xt&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},Qt.prototype.shouldCollide=function(t){if(this.m_type!=Xt&&t.m_type!=Xt)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},Qt.prototype._addFixture=function(t){if(Lt&&Rt.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},Qt.prototype.createFixture=function(t,e){if(Lt&&Rt.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var i=new Yt(this,t,e);return this._addFixture(i),i},Qt.prototype.destroyFixture=function(t){if(Lt&&Rt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){Lt&&Rt.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var i=this.m_fixtureList;null!=i;){if(i.m_next===t){i.m_next=t.m_next,e=!0;break}i=i.m_next}Lt&&Rt.assert(e);for(var n=this.m_contactList;n;){var o=n.contact;n=n.next;var r=o.getFixtureA(),s=o.getFixtureB();t!=r&&t!=s||this.m_world.destroyContact(o)}if(this.m_activeFlag){var a=this.m_world.m_broadPhase;t.destroyProxies(a)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},Qt.prototype.getWorldPoint=function(t){return Wt.mulVec2(this.m_xf,t)},Qt.prototype.getWorldVector=function(t){return qt.mulVec2(this.m_xf.q,t)},Qt.prototype.getLocalPoint=function(t){return Wt.mulTVec2(this.m_xf,t)},Qt.prototype.getLocalVector=function(t){return qt.mulTVec2(this.m_xf.q,t)};var ee="undefined"!=typeof DEBUG&&DEBUG,ie="undefined"!=typeof ASSERT&&ASSERT,ne=se,oe=r,re=_;function se(t,e,i,n){"object"==typeof t&&null!==t?(this.ex=re.clone(t),this.ey=re.clone(e)):"number"==typeof t?(this.ex=re.neo(t,i),this.ey=re.neo(e,n)):(this.ex=re.zero(),this.ey=re.zero())}se.prototype.toString=function(){return JSON.stringify(this)},se.isValid=function(t){return t&&re.isValid(t.ex)&&re.isValid(t.ey)},se.assert=function(t){if(ie&&!se.isValid(t))throw ee&&oe.debug(t),new Error("Invalid Mat22!")},se.prototype.set=function(t,e,i,n){"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"number"==typeof n?(this.ex.set(t,i),this.ey.set(e,n)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(ie&&se.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):ie&&oe.assert(!1)},se.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},se.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},se.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,i=this.ex.y,n=this.ey.y,o=t*n-e*i;0!=o&&(o=1/o);var r=new se;return r.ex.x=o*n,r.ey.x=-o*e,r.ex.y=-o*i,r.ey.y=o*t,r},se.prototype.solve=function(t){ie&&re.assert(t);var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,r=e*o-i*n;0!=r&&(r=1/r);var s=re.zero();return s.x=r*(o*t.x-i*t.y),s.y=r*(e*t.y-n*t.x),s},se.mul=function(t,e){if(e&&"x"in e&&"y"in e){ie&&re.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return re.neo(i,n)}if(e&&"ex"in e&&"ey"in e)return ie&&se.assert(e),new se(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y);ie&&oe.assert(!1)},se.mulVec2=function(t,e){ie&&re.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return re.neo(i,n)},se.mulMat22=function(t,e){return ie&&se.assert(e),new se(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y)},se.mulT=function(t,e){return e&&"x"in e&&"y"in e?(ie&&re.assert(e),re.neo(re.dot(e,t.ex),re.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(ie&&se.assert(e),new se(re.neo(re.dot(t.ex,e.ex),re.dot(t.ey,e.ex)),re.neo(re.dot(t.ex,e.ey),re.dot(t.ey,e.ey)))):void(ie&&oe.assert(!1))},se.mulTVec2=function(t,e){return ie&&se.assert(t),ie&&re.assert(e),re.neo(re.dot(e,t.ex),re.dot(e,t.ey))},se.mulTMat22=function(t,e){return ie&&se.assert(t),ie&&se.assert(e),new se(re.neo(re.dot(t.ex,e.ex),re.dot(t.ey,e.ex)),re.neo(re.dot(t.ex,e.ey),re.dot(t.ey,e.ey)))},se.abs=function(t){return ie&&se.assert(t),new se(re.abs(t.ex),re.abs(t.ey))},se.add=function(t,e){return ie&&se.assert(t),ie&&se.assert(e),new se(re.add(t.ex,e.ex),re.add(t.ey,e.ey))};var ae={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var le=_,ce=rt,ue=l.exports,he=K;function me(){this.type,this.localNormal=le.zero(),this.localPoint=le.zero(),this.points=[new pe,new pe],this.pointCount=0}function pe(){this.localPoint=le.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new de}function de(){this.cf=new fe}function fe(){this.indexA,this.indexB,this.typeA,this.typeB}function _e(){this.normal,this.points=[],this.separations=[]}ae.exports=me,ae.exports.clipSegmentToLine=function(t,e,i,n,o){var r=0,s=le.dot(i,e[0].v)-n,a=le.dot(i,e[1].v)-n;s<=0&&t[r++].set(e[0]);a<=0&&t[r++].set(e[1]);if(s*a<0){var l=s/(s-a);t[r].v.setCombine(1-l,e[0].v,l,e[1].v),t[r].id.cf.indexA=o,t[r].id.cf.indexB=e[0].id.cf.indexB,t[r].id.cf.typeA=me.e_vertex,t[r].id.cf.typeB=me.e_face,++r}return r},ae.exports.clipVertex=ve,ae.exports.getPointStates=function(t,e,i,n){for(var o=0;o<i.pointCount;++o){var r=i.points[o].id;t[o]=ye.removeState;for(var s=0;s<n.pointCount;++s)if(n.points[s].id.key==r.key){t[o]=ye.persistState;break}}for(o=0;o<n.pointCount;++o){r=n.points[o].id;e[o]=ye.addState;for(s=0;s<i.pointCount;++s)if(i.points[s].id.key==r.key){e[o]=ye.persistState;break}}},ae.exports.PointState=ye,me.e_circles=0,me.e_faceA=1,me.e_faceB=2,me.e_vertex=0,me.e_face=1,Object.defineProperty(de.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),de.prototype.set=function(t){this.cf.set(t.cf)},fe.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},me.prototype.getWorldManifold=function(t,e,i,n,o){if(0!=this.pointCount){var r=(t=t||new _e).normal,s=t.points,a=t.separations;switch(this.type){case me.e_circles:r=le.neo(1,0);var l=ce.mulVec2(e,this.localPoint),c=ce.mulVec2(n,this.points[0].localPoint),u=le.sub(c,l);le.lengthSquared(u)>ue.EPSILON*ue.EPSILON&&(r.set(u),r.normalize());var h=l.clone().addMul(i,r),m=c.clone().addMul(-o,r);s[0]=le.mid(h,m),a[0]=le.dot(le.sub(m,h),r),s.length=1,a.length=1;break;case me.e_faceA:r=he.mulVec2(e.q,this.localNormal);for(var p=ce.mulVec2(e,this.localPoint),d=0;d<this.pointCount;++d){var f=ce.mulVec2(n,this.points[d].localPoint);h=le.clone(f).addMul(i-le.dot(le.sub(f,p),r),r),m=le.clone(f).subMul(o,r);s[d]=le.mid(h,m),a[d]=le.dot(le.sub(m,h),r)}s.length=this.pointCount,a.length=this.pointCount;break;case me.e_faceB:r=he.mulVec2(n.q,this.localNormal);for(p=ce.mulVec2(n,this.localPoint),d=0;d<this.pointCount;++d){f=ce.mulVec2(e,this.points[d].localPoint),m=le.combine(1,f,o-le.dot(le.sub(f,p),r),r),h=le.combine(1,f,-i,r);s[d]=le.mid(h,m),a[d]=le.dot(le.sub(h,m),r)}s.length=this.pointCount,a.length=this.pointCount,r.mul(-1)}return t.normal=r,t.points=s,t.separations=a,t}};var ye={nullState:0,addState:1,persistState:2,removeState:3};function ve(){this.v=le.zero(),this.id=new de}ve.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)};var ge={exports:{}},be={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,be.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var i in this)"function"!=typeof this[i]&&"object"!=typeof this[i]&&(e+=i+": "+this[i]+t);return e};var xe="undefined"!=typeof DEBUG&&DEBUG,$e="undefined"!=typeof ASSERT&&ASSERT,Ae=Ce,we=r,Be=l.exports;function Ce(t,e,i){if(!(this instanceof Ce))return new Ce(t,e,i);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),$e&&Ce.assert(this)}Ce.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},Ce._deserialize=function(t){var e=Object.create(Ce.prototype);return e.x=t.x,e.y=t.y,e.z=t.z,e},Ce.neo=function(t,e,i){var n=Object.create(Ce.prototype);return n.x=t,n.y=e,n.z=i,n},Ce.clone=function(t){return $e&&Ce.assert(t),Ce.neo(t.x,t.y,t.z)},Ce.prototype.toString=function(){return JSON.stringify(this)},Ce.isValid=function(t){return t&&Be.isFinite(t.x)&&Be.isFinite(t.y)&&Be.isFinite(t.z)},Ce.assert=function(t){if($e&&!Ce.isValid(t))throw xe&&we.debug(t),new Error("Invalid Vec3!")},Ce.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},Ce.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Ce.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Ce.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Ce.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Ce.areEqual=function(t,e){return $e&&Ce.assert(t),$e&&Ce.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},Ce.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},Ce.cross=function(t,e){return new Ce(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},Ce.add=function(t,e){return new Ce(t.x+e.x,t.y+e.y,t.z+e.z)},Ce.sub=function(t,e){return new Ce(t.x-e.x,t.y-e.y,t.z-e.z)},Ce.mul=function(t,e){return new Ce(e*t.x,e*t.y,e*t.z)},Ce.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},Ce.neg=function(t){return new Ce(-t.x,-t.y,-t.z)};var Se="undefined"!=typeof DEBUG&&DEBUG,Ee="undefined"!=typeof ASSERT&&ASSERT,Me=Fe,Te=r,Pe=_,ze=Ae;function Fe(t,e,i){"object"==typeof t&&null!==t?(this.ex=ze.clone(t),this.ey=ze.clone(e),this.ez=ze.clone(i)):(this.ex=ze(),this.ey=ze(),this.ez=ze())}Fe.prototype.toString=function(){return JSON.stringify(this)},Fe.isValid=function(t){return t&&ze.isValid(t.ex)&&ze.isValid(t.ey)&&ze.isValid(t.ez)},Fe.assert=function(t){if(Ee&&!Fe.isValid(t))throw Se&&Te.debug(t),new Error("Invalid Mat33!")},Fe.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},Fe.prototype.solve33=function(t){var e=ze.dot(this.ex,ze.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=new ze;return i.x=e*ze.dot(t,ze.cross(this.ey,this.ez)),i.y=e*ze.dot(this.ex,ze.cross(t,this.ez)),i.z=e*ze.dot(this.ex,ze.cross(this.ey,t)),i},Fe.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,r=e*o-i*n;0!=r&&(r=1/r);var s=Pe.zero();return s.x=r*(o*t.x-i*t.y),s.y=r*(e*t.y-n*t.x),s},Fe.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,r=e*o-i*n;0!=r&&(r=1/r),t.ex.x=r*o,t.ey.x=-r*i,t.ex.z=0,t.ex.y=-r*n,t.ey.y=r*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},Fe.prototype.getSymInverse33=function(t){var e=ze.dot(this.ex,ze.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=this.ex.x,n=this.ey.x,o=this.ez.x,r=this.ey.y,s=this.ez.y,a=this.ez.z;t.ex.x=e*(r*a-s*s),t.ex.y=e*(o*s-n*a),t.ex.z=e*(n*s-o*r),t.ey.x=t.ex.y,t.ey.y=e*(i*a-o*o),t.ey.z=e*(o*n-i*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*r-n*n)},Fe.mul=function(t,e){if(Ee&&Fe.assert(t),e&&"z"in e&&"y"in e&&"x"in e){Ee&&ze.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,o=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new ze(i,n,o)}if(e&&"y"in e&&"x"in e){Ee&&Pe.assert(e);i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return Pe.neo(i,n)}Ee&&Te.assert(!1)},Fe.mulVec3=function(t,e){Ee&&Fe.assert(t),Ee&&ze.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,o=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new ze(i,n,o)},Fe.mulVec2=function(t,e){Ee&&Fe.assert(t),Ee&&Pe.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return Pe.neo(i,n)},Fe.add=function(t,e){return Ee&&Fe.assert(t),Ee&&Fe.assert(e),new Fe(ze.add(t.ex,e.ex),ze.add(t.ey,e.ey),ze.add(t.ez,e.ez))},"undefined"!=typeof DEBUG&&DEBUG;var Ie="undefined"!=typeof ASSERT&&ASSERT;ge.exports=We,ge.exports.Input=qe,ge.exports.Output=Ne,ge.exports.Proxy=He,ge.exports.Cache=Ue;var ke=b,Ve=r,Le=be,je=l.exports,Re=_,De=K,Oe=rt;function qe(){this.proxyA=new He,this.proxyB=new He,this.transformA=null,this.transformB=null,this.useRadii=!1}function Ne(){this.pointA=Re.zero(),this.pointB=Re.zero(),this.distance,this.iterations}function Ue(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function We(t,e,i){++Le.gjkCalls;var n=i.proxyA,o=i.proxyB,r=i.transformA,s=i.transformB,a=new Ye;a.readCache(e,n,r,o,s);for(var l=a.m_v,c=ke.maxDistnceIterations,u=[],h=[],m=0,p=0;p<c;){m=a.m_count;for(var d=0;d<m;++d)u[d]=l[d].indexA,h[d]=l[d].indexB;if(a.solve(),3==a.m_count)break;(x=a.getClosestPoint()).lengthSquared();var f=a.getSearchDirection();if(f.lengthSquared()<je.EPSILON*je.EPSILON)break;var _=l[a.m_count];_.indexA=n.getSupport(De.mulTVec2(r.q,Re.neg(f))),_.wA=Oe.mulVec2(r,n.getVertex(_.indexA)),_.indexB=o.getSupport(De.mulTVec2(s.q,f)),_.wB=Oe.mulVec2(s,o.getVertex(_.indexB)),_.w=Re.sub(_.wB,_.wA),++p,++Le.gjkIters;var y=!1;for(d=0;d<m;++d)if(_.indexA==u[d]&&_.indexB==h[d]){y=!0;break}if(y)break;++a.m_count}if(Le.gjkMaxIters=je.max(Le.gjkMaxIters,p),a.getWitnessPoints(t.pointA,t.pointB),t.distance=Re.distance(t.pointA,t.pointB),t.iterations=p,a.writeCache(e),i.useRadii){var v=n.m_radius,g=o.m_radius;if(t.distance>v+g&&t.distance>je.EPSILON){t.distance-=v+g;var b=Re.sub(t.pointB,t.pointA);b.normalize(),t.pointA.addMul(v,b),t.pointB.subMul(g,b)}else{var x=Re.mid(t.pointA,t.pointB);t.pointA.set(x),t.pointB.set(x),t.distance=0}}}function He(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function Ge(){this.indexA,this.indexB,this.wA=Re.zero(),this.wB=Re.zero(),this.w=Re.zero(),this.a}function Ye(){this.m_v1=new Ge,this.m_v2=new Ge,this.m_v3=new Ge,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}Le.gjkCalls=0,Le.gjkIters=0,Le.gjkMaxIters=0,He.prototype.getVertexCount=function(){return this.m_count},He.prototype.getVertex=function(t){return Ie&&Ve.assert(0<=t&&t<this.m_count),this.m_vertices[t]},He.prototype.getSupport=function(t){for(var e=0,i=Re.dot(this.m_vertices[0],t),n=0;n<this.m_count;++n){var o=Re.dot(this.m_vertices[n],t);o>i&&(e=n,i=o)}return e},He.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},He.prototype.set=function(t,e){Ie&&Ve.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},Ge.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=Re.clone(t.wA),this.wB=Re.clone(t.wB),this.w=Re.clone(t.w),this.a=t.a},Ye.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},Ye.prototype.readCache=function(t,e,i,n,o){Ie&&Ve.assert(t.count<=3),this.m_count=t.count;for(var r=0;r<this.m_count;++r){(u=this.m_v[r]).indexA=t.indexA[r],u.indexB=t.indexB[r];var s=e.getVertex(u.indexA),a=n.getVertex(u.indexB);u.wA=Oe.mulVec2(i,s),u.wB=Oe.mulVec2(o,a),u.w=Re.sub(u.wB,u.wA),u.a=0}if(this.m_count>1){var l=t.metric,c=this.getMetric();(c<.5*l||2*l<c||c<je.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var u;(u=this.m_v[0]).indexA=0,u.indexB=0;s=e.getVertex(0),a=n.getVertex(0);u.wA=Oe.mulVec2(i,s),u.wB=Oe.mulVec2(o,a),u.w=Re.sub(u.wB,u.wA),u.a=1,this.m_count=1}},Ye.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},Ye.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return Re.neg(this.m_v1.w);case 2:var t=Re.sub(this.m_v2.w,this.m_v1.w);return Re.cross(t,Re.neg(this.m_v1.w))>0?Re.cross(1,t):Re.cross(t,1);default:return Ie&&Ve.assert(!1),Re.zero()}},Ye.prototype.getClosestPoint=function(){switch(this.m_count){default:return Ie&&Ve.assert(!1),Re.zero();case 1:return Re.clone(this.m_v1.w);case 2:return Re.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return Re.zero()}},Ye.prototype.getWitnessPoints=function(t,e){switch(this.m_count){default:Ie&&Ve.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t)}},Ye.prototype.getMetric=function(){switch(this.m_count){default:return Ie&&Ve.assert(!1),0;case 1:return 0;case 2:return Re.distance(this.m_v1.w,this.m_v2.w);case 3:return Re.cross(Re.sub(this.m_v2.w,this.m_v1.w),Re.sub(this.m_v3.w,this.m_v1.w))}},Ye.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:Ie&&Ve.assert(!1)}},Ye.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=Re.sub(e,t),n=-Re.dot(t,i);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);var o=Re.dot(e,i);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var r=1/(o+n);this.m_v1.a=o*r,this.m_v2.a=n*r,this.m_count=2},Ye.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=Re.sub(e,t),o=Re.dot(t,n),r=Re.dot(e,n),s=-o,a=Re.sub(i,t),l=Re.dot(t,a),c=Re.dot(i,a),u=-l,h=Re.sub(i,e),m=Re.dot(e,h),p=Re.dot(i,h),d=-m,f=Re.cross(n,a),_=f*Re.cross(e,i),y=f*Re.cross(i,t),v=f*Re.cross(t,e);if(s<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(r>0&&s>0&&v<=0){var g=1/(r+s);return this.m_v1.a=r*g,this.m_v2.a=s*g,void(this.m_count=2)}if(c>0&&u>0&&y<=0){var b=1/(c+u);return this.m_v1.a=c*b,this.m_v3.a=u*b,this.m_count=2,void this.m_v2.set(this.m_v3)}if(r<=0&&d<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(c<=0&&p<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(p>0&&d>0&&_<=0){var x=1/(p+d);return this.m_v2.a=p*x,this.m_v3.a=d*x,this.m_count=2,void this.m_v1.set(this.m_v3)}var $=1/(_+y+v);this.m_v1.a=_*$,this.m_v2.a=y*$,this.m_v3.a=v*$,this.m_count=3},We.testOverlap=function(t,e,i,n,o,r){var s=new qe;s.proxyA.set(t,e),s.proxyB.set(i,n),s.transformA=o,s.transformB=r,s.useRadii=!0;var a=new Ue,l=new Ne;return We(l,a,s),l.distance<10*je.EPSILON},"undefined"!=typeof DEBUG&&DEBUG;var Je="undefined"!=typeof ASSERT&&ASSERT,Ze=r,Xe=l.exports,Ke=_,Qe=rt,ti=ne,ei=K,ii=b,ni=ae.exports,oi=ge.exports,ri=ai;function si(t){this.contact=t,this.prev,this.next,this.other}function ai(t,e,i,n,o){this.m_nodeA=new si(this),this.m_nodeB=new si(this),this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=n,this.m_evaluateFcn=o,this.m_manifold=new ni,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=ci(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=ui(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=Ke.zero(),this.v_normalMass=new ti,this.v_K=new ti,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=Ke.zero(),this.p_localPoint=Ke.zero(),this.p_localCenterA=Ke.zero(),this.p_localCenterB=Ke.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function li(){this.rA=Ke.zero(),this.rB=Ke.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function ci(t,e){return Xe.sqrt(t*e)}function ui(t,e){return t>e?t:e}ai.prototype.initConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getShape(),o=i.getShape(),r=e.getBody(),s=i.getBody(),a=this.getManifold(),l=a.pointCount;Je&&Ze.assert(l>0),this.v_invMassA=r.m_invMass,this.v_invMassB=s.m_invMass,this.v_invIA=r.m_invI,this.v_invIB=s.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=r.m_invMass,this.p_invMassB=s.m_invMass,this.p_invIA=r.m_invI,this.p_invIB=s.m_invI,this.p_localCenterA=Ke.clone(r.m_sweep.localCenter),this.p_localCenterB=Ke.clone(s.m_sweep.localCenter),this.p_radiusA=n.m_radius,this.p_radiusB=o.m_radius,this.p_type=a.type,this.p_localNormal=Ke.clone(a.localNormal),this.p_localPoint=Ke.clone(a.localPoint),this.p_pointCount=l;for(var c=0;c<l;++c){var u=a.points[c],h=this.v_points[c]=new li;t.warmStarting?(h.normalImpulse=t.dtRatio*u.normalImpulse,h.tangentImpulse=t.dtRatio*u.tangentImpulse):(h.normalImpulse=0,h.tangentImpulse=0),h.rA.setZero(),h.rB.setZero(),h.normalMass=0,h.tangentMass=0,h.velocityBias=0,this.p_localPoints[c]=Ke.clone(u.localPoint)}},ai.prototype.getManifold=function(){return this.m_manifold},ai.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),n=this.m_fixtureA.getShape(),o=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),n.m_radius,i.getTransform(),o.m_radius)},ai.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},ai.prototype.isEnabled=function(){return this.m_enabledFlag},ai.prototype.isTouching=function(){return this.m_touchingFlag},ai.prototype.getNext=function(){return this.m_next},ai.prototype.getFixtureA=function(){return this.m_fixtureA},ai.prototype.getFixtureB=function(){return this.m_fixtureB},ai.prototype.getChildIndexA=function(){return this.m_indexA},ai.prototype.getChildIndexB=function(){return this.m_indexB},ai.prototype.flagForFiltering=function(){this.m_filterFlag=!0},ai.prototype.setFriction=function(t){this.m_friction=t},ai.prototype.getFriction=function(){return this.m_friction},ai.prototype.resetFriction=function(){this.m_friction=ci(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},ai.prototype.setRestitution=function(t){this.m_restitution=t},ai.prototype.getRestitution=function(){return this.m_restitution},ai.prototype.resetRestitution=function(){this.m_restitution=ui(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},ai.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},ai.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},ai.prototype.evaluate=function(t,e,i){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,i,this.m_fixtureB,this.m_indexB)},ai.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,i=this.m_touchingFlag,n=this.m_fixtureA.isSensor(),o=this.m_fixtureB.isSensor(),r=n||o,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),l=s.getTransform(),c=a.getTransform();if(r){var u=this.m_fixtureA.getShape(),h=this.m_fixtureB.getShape();e=oi.testOverlap(u,this.m_indexA,h,this.m_indexB,l,c),this.m_manifold.pointCount=0}else{var m=this.m_manifold;this.m_manifold=new ni,this.evaluate(this.m_manifold,l,c),e=this.m_manifold.pointCount>0;for(var p=0;p<this.m_manifold.pointCount;++p){var d=this.m_manifold.points[p];d.normalImpulse=0,d.tangentImpulse=0;for(var f=0;f<m.pointCount;++f){var _=m.points[f];if(_.id.key==d.id.key){d.normalImpulse=_.normalImpulse,d.tangentImpulse=_.tangentImpulse;break}}}e!=i&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==i&&1==e&&t&&t.beginContact(this),1==i&&0==e&&t&&t.endContact(this),0==r&&e&&t&&t.preSolve(this,m)},ai.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},ai.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,!0,e,i)},ai.prototype._solvePositionConstraint=function(t,e,i,n){var o=this.m_fixtureA,r=this.m_fixtureB,s=o.getBody(),a=r.getBody();s.c_velocity,a.c_velocity;var l=s.c_position,c=a.c_position,u=Ke.clone(this.p_localCenterA),h=Ke.clone(this.p_localCenterB),m=0,p=0;e&&s!=i&&s!=n||(m=this.p_invMassA,p=this.p_invIA);var d=0,f=0;e&&a!=i&&a!=n||(d=this.p_invMassB,f=this.p_invIB);for(var _=Ke.clone(l.c),y=l.a,v=Ke.clone(c.c),g=c.a,b=0,x=0;x<this.p_pointCount;++x){var $,A,w,B=Qe.identity(),C=Qe.identity();switch(B.q.set(y),C.q.set(g),B.p=Ke.sub(_,ei.mulVec2(B.q,u)),C.p=Ke.sub(v,ei.mulVec2(C.q,h)),this.p_type){case ni.e_circles:var S=Qe.mulVec2(B,this.p_localPoint),E=Qe.mulVec2(C,this.p_localPoints[0]);($=Ke.sub(E,S)).normalize(),A=Ke.combine(.5,S,.5,E),w=Ke.dot(Ke.sub(E,S),$)-this.p_radiusA-this.p_radiusB;break;case ni.e_faceA:$=ei.mulVec2(B.q,this.p_localNormal);var M=Qe.mulVec2(B,this.p_localPoint),T=Qe.mulVec2(C,this.p_localPoints[x]);w=Ke.dot(Ke.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T;break;case ni.e_faceB:$=ei.mulVec2(C.q,this.p_localNormal);M=Qe.mulVec2(C,this.p_localPoint),T=Qe.mulVec2(B,this.p_localPoints[x]);w=Ke.dot(Ke.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T,$.mul(-1)}var P=Ke.sub(A,_),z=Ke.sub(A,v);b=Xe.min(b,w);var F=e?ii.toiBaugarte:ii.baumgarte,I=ii.linearSlop,k=ii.maxLinearCorrection,V=Xe.clamp(F*(w+I),-k,0),L=Ke.cross(P,$),j=Ke.cross(z,$),R=m+d+p*L*L+f*j*j,D=R>0?-V/R:0,O=Ke.mul(D,$);_.subMul(m,O),y-=p*Ke.cross(P,O),v.addMul(d,O),g+=f*Ke.cross(z,O)}return l.c.set(_),l.a=y,c.c.set(v),c.a=g,b},ai.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getBody(),o=i.getBody(),r=n.c_velocity,s=o.c_velocity,a=n.c_position,l=o.c_position,c=this.p_radiusA,u=this.p_radiusB,h=this.getManifold(),m=this.v_invMassA,p=this.v_invMassB,d=this.v_invIA,f=this.v_invIB,_=Ke.clone(this.p_localCenterA),y=Ke.clone(this.p_localCenterB),v=Ke.clone(a.c),g=a.a,b=Ke.clone(r.v),x=r.w,$=Ke.clone(l.c),A=l.a,w=Ke.clone(s.v),B=s.w;Je&&Ze.assert(h.pointCount>0);var C=Qe.identity(),S=Qe.identity();C.q.set(g),S.q.set(A),C.p.setCombine(1,v,-1,ei.mulVec2(C.q,_)),S.p.setCombine(1,$,-1,ei.mulVec2(S.q,y));var E=h.getWorldManifold(null,C,c,S,u);this.v_normal.set(E.normal);for(var M=0;M<this.v_pointCount;++M){var T=this.v_points[M];T.rA.set(Ke.sub(E.points[M],v)),T.rB.set(Ke.sub(E.points[M],$));var P=Ke.cross(T.rA,this.v_normal),z=Ke.cross(T.rB,this.v_normal),F=m+p+d*P*P+f*z*z;T.normalMass=F>0?1/F:0;var I=Ke.cross(this.v_normal,1),k=Ke.cross(T.rA,I),V=Ke.cross(T.rB,I),L=m+p+d*k*k+f*V*V;T.tangentMass=L>0?1/L:0,T.velocityBias=0;var j=Ke.dot(this.v_normal,w)+Ke.dot(this.v_normal,Ke.cross(B,T.rB))-Ke.dot(this.v_normal,b)-Ke.dot(this.v_normal,Ke.cross(x,T.rA));j<-ii.velocityThreshold&&(T.velocityBias=-this.v_restitution*j)}if(2==this.v_pointCount&&t.blockSolve){var R=this.v_points[0],D=this.v_points[1],O=Ke.cross(R.rA,this.v_normal),q=Ke.cross(R.rB,this.v_normal),N=Ke.cross(D.rA,this.v_normal),U=Ke.cross(D.rB,this.v_normal),W=m+p+d*O*O+f*q*q,H=m+p+d*N*N+f*U*U,G=m+p+d*O*N+f*q*U;W*W<1e3*(W*H-G*G)?(this.v_K.ex.set(W,G),this.v_K.ey.set(G,H),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}a.c.set(v),a.a=g,r.v.set(b),r.w=x,l.c.set($),l.a=A,s.v.set(w),s.w=B},ai.prototype.warmStartConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getBody(),o=i.getBody(),r=n.c_velocity,s=o.c_velocity;n.c_position,o.c_position;for(var a=this.v_invMassA,l=this.v_invIA,c=this.v_invMassB,u=this.v_invIB,h=Ke.clone(r.v),m=r.w,p=Ke.clone(s.v),d=s.w,f=this.v_normal,_=Ke.cross(f,1),y=0;y<this.v_pointCount;++y){var v=this.v_points[y],g=Ke.combine(v.normalImpulse,f,v.tangentImpulse,_);m-=l*Ke.cross(v.rA,g),h.subMul(a,g),d+=u*Ke.cross(v.rB,g),p.addMul(c,g)}r.v.set(h),r.w=m,s.v.set(p),s.w=d},ai.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse},ai.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body,n=e.c_velocity;e.c_position;var o=i.c_velocity;i.c_position;var r=this.v_invMassA,s=this.v_invIA,a=this.v_invMassB,l=this.v_invIB,c=Ke.clone(n.v),u=n.w,h=Ke.clone(o.v),m=o.w,p=this.v_normal,d=Ke.cross(p,1),f=this.v_friction;Je&&Ze.assert(1==this.v_pointCount||2==this.v_pointCount);for(var _=0;_<this.v_pointCount;++_){var y=this.v_points[_];(A=Ke.zero()).addCombine(1,h,1,Ke.cross(m,y.rB)),A.subCombine(1,c,1,Ke.cross(u,y.rA));var v=Ke.dot(A,d)-this.v_tangentSpeed,g=y.tangentMass*-v,b=f*y.normalImpulse;g=(w=Xe.clamp(y.tangentImpulse+g,-b,b))-y.tangentImpulse,y.tangentImpulse=w;var x=Ke.mul(g,d);c.subMul(r,x),u-=s*Ke.cross(y.rA,x),h.addMul(a,x),m+=l*Ke.cross(y.rB,x)}if(1==this.v_pointCount||0==t.blockSolve)for(var $=0;$<this.v_pointCount;++$){var A;y=this.v_points[$];(A=Ke.zero()).addCombine(1,h,1,Ke.cross(m,y.rB)),A.subCombine(1,c,1,Ke.cross(u,y.rA));var w,B=Ke.dot(A,p);g=-y.normalMass*(B-y.velocityBias);g=(w=Xe.max(y.normalImpulse+g,0))-y.normalImpulse,y.normalImpulse=w;x=Ke.mul(g,p);c.subMul(r,x),u-=s*Ke.cross(y.rA,x),h.addMul(a,x),m+=l*Ke.cross(y.rB,x)}else{var C=this.v_points[0],S=this.v_points[1],E=Ke.neo(C.normalImpulse,S.normalImpulse);Je&&Ze.assert(E.x>=0&&E.y>=0);var M=Ke.zero().add(h).add(Ke.cross(m,C.rB)).sub(c).sub(Ke.cross(u,C.rA)),T=Ke.zero().add(h).add(Ke.cross(m,S.rB)).sub(c).sub(Ke.cross(u,S.rA)),P=Ke.dot(M,p),z=Ke.dot(T,p),F=Ke.neo(P-C.velocityBias,z-S.velocityBias);for(F.sub(ti.mulVec2(this.v_K,E));;){var I=ti.mulVec2(this.v_normalMass,F).neg();if(I.x>=0&&I.y>=0){var k=Ke.sub(I,E),V=Ke.mul(k.x,p),L=Ke.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Ke.cross(C.rA,V)+Ke.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Ke.cross(C.rB,V)+Ke.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=-C.normalMass*F.x,I.y=0,P=0,z=this.v_K.ex.y*I.x+F.y,I.x>=0&&z>=0){k=Ke.sub(I,E),V=Ke.mul(k.x,p),L=Ke.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Ke.cross(C.rA,V)+Ke.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Ke.cross(C.rB,V)+Ke.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=-S.normalMass*F.y,P=this.v_K.ey.x*I.y+F.x,z=0,I.y>=0&&P>=0){k=Ke.sub(I,E),V=Ke.mul(k.x,p),L=Ke.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Ke.cross(C.rA,V)+Ke.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Ke.cross(C.rB,V)+Ke.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=0,P=F.x,z=F.y,P>=0&&z>=0){k=Ke.sub(I,E),V=Ke.mul(k.x,p),L=Ke.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Ke.cross(C.rA,V)+Ke.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Ke.cross(C.rB,V)+Ke.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}break}}n.v.set(c),n.w=u,o.v.set(h),o.w=m};var hi=[];ai.addType=function(t,e,i){hi[t]=hi[t]||{},hi[t][e]=i},ai.create=function(t,e,i,n){var o,r,s=t.getType(),a=i.getType();if(r=hi[s]&&hi[s][a])o=new ai(t,e,i,n,r);else{if(!(r=hi[a]&&hi[a][s]))return null;o=new ai(i,n,t,e,r)}t=o.getFixtureA(),i=o.getFixtureB(),e=o.getChildIndexA(),n=o.getChildIndexB();var l=t.getBody(),c=i.getBody();return o.m_nodeA.contact=o,o.m_nodeA.other=c,o.m_nodeA.prev=null,o.m_nodeA.next=l.m_contactList,null!=l.m_contactList&&(l.m_contactList.prev=o.m_nodeA),l.m_contactList=o.m_nodeA,o.m_nodeB.contact=o,o.m_nodeB.other=l,o.m_nodeB.prev=null,o.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=o.m_nodeB),c.m_contactList=o.m_nodeB,0==t.isSensor()&&0==i.isSensor()&&(l.setAwake(!0),c.setAwake(!0)),o},ai.destroy=function(t,e){var i=t.m_fixtureA,n=t.m_fixtureB,o=i.getBody(),r=n.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==o.m_contactList&&(o.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==r.m_contactList&&(r.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==i.isSensor()&&0==n.isSensor()&&(o.setAwake(!0),r.setAwake(!0));var s=i.getType(),a=n.getType(),l=hi[s][a].destroyFcn;"function"==typeof l&&l(t)},"undefined"!=typeof DEBUG&&DEBUG;var mi="undefined"!=typeof ASSERT&&ASSERT,pi=_i,di=r;function fi(){this.other=null,this.joint=null,this.prev=null,this.next=null}function _i(t,e,i){e=t.bodyA||e,i=t.bodyB||i,mi&&di.assert(e),mi&&di.assert(i),mi&&di.assert(e!=i),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=i,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new fi,this.m_edgeB=new fi,this.m_islandFlag=!1,this.m_userData=t.userData}_i.TYPES={},_i._deserialize=function(t,e,i){var n=_i.TYPES[t.type];return n&&i(n,t)},_i.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},_i.prototype.getType=function(){return this.m_type},_i.prototype.getBodyA=function(){return this.m_bodyA},_i.prototype.getBodyB=function(){return this.m_bodyB},_i.prototype.getNext=function(){return this.m_next},_i.prototype.getUserData=function(){return this.m_userData},_i.prototype.setUserData=function(t){this.m_userData=t},_i.prototype.getCollideConnected=function(){return this.m_collideConnected},_i.prototype.getAnchorA=function(){},_i.prototype.getAnchorB=function(){},_i.prototype.getReactionForce=function(t){},_i.prototype.getReactionTorque=function(t){},_i.prototype.shiftOrigin=function(t){},_i.prototype.initVelocityConstraints=function(t){},_i.prototype.solveVelocityConstraints=function(t){},_i.prototype.solvePositionConstraints=function(t){};var yi={exports:{}},vi={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,vi.now=function(){return Date.now()},vi.diff=function(t){return Date.now()-t},"undefined"!=typeof DEBUG&&DEBUG;var gi="undefined"!=typeof ASSERT&&ASSERT;yi.exports=function(t,e){var i=$i.now();++Ai.toiCalls,t.state=Ii.e_unknown,t.t=e.tMax;var n=e.proxyA,o=e.proxyB,r=e.sweepA,s=e.sweepB;r.normalize(),s.normalize();var a=e.tMax,l=n.m_radius+o.m_radius,c=wi.max(bi.linearSlop,l-3*bi.linearSlop),u=.25*bi.linearSlop;gi&&xi.assert(c>u);var h=0,m=bi.maxTOIIterations,p=0,d=new Fi,f=new Ti;for(f.proxyA=e.proxyA,f.proxyB=e.proxyB,f.useRadii=!1;;){var _=Ei.identity(),y=Ei.identity();r.getTransform(_,h),s.getTransform(y,h),f.transformA=_,f.transformB=y;var v=new Pi;if(Mi(v,d,f),v.distance<=0){t.state=Ii.e_overlapped,t.t=0;break}if(v.distance<c+u){t.state=Ii.e_touching,t.t=h;break}var g=new ki;g.initialize(d,n,r,o,s,h);for(var b=!1,x=a,$=0;;){var A=g.findMinSeparation(x);if(g.indexA,g.indexB,A>c+u){t.state=Ii.e_separated,t.t=a,b=!0;break}if(A>c-u){h=x;break}var w=g.evaluate(h);if(g.indexA,g.indexB,w<c-u){t.state=Ii.e_failed,t.t=h,b=!0;break}if(w<=c+u){t.state=Ii.e_touching,t.t=h,b=!0;break}for(var B=0,C=h,S=x;;){var E;E=1&B?C+(c-w)*(S-C)/(A-w):.5*(C+S),++B,++Ai.toiRootIters;var M=g.evaluate(E);if(g.indexA,g.indexB,wi.abs(M-c)<u){x=E;break}if(M>c?(C=E,w=M):(S=E,A=M),50==B)break}if(Ai.toiMaxRootIters=wi.max(Ai.toiMaxRootIters,B),++$==bi.maxPolygonVertices)break}if(++p,++Ai.toiIters,b)break;if(p==m){t.state=Ii.e_failed,t.t=h;break}}Ai.toiMaxIters=wi.max(Ai.toiMaxIters,p);var T=$i.diff(i);Ai.toiMaxTime=wi.max(Ai.toiMaxTime,T),Ai.toiTime+=T},yi.exports.Input=function(){this.proxyA=new zi,this.proxyB=new zi,this.sweepA=new Si,this.sweepB=new Si,this.tMax},yi.exports.Output=Ii;var bi=b,xi=r,$i=vi,Ai=be,wi=l.exports,Bi=_,Ci=K,Si=ht,Ei=rt,Mi=ge.exports,Ti=Mi.Input,Pi=Mi.Output,zi=Mi.Proxy,Fi=Mi.Cache;function Ii(){this.state,this.t}Ii.e_unknown=0,Ii.e_failed=1,Ii.e_overlapped=2,Ii.e_touching=3,Ii.e_separated=4,Ai.toiTime=0,Ai.toiMaxTime=0,Ai.toiCalls=0,Ai.toiIters=0,Ai.toiMaxIters=0,Ai.toiRootIters=0,Ai.toiMaxRootIters=0;function ki(){this.m_proxyA=new zi,this.m_proxyB=new zi,this.m_sweepA,this.m_sweepB,this.indexA,this.indexB,this.m_type,this.m_localPoint=Bi.zero(),this.m_axis=Bi.zero()}ki.prototype.initialize=function(t,e,i,n,o,r){this.m_proxyA=e,this.m_proxyB=n;var s=t.count;gi&&xi.assert(0<s&&s<3),this.m_sweepA=i,this.m_sweepB=o;var a=Ei.identity(),l=Ei.identity();if(this.m_sweepA.getTransform(a,r),this.m_sweepB.getTransform(l,r),1==s){this.m_type=1;var c=this.m_proxyA.getVertex(t.indexA[0]),u=this.m_proxyB.getVertex(t.indexB[0]),h=Ei.mulVec2(a,c),m=Ei.mulVec2(l,u);return this.m_axis.setCombine(1,m,-1,h),v=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var p=n.getVertex(t.indexB[0]),d=n.getVertex(t.indexB[1]);this.m_axis=Bi.cross(Bi.sub(d,p),1),this.m_axis.normalize();var f=Ci.mulVec2(l.q,this.m_axis);this.m_localPoint=Bi.mid(p,d);m=Ei.mulVec2(l,this.m_localPoint),c=e.getVertex(t.indexA[0]),h=Ei.mulVec2(a,c);return(v=Bi.dot(h,f)-Bi.dot(m,f))<0&&(this.m_axis=Bi.neg(this.m_axis),v=-v),v}this.m_type=2;var _=this.m_proxyA.getVertex(t.indexA[0]),y=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=Bi.cross(Bi.sub(y,_),1),this.m_axis.normalize();f=Ci.mulVec2(a.q,this.m_axis);this.m_localPoint=Bi.mid(_,y);var v;h=Ei.mulVec2(a,this.m_localPoint),u=this.m_proxyB.getVertex(t.indexB[0]),m=Ei.mulVec2(l,u);return(v=Bi.dot(m,f)-Bi.dot(h,f))<0&&(this.m_axis=Bi.neg(this.m_axis),v=-v),v},ki.prototype.compute=function(t,e){var i=Ei.identity(),n=Ei.identity();switch(this.m_sweepA.getTransform(i,e),this.m_sweepB.getTransform(n,e),this.m_type){case 1:if(t){var o=Ci.mulTVec2(i.q,this.m_axis),r=Ci.mulTVec2(n.q,Bi.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(o),this.indexB=this.m_proxyB.getSupport(r)}var s=this.m_proxyA.getVertex(this.indexA),a=this.m_proxyB.getVertex(this.indexB),l=Ei.mulVec2(i,s),c=Ei.mulVec2(n,a);return Bi.dot(c,this.m_axis)-Bi.dot(l,this.m_axis);case 2:var u=Ci.mulVec2(i.q,this.m_axis);l=Ei.mulVec2(i,this.m_localPoint);if(t){r=Ci.mulTVec2(n.q,Bi.neg(u));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(r)}a=this.m_proxyB.getVertex(this.indexB),c=Ei.mulVec2(n,a);return Bi.dot(c,u)-Bi.dot(l,u);case 3:u=Ci.mulVec2(n.q,this.m_axis),c=Ei.mulVec2(n,this.m_localPoint);if(t){o=Ci.mulTVec2(i.q,Bi.neg(u));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(o)}s=this.m_proxyA.getVertex(this.indexA),l=Ei.mulVec2(i,s);return Bi.dot(l,u)-Bi.dot(c,u);default:return gi&&xi.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},ki.prototype.findMinSeparation=function(t){return this.compute(!0,t)},ki.prototype.evaluate=function(t){return this.compute(!1,t)};var Vi="undefined"!=typeof DEBUG&&DEBUG,Li="undefined"!=typeof ASSERT&&ASSERT;J.exports=Zi,J.exports.TimeStep=Ji;var ji=b,Ri=r,Di=_,Oi=l.exports,qi=jt,Ni=ri,Ui=pi,Wi=yi.exports,Hi=Wi.Input,Gi=Wi.Output,Yi=ge.exports;function Ji(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function Zi(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}Yi.Input,Yi.Output,Yi.Proxy,Yi.Cache,Ji.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},Zi.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},Zi.prototype.addBody=function(t){Li&&Ri.assert(t instanceof qi,"Not a Body!",t),this.m_bodies.push(t)},Zi.prototype.addContact=function(t){Li&&Ri.assert(t instanceof Ni,"Not a Contact!",t),this.m_contacts.push(t)},Zi.prototype.addJoint=function(t){Li&&Ri.assert(t instanceof Ui,"Not a Joint!",t),this.m_joints.push(t)},Zi.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var n=e.m_contactList;n;n=n.m_next)n.m_islandFlag=!1;for(var o=e.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var r=this.m_stack,s=e.m_bodyList;s;s=s.m_next)if(!s.m_islandFlag&&0!=s.isAwake()&&0!=s.isActive()&&!s.isStatic()){for(this.clear(),r.push(s),s.m_islandFlag=!0;r.length>0;){i=r.pop();if(Li&&Ri.assert(1==i.isActive()),this.addBody(i),i.setAwake(!0),!i.isStatic()){for(var a=i.m_contactList;a;a=a.next){var l=a.contact;if(!l.m_islandFlag&&(0!=l.isEnabled()&&0!=l.isTouching())){var c=l.m_fixtureA.m_isSensor,u=l.m_fixtureB.m_isSensor;if(!c&&!u)this.addContact(l),l.m_islandFlag=!0,(m=a.other).m_islandFlag||(r.push(m),m.m_islandFlag=!0)}}for(var h=i.m_jointList;h;h=h.next){var m;if(1!=h.joint.m_islandFlag)0!=(m=h.other).isActive()&&(this.addJoint(h.joint),h.joint.m_islandFlag=!0,m.m_islandFlag||(r.push(m),m.m_islandFlag=!0))}}}this.solveIsland(t);for(var p=0;p<this.m_bodies.length;++p){(i=this.m_bodies[p]).isStatic()&&(i.m_islandFlag=!1)}}},Zi.prototype.solveIsland=function(t){for(var e=this.m_world,i=e.m_gravity,n=e.m_allowSleep,o=t.dt,r=0;r<this.m_bodies.length;++r){var s=this.m_bodies[r],a=Di.clone(s.m_sweep.c),l=s.m_sweep.a,c=Di.clone(s.m_linearVelocity),u=s.m_angularVelocity;s.m_sweep.c0.set(s.m_sweep.c),s.m_sweep.a0=s.m_sweep.a,s.isDynamic()&&(c.addMul(o*s.m_gravityScale,i),c.addMul(o*s.m_invMass,s.m_force),u+=o*s.m_invI*s.m_torque,c.mul(1/(1+o*s.m_linearDamping)),u*=1/(1+o*s.m_angularDamping)),s.c_position.c=a,s.c_position.a=l,s.c_velocity.v=c,s.c_velocity.w=u}for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].initConstraint(t)}Vi&&this.printBodies("M: ");for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].initVelocityConstraint(t)}if(Vi&&this.printBodies("R: "),t.warmStarting)for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].warmStartConstraint(t)}Vi&&this.printBodies("Q: ");for(r=0;r<this.m_joints.length;++r){this.m_joints[r].initVelocityConstraints(t)}Vi&&this.printBodies("E: ");for(r=0;r<t.velocityIterations;++r){for(var h=0;h<this.m_joints.length;++h){this.m_joints[h].solveVelocityConstraints(t)}for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].solveVelocityConstraint(t)}}Vi&&this.printBodies("D: ");for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].storeConstraintImpulses(t)}Vi&&this.printBodies("C: ");for(r=0;r<this.m_bodies.length;++r){s=this.m_bodies[r],a=Di.clone(s.c_position.c),l=s.c_position.a,c=Di.clone(s.c_velocity.v),u=s.c_velocity.w;var m=Di.mul(o,c);if(Di.lengthSquared(m)>ji.maxTranslationSquared){var p=ji.maxTranslation/m.length();c.mul(p)}var d=o*u;if(d*d>ji.maxRotationSquared)u*=p=ji.maxRotation/Oi.abs(d);a.addMul(o,c),l+=o*u,s.c_position.c.set(a),s.c_position.a=l,s.c_velocity.v.set(c),s.c_velocity.w=u}Vi&&this.printBodies("B: ");var f=!1;for(r=0;r<t.positionIterations;++r){var _=0;for(h=0;h<this.m_contacts.length;++h){var y=this.m_contacts[h].solvePositionConstraint(t);_=Oi.min(_,y)}var v=_>=-3*ji.linearSlop,g=!0;for(h=0;h<this.m_joints.length;++h){var b=this.m_joints[h].solvePositionConstraints(t);g=g&&b}if(v&&g){f=!0;break}}Vi&&this.printBodies("L: ");for(r=0;r<this.m_bodies.length;++r){(s=this.m_bodies[r]).m_sweep.c.set(s.c_position.c),s.m_sweep.a=s.c_position.a,s.m_linearVelocity.set(s.c_velocity.v),s.m_angularVelocity=s.c_velocity.w,s.synchronizeTransform()}if(this.postSolveIsland(),n){var x=1/0,$=ji.linearSleepToleranceSqr,A=ji.angularSleepToleranceSqr;for(r=0;r<this.m_bodies.length;++r){(s=this.m_bodies[r]).isStatic()||(0==s.m_autoSleepFlag||s.m_angularVelocity*s.m_angularVelocity>A||Di.lengthSquared(s.m_linearVelocity)>$?(s.m_sleepTime=0,x=0):(s.m_sleepTime+=o,x=Oi.min(x,s.m_sleepTime)))}if(x>=ji.timeToSleep&&f)for(r=0;r<this.m_bodies.length;++r){(s=this.m_bodies[r]).setAwake(!1)}}},Zi.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var i=this.m_bodies[e];Ri.debug(t,i.c_position.a,i.c_position.c.x,i.c_position.c.y,i.c_velocity.w,i.c_velocity.v.x,i.c_velocity.v.y)}};var Xi=new Ji;function Ki(){this.normalImpulses=[],this.tangentImpulses=[]}Zi.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1,i.m_sweep.alpha0=0;for(var n=e.m_contactList;n;n=n.m_next)n.m_toiFlag=!1,n.m_islandFlag=!1,n.m_toiCount=0,n.m_toi=1}for(;;){var o=null,r=1;for(n=e.m_contactList;n;n=n.m_next)if(0!=n.isEnabled()&&!(n.m_toiCount>ji.maxSubSteps)){var s=1;if(n.m_toiFlag)s=n.m_toi;else{var a=n.getFixtureA(),l=n.getFixtureB();if(a.isSensor()||l.isSensor())continue;var c=a.getBody(),u=l.getBody();Li&&Ri.assert(c.isDynamic()||u.isDynamic());var h=c.isAwake()&&!c.isStatic(),m=u.isAwake()&&!u.isStatic();if(0==h&&0==m)continue;var p=c.isBullet()||!c.isDynamic(),d=u.isBullet()||!u.isDynamic();if(0==p&&0==d)continue;var f=c.m_sweep.alpha0;c.m_sweep.alpha0<u.m_sweep.alpha0?(f=u.m_sweep.alpha0,c.m_sweep.advance(f)):u.m_sweep.alpha0<c.m_sweep.alpha0&&(f=c.m_sweep.alpha0,u.m_sweep.advance(f)),Li&&Ri.assert(f<1);var _=n.getChildIndexA(),y=n.getChildIndexB();c.m_sweep,u.m_sweep;var v=new Hi;v.proxyA.set(a.getShape(),_),v.proxyB.set(l.getShape(),y),v.sweepA.set(c.m_sweep),v.sweepB.set(u.m_sweep),v.tMax=1;var g=new Gi;Wi(g,v);var b=g.t;s=g.state==Gi.e_touching?Oi.min(f+(1-f)*b,1):1,n.m_toi=s,n.m_toiFlag=!0}s<r&&(o=n,r=s)}if(null==o||1-10*Oi.EPSILON<r){e.m_stepComplete=!0;break}a=o.getFixtureA(),l=o.getFixtureB(),c=a.getBody(),u=l.getBody();var x=c.m_sweep.clone(),$=u.m_sweep.clone();if(c.advance(r),u.advance(r),o.update(e),o.m_toiFlag=!1,++o.m_toiCount,0!=o.isEnabled()&&0!=o.isTouching()){c.setAwake(!0),u.setAwake(!0),this.clear(),this.addBody(c),this.addBody(u),this.addContact(o),c.m_islandFlag=!0,u.m_islandFlag=!0,o.m_islandFlag=!0;for(var A=[c,u],w=0;w<A.length;++w){if((P=A[w]).isDynamic())for(var B=P.m_contactList;B;B=B.next){var C=B.contact;if(!C.m_islandFlag){var S=B.other;if(!S.isDynamic()||P.isBullet()||S.isBullet()){var E=C.m_fixtureA.m_isSensor,M=C.m_fixtureB.m_isSensor;if(!E&&!M){var T=S.m_sweep.clone();0==S.m_islandFlag&&S.advance(r),C.update(e),0!=C.isEnabled()&&0!=C.isTouching()?(C.m_islandFlag=!0,this.addContact(C),S.m_islandFlag||(S.m_islandFlag=!0,S.isStatic()||S.setAwake(!0),this.addBody(S))):(S.m_sweep.set(T),S.synchronizeTransform())}}}}}Xi.reset((1-r)*t.dt),Xi.dtRatio=1,Xi.positionIterations=20,Xi.velocityIterations=t.velocityIterations,Xi.warmStarting=!1,this.solveIslandTOI(Xi,c,u);for(w=0;w<this.m_bodies.length;++w){var P;if((P=this.m_bodies[w]).m_islandFlag=!1,P.isDynamic()){P.synchronizeFixtures();for(B=P.m_contactList;B;B=B.next)B.contact.m_toiFlag=!1,B.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else o.setEnabled(!1),c.m_sweep.set(x),u.m_sweep.set($),c.synchronizeTransform(),u.synchronizeTransform()}if(Vi)for(i=e.m_bodyList;i;i=i.m_next){n=i.m_sweep.c;i.m_sweep.a,i.m_linearVelocity,i.m_angularVelocity}},Zi.prototype.solveIslandTOI=function(t,e,i){this.m_world;for(var n=0;n<this.m_bodies.length;++n){(l=this.m_bodies[n]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity}for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initConstraint(t)}for(n=0;n<t.positionIterations;++n){for(var o=0,r=0;r<this.m_contacts.length;++r){var s=this.m_contacts[r].solvePositionConstraintTOI(t,e,i);o=Oi.min(o,s)}if(o>=-1.5*ji.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,i.m_sweep.c0.set(i.c_position.c),i.m_sweep.a0=i.c_position.a;for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initVelocityConstraint(t)}for(n=0;n<t.velocityIterations;++n)for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].solveVelocityConstraint(t)}var a=t.dt;for(n=0;n<this.m_bodies.length;++n){var l=this.m_bodies[n],c=Di.clone(l.c_position.c),u=l.c_position.a,h=Di.clone(l.c_velocity.v),m=l.c_velocity.w,p=Di.mul(a,h);if(Di.dot(p,p)>ji.maxTranslationSquared){var d=ji.maxTranslation/p.length();h.mul(d)}var f=a*m;if(f*f>ji.maxRotationSquared)m*=d=ji.maxRotation/Oi.abs(f);c.addMul(a,h),u+=a*m,l.c_position.c=c,l.c_position.a=u,l.c_velocity.v=h,l.c_velocity.w=m,l.m_sweep.c=c,l.m_sweep.a=u,l.m_linearVelocity=h,l.m_angularVelocity=m,l.synchronizeTransform()}this.postSolveIsland()},Zi.prototype.postSolveIsland=function(){for(var t=new Ki,e=0;e<this.m_contacts.length;++e){for(var i=this.m_contacts[e],n=0;n<i.v_points.length;++n)t.normalImpulses.push(i.v_points[n].normalImpulse),t.tangentImpulses.push(i.v_points[n].tangentImpulse);this.m_world.postSolve(i,t)}},"undefined"!=typeof DEBUG&&DEBUG;var Qi="undefined"!=typeof ASSERT&&ASSERT,tn=hn,en=o,nn=r,on=_,rn=G,sn=J.exports,an=jt,ln=pi,cn=ri,un={gravity:on.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function hn(t){if(!(this instanceof hn))return new hn(t);t&&on.isValid(t)&&(t={gravity:t}),t=en(t,un),this.m_solver=new sn(this),this.m_broadPhase=new rn,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=on.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.addPair=this.createContact.bind(this)}hn.prototype._serialize=function(){for(var t=[],e=[],i=this.getBodyList();i;i=i.getNext())t.push(i);for(var n=this.getJointList();n;n=n.getNext())"function"==typeof n._serialize&&e.push(n);return{gravity:this.m_gravity,bodies:t,joints:e}},hn._deserialize=function(t,e,i){if(!t)return new hn;var n=new hn(t.gravity);if(t.bodies)for(var o=t.bodies.length-1;o>=0;o-=1)n._addBody(i(an,t.bodies[o],n));if(t.joints)for(o=t.joints.length-1;o>=0;o--)n.createJoint(i(ln,t.joints[o],n));return n},hn.prototype.getBodyList=function(){return this.m_bodyList},hn.prototype.getJointList=function(){return this.m_jointList},hn.prototype.getContactList=function(){return this.m_contactList},hn.prototype.getBodyCount=function(){return this.m_bodyCount},hn.prototype.getJointCount=function(){return this.m_jointCount},hn.prototype.getContactCount=function(){return this.m_contactCount},hn.prototype.setGravity=function(t){this.m_gravity=t},hn.prototype.getGravity=function(){return this.m_gravity},hn.prototype.isLocked=function(){return this.m_locked},hn.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},hn.prototype.getAllowSleeping=function(){return this.m_allowSleep},hn.prototype.setWarmStarting=function(t){this.m_warmStarting=t},hn.prototype.getWarmStarting=function(){return this.m_warmStarting},hn.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},hn.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},hn.prototype.setSubStepping=function(t){this.m_subStepping=t},hn.prototype.getSubStepping=function(){return this.m_subStepping},hn.prototype.setAutoClearForces=function(t){this.m_clearForces=t},hn.prototype.getAutoClearForces=function(){return this.m_clearForces},hn.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},hn.prototype.queryAABB=function(t,e){Qi&&nn.assert("function"==typeof e);var i=this.m_broadPhase;this.m_broadPhase.query(t,(function(t){var n=i.getUserData(t);return e(n.fixture)}))},hn.prototype.rayCast=function(t,e,i){Qi&&nn.assert("function"==typeof i);var n=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},(function(t,e){var o=n.getUserData(e),r=o.fixture,s=o.childIndex,a={};if(r.rayCast(a,t,s)){var l=a.fraction,c=on.add(on.mul(1-l,t.p1),on.mul(l,t.p2));return i(r,c,a.normal,l)}return t.maxFraction}))},hn.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},hn.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},hn.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},hn.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},hn.prototype.shiftOrigin=function(t){if(Qi&&nn.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var i=this.m_jointList;i;i=i.m_next)i.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},hn.prototype._addBody=function(t){Qi&&nn.assert(!1===this.isLocked()),this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},hn.prototype.createBody=function(t,e){if(Qi&&nn.assert(0==this.isLocked()),this.isLocked())return null;t&&on.isValid(t)&&(t={position:t,angle:e});var i=new an(this,t);return this._addBody(i),i},hn.prototype.createDynamicBody=function(t,e){return t?on.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},hn.prototype.createKinematicBody=function(t,e){return t?on.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},hn.prototype.destroyBody=function(t){if(Qi&&nn.assert(this.m_bodyCount>0),Qi&&nn.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var i=e;e=e.next,this.publish("remove-joint",i.joint),this.destroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var n=t.m_contactList;n;){var o=n;n=n.next,this.destroyContact(o.contact),t.m_contactList=n}t.m_contactList=null;for(var r=t.m_fixtureList;r;){var s=r;r=r.m_next,this.publish("remove-fixture",s),s.destroyProxies(this.m_broadPhase),t.m_fixtureList=r}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},hn.prototype.createJoint=function(t){if(Qi&&nn.assert(!!t.m_bodyA),Qi&&nn.assert(!!t.m_bodyB),Qi&&nn.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},hn.prototype.destroyJoint=function(t){if(Qi&&nn.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,i=t.m_bodyB;if(e.setAwake(!0),i.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,Qi&&nn.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var n=i.getContactList();n;)n.other==e&&n.contact.flagForFiltering(),n=n.next;this.publish("remove-joint",t)}};var mn=new sn.TimeStep;hn.prototype.step=function(t,e,i){if(this.publish("pre-step",t),(0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,mn.reset(t),mn.velocityIterations=e,mn.positionIterations=i,mn.warmStarting=this.m_warmStarting,mn.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(mn);for(var n=this.m_bodyList;n;n=n.getNext())0!=n.m_islandFlag&&(n.isStatic()||n.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(mn),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",t)},hn.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},hn.prototype.createContact=function(t,e){var i=t.fixture,n=e.fixture,o=t.childIndex,r=e.childIndex,s=i.getBody(),a=n.getBody();if(s!=a){for(var l=a.getContactList();l;){if(l.other==s){var c=l.contact.getFixtureA(),u=l.contact.getFixtureB(),h=l.contact.getChildIndexA(),m=l.contact.getChildIndexB();if(c==i&&u==n&&h==o&&m==r)return;if(c==n&&u==i&&h==r&&m==o)return}l=l.next}if(0!=a.shouldCollide(s)&&0!=n.shouldCollide(i)){var p=cn.create(i,o,n,r);null!=p&&(p.m_prev=null,null!=this.m_contactList&&(p.m_next=this.m_contactList,this.m_contactList.m_prev=p),this.m_contactList=p,++this.m_contactCount)}}},hn.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),n=t.getFixtureB(),o=t.getChildIndexA(),r=t.getChildIndexB(),s=i.getBody(),a=n.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==n.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var l=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=l||0!=c){var u=i.m_proxies[o].proxyId,h=n.m_proxies[r].proxyId;0!=this.m_broadPhase.testOverlap(u,h)?t.update(this):this.destroyContact(t)}}},hn.prototype.destroyContact=function(t){cn.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},hn.prototype._listeners=null,hn.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e||(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this},hn.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var n=i.indexOf(e);return n>=0&&i.splice(n,1),this},hn.prototype.publish=function(t,e,i,n){var o=this._listeners&&this._listeners[t];if(!o||!o.length)return 0;for(var r=0;r<o.length;r++)o[r].call(this,e,i,n);return o.length},hn.prototype.beginContact=function(t){this.publish("begin-contact",t)},hn.prototype.endContact=function(t){this.publish("end-contact",t)},hn.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},hn.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)};var pn=tn,dn=jt,fn=pi,_n=St,yn=wt,vn=_,gn=Ae,bn=0;function xn(t){var e=(t=t||{}).rootClass||pn,i=t.preSerialize||function(t){return t},n=t.postSerialize||function(t,e){return t},o=t.preDeserialize||function(t){return t},r=t.postDeserialize||function(t,e){return t},s={World:pn,Body:dn,Joint:fn,Fixture:_n,Shape:yn},a=Object.assign({Vec2:vn,Vec3:gn},s);this.toJson=function(t){var e=[],o=[t],r={};function a(t,i){if(t.__sid=t.__sid||++bn,!r[t.__sid]){o.push(t);var n={refIndex:e.length+o.length,refType:i};r[t.__sid]=n}return r[t.__sid]}function l(t,e){if("object"!=typeof t||null===t)return t;if("function"==typeof t._serialize){if(t!==e)for(var o in s)if(t instanceof s[o])return a(t,o);c=(r=i(r=t))._serialize(),t=n(c,r)}var r,c;if(Array.isArray(t)){for(var u=[],h=0;h<t.length;h++)u[h]=l(t[h]);t=u}else{u={};for(var h in t)t.hasOwnProperty(h)&&(u[h]=l(t[h]));t=u}return t}for(;o.length;){var c=o.shift(),u=l(c,c);e.push(u)}return e},this.fromJson=function(t){var i={};function n(t,e,i){e=o(e);var n=t._deserialize(e,i,s);return n=r(n,e)}function s(e,o,r){if(!o.refIndex)return e&&e._deserialize&&n(e,o,r);e=a[o.refType]||e;var s=o.refIndex;if(!i[s]){var l=n(e,t[s],r);i[s]=l}return i[s]}return e._deserialize(t[0],null,s)}}n.exports=xn;var $n=new xn,An=n.exports.toJson=$n.toJson,wn=n.exports.fromJson=$n.fromJson,Bn={};"undefined"!=typeof DEBUG&&DEBUG;var Cn="undefined"!=typeof ASSERT&&ASSERT,Sn=Fn,En=r,Mn=l.exports,Tn=K,Pn=_,zn=wt;function Fn(t,e){if(!(this instanceof Fn))return new Fn(t,e);Fn._super.call(this),this.m_type=Fn.TYPE,this.m_p=Pn.zero(),this.m_radius=1,"object"==typeof t&&Pn.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}Fn._super=zn,Fn.prototype=Object.create(Fn._super.prototype),Fn.TYPE="circle",zn.TYPES[Fn.TYPE]=Fn,Fn.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},Fn._deserialize=function(t){return new Fn(t.p,t.radius)},Fn.prototype.getRadius=function(){return this.m_radius},Fn.prototype.getCenter=function(){return this.m_p},Fn.prototype.getVertex=function(t){return Cn&&En.assert(0==t),this.m_p},Fn.prototype.getVertexCount=function(t){return 1},Fn.prototype._clone=function(){var t=new Fn;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},Fn.prototype.getChildCount=function(){return 1},Fn.prototype.testPoint=function(t,e){var i=Pn.add(t.p,Tn.mulVec2(t.q,this.m_p)),n=Pn.sub(e,i);return Pn.dot(n,n)<=this.m_radius*this.m_radius},Fn.prototype.rayCast=function(t,e,i,n){var o=Pn.add(i.p,Tn.mulVec2(i.q,this.m_p)),r=Pn.sub(e.p1,o),s=Pn.dot(r,r)-this.m_radius*this.m_radius,a=Pn.sub(e.p2,e.p1),l=Pn.dot(r,a),c=Pn.dot(a,a),u=l*l-c*s;if(u<0||c<Mn.EPSILON)return!1;var h=-(l+Mn.sqrt(u));return 0<=h&&h<=e.maxFraction*c&&(h/=c,t.fraction=h,t.normal=Pn.add(r,Pn.mul(h,a)),t.normal.normalize(),!0)},Fn.prototype.computeAABB=function(t,e,i){var n=Pn.add(e.p,Tn.mulVec2(e.q,this.m_p));t.lowerBound.set(n.x-this.m_radius,n.y-this.m_radius),t.upperBound.set(n.x+this.m_radius,n.y+this.m_radius)},Fn.prototype.computeMass=function(t,e){t.mass=e*Mn.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+Pn.dot(this.m_p,this.m_p))},Fn.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var In=Dn,kn=b,Vn=wt,Ln=rt,jn=K,Rn=_;function Dn(t,e){if(!(this instanceof Dn))return new Dn(t,e);Dn._super.call(this),this.m_type=Dn.TYPE,this.m_radius=kn.polygonRadius,this.m_vertex1=t?Rn.clone(t):Rn.zero(),this.m_vertex2=e?Rn.clone(e):Rn.zero(),this.m_vertex0=Rn.zero(),this.m_vertex3=Rn.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}Dn._super=Vn,Dn.prototype=Object.create(Dn._super.prototype),Dn.TYPE="edge",Vn.TYPES[Dn.TYPE]=Dn,Dn.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},Dn._deserialize=function(t){var e=new Dn(t.vertex1,t.vertex2);return e.hasVertex0&&e.setPrev(t.vertex0),e.hasVertex3&&e.setNext(t.vertex3),e},Dn.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},Dn.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},Dn.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},Dn.prototype._clone=function(){var t=new Dn;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},Dn.prototype.getChildCount=function(){return 1},Dn.prototype.testPoint=function(t,e){return!1},Dn.prototype.rayCast=function(t,e,i,n){var o=jn.mulTVec2(i.q,Rn.sub(e.p1,i.p)),r=jn.mulTVec2(i.q,Rn.sub(e.p2,i.p)),s=Rn.sub(r,o),a=this.m_vertex1,l=this.m_vertex2,c=Rn.sub(l,a),u=Rn.neo(c.y,-c.x);u.normalize();var h=Rn.dot(u,Rn.sub(a,o)),m=Rn.dot(u,s);if(0==m)return!1;var p=h/m;if(p<0||e.maxFraction<p)return!1;var d=Rn.add(o,Rn.mul(p,s)),f=Rn.sub(l,a),_=Rn.dot(f,f);if(0==_)return!1;var y=Rn.dot(Rn.sub(d,a),f)/_;return!(y<0||1<y)&&(t.fraction=p,t.normal=h>0?jn.mulVec2(i.q,u).neg():jn.mulVec2(i.q,u),!0)},Dn.prototype.computeAABB=function(t,e,i){var n=Ln.mulVec2(e,this.m_vertex1),o=Ln.mulVec2(e,this.m_vertex2);t.combinePoints(n,o),t.extend(this.m_radius)},Dn.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},Dn.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var On="undefined"!=typeof ASSERT&&ASSERT,qn=Zn,Nn=r,Un=l.exports,Wn=rt,Hn=K,Gn=_,Yn=b,Jn=wt;function Zn(t){if(!(this instanceof Zn))return new Zn(t);Zn._super.call(this),this.m_type=Zn.TYPE,this.m_radius=Yn.polygonRadius,this.m_centroid=Gn.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}Zn._super=Jn,Zn.prototype=Object.create(Zn._super.prototype),Zn.TYPE="polygon",Jn.TYPES[Zn.TYPE]=Zn,Zn.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},Zn._deserialize=function(t,e,i){var n=[];if(t.vertices)for(var o=0;o<t.vertices.length;o++)n.push(i(Gn,t.vertices[o]));return new Zn(n)},Zn.prototype.getVertex=function(t){return On&&Nn.assert(0<=t&&t<this.m_count),this.m_vertices[t]},Zn.prototype._clone=function(){var t=new Zn;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},Zn.prototype.getChildCount=function(){return 1},Zn.prototype._reset=function(){this._set(this.m_vertices)},Zn.prototype._set=function(t){if(On&&Nn.assert(3<=t.length&&t.length<=Yn.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=Un.min(t.length,Yn.maxPolygonVertices),i=[],n=0;n<e;++n){for(var o=t[n],r=!0,s=0;s<i.length;++s)if(Gn.distanceSquared(o,i[s])<.25*Yn.linearSlopSquared){r=!1;break}r&&i.push(o)}if((e=i.length)<3)return On&&Nn.assert(!1),void this._setAsBox(1,1);var a=0,l=i[0].x;for(n=1;n<e;++n){var c=i[n].x;(c>l||c===l&&i[n].y<i[a].y)&&(a=n,l=c)}for(var u=[],h=0,m=a;;){u[h]=m;var p=0;for(s=1;s<e;++s)if(p!==m){var d=Gn.sub(i[p],i[u[h]]),f=(o=Gn.sub(i[s],i[u[h]]),Gn.cross(d,o));f<0&&(p=s),0===f&&o.lengthSquared()>d.lengthSquared()&&(p=s)}else p=s;if(++h,m=p,p===a)break}if(h<3)return On&&Nn.assert(!1),void this._setAsBox(1,1);this.m_count=h,this.m_vertices=[];for(n=0;n<h;++n)this.m_vertices[n]=i[u[n]];for(n=0;n<h;++n){var _=n,y=n+1<h?n+1:0,v=Gn.sub(this.m_vertices[y],this.m_vertices[_]);On&&Nn.assert(v.lengthSquared()>Un.EPSILON*Un.EPSILON),this.m_normals[n]=Gn.cross(v,1),this.m_normals[n].normalize()}this.m_centroid=function(t,e){On&&Nn.assert(e>=3);for(var i=Gn.zero(),n=0,o=Gn.zero(),r=1/3,s=0;s<e;++s){var a=o,l=t[s],c=s+1<e?t[s+1]:t[0],u=Gn.sub(l,a),h=Gn.sub(c,a),m=.5*Gn.cross(u,h);n+=m,i.addMul(m*r,a),i.addMul(m*r,l),i.addMul(m*r,c)}return On&&Nn.assert(n>Un.EPSILON),i.mul(1/n),i}(this.m_vertices,h)}},Zn.prototype._setAsBox=function(t,e,i,n){if(this.m_vertices[0]=Gn.neo(t,-e),this.m_vertices[1]=Gn.neo(t,e),this.m_vertices[2]=Gn.neo(-t,e),this.m_vertices[3]=Gn.neo(-t,-e),this.m_normals[0]=Gn.neo(1,0),this.m_normals[1]=Gn.neo(0,1),this.m_normals[2]=Gn.neo(-1,0),this.m_normals[3]=Gn.neo(0,-1),this.m_count=4,Gn.isValid(i)){n=n||0,this.m_centroid.set(i);var o=Wn.identity();o.p.set(i),o.q.set(n);for(var r=0;r<this.m_count;++r)this.m_vertices[r]=Wn.mulVec2(o,this.m_vertices[r]),this.m_normals[r]=Hn.mulVec2(o.q,this.m_normals[r])}},Zn.prototype.testPoint=function(t,e){for(var i=Hn.mulTVec2(t.q,Gn.sub(e,t.p)),n=0;n<this.m_count;++n){if(Gn.dot(this.m_normals[n],Gn.sub(i,this.m_vertices[n]))>0)return!1}return!0},Zn.prototype.rayCast=function(t,e,i,n){for(var o=Hn.mulTVec2(i.q,Gn.sub(e.p1,i.p)),r=Hn.mulTVec2(i.q,Gn.sub(e.p2,i.p)),s=Gn.sub(r,o),a=0,l=e.maxFraction,c=-1,u=0;u<this.m_count;++u){var h=Gn.dot(this.m_normals[u],Gn.sub(this.m_vertices[u],o)),m=Gn.dot(this.m_normals[u],s);if(0==m){if(h<0)return!1}else m<0&&h<a*m?(a=h/m,c=u):m>0&&h<l*m&&(l=h/m);if(l<a)return!1}return On&&Nn.assert(0<=a&&a<=e.maxFraction),c>=0&&(t.fraction=a,t.normal=Hn.mulVec2(i.q,this.m_normals[c]),!0)},Zn.prototype.computeAABB=function(t,e,i){for(var n=1/0,o=1/0,r=-1/0,s=-1/0,a=0;a<this.m_count;++a){var l=Wn.mulVec2(e,this.m_vertices[a]);n=Un.min(n,l.x),r=Un.max(r,l.x),o=Un.min(o,l.y),s=Un.max(s,l.y)}t.lowerBound.set(n,o),t.upperBound.set(r,s),t.extend(this.m_radius)},Zn.prototype.computeMass=function(t,e){On&&Nn.assert(this.m_count>=3);for(var i=Gn.zero(),n=0,o=0,r=Gn.zero(),s=0;s<this.m_count;++s)r.add(this.m_vertices[s]);r.mul(1/this.m_count);var a=1/3;for(s=0;s<this.m_count;++s){var l=Gn.sub(this.m_vertices[s],r),c=s+1<this.m_count?Gn.sub(this.m_vertices[s+1],r):Gn.sub(this.m_vertices[0],r),u=Gn.cross(l,c),h=.5*u;n+=h,i.addCombine(h*a,l,h*a,c);var m=l.x,p=l.y,d=c.x,f=c.y;o+=.25*a*u*(m*m+d*m+d*d+(p*p+f*p+f*f))}t.mass=e*n,On&&Nn.assert(n>Un.EPSILON),i.mul(1/n),t.center.setCombine(1,i,1,r),t.I=e*o,t.I+=t.mass*(Gn.dot(t.center,t.center)-Gn.dot(i,i))},Zn.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=t<this.m_count-1?e+1:0,n=this.m_vertices[e],o=Gn.sub(this.m_vertices[i],n),r=0;r<this.m_count;++r)if(r!=e&&r!=i){var s=Gn.sub(this.m_vertices[r],n);if(Gn.cross(o,s)<0)return!1}return!0},Zn.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var Xn="undefined"!=typeof ASSERT&&ASSERT,Kn=ro,Qn=r,to=rt,eo=_,io=b,no=wt,oo=In;function ro(t,e){if(!(this instanceof ro))return new ro(t,e);ro._super.call(this),this.m_type=ro.TYPE,this.m_radius=io.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_isLoop=e,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}ro._super=no,ro.prototype=Object.create(ro._super.prototype),ro.TYPE="chain",no.TYPES[ro.TYPE]=ro,ro.prototype._serialize=function(){const t={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex};return this.m_prevVertex&&(t.prevVertex=this.m_prevVertex),this.m_nextVertex&&(t.nextVertex=this.m_nextVertex),t},ro._deserialize=function(t,e,i){var n=[];if(t.vertices)for(var o=0;o<t.vertices.length;o++)n.push(i(eo,t.vertices[o]));var r=new ro(n,t.isLoop);return t.prevVertex&&r.setPrevVertex(t.prevVertex),t.nextVertex&&r.setNextVertex(t.nextVertex),r},ro.prototype._createLoop=function(t){Xn&&Qn.assert(0==this.m_vertices.length&&0==this.m_count),Xn&&Qn.assert(t.length>=3);for(var e=1;e<t.length;++e){var i=t[e-1],n=t[e];Xn&&Qn.assert(eo.distanceSquared(i,n)>io.linearSlopSquared)}this.m_vertices=[],this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=eo.clone(t[e]);return this.m_vertices[t.length]=eo.clone(t[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},ro.prototype._createChain=function(t){Xn&&Qn.assert(0==this.m_vertices.length&&0==this.m_count),Xn&&Qn.assert(t.length>=2);for(var e=1;e<t.length;++e){var i=t[e-1],n=t[e];Xn&&Qn.assert(eo.distanceSquared(i,n)>io.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=eo.clone(t[e]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},ro.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},ro.prototype.setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},ro.prototype.setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},ro.prototype._clone=function(){var t=new ro;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},ro.prototype.getChildCount=function(){return this.m_count-1},ro.prototype.getChildEdge=function(t,e){Xn&&Qn.assert(0<=e&&e<this.m_count-1),t.m_type=oo.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},ro.prototype.getVertex=function(t){return Xn&&Qn.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},ro.prototype.testPoint=function(t,e){return!1},ro.prototype.rayCast=function(t,e,i,n){return Xn&&Qn.assert(0<=n&&n<this.m_count),new oo(this.getVertex(n),this.getVertex(n+1)).rayCast(t,e,i,0)},ro.prototype.computeAABB=function(t,e,i){Xn&&Qn.assert(0<=i&&i<this.m_count);var n=to.mulVec2(e,this.getVertex(i)),o=to.mulVec2(e,this.getVertex(i+1));t.combinePoints(n,o)},ro.prototype.computeMass=function(t,e){t.mass=0,t.center=eo.neo(),t.I=0},ro.prototype.computeDistanceProxy=function(t,e){Xn&&Qn.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var so=lo,ao=qn;function lo(t,e,i,n){if(!(this instanceof lo))return new lo(t,e,i,n);lo._super.call(this),this._setAsBox(t,e,i,n)}lo._super=ao,lo.prototype=Object.create(lo._super.prototype),lo.TYPE="polygon","undefined"!=typeof DEBUG&&DEBUG;var co="undefined"!=typeof ASSERT&&ASSERT,uo=r,ho=rt,mo=_,po=ri,fo=ae.exports,_o=Sn;po.addType(_o.TYPE,_o.TYPE,(function(t,e,i,n,o,r,s){co&&uo.assert(i.getType()==_o.TYPE),co&&uo.assert(r.getType()==_o.TYPE),function(t,e,i,n,o){t.pointCount=0;var r=ho.mulVec2(i,e.m_p),s=ho.mulVec2(o,n.m_p),a=mo.distanceSquared(s,r),l=e.m_radius,c=n.m_radius,u=l+c;if(a>u*u)return;t.type=fo.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=fo.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=fo.e_vertex}(t,i.getShape(),e,r.getShape(),o)})),"undefined"!=typeof DEBUG&&DEBUG;var yo="undefined"!=typeof ASSERT&&ASSERT,vo=r,go=rt,bo=_,xo=ri,$o=ae.exports,Ao=In,wo=Kn,Bo=Sn;function Co(t,e,i,n,o){t.pointCount=0;var r=go.mulTVec2(i,go.mulVec2(o,n.m_p)),s=e.m_vertex1,a=e.m_vertex2,l=bo.sub(a,s),c=bo.dot(l,bo.sub(a,r)),u=bo.dot(l,bo.sub(r,s)),h=e.m_radius+n.m_radius;if(u<=0){var m=bo.clone(s),p=bo.sub(r,m);if(bo.dot(p,p)>h*h)return;if(e.m_hasVertex0){var d=e.m_vertex0,f=s,_=bo.sub(f,d);if(bo.dot(_,bo.sub(f,r))>0)return}return t.type=$o.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=$o.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=$o.e_vertex)}if(c<=0){m=bo.clone(a),p=bo.sub(r,m);if(bo.dot(p,p)>h*h)return;if(e.m_hasVertex3){var y=e.m_vertex3,v=a,g=bo.sub(y,v);if(bo.dot(g,bo.sub(r,v))>0)return}return t.type=$o.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=$o.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=$o.e_vertex)}var b=bo.dot(l,l);yo&&vo.assert(b>0);m=bo.combine(c/b,s,u/b,a),p=bo.sub(r,m);if(!(bo.dot(p,p)>h*h)){var x=bo.neo(-l.y,l.x);bo.dot(x,bo.sub(r,s))<0&&x.set(-x.x,-x.y),x.normalize(),t.type=$o.e_faceA,t.localNormal=x,t.localPoint.set(s),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=$o.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=$o.e_vertex}}xo.addType(Ao.TYPE,Bo.TYPE,(function(t,e,i,n,o,r,s){yo&&vo.assert(i.getType()==Ao.TYPE),yo&&vo.assert(r.getType()==Bo.TYPE);var a=i.getShape(),l=r.getShape();Co(t,a,e,l,o)})),xo.addType(wo.TYPE,Bo.TYPE,(function(t,e,i,n,o,r,s){yo&&vo.assert(i.getType()==wo.TYPE),yo&&vo.assert(r.getType()==Bo.TYPE);var a=i.getShape(),l=new Ao;a.getChildEdge(l,n);var c=l,u=r.getShape();Co(t,c,e,u,o)})),"undefined"!=typeof DEBUG&&DEBUG;var So="undefined"!=typeof ASSERT&&ASSERT,Eo=r,Mo=rt,To=K,Po=_,zo=b,Fo=ae.exports,Io=qn,ko=Lo;function Vo(t,e,i,n){for(var o=t.m_count,r=i.m_count,s=t.m_normals,a=t.m_vertices,l=i.m_vertices,c=Mo.mulTXf(n,e),u=0,h=-1/0,m=0;m<o;++m){for(var p=To.mulVec2(c.q,s[m]),d=Mo.mulVec2(c,a[m]),f=1/0,_=0;_<r;++_){var y=Po.dot(p,l[_])-Po.dot(p,d);y<f&&(f=y)}f>h&&(h=f,u=m)}Vo._maxSeparation=h,Vo._bestIndex=u}function Lo(t,e,i,n,o){t.pointCount=0;var r=e.m_radius+n.m_radius;Vo(e,i,n,o);var s=Vo._bestIndex,a=Vo._maxSeparation;if(!(a>r)){Vo(n,o,e,i);var l=Vo._bestIndex,c=Vo._maxSeparation;if(!(c>r)){var u,h,m,p,d,f;c>a+.1*zo.linearSlop?(u=n,h=e,m=o,p=i,d=l,t.type=Fo.e_faceB,f=1):(u=e,h=n,m=i,p=o,d=s,t.type=Fo.e_faceA,f=0);var _=[new Fo.clipVertex,new Fo.clipVertex];!function(t,e,i,n,o,r){var s=e.m_normals,a=o.m_count,l=o.m_vertices,c=o.m_normals;So&&Eo.assert(0<=n&&n<e.m_count);for(var u=To.mulT(r.q,To.mulVec2(i.q,s[n])),h=0,m=1/0,p=0;p<a;++p){var d=Po.dot(u,c[p]);d<m&&(m=d,h=p)}var f=h,_=f+1<a?f+1:0;t[0].v=Mo.mulVec2(r,l[f]),t[0].id.cf.indexA=n,t[0].id.cf.indexB=f,t[0].id.cf.typeA=Fo.e_face,t[0].id.cf.typeB=Fo.e_vertex,t[1].v=Mo.mulVec2(r,l[_]),t[1].id.cf.indexA=n,t[1].id.cf.indexB=_,t[1].id.cf.typeA=Fo.e_face,t[1].id.cf.typeB=Fo.e_vertex}(_,u,m,d,h,p);var y=u.m_count,v=u.m_vertices,g=d,b=d+1<y?d+1:0,x=v[g],$=v[b],A=Po.sub($,x);A.normalize();var w=Po.cross(A,1),B=Po.combine(.5,x,.5,$),C=To.mulVec2(m.q,A),S=Po.cross(C,1);x=Mo.mulVec2(m,x),$=Mo.mulVec2(m,$);var E=Po.dot(S,x),M=-Po.dot(C,x)+r,T=Po.dot(C,$)+r,P=[new Fo.clipVertex,new Fo.clipVertex],z=[new Fo.clipVertex,new Fo.clipVertex];if(!(Fo.clipSegmentToLine(P,_,Po.neg(C),M,g)<2||Fo.clipSegmentToLine(z,P,C,T,b)<2)){t.localNormal=w,t.localPoint=B;for(var F=0,I=0;I<z.length;++I){if(Po.dot(S,z[I].v)-E<=r){var k=t.points[F];if(k.localPoint.set(Mo.mulTVec2(p,z[I].v)),k.id=z[I].id,f){var V=k.id.cf,L=V.indexA,j=V.indexB,R=V.typeA,D=V.typeB;V.indexA=j,V.indexB=L,V.typeA=D,V.typeB=R}++F}}t.pointCount=F}}}}ri.addType(Io.TYPE,Io.TYPE,(function(t,e,i,n,o,r,s){So&&Eo.assert(i.getType()==Io.TYPE),So&&Eo.assert(r.getType()==Io.TYPE),Lo(t,i.getShape(),e,r.getShape(),o)})),"undefined"!=typeof DEBUG&&DEBUG;var jo="undefined"!=typeof ASSERT&&ASSERT,Ro=r,Do=l.exports,Oo=rt,qo=_,No=ae.exports,Uo=Sn,Wo=qn;ri.addType(Wo.TYPE,Uo.TYPE,(function(t,e,i,n,o,r,s){jo&&Ro.assert(i.getType()==Wo.TYPE),jo&&Ro.assert(r.getType()==Uo.TYPE),function(t,e,i,n,o){t.pointCount=0;for(var r=Oo.mulVec2(o,n.m_p),s=Oo.mulTVec2(i,r),a=0,l=-1/0,c=e.m_radius+n.m_radius,u=e.m_count,h=e.m_vertices,m=e.m_normals,p=0;p<u;++p){var d=qo.dot(m[p],qo.sub(s,h[p]));if(d>c)return;d>l&&(l=d,a=p)}var f=a,_=f+1<u?f+1:0,y=h[f],v=h[_];if(l<Do.EPSILON)return t.pointCount=1,t.type=No.e_faceA,t.localNormal.set(m[a]),t.localPoint.setCombine(.5,y,.5,v),t.points[0].localPoint=n.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=No.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=No.e_vertex);var g=qo.dot(qo.sub(s,y),qo.sub(v,y)),b=qo.dot(qo.sub(s,v),qo.sub(y,v));if(g<=0){if(qo.distanceSquared(s,y)>c*c)return;t.pointCount=1,t.type=No.e_faceA,t.localNormal.setCombine(1,s,-1,y),t.localNormal.normalize(),t.localPoint=y,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=No.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=No.e_vertex}else if(b<=0){if(qo.distanceSquared(s,v)>c*c)return;t.pointCount=1,t.type=No.e_faceA,t.localNormal.setCombine(1,s,-1,v),t.localNormal.normalize(),t.localPoint.set(v),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=No.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=No.e_vertex}else{var x=qo.mid(y,v);if((l=qo.dot(s,m[f])-qo.dot(x,m[f]))>c)return;t.pointCount=1,t.type=No.e_faceA,t.localNormal.set(m[f]),t.localPoint.set(x),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=No.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=No.e_vertex}}(t,i.getShape(),e,r.getShape(),o)})),"undefined"!=typeof DEBUG&&DEBUG;var Ho="undefined"!=typeof ASSERT&&ASSERT,Go=r,Yo=l.exports,Jo=rt,Zo=_,Xo=K,Ko=b,Qo=ri,tr=ae.exports,er=In,ir=Kn,nr=qn;Qo.addType(er.TYPE,nr.TYPE,(function(t,e,i,n,o,r,s){Ho&&Go.assert(i.getType()==er.TYPE),Ho&&Go.assert(r.getType()==nr.TYPE),cr(t,i.getShape(),e,r.getShape(),o)})),Qo.addType(ir.TYPE,nr.TYPE,(function(t,e,i,n,o,r,s){Ho&&Go.assert(i.getType()==ir.TYPE),Ho&&Go.assert(r.getType()==nr.TYPE);var a=i.getShape(),l=new er;a.getChildEdge(l,n),cr(t,l,e,r.getShape(),o)}));function or(){this.type,this.index,this.separation}var rr=new or,sr=new or,ar=new function(){this.vertices=[],this.normals=[],this.count=0},lr=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=Zo.zero(),this.sideNormal1=Zo.zero(),this.sideOffset1,this.sideNormal2=Zo.zero(),this.sideOffset2};function cr(t,e,i,n,o){var r=Jo.mulTXf(i,o),s=Jo.mulVec2(r,n.m_centroid),a=e.m_vertex0,l=e.m_vertex1,c=e.m_vertex2,u=e.m_vertex3,h=e.m_hasVertex0,m=e.m_hasVertex3,p=Zo.sub(c,l);p.normalize();var d,f=Zo.neo(p.y,-p.x),_=Zo.dot(f,Zo.sub(s,l)),y=0,v=0,g=!1,b=!1;if(h){var x=Zo.sub(l,a);x.normalize();var $=Zo.neo(x.y,-x.x);g=Zo.cross(x,p)>=0,y=Zo.dot($,s)-Zo.dot($,a)}if(m){var A=Zo.sub(u,c);A.normalize();var w=Zo.neo(A.y,-A.x);b=Zo.cross(p,A)>0,v=Zo.dot(w,s)-Zo.dot(w,c)}var B=Zo.zero(),C=Zo.zero(),S=Zo.zero();h&&m?g&&b?(d=y>=0||_>=0||v>=0)?(B.set(f),C.set($),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,f)):g?(d=y>=0||_>=0&&v>=0)?(B.set(f),C.set($),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,f)):b?(d=v>=0||y>=0&&_>=0)?(B.set(f),C.set(f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,$)):(d=y>=0&&_>=0&&v>=0)?(B.set(f),C.set(f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,$)):h?g?(d=y>=0||_>=0)?(B.set(f),C.set($),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,f)):(d=y>=0&&_>=0)?(B.set(f),C.set(f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,$)):m?b?(d=_>=0||v>=0)?(B.set(f),C.setMul(-1,f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.set(f)):(d=_>=0&&v>=0)?(B.set(f),C.setMul(-1,f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.set(f)):(d=_>=0)?(B.set(f),C.setMul(-1,f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.set(f)),ar.count=n.m_count;for(var E=0;E<n.m_count;++E)ar.vertices[E]=Jo.mulVec2(r,n.m_vertices[E]),ar.normals[E]=Xo.mulVec2(r.q,n.m_normals[E]);var M=2*Ko.polygonRadius;t.pointCount=0,rr.type=1,rr.index=d?0:1,rr.separation=1/0;for(E=0;E<ar.count;++E){(P=Zo.dot(B,Zo.sub(ar.vertices[E],l)))<rr.separation&&(rr.separation=P)}if(-1!=rr.type&&!(rr.separation>M)){sr.type=-1,sr.index=-1,sr.separation=-1/0;var T=Zo.neo(-B.y,B.x);for(E=0;E<ar.count;++E){var P,z=Zo.neg(ar.normals[E]),F=Zo.dot(z,Zo.sub(ar.vertices[E],l)),I=Zo.dot(z,Zo.sub(ar.vertices[E],c));if((P=Yo.min(F,I))>M){sr.type=2,sr.index=E,sr.separation=P;break}if(Zo.dot(z,T)>=0){if(Zo.dot(Zo.sub(z,S),B)<-Ko.angularSlop)continue}else if(Zo.dot(Zo.sub(z,C),B)<-Ko.angularSlop)continue;P>sr.separation&&(sr.type=2,sr.index=E,sr.separation=P)}if(!(-1!=sr.type&&sr.separation>M)){var k;k=-1==sr.type?rr:sr.separation>.98*rr.separation+.001?sr:rr;var V=[new tr.clipVertex,new tr.clipVertex];if(1==k.type){t.type=tr.e_faceA;var L=0,j=Zo.dot(B,ar.normals[0]);for(E=1;E<ar.count;++E){var R=Zo.dot(B,ar.normals[E]);R<j&&(j=R,L=E)}var D=L,O=D+1<ar.count?D+1:0;V[0].v=ar.vertices[D],V[0].id.cf.indexA=0,V[0].id.cf.indexB=D,V[0].id.cf.typeA=tr.e_face,V[0].id.cf.typeB=tr.e_vertex,V[1].v=ar.vertices[O],V[1].id.cf.indexA=0,V[1].id.cf.indexB=O,V[1].id.cf.typeA=tr.e_face,V[1].id.cf.typeB=tr.e_vertex,d?(lr.i1=0,lr.i2=1,lr.v1=l,lr.v2=c,lr.normal.set(f)):(lr.i1=1,lr.i2=0,lr.v1=c,lr.v2=l,lr.normal.setMul(-1,f))}else t.type=tr.e_faceB,V[0].v=l,V[0].id.cf.indexA=0,V[0].id.cf.indexB=k.index,V[0].id.cf.typeA=tr.e_vertex,V[0].id.cf.typeB=tr.e_face,V[1].v=c,V[1].id.cf.indexA=0,V[1].id.cf.indexB=k.index,V[1].id.cf.typeA=tr.e_vertex,V[1].id.cf.typeB=tr.e_face,lr.i1=k.index,lr.i2=lr.i1+1<ar.count?lr.i1+1:0,lr.v1=ar.vertices[lr.i1],lr.v2=ar.vertices[lr.i2],lr.normal.set(ar.normals[lr.i1]);lr.sideNormal1.set(lr.normal.y,-lr.normal.x),lr.sideNormal2.setMul(-1,lr.sideNormal1),lr.sideOffset1=Zo.dot(lr.sideNormal1,lr.v1),lr.sideOffset2=Zo.dot(lr.sideNormal2,lr.v2);var q=[new tr.clipVertex,new tr.clipVertex],N=[new tr.clipVertex,new tr.clipVertex];if(!(tr.clipSegmentToLine(q,V,lr.sideNormal1,lr.sideOffset1,lr.i1)<Ko.maxManifoldPoints||tr.clipSegmentToLine(N,q,lr.sideNormal2,lr.sideOffset2,lr.i2)<Ko.maxManifoldPoints)){1==k.type?(t.localNormal=Zo.clone(lr.normal),t.localPoint=Zo.clone(lr.v1)):(t.localNormal=Zo.clone(n.m_normals[lr.i1]),t.localPoint=Zo.clone(n.m_vertices[lr.i1]));var U=0;for(E=0;E<Ko.maxManifoldPoints;++E){if(Zo.dot(lr.normal,Zo.sub(N[E].v,lr.v1))<=M){var W=t.points[U];1==k.type?(W.localPoint=Jo.mulT(r,N[E].v),W.id=N[E].id):(W.localPoint=N[E].v,W.id.cf.typeA=N[E].id.cf.typeB,W.id.cf.typeB=N[E].id.cf.typeA,W.id.cf.indexA=N[E].id.cf.indexB,W.id.cf.indexB=N[E].id.cf.indexA),++U}}t.pointCount=U}}}}"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ur=gr,hr=o,mr=b,pr=l.exports,dr=_,fr=K,_r=pi,yr=jt;gr.TYPE="distance-joint",_r.TYPES[gr.TYPE]=gr,gr._super=_r,gr.prototype=Object.create(gr._super.prototype);var vr={frequencyHz:0,dampingRatio:0};function gr(t,e,i,n,o){if(!(this instanceof gr))return new gr(t,e,i,n,o);if(i&&n&&"m_type"in n&&"x"in i&&"y"in i){var r=i;i=n,n=r}t=hr(t,vr),_r.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=gr.TYPE,this.m_localAnchorA=dr.clone(n?e.getLocalPoint(n):t.localAnchorA||dr.zero()),this.m_localAnchorB=dr.clone(o?i.getLocalPoint(o):t.localAnchorB||dr.zero()),this.m_length=pr.isFinite(t.length)?t.length:dr.distance(e.getWorldPoint(this.m_localAnchorA),i.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}gr.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},gr._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(yr,t.bodyA,e),t.bodyB=i(yr,t.bodyB,e),new gr(t)},gr.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.length>0?this.m_length=+t.length:t.length<0||(t.anchorA||t.anchorA||t.anchorA||t.anchorA)&&(this.m_length=dr.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB)))},gr.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},gr.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},gr.prototype.setLength=function(t){this.m_length=t},gr.prototype.getLength=function(){return this.m_length},gr.prototype.setFrequency=function(t){this.m_frequencyHz=t},gr.prototype.getFrequency=function(){return this.m_frequencyHz},gr.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},gr.prototype.getDampingRatio=function(){return this.m_dampingRatio},gr.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},gr.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},gr.prototype.getReactionForce=function(t){return dr.mul(this.m_impulse,this.m_u).mul(t)},gr.prototype.getReactionTorque=function(t){return 0},gr.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=fr.neo(i),u=fr.neo(s);this.m_rA=fr.mulVec2(c,dr.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=fr.mulVec2(u,dr.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=dr.sub(dr.add(r,this.m_rB),dr.add(e,this.m_rA));var h=this.m_u.length();h>mr.linearSlop?this.m_u.mul(1/h):this.m_u.set(0,0);var m=dr.cross(this.m_rA,this.m_u),p=dr.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,this.m_frequencyHz>0){var f=h-this.m_length,_=2*pr.PI*this.m_frequencyHz,y=2*this.m_mass*this.m_dampingRatio*_,v=this.m_mass*_*_,g=t.dt;this.m_gamma=g*(y+g*v),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=f*g*v*this.m_gamma,d+=this.m_gamma,this.m_mass=0!=d?1/d:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var b=dr.mul(this.m_impulse,this.m_u);n.subMul(this.m_invMassA,b),o-=this.m_invIA*dr.cross(this.m_rA,b),a.addMul(this.m_invMassB,b),l+=this.m_invIB*dr.cross(this.m_rB,b)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},gr.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=dr.add(e,dr.cross(i,this.m_rA)),s=dr.add(n,dr.cross(o,this.m_rB)),a=dr.dot(this.m_u,s)-dr.dot(this.m_u,r),l=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=l;var c=dr.mul(l,this.m_u);e.subMul(this.m_invMassA,c),i-=this.m_invIA*dr.cross(this.m_rA,c),n.addMul(this.m_invMassB,c),o+=this.m_invIB*dr.cross(this.m_rB,c),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=o},gr.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=fr.neo(i),s=fr.neo(o),a=fr.mulSub(r,this.m_localAnchorA,this.m_localCenterA),l=fr.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=dr.sub(dr.add(n,l),dr.add(e,a)),u=c.normalize()-this.m_length;u=pr.clamp(u,-mr.maxLinearCorrection,mr.maxLinearCorrection);var h=-this.m_mass*u,m=dr.mul(h,c);return e.subMul(this.m_invMassA,m),i-=this.m_invIA*dr.cross(a,m),n.addMul(this.m_invMassB,m),o+=this.m_invIB*dr.cross(l,m),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,pr.abs(u)<mr.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var br="undefined"!=typeof ASSERT&&ASSERT,xr=Pr,$r=r,Ar=o,wr=l.exports,Br=_,Cr=ne,Sr=K,Er=pi,Mr=jt;Pr.TYPE="friction-joint",Er.TYPES[Pr.TYPE]=Pr,Pr._super=Er,Pr.prototype=Object.create(Pr._super.prototype);var Tr={maxForce:0,maxTorque:0};function Pr(t,e,i,n){if(!(this instanceof Pr))return new Pr(t,e,i,n);t=Ar(t,Tr),Er.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Pr.TYPE,this.m_localAnchorA=Br.clone(n?e.getLocalPoint(n):t.localAnchorA||Br.zero()),this.m_localAnchorB=Br.clone(n?i.getLocalPoint(n):t.localAnchorB||Br.zero()),this.m_linearImpulse=Br.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}Pr.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},Pr._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Mr,t.bodyA,e),t.bodyB=i(Mr,t.bodyB,e),new Pr(t)},Pr.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Pr.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Pr.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Pr.prototype.setMaxForce=function(t){br&&$r.assert(wr.isFinite(t)&&t>=0),this.m_maxForce=t},Pr.prototype.getMaxForce=function(){return this.m_maxForce},Pr.prototype.setMaxTorque=function(t){br&&$r.assert(wr.isFinite(t)&&t>=0),this.m_maxTorque=t},Pr.prototype.getMaxTorque=function(){return this.m_maxTorque},Pr.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Pr.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Pr.prototype.getReactionForce=function(t){return Br.mul(t,this.m_linearImpulse)},Pr.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},Pr.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=Sr.neo(e),l=Sr.neo(o);this.m_rA=Sr.mulVec2(a,Br.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Sr.mulVec2(l,Br.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new Cr;if(p.ex.x=c+u+h*this.m_rA.y*this.m_rA.y+m*this.m_rB.y*this.m_rB.y,p.ex.y=-h*this.m_rA.x*this.m_rA.y-m*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=c+u+h*this.m_rA.x*this.m_rA.x+m*this.m_rB.x*this.m_rB.x,this.m_linearMass=p.getInverse(),this.m_angularMass=h+m,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var d=Br.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(c,d),n-=h*(Br.cross(this.m_rA,d)+this.m_angularImpulse),r.addMul(u,d),s+=m*(Br.cross(this.m_rB,d)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=s},Pr.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=o-i,h=-this.m_angularMass*u,m=this.m_angularImpulse,p=c*this.m_maxTorque;this.m_angularImpulse=wr.clamp(this.m_angularImpulse+h,-p,p),i-=a*(h=this.m_angularImpulse-m),o+=l*h;u=Br.sub(Br.add(n,Br.cross(o,this.m_rB)),Br.add(e,Br.cross(i,this.m_rA))),h=Br.neg(Cr.mulVec2(this.m_linearMass,u)),m=this.m_linearImpulse;this.m_linearImpulse.add(h);p=c*this.m_maxForce;this.m_linearImpulse.lengthSquared()>p*p&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(p)),h=Br.sub(this.m_linearImpulse,m),e.subMul(r,h),i-=a*Br.cross(this.m_rA,h),n.addMul(s,h),o+=l*Br.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Pr.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var zr="undefined"!=typeof ASSERT&&ASSERT,Fr=Hr,Ir=r,kr=o,Vr=b,Lr=l.exports,jr=_,Rr=Ae,Dr=ne,Or=Me,qr=K,Nr=pi,Ur=jt;Hr.TYPE="revolute-joint",Nr.TYPES[Hr.TYPE]=Hr,Hr._super=Nr,Hr.prototype=Object.create(Hr._super.prototype);var Wr={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function Hr(t,e,i,n){if(!(this instanceof Hr))return new Hr(t,e,i,n);t=kr(t,Wr),Nr.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Hr.TYPE,this.m_localAnchorA=jr.clone(n?e.getLocalPoint(n):t.localAnchorA||jr.zero()),this.m_localAnchorB=jr.clone(n?i.getLocalPoint(n):t.localAnchorB||jr.zero()),this.m_referenceAngle=Lr.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=Rr(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new Or,this.m_motorMass,this.m_limitState=0}Hr.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},Hr._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Ur,t.bodyA,e),t.bodyB=i(Ur,t.bodyB,e),new Hr(t)},Hr.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Hr.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Hr.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Hr.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Hr.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},Hr.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},Hr.prototype.isMotorEnabled=function(){return this.m_enableMotor},Hr.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},Hr.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},Hr.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},Hr.prototype.getMotorSpeed=function(){return this.m_motorSpeed},Hr.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},Hr.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},Hr.prototype.isLimitEnabled=function(){return this.m_enableLimit},Hr.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},Hr.prototype.getLowerLimit=function(){return this.m_lowerAngle},Hr.prototype.getUpperLimit=function(){return this.m_upperAngle},Hr.prototype.setLimits=function(t,e){zr&&Ir.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},Hr.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Hr.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Hr.prototype.getReactionForce=function(t){return jr.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},Hr.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},Hr.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=qr.neo(e),l=qr.neo(o);this.m_rA=qr.mulVec2(a,jr.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=qr.mulVec2(l,jr.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=h+m===0;if(this.m_mass.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,this.m_mass.ez.x=-this.m_rA.y*h-this.m_rB.y*m,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,this.m_mass.ez.y=this.m_rA.x*h+this.m_rB.x*m,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=h+m,this.m_motorMass=h+m,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||p)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==p){var d=o-e-this.m_referenceAngle;Lr.abs(this.m_upperAngle-this.m_lowerAngle)<2*Vr.angularSlop?this.m_limitState=3:d<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):d>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var f=jr.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(c,f),n-=h*(jr.cross(this.m_rA,f)+this.m_motorImpulse+this.m_impulse.z),r.addMul(u,f),s+=m*(jr.cross(this.m_rB,f)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=s},Hr.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=a+l===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==c){var u=o-i-this.m_motorSpeed,h=-this.m_motorMass*u,m=this.m_motorImpulse,p=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=Lr.clamp(this.m_motorImpulse+h,-p,p),i-=a*(h=this.m_motorImpulse-m),o+=l*h}if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var d=jr.zero();d.addCombine(1,n,1,jr.cross(o,this.m_rB)),d.subCombine(1,e,1,jr.cross(i,this.m_rA));var f=o-i;u=Rr(d.x,d.y,f),h=Rr.neg(this.m_mass.solve33(u));if(3==this.m_limitState)this.m_impulse.add(h);else if(1==this.m_limitState){if(this.m_impulse.z+h.z<0){var _=jr.combine(-1,d,this.m_impulse.z,jr.neo(this.m_mass.ez.x,this.m_mass.ez.y)),y=this.m_mass.solve22(_);h.x=y.x,h.y=y.y,h.z=-this.m_impulse.z,this.m_impulse.x+=y.x,this.m_impulse.y+=y.y,this.m_impulse.z=0}else this.m_impulse.add(h)}else if(2==this.m_limitState){if(this.m_impulse.z+h.z>0){_=jr.combine(-1,d,this.m_impulse.z,jr.neo(this.m_mass.ez.x,this.m_mass.ez.y)),y=this.m_mass.solve22(_);h.x=y.x,h.y=y.y,h.z=-this.m_impulse.z,this.m_impulse.x+=y.x,this.m_impulse.y+=y.y,this.m_impulse.z=0}else this.m_impulse.add(h)}var v=jr.neo(h.x,h.y);e.subMul(r,v),i-=a*(jr.cross(this.m_rA,v)+h.z),n.addMul(s,v),o+=l*(jr.cross(this.m_rB,v)+h.z)}else{(u=jr.zero()).addCombine(1,n,1,jr.cross(o,this.m_rB)),u.subCombine(1,e,1,jr.cross(i,this.m_rA));h=this.m_mass.solve22(jr.neg(u));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y,e.subMul(r,h),i-=a*jr.cross(this.m_rA,h),n.addMul(s,h),o+=l*jr.cross(this.m_rB,h)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Hr.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,s=qr.neo(n),a=qr.neo(r),l=0,c=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var u=r-n-this.m_referenceAngle,h=0;if(3==this.m_limitState){var m=Lr.clamp(u-this.m_lowerAngle,-Vr.maxAngularCorrection,Vr.maxAngularCorrection);h=-this.m_motorMass*m,l=Lr.abs(m)}else if(1==this.m_limitState){l=-(m=u-this.m_lowerAngle),m=Lr.clamp(m+Vr.angularSlop,-Vr.maxAngularCorrection,0),h=-this.m_motorMass*m}else if(2==this.m_limitState){l=m=u-this.m_upperAngle,m=Lr.clamp(m-Vr.angularSlop,0,Vr.maxAngularCorrection),h=-this.m_motorMass*m}n-=this.m_invIA*h,r+=this.m_invIB*h}s.set(n),a.set(r);var p=qr.mulVec2(s,jr.sub(this.m_localAnchorA,this.m_localCenterA)),d=qr.mulVec2(a,jr.sub(this.m_localAnchorB,this.m_localCenterB));(m=jr.zero()).addCombine(1,o,1,d),m.subCombine(1,i,1,p),e=m.length();var f=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,v=this.m_invIB,g=new Dr;g.ex.x=f+_+y*p.y*p.y+v*d.y*d.y,g.ex.y=-y*p.x*p.y-v*d.x*d.y,g.ey.x=g.ex.y,g.ey.y=f+_+y*p.x*p.x+v*d.x*d.x;var b=jr.neg(g.solve(m));return i.subMul(f,b),n-=y*jr.cross(p,b),o.addMul(_,b),r+=v*jr.cross(d,b),this.m_bodyA.c_position.c.set(i),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(o),this.m_bodyB.c_position.a=r,e<=Vr.linearSlop&&l<=Vr.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var Gr="undefined"!=typeof ASSERT&&ASSERT,Yr=as,Jr=r,Zr=o,Xr=b,Kr=l.exports,Qr=_,ts=Ae,es=ne,is=Me,ns=K,os=pi,rs=jt;as.TYPE="prismatic-joint",os.TYPES[as.TYPE]=as,as._super=os,as.prototype=Object.create(as._super.prototype);var ss={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function as(t,e,i,n,o){if(!(this instanceof as))return new as(t,e,i,n,o);t=Zr(t,ss),os.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=as.TYPE,this.m_localAnchorA=Qr.clone(n?e.getLocalPoint(n):t.localAnchorA||Qr.zero()),this.m_localAnchorB=Qr.clone(n?i.getLocalPoint(n):t.localAnchorB||Qr.zero()),this.m_localXAxisA=Qr.clone(o?e.getLocalVector(o):t.localAxisA||Qr.neo(1,0)),this.m_localXAxisA.normalize(),this.m_localYAxisA=Qr.cross(1,this.m_localXAxisA),this.m_referenceAngle=Kr.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=ts(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=0,this.m_axis=Qr.zero(),this.m_perp=Qr.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new is,this.m_motorMass}as.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},as._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(rs,t.bodyA,e),t.bodyB=i(rs,t.bodyB,e),t.localAxisA=Qr(t.localAxisA),new as(t)},as.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(Qr.cross(1,t.localAxisA)))},as.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},as.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},as.prototype.getLocalAxisA=function(){return this.m_localXAxisA},as.prototype.getReferenceAngle=function(){return this.m_referenceAngle},as.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=Qr.sub(e,t),n=this.m_bodyA.getWorldVector(this.m_localXAxisA);return Qr.dot(i,n)},as.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=ns.mulVec2(t.m_xf.q,Qr.sub(this.m_localAnchorA,t.m_sweep.localCenter)),n=ns.mulVec2(e.m_xf.q,Qr.sub(this.m_localAnchorB,e.m_sweep.localCenter)),o=Qr.add(t.m_sweep.c,i),r=Qr.add(e.m_sweep.c,n),s=Qr.sub(r,o),a=ns.mulVec2(t.m_xf.q,this.m_localXAxisA),l=t.m_linearVelocity,c=e.m_linearVelocity,u=t.m_angularVelocity,h=e.m_angularVelocity;return Qr.dot(s,Qr.cross(u,a))+Qr.dot(a,Qr.sub(Qr.addCross(c,h,n),Qr.addCross(l,u,i)))},as.prototype.isLimitEnabled=function(){return this.m_enableLimit},as.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},as.prototype.getLowerLimit=function(){return this.m_lowerTranslation},as.prototype.getUpperLimit=function(){return this.m_upperTranslation},as.prototype.setLimits=function(t,e){Gr&&Jr.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},as.prototype.isMotorEnabled=function(){return this.m_enableMotor},as.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},as.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},as.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},as.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},as.prototype.getMotorSpeed=function(){return this.m_motorSpeed},as.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},as.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},as.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},as.prototype.getReactionForce=function(t){return Qr.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},as.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},as.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=ns.neo(i),u=ns.neo(s),h=ns.mulVec2(c,Qr.sub(this.m_localAnchorA,this.m_localCenterA)),m=ns.mulVec2(u,Qr.sub(this.m_localAnchorB,this.m_localCenterB)),p=Qr.zero();p.addCombine(1,r,1,m),p.subCombine(1,e,1,h);var d=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,y=this.m_invIB;this.m_axis=ns.mulVec2(c,this.m_localXAxisA),this.m_a1=Qr.cross(Qr.add(p,h),this.m_axis),this.m_a2=Qr.cross(m,this.m_axis),this.m_motorMass=d+f+_*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=ns.mulVec2(c,this.m_localYAxisA),this.m_s1=Qr.cross(Qr.add(p,h),this.m_perp),this.m_s2=Qr.cross(m,this.m_perp),Qr.cross(h,this.m_perp);var v=d+f+_*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,g=_*this.m_s1+y*this.m_s2,b=_*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,x=_+y;0==x&&(x=1);var $=_*this.m_a1+y*this.m_a2,A=d+f+_*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2;if(this.m_K.ex.set(v,g,b),this.m_K.ey.set(g,x,$),this.m_K.ez.set(b,$,A),this.m_enableLimit){var w=Qr.dot(this.m_axis,p);Kr.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*Xr.linearSlop?this.m_limitState=3:w<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):w>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var B=Qr.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,S=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.subMul(d,B),o-=_*C,a.addMul(f,B),l+=y*S}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},as.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var c=Qr.dot(this.m_axis,Qr.sub(n,e))+this.m_a2*o-this.m_a1*i,u=this.m_motorMass*(this.m_motorSpeed-c),h=this.m_motorImpulse,m=t.dt*this.m_maxMotorForce;this.m_motorImpulse=Kr.clamp(this.m_motorImpulse+u,-m,m),u=this.m_motorImpulse-h;var p=Qr.mul(u,this.m_axis),d=u*this.m_a1,f=u*this.m_a2;e.subMul(r,p),i-=a*d,n.addMul(s,p),o+=l*f}var _=Qr.zero();if(_.x+=Qr.dot(this.m_perp,n)+this.m_s2*o,_.x-=Qr.dot(this.m_perp,e)+this.m_s1*i,_.y=o-i,this.m_enableLimit&&0!=this.m_limitState){var y=0;y+=Qr.dot(this.m_axis,n)+this.m_a2*o,y-=Qr.dot(this.m_axis,e)+this.m_a1*i;c=ts(_.x,_.y,y);var v=ts(this.m_impulse),g=this.m_K.solve33(ts.neg(c));this.m_impulse.add(g),1==this.m_limitState?this.m_impulse.z=Kr.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=Kr.min(this.m_impulse.z,0));var b=Qr.combine(-1,_,-(this.m_impulse.z-v.z),Qr.neo(this.m_K.ez.x,this.m_K.ez.y)),x=Qr.add(this.m_K.solve22(b),Qr.neo(v.x,v.y));this.m_impulse.x=x.x,this.m_impulse.y=x.y,g=ts.sub(this.m_impulse,v);p=Qr.combine(g.x,this.m_perp,g.z,this.m_axis),d=g.x*this.m_s1+g.y+g.z*this.m_a1,f=g.x*this.m_s2+g.y+g.z*this.m_a2;e.subMul(r,p),i-=a*d,n.addMul(s,p),o+=l*f}else{g=this.m_K.solve22(Qr.neg(_));this.m_impulse.x+=g.x,this.m_impulse.y+=g.y;p=Qr.mul(g.x,this.m_perp),d=g.x*this.m_s1+g.y,f=g.x*this.m_s2+g.y;e.subMul(r,p),i-=a*d,n.addMul(s,p),o+=l*f}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},as.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=ns.neo(i),s=ns.neo(o),a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,h=ns.mulVec2(r,Qr.sub(this.m_localAnchorA,this.m_localCenterA)),m=ns.mulVec2(s,Qr.sub(this.m_localAnchorB,this.m_localCenterB)),p=Qr.sub(Qr.add(n,m),Qr.add(e,h)),d=ns.mulVec2(r,this.m_localXAxisA),f=Qr.cross(Qr.add(p,h),d),_=Qr.cross(m,d),y=ns.mulVec2(r,this.m_localYAxisA),v=Qr.cross(Qr.add(p,h),y),g=Qr.cross(m,y),b=ts(),x=Qr.zero();x.x=Qr.dot(y,p),x.y=o-i-this.m_referenceAngle;var $=Kr.abs(x.x),A=Kr.abs(x.y),w=Xr.linearSlop,B=Xr.maxLinearCorrection,C=!1,S=0;if(this.m_enableLimit){var E=Qr.dot(d,p);Kr.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*w?(S=Kr.clamp(E,-B,B),$=Kr.max($,Kr.abs(E)),C=!0):E<=this.m_lowerTranslation?(S=Kr.clamp(E-this.m_lowerTranslation+w,-B,0),$=Kr.max($,this.m_lowerTranslation-E),C=!0):E>=this.m_upperTranslation&&(S=Kr.clamp(E-this.m_upperTranslation-w,0,B),$=Kr.max($,E-this.m_upperTranslation),C=!0)}if(C){var M=a+l+c*v*v+u*g*g,T=c*v+u*g,P=c*v*f+u*g*_;0==(k=c+u)&&(k=1);var z=c*f+u*_,F=a+l+c*f*f+u*_*_;(V=new is).ex.set(M,T,P),V.ey.set(T,k,z),V.ez.set(P,z,F);var I=ts();I.x=x.x,I.y=x.y,I.z=S,b=V.solve33(ts.neg(I))}else{var k,V;M=a+l+c*v*v+u*g*g,T=c*v+u*g;0==(k=c+u)&&(k=1),(V=new es).ex.set(M,T),V.ey.set(T,k);var L=V.solve(Qr.neg(x));b.x=L.x,b.y=L.y,b.z=0}var j=Qr.combine(b.x,y,b.z,d),R=b.x*v+b.y+b.z*f,D=b.x*g+b.y+b.z*_;return e.subMul(a,j),i-=c*R,n.addMul(l,j),o+=u*D,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=o,$<=Xr.linearSlop&&A<=Xr.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var ls="undefined"!=typeof ASSERT&&ASSERT,cs=xs,us=r,hs=o,ms=b,ps=l.exports,ds=_,fs=K,_s=pi,ys=jt,vs=Fr,gs=Yr;xs.TYPE="gear-joint",_s.TYPES[xs.TYPE]=xs,xs._super=_s,xs.prototype=Object.create(xs._super.prototype);var bs={ratio:1};function xs(t,e,i,n,o,r){if(!(this instanceof xs))return new xs(t,e,i,n,o,r);var s,a;t=hs(t,bs),_s.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=xs.TYPE,ls&&us.assert(n.m_type===vs.TYPE||n.m_type===gs.TYPE),ls&&us.assert(o.m_type===vs.TYPE||o.m_type===gs.TYPE),this.m_joint1=n||t.joint1,this.m_joint2=o||t.joint2,this.m_ratio=ps.isFinite(r)?r:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var l=this.m_bodyA.m_xf,c=this.m_bodyA.m_sweep.a,u=this.m_bodyC.m_xf,h=this.m_bodyC.m_sweep.a;if(this.m_type1===vs.TYPE){var m=this.m_joint1;this.m_localAnchorC=m.m_localAnchorA,this.m_localAnchorA=m.m_localAnchorB,this.m_referenceAngleA=m.m_referenceAngle,this.m_localAxisC=ds.zero(),s=c-h-this.m_referenceAngleA}else{var p=this.m_joint1;this.m_localAnchorC=p.m_localAnchorA,this.m_localAnchorA=p.m_localAnchorB,this.m_referenceAngleA=p.m_referenceAngle,this.m_localAxisC=p.m_localXAxisA;var d=this.m_localAnchorC,f=fs.mulTVec2(u.q,ds.add(fs.mul(l.q,this.m_localAnchorA),ds.sub(l.p,u.p)));s=ds.dot(f,this.m_localAxisC)-ds.dot(d,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var _=this.m_bodyB.m_xf,y=this.m_bodyB.m_sweep.a,v=this.m_bodyD.m_xf,g=this.m_bodyD.m_sweep.a;if(this.m_type2===vs.TYPE){m=this.m_joint2;this.m_localAnchorD=m.m_localAnchorA,this.m_localAnchorB=m.m_localAnchorB,this.m_referenceAngleB=m.m_referenceAngle,this.m_localAxisD=ds.zero(),a=y-g-this.m_referenceAngleB}else{p=this.m_joint2;this.m_localAnchorD=p.m_localAnchorA,this.m_localAnchorB=p.m_localAnchorB,this.m_referenceAngleB=p.m_referenceAngle,this.m_localAxisD=p.m_localXAxisA;var b=this.m_localAnchorD,x=fs.mulTVec2(v.q,ds.add(fs.mul(_.q,this.m_localAnchorB),ds.sub(_.p,v.p)));a=ds.dot(x,this.m_localAxisD)-ds.dot(b,this.m_localAxisD)}this.m_constant=s+this.m_ratio*a,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}xs.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},xs._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(ys,t.bodyA,e),t.bodyB=i(ys,t.bodyB,e),t.joint1=i(_s,t.joint1,e),t.joint2=i(_s,t.joint2,e),new xs(t)},xs.prototype.getJoint1=function(){return this.m_joint1},xs.prototype.getJoint2=function(){return this.m_joint2},xs.prototype.setRatio=function(t){ls&&us.assert(ps.isFinite(t)),this.m_ratio=t},xs.prototype.getRatio=function(){return this.m_ratio},xs.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},xs.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},xs.prototype.getReactionForce=function(t){return ds.mul(this.m_impulse,this.m_JvAC).mul(t)},xs.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},xs.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,l=this.m_bodyC.c_velocity.v,c=this.m_bodyC.c_velocity.w,u=this.m_bodyD.c_position.a,h=this.m_bodyD.c_velocity.v,m=this.m_bodyD.c_velocity.w,p=fs.neo(e),d=fs.neo(o),f=fs.neo(a),_=fs.neo(u);if(this.m_mass=0,this.m_type1==vs.TYPE)this.m_JvAC=ds.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var y=fs.mulVec2(f,this.m_localAxisC),v=fs.mulSub(f,this.m_localAnchorC,this.m_lcC),g=fs.mulSub(p,this.m_localAnchorA,this.m_lcA);this.m_JvAC=y,this.m_JwC=ds.cross(v,y),this.m_JwA=ds.cross(g,y),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==vs.TYPE)this.m_JvBD=ds.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{y=fs.mulVec2(_,this.m_localAxisD);var b=fs.mulSub(_,this.m_localAnchorD,this.m_lcD),x=fs.mulSub(d,this.m_localAnchorB,this.m_lcB);this.m_JvBD=ds.mul(this.m_ratio,y),this.m_JwD=this.m_ratio*ds.cross(b,y),this.m_JwB=this.m_ratio*ds.cross(x,y),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.addMul(this.m_mA*this.m_impulse,this.m_JvAC),n+=this.m_iA*this.m_impulse*this.m_JwA,r.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,l.subMul(this.m_mC*this.m_impulse,this.m_JvAC),c-=this.m_iC*this.m_impulse*this.m_JwC,h.subMul(this.m_mD*this.m_impulse,this.m_JvBD),m-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(r),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(l),this.m_bodyC.c_velocity.w=c,this.m_bodyD.c_velocity.v.set(h),this.m_bodyD.c_velocity.w=m},xs.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,l=this.m_bodyD.c_velocity.w,c=ds.dot(this.m_JvAC,e)-ds.dot(this.m_JvAC,r)+ds.dot(this.m_JvBD,n)-ds.dot(this.m_JvBD,a);c+=this.m_JwA*i-this.m_JwC*s+(this.m_JwB*o-this.m_JwD*l);var u=-this.m_mass*c;this.m_impulse+=u,e.addMul(this.m_mA*u,this.m_JvAC),i+=this.m_iA*u*this.m_JwA,n.addMul(this.m_mB*u,this.m_JvBD),o+=this.m_iB*u*this.m_JwB,r.subMul(this.m_mC*u,this.m_JvAC),s-=this.m_iC*u*this.m_JwC,a.subMul(this.m_mD*u,this.m_JvBD),l-=this.m_iD*u*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=o,this.m_bodyC.c_velocity.v.set(r),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=l},xs.prototype.solvePositionConstraints=function(t){var e,i,n,o,r,s,a,l,c=this.m_bodyA.c_position.c,u=this.m_bodyA.c_position.a,h=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,p=this.m_bodyC.c_position.c,d=this.m_bodyC.c_position.a,f=this.m_bodyD.c_position.c,_=this.m_bodyD.c_position.a,y=fs.neo(u),v=fs.neo(m),g=fs.neo(d),b=fs.neo(_),x=0;if(this.m_type1==vs.TYPE)n=ds.zero(),r=1,a=1,x+=this.m_iA+this.m_iC,e=u-d-this.m_referenceAngleA;else{var $=fs.mulVec2(g,this.m_localAxisC),A=fs.mulSub(g,this.m_localAnchorC,this.m_lcC),w=fs.mulSub(y,this.m_localAnchorA,this.m_lcA);n=$,a=ds.cross(A,$),r=ds.cross(w,$),x+=this.m_mC+this.m_mA+this.m_iC*a*a+this.m_iA*r*r;var B=ds.sub(this.m_localAnchorC,this.m_lcC),C=fs.mulTVec2(g,ds.add(w,ds.sub(c,p)));e=ds.dot(ds.sub(C,B),this.m_localAxisC)}if(this.m_type2==vs.TYPE)o=ds.zero(),s=this.m_ratio,l=this.m_ratio,x+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=m-_-this.m_referenceAngleB;else{$=fs.mulVec2(b,this.m_localAxisD);var S=fs.mulSub(b,this.m_localAnchorD,this.m_lcD),E=fs.mulSub(v,this.m_localAnchorB,this.m_lcB);o=ds.mul(this.m_ratio,$),l=this.m_ratio*ds.cross(S,$),s=this.m_ratio*ds.cross(E,$),x+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var M=ds.sub(this.m_localAnchorD,this.m_lcD),T=fs.mulTVec2(b,ds.add(E,ds.sub(h,f)));i=ds.dot(T,this.m_localAxisD)-ds.dot(M,this.m_localAxisD)}var P=e+this.m_ratio*i-this.m_constant,z=0;return x>0&&(z=-P/x),c.addMul(this.m_mA*z,n),u+=this.m_iA*z*r,h.addMul(this.m_mB*z,o),m+=this.m_iB*z*s,p.subMul(this.m_mC*z,n),d-=this.m_iC*z*a,f.subMul(this.m_mD*z,o),_-=this.m_iD*z*l,this.m_bodyA.c_position.c.set(c),this.m_bodyA.c_position.a=u,this.m_bodyB.c_position.c.set(h),this.m_bodyB.c_position.a=m,this.m_bodyC.c_position.c.set(p),this.m_bodyC.c_position.a=d,this.m_bodyD.c_position.c.set(f),this.m_bodyD.c_position.a=_,0<ms.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var $s="undefined"!=typeof ASSERT&&ASSERT,As=Fs,ws=r,Bs=o,Cs=l.exports,Ss=_,Es=ne,Ms=K,Ts=pi,Ps=jt;Fs.TYPE="motor-joint",Ts.TYPES[Fs.TYPE]=Fs,Fs._super=Ts,Fs.prototype=Object.create(Fs._super.prototype);var zs={maxForce:1,maxTorque:1,correctionFactor:.3};function Fs(t,e,i){if(!(this instanceof Fs))return new Fs(t,e,i);t=Bs(t,zs),Ts.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Fs.TYPE,this.m_linearOffset=Cs.isFinite(t.linearOffset)?t.linearOffset:e.getLocalPoint(i.getPosition()),this.m_angularOffset=Cs.isFinite(t.angularOffset)?t.angularOffset:i.getAngle()-e.getAngle(),this.m_linearImpulse=Ss.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}Fs.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},Fs._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Ps,t.bodyA,e),t.bodyB=i(Ps,t.bodyB,e),new Fs(t)},Fs.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Fs.prototype.setMaxForce=function(t){$s&&ws.assert(Cs.isFinite(t)&&t>=0),this.m_maxForce=t},Fs.prototype.getMaxForce=function(){return this.m_maxForce},Fs.prototype.setMaxTorque=function(t){$s&&ws.assert(Cs.isFinite(t)&&t>=0),this.m_maxTorque=t},Fs.prototype.getMaxTorque=function(){return this.m_maxTorque},Fs.prototype.setCorrectionFactor=function(t){$s&&ws.assert(Cs.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},Fs.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},Fs.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},Fs.prototype.getLinearOffset=function(){return this.m_linearOffset},Fs.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},Fs.prototype.getAngularOffset=function(){return this.m_angularOffset},Fs.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},Fs.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},Fs.prototype.getReactionForce=function(t){return Ss.mul(t,this.m_linearImpulse)},Fs.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},Fs.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Ms.neo(i),u=Ms.neo(s);this.m_rA=Ms.mulVec2(c,Ss.neg(this.m_localCenterA)),this.m_rB=Ms.mulVec2(u,Ss.neg(this.m_localCenterB));var h=this.m_invMassA,m=this.m_invMassB,p=this.m_invIA,d=this.m_invIB,f=new Es;if(f.ex.x=h+m+p*this.m_rA.y*this.m_rA.y+d*this.m_rB.y*this.m_rB.y,f.ex.y=-p*this.m_rA.x*this.m_rA.y-d*this.m_rB.x*this.m_rB.y,f.ey.x=f.ex.y,f.ey.y=h+m+p*this.m_rA.x*this.m_rA.x+d*this.m_rB.x*this.m_rB.x,this.m_linearMass=f.getInverse(),this.m_angularMass=p+d,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=Ss.zero(),this.m_linearError.addCombine(1,r,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(Ms.mulVec2(c,this.m_linearOffset)),this.m_angularError=s-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var _=Ss.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.subMul(h,_),o-=p*(Ss.cross(this.m_rA,_)+this.m_angularImpulse),a.addMul(m,_),l+=d*(Ss.cross(this.m_rB,_)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},Fs.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=t.inv_dt,h=o-i+u*this.m_correctionFactor*this.m_angularError,m=-this.m_angularMass*h,p=this.m_angularImpulse,d=c*this.m_maxTorque;this.m_angularImpulse=Cs.clamp(this.m_angularImpulse+m,-d,d),i-=a*(m=this.m_angularImpulse-p),o+=l*m,(h=Ss.zero()).addCombine(1,n,1,Ss.cross(o,this.m_rB)),h.subCombine(1,e,1,Ss.cross(i,this.m_rA)),h.addMul(u*this.m_correctionFactor,this.m_linearError);m=Ss.neg(Es.mulVec2(this.m_linearMass,h)),p=Ss.clone(this.m_linearImpulse);this.m_linearImpulse.add(m);d=c*this.m_maxForce;this.m_linearImpulse.clamp(d),m=Ss.sub(this.m_linearImpulse,p),e.subMul(r,m),i-=a*Ss.cross(this.m_rA,m),n.addMul(s,m),o+=l*Ss.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Fs.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Is="undefined"!=typeof ASSERT&&ASSERT,ks=Hs,Vs=r,Ls=o,js=l.exports,Rs=_,Ds=ne,Os=K,qs=rt,Ns=pi,Us=jt;Hs.TYPE="mouse-joint",Ns.TYPES[Hs.TYPE]=Hs,Hs._super=Ns,Hs.prototype=Object.create(Hs._super.prototype);var Ws={maxForce:0,frequencyHz:5,dampingRatio:.7};function Hs(t,e,i,n){if(!(this instanceof Hs))return new Hs(t,e,i,n);t=Ls(t,Ws),Ns.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Hs.TYPE,Is&&Vs.assert(js.isFinite(t.maxForce)&&t.maxForce>=0),Is&&Vs.assert(js.isFinite(t.frequencyHz)&&t.frequencyHz>=0),Is&&Vs.assert(js.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=n?Rs.clone(n):t.target||Rs.zero(),this.m_localAnchorB=qs.mulTVec2(i.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=Rs.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=Rs.zero(),this.m_localCenterB=Rs.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new Ds,this.m_C=Rs.zero()}Hs.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},Hs._deserialize=function(t,e,i){(t=Object.assign({},t)).bodyA=i(Us,t.bodyA,e),t.bodyB=i(Us,t.bodyB,e),t.target=Rs(t.target);var n=new Hs(t);return t._localAnchorB&&(n.m_localAnchorB=t._localAnchorB),n},Hs.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=Rs.clone(t)},Hs.prototype.getTarget=function(){return this.m_targetA},Hs.prototype.setMaxForce=function(t){this.m_maxForce=t},Hs.getMaxForce=function(){return this.m_maxForce},Hs.prototype.setFrequency=function(t){this.m_frequencyHz=t},Hs.prototype.getFrequency=function(){return this.m_frequencyHz},Hs.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Hs.prototype.getDampingRatio=function(){return this.m_dampingRatio},Hs.prototype.getAnchorA=function(){return Rs.clone(this.m_targetA)},Hs.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Hs.prototype.getReactionForce=function(t){return Rs.mul(t,this.m_impulse)},Hs.prototype.getReactionTorque=function(t){return 0*t},Hs.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},Hs.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,i=this.m_bodyB.c_velocity,n=e.c,o=e.a,r=i.v,s=i.w,a=Os.neo(o),l=this.m_bodyB.getMass(),c=2*js.PI*this.m_frequencyHz,u=2*l*this.m_dampingRatio*c,h=l*(c*c),m=t.dt;Is&&Vs.assert(u+m*h>js.EPSILON),this.m_gamma=m*(u+m*h),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=m*h*this.m_gamma,this.m_rB=Os.mulVec2(a,Rs.sub(this.m_localAnchorB,this.m_localCenterB));var p=new Ds;p.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,p.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=p.getInverse(),this.m_C.set(n),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),s*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),r.addMul(this.m_invMassB,this.m_impulse),s+=this.m_invIB*Rs.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),i.v.set(r),i.w=s},Hs.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=Rs.clone(e.v),n=e.w,o=Rs.cross(n,this.m_rB);o.add(i),o.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),o.neg();var r=Ds.mulVec2(this.m_mass,o),s=Rs.clone(this.m_impulse);this.m_impulse.add(r);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),r=Rs.sub(this.m_impulse,s),i.addMul(this.m_invMassB,r),n+=this.m_invIB*Rs.cross(this.m_rB,r),e.v.set(i),e.w=n},Hs.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Gs="undefined"!=typeof ASSERT&&ASSERT,Ys=oa,Js=r,Zs=o,Xs=b,Ks=l.exports,Qs=_,ta=K,ea=pi,ia=jt;oa.TYPE="pulley-joint",oa.MIN_PULLEY_LENGTH=2,ea.TYPES[oa.TYPE]=oa,oa._super=ea,oa.prototype=Object.create(oa._super.prototype);var na={collideConnected:!0};function oa(t,e,i,n,o,r,s,a){if(!(this instanceof oa))return new oa(t,e,i,n,o,r,s,a);t=Zs(t,na),ea.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=oa.TYPE,this.m_groundAnchorA=n||(t.groundAnchorA||Qs.neo(-1,1)),this.m_groundAnchorB=o||(t.groundAnchorB||Qs.neo(1,1)),this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||Qs.neo(-1,0),this.m_localAnchorB=s?i.getLocalPoint(s):t.localAnchorB||Qs.neo(1,0),this.m_lengthA=Ks.isFinite(t.lengthA)?t.lengthA:Qs.distance(r,n),this.m_lengthB=Ks.isFinite(t.lengthB)?t.lengthB:Qs.distance(s,o),this.m_ratio=Ks.isFinite(a)?a:t.ratio,Gs&&Js.assert(a>Ks.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}oa.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},oa._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(ia,t.bodyA,e),t.bodyB=i(ia,t.bodyB,e),new oa(t)},oa.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},oa.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},oa.prototype.getLengthA=function(){return this.m_lengthA},oa.prototype.getLengthB=function(){return this.m_lengthB},oa.prototype.getRatio=function(){return this.m_ratio},oa.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return Qs.distance(t,e)},oa.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return Qs.distance(t,e)},oa.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},oa.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},oa.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},oa.prototype.getReactionForce=function(t){return Qs.mul(this.m_impulse,this.m_uB).mul(t)},oa.prototype.getReactionTorque=function(t){return 0},oa.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=ta.neo(i),u=ta.neo(s);this.m_rA=ta.mulVec2(c,Qs.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=ta.mulVec2(u,Qs.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=Qs.sub(Qs.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=Qs.sub(Qs.add(r,this.m_rB),this.m_groundAnchorB);var h=this.m_uA.length(),m=this.m_uB.length();h>10*Xs.linearSlop?this.m_uA.mul(1/h):this.m_uA.setZero(),m>10*Xs.linearSlop?this.m_uB.mul(1/m):this.m_uB.setZero();var p=Qs.cross(this.m_rA,this.m_uA),d=Qs.cross(this.m_rB,this.m_uB),f=this.m_invMassA+this.m_invIA*p*p,_=this.m_invMassB+this.m_invIB*d*d;if(this.m_mass=f+this.m_ratio*this.m_ratio*_,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var y=Qs.mul(-this.m_impulse,this.m_uA),v=Qs.mul(-this.m_ratio*this.m_impulse,this.m_uB);n.addMul(this.m_invMassA,y),o+=this.m_invIA*Qs.cross(this.m_rA,y),a.addMul(this.m_invMassB,v),l+=this.m_invIB*Qs.cross(this.m_rB,v)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},oa.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=Qs.add(e,Qs.cross(i,this.m_rA)),s=Qs.add(n,Qs.cross(o,this.m_rB)),a=-Qs.dot(this.m_uA,r)-this.m_ratio*Qs.dot(this.m_uB,s),l=-this.m_mass*a;this.m_impulse+=l;var c=Qs.mul(-l,this.m_uA),u=Qs.mul(-this.m_ratio*l,this.m_uB);e.addMul(this.m_invMassA,c),i+=this.m_invIA*Qs.cross(this.m_rA,c),n.addMul(this.m_invMassB,u),o+=this.m_invIB*Qs.cross(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},oa.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=ta.neo(i),s=ta.neo(o),a=ta.mulVec2(r,Qs.sub(this.m_localAnchorA,this.m_localCenterA)),l=ta.mulVec2(s,Qs.sub(this.m_localAnchorB,this.m_localCenterB)),c=Qs.sub(Qs.add(e,this.m_rA),this.m_groundAnchorA),u=Qs.sub(Qs.add(n,this.m_rB),this.m_groundAnchorB),h=c.length(),m=u.length();h>10*Xs.linearSlop?c.mul(1/h):c.setZero(),m>10*Xs.linearSlop?u.mul(1/m):u.setZero();var p=Qs.cross(a,c),d=Qs.cross(l,u),f=this.m_invMassA+this.m_invIA*p*p,_=this.m_invMassB+this.m_invIB*d*d,y=f+this.m_ratio*this.m_ratio*_;y>0&&(y=1/y);var v=this.m_constant-h-this.m_ratio*m,g=Ks.abs(v),b=-y*v,x=Qs.mul(-b,c),$=Qs.mul(-this.m_ratio*b,u);return e.addMul(this.m_invMassA,x),i+=this.m_invIA*Qs.cross(a,x),n.addMul(this.m_invMassB,$),o+=this.m_invIB*Qs.cross(l,$),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=o,g<Xs.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ra=da,sa=o,aa=b,la=l.exports,ca=_,ua=K,ha=pi,ma=jt;da.TYPE="rope-joint",ha.TYPES[da.TYPE]=da,da._super=ha,da.prototype=Object.create(da._super.prototype);var pa={maxLength:0};function da(t,e,i,n){if(!(this instanceof da))return new da(t,e,i,n);t=sa(t,pa),ha.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=da.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||ca.neo(-1,0),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||ca.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}da.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},da._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(ma,t.bodyA,e),t.bodyB=i(ma,t.bodyB,e),new da(t)},da.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},da.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},da.prototype.setMaxLength=function(t){this.m_maxLength=t},da.prototype.getMaxLength=function(){return this.m_maxLength},da.prototype.getLimitState=function(){return this.m_state},da.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},da.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},da.prototype.getReactionForce=function(t){return ca.mul(this.m_impulse,this.m_u).mul(t)},da.prototype.getReactionTorque=function(t){return 0},da.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=ua.neo(i),u=ua.neo(s);this.m_rA=ua.mulSub(c,this.m_localAnchorA,this.m_localCenterA),this.m_rB=ua.mulSub(u,this.m_localAnchorB,this.m_localCenterB),this.m_u=ca.zero(),this.m_u.addCombine(1,r,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var h=this.m_length-this.m_maxLength;if(this.m_state=h>0?2:0,!(this.m_length>aa.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var m=ca.cross(this.m_rA,this.m_u),p=ca.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,t.warmStarting){this.m_impulse*=t.dtRatio;var f=ca.mul(this.m_impulse,this.m_u);n.subMul(this.m_invMassA,f),o-=this.m_invIA*ca.cross(this.m_rA,f),a.addMul(this.m_invMassB,f),l+=this.m_invIB*ca.cross(this.m_rB,f)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},da.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=ca.addCross(e,i,this.m_rA),s=ca.addCross(n,o,this.m_rB),a=this.m_length-this.m_maxLength,l=ca.dot(this.m_u,ca.sub(s,r));a<0&&(l+=t.inv_dt*a);var c=-this.m_mass*l,u=this.m_impulse;this.m_impulse=la.min(0,this.m_impulse+c),c=this.m_impulse-u;var h=ca.mul(c,this.m_u);e.subMul(this.m_invMassA,h),i-=this.m_invIA*ca.cross(this.m_rA,h),n.addMul(this.m_invMassB,h),o+=this.m_invIB*ca.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},da.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=ua.neo(i),s=ua.neo(o),a=ua.mulSub(r,this.m_localAnchorA,this.m_localCenterA),l=ua.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=ca.zero();c.addCombine(1,n,1,l),c.subCombine(1,e,1,a);var u=c.normalize(),h=u-this.m_maxLength;h=la.clamp(h,0,aa.maxLinearCorrection);var m=-this.m_mass*h,p=ca.mul(m,c);return e.subMul(this.m_invMassA,p),i-=this.m_invIA*ca.cross(a,p),n.addMul(this.m_invMassB,p),o+=this.m_invIB*ca.cross(l,p),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,u-this.m_maxLength<aa.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var fa=Ca,_a=o,ya=b,va=l.exports,ga=_,ba=Ae,xa=Me,$a=K,Aa=pi,wa=jt;Ca.TYPE="weld-joint",Aa.TYPES[Ca.TYPE]=Ca,Ca._super=Aa,Ca.prototype=Object.create(Ca._super.prototype);var Ba={frequencyHz:0,dampingRatio:0};function Ca(t,e,i,n){if(!(this instanceof Ca))return new Ca(t,e,i,n);t=_a(t,Ba),Aa.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Ca.TYPE,this.m_localAnchorA=ga.clone(n?e.getLocalPoint(n):t.localAnchorA||ga.zero()),this.m_localAnchorB=ga.clone(n?i.getLocalPoint(n):t.localAnchorB||ga.zero()),this.m_referenceAngle=va.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=ba(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new xa}Ca.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},Ca._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(wa,t.bodyA,e),t.bodyB=i(wa,t.bodyB,e),new Ca(t)},Ca.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Ca.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Ca.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Ca.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Ca.prototype.setFrequency=function(t){this.m_frequencyHz=t},Ca.prototype.getFrequency=function(){return this.m_frequencyHz},Ca.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Ca.prototype.getDampingRatio=function(){return this.m_dampingRatio},Ca.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Ca.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Ca.prototype.getReactionForce=function(t){return ga.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},Ca.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},Ca.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=$a.neo(e),l=$a.neo(o);this.m_rA=$a.mulVec2(a,ga.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=$a.mulVec2(l,ga.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new xa;if(p.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,p.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,p.ez.x=-this.m_rA.y*h-this.m_rB.y*m,p.ex.y=p.ey.x,p.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,p.ez.y=this.m_rA.x*h+this.m_rB.x*m,p.ex.z=p.ez.x,p.ey.z=p.ez.y,p.ez.z=h+m,this.m_frequencyHz>0){p.getInverse22(this.m_mass);var d=h+m,f=d>0?1/d:0,_=o-e-this.m_referenceAngle,y=2*va.PI*this.m_frequencyHz,v=2*f*this.m_dampingRatio*y,g=f*y*y,b=t.dt;this.m_gamma=b*(v+b*g),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=_*b*g*this.m_gamma,d+=this.m_gamma,this.m_mass.ez.z=0!=d?1/d:0}else 0==p.ez.z?(p.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(p.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var x=ga.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(c,x),n-=h*(ga.cross(this.m_rA,x)+this.m_impulse.z),r.addMul(u,x),s+=m*(ga.cross(this.m_rB,x)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=s},Ca.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var c=o-i,u=-this.m_mass.ez.z*(c+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,i-=a*u,o+=l*u,(p=ga.zero()).addCombine(1,n,1,ga.cross(o,this.m_rB)),p.subCombine(1,e,1,ga.cross(i,this.m_rA));var h=ga.neg(xa.mulVec2(this.m_mass,p));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y;var m=ga.clone(h);e.subMul(r,m),i-=a*ga.cross(this.m_rA,m),n.addMul(s,m),o+=l*ga.cross(this.m_rB,m)}else{var p;(p=ga.zero()).addCombine(1,n,1,ga.cross(o,this.m_rB)),p.subCombine(1,e,1,ga.cross(i,this.m_rA));c=o-i;var d=ba(p.x,p.y,c),f=ba.neg(xa.mulVec3(this.m_mass,d));this.m_impulse.add(f);m=ga.neo(f.x,f.y);e.subMul(r,m),i-=a*(ga.cross(this.m_rA,m)+f.z),n.addMul(s,m),o+=l*(ga.cross(this.m_rB,m)+f.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Ca.prototype.solvePositionConstraints=function(t){var e,i,n=this.m_bodyA.c_position.c,o=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=$a.neo(o),l=$a.neo(s),c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=$a.mulVec2(a,ga.sub(this.m_localAnchorA,this.m_localCenterA)),d=$a.mulVec2(l,ga.sub(this.m_localAnchorB,this.m_localCenterB)),f=new xa;if(f.ex.x=c+u+p.y*p.y*h+d.y*d.y*m,f.ey.x=-p.y*p.x*h-d.y*d.x*m,f.ez.x=-p.y*h-d.y*m,f.ex.y=f.ey.x,f.ey.y=c+u+p.x*p.x*h+d.x*d.x*m,f.ez.y=p.x*h+d.x*m,f.ex.z=f.ez.x,f.ey.z=f.ez.y,f.ez.z=h+m,this.m_frequencyHz>0){(y=ga.zero()).addCombine(1,r,1,d),y.subCombine(1,n,1,p),e=y.length(),i=0;var _=ga.neg(f.solve22(y));n.subMul(c,_),o-=h*ga.cross(p,_),r.addMul(u,_),s+=m*ga.cross(d,_)}else{var y;(y=ga.zero()).addCombine(1,r,1,d),y.subCombine(1,n,1,p);var v=s-o-this.m_referenceAngle;e=y.length(),i=va.abs(v);var g=ba(y.x,y.y,v),b=ba();if(f.ez.z>0)b=ba.neg(f.solve33(g));else{var x=ga.neg(f.solve22(y));b.set(x.x,x.y,0)}_=ga.neo(b.x,b.y);n.subMul(c,_),o-=h*(ga.cross(p,_)+b.z),r.addMul(u,_),s+=m*(ga.cross(d,_)+b.z)}return this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=o,this.m_bodyB.c_position.c=r,this.m_bodyB.c_position.a=s,e<=ya.linearSlop&&i<=ya.angularSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Sa=La,Ea=o,Ma=b,Ta=l.exports,Pa=_,za=K,Fa=pi,Ia=jt;La.TYPE="wheel-joint",Fa.TYPES[La.TYPE]=La,La._super=Fa,La.prototype=Object.create(La._super.prototype);var ka,Va={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function La(t,e,i,n,o){if(!(this instanceof La))return new La(t,e,i,n,o);t=Ea(t,Va),Fa.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=La.TYPE,this.m_localAnchorA=Pa.clone(n?e.getLocalPoint(n):t.localAnchorA||Pa.zero()),this.m_localAnchorB=Pa.clone(n?i.getLocalPoint(n):t.localAnchorB||Pa.zero()),this.m_localXAxisA=Pa.clone(o?e.getLocalVector(o):t.localAxisA||t.localAxis||Pa.neo(1,0)),this.m_localYAxisA=Pa.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=Pa.zero(),this.m_ay=Pa.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}La.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},La._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Ia,t.bodyA,e),t.bodyB=i(Ia,t.bodyB,e),new La(t)},La.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(Pa.cross(1,t.localAxisA)))},La.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},La.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},La.prototype.getLocalAxisA=function(){return this.m_localXAxisA},La.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),n=e.getWorldPoint(this.m_localAnchorB),o=Pa.sub(n,i),r=t.getWorldVector(this.m_localXAxisA);return Pa.dot(o,r)},La.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},La.prototype.isMotorEnabled=function(){return this.m_enableMotor},La.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},La.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},La.prototype.getMotorSpeed=function(){return this.m_motorSpeed},La.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},La.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},La.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},La.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},La.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},La.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},La.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},La.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},La.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},La.prototype.getReactionForce=function(t){return Pa.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},La.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},La.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,r=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,a=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,u=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,p=za.neo(s),d=za.neo(u),f=za.mulVec2(p,Pa.sub(this.m_localAnchorA,this.m_localCenterA)),_=za.mulVec2(d,Pa.sub(this.m_localAnchorB,this.m_localCenterB));if((b=Pa.zero()).addCombine(1,c,1,_),b.subCombine(1,r,1,f),this.m_ay=za.mulVec2(p,this.m_localYAxisA),this.m_sAy=Pa.cross(Pa.add(b,f),this.m_ay),this.m_sBy=Pa.cross(_,this.m_ay),this.m_mass=e+i+n*this.m_sAy*this.m_sAy+o*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=za.mulVec2(p,this.m_localXAxisA),this.m_sAx=Pa.cross(Pa.add(b,f),this.m_ax),this.m_sBx=Pa.cross(_,this.m_ax);var y=e+i+n*this.m_sAx*this.m_sAx+o*this.m_sBx*this.m_sBx;if(y>0){this.m_springMass=1/y;var v=Pa.dot(b,this.m_ax),g=2*Ta.PI*this.m_frequencyHz,b=2*this.m_springMass*this.m_dampingRatio*g,x=this.m_springMass*g*g,$=t.dt;this.m_gamma=$*(b+$*x),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=v*$*x*this.m_gamma,this.m_springMass=y+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=n+o,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var A=Pa.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),w=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,B=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;a.subMul(this.m_invMassA,A),l-=this.m_invIA*w,h.addMul(this.m_invMassB,A),m+=this.m_invIB*B}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=m},La.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,r=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Pa.dot(this.m_ax,a)-Pa.dot(this.m_ax,r)+this.m_sBx*l-this.m_sAx*s,u=-this.m_springMass*(c+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;var h=Pa.mul(u,this.m_ax),m=u*this.m_sAx,p=u*this.m_sBx;r.subMul(e,h),s-=n*m,a.addMul(i,h);c=(l+=o*p)-s-this.m_motorSpeed,u=-this.m_motorMass*c;var d=this.m_motorImpulse,f=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=Ta.clamp(this.m_motorImpulse+u,-f,f),s-=n*(u=this.m_motorImpulse-d),l+=o*u;c=Pa.dot(this.m_ay,a)-Pa.dot(this.m_ay,r)+this.m_sBy*l-this.m_sAy*s,u=-this.m_mass*c;this.m_impulse+=u;h=Pa.mul(u,this.m_ay),m=u*this.m_sAy,p=u*this.m_sBy;r.subMul(e,h),s-=n*m,a.addMul(i,h),l+=o*p,this.m_bodyA.c_velocity.v.set(r),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},La.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=za.neo(i),s=za.neo(o),a=za.mulVec2(r,Pa.sub(this.m_localAnchorA,this.m_localCenterA)),l=za.mulVec2(s,Pa.sub(this.m_localAnchorB,this.m_localCenterB)),c=Pa.zero();c.addCombine(1,n,1,l),c.subCombine(1,e,1,a);var u,h=za.mulVec2(r,this.m_localYAxisA),m=Pa.cross(Pa.add(c,a),h),p=Pa.cross(l,h),d=Pa.dot(c,h),f=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;u=0!=f?-d/f:0;var _=Pa.mul(u,h),y=u*m,v=u*p;return e.subMul(this.m_invMassA,_),i-=this.m_invIA*y,n.addMul(this.m_invMassB,_),o+=this.m_invIB*v,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,Ta.abs(d)<=Ma.linearSlop},(ka=Bn).internal={},ka.Serializer=n.exports,ka.Math=l.exports,ka.Vec2=_,ka.Vec3=Ae,ka.Mat22=ne,ka.Mat33=Me,ka.Transform=rt,ka.Rot=K,ka.AABB=C,ka.Shape=wt,ka.Fixture=St,ka.Body=jt,ka.Contact=ri,ka.Joint=pi,ka.World=tn,ka.Circle=Sn,ka.Edge=In,ka.Polygon=qn,ka.Chain=Kn,ka.Box=so,ka.internal.CollidePolygons=ko,ka.DistanceJoint=ur,ka.FrictionJoint=xr,ka.GearJoint=cs,ka.MotorJoint=As,ka.MouseJoint=ks,ka.PrismaticJoint=Yr,ka.PulleyJoint=Ys,ka.RevoluteJoint=Fr,ka.RopeJoint=ra,ka.WeldJoint=fa,ka.WheelJoint=Sa,ka.Settings=b,ka.internal.Sweep=ht,ka.internal.stats=be,ka.internal.Manifold=ae.exports,ka.internal.Distance=ge.exports,ka.internal.TimeOfImpact=yi.exports,ka.internal.DynamicTree=k,ka.internal.Settings=ka.Settings;export{i as S,e as a,wn as f,t as j,Bn as l,An as t};
