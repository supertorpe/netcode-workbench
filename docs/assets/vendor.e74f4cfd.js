var t={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var e=function(t,e){null==t&&(t={});var i=Object.assign({},t);for(var n in e)e.hasOwnProperty(n)&&void 0===t[n]&&(i[n]=e[n]);if("function"==typeof Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),r=0;r<o.length;r++){var s=o[r];e.propertyIsEnumerable(s)&&void 0===t[n]&&(i[s]=e[s])}return i},i={},n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;i.debug=function(){n&&console.log.apply(console,arguments)},i.assert=function(t,e,i){if(o&&!t)throw i&&console.log(i),new Error(e)};var r={exports:{}},s="undefined"!=typeof DEBUG&&DEBUG,a="undefined"!=typeof ASSERT&&ASSERT,l=i,c=Math,u=r.exports=Object.create(c);u.EPSILON=1e-9,u.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},u.assert=function(t){if(a&&!u.isFinite(t))throw s&&l.debug(t),new Error("Invalid Number!")},u.invSqrt=function(t){return 1/c.sqrt(t)},u.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},u.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},u.mod=function(t,e,i){return void 0===e?(i=1,e=0):void 0===i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)},u.clamp=function(t,e,i){return t<e?e:t>i?i:t},u.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:c.random()*(e-t)+t};var h="undefined"!=typeof DEBUG&&DEBUG,m="undefined"!=typeof ASSERT&&ASSERT,p=_,d=i,f=r.exports;function _(t,e){if(!(this instanceof _))return new _(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),m&&_.assert(this)}_.prototype._serialize=function(){return{x:this.x,y:this.y}},_._deserialize=function(t){var e=Object.create(_.prototype);return e.x=t.x,e.y=t.y,e},_.zero=function(){var t=Object.create(_.prototype);return t.x=0,t.y=0,t},_.neo=function(t,e){var i=Object.create(_.prototype);return i.x=t,i.y=e,i},_.clone=function(t){return m&&_.assert(t),_.neo(t.x,t.y)},_.prototype.toString=function(){return JSON.stringify(this)},_.isValid=function(t){return t&&f.isFinite(t.x)&&f.isFinite(t.y)},_.assert=function(t){if(m&&!_.isValid(t))throw h&&d.debug(t),new Error("Invalid Vec2!")},_.prototype.clone=function(){return _.clone(this)},_.prototype.setZero=function(){return this.x=0,this.y=0,this},_.prototype.set=function(t,e){return"object"==typeof t?(m&&_.assert(t),this.x=t.x,this.y=t.y):(m&&f.assert(t),m&&f.assert(e),this.x=t,this.y=e),this},_.prototype.wSet=function(t,e,i,n){return void 0!==i||void 0!==n?this.setCombine(t,e,i,n):this.setMul(t,e)},_.prototype.setCombine=function(t,e,i,n){m&&f.assert(t),m&&_.assert(e),m&&f.assert(i),m&&_.assert(n);var o=t*e.x+i*n.x,r=t*e.y+i*n.y;return this.x=o,this.y=r,this},_.prototype.setMul=function(t,e){m&&f.assert(t),m&&_.assert(e);var i=t*e.x,n=t*e.y;return this.x=i,this.y=n,this},_.prototype.add=function(t){return m&&_.assert(t),this.x+=t.x,this.y+=t.y,this},_.prototype.wAdd=function(t,e,i,n){return void 0!==i||void 0!==n?this.addCombine(t,e,i,n):this.addMul(t,e)},_.prototype.addCombine=function(t,e,i,n){m&&f.assert(t),m&&_.assert(e),m&&f.assert(i),m&&_.assert(n);var o=t*e.x+i*n.x,r=t*e.y+i*n.y;return this.x+=o,this.y+=r,this},_.prototype.addMul=function(t,e){m&&f.assert(t),m&&_.assert(e);var i=t*e.x,n=t*e.y;return this.x+=i,this.y+=n,this},_.prototype.wSub=function(t,e,i,n){return void 0!==i||void 0!==n?this.subCombine(t,e,i,n):this.subMul(t,e)},_.prototype.subCombine=function(t,e,i,n){m&&f.assert(t),m&&_.assert(e),m&&f.assert(i),m&&_.assert(n);var o=t*e.x+i*n.x,r=t*e.y+i*n.y;return this.x-=o,this.y-=r,this},_.prototype.subMul=function(t,e){m&&f.assert(t),m&&_.assert(e);var i=t*e.x,n=t*e.y;return this.x-=i,this.y-=n,this},_.prototype.sub=function(t){return m&&_.assert(t),this.x-=t.x,this.y-=t.y,this},_.prototype.mul=function(t){return m&&f.assert(t),this.x*=t,this.y*=t,this},_.prototype.length=function(){return _.lengthOf(this)},_.prototype.lengthSquared=function(){return _.lengthSquared(this)},_.prototype.normalize=function(){var t=this.length();if(t<f.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},_.lengthOf=function(t){return m&&_.assert(t),f.sqrt(t.x*t.x+t.y*t.y)},_.lengthSquared=function(t){return m&&_.assert(t),t.x*t.x+t.y*t.y},_.distance=function(t,e){m&&_.assert(t),m&&_.assert(e);var i=t.x-e.x,n=t.y-e.y;return f.sqrt(i*i+n*n)},_.distanceSquared=function(t,e){m&&_.assert(t),m&&_.assert(e);var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},_.areEqual=function(t,e){return m&&_.assert(t),m&&_.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},_.skew=function(t){return m&&_.assert(t),_.neo(-t.y,t.x)},_.dot=function(t,e){return m&&_.assert(t),m&&_.assert(e),t.x*e.x+t.y*e.y},_.cross=function(t,e){return"number"==typeof e?(m&&_.assert(t),m&&f.assert(e),_.neo(e*t.y,-e*t.x)):"number"==typeof t?(m&&f.assert(t),m&&_.assert(e),_.neo(-t*e.y,t*e.x)):(m&&_.assert(t),m&&_.assert(e),t.x*e.y-t.y*e.x)},_.addCross=function(t,e,i){return"number"==typeof i?(m&&_.assert(e),m&&f.assert(i),_.neo(i*e.y+t.x,-i*e.x+t.y)):"number"==typeof e?(m&&f.assert(e),m&&_.assert(i),_.neo(-e*i.y+t.x,e*i.x+t.y)):void(m&&d.assert(!1))},_.add=function(t,e){return m&&_.assert(t),m&&_.assert(e),_.neo(t.x+e.x,t.y+e.y)},_.wAdd=function(t,e,i,n){return void 0!==i||void 0!==n?_.combine(t,e,i,n):_.mul(t,e)},_.combine=function(t,e,i,n){return _.zero().setCombine(t,e,i,n)},_.sub=function(t,e){return m&&_.assert(t),m&&_.assert(e),_.neo(t.x-e.x,t.y-e.y)},_.mul=function(t,e){return"object"==typeof t?(m&&_.assert(t),m&&f.assert(e),_.neo(t.x*e,t.y*e)):"object"==typeof e?(m&&f.assert(t),m&&_.assert(e),_.neo(t*e.x,t*e.y)):void 0},_.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},_.neg=function(t){return m&&_.assert(t),_.neo(-t.x,-t.y)},_.abs=function(t){return m&&_.assert(t),_.neo(f.abs(t.x),f.abs(t.y))},_.mid=function(t,e){return m&&_.assert(t),m&&_.assert(e),_.neo(.5*(t.x+e.x),.5*(t.y+e.y))},_.upper=function(t,e){return m&&_.assert(t),m&&_.assert(e),_.neo(f.max(t.x,e.x),f.max(t.y,e.y))},_.lower=function(t,e){return m&&_.assert(t),m&&_.assert(e),_.neo(f.min(t.x,e.x),f.min(t.y,e.y))},_.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=f.invSqrt(e);this.x*=i*t,this.y*=i*t}return this},_.clamp=function(t,e){return(t=_.neo(t.x,t.y)).clamp(e),t},_.scaleFn=function(t,e){return function(i){return _.neo(i.x*t,i.y*e)}},_.translateFn=function(t,e){return function(i){return _.neo(i.x+t,i.y+e)}};var y={};!function(t){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var e=y;e.maxManifoldPoints=2,e.maxPolygonVertices=12,e.aabbExtension=.1,e.aabbMultiplier=2,e.linearSlop=.005,e.linearSlopSquared=e.linearSlop*e.linearSlop,e.angularSlop=2/180*Math.PI,e.polygonRadius=2*e.linearSlop,e.maxSubSteps=8,e.maxTOIContacts=32,e.maxTOIIterations=20,e.maxDistnceIterations=20,e.velocityThreshold=1,e.maxLinearCorrection=.2,e.maxAngularCorrection=8/180*Math.PI,e.maxTranslation=2,e.maxTranslationSquared=e.maxTranslation*e.maxTranslation,e.maxRotation=.5*Math.PI,e.maxRotationSquared=e.maxRotation*e.maxRotation,e.baumgarte=.2,e.toiBaugarte=.75,e.timeToSleep=.5,e.linearSleepTolerance=.01,e.linearSleepToleranceSqr=Math.pow(e.linearSleepTolerance,2),e.angularSleepTolerance=2/180*Math.PI,e.angularSleepToleranceSqr=Math.pow(e.angularSleepTolerance,2)}();var v="undefined"!=typeof DEBUG&&DEBUG,g="undefined"!=typeof ASSERT&&ASSERT,b=i,x=r.exports,$=p,A=w;function w(t,e){if(!(this instanceof w))return new w(t,e);this.lowerBound=$.zero(),this.upperBound=$.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e?this.upperBound.set(e):"object"==typeof t&&this.upperBound.set(t)}w.prototype.isValid=function(){return w.isValid(this)},w.isValid=function(t){var e=$.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&$.isValid(t.lowerBound)&&$.isValid(t.upperBound)},w.assert=function(t){if(g&&!w.isValid(t))throw v&&b.debug(t),new Error("Invalid AABB!")},w.prototype.getCenter=function(){return $.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},w.prototype.getExtents=function(){return $.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},w.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},w.prototype.combine=function(t,e){e=e||this;var i=t.lowerBound,n=t.upperBound,o=e.lowerBound,r=e.upperBound,s=x.min(i.x,o.x),a=x.min(i.y,o.y),l=x.max(r.x,n.x),c=x.max(r.y,n.y);this.lowerBound.set(s,a),this.upperBound.set(l,c)},w.prototype.combinePoints=function(t,e){this.lowerBound.set(x.min(t.x,e.x),x.min(t.y,e.y)),this.upperBound.set(x.max(t.x,e.x),x.max(t.y,e.y))},w.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},w.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},w.prototype.extend=function(t){return w.extend(this,t),this},w.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},w.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,n=t.lowerBound.x-e.upperBound.x,o=e.lowerBound.y-t.upperBound.y,r=t.lowerBound.y-e.upperBound.y;return!(i>0||o>0||n>0||r>0)},w.areEqual=function(t,e){return $.areEqual(t.lowerBound,e.lowerBound)&&$.areEqual(t.upperBound,e.upperBound)},w.diff=function(t,e){var i=x.max(0,x.min(t.upperBound.x,e.upperBound.x)-x.max(e.lowerBound.x,t.lowerBound.x)),n=x.max(0,x.min(t.upperBound.y,e.upperBound.y)-x.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*n},w.prototype.rayCast=function(t,e){for(var i=-1/0,n=1/0,o=e.p1,r=$.sub(e.p2,e.p1),s=$.abs(r),a=$.zero(),l="x";null!==l;l="x"===l?"y":null)if(s.x<x.EPSILON){if(o[l]<this.lowerBound[l]||this.upperBound[l]<o[l])return!1}else{var c=1/r[l],u=(this.lowerBound[l]-o[l])*c,h=(this.upperBound[l]-o[l])*c,m=-1;if(u>h){var p=u;u=h,h=p,m=1}if(u>i&&(a.setZero(),a[l]=m,i=u),i>(n=x.min(n,h)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=a,!0)},w.prototype.toString=function(){return JSON.stringify(this)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,"undefined"!=typeof DEBUG&&DEBUG;var B="undefined"!=typeof ASSERT&&ASSERT,C=y,S=i,E=function(t){var e=[],i=t.max||1/0,n=t.create,o=t.allocate,r=t.release,s=t.discard,a=0,l=0,c=0,u=0;this.max=function(t){return"number"==typeof t?(i=t,this):i},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof n?n():{}),l++,"function"==typeof o&&o(t),t},this.release=function(t){e.length<i?(c++,"function"==typeof r&&r(t),e.push(t)):(u++,"function"==typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+l+" <"+c+" -"+u+" ="+e.length+"/"+i}},M=p,T=r.exports,P=A,z=I;function F(t){this.id=t,this.aabb=new P,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function I(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new E({create:function(){return new F}})}F.prototype.isLeaf=function(){return null==this.child1},I.prototype.getUserData=function(t){var e=this.m_nodes[t];return B&&S.assert(!!e),e.userData},I.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return B&&S.assert(!!e),e.aabb},I.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},I.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},I.prototype.createProxy=function(t,e){B&&S.assert(P.isValid(t));var i=this.allocateNode();return i.aabb.set(t),P.extend(i.aabb,C.aabbExtension),i.userData=e,i.height=0,this.insertLeaf(i),i.id},I.prototype.destroyProxy=function(t){var e=this.m_nodes[t];B&&S.assert(!!e),B&&S.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},I.prototype.moveProxy=function(t,e,i){B&&S.assert(P.isValid(e)),B&&S.assert(!i||M.isValid(i));var n=this.m_nodes[t];return B&&S.assert(!!n),B&&S.assert(n.isLeaf()),!n.aabb.contains(e)&&(this.removeLeaf(n),n.aabb.set(e),e=n.aabb,P.extend(e,C.aabbExtension),i.x<0?e.lowerBound.x+=i.x*C.aabbMultiplier:e.upperBound.x+=i.x*C.aabbMultiplier,i.y<0?e.lowerBound.y+=i.y*C.aabbMultiplier:e.upperBound.y+=i.y*C.aabbMultiplier,this.insertLeaf(n),!0)},I.prototype.insertLeaf=function(t){if(B&&S.assert(P.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,i=this.m_root;0==i.isLeaf();){var n=i.child1,o=i.child2,r=i.aabb.getPerimeter(),s=new P;s.combine(i.aabb,e);var a,l,c=s.getPerimeter(),u=2*c,h=2*(c-r);if(n.isLeaf()){(p=new P).combine(e,n.aabb),a=p.getPerimeter()+h}else{(p=new P).combine(e,n.aabb);var m=n.aabb.getPerimeter();a=p.getPerimeter()-m+h}if(o.isLeaf()){(p=new P).combine(e,o.aabb),l=p.getPerimeter()+h}else{var p;(p=new P).combine(e,o.aabb);m=o.aabb.getPerimeter();l=p.getPerimeter()-m+h}if(u<a&&u<l)break;i=a<l?n:o}var d=i,f=d.parent,_=this.allocateNode();for(_.parent=f,_.userData=null,_.aabb.combine(e,d.aabb),_.height=d.height+1,null!=f?(f.child1==d?f.child1=_:f.child2=_,_.child1=d,_.child2=t,d.parent=_,t.parent=_):(_.child1=d,_.child2=t,d.parent=_,t.parent=_,this.m_root=_),i=t.parent;null!=i;){n=(i=this.balance(i)).child1,o=i.child2;B&&S.assert(null!=n),B&&S.assert(null!=o),i.height=1+T.max(n.height,o.height),i.aabb.combine(n.aabb,o.aabb),i=i.parent}},I.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=n){n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.freeNode(i);for(var o=n;null!=o;){var r=(o=this.balance(o)).child1,s=o.child2;o.aabb.combine(r.aabb,s.aabb),o.height=1+T.max(r.height,s.height),o=o.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},I.prototype.balance=function(t){B&&S.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var i=e.child1,n=e.child2,o=n.height-i.height;if(o>1){var r=n.child1,s=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==t?n.parent.child1=n:n.parent.child2=n:this.m_root=n,r.height>s.height?(n.child2=r,e.child2=s,s.parent=e,e.aabb.combine(i.aabb,s.aabb),n.aabb.combine(e.aabb,r.aabb),e.height=1+T.max(i.height,s.height),n.height=1+T.max(e.height,r.height)):(n.child2=s,e.child2=r,r.parent=e,e.aabb.combine(i.aabb,r.aabb),n.aabb.combine(e.aabb,s.aabb),e.height=1+T.max(i.height,r.height),n.height=1+T.max(e.height,s.height)),n}if(o<-1){var a=i.child1,l=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.m_root=i,a.height>l.height?(i.child2=a,e.child1=l,l.parent=e,e.aabb.combine(n.aabb,l.aabb),i.aabb.combine(e.aabb,a.aabb),e.height=1+T.max(n.height,l.height),i.height=1+T.max(e.height,a.height)):(i.child2=l,e.child1=a,a.parent=e,e.aabb.combine(n.aabb,a.aabb),i.aabb.combine(e.aabb,l.aabb),e.height=1+T.max(n.height,a.height),i.height=1+T.max(e.height,l.height)),i}return e},I.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},I.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,n=L.allocate().preorder(this.m_root);t=n.next();)t.height<0||(i+=t.aabb.getPerimeter());return L.release(n),i/e},I.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=this.computeHeight(e.child1.id),n=this.computeHeight(e.child2.id);return 1+T.max(i,n)},I.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&B&&S.assert(null==t.parent);var e=t.child1,i=t.child2;if(t.isLeaf())return B&&S.assert(null==e),B&&S.assert(null==i),void(B&&S.assert(0==t.height));B&&S.assert(e.parent==t),B&&S.assert(i.parent==t),this.validateStructure(e),this.validateStructure(i)}},I.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,i=t.child2;if(t.isLeaf())return B&&S.assert(null==e),B&&S.assert(null==i),void(B&&S.assert(0==t.height));var n=e.height,o=i.height,r=1+T.max(n,o);B&&S.assert(t.height==r);var s=new P;s.combine(e.aabb,i.aabb),B&&S.assert(P.areEqual(s,t.aabb)),this.validateMetrics(e),this.validateMetrics(i)}},I.prototype.validate=function(){this.validateStructure(this.m_root),this.validateMetrics(this.m_root),B&&S.assert(this.getHeight()==this.computeHeight())},I.prototype.getMaxBalance=function(){for(var t,e=0,i=L.allocate().preorder(this.m_root);t=i.next();)if(!(t.height<=1)){B&&S.assert(0==t.isLeaf());var n=T.abs(t.child2.height-t.child1.height);e=T.max(e,n)}return L.release(i),e},I.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,n=L.allocate().preorder(this.m_root);t=n.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(L.release(n);i>1;){for(var o=1/0,r=-1,s=-1,a=0;a<i;++a)for(var l=e[a].aabb,c=a+1;c<i;++c){var u=e[c].aabb,h=new P;h.combine(l,u);var m=h.getPerimeter();m<o&&(r=a,s=c,o=m)}var p=e[r],d=e[s],f=this.allocateNode();f.child1=p,f.child2=d,f.height=1+T.max(p.height,d.height),f.aabb.combine(p.aabb,d.aabb),f.parent=null,p.parent=f,d.parent=f,e[s]=e[i-1],e[r]=f,--i}this.m_root=e[0],this.validate()},I.prototype.shiftOrigin=function(t){for(var e,i=L.allocate().preorder(this.m_root);e=i.next();){var n=e.aabb;n.lowerBound.x-=t.x,n.lowerBound.y-=t.y,n.upperBound.x-=t.x,n.upperBound.y-=t.y}L.release(i)},I.prototype.query=function(t,e){B&&S.assert("function"==typeof e);var i=V.allocate();for(i.push(this.m_root);i.length>0;){var n=i.pop();if(null!=n)if(P.testOverlap(n.aabb,t))if(n.isLeaf()){if(0==e(n.id))return}else i.push(n.child1),i.push(n.child2)}V.release(i)},I.prototype.rayCast=function(t,e){B&&S.assert("function"==typeof e);var i=t.p1,n=t.p2,o=M.sub(n,i);B&&S.assert(o.lengthSquared()>0),o.normalize();var r=M.cross(1,o),s=M.abs(r),a=t.maxFraction,l=new P,c=M.combine(1-a,i,a,n);l.combinePoints(i,c);var u=V.allocate(),h=k.allocate();for(u.push(this.m_root);u.length>0;){var m=u.pop();if(null!=m&&0!=P.testOverlap(m.aabb,l)){var p=m.aabb.getCenter(),d=m.aabb.getExtents();if(!(T.abs(M.dot(r,M.sub(i,p)))-M.dot(s,d)>0))if(m.isLeaf()){h.p1=M.clone(t.p1),h.p2=M.clone(t.p2),h.maxFraction=a;var f=e(h,m.id);if(0==f)return;f>0&&(a=f,c=M.combine(1-a,i,a,n),l.combinePoints(i,c))}else u.push(m.child1),u.push(m.child2)}}V.release(u),k.release(h)};var k=new E({create:function(){return{}},release:function(t){}}),V=new E({create:function(){return[]},release:function(t){t.length=0}}),L=new E({create:function(){return new j},release:function(t){t.close()}});function j(){var t=[],e=[];return{preorder:function(i){return t.length=0,t.push(i),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var i=t.length-1,n=t[i];if(0===e[i])return e[i]=1,n;if(1===e[i]&&(e[i]=2,n.child1))return t.push(n.child1),e.push(1),n.child1;if(2===e[i]&&(e[i]=3,n.child2))return t.push(n.child2),e.push(1),n.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}"undefined"!=typeof DEBUG&&DEBUG;var R="undefined"!=typeof ASSERT&&ASSERT,D=i,O=r.exports,q=A,N=z,U=W;function W(){this.m_tree=new N,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}W.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},W.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),n=this.m_tree.getFatAABB(e);return q.testOverlap(i,n)},W.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},W.prototype.getProxyCount=function(){return this.m_proxyCount},W.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},W.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},W.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},W.prototype.query=function(t,e){this.m_tree.query(t,e)},W.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},W.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},W.prototype.createProxy=function(t,e){R&&D.assert(q.isValid(t));var i=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(i),i},W.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},W.prototype.moveProxy=function(t,e,i){R&&D.assert(q.isValid(e)),this.m_tree.moveProxy(t,e,i)&&this.bufferMove(t)},W.prototype.touchProxy=function(t){this.bufferMove(t)},W.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},W.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},W.prototype.updatePairs=function(t){for(R&&D.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},W.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=O.min(t,this.m_queryProxyId),i=O.max(t,this.m_queryProxyId),n=this.m_tree.getUserData(e),o=this.m_tree.getUserData(i);return this.m_callback(n,o),!0};var H={exports:{}},G="undefined"!=typeof DEBUG&&DEBUG,Y="undefined"!=typeof ASSERT&&ASSERT,J=Q,Z=i,X=p,K=r.exports;function Q(t){if(!(this instanceof Q))return new Q(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}Q.neo=function(t){var e=Object.create(Q.prototype);return e.setAngle(t),e},Q.clone=function(t){Y&&Q.assert(t);var e=Object.create(Q.prototype);return e.s=t.s,e.c=t.c,e},Q.identity=function(){var t=Object.create(Q.prototype);return t.s=0,t.c=1,t},Q.isValid=function(t){return t&&K.isFinite(t.s)&&K.isFinite(t.c)},Q.assert=function(t){if(Y&&!Q.isValid(t))throw G&&Z.debug(t),new Error("Invalid Rot!")},Q.prototype.setIdentity=function(){this.s=0,this.c=1},Q.prototype.set=function(t){"object"==typeof t?(Y&&Q.assert(t),this.s=t.s,this.c=t.c):(Y&&K.assert(t),this.s=K.sin(t),this.c=K.cos(t))},Q.prototype.setAngle=function(t){Y&&K.assert(t),this.s=K.sin(t),this.c=K.cos(t)},Q.prototype.getAngle=function(){return K.atan2(this.s,this.c)},Q.prototype.getXAxis=function(){return X.neo(this.c,this.s)},Q.prototype.getYAxis=function(){return X.neo(-this.s,this.c)},Q.mul=function(t,e){if(Y&&Q.assert(t),"c"in e&&"s"in e){Y&&Q.assert(e);var i=Q.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i}if("x"in e&&"y"in e)return Y&&X.assert(e),X.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},Q.mulRot=function(t,e){Y&&Q.assert(t),Y&&Q.assert(e);var i=Q.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i},Q.mulVec2=function(t,e){return Y&&Q.assert(t),Y&&X.assert(e),X.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},Q.mulSub=function(t,e,i){var n=t.c*(e.x-i.x)-t.s*(e.y-i.y),o=t.s*(e.x-i.x)+t.c*(e.y-i.y);return X.neo(n,o)},Q.mulT=function(t,e){if("c"in e&&"s"in e){Y&&Q.assert(e);var i=Q.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i}if("x"in e&&"y"in e)return Y&&X.assert(e),X.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},Q.mulTRot=function(t,e){Y&&Q.assert(e);var i=Q.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i},Q.mulTVec2=function(t,e){return Y&&X.assert(e),X.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)};var tt="undefined"!=typeof DEBUG&&DEBUG,et="undefined"!=typeof ASSERT&&ASSERT,it=st,nt=i,ot=p,rt=J;function st(t,e){if(!(this instanceof st))return new st(t,e);this.p=ot.zero(),this.q=rt.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}st.clone=function(t){var e=Object.create(st.prototype);return e.p=ot.clone(t.p),e.q=rt.clone(t.q),e},st.neo=function(t,e){var i=Object.create(st.prototype);return i.p=ot.clone(t),i.q=rt.clone(e),i},st.identity=function(){var t=Object.create(st.prototype);return t.p=ot.zero(),t.q=rt.identity(),t},st.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},st.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},st.isValid=function(t){return t&&ot.isValid(t.p)&&rt.isValid(t.q)},st.assert=function(t){if(et&&!st.isValid(t))throw tt&&nt.debug(t),new Error("Invalid Transform!")},st.mul=function(t,e){if(et&&st.assert(t),Array.isArray(e)){for(var i=[],n=0;n<e.length;n++)i[n]=st.mul(t,e[n]);return i}if("x"in e&&"y"in e){et&&ot.assert(e);var o=t.q.c*e.x-t.q.s*e.y+t.p.x,r=t.q.s*e.x+t.q.c*e.y+t.p.y;return ot.neo(o,r)}if("p"in e&&"q"in e){et&&st.assert(e);var s=st.identity();return s.q=rt.mulRot(t.q,e.q),s.p=ot.add(rt.mulVec2(t.q,e.p),t.p),s}},st.mulAll=function(t,e){et&&st.assert(t);for(var i=[],n=0;n<e.length;n++)i[n]=st.mul(t,e[n]);return i},st.mulFn=function(t){return et&&st.assert(t),function(e){return st.mul(t,e)}},st.mulVec2=function(t,e){et&&st.assert(t),et&&ot.assert(e);var i=t.q.c*e.x-t.q.s*e.y+t.p.x,n=t.q.s*e.x+t.q.c*e.y+t.p.y;return ot.neo(i,n)},st.mulXf=function(t,e){et&&st.assert(t),et&&st.assert(e);var i=st.identity();return i.q=rt.mulRot(t.q,e.q),i.p=ot.add(rt.mulVec2(t.q,e.p),t.p),i},st.mulT=function(t,e){if(et&&st.assert(t),"x"in e&&"y"in e){et&&ot.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,o=t.q.c*i+t.q.s*n,r=-t.q.s*i+t.q.c*n;return ot.neo(o,r)}if("p"in e&&"q"in e){et&&st.assert(e);var s=st.identity();return s.q.set(rt.mulTRot(t.q,e.q)),s.p.set(rt.mulTVec2(t.q,ot.sub(e.p,t.p))),s}},st.mulTVec2=function(t,e){et&&st.assert(t),et&&ot.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,o=t.q.c*i+t.q.s*n,r=-t.q.s*i+t.q.c*n;return ot.neo(o,r)},st.mulTXf=function(t,e){et&&st.assert(t),et&&st.assert(e);var i=st.identity();return i.q.set(rt.mulTRot(t.q,e.q)),i.p.set(rt.mulTVec2(t.q,ot.sub(e.p,t.p))),i},"undefined"!=typeof DEBUG&&DEBUG;var at="undefined"!=typeof ASSERT&&ASSERT,lt=dt,ct=i,ut=r.exports,ht=p,mt=J,pt=it;function dt(t,e){at&&ct.assert(void 0===t),at&&ct.assert(void 0===e),this.localCenter=ht.zero(),this.c=ht.zero(),this.a=0,this.alpha0=0,this.c0=ht.zero(),this.a0=0}dt.prototype.setTransform=function(t){var e=pt.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},dt.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var i=pt.mulVec2(e,this.localCenter);this.c.set(i),this.c0.set(i)},dt.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(mt.mulVec2(t.q,this.localCenter))},dt.prototype.advance=function(t){at&&ct.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},dt.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},dt.prototype.normalize=function(){var t=ut.mod(this.a0,-ut.PI,+ut.PI);this.a-=this.a0-t,this.a0=t},dt.prototype.clone=function(){var t=new dt;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},dt.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ft=function(){this.v=_t.zero(),this.w=0},_t=p;"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var yt=bt,vt=p,gt=J;function bt(){this.c=vt.zero(),this.a=0}bt.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(vt.sub(this.c,gt.mulVec2(t.q,e))),t},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var xt=$t;function $t(){this.m_type,this.m_radius}$t.prototype._reset=function(){},$t.prototype._serialize=function(){return{}},$t.TYPES={},$t._deserialize=function(t,e,i){var n=$t.TYPES[t.type];return n&&i(n,t)},$t.isValid=function(t){return!!t},$t.prototype.getRadius=function(){return this.m_radius},$t.prototype.getType=function(){return this.m_type},$t.prototype._clone=function(){},$t.prototype.getChildCount=function(){},$t.prototype.testPoint=function(t,e){},$t.prototype.rayCast=function(t,e,i,n){},$t.prototype.computeAABB=function(t,e,i){},$t.prototype.computeMass=function(t,e){},$t.prototype.computeDistanceProxy=function(t){},"undefined"!=typeof DEBUG&&DEBUG;var At="undefined"!=typeof ASSERT&&ASSERT,wt=Ft,Bt=i,Ct=e,St=r.exports,Et=p,Mt=A,Tt=xt,Pt={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function zt(t,e){this.aabb=new Mt,this.fixture=t,this.childIndex=e,this.proxyId}function Ft(t,e,i){e.shape?(i=e,e=e.shape):"number"==typeof i&&(i={density:i}),i=Ct(i,Pt),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var n=this.m_shape.getChildCount(),o=0;o<n;++o)this.m_proxies[o]=new zt(this,o);this.m_userData=i.userData}Ft.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var i=this.m_shape.getChildCount(),n=0;n<i;++n)this.m_proxies[n]=new zt(this,n);this.createProxies(e,t.m_xf),t.resetMassData()},Ft.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},Ft._deserialize=function(t,e,i){var n=i(Tt,t.shape);return n&&new Ft(e,n,t)},Ft.prototype.getType=function(){return this.m_shape.getType()},Ft.prototype.getShape=function(){return this.m_shape},Ft.prototype.isSensor=function(){return this.m_isSensor},Ft.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},Ft.prototype.getUserData=function(){return this.m_userData},Ft.prototype.setUserData=function(t){this.m_userData=t},Ft.prototype.getBody=function(){return this.m_body},Ft.prototype.getNext=function(){return this.m_next},Ft.prototype.getDensity=function(){return this.m_density},Ft.prototype.setDensity=function(t){At&&Bt.assert(St.isFinite(t)&&t>=0),this.m_density=t},Ft.prototype.getFriction=function(){return this.m_friction},Ft.prototype.setFriction=function(t){this.m_friction=t},Ft.prototype.getRestitution=function(){return this.m_restitution},Ft.prototype.setRestitution=function(t){this.m_restitution=t},Ft.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},Ft.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},Ft.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},Ft.prototype.getAABB=function(t){return At&&Bt.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},Ft.prototype.createProxies=function(t,e){At&&Bt.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var i=0;i<this.m_proxyCount;++i){var n=this.m_proxies[i];this.m_shape.computeAABB(n.aabb,e,i),n.proxyId=t.createProxy(n.aabb,n)}},Ft.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},Ft.prototype.synchronize=function(t,e,i){for(var n=0;n<this.m_proxyCount;++n){var o=this.m_proxies[n],r=new Mt,s=new Mt;this.m_shape.computeAABB(r,e,o.childIndex),this.m_shape.computeAABB(s,i,o.childIndex),o.aabb.combine(r,s);var a=Et.sub(i.p,e.p);t.moveProxy(o.proxyId,o.aabb,a)}},Ft.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},Ft.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},Ft.prototype.setFilterGroupIndex=function(t){return this.m_filterGroupIndex=t},Ft.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},Ft.prototype.setFilterCategoryBits=function(t){this.m_filterCategoryBits=t},Ft.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},Ft.prototype.setFilterMaskBits=function(t){this.m_filterMaskBits=t},Ft.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),n=e.getFixtureB();i!=this&&n!=this||e.flagForFiltering(),t=t.next}var o=this.m_body.getWorld();if(null!=o)for(var r=o.m_broadPhase,s=0;s<this.m_proxyCount;++s)r.touchProxy(this.m_proxies[s].proxyId)}},Ft.prototype.shouldCollide=function(t){if(t.m_filterGroupIndex===this.m_filterGroupIndex&&0!==t.m_filterGroupIndex)return t.m_filterGroupIndex>0;var e=0!=(t.m_filterMaskBits&this.m_filterCategoryBits),i=0!=(t.m_filterCategoryBits&this.m_filterMaskBits);return e&&i},"undefined"!=typeof DEBUG&&DEBUG;var It="undefined"!=typeof ASSERT&&ASSERT,kt=Zt,Vt=i,Lt=e,jt=p,Rt=J,Dt=r.exports,Ot=lt,qt=it,Nt=ft,Ut=yt,Wt=wt,Ht=Zt.STATIC="static",Gt=Zt.KINEMATIC="kinematic",Yt=Zt.DYNAMIC="dynamic",Jt={type:Ht,position:jt.zero(),angle:0,linearVelocity:jt.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function Zt(t,e){e=Lt(e,Jt),It&&Vt.assert(jt.isValid(e.position)),It&&Vt.assert(jt.isValid(e.linearVelocity)),It&&Vt.assert(Dt.isFinite(e.angle)),It&&Vt.assert(Dt.isFinite(e.angularVelocity)),It&&Vt.assert(Dt.isFinite(e.angularDamping)&&e.angularDamping>=0),It&&Vt.assert(Dt.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==Yt?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=qt.identity(),this.m_xf.p=jt.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new Ot,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new Nt,this.c_position=new Ut,this.m_force=jt.zero(),this.m_torque=0,this.m_linearVelocity=jt.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function Xt(){this.mass=0,this.center=jt.zero(),this.I=0}Zt.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},Zt._deserialize=function(t,e,i){var n=new Zt(e,t);if(t.fixtures)for(var o=t.fixtures.length-1;o>=0;o--){var r=i(Wt,t.fixtures[o],n);n._addFixture(r)}return n},Zt.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},Zt.prototype.getWorld=function(){return this.m_world},Zt.prototype.getNext=function(){return this.m_next},Zt.prototype.setUserData=function(t){this.m_userData=t},Zt.prototype.getUserData=function(){return this.m_userData},Zt.prototype.getFixtureList=function(){return this.m_fixtureList},Zt.prototype.getJointList=function(){return this.m_jointList},Zt.prototype.getContactList=function(){return this.m_contactList},Zt.prototype.isStatic=function(){return this.m_type==Ht},Zt.prototype.isDynamic=function(){return this.m_type==Yt},Zt.prototype.isKinematic=function(){return this.m_type==Gt},Zt.prototype.setStatic=function(){return this.setType(Ht),this},Zt.prototype.setDynamic=function(){return this.setType(Yt),this},Zt.prototype.setKinematic=function(){return this.setType(Gt),this},Zt.prototype.getType=function(){return this.m_type},Zt.prototype.setType=function(t){if(It&&Vt.assert(t===Ht||t===Gt||t===Yt),It&&Vt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==Ht&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e;e=e.next,this.m_world.destroyContact(i.contact)}this.m_contactList=null;for(var n=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)for(var r=o.m_proxyCount,s=0;s<r;++s)n.touchProxy(o.m_proxies[s].proxyId)}},Zt.prototype.isBullet=function(){return this.m_bulletFlag},Zt.prototype.setBullet=function(t){this.m_bulletFlag=!!t},Zt.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},Zt.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},Zt.prototype.isAwake=function(){return this.m_awakeFlag},Zt.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},Zt.prototype.isActive=function(){return this.m_activeFlag},Zt.prototype.setActive=function(t){if(It&&Vt.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.destroyProxies(e);for(var n=this.m_contactList;n;){var o=n;n=n.next,this.m_world.destroyContact(o.contact)}this.m_contactList=null}},Zt.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},Zt.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},Zt.prototype.getTransform=function(){return this.m_xf},Zt.prototype.setTransform=function(t,e){if(It&&Vt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var i=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.synchronize(i,this.m_xf,this.m_xf)}},Zt.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},Zt.prototype.synchronizeFixtures=function(){var t=qt.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,t,this.m_xf)},Zt.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},Zt.prototype.getPosition=function(){return this.m_xf.p},Zt.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},Zt.prototype.getAngle=function(){return this.m_sweep.a},Zt.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},Zt.prototype.getWorldCenter=function(){return this.m_sweep.c},Zt.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},Zt.prototype.getLinearVelocity=function(){return this.m_linearVelocity},Zt.prototype.getLinearVelocityFromWorldPoint=function(t){var e=jt.sub(t,this.m_sweep.c);return jt.add(this.m_linearVelocity,jt.cross(this.m_angularVelocity,e))},Zt.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},Zt.prototype.setLinearVelocity=function(t){this.m_type!=Ht&&(jt.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},Zt.prototype.getAngularVelocity=function(){return this.m_angularVelocity},Zt.prototype.setAngularVelocity=function(t){this.m_type!=Ht&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},Zt.prototype.getLinearDamping=function(){return this.m_linearDamping},Zt.prototype.setLinearDamping=function(t){this.m_linearDamping=t},Zt.prototype.getAngularDamping=function(){return this.m_angularDamping},Zt.prototype.setAngularDamping=function(t){this.m_angularDamping=t},Zt.prototype.getGravityScale=function(){return this.m_gravityScale},Zt.prototype.setGravityScale=function(t){this.m_gravityScale=t},Zt.prototype.getMass=function(){return this.m_mass},Zt.prototype.getInertia=function(){return this.m_I+this.m_mass*jt.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},Zt.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},Zt.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);It&&Vt.assert(this.isDynamic());for(var t=jt.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var i=new Xt;e.getMassData(i),this.m_mass+=i.mass,t.addMul(i.mass,i.center),this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*jt.dot(t,t),It&&Vt.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var n=jt.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(jt.cross(this.m_angularVelocity,jt.sub(this.m_sweep.c,n)))},Zt.prototype.setMassData=function(t){if(It&&Vt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==Yt){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*jt.dot(t.center,t.center),It&&Vt.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=jt.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(jt.cross(this.m_angularVelocity,jt.sub(this.m_sweep.c,e)))}},Zt.prototype.applyForce=function(t,e,i){this.m_type==Yt&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=jt.cross(jt.sub(e,this.m_sweep.c),t)))},Zt.prototype.applyForceToCenter=function(t,e){this.m_type==Yt&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},Zt.prototype.applyTorque=function(t,e){this.m_type==Yt&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},Zt.prototype.applyLinearImpulse=function(t,e,i){this.m_type==Yt&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*jt.cross(jt.sub(e,this.m_sweep.c),t)))},Zt.prototype.applyAngularImpulse=function(t,e){this.m_type==Yt&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},Zt.prototype.shouldCollide=function(t){if(this.m_type!=Yt&&t.m_type!=Yt)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},Zt.prototype._addFixture=function(t){if(It&&Vt.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},Zt.prototype.createFixture=function(t,e){if(It&&Vt.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var i=new Wt(this,t,e);return this._addFixture(i),i},Zt.prototype.destroyFixture=function(t){if(It&&Vt.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){It&&Vt.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var i=this.m_fixtureList;null!=i;){if(i.m_next===t){i.m_next=t.m_next,e=!0;break}i=i.m_next}It&&Vt.assert(e);for(var n=this.m_contactList;n;){var o=n.contact;n=n.next;var r=o.getFixtureA(),s=o.getFixtureB();t!=r&&t!=s||this.m_world.destroyContact(o)}if(this.m_activeFlag){var a=this.m_world.m_broadPhase;t.destroyProxies(a)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},Zt.prototype.getWorldPoint=function(t){return qt.mulVec2(this.m_xf,t)},Zt.prototype.getWorldVector=function(t){return Rt.mulVec2(this.m_xf.q,t)},Zt.prototype.getLocalPoint=function(t){return qt.mulTVec2(this.m_xf,t)},Zt.prototype.getLocalVector=function(t){return Rt.mulTVec2(this.m_xf.q,t)};var Kt="undefined"!=typeof DEBUG&&DEBUG,Qt="undefined"!=typeof ASSERT&&ASSERT,te=ne,ee=i,ie=p;function ne(t,e,i,n){"object"==typeof t&&null!==t?(this.ex=ie.clone(t),this.ey=ie.clone(e)):"number"==typeof t?(this.ex=ie.neo(t,i),this.ey=ie.neo(e,n)):(this.ex=ie.zero(),this.ey=ie.zero())}ne.prototype.toString=function(){return JSON.stringify(this)},ne.isValid=function(t){return t&&ie.isValid(t.ex)&&ie.isValid(t.ey)},ne.assert=function(t){if(Qt&&!ne.isValid(t))throw Kt&&ee.debug(t),new Error("Invalid Mat22!")},ne.prototype.set=function(t,e,i,n){"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"number"==typeof n?(this.ex.set(t,i),this.ey.set(e,n)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(Qt&&ne.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):Qt&&ee.assert(!1)},ne.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},ne.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},ne.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,i=this.ex.y,n=this.ey.y,o=t*n-e*i;0!=o&&(o=1/o);var r=new ne;return r.ex.x=o*n,r.ey.x=-o*e,r.ex.y=-o*i,r.ey.y=o*t,r},ne.prototype.solve=function(t){Qt&&ie.assert(t);var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,r=e*o-i*n;0!=r&&(r=1/r);var s=ie.zero();return s.x=r*(o*t.x-i*t.y),s.y=r*(e*t.y-n*t.x),s},ne.mul=function(t,e){if(e&&"x"in e&&"y"in e){Qt&&ie.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return ie.neo(i,n)}if(e&&"ex"in e&&"ey"in e)return Qt&&ne.assert(e),new ne(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y);Qt&&ee.assert(!1)},ne.mulVec2=function(t,e){Qt&&ie.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return ie.neo(i,n)},ne.mulMat22=function(t,e){return Qt&&ne.assert(e),new ne(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y)},ne.mulT=function(t,e){return e&&"x"in e&&"y"in e?(Qt&&ie.assert(e),ie.neo(ie.dot(e,t.ex),ie.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(Qt&&ne.assert(e),new ne(ie.neo(ie.dot(t.ex,e.ex),ie.dot(t.ey,e.ex)),ie.neo(ie.dot(t.ex,e.ey),ie.dot(t.ey,e.ey)))):void(Qt&&ee.assert(!1))},ne.mulTVec2=function(t,e){return Qt&&ne.assert(t),Qt&&ie.assert(e),ie.neo(ie.dot(e,t.ex),ie.dot(e,t.ey))},ne.mulTMat22=function(t,e){return Qt&&ne.assert(t),Qt&&ne.assert(e),new ne(ie.neo(ie.dot(t.ex,e.ex),ie.dot(t.ey,e.ex)),ie.neo(ie.dot(t.ex,e.ey),ie.dot(t.ey,e.ey)))},ne.abs=function(t){return Qt&&ne.assert(t),new ne(ie.abs(t.ex),ie.abs(t.ey))},ne.add=function(t,e){return Qt&&ne.assert(t),Qt&&ne.assert(e),new ne(ie.add(t.ex,e.ex),ie.add(t.ey,e.ey))};var oe={exports:{}};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var re=p,se=it,ae=r.exports,le=J;function ce(){this.type,this.localNormal=re.zero(),this.localPoint=re.zero(),this.points=[new ue,new ue],this.pointCount=0}function ue(){this.localPoint=re.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new he}function he(){this.cf=new me}function me(){this.indexA,this.indexB,this.typeA,this.typeB}function pe(){this.normal,this.points=[],this.separations=[]}oe.exports=ce,oe.exports.clipSegmentToLine=function(t,e,i,n,o){var r=0,s=re.dot(i,e[0].v)-n,a=re.dot(i,e[1].v)-n;s<=0&&t[r++].set(e[0]);a<=0&&t[r++].set(e[1]);if(s*a<0){var l=s/(s-a);t[r].v.setCombine(1-l,e[0].v,l,e[1].v),t[r].id.cf.indexA=o,t[r].id.cf.indexB=e[0].id.cf.indexB,t[r].id.cf.typeA=ce.e_vertex,t[r].id.cf.typeB=ce.e_face,++r}return r},oe.exports.clipVertex=fe,oe.exports.getPointStates=function(t,e,i,n){for(var o=0;o<i.pointCount;++o){var r=i.points[o].id;t[o]=de.removeState;for(var s=0;s<n.pointCount;++s)if(n.points[s].id.key==r.key){t[o]=de.persistState;break}}for(o=0;o<n.pointCount;++o){r=n.points[o].id;e[o]=de.addState;for(s=0;s<i.pointCount;++s)if(i.points[s].id.key==r.key){e[o]=de.persistState;break}}},oe.exports.PointState=de,ce.e_circles=0,ce.e_faceA=1,ce.e_faceB=2,ce.e_vertex=0,ce.e_face=1,Object.defineProperty(he.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),he.prototype.set=function(t){this.cf.set(t.cf)},me.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},ce.prototype.getWorldManifold=function(t,e,i,n,o){if(0!=this.pointCount){var r=(t=t||new pe).normal,s=t.points,a=t.separations;switch(this.type){case ce.e_circles:r=re.neo(1,0);var l=se.mulVec2(e,this.localPoint),c=se.mulVec2(n,this.points[0].localPoint),u=re.sub(c,l);re.lengthSquared(u)>ae.EPSILON*ae.EPSILON&&(r.set(u),r.normalize());var h=l.clone().addMul(i,r),m=c.clone().addMul(-o,r);s[0]=re.mid(h,m),a[0]=re.dot(re.sub(m,h),r),s.length=1,a.length=1;break;case ce.e_faceA:r=le.mulVec2(e.q,this.localNormal);for(var p=se.mulVec2(e,this.localPoint),d=0;d<this.pointCount;++d){var f=se.mulVec2(n,this.points[d].localPoint);h=re.clone(f).addMul(i-re.dot(re.sub(f,p),r),r),m=re.clone(f).subMul(o,r);s[d]=re.mid(h,m),a[d]=re.dot(re.sub(m,h),r)}s.length=this.pointCount,a.length=this.pointCount;break;case ce.e_faceB:r=le.mulVec2(n.q,this.localNormal);for(p=se.mulVec2(n,this.localPoint),d=0;d<this.pointCount;++d){f=se.mulVec2(e,this.points[d].localPoint),m=re.combine(1,f,o-re.dot(re.sub(f,p),r),r),h=re.combine(1,f,-i,r);s[d]=re.mid(h,m),a[d]=re.dot(re.sub(h,m),r)}s.length=this.pointCount,a.length=this.pointCount,r.mul(-1)}return t.normal=r,t.points=s,t.separations=a,t}};var de={nullState:0,addState:1,persistState:2,removeState:3};function fe(){this.v=re.zero(),this.id=new he}fe.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)};var _e={exports:{}},ye={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,ye.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var i in this)"function"!=typeof this[i]&&"object"!=typeof this[i]&&(e+=i+": "+this[i]+t);return e};var ve="undefined"!=typeof DEBUG&&DEBUG,ge="undefined"!=typeof ASSERT&&ASSERT,be=Ae,xe=i,$e=r.exports;function Ae(t,e,i){if(!(this instanceof Ae))return new Ae(t,e,i);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),ge&&Ae.assert(this)}Ae.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},Ae._deserialize=function(t){var e=Object.create(Ae.prototype);return e.x=t.x,e.y=t.y,e.z=t.z,e},Ae.neo=function(t,e,i){var n=Object.create(Ae.prototype);return n.x=t,n.y=e,n.z=i,n},Ae.clone=function(t){return ge&&Ae.assert(t),Ae.neo(t.x,t.y,t.z)},Ae.prototype.toString=function(){return JSON.stringify(this)},Ae.isValid=function(t){return t&&$e.isFinite(t.x)&&$e.isFinite(t.y)&&$e.isFinite(t.z)},Ae.assert=function(t){if(ge&&!Ae.isValid(t))throw ve&&xe.debug(t),new Error("Invalid Vec3!")},Ae.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},Ae.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},Ae.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Ae.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Ae.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Ae.areEqual=function(t,e){return ge&&Ae.assert(t),ge&&Ae.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},Ae.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},Ae.cross=function(t,e){return new Ae(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},Ae.add=function(t,e){return new Ae(t.x+e.x,t.y+e.y,t.z+e.z)},Ae.sub=function(t,e){return new Ae(t.x-e.x,t.y-e.y,t.z-e.z)},Ae.mul=function(t,e){return new Ae(e*t.x,e*t.y,e*t.z)},Ae.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},Ae.neg=function(t){return new Ae(-t.x,-t.y,-t.z)};var we="undefined"!=typeof DEBUG&&DEBUG,Be="undefined"!=typeof ASSERT&&ASSERT,Ce=Te,Se=i,Ee=p,Me=be;function Te(t,e,i){"object"==typeof t&&null!==t?(this.ex=Me.clone(t),this.ey=Me.clone(e),this.ez=Me.clone(i)):(this.ex=Me(),this.ey=Me(),this.ez=Me())}Te.prototype.toString=function(){return JSON.stringify(this)},Te.isValid=function(t){return t&&Me.isValid(t.ex)&&Me.isValid(t.ey)&&Me.isValid(t.ez)},Te.assert=function(t){if(Be&&!Te.isValid(t))throw we&&Se.debug(t),new Error("Invalid Mat33!")},Te.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},Te.prototype.solve33=function(t){var e=Me.dot(this.ex,Me.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=new Me;return i.x=e*Me.dot(t,Me.cross(this.ey,this.ez)),i.y=e*Me.dot(this.ex,Me.cross(t,this.ez)),i.z=e*Me.dot(this.ex,Me.cross(this.ey,t)),i},Te.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,r=e*o-i*n;0!=r&&(r=1/r);var s=Ee.zero();return s.x=r*(o*t.x-i*t.y),s.y=r*(e*t.y-n*t.x),s},Te.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,r=e*o-i*n;0!=r&&(r=1/r),t.ex.x=r*o,t.ey.x=-r*i,t.ex.z=0,t.ex.y=-r*n,t.ey.y=r*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},Te.prototype.getSymInverse33=function(t){var e=Me.dot(this.ex,Me.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=this.ex.x,n=this.ey.x,o=this.ez.x,r=this.ey.y,s=this.ez.y,a=this.ez.z;t.ex.x=e*(r*a-s*s),t.ex.y=e*(o*s-n*a),t.ex.z=e*(n*s-o*r),t.ey.x=t.ex.y,t.ey.y=e*(i*a-o*o),t.ey.z=e*(o*n-i*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*r-n*n)},Te.mul=function(t,e){if(Be&&Te.assert(t),e&&"z"in e&&"y"in e&&"x"in e){Be&&Me.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,o=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new Me(i,n,o)}if(e&&"y"in e&&"x"in e){Be&&Ee.assert(e);i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return Ee.neo(i,n)}Be&&Se.assert(!1)},Te.mulVec3=function(t,e){Be&&Te.assert(t),Be&&Me.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,o=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new Me(i,n,o)},Te.mulVec2=function(t,e){Be&&Te.assert(t),Be&&Ee.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return Ee.neo(i,n)},Te.add=function(t,e){return Be&&Te.assert(t),Be&&Te.assert(e),new Te(Me.add(t.ex,e.ex),Me.add(t.ey,e.ey),Me.add(t.ez,e.ez))},"undefined"!=typeof DEBUG&&DEBUG;var Pe="undefined"!=typeof ASSERT&&ASSERT;_e.exports=qe,_e.exports.Input=Re,_e.exports.Output=De,_e.exports.Proxy=Ne,_e.exports.Cache=Oe;var ze=y,Fe=i,Ie=ye,ke=r.exports,Ve=p,Le=J,je=it;function Re(){this.proxyA=new Ne,this.proxyB=new Ne,this.transformA=null,this.transformB=null,this.useRadii=!1}function De(){this.pointA=Ve.zero(),this.pointB=Ve.zero(),this.distance,this.iterations}function Oe(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function qe(t,e,i){++Ie.gjkCalls;var n=i.proxyA,o=i.proxyB,r=i.transformA,s=i.transformB,a=new We;a.readCache(e,n,r,o,s);for(var l=a.m_v,c=ze.maxDistnceIterations,u=[],h=[],m=0,p=0;p<c;){m=a.m_count;for(var d=0;d<m;++d)u[d]=l[d].indexA,h[d]=l[d].indexB;if(a.solve(),3==a.m_count)break;(x=a.getClosestPoint()).lengthSquared();var f=a.getSearchDirection();if(f.lengthSquared()<ke.EPSILON*ke.EPSILON)break;var _=l[a.m_count];_.indexA=n.getSupport(Le.mulTVec2(r.q,Ve.neg(f))),_.wA=je.mulVec2(r,n.getVertex(_.indexA)),_.indexB=o.getSupport(Le.mulTVec2(s.q,f)),_.wB=je.mulVec2(s,o.getVertex(_.indexB)),_.w=Ve.sub(_.wB,_.wA),++p,++Ie.gjkIters;var y=!1;for(d=0;d<m;++d)if(_.indexA==u[d]&&_.indexB==h[d]){y=!0;break}if(y)break;++a.m_count}if(Ie.gjkMaxIters=ke.max(Ie.gjkMaxIters,p),a.getWitnessPoints(t.pointA,t.pointB),t.distance=Ve.distance(t.pointA,t.pointB),t.iterations=p,a.writeCache(e),i.useRadii){var v=n.m_radius,g=o.m_radius;if(t.distance>v+g&&t.distance>ke.EPSILON){t.distance-=v+g;var b=Ve.sub(t.pointB,t.pointA);b.normalize(),t.pointA.addMul(v,b),t.pointB.subMul(g,b)}else{var x=Ve.mid(t.pointA,t.pointB);t.pointA.set(x),t.pointB.set(x),t.distance=0}}}function Ne(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function Ue(){this.indexA,this.indexB,this.wA=Ve.zero(),this.wB=Ve.zero(),this.w=Ve.zero(),this.a}function We(){this.m_v1=new Ue,this.m_v2=new Ue,this.m_v3=new Ue,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}Ie.gjkCalls=0,Ie.gjkIters=0,Ie.gjkMaxIters=0,Ne.prototype.getVertexCount=function(){return this.m_count},Ne.prototype.getVertex=function(t){return Pe&&Fe.assert(0<=t&&t<this.m_count),this.m_vertices[t]},Ne.prototype.getSupport=function(t){for(var e=0,i=Ve.dot(this.m_vertices[0],t),n=0;n<this.m_count;++n){var o=Ve.dot(this.m_vertices[n],t);o>i&&(e=n,i=o)}return e},Ne.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},Ne.prototype.set=function(t,e){Pe&&Fe.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},Ue.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=Ve.clone(t.wA),this.wB=Ve.clone(t.wB),this.w=Ve.clone(t.w),this.a=t.a},We.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},We.prototype.readCache=function(t,e,i,n,o){Pe&&Fe.assert(t.count<=3),this.m_count=t.count;for(var r=0;r<this.m_count;++r){(u=this.m_v[r]).indexA=t.indexA[r],u.indexB=t.indexB[r];var s=e.getVertex(u.indexA),a=n.getVertex(u.indexB);u.wA=je.mulVec2(i,s),u.wB=je.mulVec2(o,a),u.w=Ve.sub(u.wB,u.wA),u.a=0}if(this.m_count>1){var l=t.metric,c=this.getMetric();(c<.5*l||2*l<c||c<ke.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var u;(u=this.m_v[0]).indexA=0,u.indexB=0;s=e.getVertex(0),a=n.getVertex(0);u.wA=je.mulVec2(i,s),u.wB=je.mulVec2(o,a),u.w=Ve.sub(u.wB,u.wA),u.a=1,this.m_count=1}},We.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},We.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return Ve.neg(this.m_v1.w);case 2:var t=Ve.sub(this.m_v2.w,this.m_v1.w);return Ve.cross(t,Ve.neg(this.m_v1.w))>0?Ve.cross(1,t):Ve.cross(t,1);default:return Pe&&Fe.assert(!1),Ve.zero()}},We.prototype.getClosestPoint=function(){switch(this.m_count){default:return Pe&&Fe.assert(!1),Ve.zero();case 1:return Ve.clone(this.m_v1.w);case 2:return Ve.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return Ve.zero()}},We.prototype.getWitnessPoints=function(t,e){switch(this.m_count){default:Pe&&Fe.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t)}},We.prototype.getMetric=function(){switch(this.m_count){default:return Pe&&Fe.assert(!1),0;case 1:return 0;case 2:return Ve.distance(this.m_v1.w,this.m_v2.w);case 3:return Ve.cross(Ve.sub(this.m_v2.w,this.m_v1.w),Ve.sub(this.m_v3.w,this.m_v1.w))}},We.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:Pe&&Fe.assert(!1)}},We.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=Ve.sub(e,t),n=-Ve.dot(t,i);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);var o=Ve.dot(e,i);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var r=1/(o+n);this.m_v1.a=o*r,this.m_v2.a=n*r,this.m_count=2},We.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=Ve.sub(e,t),o=Ve.dot(t,n),r=Ve.dot(e,n),s=-o,a=Ve.sub(i,t),l=Ve.dot(t,a),c=Ve.dot(i,a),u=-l,h=Ve.sub(i,e),m=Ve.dot(e,h),p=Ve.dot(i,h),d=-m,f=Ve.cross(n,a),_=f*Ve.cross(e,i),y=f*Ve.cross(i,t),v=f*Ve.cross(t,e);if(s<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(r>0&&s>0&&v<=0){var g=1/(r+s);return this.m_v1.a=r*g,this.m_v2.a=s*g,void(this.m_count=2)}if(c>0&&u>0&&y<=0){var b=1/(c+u);return this.m_v1.a=c*b,this.m_v3.a=u*b,this.m_count=2,void this.m_v2.set(this.m_v3)}if(r<=0&&d<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(c<=0&&p<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(p>0&&d>0&&_<=0){var x=1/(p+d);return this.m_v2.a=p*x,this.m_v3.a=d*x,this.m_count=2,void this.m_v1.set(this.m_v3)}var $=1/(_+y+v);this.m_v1.a=_*$,this.m_v2.a=y*$,this.m_v3.a=v*$,this.m_count=3},qe.testOverlap=function(t,e,i,n,o,r){var s=new Re;s.proxyA.set(t,e),s.proxyB.set(i,n),s.transformA=o,s.transformB=r,s.useRadii=!0;var a=new Oe,l=new De;return qe(l,a,s),l.distance<10*ke.EPSILON},"undefined"!=typeof DEBUG&&DEBUG;var He="undefined"!=typeof ASSERT&&ASSERT,Ge=i,Ye=r.exports,Je=p,Ze=it,Xe=te,Ke=J,Qe=y,ti=oe.exports,ei=_e.exports,ii=oi;function ni(t){this.contact=t,this.prev,this.next,this.other}function oi(t,e,i,n,o){this.m_nodeA=new ni(this),this.m_nodeB=new ni(this),this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=n,this.m_evaluateFcn=o,this.m_manifold=new ti,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=si(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=ai(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=Je.zero(),this.v_normalMass=new Xe,this.v_K=new Xe,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=Je.zero(),this.p_localPoint=Je.zero(),this.p_localCenterA=Je.zero(),this.p_localCenterB=Je.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function ri(){this.rA=Je.zero(),this.rB=Je.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function si(t,e){return Ye.sqrt(t*e)}function ai(t,e){return t>e?t:e}oi.prototype.initConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getShape(),o=i.getShape(),r=e.getBody(),s=i.getBody(),a=this.getManifold(),l=a.pointCount;He&&Ge.assert(l>0),this.v_invMassA=r.m_invMass,this.v_invMassB=s.m_invMass,this.v_invIA=r.m_invI,this.v_invIB=s.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=r.m_invMass,this.p_invMassB=s.m_invMass,this.p_invIA=r.m_invI,this.p_invIB=s.m_invI,this.p_localCenterA=Je.clone(r.m_sweep.localCenter),this.p_localCenterB=Je.clone(s.m_sweep.localCenter),this.p_radiusA=n.m_radius,this.p_radiusB=o.m_radius,this.p_type=a.type,this.p_localNormal=Je.clone(a.localNormal),this.p_localPoint=Je.clone(a.localPoint),this.p_pointCount=l;for(var c=0;c<l;++c){var u=a.points[c],h=this.v_points[c]=new ri;t.warmStarting?(h.normalImpulse=t.dtRatio*u.normalImpulse,h.tangentImpulse=t.dtRatio*u.tangentImpulse):(h.normalImpulse=0,h.tangentImpulse=0),h.rA.setZero(),h.rB.setZero(),h.normalMass=0,h.tangentMass=0,h.velocityBias=0,this.p_localPoints[c]=Je.clone(u.localPoint)}},oi.prototype.getManifold=function(){return this.m_manifold},oi.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),n=this.m_fixtureA.getShape(),o=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),n.m_radius,i.getTransform(),o.m_radius)},oi.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},oi.prototype.isEnabled=function(){return this.m_enabledFlag},oi.prototype.isTouching=function(){return this.m_touchingFlag},oi.prototype.getNext=function(){return this.m_next},oi.prototype.getFixtureA=function(){return this.m_fixtureA},oi.prototype.getFixtureB=function(){return this.m_fixtureB},oi.prototype.getChildIndexA=function(){return this.m_indexA},oi.prototype.getChildIndexB=function(){return this.m_indexB},oi.prototype.flagForFiltering=function(){this.m_filterFlag=!0},oi.prototype.setFriction=function(t){this.m_friction=t},oi.prototype.getFriction=function(){return this.m_friction},oi.prototype.resetFriction=function(){this.m_friction=si(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},oi.prototype.setRestitution=function(t){this.m_restitution=t},oi.prototype.getRestitution=function(){return this.m_restitution},oi.prototype.resetRestitution=function(){this.m_restitution=ai(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},oi.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},oi.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},oi.prototype.evaluate=function(t,e,i){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,i,this.m_fixtureB,this.m_indexB)},oi.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,i=this.m_touchingFlag,n=this.m_fixtureA.isSensor(),o=this.m_fixtureB.isSensor(),r=n||o,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),l=s.getTransform(),c=a.getTransform();if(r){var u=this.m_fixtureA.getShape(),h=this.m_fixtureB.getShape();e=ei.testOverlap(u,this.m_indexA,h,this.m_indexB,l,c),this.m_manifold.pointCount=0}else{var m=this.m_manifold;this.m_manifold=new ti,this.evaluate(this.m_manifold,l,c),e=this.m_manifold.pointCount>0;for(var p=0;p<this.m_manifold.pointCount;++p){var d=this.m_manifold.points[p];d.normalImpulse=0,d.tangentImpulse=0;for(var f=0;f<m.pointCount;++f){var _=m.points[f];if(_.id.key==d.id.key){d.normalImpulse=_.normalImpulse,d.tangentImpulse=_.tangentImpulse;break}}}e!=i&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==i&&1==e&&t&&t.beginContact(this),1==i&&0==e&&t&&t.endContact(this),0==r&&e&&t&&t.preSolve(this,m)},oi.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},oi.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,!0,e,i)},oi.prototype._solvePositionConstraint=function(t,e,i,n){var o=this.m_fixtureA,r=this.m_fixtureB,s=o.getBody(),a=r.getBody();s.c_velocity,a.c_velocity;var l=s.c_position,c=a.c_position,u=Je.clone(this.p_localCenterA),h=Je.clone(this.p_localCenterB),m=0,p=0;e&&s!=i&&s!=n||(m=this.p_invMassA,p=this.p_invIA);var d=0,f=0;e&&a!=i&&a!=n||(d=this.p_invMassB,f=this.p_invIB);for(var _=Je.clone(l.c),y=l.a,v=Je.clone(c.c),g=c.a,b=0,x=0;x<this.p_pointCount;++x){var $,A,w,B=Ze.identity(),C=Ze.identity();switch(B.q.set(y),C.q.set(g),B.p=Je.sub(_,Ke.mulVec2(B.q,u)),C.p=Je.sub(v,Ke.mulVec2(C.q,h)),this.p_type){case ti.e_circles:var S=Ze.mulVec2(B,this.p_localPoint),E=Ze.mulVec2(C,this.p_localPoints[0]);($=Je.sub(E,S)).normalize(),A=Je.combine(.5,S,.5,E),w=Je.dot(Je.sub(E,S),$)-this.p_radiusA-this.p_radiusB;break;case ti.e_faceA:$=Ke.mulVec2(B.q,this.p_localNormal);var M=Ze.mulVec2(B,this.p_localPoint),T=Ze.mulVec2(C,this.p_localPoints[x]);w=Je.dot(Je.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T;break;case ti.e_faceB:$=Ke.mulVec2(C.q,this.p_localNormal);M=Ze.mulVec2(C,this.p_localPoint),T=Ze.mulVec2(B,this.p_localPoints[x]);w=Je.dot(Je.sub(T,M),$)-this.p_radiusA-this.p_radiusB,A=T,$.mul(-1)}var P=Je.sub(A,_),z=Je.sub(A,v);b=Ye.min(b,w);var F=e?Qe.toiBaugarte:Qe.baumgarte,I=Qe.linearSlop,k=Qe.maxLinearCorrection,V=Ye.clamp(F*(w+I),-k,0),L=Je.cross(P,$),j=Je.cross(z,$),R=m+d+p*L*L+f*j*j,D=R>0?-V/R:0,O=Je.mul(D,$);_.subMul(m,O),y-=p*Je.cross(P,O),v.addMul(d,O),g+=f*Je.cross(z,O)}return l.c.set(_),l.a=y,c.c.set(v),c.a=g,b},oi.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getBody(),o=i.getBody(),r=n.c_velocity,s=o.c_velocity,a=n.c_position,l=o.c_position,c=this.p_radiusA,u=this.p_radiusB,h=this.getManifold(),m=this.v_invMassA,p=this.v_invMassB,d=this.v_invIA,f=this.v_invIB,_=Je.clone(this.p_localCenterA),y=Je.clone(this.p_localCenterB),v=Je.clone(a.c),g=a.a,b=Je.clone(r.v),x=r.w,$=Je.clone(l.c),A=l.a,w=Je.clone(s.v),B=s.w;He&&Ge.assert(h.pointCount>0);var C=Ze.identity(),S=Ze.identity();C.q.set(g),S.q.set(A),C.p.setCombine(1,v,-1,Ke.mulVec2(C.q,_)),S.p.setCombine(1,$,-1,Ke.mulVec2(S.q,y));var E=h.getWorldManifold(null,C,c,S,u);this.v_normal.set(E.normal);for(var M=0;M<this.v_pointCount;++M){var T=this.v_points[M];T.rA.set(Je.sub(E.points[M],v)),T.rB.set(Je.sub(E.points[M],$));var P=Je.cross(T.rA,this.v_normal),z=Je.cross(T.rB,this.v_normal),F=m+p+d*P*P+f*z*z;T.normalMass=F>0?1/F:0;var I=Je.cross(this.v_normal,1),k=Je.cross(T.rA,I),V=Je.cross(T.rB,I),L=m+p+d*k*k+f*V*V;T.tangentMass=L>0?1/L:0,T.velocityBias=0;var j=Je.dot(this.v_normal,w)+Je.dot(this.v_normal,Je.cross(B,T.rB))-Je.dot(this.v_normal,b)-Je.dot(this.v_normal,Je.cross(x,T.rA));j<-Qe.velocityThreshold&&(T.velocityBias=-this.v_restitution*j)}if(2==this.v_pointCount&&t.blockSolve){var R=this.v_points[0],D=this.v_points[1],O=Je.cross(R.rA,this.v_normal),q=Je.cross(R.rB,this.v_normal),N=Je.cross(D.rA,this.v_normal),U=Je.cross(D.rB,this.v_normal),W=m+p+d*O*O+f*q*q,H=m+p+d*N*N+f*U*U,G=m+p+d*O*N+f*q*U;W*W<1e3*(W*H-G*G)?(this.v_K.ex.set(W,G),this.v_K.ey.set(G,H),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}a.c.set(v),a.a=g,r.v.set(b),r.w=x,l.c.set($),l.a=A,s.v.set(w),s.w=B},oi.prototype.warmStartConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getBody(),o=i.getBody(),r=n.c_velocity,s=o.c_velocity;n.c_position,o.c_position;for(var a=this.v_invMassA,l=this.v_invIA,c=this.v_invMassB,u=this.v_invIB,h=Je.clone(r.v),m=r.w,p=Je.clone(s.v),d=s.w,f=this.v_normal,_=Je.cross(f,1),y=0;y<this.v_pointCount;++y){var v=this.v_points[y],g=Je.combine(v.normalImpulse,f,v.tangentImpulse,_);m-=l*Je.cross(v.rA,g),h.subMul(a,g),d+=u*Je.cross(v.rB,g),p.addMul(c,g)}r.v.set(h),r.w=m,s.v.set(p),s.w=d},oi.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse},oi.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body,n=e.c_velocity;e.c_position;var o=i.c_velocity;i.c_position;var r=this.v_invMassA,s=this.v_invIA,a=this.v_invMassB,l=this.v_invIB,c=Je.clone(n.v),u=n.w,h=Je.clone(o.v),m=o.w,p=this.v_normal,d=Je.cross(p,1),f=this.v_friction;He&&Ge.assert(1==this.v_pointCount||2==this.v_pointCount);for(var _=0;_<this.v_pointCount;++_){var y=this.v_points[_];(A=Je.zero()).addCombine(1,h,1,Je.cross(m,y.rB)),A.subCombine(1,c,1,Je.cross(u,y.rA));var v=Je.dot(A,d)-this.v_tangentSpeed,g=y.tangentMass*-v,b=f*y.normalImpulse;g=(w=Ye.clamp(y.tangentImpulse+g,-b,b))-y.tangentImpulse,y.tangentImpulse=w;var x=Je.mul(g,d);c.subMul(r,x),u-=s*Je.cross(y.rA,x),h.addMul(a,x),m+=l*Je.cross(y.rB,x)}if(1==this.v_pointCount||0==t.blockSolve)for(var $=0;$<this.v_pointCount;++$){var A;y=this.v_points[$];(A=Je.zero()).addCombine(1,h,1,Je.cross(m,y.rB)),A.subCombine(1,c,1,Je.cross(u,y.rA));var w,B=Je.dot(A,p);g=-y.normalMass*(B-y.velocityBias);g=(w=Ye.max(y.normalImpulse+g,0))-y.normalImpulse,y.normalImpulse=w;x=Je.mul(g,p);c.subMul(r,x),u-=s*Je.cross(y.rA,x),h.addMul(a,x),m+=l*Je.cross(y.rB,x)}else{var C=this.v_points[0],S=this.v_points[1],E=Je.neo(C.normalImpulse,S.normalImpulse);He&&Ge.assert(E.x>=0&&E.y>=0);var M=Je.zero().add(h).add(Je.cross(m,C.rB)).sub(c).sub(Je.cross(u,C.rA)),T=Je.zero().add(h).add(Je.cross(m,S.rB)).sub(c).sub(Je.cross(u,S.rA)),P=Je.dot(M,p),z=Je.dot(T,p),F=Je.neo(P-C.velocityBias,z-S.velocityBias);for(F.sub(Xe.mulVec2(this.v_K,E));;){var I=Xe.mulVec2(this.v_normalMass,F).neg();if(I.x>=0&&I.y>=0){var k=Je.sub(I,E),V=Je.mul(k.x,p),L=Je.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Je.cross(C.rA,V)+Je.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Je.cross(C.rB,V)+Je.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=-C.normalMass*F.x,I.y=0,P=0,z=this.v_K.ex.y*I.x+F.y,I.x>=0&&z>=0){k=Je.sub(I,E),V=Je.mul(k.x,p),L=Je.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Je.cross(C.rA,V)+Je.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Je.cross(C.rB,V)+Je.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=-S.normalMass*F.y,P=this.v_K.ey.x*I.y+F.x,z=0,I.y>=0&&P>=0){k=Je.sub(I,E),V=Je.mul(k.x,p),L=Je.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Je.cross(C.rA,V)+Je.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Je.cross(C.rB,V)+Je.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}if(I.x=0,I.y=0,P=F.x,z=F.y,P>=0&&z>=0){k=Je.sub(I,E),V=Je.mul(k.x,p),L=Je.mul(k.y,p);c.subCombine(r,V,r,L),u-=s*(Je.cross(C.rA,V)+Je.cross(S.rA,L)),h.addCombine(a,V,a,L),m+=l*(Je.cross(C.rB,V)+Je.cross(S.rB,L)),C.normalImpulse=I.x,S.normalImpulse=I.y;break}break}}n.v.set(c),n.w=u,o.v.set(h),o.w=m};var li=[];oi.addType=function(t,e,i){li[t]=li[t]||{},li[t][e]=i},oi.create=function(t,e,i,n){var o,r,s=t.getType(),a=i.getType();if(r=li[s]&&li[s][a])o=new oi(t,e,i,n,r);else{if(!(r=li[a]&&li[a][s]))return null;o=new oi(i,n,t,e,r)}t=o.getFixtureA(),i=o.getFixtureB(),e=o.getChildIndexA(),n=o.getChildIndexB();var l=t.getBody(),c=i.getBody();return o.m_nodeA.contact=o,o.m_nodeA.other=c,o.m_nodeA.prev=null,o.m_nodeA.next=l.m_contactList,null!=l.m_contactList&&(l.m_contactList.prev=o.m_nodeA),l.m_contactList=o.m_nodeA,o.m_nodeB.contact=o,o.m_nodeB.other=l,o.m_nodeB.prev=null,o.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=o.m_nodeB),c.m_contactList=o.m_nodeB,0==t.isSensor()&&0==i.isSensor()&&(l.setAwake(!0),c.setAwake(!0)),o},oi.destroy=function(t,e){var i=t.m_fixtureA,n=t.m_fixtureB,o=i.getBody(),r=n.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==o.m_contactList&&(o.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==r.m_contactList&&(r.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==i.isSensor()&&0==n.isSensor()&&(o.setAwake(!0),r.setAwake(!0));var s=i.getType(),a=n.getType(),l=li[s][a].destroyFcn;"function"==typeof l&&l(t)},"undefined"!=typeof DEBUG&&DEBUG;var ci="undefined"!=typeof ASSERT&&ASSERT,ui=pi,hi=i;function mi(){this.other=null,this.joint=null,this.prev=null,this.next=null}function pi(t,e,i){e=t.bodyA||e,i=t.bodyB||i,ci&&hi.assert(e),ci&&hi.assert(i),ci&&hi.assert(e!=i),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=i,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new mi,this.m_edgeB=new mi,this.m_islandFlag=!1,this.m_userData=t.userData}pi.TYPES={},pi._deserialize=function(t,e,i){var n=pi.TYPES[t.type];return n&&i(n,t)},pi.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},pi.prototype.getType=function(){return this.m_type},pi.prototype.getBodyA=function(){return this.m_bodyA},pi.prototype.getBodyB=function(){return this.m_bodyB},pi.prototype.getNext=function(){return this.m_next},pi.prototype.getUserData=function(){return this.m_userData},pi.prototype.setUserData=function(t){this.m_userData=t},pi.prototype.getCollideConnected=function(){return this.m_collideConnected},pi.prototype.getAnchorA=function(){},pi.prototype.getAnchorB=function(){},pi.prototype.getReactionForce=function(t){},pi.prototype.getReactionTorque=function(t){},pi.prototype.shiftOrigin=function(t){},pi.prototype.initVelocityConstraints=function(t){},pi.prototype.solveVelocityConstraints=function(t){},pi.prototype.solvePositionConstraints=function(t){};var di={exports:{}},fi={};"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,fi.now=function(){return Date.now()},fi.diff=function(t){return Date.now()-t},"undefined"!=typeof DEBUG&&DEBUG;var _i="undefined"!=typeof ASSERT&&ASSERT;di.exports=function(t,e){var i=gi.now();++bi.toiCalls,t.state=Pi.e_unknown,t.t=e.tMax;var n=e.proxyA,o=e.proxyB,r=e.sweepA,s=e.sweepB;r.normalize(),s.normalize();var a=e.tMax,l=n.m_radius+o.m_radius,c=xi.max(yi.linearSlop,l-3*yi.linearSlop),u=.25*yi.linearSlop;_i&&vi.assert(c>u);var h=0,m=yi.maxTOIIterations,p=0,d=new Ti,f=new Si;for(f.proxyA=e.proxyA,f.proxyB=e.proxyB,f.useRadii=!1;;){var _=Bi.identity(),y=Bi.identity();r.getTransform(_,h),s.getTransform(y,h),f.transformA=_,f.transformB=y;var v=new Ei;if(Ci(v,d,f),v.distance<=0){t.state=Pi.e_overlapped,t.t=0;break}if(v.distance<c+u){t.state=Pi.e_touching,t.t=h;break}var g=new zi;g.initialize(d,n,r,o,s,h);for(var b=!1,x=a,$=0;;){var A=g.findMinSeparation(x);if(g.indexA,g.indexB,A>c+u){t.state=Pi.e_separated,t.t=a,b=!0;break}if(A>c-u){h=x;break}var w=g.evaluate(h);if(g.indexA,g.indexB,w<c-u){t.state=Pi.e_failed,t.t=h,b=!0;break}if(w<=c+u){t.state=Pi.e_touching,t.t=h,b=!0;break}for(var B=0,C=h,S=x;;){var E;E=1&B?C+(c-w)*(S-C)/(A-w):.5*(C+S),++B,++bi.toiRootIters;var M=g.evaluate(E);if(g.indexA,g.indexB,xi.abs(M-c)<u){x=E;break}if(M>c?(C=E,w=M):(S=E,A=M),50==B)break}if(bi.toiMaxRootIters=xi.max(bi.toiMaxRootIters,B),++$==yi.maxPolygonVertices)break}if(++p,++bi.toiIters,b)break;if(p==m){t.state=Pi.e_failed,t.t=h;break}}bi.toiMaxIters=xi.max(bi.toiMaxIters,p);var T=gi.diff(i);bi.toiMaxTime=xi.max(bi.toiMaxTime,T),bi.toiTime+=T},di.exports.Input=function(){this.proxyA=new Mi,this.proxyB=new Mi,this.sweepA=new wi,this.sweepB=new wi,this.tMax},di.exports.Output=Pi;var yi=y,vi=i,gi=fi,bi=ye,xi=r.exports,$i=p,Ai=J,wi=lt,Bi=it,Ci=_e.exports,Si=Ci.Input,Ei=Ci.Output,Mi=Ci.Proxy,Ti=Ci.Cache;function Pi(){this.state,this.t}Pi.e_unknown=0,Pi.e_failed=1,Pi.e_overlapped=2,Pi.e_touching=3,Pi.e_separated=4,bi.toiTime=0,bi.toiMaxTime=0,bi.toiCalls=0,bi.toiIters=0,bi.toiMaxIters=0,bi.toiRootIters=0,bi.toiMaxRootIters=0;function zi(){this.m_proxyA=new Mi,this.m_proxyB=new Mi,this.m_sweepA,this.m_sweepB,this.indexA,this.indexB,this.m_type,this.m_localPoint=$i.zero(),this.m_axis=$i.zero()}zi.prototype.initialize=function(t,e,i,n,o,r){this.m_proxyA=e,this.m_proxyB=n;var s=t.count;_i&&vi.assert(0<s&&s<3),this.m_sweepA=i,this.m_sweepB=o;var a=Bi.identity(),l=Bi.identity();if(this.m_sweepA.getTransform(a,r),this.m_sweepB.getTransform(l,r),1==s){this.m_type=1;var c=this.m_proxyA.getVertex(t.indexA[0]),u=this.m_proxyB.getVertex(t.indexB[0]),h=Bi.mulVec2(a,c),m=Bi.mulVec2(l,u);return this.m_axis.setCombine(1,m,-1,h),v=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var p=n.getVertex(t.indexB[0]),d=n.getVertex(t.indexB[1]);this.m_axis=$i.cross($i.sub(d,p),1),this.m_axis.normalize();var f=Ai.mulVec2(l.q,this.m_axis);this.m_localPoint=$i.mid(p,d);m=Bi.mulVec2(l,this.m_localPoint),c=e.getVertex(t.indexA[0]),h=Bi.mulVec2(a,c);return(v=$i.dot(h,f)-$i.dot(m,f))<0&&(this.m_axis=$i.neg(this.m_axis),v=-v),v}this.m_type=2;var _=this.m_proxyA.getVertex(t.indexA[0]),y=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=$i.cross($i.sub(y,_),1),this.m_axis.normalize();f=Ai.mulVec2(a.q,this.m_axis);this.m_localPoint=$i.mid(_,y);var v;h=Bi.mulVec2(a,this.m_localPoint),u=this.m_proxyB.getVertex(t.indexB[0]),m=Bi.mulVec2(l,u);return(v=$i.dot(m,f)-$i.dot(h,f))<0&&(this.m_axis=$i.neg(this.m_axis),v=-v),v},zi.prototype.compute=function(t,e){var i=Bi.identity(),n=Bi.identity();switch(this.m_sweepA.getTransform(i,e),this.m_sweepB.getTransform(n,e),this.m_type){case 1:if(t){var o=Ai.mulTVec2(i.q,this.m_axis),r=Ai.mulTVec2(n.q,$i.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(o),this.indexB=this.m_proxyB.getSupport(r)}var s=this.m_proxyA.getVertex(this.indexA),a=this.m_proxyB.getVertex(this.indexB),l=Bi.mulVec2(i,s),c=Bi.mulVec2(n,a);return $i.dot(c,this.m_axis)-$i.dot(l,this.m_axis);case 2:var u=Ai.mulVec2(i.q,this.m_axis);l=Bi.mulVec2(i,this.m_localPoint);if(t){r=Ai.mulTVec2(n.q,$i.neg(u));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(r)}a=this.m_proxyB.getVertex(this.indexB),c=Bi.mulVec2(n,a);return $i.dot(c,u)-$i.dot(l,u);case 3:u=Ai.mulVec2(n.q,this.m_axis),c=Bi.mulVec2(n,this.m_localPoint);if(t){o=Ai.mulTVec2(i.q,$i.neg(u));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(o)}s=this.m_proxyA.getVertex(this.indexA),l=Bi.mulVec2(i,s);return $i.dot(l,u)-$i.dot(c,u);default:return _i&&vi.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},zi.prototype.findMinSeparation=function(t){return this.compute(!0,t)},zi.prototype.evaluate=function(t){return this.compute(!1,t)};var Fi="undefined"!=typeof DEBUG&&DEBUG,Ii="undefined"!=typeof ASSERT&&ASSERT;H.exports=Gi,H.exports.TimeStep=Hi;var ki=y,Vi=i,Li=p,ji=r.exports,Ri=kt,Di=ii,Oi=ui,qi=di.exports,Ni=qi.Input,Ui=qi.Output,Wi=_e.exports;function Hi(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function Gi(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}Wi.Input,Wi.Output,Wi.Proxy,Wi.Cache,Hi.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},Gi.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},Gi.prototype.addBody=function(t){Ii&&Vi.assert(t instanceof Ri,"Not a Body!",t),this.m_bodies.push(t)},Gi.prototype.addContact=function(t){Ii&&Vi.assert(t instanceof Di,"Not a Contact!",t),this.m_contacts.push(t)},Gi.prototype.addJoint=function(t){Ii&&Vi.assert(t instanceof Oi,"Not a Joint!",t),this.m_joints.push(t)},Gi.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var n=e.m_contactList;n;n=n.m_next)n.m_islandFlag=!1;for(var o=e.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var r=this.m_stack,s=e.m_bodyList;s;s=s.m_next)if(!s.m_islandFlag&&0!=s.isAwake()&&0!=s.isActive()&&!s.isStatic()){for(this.clear(),r.push(s),s.m_islandFlag=!0;r.length>0;){i=r.pop();if(Ii&&Vi.assert(1==i.isActive()),this.addBody(i),i.setAwake(!0),!i.isStatic()){for(var a=i.m_contactList;a;a=a.next){var l=a.contact;if(!l.m_islandFlag&&(0!=l.isEnabled()&&0!=l.isTouching())){var c=l.m_fixtureA.m_isSensor,u=l.m_fixtureB.m_isSensor;if(!c&&!u)this.addContact(l),l.m_islandFlag=!0,(m=a.other).m_islandFlag||(r.push(m),m.m_islandFlag=!0)}}for(var h=i.m_jointList;h;h=h.next){var m;if(1!=h.joint.m_islandFlag)0!=(m=h.other).isActive()&&(this.addJoint(h.joint),h.joint.m_islandFlag=!0,m.m_islandFlag||(r.push(m),m.m_islandFlag=!0))}}}this.solveIsland(t);for(var p=0;p<this.m_bodies.length;++p){(i=this.m_bodies[p]).isStatic()&&(i.m_islandFlag=!1)}}},Gi.prototype.solveIsland=function(t){for(var e=this.m_world,i=e.m_gravity,n=e.m_allowSleep,o=t.dt,r=0;r<this.m_bodies.length;++r){var s=this.m_bodies[r],a=Li.clone(s.m_sweep.c),l=s.m_sweep.a,c=Li.clone(s.m_linearVelocity),u=s.m_angularVelocity;s.m_sweep.c0.set(s.m_sweep.c),s.m_sweep.a0=s.m_sweep.a,s.isDynamic()&&(c.addMul(o*s.m_gravityScale,i),c.addMul(o*s.m_invMass,s.m_force),u+=o*s.m_invI*s.m_torque,c.mul(1/(1+o*s.m_linearDamping)),u*=1/(1+o*s.m_angularDamping)),s.c_position.c=a,s.c_position.a=l,s.c_velocity.v=c,s.c_velocity.w=u}for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].initConstraint(t)}Fi&&this.printBodies("M: ");for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].initVelocityConstraint(t)}if(Fi&&this.printBodies("R: "),t.warmStarting)for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].warmStartConstraint(t)}Fi&&this.printBodies("Q: ");for(r=0;r<this.m_joints.length;++r){this.m_joints[r].initVelocityConstraints(t)}Fi&&this.printBodies("E: ");for(r=0;r<t.velocityIterations;++r){for(var h=0;h<this.m_joints.length;++h){this.m_joints[h].solveVelocityConstraints(t)}for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].solveVelocityConstraint(t)}}Fi&&this.printBodies("D: ");for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].storeConstraintImpulses(t)}Fi&&this.printBodies("C: ");for(r=0;r<this.m_bodies.length;++r){s=this.m_bodies[r],a=Li.clone(s.c_position.c),l=s.c_position.a,c=Li.clone(s.c_velocity.v),u=s.c_velocity.w;var m=Li.mul(o,c);if(Li.lengthSquared(m)>ki.maxTranslationSquared){var p=ki.maxTranslation/m.length();c.mul(p)}var d=o*u;if(d*d>ki.maxRotationSquared)u*=p=ki.maxRotation/ji.abs(d);a.addMul(o,c),l+=o*u,s.c_position.c.set(a),s.c_position.a=l,s.c_velocity.v.set(c),s.c_velocity.w=u}Fi&&this.printBodies("B: ");var f=!1;for(r=0;r<t.positionIterations;++r){var _=0;for(h=0;h<this.m_contacts.length;++h){var y=this.m_contacts[h].solvePositionConstraint(t);_=ji.min(_,y)}var v=_>=-3*ki.linearSlop,g=!0;for(h=0;h<this.m_joints.length;++h){var b=this.m_joints[h].solvePositionConstraints(t);g=g&&b}if(v&&g){f=!0;break}}Fi&&this.printBodies("L: ");for(r=0;r<this.m_bodies.length;++r){(s=this.m_bodies[r]).m_sweep.c.set(s.c_position.c),s.m_sweep.a=s.c_position.a,s.m_linearVelocity.set(s.c_velocity.v),s.m_angularVelocity=s.c_velocity.w,s.synchronizeTransform()}if(this.postSolveIsland(),n){var x=1/0,$=ki.linearSleepToleranceSqr,A=ki.angularSleepToleranceSqr;for(r=0;r<this.m_bodies.length;++r){(s=this.m_bodies[r]).isStatic()||(0==s.m_autoSleepFlag||s.m_angularVelocity*s.m_angularVelocity>A||Li.lengthSquared(s.m_linearVelocity)>$?(s.m_sleepTime=0,x=0):(s.m_sleepTime+=o,x=ji.min(x,s.m_sleepTime)))}if(x>=ki.timeToSleep&&f)for(r=0;r<this.m_bodies.length;++r){(s=this.m_bodies[r]).setAwake(!1)}}},Gi.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var i=this.m_bodies[e];Vi.debug(t,i.c_position.a,i.c_position.c.x,i.c_position.c.y,i.c_velocity.w,i.c_velocity.v.x,i.c_velocity.v.y)}};var Yi=new Hi;function Ji(){this.normalImpulses=[],this.tangentImpulses=[]}Gi.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1,i.m_sweep.alpha0=0;for(var n=e.m_contactList;n;n=n.m_next)n.m_toiFlag=!1,n.m_islandFlag=!1,n.m_toiCount=0,n.m_toi=1}for(;;){var o=null,r=1;for(n=e.m_contactList;n;n=n.m_next)if(0!=n.isEnabled()&&!(n.m_toiCount>ki.maxSubSteps)){var s=1;if(n.m_toiFlag)s=n.m_toi;else{var a=n.getFixtureA(),l=n.getFixtureB();if(a.isSensor()||l.isSensor())continue;var c=a.getBody(),u=l.getBody();Ii&&Vi.assert(c.isDynamic()||u.isDynamic());var h=c.isAwake()&&!c.isStatic(),m=u.isAwake()&&!u.isStatic();if(0==h&&0==m)continue;var p=c.isBullet()||!c.isDynamic(),d=u.isBullet()||!u.isDynamic();if(0==p&&0==d)continue;var f=c.m_sweep.alpha0;c.m_sweep.alpha0<u.m_sweep.alpha0?(f=u.m_sweep.alpha0,c.m_sweep.advance(f)):u.m_sweep.alpha0<c.m_sweep.alpha0&&(f=c.m_sweep.alpha0,u.m_sweep.advance(f)),Ii&&Vi.assert(f<1);var _=n.getChildIndexA(),y=n.getChildIndexB();c.m_sweep,u.m_sweep;var v=new Ni;v.proxyA.set(a.getShape(),_),v.proxyB.set(l.getShape(),y),v.sweepA.set(c.m_sweep),v.sweepB.set(u.m_sweep),v.tMax=1;var g=new Ui;qi(g,v);var b=g.t;s=g.state==Ui.e_touching?ji.min(f+(1-f)*b,1):1,n.m_toi=s,n.m_toiFlag=!0}s<r&&(o=n,r=s)}if(null==o||1-10*ji.EPSILON<r){e.m_stepComplete=!0;break}a=o.getFixtureA(),l=o.getFixtureB(),c=a.getBody(),u=l.getBody();var x=c.m_sweep.clone(),$=u.m_sweep.clone();if(c.advance(r),u.advance(r),o.update(e),o.m_toiFlag=!1,++o.m_toiCount,0!=o.isEnabled()&&0!=o.isTouching()){c.setAwake(!0),u.setAwake(!0),this.clear(),this.addBody(c),this.addBody(u),this.addContact(o),c.m_islandFlag=!0,u.m_islandFlag=!0,o.m_islandFlag=!0;for(var A=[c,u],w=0;w<A.length;++w){if((P=A[w]).isDynamic())for(var B=P.m_contactList;B;B=B.next){var C=B.contact;if(!C.m_islandFlag){var S=B.other;if(!S.isDynamic()||P.isBullet()||S.isBullet()){var E=C.m_fixtureA.m_isSensor,M=C.m_fixtureB.m_isSensor;if(!E&&!M){var T=S.m_sweep.clone();0==S.m_islandFlag&&S.advance(r),C.update(e),0!=C.isEnabled()&&0!=C.isTouching()?(C.m_islandFlag=!0,this.addContact(C),S.m_islandFlag||(S.m_islandFlag=!0,S.isStatic()||S.setAwake(!0),this.addBody(S))):(S.m_sweep.set(T),S.synchronizeTransform())}}}}}Yi.reset((1-r)*t.dt),Yi.dtRatio=1,Yi.positionIterations=20,Yi.velocityIterations=t.velocityIterations,Yi.warmStarting=!1,this.solveIslandTOI(Yi,c,u);for(w=0;w<this.m_bodies.length;++w){var P;if((P=this.m_bodies[w]).m_islandFlag=!1,P.isDynamic()){P.synchronizeFixtures();for(B=P.m_contactList;B;B=B.next)B.contact.m_toiFlag=!1,B.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else o.setEnabled(!1),c.m_sweep.set(x),u.m_sweep.set($),c.synchronizeTransform(),u.synchronizeTransform()}if(Fi)for(i=e.m_bodyList;i;i=i.m_next){n=i.m_sweep.c;i.m_sweep.a,i.m_linearVelocity,i.m_angularVelocity}},Gi.prototype.solveIslandTOI=function(t,e,i){this.m_world;for(var n=0;n<this.m_bodies.length;++n){(l=this.m_bodies[n]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity}for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initConstraint(t)}for(n=0;n<t.positionIterations;++n){for(var o=0,r=0;r<this.m_contacts.length;++r){var s=this.m_contacts[r].solvePositionConstraintTOI(t,e,i);o=ji.min(o,s)}if(o>=-1.5*ki.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,i.m_sweep.c0.set(i.c_position.c),i.m_sweep.a0=i.c_position.a;for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initVelocityConstraint(t)}for(n=0;n<t.velocityIterations;++n)for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].solveVelocityConstraint(t)}var a=t.dt;for(n=0;n<this.m_bodies.length;++n){var l=this.m_bodies[n],c=Li.clone(l.c_position.c),u=l.c_position.a,h=Li.clone(l.c_velocity.v),m=l.c_velocity.w,p=Li.mul(a,h);if(Li.dot(p,p)>ki.maxTranslationSquared){var d=ki.maxTranslation/p.length();h.mul(d)}var f=a*m;if(f*f>ki.maxRotationSquared)m*=d=ki.maxRotation/ji.abs(f);c.addMul(a,h),u+=a*m,l.c_position.c=c,l.c_position.a=u,l.c_velocity.v=h,l.c_velocity.w=m,l.m_sweep.c=c,l.m_sweep.a=u,l.m_linearVelocity=h,l.m_angularVelocity=m,l.synchronizeTransform()}this.postSolveIsland()},Gi.prototype.postSolveIsland=function(){for(var t=new Ji,e=0;e<this.m_contacts.length;++e){for(var i=this.m_contacts[e],n=0;n<i.v_points.length;++n)t.normalImpulses.push(i.v_points[n].normalImpulse),t.tangentImpulses.push(i.v_points[n].tangentImpulse);this.m_world.postSolve(i,t)}},"undefined"!=typeof DEBUG&&DEBUG;var Zi="undefined"!=typeof ASSERT&&ASSERT,Xi=ln,Ki=e,Qi=i,tn=p,en=U,nn=H.exports,on=kt,rn=ui,sn=ii,an={gravity:tn.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function ln(t){if(!(this instanceof ln))return new ln(t);t&&tn.isValid(t)&&(t={gravity:t}),t=Ki(t,an),this.m_solver=new nn(this),this.m_broadPhase=new en,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=tn.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.addPair=this.createContact.bind(this)}ln.prototype._serialize=function(){for(var t=[],e=[],i=this.getBodyList();i;i=i.getNext())t.push(i);for(var n=this.getJointList();n;n=n.getNext())"function"==typeof n._serialize&&e.push(n);return{gravity:this.m_gravity,bodies:t,joints:e}},ln._deserialize=function(t,e,i){if(!t)return new ln;var n=new ln(t.gravity);if(t.bodies)for(var o=t.bodies.length-1;o>=0;o-=1)n._addBody(i(on,t.bodies[o],n));if(t.joints)for(o=t.joints.length-1;o>=0;o--)n.createJoint(i(rn,t.joints[o],n));return n},ln.prototype.getBodyList=function(){return this.m_bodyList},ln.prototype.getJointList=function(){return this.m_jointList},ln.prototype.getContactList=function(){return this.m_contactList},ln.prototype.getBodyCount=function(){return this.m_bodyCount},ln.prototype.getJointCount=function(){return this.m_jointCount},ln.prototype.getContactCount=function(){return this.m_contactCount},ln.prototype.setGravity=function(t){this.m_gravity=t},ln.prototype.getGravity=function(){return this.m_gravity},ln.prototype.isLocked=function(){return this.m_locked},ln.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},ln.prototype.getAllowSleeping=function(){return this.m_allowSleep},ln.prototype.setWarmStarting=function(t){this.m_warmStarting=t},ln.prototype.getWarmStarting=function(){return this.m_warmStarting},ln.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},ln.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},ln.prototype.setSubStepping=function(t){this.m_subStepping=t},ln.prototype.getSubStepping=function(){return this.m_subStepping},ln.prototype.setAutoClearForces=function(t){this.m_clearForces=t},ln.prototype.getAutoClearForces=function(){return this.m_clearForces},ln.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},ln.prototype.queryAABB=function(t,e){Zi&&Qi.assert("function"==typeof e);var i=this.m_broadPhase;this.m_broadPhase.query(t,(function(t){var n=i.getUserData(t);return e(n.fixture)}))},ln.prototype.rayCast=function(t,e,i){Zi&&Qi.assert("function"==typeof i);var n=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},(function(t,e){var o=n.getUserData(e),r=o.fixture,s=o.childIndex,a={};if(r.rayCast(a,t,s)){var l=a.fraction,c=tn.add(tn.mul(1-l,t.p1),tn.mul(l,t.p2));return i(r,c,a.normal,l)}return t.maxFraction}))},ln.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},ln.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},ln.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},ln.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},ln.prototype.shiftOrigin=function(t){if(Zi&&Qi.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var i=this.m_jointList;i;i=i.m_next)i.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},ln.prototype._addBody=function(t){Zi&&Qi.assert(!1===this.isLocked()),this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},ln.prototype.createBody=function(t,e){if(Zi&&Qi.assert(0==this.isLocked()),this.isLocked())return null;t&&tn.isValid(t)&&(t={position:t,angle:e});var i=new on(this,t);return this._addBody(i),i},ln.prototype.createDynamicBody=function(t,e){return t?tn.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},ln.prototype.createKinematicBody=function(t,e){return t?tn.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},ln.prototype.destroyBody=function(t){if(Zi&&Qi.assert(this.m_bodyCount>0),Zi&&Qi.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var i=e;e=e.next,this.publish("remove-joint",i.joint),this.destroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var n=t.m_contactList;n;){var o=n;n=n.next,this.destroyContact(o.contact),t.m_contactList=n}t.m_contactList=null;for(var r=t.m_fixtureList;r;){var s=r;r=r.m_next,this.publish("remove-fixture",s),s.destroyProxies(this.m_broadPhase),t.m_fixtureList=r}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},ln.prototype.createJoint=function(t){if(Zi&&Qi.assert(!!t.m_bodyA),Zi&&Qi.assert(!!t.m_bodyB),Zi&&Qi.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},ln.prototype.destroyJoint=function(t){if(Zi&&Qi.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,i=t.m_bodyB;if(e.setAwake(!0),i.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,Zi&&Qi.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var n=i.getContactList();n;)n.other==e&&n.contact.flagForFiltering(),n=n.next;this.publish("remove-joint",t)}};var cn=new nn.TimeStep;ln.prototype.step=function(t,e,i){if(this.publish("pre-step",t),(0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,cn.reset(t),cn.velocityIterations=e,cn.positionIterations=i,cn.warmStarting=this.m_warmStarting,cn.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(cn);for(var n=this.m_bodyList;n;n=n.getNext())0!=n.m_islandFlag&&(n.isStatic()||n.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(cn),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",t)},ln.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},ln.prototype.createContact=function(t,e){var i=t.fixture,n=e.fixture,o=t.childIndex,r=e.childIndex,s=i.getBody(),a=n.getBody();if(s!=a){for(var l=a.getContactList();l;){if(l.other==s){var c=l.contact.getFixtureA(),u=l.contact.getFixtureB(),h=l.contact.getChildIndexA(),m=l.contact.getChildIndexB();if(c==i&&u==n&&h==o&&m==r)return;if(c==n&&u==i&&h==r&&m==o)return}l=l.next}if(0!=a.shouldCollide(s)&&0!=n.shouldCollide(i)){var p=sn.create(i,o,n,r);null!=p&&(p.m_prev=null,null!=this.m_contactList&&(p.m_next=this.m_contactList,this.m_contactList.m_prev=p),this.m_contactList=p,++this.m_contactCount)}}},ln.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),n=t.getFixtureB(),o=t.getChildIndexA(),r=t.getChildIndexB(),s=i.getBody(),a=n.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==n.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var l=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=l||0!=c){var u=i.m_proxies[o].proxyId,h=n.m_proxies[r].proxyId;0!=this.m_broadPhase.testOverlap(u,h)?t.update(this):this.destroyContact(t)}}},ln.prototype.destroyContact=function(t){sn.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},ln.prototype._listeners=null,ln.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e||(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this},ln.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var n=i.indexOf(e);return n>=0&&i.splice(n,1),this},ln.prototype.publish=function(t,e,i,n){var o=this._listeners&&this._listeners[t];if(!o||!o.length)return 0;for(var r=0;r<o.length;r++)o[r].call(this,e,i,n);return o.length},ln.prototype.beginContact=function(t){this.publish("begin-contact",t)},ln.prototype.endContact=function(t){this.publish("end-contact",t)},ln.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},ln.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)};var un=Xi,hn=kt,mn=ui,pn=wt,dn=xt,fn=p,_n=be,yn=0;function vn(t){var e=(t=t||{}).rootClass||un,i=t.preSerialize||function(t){return t},n=t.postSerialize||function(t,e){return t},o=t.preDeserialize||function(t){return t},r=t.postDeserialize||function(t,e){return t},s={World:un,Body:hn,Joint:mn,Fixture:pn,Shape:dn},a=Object.assign({Vec2:fn,Vec3:_n},s);this.toJson=function(t){var e=[],o=[t],r={};function a(t,i){if(t.__sid=t.__sid||++yn,!r[t.__sid]){o.push(t);var n={refIndex:e.length+o.length,refType:i};r[t.__sid]=n}return r[t.__sid]}function l(t,e){if("object"!=typeof t||null===t)return t;if("function"==typeof t._serialize){if(t!==e)for(var o in s)if(t instanceof s[o])return a(t,o);c=(r=i(r=t))._serialize(),t=n(c,r)}var r,c;if(Array.isArray(t)){for(var u=[],h=0;h<t.length;h++)u[h]=l(t[h]);t=u}else{u={};for(var h in t)t.hasOwnProperty(h)&&(u[h]=l(t[h]));t=u}return t}for(;o.length;){var c=o.shift(),u=l(c,c);e.push(u)}return e},this.fromJson=function(t){var i={};function n(t,e,i){e=o(e);var n=t._deserialize(e,i,s);return n=r(n,e)}function s(e,o,r){if(!o.refIndex)return e&&e._deserialize&&n(e,o,r);e=a[o.refType]||e;var s=o.refIndex;if(!i[s]){var l=n(e,t[s],r);i[s]=l}return i[s]}return e._deserialize(t[0],null,s)}}t.exports=vn;var gn=new vn,bn=t.exports.toJson=gn.toJson,xn=t.exports.fromJson=gn.fromJson,$n={};"undefined"!=typeof DEBUG&&DEBUG;var An="undefined"!=typeof ASSERT&&ASSERT,wn=Tn,Bn=i,Cn=r.exports,Sn=J,En=p,Mn=xt;function Tn(t,e){if(!(this instanceof Tn))return new Tn(t,e);Tn._super.call(this),this.m_type=Tn.TYPE,this.m_p=En.zero(),this.m_radius=1,"object"==typeof t&&En.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}Tn._super=Mn,Tn.prototype=Object.create(Tn._super.prototype),Tn.TYPE="circle",Mn.TYPES[Tn.TYPE]=Tn,Tn.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},Tn._deserialize=function(t){return new Tn(t.p,t.radius)},Tn.prototype.getRadius=function(){return this.m_radius},Tn.prototype.getCenter=function(){return this.m_p},Tn.prototype.getVertex=function(t){return An&&Bn.assert(0==t),this.m_p},Tn.prototype.getVertexCount=function(t){return 1},Tn.prototype._clone=function(){var t=new Tn;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},Tn.prototype.getChildCount=function(){return 1},Tn.prototype.testPoint=function(t,e){var i=En.add(t.p,Sn.mulVec2(t.q,this.m_p)),n=En.sub(e,i);return En.dot(n,n)<=this.m_radius*this.m_radius},Tn.prototype.rayCast=function(t,e,i,n){var o=En.add(i.p,Sn.mulVec2(i.q,this.m_p)),r=En.sub(e.p1,o),s=En.dot(r,r)-this.m_radius*this.m_radius,a=En.sub(e.p2,e.p1),l=En.dot(r,a),c=En.dot(a,a),u=l*l-c*s;if(u<0||c<Cn.EPSILON)return!1;var h=-(l+Cn.sqrt(u));return 0<=h&&h<=e.maxFraction*c&&(h/=c,t.fraction=h,t.normal=En.add(r,En.mul(h,a)),t.normal.normalize(),!0)},Tn.prototype.computeAABB=function(t,e,i){var n=En.add(e.p,Sn.mulVec2(e.q,this.m_p));t.lowerBound.set(n.x-this.m_radius,n.y-this.m_radius),t.upperBound.set(n.x+this.m_radius,n.y+this.m_radius)},Tn.prototype.computeMass=function(t,e){t.mass=e*Cn.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+En.dot(this.m_p,this.m_p))},Tn.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var Pn=Ln,zn=y,Fn=xt,In=it,kn=J,Vn=p;function Ln(t,e){if(!(this instanceof Ln))return new Ln(t,e);Ln._super.call(this),this.m_type=Ln.TYPE,this.m_radius=zn.polygonRadius,this.m_vertex1=t?Vn.clone(t):Vn.zero(),this.m_vertex2=e?Vn.clone(e):Vn.zero(),this.m_vertex0=Vn.zero(),this.m_vertex3=Vn.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}Ln._super=Fn,Ln.prototype=Object.create(Ln._super.prototype),Ln.TYPE="edge",Fn.TYPES[Ln.TYPE]=Ln,Ln.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},Ln._deserialize=function(t){var e=new Ln(t.vertex1,t.vertex2);return e.hasVertex0&&e.setPrev(t.vertex0),e.hasVertex3&&e.setNext(t.vertex3),e},Ln.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},Ln.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},Ln.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},Ln.prototype._clone=function(){var t=new Ln;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},Ln.prototype.getChildCount=function(){return 1},Ln.prototype.testPoint=function(t,e){return!1},Ln.prototype.rayCast=function(t,e,i,n){var o=kn.mulTVec2(i.q,Vn.sub(e.p1,i.p)),r=kn.mulTVec2(i.q,Vn.sub(e.p2,i.p)),s=Vn.sub(r,o),a=this.m_vertex1,l=this.m_vertex2,c=Vn.sub(l,a),u=Vn.neo(c.y,-c.x);u.normalize();var h=Vn.dot(u,Vn.sub(a,o)),m=Vn.dot(u,s);if(0==m)return!1;var p=h/m;if(p<0||e.maxFraction<p)return!1;var d=Vn.add(o,Vn.mul(p,s)),f=Vn.sub(l,a),_=Vn.dot(f,f);if(0==_)return!1;var y=Vn.dot(Vn.sub(d,a),f)/_;return!(y<0||1<y)&&(t.fraction=p,t.normal=h>0?kn.mulVec2(i.q,u).neg():kn.mulVec2(i.q,u),!0)},Ln.prototype.computeAABB=function(t,e,i){var n=In.mulVec2(e,this.m_vertex1),o=In.mulVec2(e,this.m_vertex2);t.combinePoints(n,o),t.extend(this.m_radius)},Ln.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},Ln.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var jn="undefined"!=typeof ASSERT&&ASSERT,Rn=Gn,Dn=i,On=r.exports,qn=it,Nn=J,Un=p,Wn=y,Hn=xt;function Gn(t){if(!(this instanceof Gn))return new Gn(t);Gn._super.call(this),this.m_type=Gn.TYPE,this.m_radius=Wn.polygonRadius,this.m_centroid=Un.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}Gn._super=Hn,Gn.prototype=Object.create(Gn._super.prototype),Gn.TYPE="polygon",Hn.TYPES[Gn.TYPE]=Gn,Gn.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},Gn._deserialize=function(t,e,i){var n=[];if(t.vertices)for(var o=0;o<t.vertices.length;o++)n.push(i(Un,t.vertices[o]));return new Gn(n)},Gn.prototype.getVertex=function(t){return jn&&Dn.assert(0<=t&&t<this.m_count),this.m_vertices[t]},Gn.prototype._clone=function(){var t=new Gn;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},Gn.prototype.getChildCount=function(){return 1},Gn.prototype._reset=function(){this._set(this.m_vertices)},Gn.prototype._set=function(t){if(jn&&Dn.assert(3<=t.length&&t.length<=Wn.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=On.min(t.length,Wn.maxPolygonVertices),i=[],n=0;n<e;++n){for(var o=t[n],r=!0,s=0;s<i.length;++s)if(Un.distanceSquared(o,i[s])<.25*Wn.linearSlopSquared){r=!1;break}r&&i.push(o)}if((e=i.length)<3)return jn&&Dn.assert(!1),void this._setAsBox(1,1);var a=0,l=i[0].x;for(n=1;n<e;++n){var c=i[n].x;(c>l||c===l&&i[n].y<i[a].y)&&(a=n,l=c)}for(var u=[],h=0,m=a;;){u[h]=m;var p=0;for(s=1;s<e;++s)if(p!==m){var d=Un.sub(i[p],i[u[h]]),f=(o=Un.sub(i[s],i[u[h]]),Un.cross(d,o));f<0&&(p=s),0===f&&o.lengthSquared()>d.lengthSquared()&&(p=s)}else p=s;if(++h,m=p,p===a)break}if(h<3)return jn&&Dn.assert(!1),void this._setAsBox(1,1);this.m_count=h,this.m_vertices=[];for(n=0;n<h;++n)this.m_vertices[n]=i[u[n]];for(n=0;n<h;++n){var _=n,y=n+1<h?n+1:0,v=Un.sub(this.m_vertices[y],this.m_vertices[_]);jn&&Dn.assert(v.lengthSquared()>On.EPSILON*On.EPSILON),this.m_normals[n]=Un.cross(v,1),this.m_normals[n].normalize()}this.m_centroid=function(t,e){jn&&Dn.assert(e>=3);for(var i=Un.zero(),n=0,o=Un.zero(),r=1/3,s=0;s<e;++s){var a=o,l=t[s],c=s+1<e?t[s+1]:t[0],u=Un.sub(l,a),h=Un.sub(c,a),m=.5*Un.cross(u,h);n+=m,i.addMul(m*r,a),i.addMul(m*r,l),i.addMul(m*r,c)}return jn&&Dn.assert(n>On.EPSILON),i.mul(1/n),i}(this.m_vertices,h)}},Gn.prototype._setAsBox=function(t,e,i,n){if(this.m_vertices[0]=Un.neo(t,-e),this.m_vertices[1]=Un.neo(t,e),this.m_vertices[2]=Un.neo(-t,e),this.m_vertices[3]=Un.neo(-t,-e),this.m_normals[0]=Un.neo(1,0),this.m_normals[1]=Un.neo(0,1),this.m_normals[2]=Un.neo(-1,0),this.m_normals[3]=Un.neo(0,-1),this.m_count=4,Un.isValid(i)){n=n||0,this.m_centroid.set(i);var o=qn.identity();o.p.set(i),o.q.set(n);for(var r=0;r<this.m_count;++r)this.m_vertices[r]=qn.mulVec2(o,this.m_vertices[r]),this.m_normals[r]=Nn.mulVec2(o.q,this.m_normals[r])}},Gn.prototype.testPoint=function(t,e){for(var i=Nn.mulTVec2(t.q,Un.sub(e,t.p)),n=0;n<this.m_count;++n){if(Un.dot(this.m_normals[n],Un.sub(i,this.m_vertices[n]))>0)return!1}return!0},Gn.prototype.rayCast=function(t,e,i,n){for(var o=Nn.mulTVec2(i.q,Un.sub(e.p1,i.p)),r=Nn.mulTVec2(i.q,Un.sub(e.p2,i.p)),s=Un.sub(r,o),a=0,l=e.maxFraction,c=-1,u=0;u<this.m_count;++u){var h=Un.dot(this.m_normals[u],Un.sub(this.m_vertices[u],o)),m=Un.dot(this.m_normals[u],s);if(0==m){if(h<0)return!1}else m<0&&h<a*m?(a=h/m,c=u):m>0&&h<l*m&&(l=h/m);if(l<a)return!1}return jn&&Dn.assert(0<=a&&a<=e.maxFraction),c>=0&&(t.fraction=a,t.normal=Nn.mulVec2(i.q,this.m_normals[c]),!0)},Gn.prototype.computeAABB=function(t,e,i){for(var n=1/0,o=1/0,r=-1/0,s=-1/0,a=0;a<this.m_count;++a){var l=qn.mulVec2(e,this.m_vertices[a]);n=On.min(n,l.x),r=On.max(r,l.x),o=On.min(o,l.y),s=On.max(s,l.y)}t.lowerBound.set(n,o),t.upperBound.set(r,s),t.extend(this.m_radius)},Gn.prototype.computeMass=function(t,e){jn&&Dn.assert(this.m_count>=3);for(var i=Un.zero(),n=0,o=0,r=Un.zero(),s=0;s<this.m_count;++s)r.add(this.m_vertices[s]);r.mul(1/this.m_count);var a=1/3;for(s=0;s<this.m_count;++s){var l=Un.sub(this.m_vertices[s],r),c=s+1<this.m_count?Un.sub(this.m_vertices[s+1],r):Un.sub(this.m_vertices[0],r),u=Un.cross(l,c),h=.5*u;n+=h,i.addCombine(h*a,l,h*a,c);var m=l.x,p=l.y,d=c.x,f=c.y;o+=.25*a*u*(m*m+d*m+d*d+(p*p+f*p+f*f))}t.mass=e*n,jn&&Dn.assert(n>On.EPSILON),i.mul(1/n),t.center.setCombine(1,i,1,r),t.I=e*o,t.I+=t.mass*(Un.dot(t.center,t.center)-Un.dot(i,i))},Gn.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=t<this.m_count-1?e+1:0,n=this.m_vertices[e],o=Un.sub(this.m_vertices[i],n),r=0;r<this.m_count;++r)if(r!=e&&r!=i){var s=Un.sub(this.m_vertices[r],n);if(Un.cross(o,s)<0)return!1}return!0},Gn.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG;var Yn="undefined"!=typeof ASSERT&&ASSERT,Jn=io,Zn=i,Xn=it,Kn=p,Qn=y,to=xt,eo=Pn;function io(t,e){if(!(this instanceof io))return new io(t,e);io._super.call(this),this.m_type=io.TYPE,this.m_radius=Qn.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_isLoop=e,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}io._super=to,io.prototype=Object.create(io._super.prototype),io.TYPE="chain",to.TYPES[io.TYPE]=io,io.prototype._serialize=function(){const t={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex};return this.m_prevVertex&&(t.prevVertex=this.m_prevVertex),this.m_nextVertex&&(t.nextVertex=this.m_nextVertex),t},io._deserialize=function(t,e,i){var n=[];if(t.vertices)for(var o=0;o<t.vertices.length;o++)n.push(i(Kn,t.vertices[o]));var r=new io(n,t.isLoop);return t.prevVertex&&r.setPrevVertex(t.prevVertex),t.nextVertex&&r.setNextVertex(t.nextVertex),r},io.prototype._createLoop=function(t){Yn&&Zn.assert(0==this.m_vertices.length&&0==this.m_count),Yn&&Zn.assert(t.length>=3);for(var e=1;e<t.length;++e){var i=t[e-1],n=t[e];Yn&&Zn.assert(Kn.distanceSquared(i,n)>Qn.linearSlopSquared)}this.m_vertices=[],this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=Kn.clone(t[e]);return this.m_vertices[t.length]=Kn.clone(t[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},io.prototype._createChain=function(t){Yn&&Zn.assert(0==this.m_vertices.length&&0==this.m_count),Yn&&Zn.assert(t.length>=2);for(var e=1;e<t.length;++e){var i=t[e-1],n=t[e];Yn&&Zn.assert(Kn.distanceSquared(i,n)>Qn.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=Kn.clone(t[e]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},io.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},io.prototype.setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},io.prototype.setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},io.prototype._clone=function(){var t=new io;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},io.prototype.getChildCount=function(){return this.m_count-1},io.prototype.getChildEdge=function(t,e){Yn&&Zn.assert(0<=e&&e<this.m_count-1),t.m_type=eo.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},io.prototype.getVertex=function(t){return Yn&&Zn.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},io.prototype.testPoint=function(t,e){return!1},io.prototype.rayCast=function(t,e,i,n){return Yn&&Zn.assert(0<=n&&n<this.m_count),new eo(this.getVertex(n),this.getVertex(n+1)).rayCast(t,e,i,0)},io.prototype.computeAABB=function(t,e,i){Yn&&Zn.assert(0<=i&&i<this.m_count);var n=Xn.mulVec2(e,this.getVertex(i)),o=Xn.mulVec2(e,this.getVertex(i+1));t.combinePoints(n,o)},io.prototype.computeMass=function(t,e){t.mass=0,t.center=Kn.neo(),t.I=0},io.prototype.computeDistanceProxy=function(t,e){Yn&&Zn.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var no=ro,oo=Rn;function ro(t,e,i,n){if(!(this instanceof ro))return new ro(t,e,i,n);ro._super.call(this),this._setAsBox(t,e,i,n)}ro._super=oo,ro.prototype=Object.create(ro._super.prototype),ro.TYPE="polygon","undefined"!=typeof DEBUG&&DEBUG;var so="undefined"!=typeof ASSERT&&ASSERT,ao=i,lo=it,co=p,uo=ii,ho=oe.exports,mo=wn;uo.addType(mo.TYPE,mo.TYPE,(function(t,e,i,n,o,r,s){so&&ao.assert(i.getType()==mo.TYPE),so&&ao.assert(r.getType()==mo.TYPE),function(t,e,i,n,o){t.pointCount=0;var r=lo.mulVec2(i,e.m_p),s=lo.mulVec2(o,n.m_p),a=co.distanceSquared(s,r),l=e.m_radius,c=n.m_radius,u=l+c;if(a>u*u)return;t.type=ho.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=ho.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=ho.e_vertex}(t,i.getShape(),e,r.getShape(),o)})),"undefined"!=typeof DEBUG&&DEBUG;var po="undefined"!=typeof ASSERT&&ASSERT,fo=i,_o=it,yo=p,vo=ii,go=oe.exports,bo=Pn,xo=Jn,$o=wn;function Ao(t,e,i,n,o){t.pointCount=0;var r=_o.mulTVec2(i,_o.mulVec2(o,n.m_p)),s=e.m_vertex1,a=e.m_vertex2,l=yo.sub(a,s),c=yo.dot(l,yo.sub(a,r)),u=yo.dot(l,yo.sub(r,s)),h=e.m_radius+n.m_radius;if(u<=0){var m=yo.clone(s),p=yo.sub(r,m);if(yo.dot(p,p)>h*h)return;if(e.m_hasVertex0){var d=e.m_vertex0,f=s,_=yo.sub(f,d);if(yo.dot(_,yo.sub(f,r))>0)return}return t.type=go.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=go.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=go.e_vertex)}if(c<=0){m=yo.clone(a),p=yo.sub(r,m);if(yo.dot(p,p)>h*h)return;if(e.m_hasVertex3){var y=e.m_vertex3,v=a,g=yo.sub(y,v);if(yo.dot(g,yo.sub(r,v))>0)return}return t.type=go.e_circles,t.localNormal.setZero(),t.localPoint.set(m),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=go.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=go.e_vertex)}var b=yo.dot(l,l);po&&fo.assert(b>0);m=yo.combine(c/b,s,u/b,a),p=yo.sub(r,m);if(!(yo.dot(p,p)>h*h)){var x=yo.neo(-l.y,l.x);yo.dot(x,yo.sub(r,s))<0&&x.set(-x.x,-x.y),x.normalize(),t.type=go.e_faceA,t.localNormal=x,t.localPoint.set(s),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=go.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=go.e_vertex}}vo.addType(bo.TYPE,$o.TYPE,(function(t,e,i,n,o,r,s){po&&fo.assert(i.getType()==bo.TYPE),po&&fo.assert(r.getType()==$o.TYPE);var a=i.getShape(),l=r.getShape();Ao(t,a,e,l,o)})),vo.addType(xo.TYPE,$o.TYPE,(function(t,e,i,n,o,r,s){po&&fo.assert(i.getType()==xo.TYPE),po&&fo.assert(r.getType()==$o.TYPE);var a=i.getShape(),l=new bo;a.getChildEdge(l,n);var c=l,u=r.getShape();Ao(t,c,e,u,o)})),"undefined"!=typeof DEBUG&&DEBUG;var wo="undefined"!=typeof ASSERT&&ASSERT,Bo=i,Co=it,So=J,Eo=p,Mo=y,To=oe.exports,Po=Rn,zo=Io;function Fo(t,e,i,n){for(var o=t.m_count,r=i.m_count,s=t.m_normals,a=t.m_vertices,l=i.m_vertices,c=Co.mulTXf(n,e),u=0,h=-1/0,m=0;m<o;++m){for(var p=So.mulVec2(c.q,s[m]),d=Co.mulVec2(c,a[m]),f=1/0,_=0;_<r;++_){var y=Eo.dot(p,l[_])-Eo.dot(p,d);y<f&&(f=y)}f>h&&(h=f,u=m)}Fo._maxSeparation=h,Fo._bestIndex=u}function Io(t,e,i,n,o){t.pointCount=0;var r=e.m_radius+n.m_radius;Fo(e,i,n,o);var s=Fo._bestIndex,a=Fo._maxSeparation;if(!(a>r)){Fo(n,o,e,i);var l=Fo._bestIndex,c=Fo._maxSeparation;if(!(c>r)){var u,h,m,p,d,f;c>a+.1*Mo.linearSlop?(u=n,h=e,m=o,p=i,d=l,t.type=To.e_faceB,f=1):(u=e,h=n,m=i,p=o,d=s,t.type=To.e_faceA,f=0);var _=[new To.clipVertex,new To.clipVertex];!function(t,e,i,n,o,r){var s=e.m_normals,a=o.m_count,l=o.m_vertices,c=o.m_normals;wo&&Bo.assert(0<=n&&n<e.m_count);for(var u=So.mulT(r.q,So.mulVec2(i.q,s[n])),h=0,m=1/0,p=0;p<a;++p){var d=Eo.dot(u,c[p]);d<m&&(m=d,h=p)}var f=h,_=f+1<a?f+1:0;t[0].v=Co.mulVec2(r,l[f]),t[0].id.cf.indexA=n,t[0].id.cf.indexB=f,t[0].id.cf.typeA=To.e_face,t[0].id.cf.typeB=To.e_vertex,t[1].v=Co.mulVec2(r,l[_]),t[1].id.cf.indexA=n,t[1].id.cf.indexB=_,t[1].id.cf.typeA=To.e_face,t[1].id.cf.typeB=To.e_vertex}(_,u,m,d,h,p);var y=u.m_count,v=u.m_vertices,g=d,b=d+1<y?d+1:0,x=v[g],$=v[b],A=Eo.sub($,x);A.normalize();var w=Eo.cross(A,1),B=Eo.combine(.5,x,.5,$),C=So.mulVec2(m.q,A),S=Eo.cross(C,1);x=Co.mulVec2(m,x),$=Co.mulVec2(m,$);var E=Eo.dot(S,x),M=-Eo.dot(C,x)+r,T=Eo.dot(C,$)+r,P=[new To.clipVertex,new To.clipVertex],z=[new To.clipVertex,new To.clipVertex];if(!(To.clipSegmentToLine(P,_,Eo.neg(C),M,g)<2||To.clipSegmentToLine(z,P,C,T,b)<2)){t.localNormal=w,t.localPoint=B;for(var F=0,I=0;I<z.length;++I){if(Eo.dot(S,z[I].v)-E<=r){var k=t.points[F];if(k.localPoint.set(Co.mulTVec2(p,z[I].v)),k.id=z[I].id,f){var V=k.id.cf,L=V.indexA,j=V.indexB,R=V.typeA,D=V.typeB;V.indexA=j,V.indexB=L,V.typeA=D,V.typeB=R}++F}}t.pointCount=F}}}}ii.addType(Po.TYPE,Po.TYPE,(function(t,e,i,n,o,r,s){wo&&Bo.assert(i.getType()==Po.TYPE),wo&&Bo.assert(r.getType()==Po.TYPE),Io(t,i.getShape(),e,r.getShape(),o)})),"undefined"!=typeof DEBUG&&DEBUG;var ko="undefined"!=typeof ASSERT&&ASSERT,Vo=i,Lo=r.exports,jo=it,Ro=p,Do=oe.exports,Oo=wn,qo=Rn;ii.addType(qo.TYPE,Oo.TYPE,(function(t,e,i,n,o,r,s){ko&&Vo.assert(i.getType()==qo.TYPE),ko&&Vo.assert(r.getType()==Oo.TYPE),function(t,e,i,n,o){t.pointCount=0;for(var r=jo.mulVec2(o,n.m_p),s=jo.mulTVec2(i,r),a=0,l=-1/0,c=e.m_radius+n.m_radius,u=e.m_count,h=e.m_vertices,m=e.m_normals,p=0;p<u;++p){var d=Ro.dot(m[p],Ro.sub(s,h[p]));if(d>c)return;d>l&&(l=d,a=p)}var f=a,_=f+1<u?f+1:0,y=h[f],v=h[_];if(l<Lo.EPSILON)return t.pointCount=1,t.type=Do.e_faceA,t.localNormal.set(m[a]),t.localPoint.setCombine(.5,y,.5,v),t.points[0].localPoint=n.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=Do.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=Do.e_vertex);var g=Ro.dot(Ro.sub(s,y),Ro.sub(v,y)),b=Ro.dot(Ro.sub(s,v),Ro.sub(y,v));if(g<=0){if(Ro.distanceSquared(s,y)>c*c)return;t.pointCount=1,t.type=Do.e_faceA,t.localNormal.setCombine(1,s,-1,y),t.localNormal.normalize(),t.localPoint=y,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=Do.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=Do.e_vertex}else if(b<=0){if(Ro.distanceSquared(s,v)>c*c)return;t.pointCount=1,t.type=Do.e_faceA,t.localNormal.setCombine(1,s,-1,v),t.localNormal.normalize(),t.localPoint.set(v),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=Do.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=Do.e_vertex}else{var x=Ro.mid(y,v);if((l=Ro.dot(s,m[f])-Ro.dot(x,m[f]))>c)return;t.pointCount=1,t.type=Do.e_faceA,t.localNormal.set(m[f]),t.localPoint.set(x),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=Do.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=Do.e_vertex}}(t,i.getShape(),e,r.getShape(),o)})),"undefined"!=typeof DEBUG&&DEBUG;var No="undefined"!=typeof ASSERT&&ASSERT,Uo=i,Wo=r.exports,Ho=it,Go=p,Yo=J,Jo=y,Zo=ii,Xo=oe.exports,Ko=Pn,Qo=Jn,tr=Rn;Zo.addType(Ko.TYPE,tr.TYPE,(function(t,e,i,n,o,r,s){No&&Uo.assert(i.getType()==Ko.TYPE),No&&Uo.assert(r.getType()==tr.TYPE),sr(t,i.getShape(),e,r.getShape(),o)})),Zo.addType(Qo.TYPE,tr.TYPE,(function(t,e,i,n,o,r,s){No&&Uo.assert(i.getType()==Qo.TYPE),No&&Uo.assert(r.getType()==tr.TYPE);var a=i.getShape(),l=new Ko;a.getChildEdge(l,n),sr(t,l,e,r.getShape(),o)}));function er(){this.type,this.index,this.separation}var ir=new er,nr=new er,or=new function(){this.vertices=[],this.normals=[],this.count=0},rr=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=Go.zero(),this.sideNormal1=Go.zero(),this.sideOffset1,this.sideNormal2=Go.zero(),this.sideOffset2};function sr(t,e,i,n,o){var r=Ho.mulTXf(i,o),s=Ho.mulVec2(r,n.m_centroid),a=e.m_vertex0,l=e.m_vertex1,c=e.m_vertex2,u=e.m_vertex3,h=e.m_hasVertex0,m=e.m_hasVertex3,p=Go.sub(c,l);p.normalize();var d,f=Go.neo(p.y,-p.x),_=Go.dot(f,Go.sub(s,l)),y=0,v=0,g=!1,b=!1;if(h){var x=Go.sub(l,a);x.normalize();var $=Go.neo(x.y,-x.x);g=Go.cross(x,p)>=0,y=Go.dot($,s)-Go.dot($,a)}if(m){var A=Go.sub(u,c);A.normalize();var w=Go.neo(A.y,-A.x);b=Go.cross(p,A)>0,v=Go.dot(w,s)-Go.dot(w,c)}var B=Go.zero(),C=Go.zero(),S=Go.zero();h&&m?g&&b?(d=y>=0||_>=0||v>=0)?(B.set(f),C.set($),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,f)):g?(d=y>=0||_>=0&&v>=0)?(B.set(f),C.set($),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,f)):b?(d=v>=0||y>=0&&_>=0)?(B.set(f),C.set(f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.setMul(-1,$)):(d=y>=0&&_>=0&&v>=0)?(B.set(f),C.set(f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.setMul(-1,$)):h?g?(d=y>=0||_>=0)?(B.set(f),C.set($),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,f)):(d=y>=0&&_>=0)?(B.set(f),C.set(f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.setMul(-1,$)):m?b?(d=_>=0||v>=0)?(B.set(f),C.setMul(-1,f),S.set(w)):(B.setMul(-1,f),C.setMul(-1,f),S.set(f)):(d=_>=0&&v>=0)?(B.set(f),C.setMul(-1,f),S.set(f)):(B.setMul(-1,f),C.setMul(-1,w),S.set(f)):(d=_>=0)?(B.set(f),C.setMul(-1,f),S.setMul(-1,f)):(B.setMul(-1,f),C.set(f),S.set(f)),or.count=n.m_count;for(var E=0;E<n.m_count;++E)or.vertices[E]=Ho.mulVec2(r,n.m_vertices[E]),or.normals[E]=Yo.mulVec2(r.q,n.m_normals[E]);var M=2*Jo.polygonRadius;t.pointCount=0,ir.type=1,ir.index=d?0:1,ir.separation=1/0;for(E=0;E<or.count;++E){(P=Go.dot(B,Go.sub(or.vertices[E],l)))<ir.separation&&(ir.separation=P)}if(-1!=ir.type&&!(ir.separation>M)){nr.type=-1,nr.index=-1,nr.separation=-1/0;var T=Go.neo(-B.y,B.x);for(E=0;E<or.count;++E){var P,z=Go.neg(or.normals[E]),F=Go.dot(z,Go.sub(or.vertices[E],l)),I=Go.dot(z,Go.sub(or.vertices[E],c));if((P=Wo.min(F,I))>M){nr.type=2,nr.index=E,nr.separation=P;break}if(Go.dot(z,T)>=0){if(Go.dot(Go.sub(z,S),B)<-Jo.angularSlop)continue}else if(Go.dot(Go.sub(z,C),B)<-Jo.angularSlop)continue;P>nr.separation&&(nr.type=2,nr.index=E,nr.separation=P)}if(!(-1!=nr.type&&nr.separation>M)){var k;k=-1==nr.type?ir:nr.separation>.98*ir.separation+.001?nr:ir;var V=[new Xo.clipVertex,new Xo.clipVertex];if(1==k.type){t.type=Xo.e_faceA;var L=0,j=Go.dot(B,or.normals[0]);for(E=1;E<or.count;++E){var R=Go.dot(B,or.normals[E]);R<j&&(j=R,L=E)}var D=L,O=D+1<or.count?D+1:0;V[0].v=or.vertices[D],V[0].id.cf.indexA=0,V[0].id.cf.indexB=D,V[0].id.cf.typeA=Xo.e_face,V[0].id.cf.typeB=Xo.e_vertex,V[1].v=or.vertices[O],V[1].id.cf.indexA=0,V[1].id.cf.indexB=O,V[1].id.cf.typeA=Xo.e_face,V[1].id.cf.typeB=Xo.e_vertex,d?(rr.i1=0,rr.i2=1,rr.v1=l,rr.v2=c,rr.normal.set(f)):(rr.i1=1,rr.i2=0,rr.v1=c,rr.v2=l,rr.normal.setMul(-1,f))}else t.type=Xo.e_faceB,V[0].v=l,V[0].id.cf.indexA=0,V[0].id.cf.indexB=k.index,V[0].id.cf.typeA=Xo.e_vertex,V[0].id.cf.typeB=Xo.e_face,V[1].v=c,V[1].id.cf.indexA=0,V[1].id.cf.indexB=k.index,V[1].id.cf.typeA=Xo.e_vertex,V[1].id.cf.typeB=Xo.e_face,rr.i1=k.index,rr.i2=rr.i1+1<or.count?rr.i1+1:0,rr.v1=or.vertices[rr.i1],rr.v2=or.vertices[rr.i2],rr.normal.set(or.normals[rr.i1]);rr.sideNormal1.set(rr.normal.y,-rr.normal.x),rr.sideNormal2.setMul(-1,rr.sideNormal1),rr.sideOffset1=Go.dot(rr.sideNormal1,rr.v1),rr.sideOffset2=Go.dot(rr.sideNormal2,rr.v2);var q=[new Xo.clipVertex,new Xo.clipVertex],N=[new Xo.clipVertex,new Xo.clipVertex];if(!(Xo.clipSegmentToLine(q,V,rr.sideNormal1,rr.sideOffset1,rr.i1)<Jo.maxManifoldPoints||Xo.clipSegmentToLine(N,q,rr.sideNormal2,rr.sideOffset2,rr.i2)<Jo.maxManifoldPoints)){1==k.type?(t.localNormal=Go.clone(rr.normal),t.localPoint=Go.clone(rr.v1)):(t.localNormal=Go.clone(n.m_normals[rr.i1]),t.localPoint=Go.clone(n.m_vertices[rr.i1]));var U=0;for(E=0;E<Jo.maxManifoldPoints;++E){if(Go.dot(rr.normal,Go.sub(N[E].v,rr.v1))<=M){var W=t.points[U];1==k.type?(W.localPoint=Ho.mulT(r,N[E].v),W.id=N[E].id):(W.localPoint=N[E].v,W.id.cf.typeA=N[E].id.cf.typeB,W.id.cf.typeB=N[E].id.cf.typeA,W.id.cf.indexA=N[E].id.cf.indexB,W.id.cf.indexB=N[E].id.cf.indexA),++U}}t.pointCount=U}}}}"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ar=_r,lr=e,cr=y,ur=r.exports,hr=p,mr=J,pr=ui,dr=kt;_r.TYPE="distance-joint",pr.TYPES[_r.TYPE]=_r,_r._super=pr,_r.prototype=Object.create(_r._super.prototype);var fr={frequencyHz:0,dampingRatio:0};function _r(t,e,i,n,o){if(!(this instanceof _r))return new _r(t,e,i,n,o);if(i&&n&&"m_type"in n&&"x"in i&&"y"in i){var r=i;i=n,n=r}t=lr(t,fr),pr.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=_r.TYPE,this.m_localAnchorA=hr.clone(n?e.getLocalPoint(n):t.localAnchorA||hr.zero()),this.m_localAnchorB=hr.clone(o?i.getLocalPoint(o):t.localAnchorB||hr.zero()),this.m_length=ur.isFinite(t.length)?t.length:hr.distance(e.getWorldPoint(this.m_localAnchorA),i.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}_r.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},_r._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(dr,t.bodyA,e),t.bodyB=i(dr,t.bodyB,e),new _r(t)},_r.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.length>0?this.m_length=+t.length:t.length<0||(t.anchorA||t.anchorA||t.anchorA||t.anchorA)&&(this.m_length=hr.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB)))},_r.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_r.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_r.prototype.setLength=function(t){this.m_length=t},_r.prototype.getLength=function(){return this.m_length},_r.prototype.setFrequency=function(t){this.m_frequencyHz=t},_r.prototype.getFrequency=function(){return this.m_frequencyHz},_r.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},_r.prototype.getDampingRatio=function(){return this.m_dampingRatio},_r.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_r.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_r.prototype.getReactionForce=function(t){return hr.mul(this.m_impulse,this.m_u).mul(t)},_r.prototype.getReactionTorque=function(t){return 0},_r.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=mr.neo(i),u=mr.neo(s);this.m_rA=mr.mulVec2(c,hr.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=mr.mulVec2(u,hr.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=hr.sub(hr.add(r,this.m_rB),hr.add(e,this.m_rA));var h=this.m_u.length();h>cr.linearSlop?this.m_u.mul(1/h):this.m_u.set(0,0);var m=hr.cross(this.m_rA,this.m_u),p=hr.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,this.m_frequencyHz>0){var f=h-this.m_length,_=2*ur.PI*this.m_frequencyHz,y=2*this.m_mass*this.m_dampingRatio*_,v=this.m_mass*_*_,g=t.dt;this.m_gamma=g*(y+g*v),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=f*g*v*this.m_gamma,d+=this.m_gamma,this.m_mass=0!=d?1/d:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var b=hr.mul(this.m_impulse,this.m_u);n.subMul(this.m_invMassA,b),o-=this.m_invIA*hr.cross(this.m_rA,b),a.addMul(this.m_invMassB,b),l+=this.m_invIB*hr.cross(this.m_rB,b)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},_r.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=hr.add(e,hr.cross(i,this.m_rA)),s=hr.add(n,hr.cross(o,this.m_rB)),a=hr.dot(this.m_u,s)-hr.dot(this.m_u,r),l=-this.m_mass*(a+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=l;var c=hr.mul(l,this.m_u);e.subMul(this.m_invMassA,c),i-=this.m_invIA*hr.cross(this.m_rA,c),n.addMul(this.m_invMassB,c),o+=this.m_invIB*hr.cross(this.m_rB,c),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=o},_r.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=mr.neo(i),s=mr.neo(o),a=mr.mulSub(r,this.m_localAnchorA,this.m_localCenterA),l=mr.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=hr.sub(hr.add(n,l),hr.add(e,a)),u=c.normalize()-this.m_length;u=ur.clamp(u,-cr.maxLinearCorrection,cr.maxLinearCorrection);var h=-this.m_mass*u,m=hr.mul(h,c);return e.subMul(this.m_invMassA,m),i-=this.m_invIA*hr.cross(a,m),n.addMul(this.m_invMassB,m),o+=this.m_invIB*hr.cross(l,m),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,ur.abs(u)<cr.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var yr="undefined"!=typeof ASSERT&&ASSERT,vr=Er,gr=i,br=e,xr=r.exports,$r=p,Ar=te,wr=J,Br=ui,Cr=kt;Er.TYPE="friction-joint",Br.TYPES[Er.TYPE]=Er,Er._super=Br,Er.prototype=Object.create(Er._super.prototype);var Sr={maxForce:0,maxTorque:0};function Er(t,e,i,n){if(!(this instanceof Er))return new Er(t,e,i,n);t=br(t,Sr),Br.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Er.TYPE,this.m_localAnchorA=$r.clone(n?e.getLocalPoint(n):t.localAnchorA||$r.zero()),this.m_localAnchorB=$r.clone(n?i.getLocalPoint(n):t.localAnchorB||$r.zero()),this.m_linearImpulse=$r.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}Er.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},Er._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Cr,t.bodyA,e),t.bodyB=i(Cr,t.bodyB,e),new Er(t)},Er.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Er.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Er.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Er.prototype.setMaxForce=function(t){yr&&gr.assert(xr.isFinite(t)&&t>=0),this.m_maxForce=t},Er.prototype.getMaxForce=function(){return this.m_maxForce},Er.prototype.setMaxTorque=function(t){yr&&gr.assert(xr.isFinite(t)&&t>=0),this.m_maxTorque=t},Er.prototype.getMaxTorque=function(){return this.m_maxTorque},Er.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Er.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Er.prototype.getReactionForce=function(t){return $r.mul(t,this.m_linearImpulse)},Er.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},Er.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=wr.neo(e),l=wr.neo(o);this.m_rA=wr.mulVec2(a,$r.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=wr.mulVec2(l,$r.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new Ar;if(p.ex.x=c+u+h*this.m_rA.y*this.m_rA.y+m*this.m_rB.y*this.m_rB.y,p.ex.y=-h*this.m_rA.x*this.m_rA.y-m*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=c+u+h*this.m_rA.x*this.m_rA.x+m*this.m_rB.x*this.m_rB.x,this.m_linearMass=p.getInverse(),this.m_angularMass=h+m,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var d=$r.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(c,d),n-=h*($r.cross(this.m_rA,d)+this.m_angularImpulse),r.addMul(u,d),s+=m*($r.cross(this.m_rB,d)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=s},Er.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=o-i,h=-this.m_angularMass*u,m=this.m_angularImpulse,p=c*this.m_maxTorque;this.m_angularImpulse=xr.clamp(this.m_angularImpulse+h,-p,p),i-=a*(h=this.m_angularImpulse-m),o+=l*h;u=$r.sub($r.add(n,$r.cross(o,this.m_rB)),$r.add(e,$r.cross(i,this.m_rA))),h=$r.neg(Ar.mulVec2(this.m_linearMass,u)),m=this.m_linearImpulse;this.m_linearImpulse.add(h);p=c*this.m_maxForce;this.m_linearImpulse.lengthSquared()>p*p&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(p)),h=$r.sub(this.m_linearImpulse,m),e.subMul(r,h),i-=a*$r.cross(this.m_rA,h),n.addMul(s,h),o+=l*$r.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Er.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Mr="undefined"!=typeof ASSERT&&ASSERT,Tr=Nr,Pr=i,zr=e,Fr=y,Ir=r.exports,kr=p,Vr=be,Lr=te,jr=Ce,Rr=J,Dr=ui,Or=kt;Nr.TYPE="revolute-joint",Dr.TYPES[Nr.TYPE]=Nr,Nr._super=Dr,Nr.prototype=Object.create(Nr._super.prototype);var qr={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function Nr(t,e,i,n){if(!(this instanceof Nr))return new Nr(t,e,i,n);t=zr(t,qr),Dr.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Nr.TYPE,this.m_localAnchorA=kr.clone(n?e.getLocalPoint(n):t.localAnchorA||kr.zero()),this.m_localAnchorB=kr.clone(n?i.getLocalPoint(n):t.localAnchorB||kr.zero()),this.m_referenceAngle=Ir.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=Vr(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new jr,this.m_motorMass,this.m_limitState=0}Nr.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},Nr._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Or,t.bodyA,e),t.bodyB=i(Or,t.bodyB,e),new Nr(t)},Nr.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Nr.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Nr.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Nr.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Nr.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},Nr.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},Nr.prototype.isMotorEnabled=function(){return this.m_enableMotor},Nr.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},Nr.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},Nr.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},Nr.prototype.getMotorSpeed=function(){return this.m_motorSpeed},Nr.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},Nr.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},Nr.prototype.isLimitEnabled=function(){return this.m_enableLimit},Nr.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},Nr.prototype.getLowerLimit=function(){return this.m_lowerAngle},Nr.prototype.getUpperLimit=function(){return this.m_upperAngle},Nr.prototype.setLimits=function(t,e){Mr&&Pr.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},Nr.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Nr.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Nr.prototype.getReactionForce=function(t){return kr.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},Nr.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},Nr.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=Rr.neo(e),l=Rr.neo(o);this.m_rA=Rr.mulVec2(a,kr.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Rr.mulVec2(l,kr.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=h+m===0;if(this.m_mass.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,this.m_mass.ez.x=-this.m_rA.y*h-this.m_rB.y*m,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,this.m_mass.ez.y=this.m_rA.x*h+this.m_rB.x*m,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=h+m,this.m_motorMass=h+m,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||p)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==p){var d=o-e-this.m_referenceAngle;Ir.abs(this.m_upperAngle-this.m_lowerAngle)<2*Fr.angularSlop?this.m_limitState=3:d<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):d>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var f=kr.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(c,f),n-=h*(kr.cross(this.m_rA,f)+this.m_motorImpulse+this.m_impulse.z),r.addMul(u,f),s+=m*(kr.cross(this.m_rB,f)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=s},Nr.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=a+l===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==c){var u=o-i-this.m_motorSpeed,h=-this.m_motorMass*u,m=this.m_motorImpulse,p=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=Ir.clamp(this.m_motorImpulse+h,-p,p),i-=a*(h=this.m_motorImpulse-m),o+=l*h}if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var d=kr.zero();d.addCombine(1,n,1,kr.cross(o,this.m_rB)),d.subCombine(1,e,1,kr.cross(i,this.m_rA));var f=o-i;u=Vr(d.x,d.y,f),h=Vr.neg(this.m_mass.solve33(u));if(3==this.m_limitState)this.m_impulse.add(h);else if(1==this.m_limitState){if(this.m_impulse.z+h.z<0){var _=kr.combine(-1,d,this.m_impulse.z,kr.neo(this.m_mass.ez.x,this.m_mass.ez.y)),y=this.m_mass.solve22(_);h.x=y.x,h.y=y.y,h.z=-this.m_impulse.z,this.m_impulse.x+=y.x,this.m_impulse.y+=y.y,this.m_impulse.z=0}else this.m_impulse.add(h)}else if(2==this.m_limitState){if(this.m_impulse.z+h.z>0){_=kr.combine(-1,d,this.m_impulse.z,kr.neo(this.m_mass.ez.x,this.m_mass.ez.y)),y=this.m_mass.solve22(_);h.x=y.x,h.y=y.y,h.z=-this.m_impulse.z,this.m_impulse.x+=y.x,this.m_impulse.y+=y.y,this.m_impulse.z=0}else this.m_impulse.add(h)}var v=kr.neo(h.x,h.y);e.subMul(r,v),i-=a*(kr.cross(this.m_rA,v)+h.z),n.addMul(s,v),o+=l*(kr.cross(this.m_rB,v)+h.z)}else{(u=kr.zero()).addCombine(1,n,1,kr.cross(o,this.m_rB)),u.subCombine(1,e,1,kr.cross(i,this.m_rA));h=this.m_mass.solve22(kr.neg(u));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y,e.subMul(r,h),i-=a*kr.cross(this.m_rA,h),n.addMul(s,h),o+=l*kr.cross(this.m_rB,h)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Nr.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,s=Rr.neo(n),a=Rr.neo(r),l=0,c=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&0!=this.m_limitState&&0==c){var u=r-n-this.m_referenceAngle,h=0;if(3==this.m_limitState){var m=Ir.clamp(u-this.m_lowerAngle,-Fr.maxAngularCorrection,Fr.maxAngularCorrection);h=-this.m_motorMass*m,l=Ir.abs(m)}else if(1==this.m_limitState){l=-(m=u-this.m_lowerAngle),m=Ir.clamp(m+Fr.angularSlop,-Fr.maxAngularCorrection,0),h=-this.m_motorMass*m}else if(2==this.m_limitState){l=m=u-this.m_upperAngle,m=Ir.clamp(m-Fr.angularSlop,0,Fr.maxAngularCorrection),h=-this.m_motorMass*m}n-=this.m_invIA*h,r+=this.m_invIB*h}s.set(n),a.set(r);var p=Rr.mulVec2(s,kr.sub(this.m_localAnchorA,this.m_localCenterA)),d=Rr.mulVec2(a,kr.sub(this.m_localAnchorB,this.m_localCenterB));(m=kr.zero()).addCombine(1,o,1,d),m.subCombine(1,i,1,p),e=m.length();var f=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,v=this.m_invIB,g=new Lr;g.ex.x=f+_+y*p.y*p.y+v*d.y*d.y,g.ex.y=-y*p.x*p.y-v*d.x*d.y,g.ey.x=g.ex.y,g.ey.y=f+_+y*p.x*p.x+v*d.x*d.x;var b=kr.neg(g.solve(m));return i.subMul(f,b),n-=y*kr.cross(p,b),o.addMul(_,b),r+=v*kr.cross(d,b),this.m_bodyA.c_position.c.set(i),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(o),this.m_bodyB.c_position.a=r,e<=Fr.linearSlop&&l<=Fr.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var Ur="undefined"!=typeof ASSERT&&ASSERT,Wr=os,Hr=i,Gr=e,Yr=y,Jr=r.exports,Zr=p,Xr=be,Kr=te,Qr=Ce,ts=J,es=ui,is=kt;os.TYPE="prismatic-joint",es.TYPES[os.TYPE]=os,os._super=es,os.prototype=Object.create(os._super.prototype);var ns={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function os(t,e,i,n,o){if(!(this instanceof os))return new os(t,e,i,n,o);t=Gr(t,ns),es.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=os.TYPE,this.m_localAnchorA=Zr.clone(n?e.getLocalPoint(n):t.localAnchorA||Zr.zero()),this.m_localAnchorB=Zr.clone(n?i.getLocalPoint(n):t.localAnchorB||Zr.zero()),this.m_localXAxisA=Zr.clone(o?e.getLocalVector(o):t.localAxisA||Zr.neo(1,0)),this.m_localXAxisA.normalize(),this.m_localYAxisA=Zr.cross(1,this.m_localXAxisA),this.m_referenceAngle=Jr.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=Xr(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=0,this.m_axis=Zr.zero(),this.m_perp=Zr.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new Qr,this.m_motorMass}os.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},os._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(is,t.bodyA,e),t.bodyB=i(is,t.bodyB,e),t.localAxisA=Zr(t.localAxisA),new os(t)},os.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(Zr.cross(1,t.localAxisA)))},os.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},os.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},os.prototype.getLocalAxisA=function(){return this.m_localXAxisA},os.prototype.getReferenceAngle=function(){return this.m_referenceAngle},os.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=Zr.sub(e,t),n=this.m_bodyA.getWorldVector(this.m_localXAxisA);return Zr.dot(i,n)},os.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=ts.mulVec2(t.m_xf.q,Zr.sub(this.m_localAnchorA,t.m_sweep.localCenter)),n=ts.mulVec2(e.m_xf.q,Zr.sub(this.m_localAnchorB,e.m_sweep.localCenter)),o=Zr.add(t.m_sweep.c,i),r=Zr.add(e.m_sweep.c,n),s=Zr.sub(r,o),a=ts.mulVec2(t.m_xf.q,this.m_localXAxisA),l=t.m_linearVelocity,c=e.m_linearVelocity,u=t.m_angularVelocity,h=e.m_angularVelocity;return Zr.dot(s,Zr.cross(u,a))+Zr.dot(a,Zr.sub(Zr.addCross(c,h,n),Zr.addCross(l,u,i)))},os.prototype.isLimitEnabled=function(){return this.m_enableLimit},os.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},os.prototype.getLowerLimit=function(){return this.m_lowerTranslation},os.prototype.getUpperLimit=function(){return this.m_upperTranslation},os.prototype.setLimits=function(t,e){Ur&&Hr.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},os.prototype.isMotorEnabled=function(){return this.m_enableMotor},os.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},os.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},os.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},os.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},os.prototype.getMotorSpeed=function(){return this.m_motorSpeed},os.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},os.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},os.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},os.prototype.getReactionForce=function(t){return Zr.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},os.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},os.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=ts.neo(i),u=ts.neo(s),h=ts.mulVec2(c,Zr.sub(this.m_localAnchorA,this.m_localCenterA)),m=ts.mulVec2(u,Zr.sub(this.m_localAnchorB,this.m_localCenterB)),p=Zr.zero();p.addCombine(1,r,1,m),p.subCombine(1,e,1,h);var d=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,y=this.m_invIB;this.m_axis=ts.mulVec2(c,this.m_localXAxisA),this.m_a1=Zr.cross(Zr.add(p,h),this.m_axis),this.m_a2=Zr.cross(m,this.m_axis),this.m_motorMass=d+f+_*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=ts.mulVec2(c,this.m_localYAxisA),this.m_s1=Zr.cross(Zr.add(p,h),this.m_perp),this.m_s2=Zr.cross(m,this.m_perp),Zr.cross(h,this.m_perp);var v=d+f+_*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,g=_*this.m_s1+y*this.m_s2,b=_*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,x=_+y;0==x&&(x=1);var $=_*this.m_a1+y*this.m_a2,A=d+f+_*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2;if(this.m_K.ex.set(v,g,b),this.m_K.ey.set(g,x,$),this.m_K.ez.set(b,$,A),this.m_enableLimit){var w=Zr.dot(this.m_axis,p);Jr.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*Yr.linearSlop?this.m_limitState=3:w<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):w>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var B=Zr.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,S=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.subMul(d,B),o-=_*C,a.addMul(f,B),l+=y*S}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},os.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var c=Zr.dot(this.m_axis,Zr.sub(n,e))+this.m_a2*o-this.m_a1*i,u=this.m_motorMass*(this.m_motorSpeed-c),h=this.m_motorImpulse,m=t.dt*this.m_maxMotorForce;this.m_motorImpulse=Jr.clamp(this.m_motorImpulse+u,-m,m),u=this.m_motorImpulse-h;var p=Zr.mul(u,this.m_axis),d=u*this.m_a1,f=u*this.m_a2;e.subMul(r,p),i-=a*d,n.addMul(s,p),o+=l*f}var _=Zr.zero();if(_.x+=Zr.dot(this.m_perp,n)+this.m_s2*o,_.x-=Zr.dot(this.m_perp,e)+this.m_s1*i,_.y=o-i,this.m_enableLimit&&0!=this.m_limitState){var y=0;y+=Zr.dot(this.m_axis,n)+this.m_a2*o,y-=Zr.dot(this.m_axis,e)+this.m_a1*i;c=Xr(_.x,_.y,y);var v=Xr(this.m_impulse),g=this.m_K.solve33(Xr.neg(c));this.m_impulse.add(g),1==this.m_limitState?this.m_impulse.z=Jr.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=Jr.min(this.m_impulse.z,0));var b=Zr.combine(-1,_,-(this.m_impulse.z-v.z),Zr.neo(this.m_K.ez.x,this.m_K.ez.y)),x=Zr.add(this.m_K.solve22(b),Zr.neo(v.x,v.y));this.m_impulse.x=x.x,this.m_impulse.y=x.y,g=Xr.sub(this.m_impulse,v);p=Zr.combine(g.x,this.m_perp,g.z,this.m_axis),d=g.x*this.m_s1+g.y+g.z*this.m_a1,f=g.x*this.m_s2+g.y+g.z*this.m_a2;e.subMul(r,p),i-=a*d,n.addMul(s,p),o+=l*f}else{g=this.m_K.solve22(Zr.neg(_));this.m_impulse.x+=g.x,this.m_impulse.y+=g.y;p=Zr.mul(g.x,this.m_perp),d=g.x*this.m_s1+g.y,f=g.x*this.m_s2+g.y;e.subMul(r,p),i-=a*d,n.addMul(s,p),o+=l*f}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},os.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=ts.neo(i),s=ts.neo(o),a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,h=ts.mulVec2(r,Zr.sub(this.m_localAnchorA,this.m_localCenterA)),m=ts.mulVec2(s,Zr.sub(this.m_localAnchorB,this.m_localCenterB)),p=Zr.sub(Zr.add(n,m),Zr.add(e,h)),d=ts.mulVec2(r,this.m_localXAxisA),f=Zr.cross(Zr.add(p,h),d),_=Zr.cross(m,d),y=ts.mulVec2(r,this.m_localYAxisA),v=Zr.cross(Zr.add(p,h),y),g=Zr.cross(m,y),b=Xr(),x=Zr.zero();x.x=Zr.dot(y,p),x.y=o-i-this.m_referenceAngle;var $=Jr.abs(x.x),A=Jr.abs(x.y),w=Yr.linearSlop,B=Yr.maxLinearCorrection,C=!1,S=0;if(this.m_enableLimit){var E=Zr.dot(d,p);Jr.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*w?(S=Jr.clamp(E,-B,B),$=Jr.max($,Jr.abs(E)),C=!0):E<=this.m_lowerTranslation?(S=Jr.clamp(E-this.m_lowerTranslation+w,-B,0),$=Jr.max($,this.m_lowerTranslation-E),C=!0):E>=this.m_upperTranslation&&(S=Jr.clamp(E-this.m_upperTranslation-w,0,B),$=Jr.max($,E-this.m_upperTranslation),C=!0)}if(C){var M=a+l+c*v*v+u*g*g,T=c*v+u*g,P=c*v*f+u*g*_;0==(k=c+u)&&(k=1);var z=c*f+u*_,F=a+l+c*f*f+u*_*_;(V=new Qr).ex.set(M,T,P),V.ey.set(T,k,z),V.ez.set(P,z,F);var I=Xr();I.x=x.x,I.y=x.y,I.z=S,b=V.solve33(Xr.neg(I))}else{var k,V;M=a+l+c*v*v+u*g*g,T=c*v+u*g;0==(k=c+u)&&(k=1),(V=new Kr).ex.set(M,T),V.ey.set(T,k);var L=V.solve(Zr.neg(x));b.x=L.x,b.y=L.y,b.z=0}var j=Zr.combine(b.x,y,b.z,d),R=b.x*v+b.y+b.z*f,D=b.x*g+b.y+b.z*_;return e.subMul(a,j),i-=c*R,n.addMul(l,j),o+=u*D,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=o,$<=Yr.linearSlop&&A<=Yr.angularSlop},"undefined"!=typeof DEBUG&&DEBUG;var rs="undefined"!=typeof ASSERT&&ASSERT,ss=vs,as=i,ls=e,cs=y,us=r.exports,hs=p,ms=J,ps=ui,ds=kt,fs=Tr,_s=Wr;vs.TYPE="gear-joint",ps.TYPES[vs.TYPE]=vs,vs._super=ps,vs.prototype=Object.create(vs._super.prototype);var ys={ratio:1};function vs(t,e,i,n,o,r){if(!(this instanceof vs))return new vs(t,e,i,n,o,r);var s,a;t=ls(t,ys),ps.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=vs.TYPE,rs&&as.assert(n.m_type===fs.TYPE||n.m_type===_s.TYPE),rs&&as.assert(o.m_type===fs.TYPE||o.m_type===_s.TYPE),this.m_joint1=n||t.joint1,this.m_joint2=o||t.joint2,this.m_ratio=us.isFinite(r)?r:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var l=this.m_bodyA.m_xf,c=this.m_bodyA.m_sweep.a,u=this.m_bodyC.m_xf,h=this.m_bodyC.m_sweep.a;if(this.m_type1===fs.TYPE){var m=this.m_joint1;this.m_localAnchorC=m.m_localAnchorA,this.m_localAnchorA=m.m_localAnchorB,this.m_referenceAngleA=m.m_referenceAngle,this.m_localAxisC=hs.zero(),s=c-h-this.m_referenceAngleA}else{var p=this.m_joint1;this.m_localAnchorC=p.m_localAnchorA,this.m_localAnchorA=p.m_localAnchorB,this.m_referenceAngleA=p.m_referenceAngle,this.m_localAxisC=p.m_localXAxisA;var d=this.m_localAnchorC,f=ms.mulTVec2(u.q,hs.add(ms.mul(l.q,this.m_localAnchorA),hs.sub(l.p,u.p)));s=hs.dot(f,this.m_localAxisC)-hs.dot(d,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var _=this.m_bodyB.m_xf,y=this.m_bodyB.m_sweep.a,v=this.m_bodyD.m_xf,g=this.m_bodyD.m_sweep.a;if(this.m_type2===fs.TYPE){m=this.m_joint2;this.m_localAnchorD=m.m_localAnchorA,this.m_localAnchorB=m.m_localAnchorB,this.m_referenceAngleB=m.m_referenceAngle,this.m_localAxisD=hs.zero(),a=y-g-this.m_referenceAngleB}else{p=this.m_joint2;this.m_localAnchorD=p.m_localAnchorA,this.m_localAnchorB=p.m_localAnchorB,this.m_referenceAngleB=p.m_referenceAngle,this.m_localAxisD=p.m_localXAxisA;var b=this.m_localAnchorD,x=ms.mulTVec2(v.q,hs.add(ms.mul(_.q,this.m_localAnchorB),hs.sub(_.p,v.p)));a=hs.dot(x,this.m_localAxisD)-hs.dot(b,this.m_localAxisD)}this.m_constant=s+this.m_ratio*a,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}vs.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},vs._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(ds,t.bodyA,e),t.bodyB=i(ds,t.bodyB,e),t.joint1=i(ps,t.joint1,e),t.joint2=i(ps,t.joint2,e),new vs(t)},vs.prototype.getJoint1=function(){return this.m_joint1},vs.prototype.getJoint2=function(){return this.m_joint2},vs.prototype.setRatio=function(t){rs&&as.assert(us.isFinite(t)),this.m_ratio=t},vs.prototype.getRatio=function(){return this.m_ratio},vs.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},vs.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},vs.prototype.getReactionForce=function(t){return hs.mul(this.m_impulse,this.m_JvAC).mul(t)},vs.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},vs.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,l=this.m_bodyC.c_velocity.v,c=this.m_bodyC.c_velocity.w,u=this.m_bodyD.c_position.a,h=this.m_bodyD.c_velocity.v,m=this.m_bodyD.c_velocity.w,p=ms.neo(e),d=ms.neo(o),f=ms.neo(a),_=ms.neo(u);if(this.m_mass=0,this.m_type1==fs.TYPE)this.m_JvAC=hs.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var y=ms.mulVec2(f,this.m_localAxisC),v=ms.mulSub(f,this.m_localAnchorC,this.m_lcC),g=ms.mulSub(p,this.m_localAnchorA,this.m_lcA);this.m_JvAC=y,this.m_JwC=hs.cross(v,y),this.m_JwA=hs.cross(g,y),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==fs.TYPE)this.m_JvBD=hs.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{y=ms.mulVec2(_,this.m_localAxisD);var b=ms.mulSub(_,this.m_localAnchorD,this.m_lcD),x=ms.mulSub(d,this.m_localAnchorB,this.m_lcB);this.m_JvBD=hs.mul(this.m_ratio,y),this.m_JwD=this.m_ratio*hs.cross(b,y),this.m_JwB=this.m_ratio*hs.cross(x,y),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.addMul(this.m_mA*this.m_impulse,this.m_JvAC),n+=this.m_iA*this.m_impulse*this.m_JwA,r.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,l.subMul(this.m_mC*this.m_impulse,this.m_JvAC),c-=this.m_iC*this.m_impulse*this.m_JwC,h.subMul(this.m_mD*this.m_impulse,this.m_JvBD),m-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(r),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(l),this.m_bodyC.c_velocity.w=c,this.m_bodyD.c_velocity.v.set(h),this.m_bodyD.c_velocity.w=m},vs.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,l=this.m_bodyD.c_velocity.w,c=hs.dot(this.m_JvAC,e)-hs.dot(this.m_JvAC,r)+hs.dot(this.m_JvBD,n)-hs.dot(this.m_JvBD,a);c+=this.m_JwA*i-this.m_JwC*s+(this.m_JwB*o-this.m_JwD*l);var u=-this.m_mass*c;this.m_impulse+=u,e.addMul(this.m_mA*u,this.m_JvAC),i+=this.m_iA*u*this.m_JwA,n.addMul(this.m_mB*u,this.m_JvBD),o+=this.m_iB*u*this.m_JwB,r.subMul(this.m_mC*u,this.m_JvAC),s-=this.m_iC*u*this.m_JwC,a.subMul(this.m_mD*u,this.m_JvBD),l-=this.m_iD*u*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=o,this.m_bodyC.c_velocity.v.set(r),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=l},vs.prototype.solvePositionConstraints=function(t){var e,i,n,o,r,s,a,l,c=this.m_bodyA.c_position.c,u=this.m_bodyA.c_position.a,h=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,p=this.m_bodyC.c_position.c,d=this.m_bodyC.c_position.a,f=this.m_bodyD.c_position.c,_=this.m_bodyD.c_position.a,y=ms.neo(u),v=ms.neo(m),g=ms.neo(d),b=ms.neo(_),x=0;if(this.m_type1==fs.TYPE)n=hs.zero(),r=1,a=1,x+=this.m_iA+this.m_iC,e=u-d-this.m_referenceAngleA;else{var $=ms.mulVec2(g,this.m_localAxisC),A=ms.mulSub(g,this.m_localAnchorC,this.m_lcC),w=ms.mulSub(y,this.m_localAnchorA,this.m_lcA);n=$,a=hs.cross(A,$),r=hs.cross(w,$),x+=this.m_mC+this.m_mA+this.m_iC*a*a+this.m_iA*r*r;var B=hs.sub(this.m_localAnchorC,this.m_lcC),C=ms.mulTVec2(g,hs.add(w,hs.sub(c,p)));e=hs.dot(hs.sub(C,B),this.m_localAxisC)}if(this.m_type2==fs.TYPE)o=hs.zero(),s=this.m_ratio,l=this.m_ratio,x+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=m-_-this.m_referenceAngleB;else{$=ms.mulVec2(b,this.m_localAxisD);var S=ms.mulSub(b,this.m_localAnchorD,this.m_lcD),E=ms.mulSub(v,this.m_localAnchorB,this.m_lcB);o=hs.mul(this.m_ratio,$),l=this.m_ratio*hs.cross(S,$),s=this.m_ratio*hs.cross(E,$),x+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var M=hs.sub(this.m_localAnchorD,this.m_lcD),T=ms.mulTVec2(b,hs.add(E,hs.sub(h,f)));i=hs.dot(T,this.m_localAxisD)-hs.dot(M,this.m_localAxisD)}var P=e+this.m_ratio*i-this.m_constant,z=0;return x>0&&(z=-P/x),c.addMul(this.m_mA*z,n),u+=this.m_iA*z*r,h.addMul(this.m_mB*z,o),m+=this.m_iB*z*s,p.subMul(this.m_mC*z,n),d-=this.m_iC*z*a,f.subMul(this.m_mD*z,o),_-=this.m_iD*z*l,this.m_bodyA.c_position.c.set(c),this.m_bodyA.c_position.a=u,this.m_bodyB.c_position.c.set(h),this.m_bodyB.c_position.a=m,this.m_bodyC.c_position.c.set(p),this.m_bodyC.c_position.a=d,this.m_bodyD.c_position.c.set(f),this.m_bodyD.c_position.a=_,0<cs.linearSlop},"undefined"!=typeof DEBUG&&DEBUG;var gs="undefined"!=typeof ASSERT&&ASSERT,bs=Ts,xs=i,$s=e,As=r.exports,ws=p,Bs=te,Cs=J,Ss=ui,Es=kt;Ts.TYPE="motor-joint",Ss.TYPES[Ts.TYPE]=Ts,Ts._super=Ss,Ts.prototype=Object.create(Ts._super.prototype);var Ms={maxForce:1,maxTorque:1,correctionFactor:.3};function Ts(t,e,i){if(!(this instanceof Ts))return new Ts(t,e,i);t=$s(t,Ms),Ss.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Ts.TYPE,this.m_linearOffset=As.isFinite(t.linearOffset)?t.linearOffset:e.getLocalPoint(i.getPosition()),this.m_angularOffset=As.isFinite(t.angularOffset)?t.angularOffset:i.getAngle()-e.getAngle(),this.m_linearImpulse=ws.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}Ts.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},Ts._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Es,t.bodyA,e),t.bodyB=i(Es,t.bodyB,e),new Ts(t)},Ts.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Ts.prototype.setMaxForce=function(t){gs&&xs.assert(As.isFinite(t)&&t>=0),this.m_maxForce=t},Ts.prototype.getMaxForce=function(){return this.m_maxForce},Ts.prototype.setMaxTorque=function(t){gs&&xs.assert(As.isFinite(t)&&t>=0),this.m_maxTorque=t},Ts.prototype.getMaxTorque=function(){return this.m_maxTorque},Ts.prototype.setCorrectionFactor=function(t){gs&&xs.assert(As.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},Ts.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},Ts.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},Ts.prototype.getLinearOffset=function(){return this.m_linearOffset},Ts.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},Ts.prototype.getAngularOffset=function(){return this.m_angularOffset},Ts.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},Ts.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},Ts.prototype.getReactionForce=function(t){return ws.mul(t,this.m_linearImpulse)},Ts.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},Ts.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Cs.neo(i),u=Cs.neo(s);this.m_rA=Cs.mulVec2(c,ws.neg(this.m_localCenterA)),this.m_rB=Cs.mulVec2(u,ws.neg(this.m_localCenterB));var h=this.m_invMassA,m=this.m_invMassB,p=this.m_invIA,d=this.m_invIB,f=new Bs;if(f.ex.x=h+m+p*this.m_rA.y*this.m_rA.y+d*this.m_rB.y*this.m_rB.y,f.ex.y=-p*this.m_rA.x*this.m_rA.y-d*this.m_rB.x*this.m_rB.y,f.ey.x=f.ex.y,f.ey.y=h+m+p*this.m_rA.x*this.m_rA.x+d*this.m_rB.x*this.m_rB.x,this.m_linearMass=f.getInverse(),this.m_angularMass=p+d,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=ws.zero(),this.m_linearError.addCombine(1,r,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(Cs.mulVec2(c,this.m_linearOffset)),this.m_angularError=s-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var _=ws.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.subMul(h,_),o-=p*(ws.cross(this.m_rA,_)+this.m_angularImpulse),a.addMul(m,_),l+=d*(ws.cross(this.m_rB,_)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},Ts.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,c=t.dt,u=t.inv_dt,h=o-i+u*this.m_correctionFactor*this.m_angularError,m=-this.m_angularMass*h,p=this.m_angularImpulse,d=c*this.m_maxTorque;this.m_angularImpulse=As.clamp(this.m_angularImpulse+m,-d,d),i-=a*(m=this.m_angularImpulse-p),o+=l*m,(h=ws.zero()).addCombine(1,n,1,ws.cross(o,this.m_rB)),h.subCombine(1,e,1,ws.cross(i,this.m_rA)),h.addMul(u*this.m_correctionFactor,this.m_linearError);m=ws.neg(Bs.mulVec2(this.m_linearMass,h)),p=ws.clone(this.m_linearImpulse);this.m_linearImpulse.add(m);d=c*this.m_maxForce;this.m_linearImpulse.clamp(d),m=ws.sub(this.m_linearImpulse,p),e.subMul(r,m),i-=a*ws.cross(this.m_rA,m),n.addMul(s,m),o+=l*ws.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Ts.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Ps="undefined"!=typeof ASSERT&&ASSERT,zs=Ns,Fs=i,Is=e,ks=r.exports,Vs=p,Ls=te,js=J,Rs=it,Ds=ui,Os=kt;Ns.TYPE="mouse-joint",Ds.TYPES[Ns.TYPE]=Ns,Ns._super=Ds,Ns.prototype=Object.create(Ns._super.prototype);var qs={maxForce:0,frequencyHz:5,dampingRatio:.7};function Ns(t,e,i,n){if(!(this instanceof Ns))return new Ns(t,e,i,n);t=Is(t,qs),Ds.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Ns.TYPE,Ps&&Fs.assert(ks.isFinite(t.maxForce)&&t.maxForce>=0),Ps&&Fs.assert(ks.isFinite(t.frequencyHz)&&t.frequencyHz>=0),Ps&&Fs.assert(ks.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=n?Vs.clone(n):t.target||Vs.zero(),this.m_localAnchorB=Rs.mulTVec2(i.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=Vs.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=Vs.zero(),this.m_localCenterB=Vs.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new Ls,this.m_C=Vs.zero()}Ns.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},Ns._deserialize=function(t,e,i){(t=Object.assign({},t)).bodyA=i(Os,t.bodyA,e),t.bodyB=i(Os,t.bodyB,e),t.target=Vs(t.target);var n=new Ns(t);return t._localAnchorB&&(n.m_localAnchorB=t._localAnchorB),n},Ns.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=Vs.clone(t)},Ns.prototype.getTarget=function(){return this.m_targetA},Ns.prototype.setMaxForce=function(t){this.m_maxForce=t},Ns.getMaxForce=function(){return this.m_maxForce},Ns.prototype.setFrequency=function(t){this.m_frequencyHz=t},Ns.prototype.getFrequency=function(){return this.m_frequencyHz},Ns.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Ns.prototype.getDampingRatio=function(){return this.m_dampingRatio},Ns.prototype.getAnchorA=function(){return Vs.clone(this.m_targetA)},Ns.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Ns.prototype.getReactionForce=function(t){return Vs.mul(t,this.m_impulse)},Ns.prototype.getReactionTorque=function(t){return 0*t},Ns.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},Ns.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,i=this.m_bodyB.c_velocity,n=e.c,o=e.a,r=i.v,s=i.w,a=js.neo(o),l=this.m_bodyB.getMass(),c=2*ks.PI*this.m_frequencyHz,u=2*l*this.m_dampingRatio*c,h=l*(c*c),m=t.dt;Ps&&Fs.assert(u+m*h>ks.EPSILON),this.m_gamma=m*(u+m*h),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=m*h*this.m_gamma,this.m_rB=js.mulVec2(a,Vs.sub(this.m_localAnchorB,this.m_localCenterB));var p=new Ls;p.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,p.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,p.ey.x=p.ex.y,p.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=p.getInverse(),this.m_C.set(n),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),s*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),r.addMul(this.m_invMassB,this.m_impulse),s+=this.m_invIB*Vs.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),i.v.set(r),i.w=s},Ns.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=Vs.clone(e.v),n=e.w,o=Vs.cross(n,this.m_rB);o.add(i),o.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),o.neg();var r=Ls.mulVec2(this.m_mass,o),s=Vs.clone(this.m_impulse);this.m_impulse.add(r);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),r=Vs.sub(this.m_impulse,s),i.addMul(this.m_invMassB,r),n+=this.m_invIB*Vs.cross(this.m_rB,r),e.v.set(i),e.w=n},Ns.prototype.solvePositionConstraints=function(t){return!0},"undefined"!=typeof DEBUG&&DEBUG;var Us="undefined"!=typeof ASSERT&&ASSERT,Ws=ea,Hs=i,Gs=e,Ys=y,Js=r.exports,Zs=p,Xs=J,Ks=ui,Qs=kt;ea.TYPE="pulley-joint",ea.MIN_PULLEY_LENGTH=2,Ks.TYPES[ea.TYPE]=ea,ea._super=Ks,ea.prototype=Object.create(ea._super.prototype);var ta={collideConnected:!0};function ea(t,e,i,n,o,r,s,a){if(!(this instanceof ea))return new ea(t,e,i,n,o,r,s,a);t=Gs(t,ta),Ks.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=ea.TYPE,this.m_groundAnchorA=n||(t.groundAnchorA||Zs.neo(-1,1)),this.m_groundAnchorB=o||(t.groundAnchorB||Zs.neo(1,1)),this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||Zs.neo(-1,0),this.m_localAnchorB=s?i.getLocalPoint(s):t.localAnchorB||Zs.neo(1,0),this.m_lengthA=Js.isFinite(t.lengthA)?t.lengthA:Zs.distance(r,n),this.m_lengthB=Js.isFinite(t.lengthB)?t.lengthB:Zs.distance(s,o),this.m_ratio=Js.isFinite(a)?a:t.ratio,Us&&Hs.assert(a>Js.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}ea.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},ea._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Qs,t.bodyA,e),t.bodyB=i(Qs,t.bodyB,e),new ea(t)},ea.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},ea.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},ea.prototype.getLengthA=function(){return this.m_lengthA},ea.prototype.getLengthB=function(){return this.m_lengthB},ea.prototype.getRatio=function(){return this.m_ratio},ea.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return Zs.distance(t,e)},ea.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return Zs.distance(t,e)},ea.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},ea.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},ea.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},ea.prototype.getReactionForce=function(t){return Zs.mul(this.m_impulse,this.m_uB).mul(t)},ea.prototype.getReactionTorque=function(t){return 0},ea.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Xs.neo(i),u=Xs.neo(s);this.m_rA=Xs.mulVec2(c,Zs.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Xs.mulVec2(u,Zs.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=Zs.sub(Zs.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=Zs.sub(Zs.add(r,this.m_rB),this.m_groundAnchorB);var h=this.m_uA.length(),m=this.m_uB.length();h>10*Ys.linearSlop?this.m_uA.mul(1/h):this.m_uA.setZero(),m>10*Ys.linearSlop?this.m_uB.mul(1/m):this.m_uB.setZero();var p=Zs.cross(this.m_rA,this.m_uA),d=Zs.cross(this.m_rB,this.m_uB),f=this.m_invMassA+this.m_invIA*p*p,_=this.m_invMassB+this.m_invIB*d*d;if(this.m_mass=f+this.m_ratio*this.m_ratio*_,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var y=Zs.mul(-this.m_impulse,this.m_uA),v=Zs.mul(-this.m_ratio*this.m_impulse,this.m_uB);n.addMul(this.m_invMassA,y),o+=this.m_invIA*Zs.cross(this.m_rA,y),a.addMul(this.m_invMassB,v),l+=this.m_invIB*Zs.cross(this.m_rB,v)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},ea.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=Zs.add(e,Zs.cross(i,this.m_rA)),s=Zs.add(n,Zs.cross(o,this.m_rB)),a=-Zs.dot(this.m_uA,r)-this.m_ratio*Zs.dot(this.m_uB,s),l=-this.m_mass*a;this.m_impulse+=l;var c=Zs.mul(-l,this.m_uA),u=Zs.mul(-this.m_ratio*l,this.m_uB);e.addMul(this.m_invMassA,c),i+=this.m_invIA*Zs.cross(this.m_rA,c),n.addMul(this.m_invMassB,u),o+=this.m_invIB*Zs.cross(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},ea.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=Xs.neo(i),s=Xs.neo(o),a=Xs.mulVec2(r,Zs.sub(this.m_localAnchorA,this.m_localCenterA)),l=Xs.mulVec2(s,Zs.sub(this.m_localAnchorB,this.m_localCenterB)),c=Zs.sub(Zs.add(e,this.m_rA),this.m_groundAnchorA),u=Zs.sub(Zs.add(n,this.m_rB),this.m_groundAnchorB),h=c.length(),m=u.length();h>10*Ys.linearSlop?c.mul(1/h):c.setZero(),m>10*Ys.linearSlop?u.mul(1/m):u.setZero();var p=Zs.cross(a,c),d=Zs.cross(l,u),f=this.m_invMassA+this.m_invIA*p*p,_=this.m_invMassB+this.m_invIB*d*d,y=f+this.m_ratio*this.m_ratio*_;y>0&&(y=1/y);var v=this.m_constant-h-this.m_ratio*m,g=Js.abs(v),b=-y*v,x=Zs.mul(-b,c),$=Zs.mul(-this.m_ratio*b,u);return e.addMul(this.m_invMassA,x),i+=this.m_invIA*Zs.cross(a,x),n.addMul(this.m_invMassB,$),o+=this.m_invIB*Zs.cross(l,$),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=o,g<Ys.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ia=ha,na=e,oa=y,ra=r.exports,sa=p,aa=J,la=ui,ca=kt;ha.TYPE="rope-joint",la.TYPES[ha.TYPE]=ha,ha._super=la,ha.prototype=Object.create(ha._super.prototype);var ua={maxLength:0};function ha(t,e,i,n){if(!(this instanceof ha))return new ha(t,e,i,n);t=na(t,ua),la.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=ha.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||sa.neo(-1,0),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||sa.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}ha.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},ha._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(ca,t.bodyA,e),t.bodyB=i(ca,t.bodyB,e),new ha(t)},ha.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},ha.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},ha.prototype.setMaxLength=function(t){this.m_maxLength=t},ha.prototype.getMaxLength=function(){return this.m_maxLength},ha.prototype.getLimitState=function(){return this.m_state},ha.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},ha.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},ha.prototype.getReactionForce=function(t){return sa.mul(this.m_impulse,this.m_u).mul(t)},ha.prototype.getReactionTorque=function(t){return 0},ha.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=aa.neo(i),u=aa.neo(s);this.m_rA=aa.mulSub(c,this.m_localAnchorA,this.m_localCenterA),this.m_rB=aa.mulSub(u,this.m_localAnchorB,this.m_localCenterB),this.m_u=sa.zero(),this.m_u.addCombine(1,r,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var h=this.m_length-this.m_maxLength;if(this.m_state=h>0?2:0,!(this.m_length>oa.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var m=sa.cross(this.m_rA,this.m_u),p=sa.cross(this.m_rB,this.m_u),d=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*p*p;if(this.m_mass=0!=d?1/d:0,t.warmStarting){this.m_impulse*=t.dtRatio;var f=sa.mul(this.m_impulse,this.m_u);n.subMul(this.m_invMassA,f),o-=this.m_invIA*sa.cross(this.m_rA,f),a.addMul(this.m_invMassB,f),l+=this.m_invIB*sa.cross(this.m_rB,f)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},ha.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=sa.addCross(e,i,this.m_rA),s=sa.addCross(n,o,this.m_rB),a=this.m_length-this.m_maxLength,l=sa.dot(this.m_u,sa.sub(s,r));a<0&&(l+=t.inv_dt*a);var c=-this.m_mass*l,u=this.m_impulse;this.m_impulse=ra.min(0,this.m_impulse+c),c=this.m_impulse-u;var h=sa.mul(c,this.m_u);e.subMul(this.m_invMassA,h),i-=this.m_invIA*sa.cross(this.m_rA,h),n.addMul(this.m_invMassB,h),o+=this.m_invIB*sa.cross(this.m_rB,h),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},ha.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=aa.neo(i),s=aa.neo(o),a=aa.mulSub(r,this.m_localAnchorA,this.m_localCenterA),l=aa.mulSub(s,this.m_localAnchorB,this.m_localCenterB),c=sa.zero();c.addCombine(1,n,1,l),c.subCombine(1,e,1,a);var u=c.normalize(),h=u-this.m_maxLength;h=ra.clamp(h,0,oa.maxLinearCorrection);var m=-this.m_mass*h,p=sa.mul(m,c);return e.subMul(this.m_invMassA,p),i-=this.m_invIA*sa.cross(a,p),n.addMul(this.m_invMassB,p),o+=this.m_invIB*sa.cross(l,p),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,u-this.m_maxLength<oa.linearSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var ma=Aa,pa=e,da=y,fa=r.exports,_a=p,ya=be,va=Ce,ga=J,ba=ui,xa=kt;Aa.TYPE="weld-joint",ba.TYPES[Aa.TYPE]=Aa,Aa._super=ba,Aa.prototype=Object.create(Aa._super.prototype);var $a={frequencyHz:0,dampingRatio:0};function Aa(t,e,i,n){if(!(this instanceof Aa))return new Aa(t,e,i,n);t=pa(t,$a),ba.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Aa.TYPE,this.m_localAnchorA=_a.clone(n?e.getLocalPoint(n):t.localAnchorA||_a.zero()),this.m_localAnchorB=_a.clone(n?i.getLocalPoint(n):t.localAnchorB||_a.zero()),this.m_referenceAngle=fa.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=ya(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new va}Aa.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},Aa._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(xa,t.bodyA,e),t.bodyB=i(xa,t.bodyB,e),new Aa(t)},Aa.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},Aa.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Aa.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Aa.prototype.getReferenceAngle=function(){return this.m_referenceAngle},Aa.prototype.setFrequency=function(t){this.m_frequencyHz=t},Aa.prototype.getFrequency=function(){return this.m_frequencyHz},Aa.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},Aa.prototype.getDampingRatio=function(){return this.m_dampingRatio},Aa.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Aa.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Aa.prototype.getReactionForce=function(t){return _a.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},Aa.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},Aa.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=ga.neo(e),l=ga.neo(o);this.m_rA=ga.mulVec2(a,_a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=ga.mulVec2(l,_a.sub(this.m_localAnchorB,this.m_localCenterB));var c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=new va;if(p.ex.x=c+u+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*m,p.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*m,p.ez.x=-this.m_rA.y*h-this.m_rB.y*m,p.ex.y=p.ey.x,p.ey.y=c+u+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*m,p.ez.y=this.m_rA.x*h+this.m_rB.x*m,p.ex.z=p.ez.x,p.ey.z=p.ez.y,p.ez.z=h+m,this.m_frequencyHz>0){p.getInverse22(this.m_mass);var d=h+m,f=d>0?1/d:0,_=o-e-this.m_referenceAngle,y=2*fa.PI*this.m_frequencyHz,v=2*f*this.m_dampingRatio*y,g=f*y*y,b=t.dt;this.m_gamma=b*(v+b*g),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=_*b*g*this.m_gamma,d+=this.m_gamma,this.m_mass.ez.z=0!=d?1/d:0}else 0==p.ez.z?(p.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(p.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var x=_a.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(c,x),n-=h*(_a.cross(this.m_rA,x)+this.m_impulse.z),r.addMul(u,x),s+=m*(_a.cross(this.m_rB,x)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=s},Aa.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var c=o-i,u=-this.m_mass.ez.z*(c+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,i-=a*u,o+=l*u,(p=_a.zero()).addCombine(1,n,1,_a.cross(o,this.m_rB)),p.subCombine(1,e,1,_a.cross(i,this.m_rA));var h=_a.neg(va.mulVec2(this.m_mass,p));this.m_impulse.x+=h.x,this.m_impulse.y+=h.y;var m=_a.clone(h);e.subMul(r,m),i-=a*_a.cross(this.m_rA,m),n.addMul(s,m),o+=l*_a.cross(this.m_rB,m)}else{var p;(p=_a.zero()).addCombine(1,n,1,_a.cross(o,this.m_rB)),p.subCombine(1,e,1,_a.cross(i,this.m_rA));c=o-i;var d=ya(p.x,p.y,c),f=ya.neg(va.mulVec3(this.m_mass,d));this.m_impulse.add(f);m=_a.neo(f.x,f.y);e.subMul(r,m),i-=a*(_a.cross(this.m_rA,m)+f.z),n.addMul(s,m),o+=l*(_a.cross(this.m_rB,m)+f.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},Aa.prototype.solvePositionConstraints=function(t){var e,i,n=this.m_bodyA.c_position.c,o=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=ga.neo(o),l=ga.neo(s),c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,m=this.m_invIB,p=ga.mulVec2(a,_a.sub(this.m_localAnchorA,this.m_localCenterA)),d=ga.mulVec2(l,_a.sub(this.m_localAnchorB,this.m_localCenterB)),f=new va;if(f.ex.x=c+u+p.y*p.y*h+d.y*d.y*m,f.ey.x=-p.y*p.x*h-d.y*d.x*m,f.ez.x=-p.y*h-d.y*m,f.ex.y=f.ey.x,f.ey.y=c+u+p.x*p.x*h+d.x*d.x*m,f.ez.y=p.x*h+d.x*m,f.ex.z=f.ez.x,f.ey.z=f.ez.y,f.ez.z=h+m,this.m_frequencyHz>0){(y=_a.zero()).addCombine(1,r,1,d),y.subCombine(1,n,1,p),e=y.length(),i=0;var _=_a.neg(f.solve22(y));n.subMul(c,_),o-=h*_a.cross(p,_),r.addMul(u,_),s+=m*_a.cross(d,_)}else{var y;(y=_a.zero()).addCombine(1,r,1,d),y.subCombine(1,n,1,p);var v=s-o-this.m_referenceAngle;e=y.length(),i=fa.abs(v);var g=ya(y.x,y.y,v),b=ya();if(f.ez.z>0)b=ya.neg(f.solve33(g));else{var x=_a.neg(f.solve22(y));b.set(x.x,x.y,0)}_=_a.neo(b.x,b.y);n.subMul(c,_),o-=h*(_a.cross(p,_)+b.z),r.addMul(u,_),s+=m*(_a.cross(d,_)+b.z)}return this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=o,this.m_bodyB.c_position.c=r,this.m_bodyB.c_position.a=s,e<=da.linearSlop&&i<=da.angularSlop},"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var wa=Ia,Ba=e,Ca=y,Sa=r.exports,Ea=p,Ma=J,Ta=ui,Pa=kt;Ia.TYPE="wheel-joint",Ta.TYPES[Ia.TYPE]=Ia,Ia._super=Ta,Ia.prototype=Object.create(Ia._super.prototype);var za,Fa={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function Ia(t,e,i,n,o){if(!(this instanceof Ia))return new Ia(t,e,i,n,o);t=Ba(t,Fa),Ta.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=Ia.TYPE,this.m_localAnchorA=Ea.clone(n?e.getLocalPoint(n):t.localAnchorA||Ea.zero()),this.m_localAnchorB=Ea.clone(n?i.getLocalPoint(n):t.localAnchorB||Ea.zero()),this.m_localXAxisA=Ea.clone(o?e.getLocalVector(o):t.localAxisA||t.localAxis||Ea.neo(1,0)),this.m_localYAxisA=Ea.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=Ea.zero(),this.m_ay=Ea.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}Ia.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},Ia._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(Pa,t.bodyA,e),t.bodyB=i(Pa,t.bodyB,e),new Ia(t)},Ia.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(Ea.cross(1,t.localAxisA)))},Ia.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},Ia.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},Ia.prototype.getLocalAxisA=function(){return this.m_localXAxisA},Ia.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),n=e.getWorldPoint(this.m_localAnchorB),o=Ea.sub(n,i),r=t.getWorldVector(this.m_localXAxisA);return Ea.dot(o,r)},Ia.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},Ia.prototype.isMotorEnabled=function(){return this.m_enableMotor},Ia.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},Ia.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},Ia.prototype.getMotorSpeed=function(){return this.m_motorSpeed},Ia.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},Ia.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},Ia.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},Ia.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},Ia.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},Ia.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},Ia.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},Ia.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},Ia.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},Ia.prototype.getReactionForce=function(t){return Ea.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},Ia.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},Ia.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,r=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,a=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,u=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,p=Ma.neo(s),d=Ma.neo(u),f=Ma.mulVec2(p,Ea.sub(this.m_localAnchorA,this.m_localCenterA)),_=Ma.mulVec2(d,Ea.sub(this.m_localAnchorB,this.m_localCenterB));if((b=Ea.zero()).addCombine(1,c,1,_),b.subCombine(1,r,1,f),this.m_ay=Ma.mulVec2(p,this.m_localYAxisA),this.m_sAy=Ea.cross(Ea.add(b,f),this.m_ay),this.m_sBy=Ea.cross(_,this.m_ay),this.m_mass=e+i+n*this.m_sAy*this.m_sAy+o*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=Ma.mulVec2(p,this.m_localXAxisA),this.m_sAx=Ea.cross(Ea.add(b,f),this.m_ax),this.m_sBx=Ea.cross(_,this.m_ax);var y=e+i+n*this.m_sAx*this.m_sAx+o*this.m_sBx*this.m_sBx;if(y>0){this.m_springMass=1/y;var v=Ea.dot(b,this.m_ax),g=2*Sa.PI*this.m_frequencyHz,b=2*this.m_springMass*this.m_dampingRatio*g,x=this.m_springMass*g*g,$=t.dt;this.m_gamma=$*(b+$*x),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=v*$*x*this.m_gamma,this.m_springMass=y+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=n+o,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var A=Ea.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),w=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,B=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;a.subMul(this.m_invMassA,A),l-=this.m_invIA*w,h.addMul(this.m_invMassB,A),m+=this.m_invIB*B}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=m},Ia.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,r=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,c=Ea.dot(this.m_ax,a)-Ea.dot(this.m_ax,r)+this.m_sBx*l-this.m_sAx*s,u=-this.m_springMass*(c+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;var h=Ea.mul(u,this.m_ax),m=u*this.m_sAx,p=u*this.m_sBx;r.subMul(e,h),s-=n*m,a.addMul(i,h);c=(l+=o*p)-s-this.m_motorSpeed,u=-this.m_motorMass*c;var d=this.m_motorImpulse,f=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=Sa.clamp(this.m_motorImpulse+u,-f,f),s-=n*(u=this.m_motorImpulse-d),l+=o*u;c=Ea.dot(this.m_ay,a)-Ea.dot(this.m_ay,r)+this.m_sBy*l-this.m_sAy*s,u=-this.m_mass*c;this.m_impulse+=u;h=Ea.mul(u,this.m_ay),m=u*this.m_sAy,p=u*this.m_sBy;r.subMul(e,h),s-=n*m,a.addMul(i,h),l+=o*p,this.m_bodyA.c_velocity.v.set(r),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=l},Ia.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,r=Ma.neo(i),s=Ma.neo(o),a=Ma.mulVec2(r,Ea.sub(this.m_localAnchorA,this.m_localCenterA)),l=Ma.mulVec2(s,Ea.sub(this.m_localAnchorB,this.m_localCenterB)),c=Ea.zero();c.addCombine(1,n,1,l),c.subCombine(1,e,1,a);var u,h=Ma.mulVec2(r,this.m_localYAxisA),m=Ea.cross(Ea.add(c,a),h),p=Ea.cross(l,h),d=Ea.dot(c,h),f=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;u=0!=f?-d/f:0;var _=Ea.mul(u,h),y=u*m,v=u*p;return e.subMul(this.m_invMassA,_),i-=this.m_invIA*y,n.addMul(this.m_invMassB,_),o+=this.m_invIB*v,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,Sa.abs(d)<=Ca.linearSlop},(za=$n).internal={},za.Serializer=t.exports,za.Math=r.exports,za.Vec2=p,za.Vec3=be,za.Mat22=te,za.Mat33=Ce,za.Transform=it,za.Rot=J,za.AABB=A,za.Shape=xt,za.Fixture=wt,za.Body=kt,za.Contact=ii,za.Joint=ui,za.World=Xi,za.Circle=wn,za.Edge=Pn,za.Polygon=Rn,za.Chain=Jn,za.Box=no,za.internal.CollidePolygons=zo,za.DistanceJoint=ar,za.FrictionJoint=vr,za.GearJoint=ss,za.MotorJoint=bs,za.MouseJoint=zs,za.PrismaticJoint=Wr,za.PulleyJoint=Ws,za.RevoluteJoint=Tr,za.RopeJoint=ia,za.WeldJoint=ma,za.WheelJoint=wa,za.Settings=y,za.internal.Sweep=lt,za.internal.stats=ye,za.internal.Manifold=oe.exports,za.internal.Distance=_e.exports,za.internal.TimeOfImpact=di.exports,za.internal.DynamicTree=z,za.internal.Settings=za.Settings;let ka={version:"4.12.0",date:"2021-07-09 09:15",ajaxAlwaysCallbacks:[],autopositionSpacing:4,closeOnEscape:void document.addEventListener("keydown",(t=>{"Escape"!==t.key&&"Escape"!==t.code&&"Esc"!==t.key||ka.getPanels((t=>t.classList.contains("jsPanel"))).some((t=>!!t.options.closeOnEscape&&("function"==typeof t.options.closeOnEscape?t.options.closeOnEscape.call(t,t):(t.close(null,!0),!0))))}),!1),defaults:{boxShadow:3,container:"window",contentSize:{width:"400px",height:"200px"},dragit:{cursor:"move",handles:".jsPanel-headerlogo, .jsPanel-titlebar, .jsPanel-ftr",opacity:.8,disableOnMaximized:!0},header:!0,headerTitle:"jsPanel",headerControls:{size:"md"},iconfont:void 0,maximizedMargin:0,minimizeTo:"default",paneltype:"standard",position:{my:"center",at:"center"},resizeit:{handles:"n, e, s, w, ne, se, sw, nw",minWidth:128,minHeight:38},theme:"default"},defaultAutocloseConfig:{time:"8s",progressbar:!0},defaultSnapConfig:{sensitivity:70,trigger:"panel",active:"both"},extensions:{},globalCallbacks:!1,icons:{close:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M13.7,11l6.1-6.1c0.4-0.4,0.4-0.9,0-1.3l-1.4-1.4c-0.4-0.4-0.9-0.4-1.3,0L11,8.3L4.9,2.3C4.6,1.9,4,1.9,3.7,2.3L2.3,3.7 C1.9,4,1.9,4.6,2.3,4.9L8.3,11l-6.1,6.1c-0.4,0.4-0.4,0.9,0,1.3l1.4,1.4c0.4,0.4,0.9,0.4,1.3,0l6.1-6.1l6.1,6.1 c0.4,0.4,0.9,0.4,1.3,0l1.4-1.4c0.4-0.4,0.4-0.9,0-1.3L13.7,11z"/></svg>',maximize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H3.7C2.8,2,2,2.9,2,3.9v14.1C2,19.1,2.8,20,3.7,20h14.6c0.9,0,1.7-0.9,1.7-1.9V3.9C20,2.9,19.2,2,18.3,2z M18.3,17.8 c0,0.1-0.1,0.2-0.2,0.2H3.9c-0.1,0-0.2-0.1-0.2-0.2V8.4h14.6V17.8z"/></svg>',normalize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.3,2H7.1C6.1,2,5.4,2.8,5.4,3.7v1.7H3.7C2.8,5.4,2,6.1,2,7.1v11.3C2,19.2,2.8,20,3.7,20h11.3c0.9,0,1.7-0.8,1.7-1.7v-1.7 h1.7c0.9,0,1.7-0.8,1.7-1.7V3.7C20,2.8,19.2,2,18.3,2z M14.9,18.3H3.7V11h11.3V18.3z M18.3,14.9h-1.7V7.1c0-0.9-0.8-1.7-1.7-1.7H7.1 V3.7h11.3V14.9z"/></svg>',minimize:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M18.9,19.8H3.1c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h15.8c0.6,0,1.1,0.5,1.1,1.1S19.5,19.8,18.9,19.8z"/></svg>',smallify:'<svg focusable="false" class="jsPanel-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="currentColor" d="M2.1,15.2L2.9,16c0.2,0.2,0.5,0.2,0.7,0L11,8.7l7.4,7.3c0.2,0.2,0.5,0.2,0.7,0l0.8-0.8c0.2-0.2,0.2-0.5,0-0.7L11.3,6 c-0.2-0.2-0.5-0.2-0.7,0l-8.5,8.5C2,14.7,2,15,2.1,15.2z"/></svg>'},idCounter:0,isIE:navigator.appVersion.match(/Trident/),pointerdown:"ontouchend"in window?["touchstart","mousedown"]:["mousedown"],pointermove:"ontouchend"in window?["touchmove","mousemove"]:["mousemove"],pointerup:"ontouchend"in window?["touchend","mouseup"]:["mouseup"],polyfills:(Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==t)throw new TypeError("Cannot convert first argument to object");let e=Object(t);for(let i=1;i<arguments.length;i++){let t=arguments[i];if(null==t)continue;t=Object(t);let n=Object.keys(Object(t));for(let i=0,o=n.length;i<o;i++){let o=n[i],r=Object.getOwnPropertyDescriptor(t,o);void 0!==r&&r.enumerable&&(e[o]=t[o])}}return e}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(let i=0;i<this.length;i++)t.call(e,this[i],i,this)}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){t.append=t.append||function(){let t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){let i=t instanceof Node;e.appendChild(i?t:document.createTextNode(String(t)))})),this.appendChild(e)}})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let e,i=(this.document||this.ownerDocument).querySelectorAll(t),n=this;do{for(e=i.length;--e>=0&&i.item(e)!==n;);}while(e<0&&(n=n.parentElement));return n}),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};let i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.Event.prototype,window.CustomEvent=t}(),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return e<this.length?e|=0:e=this.length,this.substr(e-t.length,t.length)===t}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},void(Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');let i=Object(this),n=i.length>>>0;if(0===n)return!1;let o=0|e,r=Math.max(o>=0?o:n-Math.abs(o),0);for(;r<n;){if((s=i[r])===(a=t)||"number"==typeof s&&"number"==typeof a&&isNaN(s)&&isNaN(a))return!0;r++}var s,a;return!1}}))),themes:["default","primary","secondary","info","success","warning","danger","light","dark"],ziBase:100,colorFilledLight:.81,colorFilledDark:.08,colorFilled:0,colorBrightnessThreshold:.55,colorNames:{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32",grey50:"fafafa",grey100:"f5f5f5",grey200:"eee",grey300:"e0e0e0",grey400:"bdbdbd",grey500:"9e9e9e",grey600:"757575",grey700:"616161",grey800:"424242",grey900:"212121",gray50:"fafafa",gray100:"f5f5f5",gray200:"eee",gray300:"e0e0e0",gray400:"bdbdbd",gray500:"9e9e9e",gray600:"757575",gray700:"616161",gray800:"424242",gray900:"212121",bluegrey50:"eceff1",bluegrey100:"CFD8DC",bluegrey200:"B0BEC5",bluegrey300:"90A4AE",bluegrey400:"78909C",bluegrey500:"607D8B",bluegrey600:"546E7A",bluegrey700:"455A64",bluegrey800:"37474F",bluegrey900:"263238",bluegray50:"eceff1",bluegray100:"CFD8DC",bluegray200:"B0BEC5",bluegray300:"90A4AE",bluegray400:"78909C",bluegray500:"607D8B",bluegray600:"546E7A",bluegray700:"455A64",bluegray800:"37474F",bluegray900:"263238",red50:"FFEBEE",red100:"FFCDD2",red200:"EF9A9A",red300:"E57373",red400:"EF5350",red500:"F44336",red600:"E53935",red700:"D32F2F",red800:"C62828",red900:"B71C1C",reda100:"FF8A80",reda200:"FF5252",reda400:"FF1744",reda700:"D50000",pink50:"FCE4EC",pink100:"F8BBD0",pink200:"F48FB1",pink300:"F06292",pink400:"EC407A",pink500:"E91E63",pink600:"D81B60",pink700:"C2185B",pink800:"AD1457",pink900:"880E4F",pinka100:"FF80AB",pinka200:"FF4081",pinka400:"F50057",pinka700:"C51162",purple50:"F3E5F5",purple100:"E1BEE7",purple200:"CE93D8",purple300:"BA68C8",purple400:"AB47BC",purple500:"9C27B0",purple600:"8E24AA",purple700:"7B1FA2",purple800:"6A1B9A",purple900:"4A148C",purplea100:"EA80FC",purplea200:"E040FB",purplea400:"D500F9",purplea700:"AA00FF",deeppurple50:"EDE7F6",deeppurple100:"D1C4E9",deeppurple200:"B39DDB",deeppurple300:"9575CD",deeppurple400:"7E57C2",deeppurple500:"673AB7",deeppurple600:"5E35B1",deeppurple700:"512DA8",deeppurple800:"4527A0",deeppurple900:"311B92",deeppurplea100:"B388FF",deeppurplea200:"7C4DFF",deeppurplea400:"651FFF",deeppurplea700:"6200EA",indigo50:"E8EAF6",indigo100:"C5CAE9",indigo200:"9FA8DA",indigo300:"7986CB",indigo400:"5C6BC0",indigo500:"3F51B5",indigo600:"3949AB",indigo700:"303F9F",indigo800:"283593",indigo900:"1A237E",indigoa100:"8C9EFF",indigoa200:"536DFE",indigoa400:"3D5AFE",indigoa700:"304FFE",blue50:"E3F2FD",blue100:"BBDEFB",blue200:"90CAF9",blue300:"64B5F6",blue400:"42A5F5",blue500:"2196F3",blue600:"1E88E5",blue700:"1976D2",blue800:"1565C0",blue900:"0D47A1",bluea100:"82B1FF",bluea200:"448AFF",bluea400:"2979FF",bluea700:"2962FF",lightblue50:"E1F5FE",lightblue100:"B3E5FC",lightblue200:"81D4FA",lightblue300:"4FC3F7",lightblue400:"29B6F6",lightblue500:"03A9F4",lightblue600:"039BE5",lightblue700:"0288D1",lightblue800:"0277BD",lightblue900:"01579B",lightbluea100:"80D8FF",lightbluea200:"40C4FF",lightbluea400:"00B0FF",lightbluea700:"0091EA",cyan50:"E0F7FA",cyan100:"B2EBF2",cyan200:"80DEEA",cyan300:"4DD0E1",cyan400:"26C6DA",cyan500:"00BCD4",cyan600:"00ACC1",cyan700:"0097A7",cyan800:"00838F",cyan900:"006064",cyana100:"84FFFF",cyana200:"18FFFF",cyana400:"00E5FF",cyana700:"00B8D4",teal50:"E0F2F1",teal100:"B2DFDB",teal200:"80CBC4",teal300:"4DB6AC",teal400:"26A69A",teal500:"009688",teal600:"00897B",teal700:"00796B",teal800:"00695C",teal900:"004D40",teala100:"A7FFEB",teala200:"64FFDA",teala400:"1DE9B6",teala700:"00BFA5",green50:"E8F5E9",green100:"C8E6C9",green200:"A5D6A7",green300:"81C784",green400:"66BB6A",green500:"4CAF50",green600:"43A047",green700:"388E3C",green800:"2E7D32",green900:"1B5E20",greena100:"B9F6CA",greena200:"69F0AE",greena400:"00E676",greena700:"00C853",lightgreen50:"F1F8E9",lightgreen100:"DCEDC8",lightgreen200:"C5E1A5",lightgreen300:"AED581",lightgreen400:"9CCC65",lightgreen500:"8BC34A",lightgreen600:"7CB342",lightgreen700:"689F38",lightgreen800:"558B2F",lightgreen900:"33691E",lightgreena100:"CCFF90",lightgreena200:"B2FF59",lightgreena400:"76FF03",lightgreena700:"64DD17",lime50:"F9FBE7",lime100:"F0F4C3",lime200:"E6EE9C",lime300:"DCE775",lime400:"D4E157",lime500:"CDDC39",lime600:"C0CA33",lime700:"AFB42B",lime800:"9E9D24",lime900:"827717",limea100:"F4FF81",limea200:"EEFF41",limea400:"C6FF00",limea700:"AEEA00",yellow50:"FFFDE7",yellow100:"FFF9C4",yellow200:"FFF59D",yellow300:"FFF176",yellow400:"FFEE58",yellow500:"FFEB3B",yellow600:"FDD835",yellow700:"FBC02D",yellow800:"F9A825",yellow900:"F57F17",yellowa100:"FFFF8D",yellowa200:"FFFF00",yellowa400:"FFEA00",yellowa700:"FFD600",amber50:"FFF8E1",amber100:"FFECB3",amber200:"FFE082",amber300:"FFD54F",amber400:"FFCA28",amber500:"FFC107",amber600:"FFB300",amber700:"FFA000",amber800:"FF8F00",amber900:"FF6F00",ambera100:"FFE57F",ambera200:"FFD740",ambera400:"FFC400",ambera700:"FFAB00",orange50:"FFF3E0",orange100:"FFE0B2",orange200:"FFCC80",orange300:"FFB74D",orange400:"FFA726",orange500:"FF9800",orange600:"FB8C00",orange700:"F57C00",orange800:"EF6C00",orange900:"E65100",orangea100:"FFD180",orangea200:"FFAB40",orangea400:"FF9100",orangea700:"FF6D00",deeporange50:"FBE9E7",deeporange100:"FFCCBC",deeporange200:"FFAB91",deeporange300:"FF8A65",deeporange400:"FF7043",deeporange500:"FF5722",deeporange600:"F4511E",deeporange700:"E64A19",deeporange800:"D84315",deeporange900:"BF360C",deeporangea100:"FF9E80",deeporangea200:"FF6E40",deeporangea400:"FF3D00",deeporangea700:"DD2C00",brown50:"EFEBE9",brown100:"D7CCC8",brown200:"BCAAA4",brown300:"A1887F",brown400:"8D6E63",brown500:"795548",brown600:"6D4C41",brown700:"5D4037",brown800:"4E342E",brown900:"3E2723"},errorReporting:1,modifier:!1,helper:(document.addEventListener("keydown",(t=>{ka.modifier=t})),void document.addEventListener("keyup",(()=>{ka.modifier=!1}))),color(t){let e,i,n,o,r,s,a,l,c,u=t.toLowerCase(),h={};const m=/^rgba?\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3}),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,p=/^hsla?\(([0-9]{1,3}),([0-9]{1,3}%),([0-9]{1,3}%),?(0|1|0\.[0-9]{1,2}|\.[0-9]{1,2})?\)$/gi,d=this.colorNames;return d[u]&&(u=d[u]),null!==u.match(/^#?([0-9a-f]{3}|[0-9a-f]{6})$/gi)?((u=u.replace("#","")).length%2==1?(e=String(u.substr(0,1))+u.substr(0,1),i=String(u.substr(1,1))+u.substr(1,1),n=String(u.substr(2,1))+u.substr(2,1),h.rgb={r:parseInt(e,16),g:parseInt(i,16),b:parseInt(n,16)},h.hex=`#${e}${i}${n}`):(h.rgb={r:parseInt(u.substr(0,2),16),g:parseInt(u.substr(2,2),16),b:parseInt(u.substr(4,2),16)},h.hex=`#${u}`),c=this.rgbToHsl(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl=c,h.rgb.css=`rgb(${h.rgb.r},${h.rgb.g},${h.rgb.b})`):u.match(m)?(a=m.exec(u),h.rgb={css:u,r:a[1],g:a[2],b:a[3]},h.hex=this.rgbToHex(a[1],a[2],a[3]),c=this.rgbToHsl(a[1],a[2],a[3]),h.hsl=c):u.match(p)?(o=(a=p.exec(u))[1]/360,r=a[2].substr(0,a[2].length-1)/100,s=a[3].substr(0,a[3].length-1)/100,l=this.hslToRgb(o,r,s),h.rgb={css:`rgb(${l[0]},${l[1]},${l[2]})`,r:l[0],g:l[1],b:l[2]},h.hex=this.rgbToHex(h.rgb.r,h.rgb.g,h.rgb.b),h.hsl={css:`hsl(${a[1]},${a[2]},${a[3]})`,h:a[1],s:a[2],l:a[3]}):(h.hex="#f5f5f5",h.rgb={css:"rgb(245,245,245)",r:245,g:245,b:245},h.hsl={css:"hsl(0,0%,96%)",h:0,s:"0%",l:"96%"}),h},calcColors(t){const e=this.colorBrightnessThreshold,i=this.color(t),n=this.lighten(t,this.colorFilledLight),o=this.darken(t,this.colorFilled),r=this.perceivedBrightness(t)<=e?"#ffffff":"#000000",s=this.perceivedBrightness(n)<=e?"#ffffff":"#000000",a=this.perceivedBrightness(o)<=e?"#ffffff":"#000000",l=this.lighten(t,this.colorFilledDark),c=this.perceivedBrightness(l)<=e?"#ffffff":"#000000";return[i.hsl.css,n,o,r,s,a,l,c]},darken(t,e){const i=this.color(t).hsl,n=parseFloat(i.l),o=Math.round(n-n*e)+"%";return`hsl(${i.h},${i.s},${o})`},lighten(t,e){const i=this.color(t).hsl,n=parseFloat(i.l),o=Math.round(n+(100-n)*e)+"%";return`hsl(${i.h},${i.s},${o})`},hslToRgb(t,e,i){let n,o,r;if(0===e)n=o=r=i;else{let s=(t,e,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t),a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;n=s(l,a,t+1/3),o=s(l,a,t),r=s(l,a,t-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*r)]},rgbToHsl(t,e,i){t/=255,e/=255,i/=255;let n,o,r=Math.max(t,e,i),s=Math.min(t,e,i),a=(r+s)/2;if(r===s)n=o=0;else{let l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{css:"hsl("+(n=Math.round(360*n))+","+(o=Math.round(100*o)+"%")+","+(a=Math.round(100*a)+"%")+")",h:n,s:o,l:a}},rgbToHex(t,e,i){let n=Number(t).toString(16),o=Number(e).toString(16),r=Number(i).toString(16);return 1===n.length&&(n=`0${n}`),1===o.length&&(o=`0${o}`),1===r.length&&(r=`0${r}`),`#${n}${o}${r}`},perceivedBrightness(t){const e=this.color(t).rgb;return e.r/255*.2126+e.g/255*.7152+e.b/255*.0722},pOposition(t){let e={},i=t.trim().split(/\s+/),n=i.filter((t=>t.match(/^(down|right|up|left)$/i)));n.length&&(e.autoposition=n[0],i.splice(i.indexOf(n[0]),1));let o=i.filter((t=>t.match(/^(left-|right-)(top|center|bottom)$|(^center-)(top|bottom)$|(^center$)/i)));o.length?(e.my=o[0],e.at=o[1]||o[0],i.splice(i.indexOf(o[0]),1),o[1]&&i.splice(i.indexOf(o[1]),1)):(e.my="center",e.at="center");let r=i.filter((t=>t.match(/^[+-]?\d*\.?\d+[a-z%]*$/i)));return r.length&&(e.offsetX=r[0].match(/^[+-]?\d*\.?\d+$/i)?`${r[0]}px`:r[0],r[1]?e.offsetY=r[1].match(/^[+-]?\d*\.?\d+$/i)?`${r[1]}px`:r[1]:e.offsetY=e.offsetX,i.splice(i.indexOf(r[0]),1),r[1]&&i.splice(i.indexOf(r[1]),1)),i.length&&(e.of=i.join(" ")),e},position(t,e){if(!e)return t.style.opacity=1,t;e="string"==typeof e?Object.assign({},this.defaults.position,this.pOposition(e)):Object.assign({},this.defaults.position,e),["my","at","of"].forEach((i=>{"function"==typeof e[i]&&(e[i]=e[i].call(t,t))})),"window"===t.options.container&&(t.style.position="fixed"),"string"==typeof t?t=document.querySelector(t):Object.getPrototypeOf(t).jquery&&(t=t[0]);const i="window"===t.options.container?"window":t.parentElement,n=t.getBoundingClientRect(),o=t.parentElement.getBoundingClientRect(),r="window"===i?{left:0,top:0,width:document.documentElement.clientWidth,height:window.innerHeight}:{width:o.width,height:o.height,left:o.left,top:o.top},s="window"===i?{x:1,y:1}:{x:r.width/i.offsetWidth,y:r.height/i.offsetHeight},a="window"===i?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:window.getComputedStyle(i);let l;r.width-=(parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth))*s.x,r.height-=(parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth))*s.y,l=e.of?"string"==typeof e.of?"window"===e.of?{borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"}:document.querySelector(e.of).getBoundingClientRect():Object.getPrototypeOf(e.of).jquery?e.of[0].getBoundingClientRect():e.of.getBoundingClientRect():r;let c=this.getScrollbarWidth(document.body),u=this.getScrollbarWidth(t.parentElement),h="0px";e.my.startsWith("left-")?e.at.startsWith("left-")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+"px":"0px":e.at.startsWith("center")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+l.width/2+"px":r.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+l.width+"px":r.width+"px"):e.my.startsWith("center")?e.at.startsWith("left-")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-n.width/2+"px":-n.width/2+"px":e.at.startsWith("center")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-(n.width-l.width)/2+"px":r.width/2-n.width/2+"px":e.at.startsWith("right-")&&(h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+(l.width-n.width/2)+"px":r.width-n.width/2+"px"):e.my.startsWith("right-")&&(e.at.startsWith("left-")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-n.width+"px":-n.width+"px":e.at.startsWith("center")?h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)-n.width+l.width/2+"px":r.width/2-n.width+"px":e.at.startsWith("right-")&&(h=e.of?l.left-r.left-parseFloat(a.borderLeftWidth)+l.width-n.width+"px":r.width-n.width+"px","window"!==i&&(h=parseFloat(h)-u.y+"px")));let m="0px";e.my.endsWith("-top")?e.at.endsWith("-top")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)+"px":"0px":e.at.endsWith("center")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)+l.height/2+"px":r.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)+l.height+"px":r.height+"px"):e.my.endsWith("center")?e.at.endsWith("-top")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height/2+"px":-n.height/2+"px":e.at.endsWith("center")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height/2+l.height/2+"px":r.height/2-n.height/2+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height/2+l.height+"px":r.height-n.height/2+"px"):e.my.endsWith("-bottom")&&(e.at.endsWith("-top")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height+"px":-n.height+"px":e.at.endsWith("center")?m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height+l.height/2+"px":r.height/2-n.height+"px":e.at.endsWith("-bottom")&&(m=e.of?l.top-r.top-parseFloat(a.borderTopWidth)-n.height+l.height+"px":r.height-n.height+"px",m="window"!==i?parseFloat(m)-u.x+"px":parseFloat(m)-c.x+"px")),t.style.left=1===s.x?h:parseFloat(h)/s.x+"px",t.style.top=1===s.y?m:parseFloat(m)/s.y+"px";let p=getComputedStyle(t),d={left:p.left,top:p.top};return e.autoposition&&e.my===e.at&&["left-top","center-top","right-top","left-bottom","center-bottom","right-bottom"].indexOf(e.my)>=0&&(d=this.applyPositionAutopos(t,d,e)),(e.offsetX||e.offsetY)&&(d=this.applyPositionOffset(t,d,e)),(e.minLeft||e.minTop||e.maxLeft||e.maxTop)&&(d=this.applyPositionMinMax(t,d,e)),e.modify&&(d=this.applyPositionModify(t,d,e)),"number"==typeof t.options.opacity?t.style.opacity=t.options.opacity:t.style.opacity=1,t},applyPositionAutopos(t,e,i){const n=`${i.my}-${i.autoposition.toLowerCase()}`;t.classList.add(n);const o=Array.prototype.slice.call(document.querySelectorAll(`.${n}`)),r=o.indexOf(t);if(o.length>1){switch(i.autoposition){case"down":o.forEach(((t,i)=>{i>0&&i<=r&&(e.top=parseFloat(e.top)+o[--i].getBoundingClientRect().height+ka.autopositionSpacing+"px")}));break;case"up":o.forEach(((t,i)=>{i>0&&i<=r&&(e.top=parseFloat(e.top)-o[--i].getBoundingClientRect().height-ka.autopositionSpacing+"px")}));break;case"right":o.forEach(((t,i)=>{i>0&&i<=r&&(e.left=parseFloat(e.left)+o[--i].getBoundingClientRect().width+ka.autopositionSpacing+"px")}));break;case"left":o.forEach(((t,i)=>{i>0&&i<=r&&(e.left=parseFloat(e.left)-o[--i].getBoundingClientRect().width-ka.autopositionSpacing+"px")}))}t.style.left=e.left,t.style.top=e.top}return{left:e.left,top:e.top}},applyPositionOffset(t,e,i){["offsetX","offsetY"].forEach((t=>{i[t]?("function"==typeof i[t]&&(i[t]=i[t].call(e,e,i)),!1===isNaN(i[t])&&(i[t]=`${i[t]}px`)):i[t]="0px"})),t.style.left=`calc(${t.style.left} + ${i.offsetX})`,t.style.top=`calc(${t.style.top} + ${i.offsetY})`;const n=getComputedStyle(t);return{left:n.left,top:n.top}},applyPositionMinMax(t,e,i){if(["minLeft","minTop","maxLeft","maxTop"].forEach((t=>{i[t]&&("function"==typeof i[t]&&(i[t]=i[t].call(e,e,i)),(Number.isInteger(i[t])||i[t].match(/^\d+$/))&&(i[t]=`${i[t]}px`))})),i.minLeft){t.style.left=i.minLeft;let n=getComputedStyle(t).left;parseFloat(n)<parseFloat(e.left)?t.style.left=e.left:e.left=n}if(i.minTop){t.style.top=i.minTop;let n=getComputedStyle(t).top;parseFloat(n)<parseFloat(e.top)?t.style.top=e.top:e.top=n}if(i.maxLeft){t.style.left=i.maxLeft;let n=getComputedStyle(t).left;parseFloat(n)>parseFloat(e.left)?t.style.left=e.left:e.left=n}if(i.maxTop){t.style.top=i.maxTop;let n=getComputedStyle(t).top;parseFloat(n)>parseFloat(e.top)?t.style.top=e.top:e.top=n}const n=getComputedStyle(t);return{left:n.left,top:n.top}},applyPositionModify(t,e,i){if(i.modify&&"function"==typeof i.modify){const n=i.modify.call(e,e,i);t.style.left=Number.isInteger(n.left)||n.left.match(/^\d+$/)?`${n.left}px`:n.left,t.style.top=Number.isInteger(n.top)||n.top.match(/^\d+$/)?`${n.top}px`:n.top}const n=getComputedStyle(t);return{left:n.left,top:n.top}},autopositionRemaining(t){let e,i=t.options.container;["left-top-down","left-top-right","center-top-down","right-top-down","right-top-left","left-bottom-up","left-bottom-right","center-bottom-up","right-bottom-up","right-bottom-left"].forEach((i=>{t.classList.contains(i)&&(e=i)})),e&&("window"===i?document.body:"string"==typeof i?document.querySelector(i):i).querySelectorAll(`.${e}`).forEach((t=>{t.reposition()}))},addScript(t,e="application/javascript",i){if(!document.querySelector(`script[src="${t}"]`)){const n=document.createElement("script");i&&(n.onload=i),n.src=t,n.type=e,document.head.appendChild(n)}},ajax(t,e){let i,n,o=new XMLHttpRequest;const r={method:"GET",async:!0,user:"",pwd:"",done:function(){if(e){let t=ka.strToHtml(this.responseText);i.urlSelector&&(t=t.querySelector(i.urlSelector)),e.contentRemove(),e.content.append(t)}},autoresize:!0,autoreposition:!0};if(e&&"string"==typeof t)i=Object.assign({},r,{url:t});else{if("object"!=typeof t||!t.url){if(this.errorReporting){let t="XMLHttpRequest seems to miss the <mark>url</mark> parameter!";ka.errorpanel(t)}return}(i=Object.assign({},r,t)).url=t.url,!1===i.async&&(i.timeout=0,i.withCredentials&&(i.withCredentials=void 0),i.responseType&&(i.responseType=void 0))}n=i.url.trim().split(/\s+/),i.url=encodeURI(n[0]),n.length>1&&(n.shift(),i.urlSelector=n.join(" ")),o.onreadystatechange=()=>{4===o.readyState&&(200===o.status?e?i.done.call(o,o,e):i.done.call(o,o):i.fail&&(e?i.fail.call(o,o,e):i.fail.call(o,o)),i.always&&(e?i.always.call(o,o,e):i.always.call(o,o)),e&&(i.autoresize||i.autoreposition)&&ka.ajaxAutoresizeAutoreposition(e,i),ka.ajaxAlwaysCallbacks.length&&ka.ajaxAlwaysCallbacks.forEach((t=>{e?t.call(o,o,e):t.call(o,o)})))},o.open(i.method,i.url,i.async,i.user,i.pwd),o.timeout=i.timeout||0,i.withCredentials&&(o.withCredentials=i.withCredentials),i.responseType&&(o.responseType=i.responseType),i.beforeSend&&(e?i.beforeSend.call(o,o,e):i.beforeSend.call(o,o)),i.data?o.send(i.data):o.send(null)},ajaxAutoresizeAutoreposition(t,e){const i=t.options.contentSize;if("string"==typeof i&&i.match(/auto/i)){const n=i.split(" "),o=Object.assign({},{width:n[0],height:n[1]});e.autoresize&&t.resize(o),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}else if("object"==typeof i&&("auto"===i.width||"auto"===i.height)){const n=Object.assign({},i);e.autoresize&&t.resize(n),t.classList.contains("jsPanel-contextmenu")||e.autoreposition&&t.reposition()}},createPanelTemplate(t=!0){const e=document.createElement("div");return e.className="jsPanel",e.style.left="0",e.style.top="0",t&&["close","maximize","normalize","minimize","smallify"].forEach((t=>{e.setAttribute(`data-btn${t}`,"enabled")})),e.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-smallify"  aria-label="Smallify">${this.icons.smallify}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-minimize"  aria-label="Minimize">${this.icons.minimize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                                <div class="jsPanel-hdr-toolbar"></div>\n                            </div>\n                            <div class="jsPanel-progressbar">\n                                <div class="jsPanel-progressbar-slider"></div>\n                            </div>\n                            <div class="jsPanel-content"></div>\n                            <div class="jsPanel-minimized-box"></div>\n                            <div class="jsPanel-ftr"></div>`,e},createMinimizedTemplate(){const t=document.createElement("div");return t.className="jsPanel-replacement",t.innerHTML=`<div class="jsPanel-hdr">\n                                <div class="jsPanel-headerbar">\n                                    <div class="jsPanel-headerlogo"></div>\n                                    <div class="jsPanel-titlebar">\n                                        <div class="jsPanel-title"></div>\n                                    </div>\n                                    <div class="jsPanel-controlbar">\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-normalize" aria-label="Normalize">${this.icons.normalize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-maximize"  aria-label="Maximize">${this.icons.maximize}</button>\n                                        <button type="button" class="jsPanel-btn jsPanel-btn-sm jsPanel-btn-close"     aria-label="Close">${this.icons.close}</button>\n                                    </div>\n                                </div>\n                            </div>`,t},createSnapArea(t,e,i){const n=document.createElement("div"),o=t.parentElement;n.className=`jsPanel-snap-area jsPanel-snap-area-${e}`,"lt"===e||"rt"===e||"rb"===e||"lb"===e?(n.style.width=i+"px",n.style.height=i+"px"):"ct"===e||"cb"===e?n.style.height=i+"px":"lc"!==e&&"rc"!==e||(n.style.width=i+"px"),o!==document.body&&(n.style.position="absolute"),document.querySelector(`.jsPanel-snap-area.jsPanel-snap-area-${e}`)||t.parentElement.appendChild(n)},emptyNode(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},extend(t){if("[object Object]"===Object.prototype.toString.call(t))for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this.extensions[e]=t[e])},fetch(t,e){let i;const n={bodyMethod:"text",autoresize:!0,autoreposition:!0,done:function(t,e){if(e){let i=ka.strToHtml(t);e.contentRemove(),e.content.append(i)}}};if(e&&"string"==typeof t)i=Object.assign({},n,{resource:encodeURI(t)});else{if("object"!=typeof t||!t.resource){if(this.errorReporting){let t="Fetch Request seems to miss the <mark>resource</mark> parameter!";ka.errorpanel(t)}return}(i=Object.assign({},n,t)).resource=encodeURI(t.resource)}const o=i.fetchInit||{};i.beforeSend&&(e?i.beforeSend.call(t,t,e):i.beforeSend.call(t,t)),fetch(i.resource,o).then((t=>{if(t.ok)return t[i.bodyMethod]()})).then((t=>{e?i.done.call(t,t,e):i.done.call(t,t),e&&(i.autoresize||i.autoreposition)&&ka.ajaxAutoresizeAutoreposition(e,i)}))},getPanels:(t=function(){return this.classList.contains("jsPanel-standard")})=>Array.prototype.slice.call(document.querySelectorAll(".jsPanel")).filter((e=>t.call(e,e))).sort(((t,e)=>e.style.zIndex-t.style.zIndex)),pOcontainer(t){if("window"===t)return document.body;if("string"==typeof t){let e=document.querySelectorAll(t);return!!(e.length&&e.length>0)&&e}return 1===t.nodeType?t:!!t.length&&t[0]},pOcontainment(t){let e=t;if("function"==typeof t&&(e=t()),"number"==typeof e)return[e,e,e,e];if(Array.isArray(e)){if(1===e.length)return[e[0],e[0],e[0],e[0]];if(2===e.length)return e.concat(e);3===e.length&&(e[3]=e[1])}return e},pOsize(t,e){let i=e||this.defaults.contentSize;const n=t.parentElement;if("string"==typeof i){const t=i.trim().split(" ");(i={}).width=t[0],2===t.length?i.height=t[1]:i.height=t[0]}else i.width&&!i.height?i.height=i.width:i.height&&!i.width&&(i.width=i.height);if(String(i.width).match(/^[0-9.]+$/gi))i.width+="px";else if("string"==typeof i.width&&i.width.endsWith("%"))if(n===document.body)i.width=window.innerWidth*(parseFloat(i.width)/100)+"px";else{const t=window.getComputedStyle(n),e=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);i.width=(parseFloat(t.width)-e)*(parseFloat(i.width)/100)+"px"}else"function"==typeof i.width&&(i.width=i.width.call(t,t),("number"==typeof i.width||"string"==typeof i.width&&i.width.match(/^[0-9.]+$/gi))&&(i.width+="px"));if(String(i.height).match(/^[0-9.]+$/gi))i.height+="px";else if("string"==typeof i.height&&i.height.endsWith("%"))if(n===document.body)i.height=window.innerHeight*(parseFloat(i.height)/100)+"px";else{const t=window.getComputedStyle(n),e=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);i.height=(parseFloat(t.height)-e)*(parseFloat(i.height)/100)+"px"}else"function"==typeof i.height&&(i.height=i.height.call(t,t),("number"==typeof i.height||"string"==typeof i.height&&i.height.match(/^[0-9.]+$/gi))&&(i.height+="px"));return i},pOborder(t){t=t.trim();const e=new Array(3),i=t.match(/\s*(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s*/gi),n=t.match(/\s*(thin|medium|thick)|(\d*\.?\d+[a-zA-Z]{2,4})\s*/gi);return i?(e[1]=i[0].trim(),t=t.replace(e[1],"")):e[1]="solid",n?(e[0]=n[0].trim(),t=t.replace(e[0],"")):e[0]="medium",e[2]=t.trim(),e},pOheaderControls(t){if("string"==typeof t){let e={},i=t.toLowerCase(),n=i.match(/xl|lg|md|sm|xs/),o=i.match(/closeonly|none/);return n&&(e.size=n[0]),o&&(e=Object.assign({},e,{maximize:"remove",normalize:"remove",minimize:"remove",smallify:"remove"}),"none"===o[0]&&(e.close="remove")),Object.assign({},this.defaults.headerControls,e)}return Object.assign({},this.defaults.headerControls,t)},processCallbacks(t,e,i="some",n,o){if("function"==typeof e&&(e=[e]),i)return e[i]((e=>e.call(t,t,n,o)));e.forEach((e=>{e.call(t,t,n,o)}))},removeSnapAreas(){document.querySelectorAll(".jsPanel-snap-area").forEach((t=>{t.parentElement.removeChild(t)}))},resetZi(){this.zi=((t=ka.ziBase)=>{let e=t;return{next:()=>e++}})(),Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).sort(((t,e)=>t.style.zIndex-e.style.zIndex)).forEach((t=>{t.style.zIndex=ka.zi.next()}))},getScrollbarWidth(t=document.body){if(t===document.body)return{y:window.innerWidth-document.documentElement.clientWidth,x:window.innerHeight-document.documentElement.clientHeight};{let e=getComputedStyle(t);return{y:t.offsetWidth-t.clientWidth-parseFloat(e.borderRightWidth)-parseFloat(e.borderLeftWidth),x:t.offsetHeight-t.clientHeight-parseFloat(e.borderBottomWidth)-parseFloat(e.borderTopWidth)}}},remClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.remove(e))),t),setClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>t.classList.add(e))),t),setStyles(t,e){for(let i in e)i in t.style?t.style[i]=e[i]:t.style.setProperty(i,e[i]);return t},setStyle(t,e){return this.setStyles.call(t,t,e)},strToHtml:t=>document.createRange().createContextualFragment(t),toggleClass:(t,e)=>(e.trim().split(/\s+/).forEach((e=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)})),t),errorpanel(t){this.create({paneltype:"error",dragit:!1,resizeit:!1,theme:{bgPanel:"white",bgContent:"white",colorHeader:"rebeccapurple",colorContent:"#333",border:"2px solid rebeccapurple"},borderRadius:".33rem",headerControls:"closeonly xs",headerTitle:"&#9888; jsPanel Error",contentSize:{width:"50%",height:"auto"},position:"center-top 0 5 down",animateIn:"jsPanelFadeIn",content:`<div class="jsPanel-error-content-separator"></div><p>${t}</p>`})},create(t={},e){ka.zi||(ka.zi=((t=ka.ziBase)=>{let e=t;return{next:()=>e++}})()),t.config?delete(t=Object.assign({},this.defaults,t.config,t)).config:t=Object.assign({},this.defaults,t),t.id?"function"==typeof t.id&&(t.id=t.id()):t.id=`jsPanel-${ka.idCounter+=1}`;const i=document.getElementById(t.id);if(null!==i){if(i.classList.contains("jsPanel")&&i.front(),this.errorReporting){let e=`&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>An element with the ID <mark>${t.id}</mark> already exists in the document.`;ka.errorpanel(e)}return!1}let n=this.pOcontainer(t.container);if("object"==typeof n&&n.length&&n.length>0&&(n=n[0]),!n){if(this.errorReporting){let t="&#9664; COULD NOT CREATE NEW JSPANEL &#9658;<br>The container to append the panel to does not exist";ka.errorpanel(t)}return!1}["onbeforeclose","onbeforemaximize","onbeforeminimize","onbeforenormalize","onbeforesmallify","onbeforeunsmallify","onclosed","onfronted","onmaximized","onminimized","onnormalized","onsmallified","onstatuschange","onunsmallified"].forEach((e=>{t[e]?"function"==typeof t[e]&&(t[e]=[t[e]]):t[e]=[]}));const o=t.template?t.template:this.createPanelTemplate();o.options=t,o.closetimer=void 0,o.status="initialized",o.currentData={},o.header=o.querySelector(".jsPanel-hdr"),o.headerbar=o.header.querySelector(".jsPanel-headerbar"),o.titlebar=o.header.querySelector(".jsPanel-titlebar"),o.headerlogo=o.headerbar.querySelector(".jsPanel-headerlogo"),o.headertitle=o.headerbar.querySelector(".jsPanel-title"),o.controlbar=o.headerbar.querySelector(".jsPanel-controlbar"),o.headertoolbar=o.header.querySelector(".jsPanel-hdr-toolbar"),o.content=o.querySelector(".jsPanel-content"),o.footer=o.querySelector(".jsPanel-ftr"),o.snappableTo=!1,o.snapped=!1,o.droppableTo=!1,o.progressbar=o.autocloseProgressbar=o.querySelector(".jsPanel-progressbar");const r=new CustomEvent("jspanelloaded",{detail:t.id,cancelable:!0}),s=new CustomEvent("jspanelstatuschange",{detail:t.id,cancelable:!0}),a=new CustomEvent("jspanelbeforenormalize",{detail:t.id,cancelable:!0}),l=new CustomEvent("jspanelnormalized",{detail:t.id,cancelable:!0}),c=new CustomEvent("jspanelbeforemaximize",{detail:t.id,cancelable:!0}),u=new CustomEvent("jspanelmaximized",{detail:t.id,cancelable:!0}),h=new CustomEvent("jspanelbeforeminimize",{detail:t.id,cancelable:!0}),m=new CustomEvent("jspanelminimized",{detail:t.id,cancelable:!0}),p=new CustomEvent("jspanelbeforesmallify",{detail:t.id,cancelable:!0}),d=new CustomEvent("jspanelsmallified",{detail:t.id,cancelable:!0}),f=new CustomEvent("jspanelsmallifiedmax",{detail:t.id,cancelable:!0}),_=new CustomEvent("jspanelbeforeunsmallify",{detail:t.id,cancelable:!0}),y=new CustomEvent("jspanelfronted",{detail:t.id,cancelable:!0}),v=new CustomEvent("jspanelbeforeclose",{detail:t.id,cancelable:!0}),g=new CustomEvent("jspanelclosed",{detail:t.id,cancelable:!0}),b=new CustomEvent("jspanelcloseduser",{detail:t.id,cancelable:!0});[r,s,a,l,c,u,h,m,p,d,f,_,y,v].forEach((t=>{t.panel=o}));const x=o.querySelector(".jsPanel-btn-close"),$=o.querySelector(".jsPanel-btn-maximize"),A=o.querySelector(".jsPanel-btn-normalize"),w=o.querySelector(".jsPanel-btn-smallify"),B=o.querySelector(".jsPanel-btn-minimize");x&&ka.pointerup.forEach((t=>{x.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})),$&&ka.pointerup.forEach((t=>{$.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.maximize()}))})),A&&ka.pointerup.forEach((t=>{A.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.normalize()}))})),w&&ka.pointerup.forEach((t=>{w.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;"normalized"===o.status||"maximized"===o.status?o.smallify():"smallified"!==o.status&&"smallifiedmax"!==o.status||o.unsmallify()}))})),B&&ka.pointerup.forEach((t=>{B.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.minimize()}))}));let C=ka.extensions;for(let S in C)Object.prototype.hasOwnProperty.call(C,S)&&(o[S]=C[S]);if(o.clearTheme=t=>(ka.themes.forEach((t=>{["panel",`jsPanel-theme-${t}`,`panel-${t}`,`${t}-color`].forEach((t=>{o.classList.remove(t)})),o.header.classList.remove(`jsPanel-theme-${t}`)})),o.content.classList.remove("jsPanel-content-filled","jsPanel-content-filledlight"),o.header.classList.remove("jsPanel-hdr-light"),o.header.classList.remove("jsPanel-hdr-dark"),o.style.backgroundColor="",ka.setStyle(o.headertoolbar,{boxShadow:"",width:"",marginLeft:"",borderTopColor:"transparent"}),ka.setStyle(o.content,{background:"",borderTopColor:"transparent"}),o.header.style.background="",Array.prototype.slice.call(o.controlbar.querySelectorAll(".jsPanel-icon")).concat([o.headerlogo,o.headertitle,o.headertoolbar,o.content]).forEach((t=>{t.style.color=""})),t&&t.call(o,o),o),o.getThemeDetails=t=>{const e=t.toLowerCase(),i={color:!1,colors:!1,filling:!1},n=e.split("fill");if(i.color=n[0].trim().replace(/\s*/g,""),2===n.length)if(n[1].startsWith("edlight"))i.filling="filledlight";else if(n[1].startsWith("eddark"))i.filling="filleddark";else if(n[1].startsWith("ed"))i.filling="filled";else if(n[1].startsWith("color")){let t=n[1].split("color"),e=t[t.length-1].trim().replace(/\s*/g,"");ka.colorNames[e]&&(e=ka.colorNames[e]),e.match(/^([0-9a-f]{3}|[0-9a-f]{6})$/gi)&&(e="#"+e),i.filling=e}if(ka.themes.some((t=>t===i.color.split(/\s/i)[0]))){let t=i.color.split(/\s/i)[0],e=document.createElement("button");e.className=t+"-bg",document.body.appendChild(e),i.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(i.color.startsWith("bootstrap-")){let t=i.color.indexOf("-"),e=document.createElement("button");e.className="btn btn"+i.color.slice(t),document.body.appendChild(e),i.color=getComputedStyle(e).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(e),e=void 0}else if(i.color.startsWith("mdb-")){let t,e=i.color.indexOf("-")+1,n=document.createElement("span");t=i.color.endsWith("-dark")?(t=i.color.slice(e)).replace("-dark","-color-dark"):i.color.slice(e)+"-color",n.className=t,document.body.appendChild(n),i.color=getComputedStyle(n).backgroundColor.replace(/\s+/gi,""),document.body.removeChild(n),n=void 0}return i.colors=ka.calcColors(i.color),i},o.applyColorTheme=t=>{if(o.style.backgroundColor=t.colors[0],o.header.style.backgroundColor=t.colors[0],o.header.style.color=t.colors[3],[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((e=>{o.querySelector(e).style.color=t.colors[3]})),o.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((e=>{e.style.color=t.colors[3]})),"string"==typeof o.options.theme&&"filled"===t.filling&&(o.content.style.borderTop="#000000"===t.colors[3]?"1px solid rgba(0,0,0,0.15)":"1px solid rgba(255,255,255,0.15)"),"#000000"===t.colors[3]?o.header.classList.add("jsPanel-hdr-light"):o.header.classList.add("jsPanel-hdr-dark"),t.filling)switch(t.filling){case"filled":ka.setStyle(o.content,{backgroundColor:t.colors[2],color:t.colors[3]});break;case"filledlight":o.content.style.backgroundColor=t.colors[1];break;case"filleddark":ka.setStyle(o.content,{backgroundColor:t.colors[6],color:t.colors[7]});break;default:o.content.style.backgroundColor=t.filling,o.content.style.color=ka.perceivedBrightness(t.filling)<=ka.colorBrightnessThreshold?"#fff":"#000"}return o},o.applyCustomTheme=t=>{let e,i={bgPanel:"#fff",bgContent:"#fff",colorHeader:"#000",colorContent:"#000"},n=(e="object"==typeof t?Object.assign(i,t):i).bgPanel,r=e.bgContent,s=e.colorHeader,a=e.colorContent;if(ka.colorNames[n]?o.style.background="#"+ka.colorNames[n]:o.style.background=n,ka.colorNames[s]&&(s="#"+ka.colorNames[s]),[".jsPanel-headerlogo",".jsPanel-title",".jsPanel-hdr-toolbar"].forEach((t=>{o.querySelector(t).style.color=s})),o.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{t.style.color=s})),ka.colorNames[r]?o.content.style.background="#"+ka.colorNames[r]:o.content.style.background=r,ka.colorNames[a]?o.content.style.color="#"+ka.colorNames[a]:o.content.style.color=a,ka.perceivedBrightness(s)>ka.colorBrightnessThreshold?o.header.classList.add("jsPanel-hdr-dark"):o.header.classList.add("jsPanel-hdr-light"),ka.perceivedBrightness(a)>ka.colorBrightnessThreshold?o.content.style.borderTop="1px solid rgba(255,255,255,0.15)":o.content.style.borderTop="1px solid rgba(0,0,0,0.15)",e.border){let t=e.border,i=t.lastIndexOf(" "),n=t.slice(++i);ka.colorNames[n]&&(t=t.replace(n,"#"+ka.colorNames[n])),o.style.border=t}return o},o.setBorder=t=>{let e=ka.pOborder(t);return e[2].length?ka.colorNames[e[2]]&&(e[2]="#"+ka.colorNames[e[2]]):e[2]=o.style.backgroundColor,e=e.join(" "),o.style.border=e,o.options.border=e,o},o.setBorderRadius=t=>{"number"==typeof t&&(t+="px"),o.style.borderRadius=t;const e=getComputedStyle(o);return o.options.header?(o.header.style.borderTopLeftRadius=e.borderTopLeftRadius,o.header.style.borderTopRightRadius=e.borderTopRightRadius):(o.content.style.borderTopLeftRadius=e.borderTopLeftRadius,o.content.style.borderTopRightRadius=e.borderTopRightRadius),o.options.footerToolbar?(o.footer.style.borderBottomRightRadius=e.borderBottomRightRadius,o.footer.style.borderBottomLeftRadius=e.borderBottomLeftRadius):(o.content.style.borderBottomRightRadius=e.borderBottomRightRadius,o.content.style.borderBottomLeftRadius=e.borderBottomLeftRadius),o},o.setTheme=(e=t.theme,i)=>{let n;if("minimized"===o.status&&(n=!0,o.normalize()),o.clearTheme(),"object"==typeof e)t.border=void 0,o.applyCustomTheme(e);else{"none"===e&&(e="white");let t=o.getThemeDetails(e);o.applyColorTheme(t)}return n&&o.minimize(),i&&i.call(o,o),o},o.remove=(t,e,i)=>{o.parentElement.removeChild(o),document.getElementById(t)?i&&i.call(o,t,o):(o.removeMinimizedReplacement(),o.status="closed",e&&document.dispatchEvent(b),document.dispatchEvent(g),o.options.onclosed&&ka.processCallbacks(o,o.options.onclosed,"every",e),ka.autopositionRemaining(o),i&&i.call(t,t)),window.removeEventListener("resize",o.windowResizeHandler),document.removeEventListener("jspanelresize",o.parentResizeHandler)},o.close=(t,e)=>{if(o.closetimer&&window.clearInterval(o.closetimer),document.dispatchEvent(v),o.statusBefore=o.status,o.options.onbeforeclose&&o.options.onbeforeclose.length>0&&!ka.processCallbacks(o,o.options.onbeforeclose,"some",o.status,e))return o;o.options.animateOut?(o.options.animateIn&&ka.remClass(o,o.options.animateIn),ka.setClass(o,o.options.animateOut),o.addEventListener("animationend",(i=>{i.stopPropagation(),o.remove(o.id,e,t)}))):o.remove(o.id,e,t)},o.maximize=(e,i)=>{if(o.statusBefore=o.status,t.onbeforemaximize&&t.onbeforemaximize.length>0&&!ka.processCallbacks(o,t.onbeforemaximize,"some",o.statusBefore))return o;document.dispatchEvent(c);const n=o.parentElement,r=ka.pOcontainment(t.maximizedMargin);return n===document.body?(o.style.width=document.documentElement.clientWidth-r[1]-r[3]+"px",o.style.height=document.documentElement.clientHeight-r[0]-r[2]+"px",o.style.left=r[3]+"px",o.style.top=r[0]+"px"):(o.style.width=n.clientWidth-r[1]-r[3]+"px",o.style.height=n.clientHeight-r[0]-r[2]+"px",o.style.left=r[3]+"px",o.style.top=r[0]+"px"),w.style.transform="unset",o.removeMinimizedReplacement(),o.status="maximized",o.setControls([".jsPanel-btn-maximize"]),i||o.front(),document.dispatchEvent(u),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every",o.statusBefore),e&&e.call(o,o,o.statusBefore),t.onmaximized&&ka.processCallbacks(o,t.onmaximized,"every",o.statusBefore),o},o.minimize=e=>{if("minimized"===o.status)return o;if(o.statusBefore=o.status,t.onbeforeminimize&&t.onbeforeminimize.length>0&&!ka.processCallbacks(o,t.onbeforeminimize,"some",o.statusBefore))return o;if(document.dispatchEvent(h),!document.getElementById("jsPanel-replacement-container")){const t=document.createElement("div");t.id="jsPanel-replacement-container",document.body.append(t)}if(o.style.left="-9999px",o.status="minimized",document.dispatchEvent(m),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every",o.statusBefore),t.minimizeTo){let e,i,n,r=o.createMinimizedReplacement();switch(t.minimizeTo){case"default":document.getElementById("jsPanel-replacement-container").append(r);break;case"parentpanel":(e=(n=(i=o.closest(".jsPanel-content").parentElement).querySelectorAll(".jsPanel-minimized-box"))[n.length-1]).append(r);break;case"parent":(e=(i=o.parentElement).querySelector(".jsPanel-minimized-container"))||((e=document.createElement("div")).className="jsPanel-minimized-container",i.append(e)),e.append(r);break;default:document.querySelector(t.minimizeTo).append(r)}}return e&&e.call(o,o,o.statusBefore),t.onminimized&&ka.processCallbacks(o,t.onminimized,"every",o.statusBefore),o},o.normalize=e=>("normalized"===o.status||(o.statusBefore=o.status,t.onbeforenormalize&&t.onbeforenormalize.length>0&&!ka.processCallbacks(o,t.onbeforenormalize,"some",o.statusBefore)||(document.dispatchEvent(a),o.style.width=o.currentData.width,o.style.height=o.currentData.height,o.snapped?o.snap(o.snapped,!0):(o.style.left=o.currentData.left,o.style.top=o.currentData.top),w.style.transform="unset",o.removeMinimizedReplacement(),o.status="normalized",o.setControls([".jsPanel-btn-normalize"]),o.front(),document.dispatchEvent(l),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every",o.statusBefore),e&&e.call(o,o,o.statusBefore),t.onnormalized&&ka.processCallbacks(o,t.onnormalized,"every",o.statusBefore))),o),o.smallify=e=>{if("smallified"===o.status||"smallifiedmax"===o.status)return o;if(o.statusBefore=o.status,t.onbeforesmallify&&t.onbeforesmallify.length>0&&!ka.processCallbacks(o,t.onbeforesmallify,"some",o.statusBefore))return o;document.dispatchEvent(p),o.style.overflow="hidden";const i=window.getComputedStyle(o),n=parseFloat(window.getComputedStyle(o.headerbar).height);o.style.height=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+n+"px",w.style.transform="rotate(180deg)","normalized"===o.status?(o.setControls([".jsPanel-btn-normalize"]),o.status="smallified",document.dispatchEvent(d),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every",o.statusBefore)):"maximized"===o.status&&(o.setControls([".jsPanel-btn-maximize"]),o.status="smallifiedmax",document.dispatchEvent(f),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every",o.statusBefore));const r=o.querySelectorAll(".jsPanel-minimized-box");return r[r.length-1].style.display="none",e&&e.call(o,o,o.statusBefore),t.onsmallified&&ka.processCallbacks(o,t.onsmallified,"every",o.statusBefore),o},o.unsmallify=e=>{if(o.statusBefore=o.status,"smallified"===o.status||"smallifiedmax"===o.status){if(t.onbeforeunsmallify&&t.onbeforeunsmallify.length>0&&!ka.processCallbacks(o,t.onbeforeunsmallify,"some",o.statusBefore))return o;document.dispatchEvent(_),o.style.overflow="visible",o.front(),"smallified"===o.status?(o.style.height=o.currentData.height,o.setControls([".jsPanel-btn-normalize"]),o.status="normalized",document.dispatchEvent(l),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every",o.statusBefore)):"smallifiedmax"===o.status?o.maximize():"minimized"===o.status&&o.normalize(),w.style.transform="rotate(0deg)";const i=o.querySelectorAll(".jsPanel-minimized-box");i[i.length-1].style.display="flex",e&&e.call(o,o,o.statusBefore),t.onunsmallified&&ka.processCallbacks(o,t.onunsmallified,"every",o.statusBefore)}return o},o.front=(e,i=!0)=>{if("minimized"===o.status)"maximized"===o.statusBefore?o.maximize():o.normalize();else{const t=Array.prototype.slice.call(document.querySelectorAll(".jsPanel-standard")).map((t=>t.style.zIndex));Math.max(...t)>o.style.zIndex&&(o.style.zIndex=ka.zi.next()),ka.resetZi()}return document.dispatchEvent(y),e&&e.call(o,o),t.onfronted&&i&&ka.processCallbacks(o,t.onfronted,"every",o.status),o},o.snap=(t,e=!1)=>{if(e||(o.currentData.beforeSnap={width:o.currentData.width,height:o.currentData.height}),t&&"function"==typeof t&&!e)t.call(o,o,o.snappableTo);else if(!1!==t){let t=[0,0];if(o.options.dragit.snap.containment&&o.options.dragit.containment){const e=ka.pOcontainment(o.options.dragit.containment),i=o.snappableTo;i.startsWith("left")?t[0]=e[3]:i.startsWith("right")&&(t[0]=-e[1]),i.endsWith("top")?t[1]=e[0]:i.endsWith("bottom")&&(t[1]=-e[2])}o.reposition(`${o.snappableTo} ${t[0]} ${t[1]}`)}e||(o.snapped=o.snappableTo)},o.move=(t,e)=>{let i=o.overlaps(t,"paddingbox"),n=o.parentElement;return t.appendChild(o),o.options.container=t,o.style.left=i.left+"px",o.style.top=i.top+"px",o.saveCurrentDimensions(),o.saveCurrentPosition(),o.calcSizeFactors(),e&&e.call(o,o,t,n),o},o.closeChildpanels=t=>(o.getChildpanels().forEach((t=>t.close())),t&&t.call(o,o),o),o.getChildpanels=t=>{const e=o.content.querySelectorAll(".jsPanel");return t&&e.forEach(((e,i,n)=>{t.call(e,e,i,n)})),e},o.isChildpanel=t=>{const e=o.closest(".jsPanel-content"),i=e?e.parentElement:null;return t&&t.call(o,o,i),!!e&&i},o.contentRemove=t=>(ka.emptyNode(o.content),t&&t.call(o,o),o),o.createMinimizedReplacement=()=>{const e=ka.createMinimizedTemplate(),i=window.getComputedStyle(o.headertitle).color,n=window.getComputedStyle(o),r=t.iconfont,s=e.querySelector(".jsPanel-controlbar");return"auto-show-hide"!==o.options.header?ka.setStyle(e,{backgroundColor:n.backgroundColor,backgroundPositionX:n.backgroundPositionX,backgroundPositionY:n.backgroundPositionY,backgroundRepeat:n.backgroundRepeat,backgroundAttachment:n.backgroundAttachment,backgroundImage:n.backgroundImage,backgroundSize:n.backgroundSize,backgroundOrigin:n.backgroundOrigin,backgroundClip:n.backgroundClip}):e.style.backgroundColor=window.getComputedStyle(o.header).backgroundColor,e.id=o.id+"-min",e.querySelector(".jsPanel-headerbar").replaceChild(o.headerlogo.cloneNode(!0),e.querySelector(".jsPanel-headerlogo")),e.querySelector(".jsPanel-titlebar").replaceChild(o.headertitle.cloneNode(!0),e.querySelector(".jsPanel-title")),e.querySelector(".jsPanel-titlebar").setAttribute("title",o.headertitle.textContent),e.querySelector(".jsPanel-title").style.color=i,s.style.color=i,s.querySelectorAll("button").forEach((t=>{t.style.color=i})),["jsPanel-hdr-dark","jsPanel-hdr-light"].forEach((t=>{o.header.classList.contains(t)&&e.querySelector(".jsPanel-hdr").classList.add(t)})),o.setIconfont(r,e),"enabled"===o.dataset.btnnormalize?ka.pointerup.forEach((t=>{e.querySelector(".jsPanel-btn-normalize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.normalize()}))})):s.querySelector(".jsPanel-btn-normalize").style.display="none","enabled"===o.dataset.btnmaximize?ka.pointerup.forEach((t=>{e.querySelector(".jsPanel-btn-maximize").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.maximize()}))})):s.querySelector(".jsPanel-btn-maximize").style.display="none","enabled"===o.dataset.btnclose?ka.pointerup.forEach((t=>{e.querySelector(".jsPanel-btn-close").addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})):s.querySelector(".jsPanel-btn-close").style.display="none",e},o.removeMinimizedReplacement=()=>{const t=document.getElementById(`${o.id}-min`);t&&t.parentElement.removeChild(t)},o.drag=(t={})=>{let e,i,n;const r=new CustomEvent("jspaneldragstart",{detail:o.id}),s=new CustomEvent("jspaneldrag",{detail:o.id}),a=new CustomEvent("jspaneldragstop",{detail:o.id});[r,s,a].forEach((t=>{t.panel=o}));const l=t=>{let e=t.split("-");return e.forEach(((t,i)=>{e[i]=t.charAt(0).toUpperCase()+t.slice(1)})),"snap"+e.join("")};function c(t){null===t.relatedTarget&&ka.pointermove.forEach((t=>{document.removeEventListener(t,i,!1),o.style.opacity=1}))}let u=t.handles||ka.defaults.dragit.handles,h=t.cursor||ka.defaults.dragit.cursor;function m(t){if(ka.pointermove.forEach((t=>{document.removeEventListener(t,i)})),ka.removeSnapAreas(),e){if(o.style.opacity=1,e=void 0,n.snap){switch(o.snappableTo){case"left-top":o.snap(n.snap.snapLeftTop);break;case"center-top":o.snap(n.snap.snapCenterTop);break;case"right-top":o.snap(n.snap.snapRightTop);break;case"right-center":o.snap(n.snap.snapRightCenter);break;case"right-bottom":o.snap(n.snap.snapRightBottom);break;case"center-bottom":o.snap(n.snap.snapCenterBottom);break;case"left-bottom":o.snap(n.snap.snapLeftBottom);break;case"left-center":o.snap(n.snap.snapLeftCenter)}n.snap.callback&&o.snappableTo&&"function"==typeof n.snap.callback&&(n.snap.callback.call(o,o),n.snap.repositionOnSnap&&!1!==n.snap[l(o.snappableTo)]&&o.repositionOnSnap(o.snappableTo)),o.snappableTo&&n.snap.repositionOnSnap&&n.snap[l(o.snappableTo)]&&o.repositionOnSnap(o.snappableTo)}if(o.droppableTo&&o.droppableTo){let t=o.parentElement;o.move(o.droppableTo),n.drop.callback&&n.drop.callback.call(o,o,o.droppableTo,t)}if(document.dispatchEvent(a),n.stop.length){let e=window.getComputedStyle(o),i={left:parseFloat(e.left),top:parseFloat(e.top),width:parseFloat(e.width),height:parseFloat(e.height)};ka.processCallbacks(o,n.stop,!1,i,t)}o.saveCurrentPosition(),o.calcSizeFactors()}o.controlbar.style.pointerEvents="inherit",o.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),document.removeEventListener(t,m)}return o.querySelectorAll(u).forEach((a=>{a.style.touchAction="none",a.style.cursor=h,ka.pointerdown.forEach((l=>{a.addEventListener(l,(a=>{if(a.button&&a.button>0)return!1;if((n=Object.assign({},ka.defaults.dragit,t)).disableOnMaximized&&"maximized"===o.status)return!1;if((n.containment||0===n.containment)&&(n.containment=ka.pOcontainment(n.containment)),n.grid&&Array.isArray(n.grid)&&1===n.grid.length&&(n.grid[1]=n.grid[0]),n.snap&&("object"==typeof n.snap?n.snap=Object.assign({},ka.defaultSnapConfig,n.snap):n.snap=ka.defaultSnapConfig),a.target.closest(".jsPanel-ftr-btn"))return;o.controlbar.style.pointerEvents="none",o.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));let l=window.getComputedStyle(o),u=parseFloat(l.left),h=parseFloat(l.top),m=parseFloat(l.width),p=parseFloat(l.height),d=a.touches?a.touches[0].clientX:a.clientX,f=a.touches?a.touches[0].clientY:a.clientY,_=o.parentElement,y=_.getBoundingClientRect(),v=window.getComputedStyle(_),g=o.getScaleFactor(),b=0,x=ka.getScrollbarWidth(_);i=t=>{if(t.preventDefault(),!e){if(document.dispatchEvent(r),o.style.opacity=n.opacity,o.snapped&&n.snap.resizeToPreSnap&&o.currentData.beforeSnap){o.resize(o.currentData.beforeSnap.width+" "+o.currentData.beforeSnap.height),o.setControls([".jsPanel-btn-normalize"]);let t=o.getBoundingClientRect(),e=d-(t.left+t.width),i=t.width/2;e>-i&&(b=e+i)}if(o.front(),o.snapped=!1,"maximized"===o.status&&(o.setControls([".jsPanel-btn-normalize"]),o.status="normalized"),n.drop&&n.drop.dropZones){let t=n.drop.dropZones.map((t=>ka.pOcontainer(t))),e=[];t.forEach((function(t){t.length?t.forEach((function(t){e.push(t)})):e.push(t)})),e=e.filter((function(t,e,i){return i.indexOf(t)===e})),n.drop.dropZones=e}n.start.length&&ka.processCallbacks(o,n.start,!1,{left:u,top:h,width:m,height:p},t)}let i,a,l,c,$,A,w,B,C,S;e=1;let E,M=t.touches?t.touches[0].clientX:t.clientX,T=t.touches?t.touches[0].clientY:t.clientY,P=window.getComputedStyle(o);if(_===document.body){let t=o.getBoundingClientRect();C=window.innerWidth-parseInt(v.borderLeftWidth,10)-parseInt(v.borderRightWidth,10)-(t.left+t.width),S=window.innerHeight-parseInt(v.borderTopWidth,10)-parseInt(v.borderBottomWidth,10)-(t.top+t.height)}else C=parseInt(v.width,10)-parseInt(v.borderLeftWidth,10)-parseInt(v.borderRightWidth,10)-(parseInt(P.left,10)+parseInt(P.width,10)),S=parseInt(v.height,10)-parseInt(v.borderTopWidth,10)-parseInt(v.borderBottomWidth,10)-(parseInt(P.top,10)+parseInt(P.height,10));i=parseFloat(P.left),l=parseFloat(P.top),$=C,w=S,n.snap&&("panel"===n.snap.trigger?(a=i**2,c=l**2,A=$**2,B=w**2):"pointer"===n.snap.trigger&&("window"===o.options.container?(i=M,a=M**2,c=(l=T)**2,A=($=window.innerWidth-M)**2,B=(w=window.innerHeight-T)**2):(i=(E=o.overlaps(_,"paddingbox",t)).pointer.left,l=E.pointer.top,$=E.pointer.right,w=E.pointer.bottom,a=E.pointer.left**2,c=E.pointer.top**2,A=E.pointer.right**2,B=E.pointer.bottom**2)));let z=Math.sqrt(a+c),F=Math.sqrt(a+B),I=Math.sqrt(A+c),k=Math.sqrt(A+B),V=Math.abs(i-$)/2,L=Math.abs(l-w)/2,j=Math.sqrt(a+L**2),R=Math.sqrt(c+V**2),D=Math.sqrt(A+L**2),O=Math.sqrt(B+V**2);if(window.getSelection().removeAllRanges(),document.dispatchEvent(s),n.axis&&"x"!==n.axis||(o.style.left=u+(M-d)/g.x+b+"px"),n.axis&&"y"!==n.axis||(o.style.top=h+(T-f)/g.y+"px"),n.grid){let t=n.grid,e=n.axis,i=t[0]*Math.round((u+(M-d))/t[0]),r=t[1]*Math.round((h+(T-f))/t[1]);e&&"x"!==e||(o.style.left=`${i}px`),e&&"y"!==e||(o.style.top=`${r}px`)}if(n.containment||0===n.containment){let t,e,i=n.containment;if("window"===o.options.container)t=window.innerWidth-parseFloat(P.width)-i[1]-x.y,e=window.innerHeight-parseFloat(P.height)-i[2]-x.x;else{let n=parseFloat(v.borderLeftWidth)+parseFloat(v.borderRightWidth),o=parseFloat(v.borderTopWidth)+parseFloat(v.borderBottomWidth);t=y.width/g.x-parseFloat(P.width)-i[1]-n-x.y,e=y.height/g.y-parseFloat(P.height)-i[2]-o-x.x}parseFloat(o.style.left)<=i[3]&&(o.style.left=i[3]+"px"),parseFloat(o.style.top)<=i[0]&&(o.style.top=i[0]+"px"),parseFloat(o.style.left)>=t&&(o.style.left=t+"px"),parseFloat(o.style.top)>=e&&(o.style.top=e+"px")}if(n.drag.length){let e={left:i,top:l,right:$,bottom:w,width:parseFloat(P.width),height:parseFloat(P.height)};ka.processCallbacks(o,n.drag,!1,e,t)}if(n.snap){let t=n.snap.sensitivity,e=_===document.body?window.innerWidth/8:y.width/8,r=_===document.body?window.innerHeight/8:y.height/8;o.snappableTo=!1,ka.removeSnapAreas(),z<t?!1!==n.snap.snapLeftTop&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.left>0&&E.pointer.top>0?(o.snappableTo="left-top",ka.createSnapArea(o,"lt",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="left-top",ka.createSnapArea(o,"lt",t))):F<t?!1!==n.snap.snapLeftBottom&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.left>0&&E.pointer.bottom>0?(o.snappableTo="left-bottom",ka.createSnapArea(o,"lb",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="left-bottom",ka.createSnapArea(o,"lb",t))):I<t?!1!==n.snap.snapRightTop&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.right>0&&E.pointer.top>0?(o.snappableTo="right-top",ka.createSnapArea(o,"rt",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="right-top",ka.createSnapArea(o,"rt",t))):k<t?!1!==n.snap.snapRightBottom&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.right>0&&E.pointer.bottom>0?(o.snappableTo="right-bottom",ka.createSnapArea(o,"rb",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="right-bottom",ka.createSnapArea(o,"rb",t))):l<t&&R<e?!1!==n.snap.snapCenterTop&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.top>0?(o.snappableTo="center-top",ka.createSnapArea(o,"ct",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="center-top",ka.createSnapArea(o,"ct",t))):i<t&&j<r?!1!==n.snap.snapLeftCenter&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.left>0?(o.snappableTo="left-center",ka.createSnapArea(o,"lc",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="left-center",ka.createSnapArea(o,"lc",t))):$<t&&D<r?!1!==n.snap.snapRightCenter&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.right>0?(o.snappableTo="right-center",ka.createSnapArea(o,"rc",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="right-center",ka.createSnapArea(o,"rc",t))):w<t&&O<e&&!1!==n.snap.snapCenterBottom&&(n.snap.active&&"both"!==n.snap.active?"pointer"===n.snap.trigger&&n.snap.active&&"inside"===n.snap.active&&(E.pointer.bottom>0?(o.snappableTo="center-bottom",ka.createSnapArea(o,"cb",t)):(o.snappableTo=!1,ka.removeSnapAreas())):(o.snappableTo="center-bottom",ka.createSnapArea(o,"cb",t)))}if(n.drop&&n.drop.dropZones){let e=ka.isIE?"msElementsFromPoint":"elementsFromPoint",i=document[e](t.clientX,t.clientY);Array.isArray(i)||(i=Array.prototype.slice.call(i)),n.drop.dropZones.forEach((t=>{i.includes(t)&&(o.droppableTo=t)})),i.includes(o.droppableTo)||(o.droppableTo=!1)}},ka.pointermove.forEach((t=>{document.addEventListener(t,i)})),window.addEventListener("mouseout",c,!1)}))})),ka.pointerup.forEach((t=>{document.addEventListener(t,m),window.removeEventListener("mouseout",c)})),t.disable&&(a.style.pointerEvents="none")})),o},o.dragit=e=>{const i=Object.assign({},ka.defaults.dragit,t.dragit),n=o.querySelectorAll(i.handles);return"disable"===e?n.forEach((t=>{t.style.pointerEvents="none"})):n.forEach((t=>{t.style.pointerEvents="auto"})),o},o.sizeit=(t={})=>{const e=new CustomEvent("jspanelresizestart",{detail:o.id}),i=new CustomEvent("jspanelresize",{detail:o.id}),n=new CustomEvent("jspanelresizestop",{detail:o.id});[e,i,n].forEach((t=>{t.panel=o}));let r,s,a,l,c,u,h={};h.handles=t.handles||ka.defaults.resizeit.handles,h.handles.split(",").forEach((t=>{const e=document.createElement("DIV");e.className=`jsPanel-resizeit-handle jsPanel-resizeit-${t.trim()}`,o.append(e)}));let m=!!t.aspectRatio&&t.aspectRatio;function p(t){null===t.relatedTarget&&ka.pointermove.forEach((t=>{document.removeEventListener(t,r,!1)}))}function d(t){if(ka.pointermove.forEach((t=>{document.removeEventListener(t,r,!1)})),t.target.classList&&t.target.classList.contains("jsPanel-resizeit-handle")){let e,i,n=t.target.className;if(n.match(/jsPanel-resizeit-nw|jsPanel-resizeit-w|jsPanel-resizeit-sw/i)&&(e=!0),n.match(/jsPanel-resizeit-nw|jsPanel-resizeit-n|jsPanel-resizeit-ne/i)&&(i=!0),h.grid&&Array.isArray(h.grid)){1===h.grid.length&&(h.grid[1]=h.grid[0]);const t=parseFloat(o.style.width),n=parseFloat(o.style.height),r=t%h.grid[0],s=n%h.grid[1],a=parseFloat(o.style.left),l=parseFloat(o.style.top),c=a%h.grid[0],u=l%h.grid[1];r<h.grid[0]/2?o.style.width=t-r+"px":o.style.width=t+(h.grid[0]-r)+"px",s<h.grid[1]/2?o.style.height=n-s+"px":o.style.height=n+(h.grid[1]-s)+"px",e&&(c<h.grid[0]/2?o.style.left=a-c+"px":o.style.left=a+(h.grid[0]-c)+"px"),i&&(u<h.grid[1]/2?o.style.top=l-u+"px":o.style.top=l+(h.grid[1]-u)+"px")}}if(s){o.content.style.pointerEvents="inherit",s=void 0,o.saveCurrentDimensions(),o.saveCurrentPosition(),o.calcSizeFactors();let e=o.controlbar.querySelector(".jsPanel-btn-smallify"),i=o.getBoundingClientRect();if(e&&i.height>u+5&&(e.style.transform="rotate(0deg)"),document.dispatchEvent(n),h.stop.length){let e=window.getComputedStyle(o),i={left:parseFloat(e.left),top:parseFloat(e.top),width:parseFloat(e.width),height:parseFloat(e.height)};ka.processCallbacks(o,h.stop,!1,i,t)}}o.content.style.pointerEvents="inherit",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="auto"})),h.aspectRatio=m,document.removeEventListener(t,d)}return o.querySelectorAll(".jsPanel-resizeit-handle").forEach((n=>{n.style.touchAction="none",ka.pointerdown.forEach((m=>{n.addEventListener(m,(n=>{if(n.preventDefault(),n.stopPropagation(),n.button&&n.button>0)return!1;let m=1;if(((h=Object.assign({},ka.defaults.resizeit,t)).containment||0===h.containment)&&(h.containment=ka.pOcontainment(h.containment)),h.aspectRatio&&!0===h.aspectRatio&&(h.aspectRatio="panel"),ka.modifier){let t=ka.modifier;t.altKey?h.aspectRatio="content":t.ctrlKey?h.aspectRatio="panel":t.shiftKey&&(h.aspectRatio=!1,m=2)}let d="function"==typeof h.maxWidth?h.maxWidth():h.maxWidth||1e4,f="function"==typeof h.maxHeight?h.maxHeight():h.maxHeight||1e4,_="function"==typeof h.minWidth?h.minWidth():h.minWidth,y="function"==typeof h.minHeight?h.minHeight():h.minHeight;o.content.style.pointerEvents="none",document.querySelectorAll("iframe").forEach((t=>{t.style.pointerEvents="none"}));const v=o.parentElement,g=v.tagName.toLowerCase(),b=o.getBoundingClientRect(),x=v.getBoundingClientRect(),$=window.getComputedStyle(v,null),A=parseInt($.borderLeftWidth,10),w=parseInt($.borderTopWidth,10),B=$.getPropertyValue("position"),C=n.clientX||0===n.clientX||n.touches[0].clientX,S=n.clientY||0===n.clientY||n.touches[0].clientY,E=C/S,M=n.target.classList,T=o.getScaleFactor(),P=b.width/b.height,z=o.content.getBoundingClientRect(),F=z.width/z.height,I=o.header.getBoundingClientRect().height,k=o.footer.getBoundingClientRect().height||0;let V=b.left,L=b.top,j=1e4,R=1e4,D=1e4,O=1e4;c=b.width,u=b.height,"body"!==g&&(V=b.left-x.left+v.scrollLeft,L=b.top-x.top+v.scrollTop),"body"===g&&h.containment?(j=document.documentElement.clientWidth-b.left,D=document.documentElement.clientHeight-b.top,R=b.width+b.left,O=b.height+b.top):h.containment&&("static"===B?(j=x.width-b.left+A,D=x.height+x.top-b.top+w,R=b.width+(b.left-x.left)-A,O=b.height+(b.top-x.top)-w):(j=v.clientWidth-(b.left-x.left)/T.x+A,D=v.clientHeight-(b.top-x.top)/T.y+w,R=(b.width+b.left-x.left)/T.x-A,O=o.clientHeight+(b.top-x.top)/T.y-w)),h.containment&&(R-=h.containment[3],O-=h.containment[0],j-=h.containment[1],D-=h.containment[2]);const q=window.getComputedStyle(o),N=parseFloat(q.width)-b.width,U=parseFloat(q.height)-b.height;let W=parseFloat(q.left)-b.left,H=parseFloat(q.top)-b.top;v!==document.body&&(W+=x.left,H+=x.top);let G=parseInt(q.borderTopWidth,10),Y=parseInt(q.borderRightWidth,10),J=parseInt(q.borderBottomWidth,10),Z=parseInt(q.borderLeftWidth,10);r=t=>{t.preventDefault(),s||(document.dispatchEvent(e),h.start.length&&ka.processCallbacks(o,h.start,!1,{width:c,height:u,left:V,top:L},t),o.front(),b.height>u+5&&(o.status="normalized",o.setControls([".jsPanel-btn-normalize"]))),s=1,document.dispatchEvent(i);let n=t.touches?t.touches[0].clientX:t.clientX,r=t.touches?t.touches[0].clientY:t.clientY;M.contains("jsPanel-resizeit-e")?((a=c+(n-C)*m/T.x+N)>=j&&(a=j),a>=d&&(a=d),a<=_&&(a=_),o.style.width=a+"px",2===m&&(o.style.left=V-(n-C)+"px"),"content"===h.aspectRatio?(o.style.height=(a-Y-Z)/F+I+k+G+J+"px",h.containment&&o.overlaps(v).bottom<=h.containment[2]&&(o.style.height=D+"px",o.style.width=D*F+"px")):"panel"===h.aspectRatio&&(o.style.height=a/P+"px",h.containment&&o.overlaps(v).bottom<=h.containment[2]&&(o.style.height=D+"px",o.style.width=D*P+"px"))):M.contains("jsPanel-resizeit-s")?((l=u+(r-S)*m/T.y+U)>=D&&(l=D),l>=f&&(l=f),l<=y&&(l=y),o.style.height=l+"px",2===m&&(o.style.top=L-(r-S)+"px"),"content"===h.aspectRatio?(o.style.width=(l-I-k-G-J)*F+G+J+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/F+"px")):"panel"===h.aspectRatio&&(o.style.width=l*P+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/P+"px"))):M.contains("jsPanel-resizeit-w")?((a=c+(C-n)*m/T.x+N)<=d&&a>=_&&a<=R&&(o.style.left=V+(n-C)/T.x+W+"px"),a>=R&&(a=R),a>=d&&(a=d),a<=_&&(a=_),o.style.width=a+"px","content"===h.aspectRatio?(o.style.height=(a-Y-Z)/F+I+k+G+J+"px",h.containment&&o.overlaps(v).bottom<=h.containment[2]&&(o.style.height=D+"px",o.style.width=D*F+"px")):"panel"===h.aspectRatio&&(o.style.height=a/P+"px",h.containment&&o.overlaps(v).bottom<=h.containment[2]&&(o.style.height=D+"px",o.style.width=D*P+"px"))):M.contains("jsPanel-resizeit-n")?((l=u+(S-r)*m/T.y+U)<=f&&l>=y&&l<=O&&(o.style.top=L+(r-S)/T.y+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=y&&(l=y),o.style.height=l+"px","content"===h.aspectRatio?(o.style.width=(l-I-k-G-J)*F+G+J+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/F+"px")):"panel"===h.aspectRatio&&(o.style.width=l*P+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/P+"px"))):M.contains("jsPanel-resizeit-se")?((a=c+(n-C)*m/T.x+N)>=j&&(a=j),a>=d&&(a=d),a<=_&&(a=_),o.style.width=a+"px",2===m&&(o.style.left=V-(n-C)+"px"),h.aspectRatio&&(o.style.height=a/P+"px"),(l=u+(r-S)*m/T.y+U)>=D&&(l=D),l>=f&&(l=f),l<=y&&(l=y),o.style.height=l+"px",2===m&&(o.style.top=L-(r-S)+"px"),"content"===h.aspectRatio?(o.style.width=(l-I-k-G-J)*F+G+J+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/F+"px")):"panel"===h.aspectRatio&&(o.style.width=l*P+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/P+"px"))):M.contains("jsPanel-resizeit-sw")?((l=u+(r-S)*m/T.y+U)>=D&&(l=D),l>=f&&(l=f),l<=y&&(l=y),o.style.height=l+"px",2===m&&(o.style.top=L-(r-S)+"px"),h.aspectRatio&&(o.style.width=l*P+"px"),(a=c+(C-n)*m/T.x+N)<=d&&a>=_&&a<=R&&(o.style.left=V+(n-C)/T.x+W+"px"),a>=R&&(a=R),a>=d&&(a=d),a<=_&&(a=_),o.style.width=a+"px","content"===h.aspectRatio?(o.style.height=(a-Y-Z)/F+I+k+G+J+"px",h.containment&&o.overlaps(v).bottom<=h.containment[2]&&(o.style.height=D+"px",o.style.width=D*F+"px")):"panel"===h.aspectRatio&&(o.style.height=a/P+"px",h.containment&&o.overlaps(v).bottom<=h.containment[2]&&(o.style.height=D+"px",o.style.width=D*P+"px"))):M.contains("jsPanel-resizeit-ne")?((a=c+(n-C)*m/T.x+N)>=j&&(a=j),a>=d&&(a=d),a<=_&&(a=_),o.style.width=a+"px",2===m&&(o.style.left=V-(n-C)+"px"),h.aspectRatio&&(o.style.height=a/P+"px"),(l=u+(S-r)*m/T.y+U)<=f&&l>=y&&l<=O&&(o.style.top=L+(r-S)/T.y+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=y&&(l=y),o.style.height=l+"px","content"===h.aspectRatio?(o.style.width=(l-I-k-G-J)*F+G+J+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/F+"px")):"panel"===h.aspectRatio&&(o.style.width=l*P+"px",h.containment&&o.overlaps(v).right<=h.containment[1]&&(o.style.width=j+"px",o.style.height=j/P+"px"))):M.contains("jsPanel-resizeit-nw")&&(h.aspectRatio&&M.contains("jsPanel-resizeit-nw")&&(r=(n=r*E)/E),(a=c+(C-n)*m/T.x+N)<=d&&a>=_&&a<=R&&(o.style.left=V+(n-C)/T.x+W+"px"),a>=R&&(a=R),a>=d&&(a=d),a<=_&&(a=_),o.style.width=a+"px",h.aspectRatio&&(o.style.height=a/P+"px"),(l=u+(S-r)*m/T.y+U)<=f&&l>=y&&l<=O&&(o.style.top=L+(r-S)/T.y+H+"px"),l>=O&&(l=O),l>=f&&(l=f),l<=y&&(l=y),o.style.height=l+"px","content"===h.aspectRatio?o.style.width=(l-I-k-G-J)*F+G+J+"px":"panel"===h.aspectRatio&&(o.style.width=l*P+"px")),window.getSelection().removeAllRanges();const p=window.getComputedStyle(o),g={left:parseFloat(p.left),top:parseFloat(p.top),right:parseFloat(p.right),bottom:parseFloat(p.bottom),width:parseFloat(p.width),height:parseFloat(p.height)};h.resize.length&&ka.processCallbacks(o,h.resize,!1,g,t)},ka.pointermove.forEach((t=>{document.addEventListener(t,r,!1)})),window.addEventListener("mouseout",p,!1)}))})),ka.pointerup.forEach((function(t){document.addEventListener(t,d),window.removeEventListener("mouseout",p)})),t.disable&&(n.style.pointerEvents="none")})),o},o.resizeit=t=>{const e=o.querySelectorAll(".jsPanel-resizeit-handle");return"disable"===t?e.forEach((t=>{t.style.pointerEvents="none"})):e.forEach((t=>{t.style.pointerEvents="auto"})),o},o.getScaleFactor=()=>{const t=o.getBoundingClientRect();return{x:t.width/o.offsetWidth,y:t.height/o.offsetHeight}},o.calcSizeFactors=()=>{const e=window.getComputedStyle(o);if("window"===t.container)o.hf=parseFloat(e.left)/(window.innerWidth-parseFloat(e.width)),o.vf=parseFloat(e.top)/(window.innerHeight-parseFloat(e.height));else if(o.parentElement){let t=o.parentElement.getBoundingClientRect();o.hf=parseFloat(e.left)/(t.width-parseFloat(e.width)),o.vf=parseFloat(e.top)/(t.height-parseFloat(e.height))}},o.saveCurrentDimensions=(t=!1)=>{const e=window.getComputedStyle(o);o.currentData.width=e.width,"normalized"===o.status&&(o.currentData.height=e.height),t&&(o.style.height=e.height)},o.saveCurrentPosition=()=>{const t=window.getComputedStyle(o);o.currentData.left=t.left,o.currentData.top=t.top},o.reposition=(...e)=>{let i,n=t.position,r=!0;return e.forEach((t=>{"string"==typeof t||"object"==typeof t?n=t:"boolean"==typeof t?r=t:"function"==typeof t&&(i=t)})),ka.position(o,n),o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()})),r&&o.saveCurrentPosition(),i&&i.call(o,o),o},o.repositionOnSnap=e=>{let i="0",n="0",r=ka.pOcontainment(t.dragit.containment);if(t.dragit.snap.containment)switch(e){case"left-top":i=r[3],n=r[0];break;case"right-top":i=-r[1],n=r[0];break;case"right-bottom":i=-r[1],n=-r[2];break;case"left-bottom":i=r[3],n=-r[2];break;case"center-top":i=r[3]/2-r[1]/2,n=r[0];break;case"center-bottom":i=r[3]/2-r[1]/2,n=-r[2];break;case"left-center":i=r[3],n=r[0]/2-r[2]/2;break;case"right-center":i=-r[1],n=r[0]/2-r[2]/2}ka.position(o,e),ka.setStyle(o,{left:`calc(${o.style.left} + ${i}px)`,top:`calc(${o.style.top} + ${n}px)`})},o.overlaps=(t,e,i)=>{let n,r=o.getBoundingClientRect(),s=getComputedStyle(o.parentElement),a=o.getScaleFactor(),l={top:0,right:0,bottom:0,left:0},c=0,u=0,h=0,m=0;"window"!==o.options.container&&"paddingbox"===e&&(l.top=parseInt(s.borderTopWidth,10)*a.y,l.right=parseInt(s.borderRightWidth,10)*a.x,l.bottom=parseInt(s.borderBottomWidth,10)*a.y,l.left=parseInt(s.borderLeftWidth,10)*a.x),n="string"==typeof t?"window"===t?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:"parent"===t?o.parentElement.getBoundingClientRect():document.querySelector(t).getBoundingClientRect():t.getBoundingClientRect(),i&&(c=i.touches?i.touches[0].clientX:i.clientX,u=i.touches?i.touches[0].clientY:i.clientY,h=c-n.left,m=u-n.top);let p=r.left<n.right&&r.right>n.left,d=r.top<n.bottom&&r.bottom>n.top;return{overlaps:p&&d,top:r.top-n.top-l.top,right:n.right-r.right-l.right,bottom:n.bottom-r.bottom-l.bottom,left:r.left-n.left-l.left,parentBorderWidth:l,panelRect:r,referenceRect:n,pointer:{clientX:c,clientY:u,left:h-l.left,top:m-l.top,right:n.width-h-l.right,bottom:n.height-m-l.bottom}}},o.setSize=()=>{if(t.panelSize){const e=ka.pOsize(o,t.panelSize);o.style.width=e.width,o.style.height=e.height}else if(t.contentSize){const e=ka.pOsize(o,t.contentSize);o.content.style.width=e.width,o.content.style.height=e.height,o.style.width=e.width,o.content.style.width="100%"}return o},o.resize=(...t)=>{let e,i=window.getComputedStyle(o),n={width:i.width,height:i.height},r=!0;t.forEach((t=>{"string"==typeof t?n=t:"object"==typeof t?n=Object.assign(n,t):"boolean"==typeof t?r=t:"function"==typeof t&&(e=t)}));let s=ka.pOsize(o,n);o.style.width=s.width,o.style.height=s.height,o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()})),r&&o.saveCurrentDimensions(),o.status="normalized";let a=o.controlbar.querySelector(".jsPanel-btn-smallify");return a&&(a.style.transform="rotate(0deg)"),e&&e.call(o,o),o.calcSizeFactors(),o},o.windowResizeHandler=e=>{if(e.target===window){let i,n,r=o.status,s=t.onwindowresize;"maximized"===r&&s?o.maximize(!1,!0):o.snapped&&"minimized"!==r?o.snap(o.snapped,!0):"normalized"===r||"smallified"===r||"maximized"===r?"function"==typeof s?s.call(o,e,o):(i=(window.innerWidth-o.offsetWidth)*o.hf,o.style.left=i<=0?0:i+"px",n=(window.innerHeight-o.offsetHeight)*o.vf,o.style.top=n<=0?0:n+"px"):"smallifiedmax"===r&&s&&o.maximize(!1,!0).smallify(),o.slaves&&o.slaves.size>0&&o.slaves.forEach((t=>{t.reposition()}))}},o.setControls=(t,e)=>(o.header.querySelectorAll(".jsPanel-btn").forEach((t=>{const e=t.className.split("-"),i=e[e.length-1];"hidden"!==o.getAttribute(`data-btn${i}`)&&(t.style.display="block")})),t.forEach((t=>{const e=o.controlbar.querySelector(t);e&&(e.style.display="none")})),e&&e.call(o,o),o),o.setControlStatus=(t,e="enable",i)=>{const n=o.controlbar.querySelector(`.jsPanel-btn-${t}`);switch(e){case"disable":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"disabled"),n.style.pointerEvents="none",n.style.opacity=.4,n.style.cursor="default");break;case"hide":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"hidden"),n.style.display="none");break;case"show":"removed"!==o.getAttribute(`data-btn${t}`)&&(o.setAttribute(`data-btn${t}`,"enabled"),n.style.display="block",n.style.pointerEvents="auto",n.style.opacity=1,n.style.cursor="pointer");break;case"enable":"removed"!==o.getAttribute(`data-btn${t}`)&&("hidden"===o.getAttribute(`data-btn${t}`)&&(n.style.display="block"),o.setAttribute(`data-btn${t}`,"enabled"),n.style.pointerEvents="auto",n.style.opacity=1,n.style.cursor="pointer");break;case"remove":o.controlbar.removeChild(n),o.setAttribute(`data-btn${t}`,"removed")}return i&&i.call(o,o),o},o.setControlSize=t=>{const e=t.toLowerCase();o.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{["jsPanel-btn-xl","jsPanel-btn-lg","jsPanel-btn-md","jsPanel-btn-sm","jsPanel-btn-xs"].forEach((e=>{t.classList.remove(e)})),t.classList.add(`jsPanel-btn-${e}`)})),"xl"===e?o.titlebar.style.fontSize="1.5rem":"lg"===e?o.titlebar.style.fontSize="1.25rem":"md"===e?o.titlebar.style.fontSize="1.05rem":"sm"===e?o.titlebar.style.fontSize=".9rem":"xs"===e&&(o.titlebar.style.fontSize=".8rem")},o.setHeaderControls=e=>{if(o.options.headerControls.add){let t=o.options.headerControls.add;Array.isArray(t)||(t=[t]),t.forEach((t=>{o.addControl(t)}))}let i=[];o.controlbar.querySelectorAll(".jsPanel-btn").forEach((t=>{let e=t.className.match(/jsPanel-btn-[a-z0-9]{3,}/i)[0].substring(12);i.push(e)}));const n=ka.pOheaderControls(t.headerControls);return t.headerControls=n,i.forEach((t=>{n[t]&&o.setControlStatus(t,n[t])})),o.setControlSize(n.size),e&&e.call(o,o),o},o.setHeaderLogo=(t,e)=>{let i=[o.headerlogo],n=document.querySelector("#"+o.id+"-min");return n&&i.push(n.querySelector(".jsPanel-headerlogo")),"string"==typeof t?"<"!==t.substr(0,1)?i.forEach((e=>{ka.emptyNode(e);let i=document.createElement("img");i.src=t,e.append(i)})):i.forEach((e=>{e.innerHTML=t})):i.forEach((e=>{ka.emptyNode(e),e.append(t)})),o.headerlogo.childNodes.forEach((t=>{t.nodeName&&"IMG"===t.nodeName&&t.setAttribute("draggable","false")})),e&&e.call(o,o),o},o.setHeaderRemove=t=>(o.removeChild(o.header),o.content.classList.add("jsPanel-content-noheader"),["close","maximize","normalize","minimize","smallify"].forEach((t=>{o.setAttribute(`data-btn${t}`,"removed")})),t&&t.call(o,o),o),o.setHeaderTitle=(t,e)=>{let i=[o.headertitle],n=document.querySelector("#"+o.id+"-min");return n&&i.push(n.querySelector(".jsPanel-title")),"string"==typeof t?i.forEach((e=>{e.innerHTML=t})):"function"==typeof t?i.forEach((e=>{ka.emptyNode(e),e.innerHTML=t()})):i.forEach((e=>{ka.emptyNode(e),e.append(t)})),e&&e.call(o,o),o},o.setIconfont=(t,e=o,i)=>{if(t){let i,n;if("fa"===t||"far"===t||"fal"===t||"fas"===t||"fad"===t)i=[`${t} fa-window-close`,`${t} fa-window-maximize`,`${t} fa-window-restore`,`${t} fa-window-minimize`,`${t} fa-chevron-up`];else if("material-icons"===t)i=[t,t,t,t,t,t],n=["close","fullscreen","fullscreen_exit","call_received","expand_less"];else if(Array.isArray(t))i=[`custom-control-icon ${t[4]}`,`custom-control-icon ${t[3]}`,`custom-control-icon ${t[2]}`,`custom-control-icon ${t[1]}`,`custom-control-icon ${t[0]}`];else{if("bootstrap"!==t&&"glyphicon"!==t)return e;i=["glyphicon glyphicon-remove","glyphicon glyphicon-fullscreen","glyphicon glyphicon-resize-full","glyphicon glyphicon-minus","glyphicon glyphicon-chevron-up"]}e.querySelectorAll(".jsPanel-controlbar .jsPanel-btn").forEach((t=>{ka.emptyNode(t).innerHTML="<span></span>"})),Array.prototype.slice.call(e.querySelectorAll(".jsPanel-controlbar .jsPanel-btn > span")).reverse().forEach(((e,o)=>{e.className=i[o],"material-icons"===t&&(e.textContent=n[o])}))}return i&&i.call(e,e),e},o.addToolbar=(t,e,i)=>{if("header"===t?t=o.headertoolbar:"footer"===t&&(t=o.footer),"string"==typeof e)t.innerHTML=e;else if(Array.isArray(e))e.forEach((e=>{"string"==typeof e?t.innerHTML+=e:t.append(e)}));else if("function"==typeof e){let i=e.call(o,o);"string"==typeof i?t.innerHTML=i:t.append(i)}else t.append(e);return t.classList.add("active"),i&&i.call(o,o),o},o.addCloseControl=()=>{let t=document.createElement("button"),e=o.content.style.color;return t.classList.add("jsPanel-addCloseCtrl"),t.innerHTML=ka.icons.close,t.style.color=e,o.options.rtl&&t.classList.add("rtl"),o.appendChild(t),ka.pointerup.forEach((e=>{t.addEventListener(e,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;o.close(null,!0)}))})),ka.pointerdown.forEach((e=>{t.addEventListener(e,(t=>{t.preventDefault()}))})),o},o.addControl=e=>{if(!e.html)return o;e.position||(e.position=1);const i=o.controlbar.querySelectorAll(".jsPanel-btn").length;let n=document.createElement("button");n.innerHTML=e.html,n.className=`jsPanel-btn jsPanel-btn-${e.name} jsPanel-btn-${t.headerControls.size}`,n.style.color=o.header.style.color,e.position>i?o.controlbar.append(n):o.controlbar.insertBefore(n,o.querySelector(`.jsPanel-controlbar .jsPanel-btn:nth-child(${e.position})`));const r=e.ariaLabel||e.name;return r&&n.setAttribute("aria-label",r),ka.pointerup.forEach((t=>{n.addEventListener(t,(t=>{if(t.preventDefault(),t.button&&t.button>0)return!1;e.handler.call(o,o,n)}))})),e.afterInsert&&e.afterInsert.call(n,n),o},o.setRtl=()=>{[o.header,o.content,o.footer].forEach((e=>{e.dir="rtl",t.rtl.lang&&(e.lang=t.rtl.lang)}))},o.id=t.id,o.classList.add("jsPanel-"+t.paneltype),"standard"===t.paneltype&&(o.style.zIndex=this.zi.next()),n.append(o),o.front(!1,!1),o.setTheme(t.theme),t.boxShadow&&o.classList.add(`jsPanel-depth-${t.boxShadow}`),t.header){if(t.headerLogo&&o.setHeaderLogo(t.headerLogo),o.setIconfont(t.iconfont),o.setHeaderTitle(t.headerTitle),o.setHeaderControls(),ka.isIE){let t=[o.headerbar,o.controlbar];switch(o.options.headerControls.size){case"md":t.forEach((t=>{t.style.height="34px"}));break;case"xs":t.forEach((t=>{t.style.height="26px"}));break;case"sm":t.forEach((t=>{t.style.height="30px"}));break;case"lg":t.forEach((t=>{t.style.height="38px"}));break;case"xl":t.forEach((t=>{t.style.height="42px"}))}}if("auto-show-hide"===t.header){let e="jsPanel-depth-"+t.boxShadow;o.header.style.opacity=0,o.style.backgroundColor="transparent",this.remClass(o,e),this.setClass(o.content,e),o.header.addEventListener("mouseenter",(()=>{o.header.style.opacity=1,ka.setClass(o,e),ka.remClass(o.content,e)})),o.header.addEventListener("mouseleave",(()=>{o.header.style.opacity=0,ka.remClass(o,e),ka.setClass(o.content,e)}))}}else o.setHeaderRemove(),t.addCloseControl&&o.addCloseControl();if(t.headerToolbar&&o.addToolbar(o.headertoolbar,t.headerToolbar),t.footerToolbar&&o.addToolbar(o.footer,t.footerToolbar),t.border&&o.setBorder(t.border),t.borderRadius&&o.setBorderRadius(t.borderRadius),t.content&&("function"==typeof t.content?t.content.call(o,o):"string"==typeof t.content?o.content.innerHTML=t.content:o.content.append(t.content)),t.contentAjax&&this.ajax(t.contentAjax,o),t.contentFetch&&this.fetch(t.contentFetch,o),t.contentOverflow){const e=t.contentOverflow.split(" ");1===e.length?o.content.style.overflow=e[0]:2===e.length&&(o.content.style.overflowX=e[0],o.content.style.overflowY=e[1])}if(t.autoclose){"number"==typeof t.autoclose?t.autoclose={time:t.autoclose+"ms"}:"string"==typeof t.autoclose&&(t.autoclose={time:t.autoclose});let e=Object.assign({},ka.defaultAutocloseConfig,t.autoclose);e.time&&"number"==typeof e.time&&(e.time+="ms");let i=o.progressbar.querySelector("div");i.addEventListener("animationend",(t=>{t.stopPropagation(),o.progressbar.classList.remove("active"),o.close()})),e.progressbar&&(o.progressbar.classList.add("active"),e.background?ka.themes.indexOf(e.background)>-1?o.progressbar.classList.add(e.background+"-bg"):ka.colorNames[e.background]?o.progressbar.style.background="#"+ka.colorNames[e.background]:o.progressbar.style.background=e.background:o.progressbar.classList.add("success-bg")),i.style.animation=`${e.time} progressbar`}if(t.rtl&&o.setRtl(),o.setSize(),o.status="normalized",t.position?this.position(o,t.position):o.style.opacity=1,document.dispatchEvent(l),o.calcSizeFactors(),t.animateIn&&(o.addEventListener("animationend",(()=>{this.remClass(o,t.animateIn)})),this.setClass(o,t.animateIn)),t.syncMargins){let e=this.pOcontainment(t.maximizedMargin);t.dragit&&(t.dragit.containment=e,!0===t.dragit.snap?(t.dragit.snap=ka.defaultSnapConfig,t.dragit.snap.containment=!0):t.dragit.snap&&(t.dragit.snap.containment=!0)),t.resizeit&&(t.resizeit.containment=e)}if(t.dragit?(["start","drag","stop"].forEach((e=>{t.dragit[e]?"function"==typeof t.dragit[e]&&(t.dragit[e]=[t.dragit[e]]):t.dragit[e]=[]})),o.drag(t.dragit),o.addEventListener("jspaneldragstop",(t=>{t.panel===o&&o.calcSizeFactors()}),!1)):o.titlebar.style.cursor="default",t.resizeit){let e;["start","resize","stop"].forEach((e=>{t.resizeit[e]?"function"==typeof t.resizeit[e]&&(t.resizeit[e]=[t.resizeit[e]]):t.resizeit[e]=[]})),o.sizeit(t.resizeit),o.addEventListener("jspanelresizestart",(t=>{t.panel===o&&(e=o.status)}),!1),o.addEventListener("jspanelresizestop",(i=>{i.panel===o&&("smallified"===e||"smallifiedmax"===e||"maximized"===e)&&parseFloat(o.style.height)>parseFloat(window.getComputedStyle(o.header).height)&&(o.setControls([".jsPanel-btn-normalize"]),o.status="normalized",document.dispatchEvent(l),document.dispatchEvent(s),t.onstatuschange&&ka.processCallbacks(o,t.onstatuschange,"every"),o.calcSizeFactors())}),!1)}if(o.saveCurrentDimensions(!0),o.saveCurrentPosition(),t.setStatus&&("smallifiedmax"===t.setStatus?o.maximize().smallify():"smallified"===t.setStatus?o.smallify():o[t.setStatus.substr(0,t.setStatus.length-1)]()),this.pointerdown.forEach((e=>{o.addEventListener(e,(e=>{e.target.closest(".jsPanel-btn-close")||e.target.closest(".jsPanel-btn-minimize")||"standard"!==t.paneltype||o.front()}),!1)})),t.onwindowresize&&"window"===o.options.container&&window.addEventListener("resize",o.windowResizeHandler,!1),t.onparentresize){let e=t.onparentresize,i=o.isChildpanel();if(i){const t=i.content;let n=[];o.parentResizeHandler=r=>{if(r.panel===i){n[0]=t.offsetWidth,n[1]=t.offsetHeight;let i,r,s=o.status;"maximized"===s&&e?o.maximize():o.snapped&&"minimized"!==s?o.snap(o.snapped,!0):"normalized"===s||"smallified"===s||"maximized"===s?"function"==typeof e?e.call(o,o,{width:n[0],height:n[1]}):(i=(n[0]-o.offsetWidth)*o.hf,o.style.left=i<=0?0:i+"px",r=(n[1]-o.offsetHeight)*o.vf,o.style.top=r<=0?0:r+"px"):"smallifiedmax"===s&&e&&o.maximize().smallify()}},document.addEventListener("jspanelresize",o.parentResizeHandler,!1)}}return this.globalCallbacks&&(Array.isArray(this.globalCallbacks)?this.globalCallbacks.forEach((t=>{t.call(o,o)})):this.globalCallbacks.call(o,o)),t.callback&&(Array.isArray(t.callback)?t.callback.forEach((t=>{t.call(o,o)})):t.callback.call(o,o)),e&&e.call(o,o),document.dispatchEvent(r),o}};
/**
 * @license AngularJS v1.8.2
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */!function(t){var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function i(t){if(!D(t))return e;R(t.objectMaxDepth)&&(e.objectMaxDepth=n(t.objectMaxDepth)?t.objectMaxDepth:NaN),R(t.urlErrorParamsEnabled)&&X(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function n(t){return N(t)&&t>0}function o(t,i){i=i||Error;var n="https://errors.angularjs.org/1.8.2/",o=n.replace(".","\\.")+"[\\s\\S]*",r=new RegExp(o,"g");return function(){var o,s,a=arguments[0],l=arguments[1],c="["+(t?t+":":"")+a+"] ",u=mt(arguments,2).map((function(t){return Ut(t,e.objectMaxDepth)}));if(c+=l.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<u.length?u[e].replace(r,""):t})),c+="\n"+n+(t?t+"/":"")+a,e.urlErrorParamsEnabled)for(s=0,o="?";s<u.length;s++,o="&")c+=o+"p"+s+"="+encodeURIComponent(u[s]);return new i(c)}}var r,s,a,l,c=/^\/(.+)\/([a-z]*)$/,u="validity",h=Object.prototype.hasOwnProperty,m=function(t){return q(t)?t.toLowerCase():t},p=function(t){return q(t)?t.toUpperCase():t},d=[].slice,f=[].splice,_=[].push,y=Object.prototype.toString,v=Object.getPrototypeOf,g=o("ng"),b=t.angular||(t.angular={}),x=0;function $(t){if(null==t||J(t))return!1;if(W(t)||q(t)||s&&t instanceof s)return!0;var e="length"in Object(t)&&t.length;return N(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function A(t,e,i){var n,o;if(t)if(G(t))for(n in t)"prototype"!==n&&"length"!==n&&"name"!==n&&t.hasOwnProperty(n)&&e.call(i,t[n],n,t);else if(W(t)||$(t)){var r="object"!=typeof t;for(n=0,o=t.length;n<o;n++)(r||n in t)&&e.call(i,t[n],n,t)}else if(t.forEach&&t.forEach!==A)t.forEach(e,i,t);else if(O(t))for(n in t)e.call(i,t[n],n,t);else if("function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t);else for(n in t)h.call(t,n)&&e.call(i,t[n],n,t);return t}function w(t,e,i){for(var n=Object.keys(t).sort(),o=0;o<n.length;o++)e.call(i,t[n[o]],n[o]);return n}function B(t){return function(e,i){t(i,e)}}function C(){return++x}function S(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,i){for(var n=t.$$hashKey,o=0,r=e.length;o<r;++o){var s=e[o];if(D(s)||G(s))for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l],h=s[u];i&&D(h)?U(h)?t[u]=new Date(h.valueOf()):Y(h)?t[u]=new RegExp(h):h.nodeName?t[u]=h.cloneNode(!0):it(h)?t[u]=h.clone():"__proto__"!==u&&(D(t[u])||(t[u]=W(h)?[]:{}),E(t[u],[h],!0)):t[u]=h}}return S(t,n),t}function M(t){return E(t,d.call(arguments,1),!1)}function T(t){return E(t,d.call(arguments,1),!0)}function P(t){return parseInt(t,10)}r=t.document.documentMode;var z=Number.isNaN||function(t){return t!=t};function F(t,e){return M(Object.create(t),e)}function I(){}function k(t){return t}function V(t){return function(){return t}}function L(t){return G(t.toString)&&t.toString!==y}function j(t){return void 0===t}function R(t){return void 0!==t}function D(t){return null!==t&&"object"==typeof t}function O(t){return null!==t&&"object"==typeof t&&!v(t)}function q(t){return"string"==typeof t}function N(t){return"number"==typeof t}function U(t){return"[object Date]"===y.call(t)}function W(t){return Array.isArray(t)||t instanceof Array}function H(t){switch(y.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function Y(t){return"[object RegExp]"===y.call(t)}function J(t){return t&&t.window===t}function Z(t){return t&&t.$evalAsync&&t.$watch}function X(t){return"boolean"==typeof t}function K(t){return t&&G(t.then)}I.$inject=[],k.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return q(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function it(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function nt(t){return m(t.nodeName||t[0]&&t[0].nodeName)}function ot(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function rt(t,e){var i=t.indexOf(e);return i>=0&&t.splice(i,1),i}function st(t,e,i){var o,r,s=[],a=[];if(i=n(i)?i:NaN,e){if((r=e)&&N(r.length)&&Q.test(y.call(r))||(o=e,"[object ArrayBuffer]"===y.call(o)))throw g("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw g("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:A(e,(function(t,i){"$$hashKey"!==i&&delete e[i]})),s.push(t),a.push(e),l(t,e,i)}return c(t,i);function l(t,e,i){if(--i<0)return"...";var n,o=e.$$hashKey;if(W(t))for(var r=0,s=t.length;r<s;r++)e.push(c(t[r],i));else if(O(t))for(n in t)e[n]=c(t[n],i);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=c(t[n],i));else for(n in t)h.call(t,n)&&(e[n]=c(t[n],i));return S(e,o),e}function c(t,e){if(!D(t))return t;var i=s.indexOf(t);if(-1!==i)return a[i];if(J(t)||Z(t))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,o=function(t){switch(y.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(c(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var i=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return i.lastIndex=t.lastIndex,i;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===o&&(o=W(t)?[]:Object.create(v(t)),n=!0),s.push(t),a.push(o),n?l(t,o,e):o}}function at(t,e){return t===e||t!=t&&e!=e}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var i,n,o,r=typeof t;if(r===typeof e&&"object"===r){if(!W(t)){if(U(t))return!!U(e)&&at(t.getTime(),e.getTime());if(Y(t))return!!Y(e)&&t.toString()===e.toString();if(Z(t)||Z(e)||J(t)||J(e)||W(e)||U(e)||Y(e))return!1;for(n in o=Dt(),t)if("$"!==n.charAt(0)&&!G(t[n])){if(!lt(t[n],e[n]))return!1;o[n]=!0}for(n in e)if(!(n in o)&&"$"!==n.charAt(0)&&R(e[n])&&!G(e[n]))return!1;return!0}if(!W(e))return!1;if((i=t.length)===e.length){for(n=0;n<i;n++)if(!lt(t[n],e[n]))return!1;return!0}}return!1}var ct=function(){if(!R(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var i=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!i||-1!==i.indexOf("no-unsafe-eval"),noInlineStyle:!i||-1!==i.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},ut=function(){if(R(ut.name_))return ut.name_;var e,i,n,o,r=Ct.length;for(i=0;i<r;++i)if(n=Ct[i],e=t.document.querySelector("["+n.replace(":","\\:")+"jq]")){o=e.getAttribute(n+"jq");break}return ut.name_=o};function ht(t,e,i){return t.concat(d.call(e,i))}function mt(t,e){return d.call(t,e||0)}function pt(t,e){var i=arguments.length>2?mt(arguments,2):[];return!G(e)||e instanceof RegExp?e:i.length?function(){return arguments.length?e.apply(t,ht(i,arguments,0)):e.apply(t,i)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,i){var n=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:J(i)?n="$WINDOW":i&&t.document===i?n="$DOCUMENT":Z(i)&&(n="$SCOPE"),n}function ft(t,e){if(!j(t))return N(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function _t(t){return q(t)?JSON.parse(t):t}var yt=/:/g;function vt(t,e){t=t.replace(yt,"");var i=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return z(i)?e:i}function gt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,i){i=i?-1:1;var n=t.getTimezoneOffset();return gt(t,i*(vt(e,n)-n))}function xt(t){t=s(t).clone().empty();var e=s("<div></div>").append(t).html();try{return t[0].nodeType===qt?m(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+m(e)}))}catch(i){return m(e)}}function $t(t){try{return decodeURIComponent(t)}catch(e){}}function At(t){var e={};return A((t||"").split("&"),(function(t){var i,n,o;t&&(n=t=t.replace(/\+/g,"%20"),-1!==(i=t.indexOf("="))&&(n=t.substring(0,i),o=t.substring(i+1)),R(n=$t(n))&&(o=!R(o)||$t(o),h.call(e,n)?W(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o))})),e}function wt(t){return Bt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Bt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Ct=["ng-","data-ng-","ng:","x-ng-"];var St=function(e){var i=e.currentScript;if(!i)return!0;if(!(i instanceof t.HTMLScriptElement||i instanceof t.SVGScriptElement))return!1;var n=i.attributes;return[n.getNamedItem("src"),n.getNamedItem("href"),n.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var i=e.createElement("a");if(i.href=t.value,e.location.origin===i.origin)return!0;switch(i.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Et(e,i){var n,o,r={};if(A(Ct,(function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,o=e.getAttribute(i))})),A(Ct,(function(t){var i,r=t+"app";!n&&(i=e.querySelector("["+r.replace(":","\\:")+"]"))&&(n=i,o=i.getAttribute(r))})),n){if(!St)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");r.strictDi=null!==function(t,e){var i,n,o=Ct.length;for(n=0;n<o;++n)if(i=Ct[n]+e,q(i=t.getAttribute(i)))return i;return null}(n,"strict-di"),i(n,o?[o]:[],r)}}function Mt(e,i,n){D(n)||(n={});n=M({strictDi:!1},n);var o=function(){if((e=s(e)).injector()){var o=e[0]===t.document?"document":xt(e);throw g("btstrpd","App already bootstrapped with this element '{0}'",o.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),n.debugInfoEnabled&&i.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),i.unshift("ng");var r=Ke(i,n.strictDi);return r.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,i,n){t.$apply((function(){e.data("$injector",n),i(e)(t)}))}]),r},r=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&r.test(t.name)&&(n.debugInfoEnabled=!0,t.name=t.name.replace(r,"")),t&&!a.test(t.name))return o();t.name=t.name.replace(a,""),b.resumeBootstrap=function(t){return A(t,(function(t){i.push(t)})),o()},G(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Tt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Pt(t){var e=b.element(t).injector();if(!e)throw g("test","no injector found for element argument to getTestability");return e.get("$$testability")}var zt=/[A-Z]/g;function Ft(t,e){return e=e||"_",t.replace(zt,(function(t,i){return(i?e:"")+t.toLowerCase()}))}var It=!1;function kt(){pe.legacyXHTMLReplacement=!0}function Vt(t,e,i){if(!t)throw g("areq","Argument '{0}' is {1}",e||"?",i||"required");return t}function Lt(t,e,i){return i&&W(t)&&(t=t[t.length-1]),Vt(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function jt(t,e){if("hasOwnProperty"===t)throw g("badname","hasOwnProperty is not a valid {0} name",e)}function Rt(t){for(var e,i=t[0],n=t[t.length-1],o=1;i!==n&&(i=i.nextSibling);o++)(e||t[o]!==i)&&(e||(e=s(d.call(t,0,o))),e.push(i));return e||t}function Dt(){return Object.create(null)}function Ot(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!L(t)||W(t)||U(t)?ft(t):t.toString()}return t}var qt=3;function Nt(t,e){if(W(t)){e=e||[];for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}else if(D(t))for(var o in e=e||{},t)"$"===o.charAt(0)&&"$"===o.charAt(1)||(e[o]=t[o]);return e||t}function Ut(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):j(t)?"undefined":"string"!=typeof t?function(t,e){var i=[];return n(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(D(e=dt(t,e))){if(i.indexOf(e)>=0)return"...";i.push(e)}return e}))}(t,e):t}var Wt={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};pe.expando="ng339";var Ht=pe.cache={},Gt=1;pe._data=function(t){return this.cache[t[this.expando]]||{}};var Yt=/-([a-z])/g,Jt=/^-ms-/,Zt={mouseleave:"mouseout",mouseenter:"mouseover"},Xt=o("jqLite");function Kt(t,e){return e.toUpperCase()}function Qt(t){return t.replace(Yt,Kt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ie=/<([\w:-]+)/,ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,oe={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};oe.tbody=oe.tfoot=oe.colgroup=oe.caption=oe.thead,oe.th=oe.td;var re={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var se in oe){var ae=oe[se],le=ae.slice().reverse();re[se]=[le.length,"<"+le.join("><")+">","</"+ae.join("></")+">"]}function ce(t){return!ee.test(t)}function ue(t){var e=t.nodeType;return 1===e||!e||9===e}function he(e,i){var n,o,s,a,l,c=i.createDocumentFragment(),u=[];if(ce(e))u.push(i.createTextNode(e));else{if(n=c.appendChild(i.createElement("div")),o=(ie.exec(e)||["",""])[1].toLowerCase(),a=pe.legacyXHTMLReplacement?e.replace(ne,"<$1></$2>"):e,r<10)for(s=re[o]||re._default,n.innerHTML=s[1]+a+s[2],l=s[0];l--;)n=n.firstChild;else{for(l=(s=oe[o]||[]).length;--l>-1;)n.appendChild(t.document.createElement(s[l])),n=n.firstChild;n.innerHTML=a}u=ht(u,n.childNodes),(n=c.firstChild).textContent=""}return c.textContent="",c.innerHTML="",A(u,(function(t){c.appendChild(t)})),c}re.optgroup=re.option;var me=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function pe(e){if(e instanceof pe)return e;var i,n,o,r;if(q(e)&&(e=tt(e),i=!0),!(this instanceof pe)){if(i&&"<"!==e.charAt(0))throw Xt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pe(e)}i?Be(this,(n=e,o=o||t.document,(r=te.exec(n))?[o.createElement(r[1])]:(r=he(n,o))?r.childNodes:[])):G(e)?Te(e):Be(this,e)}function de(t){return t.cloneNode(!0)}function fe(t,e){!e&&ue(t)&&s.cleanData([t]),t.querySelectorAll&&s.cleanData(t.querySelectorAll("*"))}function _e(t){var e;for(e in t)return!1;return!0}function ye(t){var e=t.ng339,i=e&&Ht[e],n=i&&i.events,o=i&&i.data;o&&!_e(o)||n&&!_e(n)||(delete Ht[e],t.ng339=void 0)}function ve(t,e,i,n){if(R(n))throw Xt("offargs","jqLite#off() does not support the `selector` argument");var o=be(t),r=o&&o.events,s=o&&o.handle;if(s){if(e){var a=function(e){var n=r[e];R(i)&&rt(n||[],i),R(i)&&n&&n.length>0||(t.removeEventListener(e,s),delete r[e])};A(e.split(" "),(function(t){a(t),Zt[t]&&a(Zt[t])}))}else for(e in r)"$destroy"!==e&&t.removeEventListener(e,s),delete r[e];ye(t)}}function ge(t,e){var i=t.ng339,n=i&&Ht[i];n&&(e?delete n.data[e]:n.data={},ye(t))}function be(t,e){var i=t.ng339,n=i&&Ht[i];return e&&!n&&(t.ng339=i=++Gt,n=Ht[i]={events:{},data:{},handle:void 0}),n}function xe(t,e,i){if(ue(t)){var n,o=R(i),r=!o&&e&&!D(e),s=!e,a=be(t,!r),l=a&&a.data;if(o)l[Qt(e)]=i;else{if(s)return l;if(r)return l&&l[Qt(e)];for(n in e)l[Qt(n)]=e[n]}}}function $e(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Ae(t,e){if(e&&t.setAttribute){var i=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),n=i;A(e.split(" "),(function(t){t=tt(t),n=n.replace(" "+t+" "," ")})),n!==i&&t.setAttribute("class",tt(n))}}function we(t,e){if(e&&t.setAttribute){var i=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),n=i;A(e.split(" "),(function(t){t=tt(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")})),n!==i&&t.setAttribute("class",tt(n))}}function Be(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var i=e.length;if("number"==typeof i&&e.window!==e){if(i)for(var n=0;n<i;n++)t[t.length++]=e[n]}else t[t.length++]=e}}function Ce(t,e){return Se(t,"$"+(e||"ngController")+"Controller")}function Se(t,e,i){9===t.nodeType&&(t=t.documentElement);for(var n=W(e)?e:[e];t;){for(var o=0,r=n.length;o<r;o++)if(R(i=s.data(t,n[o])))return i;t=t.parentNode||11===t.nodeType&&t.host}}function Ee(t){for(fe(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Me(t,e){e||fe(t);var i=t.parentNode;i&&i.removeChild(t)}function Te(e){function i(){t.document.removeEventListener("DOMContentLoaded",i),t.removeEventListener("load",i),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",i),t.addEventListener("load",i))}var Pe=pe.prototype={ready:Te,toString:function(){var t=[];return A(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return s(t>=0?this[t]:this[this.length+t])},length:0,push:_,sort:[].sort,splice:[].splice},ze={};A("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){ze[m(t)]=t}));var Fe={};A("input,select,option,textarea,button,form,details".split(","),(function(t){Fe[t]=!0}));var Ie={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function ke(t,e){var i=ze[e.toLowerCase()];return i&&Fe[nt(t)]&&i}function Ve(t,e,i){i.call(t,e)}function Le(t,e,i){var n=e.relatedTarget;n&&(n===t||me.call(t,n))||i.call(t,e)}function je(){this.$get=function(){return M(pe,{hasClass:function(t,e){return t.attr&&(t=t[0]),$e(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Ae(t,e)}})}}function Re(t,e){var i=t&&t.$$hashKey;if(i)return"function"==typeof i&&(i=t.$$hashKey()),i;var n=typeof t;return i="function"===n||"object"===n&&null!==t?t.$$hashKey=n+":"+(e||C)():n+":"+t}A({data:xe,removeData:ge,hasData:function(t){for(var e in Ht[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,i=t.length;e<i;e++)ge(t[e]),ve(t[e])}},(function(t,e){pe[e]=t})),A({data:xe,inheritedData:Se,scope:function(t){return s.data(t,"$scope")||Se(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return s.data(t,"$isolateScope")||s.data(t,"$isolateScopeNoTemplate")},controller:Ce,injector:function(t){return Se(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:$e,css:function(t,e,i){if(e=function(t){return Qt(t.replace(Jt,"ms-"))}(e),!R(i))return t.style[e];t.style[e]=i},attr:function(t,e,i){var n,o=t.nodeType;if(o!==qt&&2!==o&&8!==o&&t.getAttribute){var r=m(e),s=ze[r];if(!R(i))return n=t.getAttribute(e),s&&null!==n&&(n=r),null===n?void 0:n;null===i||!1===i&&s?t.removeAttribute(e):t.setAttribute(e,s?r:i)}},prop:function(t,e,i){if(!R(i))return t[e];t[e]=i},text:function(){return t.$dv="",t;function t(t,e){if(j(e)){var i=t.nodeType;return 1===i||i===qt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(j(e)){if(t.multiple&&"select"===nt(t)){var i=[];return A(t.options,(function(t){t.selected&&i.push(t.value||t.text)})),i}return t.value}t.value=e},html:function(t,e){if(j(e))return t.innerHTML;fe(t,!0),t.innerHTML=e},empty:Ee},(function(t,e){pe.prototype[e]=function(e,i){var n,o,r=this.length;if(t!==Ee&&j(2===t.length&&t!==$e&&t!==Ce?e:i)){if(D(e)){for(n=0;n<r;n++)if(t===xe)t(this[n],e);else for(o in e)t(this[n],o,e[o]);return this}for(var s=t.$dv,a=j(s)?Math.min(r,1):r,l=0;l<a;l++){var c=t(this[l],e,i);s=s?s+c:c}return s}for(n=0;n<r;n++)t(this[n],e,i);return this}})),A({removeData:ge,on:function(t,e,i,n){if(R(n))throw Xt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ue(t)){var o=be(t,!0),r=o.events,s=o.handle;s||(s=o.handle=function(t,e){var i=function(i,n){i.isDefaultPrevented=function(){return i.defaultPrevented};var o=e[n||i.type],r=o?o.length:0;if(r){if(j(i.immediatePropagationStopped)){var s=i.stopImmediatePropagation;i.stopImmediatePropagation=function(){i.immediatePropagationStopped=!0,i.stopPropagation&&i.stopPropagation(),s&&s.call(i)}}i.isImmediatePropagationStopped=function(){return!0===i.immediatePropagationStopped};var a=o.specialHandlerWrapper||Ve;r>1&&(o=Nt(o));for(var l=0;l<r;l++)i.isImmediatePropagationStopped()||a(t,i,o[l])}};return i.elem=t,i}(t,r));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],l=a.length,c=function(e,n,o){var a=r[e];a||((a=r[e]=[]).specialHandlerWrapper=n,"$destroy"===e||o||t.addEventListener(e,s)),a.push(i)};l--;)e=a[l],Zt[e]?(c(Zt[e],Le),c(e,void 0,!0)):c(e)}},off:ve,one:function(t,e,i){(t=s(t)).on(e,(function n(){t.off(e,i),t.off(e,n)})),t.on(e,i)},replaceWith:function(t,e){var i,n=t.parentNode;fe(t),A(new pe(e),(function(e){i?n.insertBefore(e,i.nextSibling):n.replaceChild(e,t),i=e}))},children:function(t){var e=[];return A(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var i=t.nodeType;if(1===i||11===i)for(var n=0,o=(e=new pe(e)).length;n<o;n++){var r=e[n];t.appendChild(r)}},prepend:function(t,e){if(1===t.nodeType){var i=t.firstChild;A(new pe(e),(function(e){t.insertBefore(e,i)}))}},wrap:function(t,e){var i,n,o;i=t,n=s(e).eq(0).clone()[0],(o=i.parentNode)&&o.replaceChild(n,i),n.appendChild(i)},remove:Me,detach:function(t){Me(t,!0)},after:function(t,e){var i=t,n=t.parentNode;if(n)for(var o=0,r=(e=new pe(e)).length;o<r;o++){var s=e[o];n.insertBefore(s,i.nextSibling),i=s}},addClass:we,removeClass:Ae,toggleClass:function(t,e,i){e&&A(e.split(" "),(function(e){var n=i;j(n)&&(n=!$e(t,e)),(n?we:Ae)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,i){var n,o,r,s=e.type||e,a=be(t),l=a&&a.events,c=l&&l[s];c&&(n={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:s,target:t},e.type&&(n=M(n,e)),o=Nt(c),r=i?[n].concat(i):[n],A(o,(function(e){n.isImmediatePropagationStopped()||e.apply(t,r)})))}},(function(t,e){pe.prototype[e]=function(e,i,n){for(var o,r=0,a=this.length;r<a;r++)j(o)?R(o=t(this[r],e,i,n))&&(o=s(o)):Be(o,t(this[r],e,i,n));return R(o)?o:this}})),pe.prototype.bind=pe.prototype.on,pe.prototype.unbind=pe.prototype.off;var De=Object.create(null);function Oe(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Oe.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return z(t)?De:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var i=this._idx(t);-1===i&&(i=this._lastIndex=this._keys.length),this._keys[i]=t,this._values[i]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var qe=Oe,Ne=[function(){this.$get=[function(){return qe}]}],Ue=/^([^(]+?)=>/,We=/^[^(]*\(\s*([^)]*)\)/m,He=/,/,Ge=/^\s*(_?)(\S+?)\1\s*$/,Ye=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Je=o("$injector");function Ze(t){return Function.prototype.toString.call(t)}function Xe(t){var e=Ze(t).replace(Ye,"");return e.match(Ue)||e.match(We)}function Ke(t,e){e=!0===e;var i={},n="Provider",o=[],s=new qe,a={$provide:{provider:d(f),factory:d(y),service:d((function(t,e){return y(t,["$injector",function(t){return t.instantiate(e)}])})),value:d((function(t,e){return y(t,V(e),!1)})),constant:d((function(t,e){jt(t,"constant"),a[t]=e,u[t]=e})),decorator:function(t,e){var i=c.get(t+n),o=i.$get;i.$get=function(){var t=m.invoke(o,i);return m.invoke(e,null,{$delegate:t})}}}},c=a.$injector=g(a,(function(t,e){throw b.isString(e)&&o.push(e),Je("unpr","Unknown provider: {0}",o.join(" <- "))})),u={},h=g(u,(function(t,e){var i=c.get(t+n,e);return m.invoke(i.$get,i,void 0,t)})),m=h;a.$injectorProvider={$get:V(h)},m.modules=c.modules=Dt();var p=v(t);return(m=h.get("$injector")).strictDi=e,A(p,(function(t){t&&m.invoke(t)})),m.loadNewModules=function(t){A(v(t),(function(t){t&&m.invoke(t)}))},m;function d(t){return function(e,i){if(!D(e))return t(e,i);A(e,B(t))}}function f(t,e){if(jt(t,"service"),(G(e)||W(e))&&(e=c.instantiate(e)),!e.$get)throw Je("pget","Provider '{0}' must define $get factory method.",t);return a[t+n]=e}function _(t,e){return function(){var i=m.invoke(e,this);if(j(i))throw Je("undef","Provider '{0}' must return a value from $get factory method.",t);return i}}function y(t,e,i){return f(t,{$get:!1!==i?_(t,e):e})}function v(t){Vt(j(t)||W(t),"modulesToLoad","not an array");var e,i=[];return A(t,(function(t){if(!s.get(t)){s.set(t,!0);try{q(t)?(e=l(t),m.modules[t]=e,i=i.concat(v(e.requires)).concat(e._runBlocks),n(e._invokeQueue),n(e._configBlocks)):G(t)||W(t)?i.push(c.invoke(t)):Lt(t,"module")}catch(o){throw W(t)&&(t=t[t.length-1]),o.message&&o.stack&&-1===o.stack.indexOf(o.message)&&(o=o.message+"\n"+o.stack),Je("modulerr","Failed to instantiate module {0} due to:\n{1}",t,o.stack||o.message||o)}}function n(t){var e,i;for(e=0,i=t.length;e<i;e++){var n=t[e],o=c.get(n[0]);o[n[1]].apply(o,n[2])}}})),i}function g(t,s){function l(e,n){if(t.hasOwnProperty(e)){if(t[e]===i)throw Je("cdep","Circular dependency found: {0}",e+" <- "+o.join(" <- "));return t[e]}try{return o.unshift(e),t[e]=i,t[e]=s(e,n),t[e]}catch(r){throw t[e]===i&&delete t[e],r}finally{o.shift()}}function c(t,i,n){for(var o=[],r=Ke.$$annotate(t,e,n),s=0,a=r.length;s<a;s++){var c=r[s];if("string"!=typeof c)throw Je("itkn","Incorrect injection token! Expected service name as string, got {0}",c);o.push(i&&i.hasOwnProperty(c)?i[c]:l(c,n))}return o}return{invoke:function(t,e,i,n){"string"==typeof i&&(n=i,i=null);var o=c(t,i,n);return W(t)&&(t=t[t.length-1]),function(t){if(r||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return X(e)||(e=t.$$ngIsClass=/^class\b/.test(Ze(t))),e}(t)?(o.unshift(null),new(Function.prototype.bind.apply(t,o))):t.apply(e,o)},instantiate:function(t,e,i){var n=W(t)?t[t.length-1]:t,o=c(t,e,i);return o.unshift(null),new(Function.prototype.bind.apply(n,o))},get:l,annotate:Ke.$$annotate,has:function(e){return a.hasOwnProperty(e+n)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(i,n,o){var r=i.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(G(t))t=t();else if(it(t)){var e=t[0];t="fixed"!==i.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else N(t)||(t=0);return t}();if(e){var n=t.getBoundingClientRect().top;i.scrollBy(0,n-e)}}else i.scrollTo(0,0)}function l(t){var e,i,o;(t=q(t)?t:N(t)?t.toString():n.hash())?(e=r.getElementById(t))?a(e):(i=r.getElementsByName(t),o=null,Array.prototype.some.call(i,(function(t){if("a"===nt(t))return o=t,!0})),(e=o)?a(e):"top"===t&&a(null)):a(null)}return e&&o.$watch((function(){return n.hash()}),(function(e,i){var n,r;e===i&&""===e||(n=function(){o.$evalAsync(l)},"complete"===(r=r||t).document.readyState?r.setTimeout(n):s(r).on("load",n))})),l}]}Ke.$$annotate=function(t,e,i){var n,o;if("function"==typeof t){if(!(n=t.$inject)){if(n=[],t.length){if(e)throw q(i)&&i||(i=t.name||function(t){var e=Xe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Je("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",i);A(Xe(t)[1].split(He),(function(t){t.replace(Ge,(function(t,e,i){n.push(i)}))}))}t.$inject=n}}else W(t)?(Lt(t[o=t.length-1],"fn"),n=t.slice(0,o)):Lt(t,"fn",!0);return n};var ti=o("$animate"),ei="ng-animate";function ii(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function ni(t){return D(t)?t:{}}var oi=function(){this.$get=I},ri=function(){var t=new qe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(i,n){return{enabled:I,on:I,off:I,pin:I,push:function(s,a,l,c){c&&c(),(l=l||{}).from&&s.css(l.from),l.to&&s.css(l.to),(l.addClass||l.removeClass)&&function(i,s,a){var l=t.get(i)||{},c=o(l,s,!0),u=o(l,a,!1);(c||u)&&(t.set(i,l),e.push(i),1===e.length&&n.$$postDigest(r))}(s,l.addClass,l.removeClass);var u=new i;return u.complete(),u}};function o(t,e,i){var n=!1;return e&&A(e=q(e)?e.split(" "):W(e)?e:[],(function(e){e&&(n=!0,t[e]=i)})),n}function r(){A(e,(function(e){var i=t.get(e);if(i){var n=function(t){q(t)&&(t=t.split(" "));var e=Dt();return A(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),o="",r="";A(i,(function(t,e){t!==!!n[e]&&(t?o+=(o.length?" ":"")+e:r+=(r.length?" ":"")+e)})),A(e,(function(t){o&&we(t,o),r&&Ae(t,r)})),t.delete(e)}})),e.length=0}}]},si=["$provide",function(t){var e=this,i=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(i,n){if(i&&"."!==i.charAt(0))throw ti("notcsel","Expecting class selector starting with '.' got '{0}'.",i);var o=i+"-animation";e.$$registeredAnimations[i.substr(1)]=o,t.factory(o,n)},this.customFilter=function(t){return 1===arguments.length&&(n=G(t)?t:null),n},this.classNameFilter=function(t){if(1===arguments.length&&(i=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(i.toString()))throw i=null,ti("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ei)}return i},this.$get=["$$animateQueue",function(t){function e(t,e,i){if(i){var n=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(1===i.nodeType)return i}}(i);!n||n.parentNode||n.previousElementSibling||(i=null)}i?i.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(i,n,o,r){return n=n&&s(n),o=o&&s(o),e(i,n=n||o.parent(),o),t.push(i,"enter",ni(r))},move:function(i,n,o,r){return n=n&&s(n),o=o&&s(o),e(i,n=n||o.parent(),o),t.push(i,"move",ni(r))},leave:function(e,i){return t.push(e,"leave",ni(i),(function(){e.remove()}))},addClass:function(e,i,n){return(n=ni(n)).addClass=ii(n.addclass,i),t.push(e,"addClass",n)},removeClass:function(e,i,n){return(n=ni(n)).removeClass=ii(n.removeClass,i),t.push(e,"removeClass",n)},setClass:function(e,i,n,o){return(o=ni(o)).addClass=ii(o.addClass,i),o.removeClass=ii(o.removeClass,n),t.push(e,"setClass",o)},animate:function(e,i,n,o,r){return(r=ni(r)).from=r.from?M(r.from,i):i,r.to=r.to?M(r.to,n):n,o=o||"ng-inline-animate",r.tempClasses=ii(r.tempClasses,o),t.push(e,"animate",r)}}}]}],ai=function(){this.$get=["$$rAF",function(t){var e=[];function i(i){e.push(i),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return i((function(){t=!0})),function(e){t?e():i(e)}}}]},li=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,i,n,o){function r(t){this.setHost(t);var e=i();this._doneCallbacks=[],this._tick=function(t){n()?function(t){o(t,0,!1)}(t):e(t)},this._state=0}return r.chain=function(t,e){var i=0;!function n(){if(i===t.length)return void e(!0);t[i]((function(t){!1!==t?(i++,n()):e(!1)}))}()},r.all=function(t,e){var i=0,n=!0;function o(o){n=n&&o,++i===t.length&&e(n)}A(t,(function(t){t.done(o)}))},r.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,i){e.done((function(e){!1===e?i():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(A(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},r}]},ci=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,i){return function(e,n){var o=n||{};o.$$prepared||(o=st(o)),o.cleanupStyles&&(o.from=o.to=null),o.from&&(e.css(o.from),o.from=null);var r,s=new i;return{start:a,end:a};function a(){return t((function(){!function(){o.addClass&&(e.addClass(o.addClass),o.addClass=null);o.removeClass&&(e.removeClass(o.removeClass),o.removeClass=null);o.to&&(e.css(o.to),o.to=null)}(),r||s.complete(),r=!0})),s}}}]};function ui(t,e,i,n,o){var r=this,a=t.location,l=t.history,c=t.setTimeout,u=t.clearTimeout,h={},m=o(i);r.isMock=!1,r.$$completeOutstandingRequest=m.completeTask,r.$$incOutstandingRequestCount=m.incTaskCount,r.notifyWhenNoOutstandingRequests=m.notifyWhenNoPendingTasks;var p,d,f=a.href,_=e.find("base"),y=null,v=n.history?function(){try{return l.state}catch(t){}}:I;w(),r.url=function(e,i,o){if(j(o)&&(o=null),a!==t.location&&(a=t.location),l!==t.history&&(l=t.history),e){var s=d===o;if(e=ho(e).href,f===e&&(!n.history||s))return r;var c=f&&un(f)===un(e);return f=e,d=o,!n.history||c&&s?(c||(y=e),i?a.replace(e):c?a.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):a.href=e,a.href!==e&&(y=e)):(l[i?"replaceState":"pushState"](o,"",e),w()),y&&(y=e),r}return function(t){return t.replace(/#$/,"")}(y||a.href)},r.state=function(){return p};var g=[],b=!1;function x(){y=null,B()}var $=null;function w(){lt(p=j(p=v())?null:p,$)&&(p=$),$=p,d=p}function B(){var t=d;w(),f===r.url()&&t===p||(f=r.url(),d=p,A(g,(function(t){t(r.url(),p)})))}r.onUrlChange=function(e){return b||(n.history&&s(t).on("popstate",x),s(t).on("hashchange",x),b=!0),g.push(e),e},r.$$applicationDestroyed=function(){s(t).off("hashchange popstate",x)},r.$$checkUrlChange=B,r.baseHref=function(){var t=_.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},r.defer=function(t,e,i){var n;return e=e||0,i=i||m.DEFAULT_TASK_TYPE,m.incTaskCount(i),n=c((function(){delete h[n],m.completeTask(t,i)}),e),h[n]=i,n},r.defer.cancel=function(t){if(h.hasOwnProperty(t)){var e=h[t];return delete h[t],u(t),m.completeTask(I,e),!0}return!1}}function hi(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,i,n,o){return new ui(t,n,e,i,o)}]}function mi(){this.$get=function(){var t={};function e(e,i){if(e in t)throw o("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,r=M({},i,{id:e}),s=Dt(),a=i&&i.capacity||Number.MAX_VALUE,l=Dt(),c=null,u=null;return t[e]={put:function(t,e){if(!j(e)){if(a<Number.MAX_VALUE)h(l[t]||(l[t]={key:t}));return t in s||n++,s[t]=e,n>a&&this.remove(u.key),e}},get:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;h(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;e===c&&(c=e.p),e===u&&(u=e.n),m(e.n,e.p),delete l[t]}t in s&&(delete s[t],n--)},removeAll:function(){s=Dt(),n=0,l=Dt(),c=u=null},destroy:function(){s=null,r=null,l=null,delete t[e]},info:function(){return M({},r,{size:n})}};function h(t){t!==c&&(u?u===t&&(u=t.n):u=t,m(t.n,t.p),m(t,c),(c=t).n=null)}function m(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return A(t,(function(t,i){e[i]=t.info()})),e},e.get=function(e){return t[e]},e}}function pi(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var di=o("$compile");var fi=new function(){};function _i(e,i){var n={},o="Directive",a=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,i={},n=t.split(",");for(e=0;e<n.length;e++)i[n[e]]=!0;return i}("ngSrc,ngSrcset,src,srcset"),u=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,d=Dt();function f(t,e,i){var n=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,o=Dt();return A(t,(function(t,r){if((t=t.trim())in d)o[r]=d[t];else{var s=t.match(n);if(!s)throw di("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,r,t,i?"controller bindings definition":"isolate scope definition");o[r]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||r},s[4]&&(d[t]=o[r])}})),o}function _(t,e){var i={isolateScope:null,bindToController:null};if(D(t.scope)&&(!0===t.bindToController?(i.bindToController=f(t.scope,e,!0),i.isolateScope={}):i.isolateScope=f(t.scope,e,!1)),D(t.bindToController)&&(i.bindToController=f(t.bindToController,e,!0)),i.bindToController&&!t.controller)throw di("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return i}this.directive=function t(i,r){return Vt(i,"name"),jt(i,"directive"),q(i)?(!function(t){var e=t.charAt(0);if(!e||e!==m(e))throw di("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw di("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(i),Vt(r,"directiveFactory"),n.hasOwnProperty(i)||(n[i]=[],e.factory(i+o,["$injector","$exceptionHandler",function(t,e){var o=[];return A(n[i],(function(n,r){try{var s=t.invoke(n);G(s)?s={compile:V(s)}:!s.compile&&s.link&&(s.compile=V(s.link)),s.priority=s.priority||0,s.index=r,s.name=s.name||i,s.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&D(e)&&A(e,(function(t,i){var n=t.match(u);t.substring(n[0].length)||(e[i]=n[0]+i)})),e}(s),s.restrict=function(t,e){if(t&&(!q(t)||!/[EACM]/.test(t)))throw di("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(s.restrict,i),s.$$moduleName=n.$$moduleName,o.push(s)}catch(a){e(a)}})),o}])),n[i].push(r)):A(i,B(t)),this},this.component=function t(e,i){if(!q(e))return A(e,B(pt(this,t))),this;var n=i.controller||function(){};function o(t){function e(e){return G(e)||W(e)?function(i,n){return t.invoke(e,this,{$element:i,$attrs:n})}:e}var o=i.template||i.templateUrl?i.template:"",r={controller:n,controllerAs:Bi(i.controller)||i.controllerAs||"$ctrl",template:e(o),templateUrl:e(i.templateUrl),transclude:i.transclude,scope:{},bindToController:i.bindings||{},restrict:"E",require:i.require};return A(i,(function(t,e){"$"===e.charAt(0)&&(r[e]=t)})),r}return A(i,(function(t,e){"$"===e.charAt(0)&&(o[e]=t,G(n)&&(n[e]=t))})),o.$inject=["$injector"],this.directive(e,o)},this.aHrefSanitizationTrustedUrlList=function(t){return R(t)?(i.aHrefSanitizationTrustedUrlList(t),this):i.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return R(t)?(i.imgSrcSanitizationTrustedUrlList(t),this):i.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var v=!0;this.debugInfoEnabled=function(t){return R(t)?(v=t,this):v};var g=!1;this.strictComponentBindingsEnabled=function(t){return R(t)?(g=t,this):g};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var $=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?($=t,this):$};var w=Dt();this.addPropertySecurityContext=function(t,e,i){var n=t.toLowerCase()+"|"+e.toLowerCase();if(n in w&&w[n]!==i)throw di("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,w[n],i);return w[n]=i,this},function(){function t(t,e){A(e,(function(e){w[e.toLowerCase()]=t}))}t(Gn.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Gn.CSS,["*|style"]),t(Gn.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Gn.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Gn.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,i,d,f,B,C,S,E,T){var P,z=/^\w/,V=t.document.createElement("div"),L=x,R=$,O=b;function N(){try{if(!--O)throw P=void 0,di("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);S.$apply((function(){for(var t=0,e=P.length;t<e;++t)try{P[t]()}catch(i){d(i)}P=void 0}))}finally{O++}}function U(t,e){if(!t)return t;if(!q(t))throw di("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var i="",n=tt(t),o=/\s/.test(n)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,r=n.split(o),s=Math.floor(r.length/2),a=0;a<s;a++){var l=2*a;i+=E.getTrustedMediaUrl(tt(r[l])),i+=" "+tt(r[l+1])}var c=tt(r[2*a]).split(/\s/);return i+=E.getTrustedMediaUrl(tt(c[0])),2===c.length&&(i+=" "+tt(c[1])),i}function Y(t,e){if(e){var i,n,o,r=Object.keys(e);for(i=0,n=r.length;i<n;i++)this[o=r[i]]=e[o]}else this.$attr={};this.$$element=t}function J(t,e){try{t.addClass(e)}catch(i){}}Y.prototype={$normalize:bi,$addClass:function(t){t&&t.length>0&&T.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&T.removeClass(this.$$element,t)},$updateClass:function(t,e){var i=xi(t,e);i&&i.length&&T.addClass(this.$$element,i);var n=xi(e,t);n&&n.length&&T.removeClass(this.$$element,n)},$set:function(t,e,i,n){var o=ke(this.$$element[0],t),r=Ie[t],s=t;o?(this.$$element.prop(t,e),n=o):r&&(this[r]=e,s=r),this[t]=e,n?this.$attr[t]=n:(n=this.$attr[t])||(this.$attr[t]=n=Ft(t,"-")),"img"===nt(this.$$element)&&"srcset"===t&&(this[t]=e=U(e,"$set('srcset', value)")),!1!==i&&(null===e||j(e)?this.$$element.removeAttr(n):z.test(n)?o&&!1===e?this.$$element.removeAttr(n):this.$$element.attr(n,e):function(t,e,i){V.innerHTML="<span "+e+">";var n=V.firstChild.attributes,o=n[0];n.removeNamedItem(o.name),o.value=i,t.attributes.setNamedItem(o)}(this.$$element[0],n,e));var a=this.$$observers;a&&A(a[s],(function(t){try{t(e)}catch(i){d(i)}}))},$observe:function(t,e){var i=this,n=i.$$observers||(i.$$observers=Dt()),o=n[t]||(n[t]=[]);return o.push(e),S.$evalAsync((function(){o.$$inter||!i.hasOwnProperty(t)||j(i[t])||e(i[t])})),function(){rt(o,e)}}};var K=i.startSymbol(),Q=i.endSymbol(),et="{{"===K&&"}}"===Q?k:function(t){return t.replace(/\{\{/g,K).replace(/}}/g,Q)},it=/^ng(Attr|Prop|On)([A-Z].*)$/,ot=/^(.+)Start$/;return st.$$addBindingInfo=v?function(t,e){var i=t.data("$binding")||[];W(e)?i=i.concat(e):i.push(e),t.data("$binding",i)}:I,st.$$addBindingClass=v?function(t){J(t,"ng-binding")}:I,st.$$addScopeInfo=v?function(t,e,i,n){var o=i?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(o,e)}:I,st.$$addScopeClass=v?function(t,e){J(t,e?"ng-isolate-scope":"ng-scope")}:I,st.$$createComment=function(e,i){var n="";return v&&(n=" "+(e||"")+": ",i&&(n+=i+" ")),t.document.createComment(n)},st;function st(t,e,i,n,o){t instanceof s||(t=s(t));var r=ct(t,e,t,i,n,o);st.$$addScopeClass(t);var a=null;return function(e,i,n){if(!t)throw di("multilink","This element has already been linked.");Vt(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new());var l,c,u,h=(n=n||{}).parentBoundTranscludeFn,m=n.transcludeControllers,p=n.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),a||(c=(l=p)&&l[0],a=c&&"foreignobject"!==nt(c)&&y.call(c).match(/SVG/)?"svg":"html"),u="html"!==a?s(Et(a,s("<div></div>").append(t).html())):i?Pe.clone.call(t):t,m)for(var d in m)u.data("$"+d+"Controller",m[d].instance);return st.$$addScopeInfo(u,e),i&&i(u,e),r&&r(e,u,u,h),i||(t=r=null),u}}function ct(t,e,i,n,o,a){for(var l,c,u,h,m,p,d,f=[],_=W(t)||t instanceof s,y=0;y<t.length;y++)l=new Y,11===r&&ut(t,y,_),(u=(c=dt(t[y],[],l,0===y?n:void 0,o)).length?vt(c,t[y],l,e,i,null,[],[],a):null)&&u.scope&&st.$$addScopeClass(l.$$element),m=u&&u.terminal||!(h=t[y].childNodes)||!h.length?null:ct(h,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||m)&&(f.push(y,u,m),p=!0,d=d||u),a=null;return p?function(t,i,n,o){var r,a,l,c,u,h,m,p,_;if(d){var y=i.length;for(_=new Array(y),u=0;u<f.length;u+=3)m=f[u],_[m]=i[m]}else _=i;for(u=0,h=f.length;u<h;)l=_[f[u++]],r=f[u++],a=f[u++],r?(r.scope?(c=t.$new(),st.$$addScopeInfo(s(l),c)):c=t,p=r.transcludeOnThisElement?ht(t,r.transclude,o):!r.templateOnThisElement&&o?o:!o&&e?ht(t,e):null,r(a,c,l,n,p)):a&&a(t,l.childNodes,void 0,o)}:null}function ut(t,e,i){var n,o=t[e],r=o.parentNode;if(o.nodeType===qt)for(;(n=r?o.nextSibling:t[e+1])&&n.nodeType===qt;)o.nodeValue=o.nodeValue+n.nodeValue,n.parentNode&&n.parentNode.removeChild(n),i&&n===t[e+1]&&t.splice(e+1,1)}function ht(t,e,i){function n(n,o,r,s,a){return n||((n=t.$new(!1,a)).$$transcluded=!0),e(n,o,{parentBoundTranscludeFn:i,transcludeControllers:r,futureParentElement:s})}var o=n.$$slots=Dt();for(var r in e.$$slots)e.$$slots[r]?o[r]=ht(t,e.$$slots[r],i):o[r]=null;return n}function dt(t,e,n,o,r){var s,c,u,h=t.nodeType,m=n.$attr;switch(h){case 1:$t(e,bi(c=nt(t)),"E",o,r);for(var p,d,f,_,y,v=t.attributes,g=0,b=v&&v.length;g<b;g++){var x,$=!1,A=!1,w=!1,B=!1,C=!1;d=(p=v[g]).name,_=p.value,(y=(f=bi(d.toLowerCase())).match(it))?(w="Attr"===y[1],B="Prop"===y[1],C="On"===y[1],d=d.replace(vi,"").toLowerCase().substr(4+y[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(x=f.match(ot))&&At(x[1])&&($=d,A=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),B||C?(n[f]=_,m[f]=p.name,B?Tt(t,e,f,d):Pt(e,f,d)):(m[f=bi(d.toLowerCase())]=d,!w&&n.hasOwnProperty(f)||(n[f]=_,ke(t,f)&&(n[f]=!0)),zt(t,e,_,f,w),$t(e,f,"A",o,r,$,A))}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!R)break;if(D(u=t.className)&&(u=u.animVal),q(u)&&""!==u)for(;s=l.exec(u);)$t(e,f=bi(s[2]),"C",o,r)&&(n[f]=tt(s[3])),u=u.substr(s.index+s[0].length);break;case qt:!function(t,e){var n=i(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),i=!!e.length;return i&&st.$$addBindingClass(e),function(t,e){var o=e.parent();i||st.$$addBindingClass(o),st.$$addBindingInfo(o,n.expressions),t.$watch(n,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!L)break;!function(t,e,i,n,o){try{var r=a.exec(t.nodeValue);if(r){var s=bi(r[1]);$t(e,s,"M",n,o)&&(i[s]=tt(r[2]))}}catch(l){}}(t,e,n,o,r)}return e.sort(Ct),e}function ft(t,e,i){var n=[],o=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw di("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,i);1===t.nodeType&&(t.hasAttribute(e)&&o++,t.hasAttribute(i)&&o--),n.push(t),t=t.nextSibling}while(o>0);else n.push(t);return s(n)}function _t(t,e,i){return function(n,o,r,s,a){return o=ft(o[0],e,i),t(n,o,r,s,a)}}function yt(t,e,i,n,o,r){var s;return t?st(e,i,n,o,r):function(){return s||(s=st(e,i,n,o,r),e=i=r=null),s.apply(this,arguments)}}function vt(e,i,n,o,r,a,l,c,u){u=u||{};for(var h,m,p,f,_,y=-Number.MAX_VALUE,v=u.newScopeDirective,g=u.controllerDirectives,b=u.newIsolateScopeDirective,x=u.templateDirective,$=u.nonTlbTranscludeDirective,w=!1,B=!1,S=u.hasElementTranscludeDirective,E=n.$$element=s(i),T=a,P=o,z=!1,F=!1,I=0,k=e.length;I<k;I++){var V=(h=e[I]).$$start,L=h.$$end;if(V&&(E=ft(i,V,L)),p=void 0,y>h.priority)break;if((_=h.scope)&&(h.templateUrl||(D(_)?(St("new/isolated scope",b||v,h,E),b=h):St("new/isolated scope",b,h,E)),v=v||h),m=h.name,!z&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var R,O=I+1;R=e[O++];)if(R.transclude&&!R.$$tlb||R.replace&&(R.templateUrl||R.template)){F=!0;break}z=!0}if(!h.templateUrl&&h.controller&&(g=g||Dt(),St("'"+m+"' controller",g[m],h,E),g[m]=h),_=h.transclude)if(w=!0,h.$$tlb||(St("transclusion",$,h,E),$=h),"element"===_)S=!0,y=h.priority,p=E,E=n.$$element=s(st.$$createComment(m,n[m])),i=E[0],It(r,mt(p),i),P=yt(F,p,o,y,T&&T.name,{nonTlbTranscludeDirective:$});else{var q=Dt();if(D(_)){p=t.document.createDocumentFragment();var N=Dt(),U=Dt();for(var H in A(_,(function(t,e){var i="?"===t.charAt(0);t=i?t.substring(1):t,N[t]=e,q[e]=null,U[e]=i})),A(E.contents(),(function(e){var i=N[bi(nt(e))];i?(U[i]=!0,q[i]=q[i]||t.document.createDocumentFragment(),q[i].appendChild(e)):p.appendChild(e)})),A(U,(function(t,e){if(!t)throw di("reqslot","Required transclusion slot `{0}` was not filled.",e)})),q)if(q[H]){var J=s(q[H].childNodes);q[H]=yt(F,J,o)}p=s(p.childNodes)}else p=s(de(i)).contents();E.empty(),(P=yt(F,p,o,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=q}if(h.template)if(B=!0,St("template",x,h,E),x=h,_=G(h.template)?h.template(E,n):h.template,_=et(_),h.replace){if(T=h,p=ce(_)?[]:$i(Et(h.templateNamespace,tt(_))),i=p[0],1!==p.length||1!==i.nodeType)throw di("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");It(r,E,i);var X={$attr:{}},K=dt(i,[],X),Q=e.splice(I+1,e.length-(I+1));(b||v)&&bt(K,b,v),e=e.concat(K).concat(Q),wt(n,X),k=e.length}else E.html(_);if(h.templateUrl)B=!0,St("template",x,h,E),x=h,h.replace&&(T=h),rt=Bt(e.splice(I,e.length-I),E,n,r,w&&P,l,c,{controllerDirectives:g,newScopeDirective:v!==h&&v,newIsolateScopeDirective:b,templateDirective:x,nonTlbTranscludeDirective:$}),k=e.length;else if(h.compile)try{f=h.compile(E,n,P);var it=h.$$originalDirective||h;G(f)?ot(null,pt(it,f),V,L):f&&ot(pt(it,f.pre),pt(it,f.post),V,L)}catch(at){d(at,xt(E))}h.terminal&&(rt.terminal=!0,y=Math.max(y,h.priority))}return rt.scope=v&&!0===v.scope,rt.transcludeOnThisElement=w,rt.templateOnThisElement=B,rt.transclude=P,u.hasElementTranscludeDirective=S,rt;function ot(t,e,i,n){t&&(i&&(t=_t(t,i,n)),t.require=h.require,t.directiveName=m,(b===h||h.$$isolateScope)&&(t=kt(t,{isolateScope:!0})),l.push(t)),e&&(i&&(e=_t(e,i,n)),e.require=h.require,e.directiveName=m,(b===h||h.$$isolateScope)&&(e=kt(e,{isolateScope:!0})),c.push(e))}function rt(t,e,o,r,a){var u,h,m,p,f,_,y,$,w,B;for(var E in i===o?(w=n,$=n.$$element):w=new Y($=s(o),n),f=e,b?p=e.$new(!0):v&&(f=e.$parent),a&&((y=function(t,e,i,n){var o;Z(t)||(n=i,i=e,e=t,t=void 0);S&&(o=_);i||(i=S?$.parent():$);if(!n)return a(t,e,o,i,F);var r=a.$$slots[n];if(r)return r(t,e,o,i,F);if(j(r))throw di("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',n,xt($))}).$$boundTransclude=a,y.isSlotFilled=function(t){return!!a.$$slots[t]}),g&&(_=function(t,e,i,n,o,r,s){var a=Dt();for(var l in n){var c=n[l],u={$scope:c===s||c.$$isolateScope?o:r,$element:t,$attrs:e,$transclude:i},h=c.controller;"@"===h&&(h=e[c.name]);var m=C(h,u,!0,c.controllerAs);a[c.name]=m,t.data("$"+c.name+"Controller",m.instance)}return a}($,w,y,g,p,e,b)),b&&(st.$$addScopeInfo($,p,!0,!(x&&(x===b||x===b.$$originalDirective))),st.$$addScopeClass($,!0),p.$$isolateBindings=b.$$isolateBindings,(B=Rt(e,w,p,p.$$isolateBindings,b)).removeWatches&&p.$on("$destroy",B.removeWatches)),_){var T=g[E],P=_[E],z=T.$$bindings.bindToController;P.instance=P(),$.data("$"+T.name+"Controller",P.instance),P.bindingInfo=Rt(f,w,P.instance,z,T)}for(A(g,(function(t,e){var i=t.require;t.bindToController&&!W(i)&&D(i)&&M(_[e].instance,gt(e,i,$,_))})),A(_,(function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(at){d(at)}if(G(e.$onInit))try{e.$onInit()}catch(at){d(at)}G(e.$doCheck)&&(f.$watch((function(){e.$doCheck()})),e.$doCheck()),G(e.$onDestroy)&&f.$on("$destroy",(function(){e.$onDestroy()}))})),u=0,h=l.length;u<h;u++)Lt(m=l[u],m.isolateScope?p:e,$,w,m.require&&gt(m.directiveName,m.require,$,_),y);var F=e;for(b&&(b.template||null===b.templateUrl)&&(F=p),t&&t(F,o.childNodes,void 0,a),u=c.length-1;u>=0;u--)Lt(m=c[u],m.isolateScope?p:e,$,w,m.require&&gt(m.directiveName,m.require,$,_),y);A(_,(function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()}))}}function gt(t,e,i,n){var o;if(q(e)){var r=e.match(u),s=e.substring(r[0].length),a=r[1]||r[3],l="?"===r[2];if("^^"===a?i=i.parent():o=(o=n&&n[s])&&o.instance,!o){var c="$"+s+"Controller";o="^^"===a&&i[0]&&9===i[0].nodeType?null:a?i.inheritedData(c):i.data(c)}if(!o&&!l)throw di("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(W(e)){o=[];for(var h=0,m=e.length;h<m;h++)o[h]=gt(t,e[h],i,n)}else D(e)&&(o={},A(e,(function(e,r){o[r]=gt(t,e,i,n)})));return o||null}function bt(t,e,i){for(var n=0,o=t.length;n<o;n++)t[n]=F(t[n],{$$isolateScope:e,$$newScope:i})}function $t(t,i,r,s,a,l,c){if(i===a)return null;var u=null;if(n.hasOwnProperty(i))for(var h,m=e.get(i+o),p=0,d=m.length;p<d;p++)if(h=m[p],(j(s)||s>h.priority)&&-1!==h.restrict.indexOf(r)){if(l&&(h=F(h,{$$start:l,$$end:c})),!h.$$bindings){var f=h.$$bindings=_(h,h.name);D(f.isolateScope)&&(h.$$isolateBindings=f.isolateScope)}t.push(h),u=h}return u}function At(t){if(n.hasOwnProperty(t))for(var i=e.get(t+o),r=0,s=i.length;r<s;r++)if(i[r].multiElement)return!0;return!1}function wt(t,e){var i=e.$attr,n=t.$attr;A(t,(function(n,o){"$"!==o.charAt(0)&&(e[o]&&e[o]!==n&&(n.length?n+=("style"===o?";":" ")+e[o]:n=e[o]),t.$set(o,n,!0,i[o]))})),A(e,(function(e,o){t.hasOwnProperty(o)||"$"===o.charAt(0)||(t[o]=e,"class"!==o&&"style"!==o&&(n[o]=i[o]))}))}function Bt(t,e,i,n,o,r,a,l){var c,u,h=[],m=e[0],p=t.shift(),_=F(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),y=G(p.templateUrl)?p.templateUrl(e,i):p.templateUrl,v=p.templateNamespace;return e.empty(),f(y).then((function(d){var f,g,b,x;if(d=et(d),p.replace){if(b=ce(d)?[]:$i(Et(v,tt(d))),f=b[0],1!==b.length||1!==f.nodeType)throw di("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,y);g={$attr:{}},It(n,e,f);var $=dt(f,[],g);D(p.scope)&&bt($,!0),t=$.concat(t),wt(i,g)}else f=m,e.html(d);for(t.unshift(_),c=vt(t,f,i,o,e,p,r,a,l),A(n,(function(t,i){t===f&&(n[i]=e[0])})),u=ct(e[0].childNodes,o);h.length;){var w=h.shift(),B=h.shift(),C=h.shift(),S=h.shift(),E=e[0];if(!w.$$destroyed){if(B!==m){var M=B.className;l.hasElementTranscludeDirective&&p.replace||(E=de(f)),It(C,s(B),E),J(s(E),M)}x=c.transcludeOnThisElement?ht(w,c.transclude,S):S,c(u,w,E,n,x)}}h=null})).catch((function(t){H(t)&&d(t)})),function(t,e,i,n,o){var r=o;e.$$destroyed||(h?h.push(e,i,n,r):(c.transcludeOnThisElement&&(r=ht(e,c.transclude,o)),c(u,e,i,n,r)))}}function Ct(t,e){var i=e.priority-t.priority;return 0!==i?i:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function St(t,e,i,n){function o(t){return t?" (module: "+t+")":""}if(e)throw di("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,o(e.$$moduleName),i.name,o(i.$$moduleName),t,xt(n))}function Et(e,i){switch(e=m(e||"html")){case"svg":case"math":var n=t.document.createElement("div");return n.innerHTML="<"+e+">"+i+"</"+e+">",n.childNodes[0].childNodes;default:return i}}function Mt(t){return U(E.valueOf(t),"ng-prop-srcset")}function Tt(t,e,i,n){if(p.test(n))throw di("nodomevents","Property bindings for HTML DOM event properties are disallowed");var o=nt(t),r=function(t,e){var i=e.toLowerCase();return w[t+"|"+i]||w["*|"+i]}(o,n),s=k;"srcset"!==n||"img"!==o&&"source"!==o?r&&(s=E.getTrusted.bind(E,r)):s=Mt,e.push({priority:100,compile:function(t,e){var o=B(e[i]),r=B(e[i],(function(t){return E.valueOf(t)}));return{pre:function(t,e){function i(){var i=o(t);e[0][n]=s(i)}i(),t.$watch(r,i)}}}})}function Pt(t,e,i){t.push(Lr(B,S,d,e,i,!1))}function zt(t,e,n,o,r){var s=nt(t),a=function(t,e){return"srcdoc"===e?E.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?E.RESOURCE_URL:E.MEDIA_URL:"xlinkHref"===e?"image"===t?E.MEDIA_URL:"a"===t?E.URL:E.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?E.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:E.URL}(s,o),l=!r,u=c[o]||r,h=i(n,l,a,u);if(h){if("multiple"===o&&"select"===s)throw di("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",xt(t));if(p.test(o))throw di("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,r){var s=r.$$observers||(r.$$observers=Dt()),l=r[o];l!==n&&(h=l&&i(l,!0,a,u),n=l),h&&(r[o]=h(t),(s[o]||(s[o]=[])).$$inter=!0,(r.$$observers&&r.$$observers[o].$$scope||t).$watch(h,(function(t,e){"class"===o&&t!==e?r.$updateClass(t,e):r.$set(o,t)})))}}}})}}function It(e,i,n){var o,r,a=i[0],l=i.length,c=a.parentNode;if(e)for(o=0,r=e.length;o<r;o++)if(e[o]===a){e[o++]=n;for(var u=o,h=u+l-1,m=e.length;u<m;u++,h++)h<m?e[u]=e[h]:delete e[u];e.length-=l-1,e.context===a&&(e.context=n);break}c&&c.replaceChild(n,a);var p=t.document.createDocumentFragment();for(o=0;o<l;o++)p.appendChild(i[o]);for(s.hasData(a)&&(s.data(n,s.data(a)),s(a).off("$destroy")),s.cleanData(p.querySelectorAll("*")),o=1;o<l;o++)delete i[o];i[0]=n,i.length=1}function kt(t,e){return M((function(){return t.apply(null,arguments)}),t,e)}function Lt(t,e,i,n,o,r){try{t(e,i,n,o,r)}catch(s){d(s,xt(i))}}function jt(t,e){if(g)throw di("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Rt(t,e,n,o,r){var s,a=[],l={};function c(e,i,o){G(n.$onChanges)&&!at(i,o)&&(P||(t.$$postDigest(N),P=[]),s||(s={},P.push(u)),s[e]&&(o=s[e].previousValue),s[e]=new yi(o,i))}function u(){n.$onChanges(s),s=void 0}return A(o,(function(o,s){var u,m,p,d,f,_=o.attrName,y=o.optional;switch(o.mode){case"@":y||h.call(e,_)||(jt(_,r.name),n[s]=e[_]=void 0),f=e.$observe(_,(function(t){if(q(t)||X(t)){var e=n[s];c(s,t,e),n[s]=t}})),e.$$observers[_].$$scope=t,q(u=e[_])?n[s]=i(u)(t):X(u)&&(n[s]=u),l[s]=new yi(fi,n[s]),a.push(f);break;case"=":if(!h.call(e,_)){if(y)break;jt(_,r.name),e[_]=void 0}if(y&&!e[_])break;m=B(e[_]),d=m.literal?lt:at,p=m.assign||function(){throw u=n[s]=m(t),di("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[_],_,r.name)},u=n[s]=m(t);var v=function(e){return d(e,n[s])||(d(e,u)?p(t,e=n[s]):n[s]=e),u=e};v.$stateful=!0,f=o.collection?t.$watchCollection(e[_],v):t.$watch(B(e[_],v),null,m.literal),a.push(f);break;case"<":if(!h.call(e,_)){if(y)break;jt(_,r.name),e[_]=void 0}if(y&&!e[_])break;var g=(m=B(e[_])).literal,b=n[s]=m(t);l[s]=new yi(fi,n[s]),f=t[o.collection?"$watchCollection":"$watch"](m,(function(t,e){if(e===t){if(e===b||g&&lt(e,b))return;e=b}c(s,t,e),n[s]=t})),a.push(f);break;case"&":if(y||h.call(e,_)||jt(_,r.name),(m=e.hasOwnProperty(_)?B(e[_]):I)===I&&y)break;n[s]=function(e){return m(t,e)}}})),{initialChanges:l,removeWatches:a.length&&function(){for(var t=0,e=a.length;t<e;++t)a[t]()}}}}]}function yi(t,e){this.previousValue=t,this.currentValue=e}_i.$inject=["$provide","$$sanitizeUriProvider"],yi.prototype.isFirstChange=function(){return this.previousValue===fi};var vi=/^((?:x|data)[:\-_])/i,gi=/[:\-_]+(.)/g;function bi(t){return t.replace(vi,"").replace(gi,(function(t,e,i){return i?e.toUpperCase():e}))}function xi(t,e){var i="",n=t.split(/\s+/),o=e.split(/\s+/);t:for(var r=0;r<n.length;r++){for(var s=n[r],a=0;a<o.length;a++)if(s===o[a])continue t;i+=(i.length>0?" ":"")+s}return i}function $i(t){var e=(t=s(t)).length;if(e<=1)return t;for(;e--;){var i=t[e];(8===i.nodeType||i.nodeType===qt&&""===i.nodeValue.trim())&&f.call(t,e,1)}return t}var Ai=o("$controller"),wi=/^(\S+)(\s+as\s+([\w$]+))?$/;function Bi(t,e){if(e&&q(e))return e;if(q(t)){var i=wi.exec(t);if(i)return i[3]}}function Ci(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,i){jt(e,"controller"),D(e)?M(t,e):t[e]=i},this.$get=["$injector",function(e){return function(n,o,r,s){var a,l,c,u;if(r=!0===r,s&&q(s)&&(u=s),q(n)){if(!(l=n.match(wi)))throw Ai("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",n);if(c=l[1],u=u||l[3],!(n=t.hasOwnProperty(c)?t[c]:function(t,e,i){if(!e)return t;for(var n,o=e.split("."),r=t,s=o.length,a=0;a<s;a++)n=o[a],t&&(t=(r=t)[n]);return!i&&G(t)?pt(r,t):t}(o.$scope,c,!0)))throw Ai("ctrlreg","The controller with the name '{0}' is not registered.",c);Lt(n,c,!0)}if(r){var h=(W(n)?n[n.length-1]:n).prototype;return a=Object.create(h||null),u&&i(o,u,a,c||n.name),M((function(){var t=e.invoke(n,a,o,c);return t!==a&&(D(t)||G(t))&&(a=t,u&&i(o,u,a,c||n.name)),a}),{instance:a,identifier:u})}return a=e.instantiate(n,o,c),u&&i(o,u,a,c||n.name),a};function i(t,e,i,n){if(!t||!D(t.$scope))throw o("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",n,e);t.$scope[e]=i}}]}function Si(){this.$get=["$window",function(t){return s(t.document)}]}function Ei(){this.$get=["$document","$rootScope",function(t,e){var i=t[0],n=i&&i.hidden;function o(){n=i.hidden}return t.on("visibilitychange",o),e.$on("$destroy",(function(){t.off("visibilitychange",o)})),function(){return n}}]}function Mi(){this.$get=["$log",function(t){return function(e,i){t.error.apply(t,arguments)}}]}var Ti=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof s&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Pi="application/json",zi={"Content-Type":"application/json;charset=utf-8"},Fi=/^\[|^\{(?!\{)/,Ii={"[":/]$/,"{":/}$/},ki=/^\)]\}',?\n/,Vi=o("$http");function Li(t){return D(t)?U(t)?t.toISOString():ft(t):t}function ji(){this.$get=function(){return function(t){if(!t)return"";var e=[];return w(t,(function(t,i){null===t||j(t)||G(t)||(W(t)?A(t,(function(t){e.push(Bt(i)+"="+Bt(Li(t)))})):e.push(Bt(i)+"="+Bt(Li(t))))})),e.join("&")}}}function Ri(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(i,n,o){W(i)?A(i,(function(e,i){t(e,n+"["+(D(e)?i:"")+"]")})):D(i)&&!U(i)?w(i,(function(e,i){t(e,n+(o?"":"[")+i+(o?"":"]"))})):(G(i)&&(i=i()),e.push(Bt(n)+"="+(null==i?"":Bt(Li(i)))))}(t,"",!0),e.join("&")}}}function Di(t,e){if(q(t)){var i=t.replace(ki,"").trim();if(i){var n=e("Content-Type"),o=n&&0===n.indexOf(Pi);if(o||(s=(r=i).match(Fi))&&Ii[s[0]].test(r))try{t=_t(i)}catch(a){if(!o)return t;throw Vi("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,a)}}}var r,s;return t}function Oi(t){var e,i=Dt();function n(t,e){t&&(i[t]=i[t]?i[t]+", "+e:e)}return q(t)?A(t.split("\n"),(function(t){e=t.indexOf(":"),n(m(tt(t.substr(0,e))),tt(t.substr(e+1)))})):D(t)&&A(t,(function(t,e){n(m(e),tt(t))})),i}function qi(t){var e;return function(i){if(e||(e=Oi(t)),i){var n=e[m(i)];return void 0===n&&(n=null),n}return e}}function Ni(t,e,i,n){return G(n)?n(t,e,i):(A(n,(function(n){t=n(t,e,i)})),t)}function Ui(t){return 200<=t&&t<300}function Wi(){var t=this.defaults={transformResponse:[Di],transformRequest:[function(t){return!D(t)||(e=t,"[object File]"===y.call(e))||function(t){return"[object Blob]"===y.call(t)}(t)||function(t){return"[object FormData]"===y.call(t)}(t)?t:ft(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Nt(zi),put:Nt(zi),patch:Nt(zi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return R(t)?(e=!!t,this):e};var i=this.interceptors=[],n=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,s,a,l,c,u,h,d){var f=l("$http");t.paramSerializer=q(t.paramSerializer)?h.get(t.paramSerializer):t.paramSerializer;var _=[];A(i,(function(t){_.unshift(q(t)?h.get(t):h.invoke(t))}));var y,v=(y=[co].concat(n.map(ho)),function(t){var e=ho(t);return y.some(mo.bind(null,e))});function g(i){if(!D(i))throw o("$http")("badreq","Http request configuration must be an object.  Received: {0}",i);if(!q(d.valueOf(i.url)))throw o("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",i.url);var n=M({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},i);n.headers=function(e){var i,n,o,r=t.headers,s=M({},e.headers);r=M({},r.common,r[m(e.method)]);t:for(i in r){for(o in n=m(i),s)if(m(o)===n)continue t;s[i]=r[i]}return function(t,e){var i,n={};return A(t,(function(t,o){G(t)?null!=(i=t(e))&&(n[o]=i):n[o]=t})),n}(s,Nt(e))}(i),n.method=p(n.method),n.paramSerializer=q(n.paramSerializer)?h.get(n.paramSerializer):n.paramSerializer,r.$$incOutstandingRequestCount("$http");var l=[],y=[],b=u.resolve(n);return A(_,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&y.push(t.response,t.responseError)})),b=(b=x(b,l)).then((function(i){var n=i.headers,o=Ni(i.data,qi(n),void 0,i.transformRequest);j(o)&&A(n,(function(t,e){"content-type"===m(e)&&delete n[e]}));j(i.withCredentials)&&!j(t.withCredentials)&&(i.withCredentials=t.withCredentials);return function(i,n){var o,r,l=u.defer(),h=l.promise,p=i.headers,_="jsonp"===m(i.method),y=i.url;_?y=d.getTrustedResourceUrl(y):q(y)||(y=d.valueOf(y));y=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(y,i.paramSerializer(i.params)),_&&(y=function(t,e){var i=t.split("?");if(i.length>2)throw Vi("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return A(At(i[1]),(function(i,n){if("JSON_CALLBACK"===i)throw Vi("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(n===e)throw Vi("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(y,i.jsonpCallbackParam));g.pendingRequests.push(i),h.then(C,C),!i.cache&&!t.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(o=D(i.cache)?i.cache:D(t.cache)?t.cache:f);o&&(R(r=o.get(y))?K(r)?r.then(B,B):W(r)?w(r[1],r[0],Nt(r[2]),r[3],r[4]):w(r,200,{},"OK","complete"):o.put(y,h));if(j(r)){var b=v(i.url)?a()[i.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(p[i.xsrfHeaderName||t.xsrfHeaderName]=b),s(i.method,y,n,$,p,i.timeout,i.withCredentials,i.responseType,x(i.eventHandlers),x(i.uploadEventHandlers))}return h;function x(t){if(t){var i={};return A(t,(function(t,n){i[n]=function(i){function n(){t(i)}e?c.$applyAsync(n):c.$$phase?n():c.$apply(n)}})),i}}function $(t,i,n,r,s){function a(){w(i,t,n,r,s)}o&&(Ui(t)?o.put(y,[t,i,Oi(n),r,s]):o.remove(y)),e?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function w(t,e,n,o,r){(Ui(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:qi(n),config:i,statusText:o,xhrStatus:r})}function B(t){w(t.data,t.status,Nt(t.headers()),t.statusText,t.xhrStatus)}function C(){var t=g.pendingRequests.indexOf(i);-1!==t&&g.pendingRequests.splice(t,1)}}(i,o).then($,$)})),b=(b=x(b,y)).finally((function(){r.$$completeOutstandingRequest(I,"$http")}));function x(t,e){for(var i=0,n=e.length;i<n;){var o=e[i++],r=e[i++];t=t.then(o,r)}return e.length=0,t}function $(t){var e=M({},t);return e.data=Ni(t.data,t.headers,t.status,n.transformResponse),Ui(t.status)?e:u.reject(e)}}return g.pendingRequests=[],function(t){A(arguments,(function(t){g[t]=function(e,i){return g(M({},i||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){A(arguments,(function(t){g[t]=function(e,i,n){return g(M({},n||{},{method:t,url:e,data:i}))}}))}("post","put","patch"),g.defaults=t,g}]}function Hi(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Gi(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,i,n){return function(t,e,i,n,o){return function(o,s,a,l,c,u,h,p,d,f){if(s=s||t.url(),"jsonp"===m(o))var _=n.createCallback(s),y=r(s,_,(function(t,e){var i=200===t&&n.getResponse(_);C(l,t,i,"",e,"complete"),n.removeCallback(_)}));else{var v=e(o,s),g=!1;v.open(o,s,!0),A(c,(function(t,e){R(t)&&v.setRequestHeader(e,t)})),v.onload=function(){var t=v.statusText||"",e="response"in v?v.response:v.responseText,i=1223===v.status?204:v.status;0===i&&(i=e?200:"file"===ho(s).protocol?404:0),C(l,i,e,v.getAllResponseHeaders(),t,"complete")};var b=function(){C(l,-1,null,null,"","error")},x=function(){C(l,-1,null,null,"",g?"timeout":"abort")},$=function(){C(l,-1,null,null,"","timeout")};if(v.onerror=b,v.ontimeout=$,v.onabort=x,A(d,(function(t,e){v.addEventListener(e,t)})),A(f,(function(t,e){v.upload.addEventListener(e,t)})),h&&(v.withCredentials=!0),p)try{v.responseType=p}catch(S){if("json"!==p)throw S}v.send(j(a)?null:a)}if(u>0)var w=i((function(){B("timeout")}),u);else K(u)&&u.then((function(){B(R(u.$$timeoutId)?"timeout":"abort")}));function B(t){g="timeout"===t,y&&y(),v&&v.abort()}function C(t,e,n,o,r,s){R(w)&&i.cancel(w),y=v=null,t(e,n,o,r,s)}};function r(t,e,i){t=t.replace("JSON_CALLBACK",e);var r=o.createElement("script"),s=null;return r.type="text/javascript",r.src=t,r.async=!0,s=function(t){r.removeEventListener("load",s),r.removeEventListener("error",s),o.body.removeChild(r),r=null;var a=-1,l="unknown";t&&("load"!==t.type||n.wasCalled(e)||(t={type:"error"}),l=t.type,a="error"===t.type?404:200),i&&i(a,l)},r.addEventListener("load",s),r.addEventListener("error",s),o.body.appendChild(r),s}}(t,n,t.defer,e,i[0])}]}var Yi=b.$interpolateMinErr=o("$interpolate");function Ji(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(i,n,o){var r=t.length,s=e.length,a=new RegExp(t.replace(/./g,c),"g"),l=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function u(i){return i.replace(a,t).replace(l,e)}function h(t,e,i,n){var o=t.$watch((function(t){return o(),n(t)}),e,i);return o}function m(a,l,c,m){var p=c===o.URL||c===o.MEDIA_URL;if(!a.length||-1===a.indexOf(t)){if(l)return;var d=u(a);p&&(d=o.getTrusted(c,d));var f=V(d);return f.exp=a,f.expressions=[],f.$$watchDelegate=h,f}m=!!m;for(var _,y,v,g,b,x=0,$=[],A=a.length,w=[],B=[];x<A;){if(-1===(_=a.indexOf(t,x))||-1===(y=a.indexOf(e,_+r))){x!==A&&w.push(u(a.substring(x)));break}x!==_&&w.push(u(a.substring(x,_))),g=a.substring(_+r,y),$.push(g),x=y+s,B.push(w.length),w.push("")}b=1===w.length&&1===B.length;var C=p&&b?void 0:function(t){try{return t=c&&!p?o.getTrusted(c,t):o.valueOf(t),m&&!R(t)?t:Ot(t)}catch(e){n(Yi.interr(a,e))}};if(v=$.map((function(t){return i(t,C)})),!l||$.length){var S=function(t){for(var e=0,i=$.length;e<i;e++){if(m&&j(t[e]))return;w[B[e]]=t[e]}return p?o.getTrusted(c,b?w[0]:w.join("")):(c&&w.length>1&&Yi.throwNoconcat(a),w.join(""))};return M((function(t){var e=0,i=$.length,o=new Array(i);try{for(;e<i;e++)o[e]=v[e](t);return S(o)}catch(r){n(Yi.interr(a,r))}}),{exp:a,expressions:$,$$watchDelegate:function(t,e){var i;return t.$watchGroup(v,(function(n,o){var r=S(n);e.call(this,r,n!==o?i:r,t),i=r}))}})}}return m.startSymbol=function(){return t},m.endSymbol=function(){return e},m}]}Yi.throwNoconcat=function(t){throw Yi("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Yi.interr=function(t,e){return Yi("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Zi=o("$interval");function Xi(){this.$get=["$$intervalFactory","$window",function(t,e){var i={},n=function(t){e.clearInterval(t),delete i[t]},o=t((function(t,n,o){var r=e.setInterval(t,n);return i[r]=o,r}),n);return o.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Zi("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!i.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,o=i[e];return qn(o.promise),o.reject("canceled"),n(e),!0},o}]}function Ki(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,i,n){return function(o,r){return function(s,a,l,c){var u=arguments.length>4,h=u?mt(arguments,4):[],m=0,p=R(c)&&!c,d=(p?i:e).defer(),f=d.promise;function _(){u?s.apply(null,h):s(m)}function y(){p?t.defer(_):n.$evalAsync(_),d.notify(m++),l>0&&m>=l&&(d.resolve(m),r(f.$$intervalId)),p||n.$apply()}return l=R(l)?l:0,f.$$intervalId=o(y,a,d,p),f}}}]}var Qi=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(i){var n="_"+(t.$$counter++).toString(36),o="angular.callbacks."+n,r=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(n);return e[o]=t[n]=r,o},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(i){var n=e[i];delete t[n.id],delete e[i]}}}},tn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,en={http:80,https:443,ftp:21},nn=o("$location");function on(t,e,i){var n,o=(n=[],A(e,(function(t,e){W(t)?A(t,(function(t){n.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})):n.push(Bt(e,!0)+(!0===t?"":"="+Bt(t,!0)))})),n.length?n.join("&"):""),r=i?"#"+wt(i):"";return function(t){for(var e=t.split("/"),i=e.length;i--;)e[i]=wt(e[i].replace(/%2F/g,"/"));return e.join("/")}(t)+(o?"?"+o:"")+r}function rn(t,e){var i=ho(t);e.$$protocol=i.protocol,e.$$host=i.hostname,e.$$port=P(i.port)||en[i.protocol]||null}var sn=/^\s*[\\/]{2,}/;function an(t,e,i){if(sn.test(t))throw nn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var o=ho(t),r=n&&"/"===o.pathname.charAt(0)?o.pathname.substring(1):o.pathname;e.$$path=function(t,e){for(var i=t.split("/"),n=i.length;n--;)i[n]=decodeURIComponent(i[n]),e&&(i[n]=i[n].replace(/\//g,"%2F"));return i.join("/")}(r,i),e.$$search=At(o.search),e.$$hash=decodeURIComponent(o.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ln(t,e){return t.slice(0,e.length)===e}function cn(t,e){if(ln(e,t))return e.substr(t.length)}function un(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function hn(t,e,i){this.$$html5=!0,i=i||"",rn(t,this),this.$$parse=function(t){var i=cn(e,t);if(!q(i))throw nn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);an(i,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(n,o){return o&&"#"===o[0]?(this.hash(o.slice(1)),!0):(R(r=cn(t,n))?(s=r,a=i&&R(r=cn(i,r))?e+(cn("/",r)||r):t+s):R(r=cn(e,n))?a=e+r:e===n+"/"&&(a=e),a&&this.$$parse(a),!!a);var r,s,a}}function mn(t,e,i){rn(t,this),this.$$parse=function(n){var o,r=cn(t,n)||cn(e,n);j(r)||"#"!==r.charAt(0)?this.$$html5?o=r:(o="",j(r)&&(t=n,this.replace())):j(o=cn(i,r))&&(o=r),an(o,this,!1),this.$$path=function(t,e,i){var n,o=/^\/[A-Z]:(\/.*)/;ln(e,i)&&(e=e.replace(i,""));if(o.exec(e))return t;return(n=o.exec(t))?n[1]:t}(this.$$path,o,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?i+e:"")},this.$$parseLinkUrl=function(e,i){return un(t)===un(e)&&(this.$$parse(e),!0)}}function pn(t,e,i){this.$$html5=!0,mn.apply(this,arguments),this.$$parseLinkUrl=function(n,o){return o&&"#"===o[0]?(this.hash(o.slice(1)),!0):(t===un(n)?r=n:(s=cn(e,n))?r=t+i+s:e===n+"/"&&(r=e),r&&this.$$parse(r),!!r);var r,s},this.$$normalizeUrl=function(e){return t+i+e}}var dn={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=on(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:fn("$$absUrl"),url:function(t){if(j(t))return this.$$url;var e=tn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:fn("$$protocol"),host:fn("$$host"),port:fn("$$port"),path:_n("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(q(t)||N(t))t=t.toString(),this.$$search=At(t);else{if(!D(t))throw nn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");A(t=st(t,{}),(function(e,i){null==e&&delete t[i]})),this.$$search=t}break;default:j(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:_n("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function fn(t){return function(){return this[t]}}function _n(t,e){return function(i){return j(i)?this[t]:(this[t]=e(i),this.$$compose(),this)}}function yn(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return R(e)?(t=e,this):t},this.html5Mode=function(t){return X(t)?(e.enabled=t,this):D(t)?(X(t.enabled)&&(e.enabled=t.enabled),X(t.requireBase)&&(e.requireBase=t.requireBase),(X(t.rewriteLinks)||q(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(i,n,o,r,a){var l,c,u,h,m=n.baseHref(),p=n.url();if(e.enabled){if(!m&&e.requireBase)throw nn("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(h=p).substring(0,h.indexOf("/",h.indexOf("//")+2))+(m||"/"),c=o.history?hn:pn}else u=un(p),c=mn;var d=function(t){return t.substr(0,un(t).lastIndexOf("/")+1)}(u);(l=new c(u,d,"#"+t)).$$parseLinkUrl(p,p),l.$$state=n.state();var f=/^\s*(javascript|mailto):/i;function _(t,e,i){var o=l.url(),r=l.$$state;try{n.url(t,e,i),l.$$state=n.state()}catch(s){throw l.url(o),l.$$state=r,s}}r.on("click",(function(t){var o=e.rewriteLinks;if(o&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var a=s(t.target);"a"!==nt(a[0]);)if(a[0]===r[0]||!(a=a.parent())[0])return;if(!q(o)||!j(a.attr(o))){var c=a.prop("href"),u=a.attr("href")||a.attr("xlink:href");D(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ho(c.animVal).href),f.test(c)||!c||a.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(c,u)&&(t.preventDefault(),l.absUrl()!==n.url()&&i.$apply())}}})),l.absUrl()!==p&&n.url(l.absUrl(),!0);var y=!0;return n.onUrlChange((function(t,e){ln(t,d)?(i.$evalAsync((function(){var n,o=l.absUrl(),r=l.$$state;l.$$parse(t),l.$$state=e,n=i.$broadcast("$locationChangeStart",t,o,e,r).defaultPrevented,l.absUrl()===t&&(n?(l.$$parse(o),l.$$state=r,_(o,!1,r)):(y=!1,v(o,r)))})),i.$$phase||i.$digest()):a.location.href=t})),i.$watch((function(){if(y||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=n.url(),e=l.absUrl(),r=n.state(),s=l.$$replace,a=!((c=t)===(u=e)||ho(c).href===ho(u).href)||l.$$html5&&o.history&&r!==l.$$state;(y||a)&&(y=!1,i.$evalAsync((function(){var e=l.absUrl(),n=i.$broadcast("$locationChangeStart",e,t,l.$$state,r).defaultPrevented;l.absUrl()===e&&(n?(l.$$parse(t),l.$$state=r):(a&&_(e,s,r===l.$$state?null:l.$$state),v(t,r)))})))}var c,u;l.$$replace=!1})),l;function v(t,e){i.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function vn(){var t=!0,e=this;this.debugEnabled=function(e){return R(e)?(t=e,this):t},this.$get=["$window",function(i){var n,o=r||/\bEdge\//.test(i.navigator&&i.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(n=a("debug"),function(){t&&n.apply(e,arguments)})};function s(t){return H(t)&&(t.stack&&o?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function a(t){var e=i.console||{},n=e[t]||e.log||I;return function(){var t=[];return A(arguments,(function(e){t.push(s(e))})),Function.prototype.apply.call(n,e,t)}}}]}A([pn,mn,hn],(function(t){t.prototype=Object.create(dn),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==hn||!this.$$html5)throw nn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=j(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var gn=o("$parse"),bn={}.constructor.prototype.valueOf;function xn(t){return t+""}var $n=Dt();A("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){$n[t]=!0}));var An={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wn=function(t){this.options=t};wn.prototype={constructor:wn,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var i=e+this.peek(),n=i+this.peek(2),o=$n[e],r=$n[i],s=$n[n];if(o||r||s){var a=s?n:r?i:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var i=t.charCodeAt(0),n=e.charCodeAt(0);return i>=55296&&i<=56319&&n>=56320&&n<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,i){i=i||this.index;var n=R(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,i)+"]":" "+i;throw gn("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var i=m(this.text.charAt(this.index));if("."===i||this.isNumber(i))t+=i;else{var n=this.peek();if("e"===i&&this.isExpOperator(n))t+=i;else if(this.isExpOperator(i)&&n&&this.isNumber(n)&&"e"===t.charAt(t.length-1))t+=i;else{if(!this.isExpOperator(i)||n&&this.isNumber(n)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var i="",n=t,o=!1;this.index<this.text.length;){var r=this.text.charAt(this.index);if(n+=r,o){if("u"===r){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,i+=String.fromCharCode(parseInt(s,16))}else{i+=An[r]||r}o=!1}else if("\\"===r)o=!0;else{if(r===t)return this.index++,void this.tokens.push({index:e,text:n,constant:!0,value:i});i+=r}this.index++}this.throwError("Unterminated quote",e)}};var Bn=function(t,e){this.lexer=t,this.options=e};function Cn(t,e){return void 0!==t?t:e}function Sn(t,e){return void 0===t?e:void 0===e?t:t+e}Bn.Program="Program",Bn.ExpressionStatement="ExpressionStatement",Bn.AssignmentExpression="AssignmentExpression",Bn.ConditionalExpression="ConditionalExpression",Bn.LogicalExpression="LogicalExpression",Bn.BinaryExpression="BinaryExpression",Bn.UnaryExpression="UnaryExpression",Bn.CallExpression="CallExpression",Bn.MemberExpression="MemberExpression",Bn.Identifier="Identifier",Bn.Literal="Literal",Bn.ArrayExpression="ArrayExpression",Bn.Property="Property",Bn.ObjectExpression="ObjectExpression",Bn.ThisExpression="ThisExpression",Bn.LocalsExpression="LocalsExpression",Bn.NGValueParameter="NGValueParameter",Bn.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Bn.Program,body:t}},expressionStatement:function(){return{type:Bn.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Tn(t))throw gn("lval","Trying to assign a value to a non l-value");t={type:Bn.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,i=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Bn.ConditionalExpression,test:i,alternate:t,consequent:e}):i},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Bn.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Bn.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Bn.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Bn.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=st(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Bn.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Bn.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Bn.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Bn.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],i={type:Bn.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return i},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Bn.Identifier,name:t.text}},constant:function(){return{type:Bn.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Bn.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Bn.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Bn.ObjectExpression,properties:e}},throwError:function(t,e){throw gn("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw gn("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw gn("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,i,n){return this.peekAhead(0,t,e,i,n)},peekAhead:function(t,e,i,n,o){if(this.tokens.length>t){var r=this.tokens[t],s=r.text;if(s===e||s===i||s===n||s===o||!e&&!i&&!n&&!o)return r}return!1},expect:function(t,e,i,n){var o=this.peek(t,e,i,n);return!!o&&(this.tokens.shift(),o)},selfReferential:{this:{type:Bn.ThisExpression},$locals:{type:Bn.LocalsExpression}}};function En(t,e,i){var n,o,r,s=t.isPure=function(t,e){switch(t.type){case Bn.MemberExpression:if(t.computed)return!1;break;case Bn.UnaryExpression:return 1;case Bn.BinaryExpression:return"+"!==t.operator&&1;case Bn.CallExpression:return!1}return void 0===e?2:e}(t,i);switch(t.type){case Bn.Program:n=!0,A(t.body,(function(t){En(t.expression,e,s),n=n&&t.expression.constant})),t.constant=n;break;case Bn.Literal:t.constant=!0,t.toWatch=[];break;case Bn.UnaryExpression:En(t.argument,e,s),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Bn.BinaryExpression:En(t.left,e,s),En(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Bn.LogicalExpression:En(t.left,e,s),En(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Bn.ConditionalExpression:En(t.test,e,s),En(t.alternate,e,s),En(t.consequent,e,s),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Bn.Identifier:t.constant=!1,t.toWatch=[t];break;case Bn.MemberExpression:En(t.object,e,s),t.computed&&En(t.property,e,s),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Bn.CallExpression:r=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),n=r,o=[],A(t.arguments,(function(t){En(t,e,s),n=n&&t.constant,o.push.apply(o,t.toWatch)})),t.constant=n,t.toWatch=r?o:[t];break;case Bn.AssignmentExpression:En(t.left,e,s),En(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Bn.ArrayExpression:n=!0,o=[],A(t.elements,(function(t){En(t,e,s),n=n&&t.constant,o.push.apply(o,t.toWatch)})),t.constant=n,t.toWatch=o;break;case Bn.ObjectExpression:n=!0,o=[],A(t.properties,(function(t){En(t.value,e,s),n=n&&t.value.constant,o.push.apply(o,t.value.toWatch),t.computed&&(En(t.key,e,!1),n=n&&t.key.constant,o.push.apply(o,t.key.toWatch))})),t.constant=n,t.toWatch=o;break;case Bn.ThisExpression:case Bn.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Mn(t){if(1===t.length){var e=t[0].expression,i=e.toWatch;return 1!==i.length||i[0]!==e?i:void 0}}function Tn(t){return t.type===Bn.Identifier||t.type===Bn.MemberExpression}function Pn(t){if(1===t.body.length&&Tn(t.body[0].expression))return{type:Bn.AssignmentExpression,left:t.body[0].expression,right:{type:Bn.NGValueParameter},operator:"="}}function zn(t){this.$filter=t}function Fn(t){this.$filter=t}function In(t,e,i){this.ast=new Bn(t,i),this.astCompiler=i.csp?new Fn(e):new zn(e)}function kn(t){return G(t.valueOf)?t.valueOf():bn.call(t)}function Vn(){var t,e,i=Dt(),n={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){n[t]=e},this.setIdentifierFns=function(i,n){return t=i,e=n,this},this.$get=["$filter",function(o){var r={csp:ct().noUnsafeEval,literals:st(n),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return s.$$getAst=function(t){return new In(new wn(r),o,r).getAst(t).ast},s;function s(t,e){var n,s;switch(typeof t){case"string":if(t=t.trim(),!(n=i[s=t]))n=new In(new wn(r),o,r).parse(t),i[s]=m(n);return p(n,e);case"function":return p(t,e);default:return p(I,e)}}function a(t,e,i){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=kn(t))&&!i)&&(t===e||t!=t&&e!=e)}function l(t,e,i,n,o){var r,s=n.inputs;if(1===s.length){var l=a;return s=s[0],t.$watch((function(t){var e=s(t);return a(e,l,s.isPure)||(r=n(t,void 0,void 0,[e]),l=e&&kn(e)),r}),e,i,o)}for(var c=[],u=[],h=0,m=s.length;h<m;h++)c[h]=a,u[h]=null;return t.$watch((function(t){for(var e=!1,i=0,o=s.length;i<o;i++){var l=s[i](t);(e||(e=!a(l,c[i],s[i].isPure)))&&(u[i]=l,c[i]=l&&kn(l))}return e&&(r=n(t,void 0,void 0,u)),r}),e,i,o)}function c(t,e,i,n,o){var r,s,a=n.literal?u:R,l=n.$$intercepted||n,c=n.$$interceptor||k,h=n.inputs&&!l.inputs;return d.literal=n.literal,d.constant=n.constant,d.inputs=n.inputs,m(d),r=t.$watch(d,e,i,o);function p(){a(s)&&r()}function d(t,e,i,n){return s=h&&n?n[0]:l(t,e,i,n),a(s)&&t.$$postDigest(p),c(s)}}function u(t){var e=!0;return A(t,(function(t){R(t)||(e=!1)})),e}function h(t,e,i,n){var o=t.$watch((function(t){return o(),n(t)}),e,i);return o}function m(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=l),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function i(i){return e(t(i))}return i.$stateful=t.$stateful||e.$stateful,i.$$pure=t.$$pure&&e.$$pure,i}(t.$$interceptor,e),t=t.$$intercepted);var i=!1,n=function(n,o,r,s){var a=i&&s?s[0]:t(n,o,r,s);return e(a)};return n.$$intercepted=t,n.$$interceptor=e,n.literal=t.literal,n.oneTime=t.oneTime,n.constant=t.constant,e.$stateful||(i=!t.inputs,n.inputs=t.inputs?t.inputs:[t],e.$$pure||(n.inputs=n.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),m(n)}}]}function Ln(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,i){return Rn((function(t){e.$evalAsync(t)}),i,t)}],this.errorOnUnhandledRejections=function(e){return R(e)?(t=e,this):t}}function jn(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,i){return Rn((function(t){e.defer(t)}),i,t)}],this.errorOnUnhandledRejections=function(e){return R(e)?(t=e,this):t}}function Rn(t,e,i){var n=o("$q",TypeError),r=0,s=[];function a(){return new l}function l(){var t=this.promise=new c;this.resolve=function(e){m(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){_(t,e)}}function c(){this.$$state={status:0}}function u(){for(;!r&&s.length;){var t=s.shift();if(!Dn(t)){On(t);var i="Possibly unhandled rejection: "+Ut(t.value);H(t.value)?e(t.value,i):e(i)}}}function h(n){!i||n.pending||2!==n.status||Dn(n)||(0===r&&0===s.length&&t(u),s.push(n)),!n.processScheduled&&n.pending&&(n.processScheduled=!0,++r,t((function(){!function(n){var o,s,a;a=n.pending,n.processScheduled=!1,n.pending=void 0;try{for(var l=0,c=a.length;l<c;++l){On(n),s=a[l][0],o=a[l][n.status];try{G(o)?m(s,o(n.value)):1===n.status?m(s,n.value):d(s,n.value)}catch(h){d(s,h),h&&!0===h.$$passToExceptionHandler&&e(h)}}}finally{--r,i&&0===r&&t(u)}}(n)})))}function m(t,e){t.$$state.status||(e===t?f(t,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):p(t,e))}function p(t,e){var i,n=!1;try{(D(e)||G(e))&&(i=e.then),G(i)?(t.$$state.status=-1,i.call(e,(function(e){if(n)return;n=!0,p(t,e)}),o,(function(e){_(t,e)}))):(t.$$state.value=e,t.$$state.status=1,h(t.$$state))}catch(r){o(r)}function o(e){n||(n=!0,f(t,e))}}function d(t,e){t.$$state.status||f(t,e)}function f(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function _(i,n){var o=i.$$state.pending;i.$$state.status<=0&&o&&o.length&&t((function(){for(var t,i,r=0,s=o.length;r<s;r++){i=o[r][0],t=o[r][3];try{_(i,G(t)?t(n):n)}catch(a){e(a)}}}))}function y(t){var e=new c;return d(e,t),e}function v(t,e,i){var n=null;try{G(i)&&(n=i())}catch(o){return y(o)}return K(n)?n.then((function(){return e(t)}),y):e(t)}function g(t,e,i,n){var o=new c;return m(o,t),o.then(e,i,n)}M(c.prototype,{then:function(t,e,i){if(j(t)&&j(e)&&j(i))return this;var n=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,t,e,i]),this.$$state.status>0&&h(this.$$state),n},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return v(e,b,t)}),(function(e){return v(e,y,t)}),e)}});var b=g;function x(t){if(!G(t))throw n("norslvr","Expected resolverFn, got '{0}'",t);var e=new c;return t((function(t){m(e,t)}),(function(t){d(e,t)})),e}return x.prototype=c.prototype,x.defer=a,x.reject=y,x.when=g,x.resolve=b,x.all=function(t){var e=new c,i=0,n=W(t)?[]:{};return A(t,(function(t,o){i++,g(t).then((function(t){n[o]=t,--i||m(e,n)}),(function(t){d(e,t)}))})),0===i&&m(e,n),e},x.race=function(t){var e=a();return A(t,(function(t){g(t).then(e.resolve,e.reject)})),e.promise},x}function Dn(t){return!!t.pur}function On(t){t.pur=!0}function qn(t){t.$$state&&On(t.$$state)}function Nn(){this.$get=["$window","$timeout",function(t,e){var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,o=!!i,r=o?function(t){var e=i(t);return function(){n(e)}}:function(t){var i=e(t,16.66,!1);return function(){e.cancel(i)}};return r.supported=o,r}]}function Un(){var t=10,e=o("$rootScope"),i=null,n=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(o,s,a){function l(t){t.currentScope.$$destroyed=!0}function c(t){9===r&&(t.$$childHead&&c(t.$$childHead),t.$$nextSibling&&c(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function u(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var i;return e=e||this,t?(i=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),i=new this.$$ChildScope),i.$parent=e,i.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=i,e.$$childTail=i):e.$$childHead=e.$$childTail=i,(t||e!==this)&&i.$on("$destroy",l),i},$watch:function(t,e,n,o){var r=s(t),a=G(e)?e:I;if(r.$$watchDelegate)return r.$$watchDelegate(this,a,n,r,t);var l=this,c=l.$$watchers,u={fn:a,last:x,get:r,exp:o||t,eq:!!n};return i=null,c||((c=l.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(u),c.$$digestWatchIndex++,g(this,1),function(){var t=rt(c,u);t>=0&&(g(l,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),i=null}},$watchGroup:function(t,e){var i=new Array(t.length),n=new Array(t.length),o=[],r=this,s=!1,a=!0;if(!t.length){var l=!0;return r.$evalAsync((function(){l&&e(n,n,r)})),function(){l=!1}}if(1===t.length)return this.$watch(t[0],(function(t,o,r){n[0]=t,i[0]=o,e(n,t===o?n:i,r)}));function c(){s=!1;try{a?(a=!1,e(n,n,r)):e(n,i,r)}finally{for(var o=0;o<t.length;o++)i[o]=n[o]}}return A(t,(function(t,e){var i=r.$watch(t,(function(t){n[e]=t,s||(s=!0,r.$evalAsync(c))}));o.push(i)})),function(){for(;o.length;)o.shift()()}},$watchCollection:function(t,e){f.$$pure=s(t).literal,f.$stateful=!f.$$pure;var i,n,o,r=this,a=e.length>1,l=0,c=s(t,f),u=[],m={},p=!0,d=0;function f(t){var e,o,r,s;if(!j(i=t)){if(D(i))if($(i)){n!==u&&(d=(n=u).length=0,l++),e=i.length,d!==e&&(l++,n.length=d=e);for(var a=0;a<e;a++)s=n[a],r=i[a],s!=s&&r!=r||s===r||(l++,n[a]=r)}else{for(o in n!==m&&(n=m={},d=0,l++),e=0,i)h.call(i,o)&&(e++,r=i[o],s=n[o],o in n?s!=s&&r!=r||s===r||(l++,n[o]=r):(d++,n[o]=r,l++));if(d>e)for(o in l++,n)h.call(i,o)||(d--,delete n[o])}else n!==i&&(n=i,l++);return l}}return this.$watch(c,(function(){if(p?(p=!1,e(i,i,r)):e(i,o,r),a)if(D(i))if($(i)){o=new Array(i.length);for(var t=0;t<i.length;t++)o[t]=i[t]}else for(var n in o={},i)h.call(i,n)&&(o[n]=i[n]);else o=i}))},$digest:function(){var r,s,l,c,u,h,f,g,b,$=t,A=p.length?m:this,B=[];y("$digest"),a.$$checkUrlChange(),this===m&&null!==n&&(a.defer.cancel(n),w()),i=null;do{u=!1,f=A;for(var C=0;C<p.length;C++){try{(0,(b=p[C]).fn)(b.scope,b.locals)}catch(S){o(S)}i=null}p.length=0;t:do{if(c=!f.$$suspended&&f.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(r=c[c.$$digestWatchIndex])if((s=(0,r.get)(f))===(l=r.last)||(r.eq?lt(s,l):z(s)&&z(l))){if(r===i){u=!1;break t}}else u=!0,i=r,r.last=r.eq?st(s,null):s,(0,r.fn)(s,l===x?s:l,f),$<5&&(B[g=4-$]||(B[g]=[]),B[g].push({msg:G(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:s,oldVal:l}))}catch(S){o(S)}if(!(h=!f.$$suspended&&f.$$watchersCount&&f.$$childHead||f!==A&&f.$$nextSibling))for(;f!==A&&!(h=f.$$nextSibling);)f=f.$parent}while(f=h);if((u||p.length)&&!$--)throw v(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,B)}while(u||p.length);for(v();_<d.length;)try{d[_++]()}catch(S){o(S)}d.length=_=0,a.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&a.$$applicationDestroyed(),g(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,c(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){m.$$phase||p.length||a.defer((function(){p.length&&m.$digest()}),null,"$evalAsync"),p.push({scope:this,fn:s(t),locals:e})},$$postDigest:function(t){d.push(t)},$apply:function(t){try{y("$apply");try{return this.$eval(t)}finally{v()}}catch(e){o(e)}finally{try{m.$digest()}catch(e){throw o(e),e}}},$applyAsync:function(t){var e=this;t&&f.push((function(){e.$eval(t)})),t=s(t),null===n&&(n=a.defer((function(){m.$apply(w)}),null,"$applyAsync"))},$on:function(t,e){var i=this.$$listeners[t];i||(this.$$listeners[t]=i=[]),i.push(e);var n=this;do{n.$$listenerCount[t]||(n.$$listenerCount[t]=0),n.$$listenerCount[t]++}while(n=n.$parent);var o=this;return function(){var n=i.indexOf(e);-1!==n&&(delete i[n],b(o,1,t))}},$emit:function(t,e){var i,n,r,s=[],a=this,l=!1,c={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ht([c],arguments,1);do{for(i=a.$$listeners[t]||s,c.currentScope=a,n=0,r=i.length;n<r;n++)if(i[n])try{i[n].apply(null,u)}catch(h){o(h)}else i.splice(n,1),n--,r--;if(l)break;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var i=this,n=i,r=i,s={name:t,targetScope:i,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!i.$$listenerCount[t])return s;for(var a,l,c,u=ht([s],arguments,1);n=r;){for(s.currentScope=n,l=0,c=(a=n.$$listeners[t]||[]).length;l<c;l++)if(a[l])try{a[l].apply(null,u)}catch(h){o(h)}else a.splice(l,1),l--,c--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==i&&n.$$nextSibling))for(;n!==i&&!(r=n.$$nextSibling);)n=n.$parent}return s.currentScope=null,s}};var m=new u,p=m.$$asyncQueue=[],d=m.$$postDigestQueue=[],f=m.$$applyAsyncQueue=[],_=0;return m;function y(t){if(m.$$phase)throw e("inprog","{0} already in progress",m.$$phase);m.$$phase=t}function v(){m.$$phase=null}function g(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function b(t,e,i){do{t.$$listenerCount[i]-=e,0===t.$$listenerCount[i]&&delete t.$$listenerCount[i]}while(t=t.$parent)}function x(){}function w(){for(;f.length;)try{f.shift()()}catch(t){o(t)}n=null}}]}function Wn(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return R(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return R(t)?(e=t,this):e},this.$get=function(){return function(i,n){var o=n?e:t,r=ho(i&&i.trim()).href;return""===r||r.match(o)?i:"unsafe:"+r}}}zn.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},En(t,e.$filter);var i,n="";if(this.stage="assign",i=Pn(t)){this.state.computing="assign";var o=this.nextId();this.recurse(i,o),this.return_(o),n="fn.assign="+this.generateFunction("assign","s,v,l")}var r=Mn(t.body);e.stage="inputs",A(r,(function(t,i){var n="fn"+i;e.state[n]={vars:[],body:[],own:{}},e.state.computing=n;var o=e.nextId();e.recurse(t,o),e.return_(o),e.state.inputs.push({name:n,isPure:t.isPure}),t.watchId=i})),this.state.computing="fn",this.stage="main",this.recurse(t);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,xn,Cn,Sn);return this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,i=this;return A(e,(function(e){t.push("var "+e.name+"="+i.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return A(this.state.filters,(function(i,n){t.push(i+"=$filter("+e.escape(n)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,i,n,o,r){var s,a,l,c,u,h=this;if(n=n||I,!r&&R(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,i,n,o,!0));switch(t.type){case Bn.Program:A(t.body,(function(e,i){h.recurse(e.expression,void 0,void 0,(function(t){a=t})),i!==t.body.length-1?h.current().body.push(a,";"):h.return_(a)}));break;case Bn.Literal:c=this.escape(t.value),this.assign(e,c),n(e||c);break;case Bn.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){a=t})),c=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,c),n(c);break;case Bn.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){s=t})),this.recurse(t.right,void 0,void 0,(function(t){a=t})),c="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,c),n(c);break;case Bn.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),n(e);break;case Bn.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),n(e);break;case Bn.Identifier:e=e||this.nextId(),i&&(i.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),i.computed=!1,i.name=t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),(function(){h.if_("inputs"===h.stage||"s",(function(){o&&1!==o&&h.if_(h.isNull(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))}))}),e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),n(e);break;case Bn.MemberExpression:s=i&&(i.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,s,void 0,(function(){h.if_(h.notNull(s),(function(){t.computed?(a=h.nextId(),h.recurse(t.property,a),h.getStringValue(a),o&&1!==o&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),c=h.computedMember(s,a),h.assign(e,c),i&&(i.computed=!0,i.name=a)):(o&&1!==o&&h.if_(h.isNull(h.nonComputedMember(s,t.property.name)),h.lazyAssign(h.nonComputedMember(s,t.property.name),"{}")),c=h.nonComputedMember(s,t.property.name),h.assign(e,c),i&&(i.computed=!1,i.name=t.property.name))}),(function(){h.assign(e,"undefined")})),n(e)}),!!o);break;case Bn.CallExpression:e=e||this.nextId(),t.filter?(a=h.filter(t.callee.name),l=[],A(t.arguments,(function(t){var e=h.nextId();h.recurse(t,e),l.push(e)})),c=a+"("+l.join(",")+")",h.assign(e,c),n(e)):(a=h.nextId(),s={},l=[],h.recurse(t.callee,a,s,(function(){h.if_(h.notNull(a),(function(){A(t.arguments,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c=s.name?h.member(s.context,s.name,s.computed)+"("+l.join(",")+")":a+"("+l.join(",")+")",h.assign(e,c)}),(function(){h.assign(e,"undefined")})),n(e)})));break;case Bn.AssignmentExpression:a=this.nextId(),s={},this.recurse(t.left,void 0,s,(function(){h.if_(h.notNull(s.context),(function(){h.recurse(t.right,a),c=h.member(s.context,s.name,s.computed)+t.operator+a,h.assign(e,c),n(e||c)}))}),1);break;case Bn.ArrayExpression:l=[],A(t.elements,(function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(t)}))})),c="["+l.join(",")+"]",this.assign(e,c),n(e||c);break;case Bn.ObjectExpression:l=[],u=!1,A(t.properties,(function(t){t.computed&&(u=!0)})),u?(e=e||this.nextId(),this.assign(e,"{}"),A(t.properties,(function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===Bn.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)}))):(A(t.properties,(function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,(function(t){l.push(h.escape(e.key.type===Bn.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),c="{"+l.join(",")+"}",this.assign(e,c)),n(e||c);break;case Bn.ThisExpression:this.assign(e,"s"),n(e||"s");break;case Bn.LocalsExpression:this.assign(e,"l"),n(e||"l");break;case Bn.NGValueParameter:this.assign(e,"v"),n(e||"v")}},getHasOwnProperty:function(t,e){var i=t+"."+e,n=this.current().own;return n.hasOwnProperty(i)||(n[i]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[i]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,i){if(!0===t)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),i&&(n.push("else{"),i(),n.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,i){return i?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,i,n,o,r){var s=this;return function(){s.recurse(t,e,i,n,o,r)}},lazyAssign:function(t,e){var i=this;return function(){i.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(q(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(N(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw gn("esc","IMPOSSIBLE")},nextId:function(t,e){var i="v"+this.state.nextId++;return t||this.current().vars.push(i+(e?"="+e:"")),i},current:function(){return this.state[this.state.computing]}},Fn.prototype={compile:function(t){var e,i,n=this;En(t,n.$filter),(e=Pn(t))&&(i=this.recurse(e));var o,r=Mn(t.body);r&&(o=[],A(r,(function(t,e){var i=n.recurse(t);i.isPure=t.isPure,t.input=i,o.push(i),t.watchId=e})));var s=[];A(t.body,(function(t){s.push(n.recurse(t.expression))}));var a=0===t.body.length?I:1===t.body.length?s[0]:function(t,e){var i;return A(s,(function(n){i=n(t,e)})),i};return i&&(a.assign=function(t,e,n){return i(t,n,e)}),o&&(a.inputs=o),a},recurse:function(t,e,i){var n,o,r,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Bn.Literal:return this.value(t.value,e);case Bn.UnaryExpression:return o=this.recurse(t.argument),this["unary"+t.operator](o,e);case Bn.BinaryExpression:case Bn.LogicalExpression:return n=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](n,o,e);case Bn.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Bn.Identifier:return s.identifier(t.name,e,i);case Bn.MemberExpression:return n=this.recurse(t.object,!1,!!i),t.computed||(o=t.property.name),t.computed&&(o=this.recurse(t.property)),t.computed?this.computedMember(n,o,e,i):this.nonComputedMember(n,o,e,i);case Bn.CallExpression:return r=[],A(t.arguments,(function(t){r.push(s.recurse(t))})),t.filter&&(o=this.$filter(t.callee.name)),t.filter||(o=this.recurse(t.callee,!0)),t.filter?function(t,i,n,s){for(var a=[],l=0;l<r.length;++l)a.push(r[l](t,i,n,s));var c=o.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:c}:c}:function(t,i,n,s){var a,l=o(t,i,n,s);if(null!=l.value){for(var c=[],u=0;u<r.length;++u)c.push(r[u](t,i,n,s));a=l.value.apply(l.context,c)}return e?{value:a}:a};case Bn.AssignmentExpression:return n=this.recurse(t.left,!0,1),o=this.recurse(t.right),function(t,i,r,s){var a=n(t,i,r,s),l=o(t,i,r,s);return a.context[a.name]=l,e?{value:l}:l};case Bn.ArrayExpression:return r=[],A(t.elements,(function(t){r.push(s.recurse(t))})),function(t,i,n,o){for(var s=[],a=0;a<r.length;++a)s.push(r[a](t,i,n,o));return e?{value:s}:s};case Bn.ObjectExpression:return r=[],A(t.properties,(function(t){t.computed?r.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):r.push({key:t.key.type===Bn.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})})),function(t,i,n,o){for(var s={},a=0;a<r.length;++a)r[a].computed?s[r[a].key(t,i,n,o)]=r[a].value(t,i,n,o):s[r[a].key]=r[a].value(t,i,n,o);return e?{value:s}:s};case Bn.ThisExpression:return function(t){return e?{value:t}:t};case Bn.LocalsExpression:return function(t,i){return e?{value:i}:i};case Bn.NGValueParameter:return function(t,i,n){return e?{value:n}:n}}},"unary+":function(t,e){return function(i,n,o,r){var s=t(i,n,o,r);return s=R(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(i,n,o,r){var s=t(i,n,o,r);return s=R(s)?-s:-0,e?{value:s}:s}},"unary!":function(t,e){return function(i,n,o,r){var s=!t(i,n,o,r);return e?{value:s}:s}},"binary+":function(t,e,i){return function(n,o,r,s){var a=Sn(t(n,o,r,s),e(n,o,r,s));return i?{value:a}:a}},"binary-":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s),l=e(n,o,r,s),c=(R(a)?a:0)-(R(l)?l:0);return i?{value:c}:c}},"binary*":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)*e(n,o,r,s);return i?{value:a}:a}},"binary/":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)/e(n,o,r,s);return i?{value:a}:a}},"binary%":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)%e(n,o,r,s);return i?{value:a}:a}},"binary===":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)===e(n,o,r,s);return i?{value:a}:a}},"binary!==":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)!==e(n,o,r,s);return i?{value:a}:a}},"binary==":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)==e(n,o,r,s);return i?{value:a}:a}},"binary!=":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)!=e(n,o,r,s);return i?{value:a}:a}},"binary<":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)<e(n,o,r,s);return i?{value:a}:a}},"binary>":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)>e(n,o,r,s);return i?{value:a}:a}},"binary<=":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)<=e(n,o,r,s);return i?{value:a}:a}},"binary>=":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)>=e(n,o,r,s);return i?{value:a}:a}},"binary&&":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)&&e(n,o,r,s);return i?{value:a}:a}},"binary||":function(t,e,i){return function(n,o,r,s){var a=t(n,o,r,s)||e(n,o,r,s);return i?{value:a}:a}},"ternary?:":function(t,e,i,n){return function(o,r,s,a){var l=t(o,r,s,a)?e(o,r,s,a):i(o,r,s,a);return n?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,i){return function(n,o,r,s){var a=o&&t in o?o:n;i&&1!==i&&a&&null==a[t]&&(a[t]={});var l=a?a[t]:void 0;return e?{context:a,name:t,value:l}:l}},computedMember:function(t,e,i,n){return function(o,r,s,a){var l,c,u=t(o,r,s,a);return null!=u&&(l=xn(l=e(o,r,s,a)),n&&1!==n&&u&&!u[l]&&(u[l]={}),c=u[l]),i?{context:u,name:l,value:c}:c}},nonComputedMember:function(t,e,i,n){return function(o,r,s,a){var l=t(o,r,s,a);n&&1!==n&&l&&null==l[e]&&(l[e]={});var c=null!=l?l[e]:void 0;return i?{context:l,name:e,value:c}:c}},inputs:function(t,e){return function(i,n,o,r){return r?r[e]:t(i,n,o)}}},In.prototype={constructor:In,parse:function(t){var e=this.getAst(t),i=this.astCompiler.compile(e.ast);return i.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Bn.Literal||t.body[0].expression.type===Bn.ArrayExpression||t.body[0].expression.type===Bn.ObjectExpression)}(e.ast),i.constant=function(t){return t.constant}(e.ast),i.oneTime=e.oneTime,i},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Hn=o("$sce"),Gn={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Yn=/_([a-z])/g;function Jn(t){return t.replace(Yn,Kt)}function Zn(t){var e=[];return R(t)&&A(t,(function(t){e.push(function(t){if("self"===t)return t;if(q(t)){if(t.indexOf("***")>-1)throw Hn("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(Y(t))return new RegExp("^"+t.source+"$");throw Hn("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Xn(){this.SCE_CONTEXTS=Gn;var e=["self"],i=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=Zn(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(i=Zn(t)),i},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(n,o){var r=function(t){throw Hn("unsafe","Attempting to use an unsafe value in a safe context.")};function s(e,i){return"self"===e?mo(i,co)||function(e){return mo(e,function(){if(t.document.baseURI)return t.document.baseURI;ao||((ao=t.document.createElement("a")).href=".",ao=ao.cloneNode(!1));return ao.href}())}(i):!!e.exec(i.href)}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(r=n.get("$sanitize"));var l=a(),c={};return c[Gn.HTML]=a(l),c[Gn.CSS]=a(l),c[Gn.MEDIA_URL]=a(l),c[Gn.URL]=a(c[Gn.MEDIA_URL]),c[Gn.JS]=a(l),c[Gn.RESOURCE_URL]=a(c[Gn.URL]),{trustAs:function(t,e){var i=c.hasOwnProperty(t)?c[t]:null;if(!i)throw Hn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||j(e)||""===e)return e;if("string"!=typeof e)throw Hn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new i(e)},getTrusted:function(t,n){if(null===n||j(n)||""===n)return n;var a=c.hasOwnProperty(t)?c[t]:null;if(a&&n instanceof a)return n.$$unwrapTrustedValue();if(G(n.$$unwrapTrustedValue)&&(n=n.$$unwrapTrustedValue()),t===Gn.MEDIA_URL||t===Gn.URL)return o(n.toString(),t===Gn.MEDIA_URL);if(t===Gn.RESOURCE_URL){if(function(t){var n,o,r=ho(t.toString()),a=!1;for(n=0,o=e.length;n<o;n++)if(s(e[n],r)){a=!0;break}if(a)for(n=0,o=i.length;n<o;n++)if(s(i[n],r)){a=!1;break}return a}(n))return n;throw Hn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",n.toString())}if(t===Gn.HTML)return r(n);throw Hn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Kn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,i){if(t&&r<8)throw Hn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var n=Nt(Gn);n.isEnabled=function(){return t},n.trustAs=i.trustAs,n.getTrusted=i.getTrusted,n.valueOf=i.valueOf,t||(n.trustAs=n.getTrusted=function(t,e){return e},n.valueOf=k),n.parseAs=function(t,i){var o=e(i);return o.literal&&o.constant?o:e(i,(function(e){return n.getTrusted(t,e)}))};var o=n.parseAs,s=n.getTrusted,a=n.trustAs;return A(Gn,(function(t,e){var i=m(e);n[Jn("parse_as_"+i)]=function(e){return o(t,e)},n[Jn("get_trusted_"+i)]=function(e){return s(t,e)},n[Jn("trust_as_"+i)]=function(e){return a(t,e)}})),n}]}function Qn(){this.$get=["$window","$document",function(t,e){var i={},n=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,o=P((/android (\d+)/.exec(m((t.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},l=a.body&&a.body.style,c=!1,u=!1;return l&&(c=!(!("transition"in l)&&!("webkitTransition"in l)),u=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!n||o<4||s),hasEvent:function(t){if("input"===t&&r)return!1;if(j(i[t])){var e=a.createElement("div");i[t]="on"+t in e}return i[t]},csp:ct(),transitions:c,animations:u,android:o}}]}function to(){this.$get=V((function(t){return new eo(t)}))}function eo(t){var e=this,i={},n=[],o=e.ALL_TASKS_TYPE="$$all$$",r=e.DEFAULT_TASK_TYPE="$$default$$";function s(){var t=n.pop();return t&&t.cb}function a(t){for(var e=n.length-1;e>=0;--e){var i=n[e];if(i.type===t)return n.splice(e,1),i.cb}}e.completeTask=function(e,n){n=n||r;try{e()}finally{!function(t){i[t=t||r]&&(i[t]--,i[o]--)}(n);var l=i[n],c=i[o];if(!c||!l)for(var u,h=c?a:s;u=h(n);)try{u()}catch(m){t.error(m)}}},e.incTaskCount=function(t){i[t=t||r]=(i[t]||0)+1,i[o]=(i[o]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){i[e=e||o]?n.push({type:e,cb:t}):t()}}var io=o("$templateRequest");function no(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,i,n,o,r){function s(a,l){s.totalPendingRequests++,q(a)&&!j(i.get(a))||(a=r.getTrustedResourceUrl(a));var c=n.defaults&&n.defaults.transformResponse;return W(c)?c=c.filter((function(t){return t!==Di})):c===Di&&(c=null),n.get(a,M({cache:i,transformResponse:c},t)).finally((function(){s.totalPendingRequests--})).then((function(t){return i.put(a,t.data)}),(function(t){l||(t=io("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText),e(t));return o.reject(t)}))}return s.totalPendingRequests=0,s}]}function oo(){this.$get=["$rootScope","$browser","$location",function(t,e,i){var n={findBindings:function(t,e,i){var n=t.getElementsByClassName("ng-binding"),o=[];return A(n,(function(t){var n=b.element(t).data("$binding");n&&A(n,(function(n){i?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(n)&&o.push(t):-1!==n.indexOf(e)&&o.push(t)}))})),o},findModels:function(t,e,i){for(var n=["ng-","data-ng-","ng\\:"],o=0;o<n.length;++o){var r="["+n[o]+"model"+(i?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(r);if(s.length)return s}},getLocation:function(){return i.url()},setLocation:function(e){e!==i.url()&&(i.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return n}]}var ro=o("$timeout");function so(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,i,n,o){var r={};function s(s,a,l){G(s)||(l=a,a=s,s=I);var c,u=mt(arguments,3),h=R(l)&&!l,m=(h?n:i).defer(),p=m.promise;return c=e.defer((function(){try{m.resolve(s.apply(null,u))}catch(e){m.reject(e),o(e)}finally{delete r[p.$$timeoutId]}h||t.$apply()}),a,"$timeout"),p.$$timeoutId=c,r[c]=m,p}return s.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ro("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!r.hasOwnProperty(t.$$timeoutId))return!1;var i=t.$$timeoutId,n=r[i];return qn(n.promise),n.reject("canceled"),delete r[i],e.defer.cancel(i)},s}]}var ao,lo=t.document.createElement("a"),co=ho(t.location.href);lo.href="http://[::1]";var uo="[::1]"===lo.hostname;function ho(t){if(!q(t))return t;var e=t;r&&(lo.setAttribute("href",e),e=lo.href),lo.setAttribute("href",e);var i=lo.hostname;return!uo&&i.indexOf(":")>-1&&(i="["+i+"]"),{href:lo.href,protocol:lo.protocol?lo.protocol.replace(/:$/,""):"",host:lo.host,search:lo.search?lo.search.replace(/^\?/,""):"",hash:lo.hash?lo.hash.replace(/^#/,""):"",hostname:i,port:lo.port,pathname:"/"===lo.pathname.charAt(0)?lo.pathname:"/"+lo.pathname}}function mo(t,e){return t=ho(t),e=ho(e),t.protocol===e.protocol&&t.host===e.host}function po(){this.$get=V(t)}function fo(t){var e=t[0]||{},i={},n="";function o(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,r,s,a,l,c=function(t){try{return t.cookie||""}catch(e){return""}}(e);if(c!==n)for(t=(n=c).split("; "),i={},s=0;s<t.length;s++)(a=(r=t[s]).indexOf("="))>0&&(l=o(r.substring(0,a)),j(i[l])&&(i[l]=o(r.substring(a+1))));return i}}function _o(){this.$get=fo}function yo(t){var e="Filter";function i(n,o){if(D(n)){var r={};return A(n,(function(t,e){r[e]=i(e,t)})),r}return t.factory(n+e,o)}this.register=i,this.$get=["$injector",function(t){return function(i){return t.get(i+e)}}],i("currency",xo),i("date",Fo),i("filter",vo),i("json",Io),i("limitTo",Lo),i("lowercase",ko),i("number",$o),i("orderBy",Ro),i("uppercase",Vo)}function vo(){return function(t,e,i,n){if(!$(t)){if(null==t)return t;throw o("filter")("notarray","Expected array but received: {0}",t)}var r,s;switch(n=n||"$",bo(e)){case"function":r=e;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":r=function(t,e,i,n){var o=D(t)&&i in t;!0===e?e=lt:G(e)||(e=function(t,e){return!j(t)&&(null===t||null===e?t===e:!(D(e)||D(t)&&!L(t))&&(t=m(""+t),e=m(""+e),-1!==t.indexOf(e)))});return function(r){return o&&!D(r)?go(r,t[i],e,i,!1):go(r,t,e,i,n)}}(e,i,n,s);break;default:return t}return Array.prototype.filter.call(t,r)}}function go(t,e,i,n,o,r){var s=bo(t),a=bo(e);if("string"===a&&"!"===e.charAt(0))return!go(t,e.substring(1),i,n,o);if(W(t))return t.some((function(t){return go(t,e,i,n,o)}));switch(s){case"object":var l;if(o){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&go(t[l],e,i,n,!0))return!0;return!r&&go(t,e,i,n,!1)}if("object"===a){for(l in e){var c=e[l];if(!G(c)&&!j(c)){var u=l===n;if(!go(u?t:t[l],c,i,n,u,u))return!1}}return!0}return i(t,e);case"function":return!1;default:return i(t,e)}}function bo(t){return null===t?"null":typeof t}fo.$inject=["$document"],yo.$inject=["$provide"];function xo(t){var e=t.NUMBER_FORMATS;return function(t,i,n){j(i)&&(i=e.CURRENCY_SYM),j(n)&&(n=e.PATTERNS[1].maxFrac);var o=i?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:Ao(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,n).replace(o,i)}}function $o(t){var e=t.NUMBER_FORMATS;return function(t,i){return null==t?t:Ao(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,i)}}function Ao(t,e,i,n,o){if(!q(t)&&!N(t)||isNaN(t))return"";var r,s=!isFinite(t),a=!1,l=Math.abs(t)+"",c="";if(s)c="";else{r=function(t){var e,i,n,o,r,s=0;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;"0"===t.charAt(n);n++);if(n===(r=t.length))e=[0],i=1;else{for(r--;"0"===t.charAt(r);)r--;for(i-=n,e=[],o=0;n<=r;n++,o++)e[o]=+t.charAt(n)}return i>22&&(e=e.splice(0,21),s=i-1,i=1),{d:e,e:s,i:i}}(l),function(t,e,i,n){var o=t.d,r=o.length-t.i,s=(e=j(e)?Math.min(Math.max(i,r),n):+e)+t.i,a=o[s];if(s>0){o.splice(Math.max(t.i,s));for(var l=s;l<o.length;l++)o[l]=0}else{r=Math.max(0,r),t.i=1,o.length=Math.max(1,s=e+1),o[0]=0;for(var c=1;c<s;c++)o[c]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)o.unshift(0),t.i++;o.unshift(1),t.i++}else o[s-1]++;for(;r<Math.max(0,e);r++)o.push(0);var h=o.reduceRight((function(t,e,i,n){return e+=t,n[i]=e%10,Math.floor(e/10)}),0);h&&(o.unshift(h),t.i++)}(r,o,e.minFrac,e.maxFrac);var u=r.d,h=r.i,m=r.e,p=[];for(a=u.reduce((function(t,e){return t&&!e}),!0);h<0;)u.unshift(0),h++;h>0?p=u.splice(h,u.length):(p=u,u=[0]);var d=[];for(u.length>=e.lgSize&&d.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)d.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&d.unshift(u.join("")),c=d.join(i),p.length&&(c+=n+p.join("")),m&&(c+="e+"+m)}return t<0&&!a?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function wo(t,e,i,n){var o="";for((t<0||n&&t<=0)&&(n?t=1-t:(t=-t,o="-")),t=""+t;t.length<e;)t="0"+t;return i&&(t=t.substr(t.length-e)),o+t}function Bo(t,e,i,n,o){return i=i||0,function(r){var s=r["get"+t]();return(i>0||s>-i)&&(s+=i),0===s&&-12===i&&(s=12),wo(s,e,n,o)}}function Co(t,e,i){return function(n,o){var r=n["get"+t]();return o[p((i?"STANDALONE":"")+(e?"SHORT":"")+t)][r]}}function So(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Eo(t){return function(e){var i,n=So(e.getFullYear()),o=+(i=e,new Date(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay())))-+n;return wo(1+Math.round(o/6048e5),t)}}function Mo(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}xo.$inject=["$locale"],$o.$inject=["$locale"];var To={yyyy:Bo("FullYear",4,0,!1,!0),yy:Bo("FullYear",2,0,!0,!0),y:Bo("FullYear",1,0,!1,!0),MMMM:Co("Month"),MMM:Co("Month",!0),MM:Bo("Month",2,1),M:Bo("Month",1,1),LLLL:Co("Month",!1,!0),dd:Bo("Date",2),d:Bo("Date",1),HH:Bo("Hours",2),H:Bo("Hours",1),hh:Bo("Hours",2,-12),h:Bo("Hours",1,-12),mm:Bo("Minutes",2),m:Bo("Minutes",1),ss:Bo("Seconds",2),s:Bo("Seconds",1),sss:Bo("Milliseconds",3),EEEE:Co("Day"),EEE:Co("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,i){var n=-1*i,o=n>=0?"+":"";return o+=wo(Math[n>0?"floor":"ceil"](n/60),2)+wo(Math.abs(n%60),2)},ww:Eo(2),w:Eo(1),G:Mo,GG:Mo,GGG:Mo,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Po=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,zo=/^-?\d+$/;function Fo(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(i,n,o){var r,s,a="",l=[];if(n=n||"mediumDate",n=t.DATETIME_FORMATS[n]||n,q(i)&&(i=zo.test(i)?P(i):function(t){var i;if(i=t.match(e)){var n=new Date(0),o=0,r=0,s=i[8]?n.setUTCFullYear:n.setFullYear,a=i[8]?n.setUTCHours:n.setHours;i[9]&&(o=P(i[9]+i[10]),r=P(i[9]+i[11])),s.call(n,P(i[1]),P(i[2])-1,P(i[3]));var l=P(i[4]||0)-o,c=P(i[5]||0)-r,u=P(i[6]||0),h=Math.round(1e3*parseFloat("0."+(i[7]||0)));return a.call(n,l,c,u,h),n}return t}(i)),N(i)&&(i=new Date(i)),!U(i)||!isFinite(i.getTime()))return i;for(;n;)(s=Po.exec(n))?n=(l=ht(l,s,1)).pop():(l.push(n),n=null);var c=i.getTimezoneOffset();return o&&(c=vt(o,c),i=bt(i,o,!0)),A(l,(function(e){a+=(r=To[e])?r(i,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),a}}function Io(){return function(t,e){return j(e)&&(e=2),ft(t,e)}}Fo.$inject=["$locale"];var ko=V(m),Vo=V(p);function Lo(){return function(t,e,i){return e=Math.abs(Number(e))===1/0?Number(e):P(e),z(e)?t:(N(t)&&(t=t.toString()),$(t)?(i=(i=!i||isNaN(i)?0:P(i))<0?Math.max(0,t.length+i):i,e>=0?jo(t,i,i+e):0===i?jo(t,e,t.length):jo(t,Math.max(0,i+e),i)):t)}}function jo(t,e,i){return q(t)?t.slice(e,i):d.call(t,e,i)}function Ro(t){return function(n,r,s,a){if(null==n)return n;if(!$(n))throw o("orderBy")("notarray","Expected array but received: {0}",n);W(r)||(r=[r]),0===r.length&&(r=["+"]);var l=r.map((function(e){var i=1,n=k;if(G(e))n=e;else if(q(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(i="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=t(e)).constant)){var o=n();n=function(t){return t[o]}}return{get:n,descending:i}})),c=s?-1:1,u=G(a)?a:i,h=Array.prototype.map.call(n,(function(t,i){return{value:t,tieBreaker:{value:i,type:"number",index:i},predicateValues:l.map((function(n){return function(t,i){var n=typeof t;null===t?n="null":"object"===n&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(L(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:n,index:i}}(n.get(t),i)}))}}));return h.sort((function(t,e){for(var n=0,o=l.length;n<o;n++){var r=u(t.predicateValues[n],e.predicateValues[n]);if(r)return r*l[n].descending*c}return(u(t.tieBreaker,e.tieBreaker)||i(t.tieBreaker,e.tieBreaker))*c})),n=h.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){var i=0,n=t.type,o=e.type;if(n===o){var r=t.value,s=e.value;"string"===n?(r=r.toLowerCase(),s=s.toLowerCase()):"object"===n&&(D(r)&&(r=t.index),D(s)&&(s=e.index)),r!==s&&(i=r<s?-1:1)}else i="undefined"===n?1:"undefined"===o?-1:"null"===n?1:"null"===o||n<o?-1:1;return i}}function Do(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",V(t)}Ro.$inject=["$parse"];var Oo=V({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var i="[object SVGAnimatedString]"===y.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(i)||t.preventDefault()}))}}}}),qo={};A(ze,(function(t,e){if("multiple"!==t){var i=bi("ng-"+e),n=o;"checked"===t&&(n=function(t,e,n){n.ngModel!==n[i]&&o(t,0,n)}),qo[i]=function(){return{restrict:"A",priority:100,link:n}}}function o(t,n,o){t.$watch(o[i],(function(t){o.$set(e,!!t)}))}})),A(Ie,(function(t,e){qo[e]=function(){return{priority:100,link:function(t,i,n){if("ngPattern"===e&&"/"===n.ngPattern.charAt(0)){var o=n.ngPattern.match(c);if(o)return void n.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(n[e],(function(t){n.$set(e,t)}))}}}})),A(["src","srcset","href"],(function(t){var e=bi("ng-"+t);qo[e]=["$sce",function(i){return{priority:99,link:function(n,o,s){var a=t,l=t;"href"===t&&"[object SVGAnimatedString]"===y.call(o.prop("href"))&&(l="xlinkHref",s.$attr[l]="xlink:href",a=null),s.$set(e,i.getTrustedMediaUrl(s[e])),s.$observe(e,(function(e){e?(s.$set(l,e),r&&a&&o.prop(a,s[l])):"href"===t&&s.$set(l,null)}))}}}]}));var No={$addControl:I,$getControls:V([]),$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I,$$setSubmitted:I},Uo="ng-pending",Wo="ng-submitted";function Ho(t,e,i,n,o){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=o(e.name||e.ngForm||"")(i),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=No,this.$$element=t,this.$$animate=n,Zo(this)}Ho.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Ho.prototype={$rollbackViewValue:function(){A(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){A(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){jt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Nt(this.$$controls)},$$renameControl:function(t,e){var i=t.$name;this[i]===t&&delete this[i],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],A(this.$pending,(function(e,i){this.$setValidity(i,null,t)}),this),A(this.$error,(function(e,i){this.$setValidity(i,null,t)}),this),A(this.$$success,(function(e,i){this.$setValidity(i,null,t)}),this),rt(this.$$controls,t),t.$$parentForm=No},$setDirty:function(){this.$$animate.removeClass(this.$$element,Wr),this.$$animate.addClass(this.$$element,Hr),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Wr,Hr+" "+Wo),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,A(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){A(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==No;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Wo),this.$submitted=!0,A(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Xo({clazz:Ho,set:function(t,e,i){var n=t[e];n?-1===n.indexOf(i)&&n.push(i):t[e]=[i]},unset:function(t,e,i){var n=t[e];n&&(rt(n,i),0===n.length&&delete t[e])}});var Go=function(t){return["$timeout","$parse",function(e,i){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Ho,compile:function(i,o){i.addClass(Wr).addClass(Nr);var r=o.name?"name":!(!t||!o.ngForm)&&"ngForm";return{pre:function(t,i,o,s){var a=s[0];if(!("action"in o)){var l=function(e){t.$apply((function(){a.$commitViewValue(),a.$setSubmitted()})),e.preventDefault()};i[0].addEventListener("submit",l),i.on("$destroy",(function(){e((function(){i[0].removeEventListener("submit",l)}),0,!1)}))}(s[1]||a.$$parentForm).$addControl(a);var c=r?n(a.$name):I;r&&(c(t,a),o.$observe(r,(function(e){a.$name!==e&&(c(t,void 0),a.$$parentForm.$$renameControl(a,e),(c=n(a.$name))(t,a))}))),i.on("$destroy",(function(){a.$$parentForm.$removeControl(a),c(t,void 0),M(a,No)}))}}}};function n(t){return""===t?i('this[""]').assign:i(t).assign||I}}]},Yo=Go(),Jo=Go(!0);function Zo(t){t.$$classCache={},t.$$classCache[Ur]=!(t.$$classCache[Nr]=t.$$element.hasClass(Nr))}function Xo(t){var e=t.clazz,i=t.set,n=t.unset;function o(t,e,i){i&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!i&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function r(t,e,i){e=e?"-"+Ft(e,"-"):"",o(t,Nr+e,!0===i),o(t,Ur+e,!1===i)}e.prototype.$setValidity=function(t,e,s){var a;j(e)?function(t,e,n,o){t[e]||(t[e]={});i(t[e],n,o)}(this,"$pending",t,s):function(t,e,i,o){t[e]&&n(t[e],i,o);Ko(t[e])&&(t[e]=void 0)}(this,"$pending",t,s),X(e)?e?(n(this.$error,t,s),i(this.$$success,t,s)):(i(this.$error,t,s),n(this.$$success,t,s)):(n(this.$error,t,s),n(this.$$success,t,s)),this.$pending?(o(this,Uo,!0),this.$valid=this.$invalid=void 0,r(this,"",null)):(o(this,Uo,!1),this.$valid=Ko(this.$error),this.$invalid=!this.$valid,r(this,"",this.$valid)),r(this,t,a=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,a,this)}}function Ko(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Qo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,tr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,er=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ir=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,nr=/^(\d{4,})-(\d{2})-(\d{2})$/,or=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,rr=/^(\d{4,})-W(\d\d)$/,sr=/^(\d{4,})-(\d\d)$/,ar=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,lr=Dt();A("date,datetime-local,month,time,week".split(","),(function(t){lr[t]=!0}));var cr={text:function(t,e,i,n,o,r){hr(t,e,i,n,o,r),ur(n)},date:pr("date",nr,mr(nr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":pr("datetimelocal",or,mr(or,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:pr("time",ar,mr(ar,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:pr("week",rr,(function(t,e){if(U(t))return t;if(q(t)){rr.lastIndex=0;var i=rr.exec(t);if(i){var n=+i[1],o=+i[2],r=0,s=0,a=0,l=0,c=So(n),u=7*(o-1);return e&&(r=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(n,0,c.getDate()+u,r,s,a,l)}}return NaN}),"yyyy-Www"),month:pr("month",sr,mr(sr,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,i,n,o,r,s,a){var l;if(dr(t,e,i,n,"number"),fr(n),hr(t,e,i,n,o,r),R(i.min)||i.ngMin){var c=i.min||a(i.ngMin)(t);l=_r(c),n.$validators.min=function(t,e){return n.$isEmpty(e)||j(l)||e>=l},i.$observe("min",(function(t){t!==c&&(l=_r(t),c=t,n.$validate())}))}if(R(i.max)||i.ngMax){var u=i.max||a(i.ngMax)(t),h=_r(u);n.$validators.max=function(t,e){return n.$isEmpty(e)||j(h)||e<=h},i.$observe("max",(function(t){t!==u&&(h=_r(t),u=t,n.$validate())}))}if(R(i.step)||i.ngStep){var m=i.step||a(i.ngStep)(t),p=_r(m);n.$validators.step=function(t,e){return n.$isEmpty(e)||j(p)||gr(e,l||0,p)},i.$observe("step",(function(t){t!==m&&(p=_r(t),m=t,n.$validate())}))}},url:function(t,e,i,n,o,r){hr(t,e,i,n,o,r),ur(n),n.$validators.url=function(t,e){var i=t||e;return n.$isEmpty(i)||tr.test(i)}},email:function(t,e,i,n,o,r){hr(t,e,i,n,o,r),ur(n),n.$validators.email=function(t,e){var i=t||e;return n.$isEmpty(i)||er.test(i)}},radio:function(t,e,i,n){var o=!i.ngTrim||"false"!==tt(i.ngTrim);j(i.name)&&e.attr("name",C());e.on("change",(function(t){var r;e[0].checked&&(r=i.value,o&&(r=tt(r)),n.$setViewValue(r,t&&t.type))})),n.$render=function(){var t=i.value;o&&(t=tt(t)),e[0].checked=t===n.$viewValue},i.$observe("value",n.$render)},range:function(t,e,i,n,o,r){dr(t,e,i,n,"range"),fr(n),hr(t,e,i,n,o,r);var s=n.$$hasNativeValidators&&"range"===e[0].type,a=s?0:void 0,l=s?100:void 0,c=s?1:void 0,u=e[0].validity,h=R(i.min),m=R(i.max),p=R(i.step),d=n.$render;n.$render=s&&R(u.rangeUnderflow)&&R(u.rangeOverflow)?function(){d(),n.$setViewValue(e.val())}:d,h&&(a=_r(i.min),n.$validators.min=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||j(a)||e>=a},f("min",(function(t){if(a=_r(t),z(n.$modelValue))return;if(s){var i=e.val();a>i&&(i=a,e.val(i)),n.$setViewValue(i)}else n.$validate()})));m&&(l=_r(i.max),n.$validators.max=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||j(l)||e<=l},f("max",(function(t){if(l=_r(t),z(n.$modelValue))return;if(s){var i=e.val();l<i&&(e.val(l),i=l<a?a:l),n.$setViewValue(i)}else n.$validate()})));p&&(c=_r(i.step),n.$validators.step=s?function(){return!u.stepMismatch}:function(t,e){return n.$isEmpty(e)||j(c)||gr(e,a||0,c)},f("step",(function(t){if(c=_r(t),z(n.$modelValue))return;s?n.$viewValue!==e.val()&&n.$setViewValue(e.val()):n.$validate()})));function f(t,n){e.attr(t,i[t]);var o=i[t];i.$observe(t,(function(t){t!==o&&(o=t,n(t))}))}},checkbox:function(t,e,i,n,o,r,s,a){var l=br(a,t,"ngTrueValue",i.ngTrueValue,!0),c=br(a,t,"ngFalseValue",i.ngFalseValue,!1);e.on("change",(function(t){n.$setViewValue(e[0].checked,t&&t.type)})),n.$render=function(){e[0].checked=n.$viewValue},n.$isEmpty=function(t){return!1===t},n.$formatters.push((function(t){return lt(t,l)})),n.$parsers.push((function(t){return t?l:c}))},hidden:I,button:I,submit:I,reset:I,file:I};function ur(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function hr(t,e,i,n,o,r){var s,a=m(e[0].type);if(!o.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionupdate",(function(t){(j(t.data)||""===t.data)&&(l=!1)})),e.on("compositionend",(function(){l=!1,c()}))}var c=function(t){if(s&&(r.defer.cancel(s),s=null),!l){var o=e.val(),c=t&&t.type;"password"===a||i.ngTrim&&"false"===i.ngTrim||(o=tt(o)),(n.$viewValue!==o||""===o&&n.$$hasNativeValidators)&&n.$setViewValue(o,c)}};if(o.hasEvent("input"))e.on("input",c);else{var u=function(t,e,i){s||(s=r.defer((function(){s=null,e&&e.value===i||c(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||u(t,this,this.value)})),o.hasEvent("paste")&&e.on("paste cut drop",u)}e.on("change",c),lr[a]&&n.$$hasNativeValidators&&a===i.type&&e.on("keydown wheel mousedown",(function(t){if(!s){var e=this.validity,i=e.badInput,n=e.typeMismatch;s=r.defer((function(){s=null,e.badInput===i&&e.typeMismatch===n||c(t)}))}})),n.$render=function(){var t=n.$isEmpty(n.$viewValue)?"":n.$viewValue;e.val()!==t&&e.val(t)}}function mr(t,e){return function(i,n){var o,r;if(U(i))return i;if(q(i)){if('"'===i.charAt(0)&&'"'===i.charAt(i.length-1)&&(i=i.substring(1,i.length-1)),Qo.test(i))return new Date(i);if(t.lastIndex=0,o=t.exec(i)){o.shift(),r=n?{yyyy:n.getFullYear(),MM:n.getMonth()+1,dd:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds(),sss:n.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},A(o,(function(t,i){i<e.length&&(r[e[i]]=+t)}));var s=new Date(r.yyyy,r.MM-1,r.dd,r.HH,r.mm,r.ss||0,1e3*r.sss||0);return r.yyyy<100&&s.setFullYear(r.yyyy),s}}return NaN}}function pr(t,e,i,n){return function(o,r,s,a,l,c,u,h){dr(o,r,s,a,t),hr(0,r,s,a,l,c);var m,p,d="time"===t||"datetimelocal"===t;if(a.$parsers.push((function(i){return a.$isEmpty(i)?null:e.test(i)?x(i,m):void(a.$$parserName=t)})),a.$formatters.push((function(t){if(t&&!U(t))throw Xr("datefmt","Expected `{0}` to be a date",t);if(g(t)){m=t;var e=a.$options.getOption("timezone");return e&&(p=e,m=bt(m,e,!0)),function(t,e){var i=n;d&&q(a.$options.getOption("timeSecondsFormat"))&&(i=n.replace("ss.sss",a.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var o=u("date")(t,i,e);d&&a.$options.getOption("timeStripZeroSeconds")&&(o=o.replace(/(?::00)?(?:\.000)?$/,""));return o}(t,e)}return m=null,p=null,""})),R(s.min)||s.ngMin){var f=s.min||h(s.ngMin)(o),_=b(f);a.$validators.min=function(t){return!g(t)||j(_)||i(t)>=_},s.$observe("min",(function(t){t!==f&&(_=b(t),f=t,a.$validate())}))}if(R(s.max)||s.ngMax){var y=s.max||h(s.ngMax)(o),v=b(y);a.$validators.max=function(t){return!g(t)||j(v)||i(t)<=v},s.$observe("max",(function(t){t!==y&&(v=b(t),y=t,a.$validate())}))}function g(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function b(t){return R(t)&&!U(t)?x(t)||void 0:t}function x(t,e){var n=a.$options.getOption("timezone");p&&p!==n&&(e=gt(e,vt(p)));var o=i(t,e);return!isNaN(o)&&n&&(o=bt(o,n)),o}}}function dr(t,e,i,n,o){var r=e[0];(n.$$hasNativeValidators=D(r.validity))&&n.$parsers.push((function(t){var i=e.prop(u)||{};if(!i.badInput&&!i.typeMismatch)return t;n.$$parserName=o}))}function fr(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:ir.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!N(e))throw Xr("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function _r(t){return R(t)&&!N(t)&&(t=parseFloat(t)),z(t)?void 0:t}function yr(t){return(0|t)===t}function vr(t){var e=t.toString(),i=e.indexOf(".");if(-1===i){if(-1<t&&t<1){var n=/e-(\d+)$/.exec(e);if(n)return Number(n[1])}return 0}return e.length-i-1}function gr(t,e,i){var n=Number(t),o=!yr(n),r=!yr(e),s=!yr(i);if(o||r||s){var a=o?vr(n):0,l=r?vr(e):0,c=s?vr(i):0,u=Math.max(a,l,c),h=Math.pow(10,u);n*=h,e*=h,i*=h,o&&(n=Math.round(n)),r&&(e=Math.round(e)),s&&(i=Math.round(i))}return(n-e)%i==0}function br(t,e,i,n,o){var r;if(R(n)){if(!(r=t(n)).constant)throw Xr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",i,n);return r(e)}return o}var xr=["$browser","$sniffer","$filter","$parse",function(t,e,i,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(o,r,s,a){a[0]&&(cr[m(s.type)]||cr.text)(o,r,s,a[0],e,t,i,n)}}}}],$r=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,i){if("hidden"===m(i.type))return{pre:function(e,i,n,o){var r=i[0];r.parentNode&&r.parentNode.insertBefore(r,r.nextSibling),Object.defineProperty&&Object.defineProperty(r,"value",t)}}}}},Ar=/^(true|false|\d+)$/,wr=function(){function t(t,e,i){var n=R(i)?i:9===r?"":null;t.prop("value",n),e.$set("value",i)}return{restrict:"A",priority:100,compile:function(e,i){return Ar.test(i.ngValue)?function(e,i,n){t(i,n,e.$eval(n.ngValue))}:function(e,i,n){e.$watch(n.ngValue,(function(e){t(i,n,e)}))}}}},Br=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,i,n){t.$$addBindingInfo(i,n.ngBind),i=i[0],e.$watch(n.ngBind,(function(t){i.textContent=Ot(t)}))}}}}],Cr=["$interpolate","$compile",function(t,e){return{compile:function(i){return e.$$addBindingClass(i),function(i,n,o){var r=t(n.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(n,r.expressions),n=n[0],o.$observe("ngBindTemplate",(function(t){n.textContent=j(t)?"":t}))}}}}],Sr=["$sce","$parse","$compile",function(t,e,i){return{restrict:"A",compile:function(n,o){var r=e(o.ngBindHtml),s=e(o.ngBindHtml,(function(e){return t.valueOf(e)}));return i.$$addBindingClass(n),function(e,n,o){i.$$addBindingInfo(n,o.ngBindHtml),e.$watch(s,(function(){var i=r(e);n.html(t.getTrustedHtml(i)||"")}))}}}}],Er=V({restrict:"A",require:"ngModel",link:function(t,e,i,n){n.$viewChangeListeners.push((function(){t.$eval(i.ngChange)}))}});function Mr(t,e){var i;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(a,l,c){var u,h=l.data("$classCounts"),m=!0;function p(t,e){var i=[];return A(t,(function(t){(e>0||h[t])&&(h[t]=(h[t]||0)+e,h[t]===+(e>0)&&i.push(t))})),i.join(" ")}h||(h=Dt(),l.data("$classCounts",h)),"ngClass"!==t&&(i||(i=s("$index",(function(t){return 1&t}))),a.$watch(i,(function(t){t===e?(i=p(o(i=u),1),c.$addClass(i)):function(t){t=p(o(t),-1),c.$removeClass(t)}(u);var i;m=t}))),a.$watch(s(c[t],r),(function(t){m===e&&function(t,e){var i=o(t),r=o(e),s=n(i,r),a=n(r,i),l=p(s,-1),u=p(a,1);c.$addClass(u),c.$removeClass(l)}(u,t);u=t}))}}}];function n(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var i=[];t:for(var n=0;n<t.length;n++){for(var o=t[n],r=0;r<e.length;r++)if(o===e[r])continue t;i.push(o)}return i}function o(t){return t&&t.split(" ")}function r(t){if(!t)return t;var e=t;return W(t)?e=t.map(r).join(" "):D(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):q(t)||(e=t+""),e}}var Tr=Mr("",!0),Pr=Mr("Odd",0),zr=Mr("Even",1),Fr=Do({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Ir=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],kr={},Vr={blur:!0,focus:!0};function Lr(t,e,i,n,o,r){return{restrict:"A",compile:function(s,a){var l=t(a[n]);return function(t,n){n.on(o,(function(n){var o=function(){l(t,{$event:n})};if(e.$$phase)if(r)t.$evalAsync(o);else try{o()}catch(s){i(s)}else t.$apply(o)}))}}}}A("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=bi("ng-"+t);kr[e]=["$parse","$rootScope","$exceptionHandler",function(i,n,o){return Lr(i,n,o,e,t,Vr[t])}]}));var jr=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,n,o,r,s){var a,l,c;i.$watch(o.ngIf,(function(i){i?l||s((function(i,r){l=r,i[i.length++]=e.$$createComment("end ngIf",o.ngIf),a={clone:i},t.enter(i,n.parent(),n)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=Rt(a.clone),t.leave(c).done((function(t){!1!==t&&(c=null)})),a=null))}))}}}],Rr=["$templateRequest","$anchorScroll","$animate",function(t,e,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(n,o){var r=o.ngInclude||o.src,s=o.onload||"",a=o.autoscroll;return function(n,o,l,c,u){var h,m,p,d=0,f=function(){m&&(m.remove(),m=null),h&&(h.$destroy(),h=null),p&&(i.leave(p).done((function(t){!1!==t&&(m=null)})),m=p,p=null)};n.$watch(r,(function(r){var l=function(t){!1===t||!R(a)||a&&!n.$eval(a)||e()},m=++d;r?(t(r,!0).then((function(t){if(!n.$$destroyed&&m===d){var e=n.$new();c.template=t;var a=u(e,(function(t){f(),i.enter(t,null,o).done(l)}));p=a,(h=e).$emit("$includeContentLoaded",r),n.$eval(s)}}),(function(){n.$$destroyed||m===d&&(f(),n.$emit("$includeContentError",r))})),n.$emit("$includeContentRequested",r)):(f(),c.template=null)}))}}}}],Dr=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(i,n,o,r){if(y.call(n[0]).match(/SVG/))return n.empty(),void e(he(r.template,t.document).childNodes)(i,(function(t){n.append(t)}),{futureParentElement:n});n.html(r.template),e(n.contents())(i)}}}],Or=Do({priority:450,compile:function(){return{pre:function(t,e,i){t.$eval(i.ngInit)}}}}),qr=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,i,n){var o=i.ngList||", ",r="false"!==i.ngTrim,s=r?tt(o):o;n.$parsers.push((function(t){if(!j(t)){var e=[];return t&&A(t.split(s),(function(t){t&&e.push(r?tt(t):t)})),e}})),n.$formatters.push((function(t){if(W(t))return t.join(o)})),n.$isEmpty=function(t){return!t||!t.length}}}},Nr="ng-valid",Ur="ng-invalid",Wr="ng-pristine",Hr="ng-dirty",Gr="ng-untouched",Yr="ng-touched",Jr="ng-empty",Zr="ng-not-empty",Xr=o("ngModel");function Kr(t,e,i,n,o,r,s,a,l){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(i.name||"",!1)(t),this.$$parentForm=No,this.$options=Qr,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=o(i.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=i,this.$$element=n,this.$$animate=r,this.$$timeout=s,this.$$parse=o,this.$$q=a,this.$$exceptionHandler=e,Zo(this),(c=this).$$scope.$watch((function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e}))}Kr.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Kr.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var i=this.$$parsedNgModel(e);return G(i)&&(i=t(e)),i},this.$$ngModelSet=function(t,i){G(this.$$parsedNgModel(t))?e(t,{$$$p:i}):this.$$parsedNgModelAssign(t,i)}}else if(!this.$$parsedNgModel.assign)throw Xr("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,xt(this.$$element))},$render:I,$isEmpty:function(t){return j(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Zr),this.$$animate.addClass(this.$$element,Jr)):(this.$$animate.removeClass(this.$$element,Jr),this.$$animate.addClass(this.$$element,Zr))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Hr),this.$$animate.addClass(this.$$element,Wr)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Wr),this.$$animate.addClass(this.$$element,Hr),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Gr,Yr)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Yr,Gr)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!z(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,i=this.$valid,n=this.$modelValue,o=this.$options.getOption("allowInvalid"),r=this;this.$$runValidators(e,t,(function(t){o||i===t||(r.$modelValue=t?e:void 0,r.$modelValue!==n&&r.$$writeModelToScope())}))}},$$runValidators:function(t,e,i){this.$$currentValidationRunId++;var n,o,r=this.$$currentValidationRunId,s=this;(function(){var t=s.$$parserName;if(!j(s.$$parserValid))return s.$$parserValid||(A(s.$validators,(function(t,e){a(e,null)})),A(s.$asyncValidators,(function(t,e){a(e,null)}))),a(t,s.$$parserValid),s.$$parserValid;a(t,null);return!0})()?!function(){var i=!0;if(A(s.$validators,(function(n,o){var r=Boolean(n(t,e));i=i&&r,a(o,r)})),!i)return A(s.$asyncValidators,(function(t,e){a(e,null)})),!1;return!0}()?l(!1):(n=[],o=!0,A(s.$asyncValidators,(function(i,r){var s=i(t,e);if(!K(s))throw Xr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(r,void 0),n.push(s.then((function(){a(r,!0)}),(function(){o=!1,a(r,!1)})))})),n.length?s.$$q.all(n).then((function(){l(o)}),I):l(!0)):l(!1);function a(t,e){r===s.$$currentValidationRunId&&s.$setValidity(t,e)}function l(t){r===s.$$currentValidationRunId&&i(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!j(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(j(t=this.$parsers[i](t))){this.$$parserValid=!1;break}z(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var n=this.$modelValue,o=this.$options.getOption("allowInvalid");function r(){e.$modelValue!==n&&e.$$writeModelToScope()}this.$$rawModelValue=t,o&&(this.$modelValue=t,r()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(i){o||(e.$modelValue=i?t:void 0,r())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),A(this.$viewChangeListeners,(function(t){try{t()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");N(e[t])?e=e[t]:N(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:N(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var i=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){i.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){i.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,i=this.$modelValue;e--;)i=t[e](i);return i},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Xo({clazz:Kr,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Qr,ts=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Kr,priority:1,compile:function(e){return e.addClass(Wr).addClass(Gr).addClass(Nr),{pre:function(t,e,i,n){var o=n[0],r=n[1]||o.$$parentForm,s=n[2];s&&(o.$options=s.$options),o.$$initGetterSetters(),r.$addControl(o),i.$observe("name",(function(t){o.$name!==t&&o.$$parentForm.$$renameControl(o,t)})),t.$on("$destroy",(function(){o.$$parentForm.$removeControl(o)}))},post:function(e,i,n,o){var r=o[0];function s(){r.$setTouched()}r.$$setUpdateOnEvents(),i.on("blur",(function(){r.$touched||(t.$$phase?e.$evalAsync(s):e.$apply(s))}))}}}}}],es=/(\s+|^)default(\s+|$)/;function is(t){this.$$options=t}is.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return A(t=M({},t),(function(i,n){"$inherit"===i?"*"===n?e=!0:(t[n]=this.$$options[n],"updateOn"===n&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===n&&(t.updateOnDefault=!1,t[n]=tt(i.replace(es,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],os(t,this.$$options)),os(t,Qr.$$options),new is(t)}},Qr=new is({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ns=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Qr,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function os(t,e){A(e,(function(e,i){R(t[i])||(t[i]=e)}))}var rs=Do({terminal:!0,priority:1e3}),ss=o("ngOptions"),as=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ls=["$compile","$document","$parse",function(e,i,n){var o=t.document.createElement("option"),r=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,i,n){n[0].registerOption=I},post:function(t,a,l,c){for(var u=c[0],h=c[1],m=l.multiple,p=0,d=a.children(),f=d.length;p<f;p++)if(""===d[p].value){u.hasEmptyOption=!0,u.emptyOption=d.eq(p);break}a.empty();var _,y=!!u.emptyOption;s(o.cloneNode(!1)).val("?");var v=function(t,e,i){var o=t.match(as);if(!o)throw ss("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,xt(e));var r=o[5]||o[7],s=o[6],a=/ as /.test(o[0])&&o[1],l=o[9],c=n(o[2]?o[1]:r),u=a&&n(a)||c,h=l&&n(l),m=l?function(t,e){return h(i,e)}:function(t){return Re(t)},p=function(t,e){return m(t,g(t,e))},d=n(o[2]||o[1]),f=n(o[3]||""),_=n(o[4]||""),y=n(o[8]),v={},g=s?function(t,e){return v[s]=e,v[r]=t,v}:function(t){return v[r]=t,v};function b(t,e,i,n,o){this.selectValue=t,this.viewValue=e,this.label=i,this.group=n,this.disabled=o}function x(t){var e;if(!s&&$(t))e=t;else for(var i in e=[],t)t.hasOwnProperty(i)&&"$"!==i.charAt(0)&&e.push(i);return e}return{trackBy:l,getTrackByValue:p,getWatchables:n(y,(function(t){for(var e=[],n=x(t=t||[]),r=n.length,s=0;s<r;s++){var a=t===n?s:n[s],l=t[a],c=g(l,a),u=m(l,c);if(e.push(u),o[2]||o[1]){var h=d(i,c);e.push(h)}if(o[4]){var p=_(i,c);e.push(p)}}return e})),getOptions:function(){for(var t=[],e={},n=y(i)||[],o=x(n),r=o.length,s=0;s<r;s++){var a=n===o?s:o[s],c=n[a],h=g(c,a),v=u(i,h),$=m(v,h),A=new b($,v,d(i,h),f(i,h),_(i,h));t.push(A),e[$]=A}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return l?st(t.viewValue):t.viewValue}}}}}(l.ngOptions,a,t),g=i[0].createDocumentFragment();function b(t,e){var i=o.cloneNode(!1);e.appendChild(i),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,i)}function x(t){var e=_.getOptionFromViewValue(t),i=e&&e.element;return i&&!i.selected&&(i.selected=!0),e}u.generateUnknownOptionValue=function(t){return"?"},m?(u.writeValue=function(t){if(_){var e=t&&t.map(x)||[];_.items.forEach((function(t){t.element.selected&&!ot(e,t)&&(t.element.selected=!1)}))}},u.readValue=function(){var t=a.val()||[],e=[];return A(t,(function(t){var i=_.selectValueMap[t];i&&!i.disabled&&e.push(_.getViewValueFromOption(i))})),e},v.trackBy&&t.$watchCollection((function(){if(W(h.$viewValue))return h.$viewValue.map((function(t){return v.getTrackByValue(t)}))}),(function(){h.$render()}))):(u.writeValue=function(t){if(_){var e=a[0].options[a[0].selectedIndex],i=_.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),i?(a[0].value!==i.selectValue&&(u.removeUnknownOption(),a[0].value=i.selectValue,i.element.selected=!0),i.element.setAttribute("selected","selected")):u.selectUnknownOrEmptyOption(t)}},u.readValue=function(){var t=_.selectValueMap[a.val()];return t&&!t.disabled?(u.unselectEmptyOption(),u.removeUnknownOption(),_.getViewValueFromOption(t)):null},v.trackBy&&t.$watch((function(){return v.getTrackByValue(h.$viewValue)}),(function(){h.$render()}))),y&&(e(u.emptyOption)(t),a.prepend(u.emptyOption),8===u.emptyOption[0].nodeType?(u.hasEmptyOption=!1,u.registerOption=function(t,e){""===e.val()&&(u.hasEmptyOption=!0,u.emptyOption=e,u.emptyOption.removeClass("ng-scope"),h.$render(),e.on("$destroy",(function(){var t=u.$isEmptyOptionSelected();u.hasEmptyOption=!1,u.emptyOption=void 0,t&&h.$render()})))}):u.emptyOption.removeClass("ng-scope")),t.$watchCollection(v.getWatchables,(function(){var t=_&&u.readValue();if(_)for(var e=_.items.length-1;e>=0;e--){var i=_.items[e];R(i.group)?Me(i.element.parentNode):Me(i.element)}_=v.getOptions();var n={};if(_.items.forEach((function(t){var e;R(t.group)?((e=n[t.group])||(e=r.cloneNode(!1),g.appendChild(e),e.label=null===t.group?"null":t.group,n[t.group]=e),b(t,e)):b(t,g)})),a[0].appendChild(g),h.$render(),!h.$isEmpty(t)){var o=u.readValue();(v.trackBy||m?lt(t,o):t===o)||(h.$setViewValue(o),h.$render())}}))}}}}],cs=["$locale","$interpolate","$log",function(t,e,i){var n=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(r,s,a){var l,c=a.count,u=a.$attr.when&&s.attr(a.$attr.when),h=a.offset||0,p=r.$eval(u)||{},d={},f=e.startSymbol(),_=e.endSymbol(),y=f+c+"-"+h+_,v=b.noop;function g(t){s.text(t||"")}A(a,(function(t,e){var i=o.exec(e);if(i){var n=(i[1]?"-":"")+m(i[2]);p[n]=s.attr(a.$attr[e])}})),A(p,(function(t,i){d[i]=e(t.replace(n,y))})),r.$watch(c,(function(e){var n=parseFloat(e),o=z(n);if(o||n in p||(n=t.pluralCat(n-h)),!(n===l||o&&z(l))){v();var s=d[n];j(s)?(null!=e&&i.debug("ngPluralize: no rule defined for '"+n+"' in "+u),v=I,g()):v=r.$watch(s,g),l=n}}))}}}],us=o("ngRef"),hs=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,i){var n=bi(nt(e)),o=t(i.ngRef),r=o.assign||function(){throw us("nonassign",'Expression in ngRef="{0}" is non-assignable!',i.ngRef)};return function(t,e,s){var a;if(s.hasOwnProperty("ngRefRead")){if("$element"===s.ngRefRead)a=e;else if(!(a=e.data("$"+s.ngRefRead+"Controller")))throw us("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',s.ngRefRead,i.ngRef)}else a=e.data("$"+n+"Controller");r(t,a=a||e),e.on("$destroy",(function(){o(t)===a&&r(t,null)}))}}}}],ms=["$parse","$animate","$compile",function(t,e,i){var n="$$NG_REMOVED",r=o("ngRepeat"),s=function(t,e,i,n,o,r,s){t[i]=n,o&&(t[o]=r),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]},c=function(t,e,i){return Re(i)},u=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(o,m){var p=m.ngRepeat,d=i.$$createComment("end ngRepeat",p),f=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var _=f[1],y=f[2],v=f[3],g=f[4];if(!(f=_.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",_);var b,x=f[3]||f[1],w=f[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);if(g){var B={$id:Re},C=t(g);b=function(t,e,i,n){return w&&(B[w]=e),B[x]=i,B.$index=n,C(t,B)}}return function(t,i,o,m,f){var _=Dt();t.$watchCollection(y,(function(o){var m,y,g,C,S,E,M,T,P,z,F,I,k=i[0],V=Dt();if(v&&(t[v]=o),$(o))P=o,T=b||c;else for(var L in T=b||u,P=[],o)h.call(o,L)&&"$"!==L.charAt(0)&&P.push(L);for(C=P.length,F=new Array(C),m=0;m<C;m++)if(S=o===P?m:P[m],E=o[S],M=T(t,S,E,m),_[M])z=_[M],delete _[M],V[M]=z,F[m]=z;else{if(V[M])throw A(F,(function(t){t&&t.scope&&(_[t.id]=t)})),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,M,E);F[m]={id:M,scope:void 0,clone:void 0},V[M]=!0}for(var j in B&&(B[x]=void 0),_){if(I=Rt((z=_[j]).clone),e.leave(I),I[0].parentNode)for(m=0,y=I.length;m<y;m++)I[m][n]=!0;z.scope.$destroy()}for(m=0;m<C;m++)if(S=o===P?m:P[m],E=o[S],(z=F[m]).scope){g=k;do{g=g.nextSibling}while(g&&g[n]);a(z)!==g&&e.move(Rt(z.clone),null,k),k=l(z),s(z.scope,m,x,E,w,S,C)}else f((function(t,i){z.scope=i;var n=d.cloneNode(!1);t[t.length++]=n,e.enter(t,null,k),k=n,z.clone=t,V[z.id]=z,s(z.scope,m,x,E,w,S,C)}));_=V}))}}}}],ps="ng-hide",ds="ng-hide-animate",fs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,i,n){e.$watch(n.ngShow,(function(e){t[e?"removeClass":"addClass"](i,ps,{tempClasses:ds})}))}}}],_s=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,i,n){e.$watch(n.ngHide,(function(e){t[e?"addClass":"removeClass"](i,ps,{tempClasses:ds})}))}}}],ys=Do((function(t,e,i){t.$watchCollection(i.ngStyle,(function(t,i){i&&t!==i&&A(i,(function(t,i){e.css(i,"")})),t&&e.css(t)}))})),vs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,n,o,r){var s=o.ngSwitch||o.on,a=[],l=[],c=[],u=[],h=function(t,e){return function(i){!1!==i&&t.splice(e,1)}};i.$watch(s,(function(i){for(var n,o;c.length;)t.cancel(c.pop());for(n=0,o=u.length;n<o;++n){var s=Rt(l[n].clone);u[n].$destroy(),(c[n]=t.leave(s)).done(h(c,n))}l.length=0,u.length=0,(a=r.cases["!"+i]||r.cases["?"])&&A(a,(function(i){i.transclude((function(n,o){u.push(o);var r=i.element;n[n.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:n};l.push(s),t.enter(n,r.parent(),r)}))}))}))}}}],gs=Do({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,i,n,o){A(i.ngSwitchWhen.split(i.ngSwitchWhenSeparator).sort().filter((function(t,e,i){return i[e-1]!==t})),(function(t){n.cases["!"+t]=n.cases["!"+t]||[],n.cases["!"+t].push({transclude:o,element:e})}))}}),bs=Do({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,i,n,o){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:o,element:e})}}),xs=o("ngTransclude"),$s=["$compile",function(t){return{restrict:"EAC",compile:function(e){var i=t(e.contents());return e.empty(),function(t,e,n,o,r){if(!r)throw xs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",xt(e));n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude="");var s=n.ngTransclude||n.ngTranscludeSlot;function a(){i(t,(function(t){e.append(t)}))}r((function(t,i){t.length&&function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n.nodeType!==qt||n.nodeValue.trim())return!0}}(t)?e.append(t):(a(),i.$destroy())}),null,s),s&&!r.isSlotFilled(s)&&a()}}}}],As=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,i){if("text/ng-template"===i.type){var n=i.id,o=e[0].text;t.put(n,o)}}}}],ws={$setViewValue:I,$render:I};function Bs(t,e){t.prop("selected",e),t.attr("selected",e)}var Cs=["$element","$scope",function(e,i){var n=this,o=new qe;n.selectValueMap={},n.ngModelCtrl=ws,n.multiple=!1,n.unknownOption=s(t.document.createElement("option")),n.hasEmptyOption=!1,n.emptyOption=void 0,n.renderUnknownOption=function(t){var i=n.generateUnknownOptionValue(t);n.unknownOption.val(i),e.prepend(n.unknownOption),Bs(n.unknownOption,!0),e.val(i)},n.updateUnknownOption=function(t){var i=n.generateUnknownOptionValue(t);n.unknownOption.val(i),Bs(n.unknownOption,!0),e.val(i)},n.generateUnknownOptionValue=function(t){return"? "+Re(t)+" ?"},n.removeUnknownOption=function(){n.unknownOption.parent()&&n.unknownOption.remove()},n.selectEmptyOption=function(){n.emptyOption&&(e.val(""),Bs(n.emptyOption,!0))},n.unselectEmptyOption=function(){n.hasEmptyOption&&Bs(n.emptyOption,!1)},i.$on("$destroy",(function(){n.renderUnknownOption=I})),n.readValue=function(){var t=e.val(),i=t in n.selectValueMap?n.selectValueMap[t]:t;return n.hasOption(i)?i:null},n.writeValue=function(t){var i=e[0].options[e[0].selectedIndex];if(i&&Bs(s(i),!1),n.hasOption(t)){n.removeUnknownOption();var o=Re(t);e.val(o in n.selectValueMap?o:t);var r=e[0].options[e[0].selectedIndex];Bs(s(r),!0)}else n.selectUnknownOrEmptyOption(t)},n.addOption=function(t,e){if(8!==e[0].nodeType){jt(t,'"option value"'),""===t&&(n.hasEmptyOption=!0,n.emptyOption=e);var i=o.get(t)||0;o.set(t,i+1),a()}},n.removeOption=function(t){var e=o.get(t);e&&(1===e?(o.delete(t),""===t&&(n.hasEmptyOption=!1,n.emptyOption=void 0)):o.set(t,e-1))},n.hasOption=function(t){return!!o.get(t)},n.$hasEmptyOption=function(){return n.hasEmptyOption},n.$isUnknownOptionSelected=function(){return e[0].options[0]===n.unknownOption[0]},n.$isEmptyOptionSelected=function(){return n.hasEmptyOption&&e[0].options[e[0].selectedIndex]===n.emptyOption[0]},n.selectUnknownOrEmptyOption=function(t){null==t&&n.emptyOption?(n.removeUnknownOption(),n.selectEmptyOption()):n.unknownOption.parent().length?n.updateUnknownOption(t):n.renderUnknownOption(t)};var r=!1;function a(){r||(r=!0,i.$$postDigest((function(){r=!1,n.ngModelCtrl.$render()})))}var l=!1;function c(t){l||(l=!0,i.$$postDigest((function(){i.$$destroyed||(l=!1,n.ngModelCtrl.$setViewValue(n.readValue()),t&&n.ngModelCtrl.$render())})))}n.registerOption=function(t,e,i,o,r){var s,l;i.$attr.ngValue?i.$observe("value",(function(t){var i,o=e.prop("selected");R(l)&&(n.removeOption(s),delete n.selectValueMap[l],i=!0),l=Re(t),s=t,n.selectValueMap[l]=t,n.addOption(t,e),e.attr("value",l),i&&o&&c()})):o?i.$observe("value",(function(t){var i;n.readValue();var o=e.prop("selected");R(s)&&(n.removeOption(s),i=!0),s=t,n.addOption(t,e),i&&o&&c()})):r?t.$watch(r,(function(t,o){i.$set("value",t);var r=e.prop("selected");o!==t&&n.removeOption(o),n.addOption(t,e),o&&r&&c()})):n.addOption(i.value,e);i.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(n.multiple?c(!0):(n.ngModelCtrl.$setViewValue(null),n.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=n.readValue(),e=i.value;n.removeOption(e),a(),(n.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)}))}}],Ss=function(){return{restrict:"E",require:["select","?ngModel"],controller:Cs,priority:1,link:{pre:function(t,e,i,n){var o=n[0],r=n[1];if(!r)return void(o.registerOption=I);if(o.ngModelCtrl=r,e.on("change",(function(){o.removeUnknownOption(),t.$apply((function(){r.$setViewValue(o.readValue())}))})),i.multiple){o.multiple=!0,o.readValue=function(){var t=[];return A(e.find("option"),(function(e){if(e.selected&&!e.disabled){var i=e.value;t.push(i in o.selectValueMap?o.selectValueMap[i]:i)}})),t},o.writeValue=function(t){A(e.find("option"),(function(e){var i=!!t&&(ot(t,e.value)||ot(t,o.selectValueMap[e.value]));i!==e.selected&&Bs(s(e),i)}))};var a,l=NaN;t.$watch((function(){l!==r.$viewValue||lt(a,r.$viewValue)||(a=Nt(r.$viewValue),r.$render()),l=r.$viewValue})),r.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,i,n){var o=n[1];if(!o)return;var r=n[0];o.$render=function(){r.writeValue(o.$viewValue)}}}}},Es=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,i){var n,o;return R(i.ngValue)||(R(i.value)?n=t(i.value,!0):(o=t(e.text(),!0))||i.$set("value",e.text())),function(t,e,i){var r="$selectController",s=e.parent(),a=s.data(r)||s.parent().data(r);a&&a.registerOption(t,e,i,n,o)}}}}],Ms=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,o){if(o){var r=n.hasOwnProperty("required")||t(n.ngRequired)(e);n.ngRequired||(n.required=!0),o.$validators.required=function(t,e){return!r||!o.$isEmpty(e)},n.$observe("required",(function(t){r!==t&&(r=t,o.$validate())}))}}}}],Ts=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,i){var n,o;return i.ngPattern&&(n=i.ngPattern,o="/"===i.ngPattern.charAt(0)&&c.test(i.ngPattern)?function(){return i.ngPattern}:t(i.ngPattern)),function(t,e,i,r){if(r){var s=i.pattern;i.ngPattern?s=o(t):n=i.pattern;var a=Fs(s,n,e);i.$observe("pattern",(function(t){var i=a;a=Fs(t,n,e),(i&&i.toString())!==(a&&a.toString())&&r.$validate()})),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||j(a)||a.test(e)}}}}}}],Ps=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,o){if(o){var r=n.maxlength||t(n.ngMaxlength)(e),s=Is(r);n.$observe("maxlength",(function(t){r!==t&&(s=Is(t),r=t,o.$validate())})),o.$validators.maxlength=function(t,e){return s<0||o.$isEmpty(e)||e.length<=s}}}}}],zs=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,i,n,o){if(o){var r=n.minlength||t(n.ngMinlength)(e),s=Is(r)||-1;n.$observe("minlength",(function(t){r!==t&&(s=Is(t)||-1,r=t,o.$validate())})),o.$validators.minlength=function(t,e){return o.$isEmpty(e)||e.length>=s}}}}}];function Fs(t,e,i){if(t){if(q(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw o("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,xt(i));return t}}function Is(t){var e=P(t);return z(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!It){var i=ut();(a=j(i)?t.jQuery:i?t[i]:void 0)&&a.fn.on?(s=a,M(a.fn,{scope:Pe.scope,isolateScope:Pe.isolateScope,controller:Pe.controller,injector:Pe.injector,inheritedData:Pe.inheritedData})):s=pe,e=s.cleanData,s.cleanData=function(t){for(var i,n,o=0;null!=(n=t[o]);o++)(i=(s._data(n)||{}).events)&&i.$destroy&&s(n).triggerHandler("$destroy");e(t)},b.element=s,It=!0}}(),M(b,{errorHandlingConfig:i,bootstrap:Mt,copy:st,extend:M,merge:T,equals:lt,element:s,forEach:A,injector:Ke,noop:I,bind:pt,toJson:ft,fromJson:_t,identity:k,isUndefined:j,isDefined:R,isString:q,isFunction:G,isObject:D,isNumber:N,isElement:it,isArray:W,version:Wt,isDate:U,callbacks:{$$counter:0},getTestability:Pt,reloadWithDebugInfo:Tt,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:kt,$$minErr:o,$$csp:ct,$$encodeUriSegment:wt,$$encodeUriQuery:Bt,$$lowercase:m,$$stringify:Ot,$$uppercase:p}),l=function(t){var e=o("$injector"),i=o("ng");function n(t,e,i){return t[e]||(t[e]=i())}var r=n(t,"angular",Object);return r.$$minErr=r.$$minErr||o,n(r,"module",(function(){var t={};return function(o,r,s){var a={};return function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name","module")}(o),r&&t.hasOwnProperty(o)&&(t[o]=null),n(t,o,(function(){if(!r)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var t=[],n=[],l=[],c=h("$injector","invoke","push",n),u={_invokeQueue:t,_configBlocks:n,_runBlocks:l,info:function(t){if(R(t)){if(!D(t))throw i("aobj","Argument '{0}' must be an object","value");return a=t,this}return a},requires:r,name:o,provider:m("$provide","provider"),factory:m("$provide","factory"),service:m("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:m("$provide","decorator",n),animation:m("$animateProvider","register"),filter:m("$filterProvider","register"),controller:m("$controllerProvider","register"),directive:m("$compileProvider","directive"),component:m("$compileProvider","component"),config:c,run:function(t){return l.push(t),this}};return s&&c(s),u;function h(e,i,n,o){return o||(o=t),function(){return o[n||"push"]([e,i,arguments]),u}}function m(e,i,n){return n||(n=t),function(t,r){return r&&G(r)&&(r.$$moduleName=o),n.push([e,i,arguments]),u}}}))}}))}(t),l("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Wn}),t.provider("$compile",_i).directive({a:Oo,input:xr,textarea:xr,form:Yo,script:As,select:Ss,option:Es,ngBind:Br,ngBindHtml:Sr,ngBindTemplate:Cr,ngClass:Tr,ngClassEven:zr,ngClassOdd:Pr,ngCloak:Fr,ngController:Ir,ngForm:Jo,ngHide:_s,ngIf:jr,ngInclude:Rr,ngInit:Or,ngNonBindable:rs,ngPluralize:cs,ngRef:hs,ngRepeat:ms,ngShow:fs,ngStyle:ys,ngSwitch:vs,ngSwitchWhen:gs,ngSwitchDefault:bs,ngOptions:ls,ngTransclude:$s,ngModel:ts,ngList:qr,ngChange:Er,pattern:Ts,ngPattern:Ts,required:Ms,ngRequired:Ms,minlength:zs,ngMinlength:zs,maxlength:Ps,ngMaxlength:Ps,ngValue:wr,ngModelOptions:ns}).directive({ngInclude:Dr,input:$r}).directive(qo).directive(kr),t.provider({$anchorScroll:Qe,$animate:si,$animateCss:ci,$$animateJs:oi,$$animateQueue:ri,$$AnimateRunner:li,$$animateAsyncRun:ai,$browser:hi,$cacheFactory:mi,$controller:Ci,$document:Si,$$isDocumentHidden:Ei,$exceptionHandler:Mi,$filter:yo,$$forceReflow:Ti,$interpolate:Ji,$interval:Xi,$$intervalFactory:Ki,$http:Wi,$httpParamSerializer:ji,$httpParamSerializerJQLike:Ri,$httpBackend:Gi,$xhrFactory:Hi,$jsonpCallbacks:Qi,$location:yn,$log:vn,$parse:Vn,$rootScope:Un,$q:Ln,$$q:jn,$sce:Kn,$sceDelegate:Xn,$sniffer:Qn,$$taskTrackerFactory:to,$templateCache:pi,$templateRequest:no,$$testability:oo,$timeout:so,$window:po,$$rAF:Nn,$$jqLite:je,$$Map:Ne,$$cookieReader:_o})}]).info({angularVersion:"1.8.2"}),b.module("ngLocale",[],["$provide",function(t){var e="one",i="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,n){var o=0|t,r=function(t,e){var i=e;void 0===i&&(i=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var n=Math.pow(10,i);return{v:i,f:(t*n|0)%n}}(t,n);return 1==o&&0==r.v?e:i}})}]),s((function(){Et(t.document,Mt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));var Va=angular,La={exports:{}};!function(t){La.exports=(()=>{const t="object"==typeof window?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let e=null,i=!1;const n=t.WebStreamsPolyfill||{},o=t.isSecureContext;let r=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=o||"MozAppearance"in document.documentElement.style?"iframe":"navigate",a={createWriteStream:function(n,c,u){let h={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},m=0,p=null,d=null,f=null;if(Number.isFinite(c)?([u,c]=[c,u],console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):c&&c.highWaterMark?(console.warn("[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream"),h.size=u,h.writableStrategy=c):h=c||{},!r){e||(e=o?l(a.mitm):function(e){const i="width=200,height=100",n=document.createDocumentFragment(),o={frame:t.open(e,"popup",i),loaded:!1,isIframe:!1,isPopup:!0,remove(){o.frame.close()},addEventListener(...t){n.addEventListener(...t)},dispatchEvent(...t){n.dispatchEvent(...t)},removeEventListener(...t){n.removeEventListener(...t)},postMessage(...t){o.frame.postMessage(...t)}},r=e=>{e.source===o.frame&&(o.loaded=!0,t.removeEventListener("message",r),o.dispatchEvent(new Event("load")))};return t.addEventListener("message",r),o}(a.mitm)),d=new MessageChannel,n=encodeURIComponent(n.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const r={transferringReadable:i,pathname:h.pathname||Math.random().toString().slice(-6)+"/"+n,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+n}};h.size&&(r.headers["Content-Length"]=h.size);const c=[r,"*",[d.port2]];if(i){const t="iframe"===s?void 0:{transform(t,e){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");m+=t.length,e.enqueue(t),p&&(location.href=p,p=null)},flush(){p&&(location.href=p)}};f=new a.TransformStream(t,h.writableStrategy,h.readableStrategy);const e=f.readable;d.port1.postMessage({readableStream:e},[e])}d.port1.onmessage=t=>{t.data.download&&("navigate"===s?(e.remove(),e=null,m?location.href=t.data.download:p=t.data.download):(e.isPopup&&(e.remove(),e=null,"iframe"===s&&l(a.mitm)),l(t.data.download)))},e.loaded?e.postMessage(...c):e.addEventListener("load",(()=>{e.postMessage(...c)}),{once:!0})}let _=[];return!r&&f&&f.writable||new a.WritableStream({write(t){if(!(t instanceof Uint8Array))throw new TypeError("Can only wirte Uint8Arrays");r?_.push(t):(d.port1.postMessage(t),m+=t.length,p&&(location.href=p,p=null))},close(){if(r){const t=new Blob(_,{type:"application/octet-stream; charset=utf-8"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=n,e.click()}else d.port1.postMessage("end")},abort(){_=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},h.writableStrategy)},WritableStream:t.WritableStream||n.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function l(t){if(!t)throw new Error("meh");const e=document.createElement("iframe");return e.hidden=!0,e.src=t,e.loaded=!1,e.name="iframe",e.isIframe=!0,e.postMessage=(...t)=>e.contentWindow.postMessage(...t),e.addEventListener("load",(()=>{e.loaded=!0}),{once:!0}),document.body.appendChild(e),e}try{new Response(new ReadableStream),o&&!("serviceWorker"in navigator)&&(r=!0)}catch(c){r=!0}return(t=>{try{t()}catch(e){}})((()=>{const{readable:t}=new TransformStream,e=new MessageChannel;e.port1.postMessage(t,[t]),e.port1.close(),e.port2.close(),i=!0,Object.defineProperty(a,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})})),a})()}();export{La as S,Va as a,xn as f,ka as j,$n as l,bn as t};
